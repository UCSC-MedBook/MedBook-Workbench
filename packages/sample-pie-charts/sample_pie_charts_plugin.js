var utils=utils||{};
(function(g){g.htmlNamespaceUri="http://www.w3.org/1999/xhtml";g.svgNamespaceUri="http://www.w3.org/2000/svg";g.xlinkUri="http://www.w3.org/1999/xlink";g.hasOwnProperty=function(c,k){var d=c.__proto__||c.constructor.prototype;return k in c&&(!(k in d)||d[k]!==c[k])};g.shuffleArray=function(c){for(var k=c.length,d,f;0!==k;)f=Math.floor(Math.random()*k),--k,d=c[k],c[k]=c[f],c[f]=d;return c};g.isObjInArray=function(c,k){var d=!1;0<=c.indexOf(k)&&(d=!0);return d};g.removeA=function(c){for(var k,d=arguments,
f=d.length,l;1<f&&c.length;)for(k=d[--f];-1!==(l=c.indexOf(k));)c.splice(l,1);return c};g.getKeys=function(c){var k=[],d;for(d in c)k.push(d);return k};g.eliminateDuplicates=function(c){for(var k=[],d=0;d<c.length;d++){var f=c[d];g.isObjInArray(k,f)||k.push(f)}return k};g.keepReplicates=function(c,k,d){for(var f={},l=0;l<c.length;l++){var g=c[l];g in f||(f[g]=0);f[g]++}k=null==k?2:k;c=[];for(g in f)null!=d&&d?f[g]<k&&c.push(g):f[g]>=k&&c.push(g);return c};g.beginsWith=function(c,k){return 0===c.indexOf(k)};
g.endsWith=function(c,k){return-1!==c.indexOf(k,c.length-k.length)};g.lengthOfLongestString=function(c){var k=[],d;for(d in c)k.push(c[d].length);return Math.max.apply(null,k)};g.isNumerical=function(c){return null==c||""===c||isNaN(c)?!1:!0};g.getListBoxSelectedValues=function(c){for(var k=[],d=0;d<c.length;d++){var f=c[d];f.selected&&k.push(f.value)}return k};g.linearInterpolation=function(c,k,d){return(d-k)*c+k};g.rangeLimit=function(c,k,d){"undefined"===typeof k&&(k=-1);"undefined"===typeof d&&
(d=1);return c<k?k:c>d?d:c};g.extractFromJq=function(c){return c.get(0)};g.convertToJq=function(c){$(c);return c};g.extractFromD3=function(c){return c.node()};g.convertToD3=function(c){return d3.select(c)};g.sort_by=function(c,k,d){var f=d?function(f){return d(f[c])}:function(d){return d[c]};k=[-1,1][+!!k];return function(d,c){return d=f(d),c=f(c),k*((d>c)-(c>d))}};g.compareAsNumeric=function(c,k){var d=parseFloat(c),f=parseFloat(k);if(utils.isNumerical(d)&&utils.isNumerical(f)){if(d<f)return-1;if(d>
f)return 1}else if(d==d||f==f){if(d!=d)return-1;if(f!=f)return 1}return 0};g.compareAsString=function(c,k){var d=new String(c),f=new String(k);return"null"==d&&"null"!=f?1:"null"!=d&&"null"==f?-1:d.localeCompare(f)};g.compareAsDate=function(c,k){var d=c,f=k;null==d?d="1000":""==d&&(d="1001");null==f?f="1000":""==f&&(f="1001");return new Date(d)-new Date(f)};g.rgbComponentToHex=function(c){c=c.toString(16);return 1==c.length?"0"+c:c};g.rgbToHex=function(c,k,d){return"#"+this.rgbComponentToHex(c)+this.rgbComponentToHex(k)+
this.rgbComponentToHex(d)};g.centeredRgbaColorMapper=function(c,k,d,f){var l=null,g=null==k?0:k,m=null==d?-1.96:d,t=null==f?1.96:f;return l=function(d){var f=1,k=169,l=169,r=169;d=parseFloat(d);null!=d&&d==d&&(d>g?(k=255,r=l=0,d>t?f=1:(f=(d-g)/(t-g),f=Math.abs(f),c&&(f=Math.log(f)))):d<g?(l=k=0,r=255,d<m?f=1:(f=(d-g)/(m-g),f=Math.abs(f),c&&(f=Math.log(f)))):(r=l=k=255,f=1));return"rgba("+k+","+l+","+r+","+f+")"}};g.setupQuantileColorMapper=function(c,k){var d=k;null==d&&(d="rgb(255,255,217) rgb(237,248,177) rgb(199,233,180) rgb(127,205,187) rgb(65,182,196) rgb(29,145,192) rgb(34,94,168) rgb(37,52,148) rgb(8,29,88)".split(" "));
var f=d.length;return d3.scale.quantile().domain([0,f-1,d3.max(c,function(d){return parseFloat(d)})]).range(d)};g.getXmlDom_url=function(c){xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");xmlhttp.open("GET",c,!1);xmlhttp.send();return xmlDoc=xmlhttp.responseXML};g.getXmlDom_string=function(c){window.DOMParser?(parser=new DOMParser,xmlDoc=parser.parseFromString(c,"text/xml")):(xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),xmlDoc.async=!1,xmlDoc.loadXML(c));return xmlDoc};
g.getDateTime=function(){var c=new Date,k=c.getFullYear(),d=c.getMonth()+1,f=c.getDate(),l=c.getHours(),g=c.getMinutes(),c=c.getSeconds();1==d.toString().length&&(d="0"+d);1==f.toString().length&&(f="0"+f);1==l.toString().length&&(l="0"+l);1==g.toString().length&&(g="0"+g);1==c.toString().length&&(c="0"+c);return k+"/"+d+"/"+f+" "+l+":"+g+":"+c};g.todaysDate=function(){var c=new Date,k=c.getDate();c.getDay();var d=c.getMonth()+1,c=c.getYear();return[,"January","February","March","April","May","June",
"July","August","September","October","November","December"][d]+" "+k+", "+(1E3>c?c+1900:c)};g.pushElemToBack=function(c){var k=c.parentNode;k.insertBefore(c,k.firstChild);return c};g.pullElemToFront=function(c){c.parentNode.appendChild(c);return c};g.removeElemById=function(c){c=document.getElementById(c);c.parentNode.removeChild(c)};g.removeChildElems=function(c){for(;c.firstChild;)c.removeChild(c.firstChild);return c};g.createDivElement=function(c,k){var d=document.createElement("div");null!=c&&
(d.id=c);null!=k&&(d.className=k);return d};g.setElemAttributes=function(c,k,d){d="undefined"===typeof d?null:d;if(null!=k)for(var f in k)c.setAttributeNS(d,f,k[f]);return c};g.swapContainingDivs=function(c,k){var d=k.parentNode;document.getElementById(c.parentNode.id).appendChild(k);document.getElementById(d.id).appendChild(c)};g.simpleAsyncGet=function(c,k){var d=new XMLHttpRequest,d=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");d.onreadystatechange=function(){this.readyState===
(this.DONE||4)&&(200==this.status?k(this.responseText):400==this.status?console.log("There was an error 400"):console.log("status was not 200",this.status))};d.open("GET",c,!0);d.setRequestHeader("X-Requested-With","XMLHttpRequest");d.send(null)};g.getResponse=function(c){var k=null,d=null,d=new XMLHttpRequest;d.open("GET",c,!1);d.onload=function(){k=d.status;200!=k&&console.log("xhr status: "+k+" for "+c)};d.send(null);var f=null;200==k&&(f=d.responseText);return f};g.loadNewSettings=function(c){c=
window.location.pathname+"?query="+JSON.stringify(c);window.open(c,"_self")};g.getQueryObj=function(){var c={};location.search.slice(1).split("&").forEach(function(k){k=k.split("=");c[k[0]]=decodeURIComponent(k[1])||""});return c};g.getQueryStringParameterByName=function(c){c=c.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");c=(new RegExp("[\\?&]"+c+"=([^&#]*)")).exec(location.search);return null==c?"":decodeURIComponent(c[1].replace(/\+/g," "))};g.parseJson=function(c){return JSON.parse(c)};g.serializeJson=
function(c,k){return k?JSON.stringify(c,null,"\t"):JSON.stringify(c)};g.prettyJson=function(c){return this.serializeJson(c,!0)};g.bottomRoundedRectSvgPath=function(c,k,d,f,l){c=""+("M"+c+","+k)+("h"+d);c+="v"+(f-l);c+="a"+l+","+l+" 0 0 1 "+-1*l+","+l;c+="h"+-1*(d-2*l);c+="a"+l+","+l+" 0 0 1 "+-1*l+","+-1*l;c+="v"+-1*(f-l);return c+="z"};g.allRoundedRectSvgPath=function(c,k,d,f,l){c=""+("M"+c+","+(k+l))+("a"+l+","+l+" 0 0 1 "+l+","+-1*l);c+="h"+(d-2*l);c+="a"+l+","+l+" 0 0 1 "+l+","+l;c+="v"+(f-2*
l);c+="a"+l+","+l+" 0 0 1 "+-1*l+","+l;c+="h"+-1*(d-2*l);c+="a"+l+","+l+" 0 0 1 "+-1*l+","+-1*l;c+="v"+-1*(f-2*l);return c+="z"};g.allAngledRectSvgPath=function(c,k,d,f){var l=d>f?d/8:f/8;c=""+("M"+(c+l)+","+k)+("h"+(d-2*l));c+="l"+l+","+l;c+="v"+(f-2*l);c+="l"+-1*l+","+l;c+="h"+-1*(d-2*l);c+="l"+-1*l+","+-1*l;c+="v"+-1*(f-2*l);return c+="z"};g.createSvgRingElement=function(c,k,d,f){function l(d,c,f,k){k=(k-90)*Math.PI/180;return{x:d+f*Math.cos(k),y:c+f*Math.sin(k)}}c=function(d,c,f,k,g){var p=l(d,
c,f,g);d=l(d,c,f,k);return["M",p.x,p.y,"A",f,f,0,180>=g-k?"0":"1",0,d.x,d.y].join(" ")}(c,k,d,0,359.9);k=document.createElementNS(this.svgNamespaceUri,"path");k.setAttributeNS(null,"d",c);if(null!=f)for(var g in f)k.setAttributeNS(null,g,f[g]);return k};g.createSvgCircleElement=function(c,k,d,f){var l=document.createElementNS(this.svgNamespaceUri,"circle");l.setAttributeNS(null,"cx",c);l.setAttributeNS(null,"cy",k);l.setAttributeNS(null,"r",d);if(null!=f)for(var g in f)l.setAttributeNS(null,g,f[g]);
return l};g.createSvgRectElement=function(c,k,d,f,l,g,m){var t=document.createElementNS(this.svgNamespaceUri,"rect");t.setAttributeNS(null,"x",c);t.setAttributeNS(null,"y",k);t.setAttributeNS(null,"rx",d);t.setAttributeNS(null,"ry",f);t.setAttributeNS(null,"width",l);t.setAttributeNS(null,"height",g);if(null!=m)for(var q in m)t.setAttributeNS(null,q,m[q]);return t};g.createSVGPolygonElement=function(c){var k=document.createElementNS(this.svgNamespaceUri,"polygon");if(null!=c)for(var d in c)k.setAttributeNS(null,
d,c[d]);return k};g.createSvgImageElement=function(c,k,d,f,l,g){var m=document.createElementNS(this.svgNamespaceUri,"image");m.setAttributeNS(this.xlinkUri,"href",c);m.setAttributeNS(null,"x",k);m.setAttributeNS(null,"y",d);m.setAttributeNS(null,"width",f);m.setAttributeNS(null,"height",l);if(null!=g)for(var t in g)m.setAttributeNS(null,t,g[t]);return m};g.setCookie=function(c,k,d){if(d){var f=new Date;f.setTime(f.getTime()+864E5*d);d="; expires="+f.toGMTString()}else d="";document.cookie=c+"="+k+
d+"; path=/"};g.getCookie=function(c){c+="=";for(var k=document.cookie.split(";"),d=0;d<k.length;d++){for(var f=k[d];" "==f.charAt(0);)f=f.substring(1,f.length);if(0==f.indexOf(c))return f.substring(c.length,f.length)}return null};g.deleteCookie=function(c){this.setCookie(c,"",-1)};g.getNormalizedVector=function(c){var k=[],d=jStat.min(c),f=jStat.max(c);if(0>d||0==f){console.log("min:"+d+"\tmax:"+f);if(0>d)return null;if(0==f)return c}for(d=0;d<c.length;d++)k.push(c[d]/f);return k};g.computeMarginalEntropy=
function(c,k){for(var d=0,f=[],l=k(c),g=0;g<l.length;g++)f.push({bin:g,count:l[g].length});for(g=0;g<f.length;g++)l=f[g],l.probability=l.count/c.length,l.prod=0==l.probability?0:l.probability*Math.log2(l.probability),d+=l.prod;return-1*d};g.computeJointEntropy=function(c,k,d){if(c.length!=k.length)return null;var f=function(d,c){for(var f=null,k=0;k<d.length;k++){var l=d[k];c>=l.x&&c<l.x+l.dx&&(f=k)}null==f&&(l=d[d.length-1],c-l.x-l.dx<l.dx&&(f=d.length-1));return f},l=d(c),p=d(k);d={};for(var m=
0;m<l.length;m++)for(var t=0;t<p.length;t++){var q=m+"_"+t;d[q]=0}for(m=0;m<c.length;m++)q=f(l,c[m]),t=f(p,k[m]),q=q+"_"+t,d[q]++;k=0;f=g.getKeys(d);for(m=0;m<f.length;m++)q=f[m],l=d[q]/c.length,l=0==l?0:l*Math.log2(l),k+=l;return-1*k};g.mutualInformation=function(c,k,d){d="undefined"===typeof d?c.length:d;var f=d3.layout.histogram().bins(d).frequency(!1);d=g.computeMarginalEntropy(c,f);var l=g.computeMarginalEntropy(k,f);c=g.computeJointEntropy(c,k,f);return d+l-c}})(utils);var eventData=eventData||{};
(function(g){g.getEventElems=function(c,k){var d=[];c.find("event").each(function(c,l){var g=l.getAttribute("type");void 0===k||null===k?d.push(l):g===k&&d.push(l)});return d};g.getEventParentChildren=function(c,k){var d={parent:null,children:[]},f=g.getEventElems(c,k);$(f).each(function(c,f){if("event"!==f.tagName)return"continue";d.parent=f.parentNode.getAttribute("type");$(f.children).each(function(c,f){"event"===f.tagName&&d.children.push(f.getAttribute("type"))})});return d};g.tracebackToRoot=
function(c,k){for(var d=[],f=g.getEventElems(c,k),l=0;l<f.length;l++){var p=f[l],m=[];d.push(m);p=p.getAttribute("type");for(p=g.getEventParentChildren(c,p).parent;void 0!==p&&null!==p;)m.push(p),p=g.getEventParentChildren(c,p).parent}return d};g.OD_eventAlbum=function(){this.album={};this.datatypeSuffixMapping={};this.pivot={};this.getSuffixedEventId=function(c,k){return c+(k in this.datatypeSuffixMapping?this.datatypeSuffixMapping[k]:"")};this.addEvent=function(c,k){var d=new g.OD_event(c);this.album[c.id]=
d;"datatype"in c&&"geneSuffix"in c&&(this.datatypeSuffixMapping[c.datatype]=c.geneSuffix);d.data.setData(k,"numeric"==c.allowedValues||"expression"==c.allowedValues);return d};this.deleteEvent=function(c){delete this.album[c]};this.getAllEventIds=function(){var c=[],k=this.getEventIdsByType(),d;for(d in k)c=c.concat(k[d]);return c};this.getEventIdsByType=function(){for(var c={},k=utils.getKeys(this.album),d=0;d<k.length;d++){var f=k[d],l=this.getEvent(f).metadata.datatype;utils.hasOwnProperty(c,l)||
(c[l]=[]);c[l].push(f)}return c};this.getEventData=function(c){for(var k={},d=utils.getKeys(this.album),f=0;f<d.length;f++){var l=d[f],g=this.getEvent(l).data.getData(c);k[l]=g}return k};this.getAllDataAsList=function(){for(var c=[],k=this.getEventData(),d=utils.getKeys(k),f=0;f<d.length;f++){for(var l=d[f],g=k[l].slice(),m=0;m<g.length;m++)g[m].eventId=l;c=c.concat(g)}return c};this.getAllSampleIds=function(){for(var c=[],k=utils.getKeys(this.album),d=0;d<k.length;d++)var f=this.getEvent(k[d]).data.getAllSampleIds(),
c=c.concat(f);return utils.eliminateDuplicates(c)};this.selectSamples=function(c){var k=this.getAllSampleIds();if(0==c.length)return k;for(var d in c)var f=c[d].value,k=this.getEvent(c[d].eventId).data.selectIds(f,k);return k};this.getEvent=function(c){var k=this.album[c];"undefined"===typeof k&&console.log("getEvent got undefined eventObj for: "+c);return k};this.getAllChildren=function(c,k){for(var d="undefined"===typeof k?[]:k,f=[],l=0;l<c.length;l++)var g=this.getEvent(c[l]).metadata,f=f.concat(getKeys(g.children));
if(0==f.length)return d;d=d.concat(f);return this.getAllChildren(f,d)};this.setPivotScores_dict=function(c,k){this.pivot=null==k?{}:{event:c,scores:k};return this};this.setPivotScores_array=function(c,k){null==k?this.pivot={}:(k=k.sort(utils.sort_by("score")),this.pivot={event:c,scores:k});return this};this.getPivotSortedEvents=function(c){if("undefined"===typeof this.pivot.scores||null==this.pivot.scores)return console.log("getPivotSortedEvents found no pivot scores"),[];for(var k=[],d={},f=0,l=
this.pivot.scores.length;f<l;f++){var g=this.pivot.scores[f],m=g.eventId1,t=g.eventId2,g=g.score;if(m===c)m=t;else if(t!==c)continue;utils.hasOwnProperty(d,m)||(k.push({key:m,val:parseFloat(g)}),d[m]=1)}return k=k.sort(utils.sort_by("val"))};this.getGroupedPivotSorts=function(c,k){console.log("getGroupedPivotSorts");for(var d=["expression data","expression signature"],f={},d=this.getPivotSortedEvents(c),l=[],g=0;g<d.length;g++)l.push(d[g].key);var g=this.getEventIdsByType(),d=utils.getKeys(g),d=utils.removeA(d,
"clinical data"),m;for(m in g){var t=[],q=g[m];if(0==l.length)console.log("pivotSortedEvents.length == 0 for "+m),f[m]=q;else{for(var u=0;u<l.length;u++){var w=this.getSuffixedEventId(l[u],m);utils.isObjInArray(q,w)&&t.push(w)}utils.isObjInArray(d,m)||(t=t.concat(q),t=utils.eliminateDuplicates(t));f[m]=t}}return f};this.getAllPivotScores=function(c,k){var d={},f=this.getEventIdsByType();if(!utils.hasOwnProperty(f,c))return d;for(var f=f[c],l=0;l<f.length;l++){var g=f[l],m=this.pivotSort(g,k);d[g]=
m}return d};this.pivotSort_2=function(c,k){for(var d=this.pivotSort(c,jStat.corrcoeff),f={},l=0;l<d.length;l++){var g=d[l],m=g.event;f[m]=0>g.score?-1:1}for(var d=this.pivotSort(c,k),t=[],q=[],l=0;l<d.length;l++)g=d[l],m=g.event,0>f[m]?q.push(g):t.push(g);t.sort(utils.sort_by("score"));q.sort(utils.sort_by("score"),!0);return t.concat(q)};this.pivotSort=function(c,k){console.log("eventAlbum.pivotSort:",c);"undefined"===typeof k&&(console.log("using default scoringAlgorithm, jStat.corrcoeff"),k=jStat.corrcoeff);
var d=this.getEvent(c);if(null==d)return console.log("eventObj not found for",c),null;for(var f=d.data.getAllSampleIds(),l=d.data.getNullSamples(),f=utils.keepReplicates(f.concat(l),2,!0),l=this.getEventIdsByType()[d.metadata.datatype],g=[],m=0;m<l.length;m++){var t=l[m],q=this.getEvent(t),u=q.data.getAllSampleIds(),w=q.data.getNullSamples(),u=utils.keepReplicates(u.concat(w),2,!0),u=utils.keepReplicates(u.concat(f)),w=d.data.getData(u),q=q.data.getData(u);if(0<q.length){var x=[],r=[],H=null;null==
H&&(H=utils.hasOwnProperty(w[0],"val_orig")?"val_orig":"val");for(var B=null,P=0;P<u.length;P++)null==B&&(B=utils.hasOwnProperty(q[P],"val_orig")?"val_orig":"val"),x.push(w[P][H]),r.push(q[P][B]);u=k(x,r);g.push({event:t,score:u})}else console.log("eventData2 is empty")}g.sort(utils.sort_by("score"));return g};this.multisortEvents=function(c,k){console.log("multisortEvents");console.log("rowSortSteps",c);console.log("colSortSteps",k);var d=this.getEventIdsByType();console.log("groupedEvents",d);var f=
[],l;for(l in d)if("datatype label"!==l){var g=d[l];g.unshift(l+"(+)");g.push(l+"(-)");f=f.concat(g)}g=[];if(null!=k){for(var m=k.getSteps(),t=0;t<m.length;t++){l=m[t];var q=l.name;g.push(q)}g.reverse()}var u=g.slice(0),u=u.concat(f),u=utils.eliminateDuplicates(u);if(null!=c)for(m=c.getSteps().reverse(),t=0;t<m.length;t++){l=m[t];q=l.name;f=l.reverse;q=this.getEvent(q);l=q.metadata.datatype;var w=q.metadata.scoredDatatype;if(null==w)console.log("no scored datatype to sort");else if(q=q.metadata.sortSignatureVector(),
f&&q.reverse(),utils.hasOwnProperty(d,w)){t=d[w].slice(0);m=[];u=[];for(f=0;f<q.length;f++){var x=this.getSuffixedEventId(q[f],w),r=t.indexOf(x);0<=r&&u.push(x);0<=r&&!utils.isObjInArray(g,x)&&(m.push(x),delete t[r]);utils.isObjInArray(g,x)&&delete t[r]}console.log("scoredEventSigWeightOverlap",u.length,u);for(var H in t)m.push(t[H]);f=g.slice(0);for(l in d)if(l===w)f=f.concat(m);else{var g=d[l],B;for(B in g)q=g[B],utils.isObjInArray(f,q)||f.push(q)}u=f;console.log("rowNames.length",u.length,u);break}else console.log(w+
" group has no events")}return u};this.multisortSamples=function(c){var k=this.getAllSampleIds();if(null==c)return console.log("multisortSamples got null steps"),k;console.log("multisortSamples using steps:",c.getSteps());var d=c.getSteps().slice();d.reverse();var f=this;k.sort(function(c,k){for(var g=0,t=0;t<d.length;t++){var q=d[t].name,u=d[t].reverse,w=f.getEvent(q);if(void 0==w||null==w){for(var x in f.datatypeSuffixMapping){var r=q+f.datatypeSuffixMapping[x],w=f.getEvent(r);if(void 0!=w&&null!=
w){q=r;break}}if(void 0==w||null==w){console.log("no event found for sorting: "+q);continue}}g=w.metadata.allowedValues;q=w.data.getData([c,k]);w=q[0].val;r=q[1].val;q=null;q="numeric"==g?utils.compareAsNumeric:"categoric"==g?utils.compareAsString:"expression"==g?utils.compareAsNumeric:"date"==g?utils.compareAsDate:utils.compareAsString;g=q(w,r);q==utils.compareAsNumeric&&(g*=-1);u&&(g*=-1);if(0!=g)break}return g});return k};this.zScoreExpressionRescaling=function(){console.log("zScoreExpressionRescaling");
var c=this.getEventIdsByType();if(!utils.hasOwnProperty(c,"expression data"))return console.log("no expression"),null;for(var c=c["expression data"],k={},d={stats:k},f=[],g=0;g<c.length;g++){var p=c[g],m=this.getEvent(p).data.getStats();k[p]={};k[p]=m;for(var m=this.getEvent(p).data.getData(),t=0;t<m.length;t++){var q=m[t];utils.hasOwnProperty(q,"val_orig")&&(q.val=q.val_orig);var u=q.val;q.val_orig=u;utils.isNumerical(u)&&(q.val=(u-k[p].mean)/k[p].sd,f.push(q.val))}}d.maxVal=jStat.max(f);d.minVal=
jStat.min(f);return d};this.betweenMeansExpressionRescaling=function(c,k,d){console.log("betweenMeansExpressionRescaling",c,k,d);k=this.getEvent(c).data.selectIds(k);var f=null;null==d?(f=this.getEvent(c).data.selectIds(d),f=f.concat(k),f=utils.eliminateDuplicates(f)):f=this.getEvent(c).data.selectIds(d);c=this.getEventIdsByType();if(!utils.hasOwnProperty(c,"expression data"))return console.log("no expression"),null;c=c["expression data"];d={};for(var g={meanVals:d},p=[],m=0;m<c.length;m++){var t=
c[m];d[t]={};d[t].group1=this.getEvent(t).data.getStats(k).mean;d[t].group2=this.getEvent(t).data.getStats(f).mean;for(var q=(d[t].group2-d[t].group1)/2,t=this.getEvent(t).data.getData(),u=0;u<t.length;u++){var w=t[u];utils.hasOwnProperty(w,"val_orig")&&(w.val=w.val_orig);var x=w.val;w.val_orig=x;utils.isNumerical(x)&&(w.val=x-q,p.push(w.val))}}g.maxVal=jStat.max(p);g.minVal=jStat.min(p);return g};this.yuliaExpressionRescaling=function(c,k){console.log("yuliaExpressionRescaling",c,k);var d=this.getEvent(c).data.selectIds(k),
f=this.getEventIdsByType();if(!utils.hasOwnProperty(f,"expression data"))return console.log("no expression"),null;for(var f=f["expression data"],g={},p={meanVals:g},m=[],t=0;t<f.length;t++){var q=f[t];g[q]=this.getEvent(q).data.getStats(d).mean;for(var u=this.getEvent(q).data.getData(),w=0;w<u.length;w++){var x=u[w];utils.hasOwnProperty(x,"val_orig")&&(x.val=x.val_orig);var r=x.val;x.val_orig=r;utils.isNumerical(r)&&(x.val=r-g[q],m.push(x.val))}}p.maxVal=jStat.max(m);p.minVal=jStat.min(m);return p};
this.eventwiseMedianRescaling=function(){console.log("eventwiseMedianRescaling");var c=this.getEventIdsByType();if(!utils.hasOwnProperty(c,"expression data"))return console.log("no expression"),null;for(var c=c["expression data"],k={},d={stats:k},f=[],g=0;g<c.length;g++){var p=c[g];this.getEvent(p);var m=this.getEvent(p).data.getStats();k[p]={};k[p]=m;for(var m=this.getEvent(p).data.getData(),t=0;t<m.length;t++){var q=m[t];utils.hasOwnProperty(q,"val_orig")&&(q.val=q.val_orig);var u=q.val;q.val_orig=
u;utils.isNumerical(u)&&(q.val=u-k[p].median,f.push(q.val))}}d.maxVal=jStat.max(f);d.minVal=jStat.min(f);return d};this.samplewiseMedianRescaling=function(){console.log("samplewiseMedianRescaling");var c=this.getEventIdsByType();if(!utils.hasOwnProperty(c,"expression data"))return console.log("no expression"),null;for(var c=c["expression data"],k={},d={stats:k},f=[],g=this.getAllSampleIds(),p=0;p<g.length;p++){var m=g[p];k[m]={};for(var t=this.getEventData([m]),q=[],u=0;u<c.length;u++){var w=c[u];
if(utils.hasOwnProperty(t,w)){if(w=t[w][0],w.id===m){utils.hasOwnProperty(w,"val_orig")&&(w.val=w.val_orig);var x=w.val;w.val_orig=x;utils.isNumerical(x)&&q.push(x)}}else console.log(w+" was not found for "+m)}q=jStat.median(q);k[m]["samplewise median"]=q;if(isNaN(q))console.log("sample median for "+m+" is NaN.");else for(u=0;u<c.length;u++)w=c[u],utils.hasOwnProperty(t,w)?(w=t[w][0],w.id===m&&(utils.hasOwnProperty(w,"val_orig")&&(w.val=w.val_orig),x=w.val,w.val_orig=x,utils.isNumerical(x)&&(w.val=
x-k[m]["samplewise median"],f.push(x)))):console.log(w+" was not found for "+m)}d.maxVal=jStat.max(f);d.minVal=jStat.min(f);return d};this.bivariateNormalization=function(){};this.fillInMissingSamples=function(c){for(var k=this.getAllSampleIds(),d=this.getEventIdsByType(),f=0,g=utils.getKeys(d).length;f<g;f++)for(var p=utils.getKeys(d)[f],m=0;m<d[p].length;m++){var t=d[p][m],q=this.getEvent(t).data.getAllSampleIds();if(0!=k.length-q.length){for(var q=utils.keepReplicates(k.concat(q),2,!0),u={},w=
0;w<q.length;w++)u[q[w]]=c;this.getEvent(t).data.setData(u)}}return this};this.fillInDatatypeLabelEvents=function(c){for(var k=this.getEventIdsByType(),k=utils.getKeys(k),d=0,f=k.length;d<f;d++){var g=k[d];"datatype label"!==g&&(this.addEvent({id:g+"(+)",name:g+"(+)",displayName:g+"(+)",description:null,datatype:"datatype label",allowedValues:null},{}),this.addEvent({id:g+"(-)",name:g+"(-)",displayName:g+"(-)",description:null,datatype:"datatype label",allowedValues:null},{}))}this.fillInMissingSamples(c)}};
g.OD_event=function(c){this.metadata=new g.OD_eventMetadata(c);this.data=new g.OD_eventDataCollection};g.OD_eventMetadata=function(c){this.id=c.id;this.name=c.name;this.displayName=c.displayName;this.description=c.description;this.datatype=c.datatype;this.allowedValues=c.allowedValues;this.minAllowedVal=c.minAllowedVal;this.maxAllowedVal=c.maxAllowedVal;this.weightedGeneVector=[];this.setScoreRange=function(c,d){this.minAllowedVal=c;this.maxAllowedVal=d};this.setWeightVector=function(c,d){this.weightedGeneVector=
c;this.scoredDatatype=d;return this};this.sortSignatureVector=function(c){var d=this.weightedGeneVector.slice(0);d.sort(function(d,c){return utils.compareAsNumeric(d.weight,c.weight)});for(var f=[],g=0;g<d.length;g++)f.push(d[g].gene);c||f.reverse();return f}};g.OD_eventDataCollection=function(){function c(c,d){this.id=c;this.val=d}this.dataCollection=[];this.getPercentNullData=function(){var c=this.getValueCounts(),d=0;null in c&&(d=this.getAllSampleIds().length,d=c[null]/d);return d};this.getValueCounts=
function(c){var d={};c=this.getData(c);for(var f=0;f<c.length;f++){var g=c[f].val;utils.hasOwnProperty(d,g)||(d[g]=0);d[g]+=1}return d};this.getValues=function(c){var d=this.getValueCounts(),d=utils.getKeys(d);null!=c&&1==c&&(d=utils.eliminateDuplicates(d));return d};this.setData=function(g,d){for(var f in g){var l=g[f];"NaN"!=l&&"null"!=l&&""!=l&&"N/A"!=l&&(null!=d&&1==d&&(l=parseFloat(l)),this.dataCollection.push(new c(f,l)))}return this};this.getData=function(g){var d=this.getAllSampleIds(!0);
null==g&&(g=utils.getKeys(d));for(var f=[],l=0;l<g.length;l++){var p=g[l];p in d?f.push(this.dataCollection[d[p]]):f.push(new c(p,null))}return f};this.getAllSampleIds=function(c){for(var d={},f=0;f<this.dataCollection.length;f++)d[this.dataCollection[f].id]=f;return c?d:utils.getKeys(d)};this.getNullSamples=function(c){var d=[];c=this.getData(c);for(var f=0;f<c.length;f++){var g=c[f];null==g.val&&d.push(g.id)}return d};this.sortSamples=function(c,d){var f=this.getData(c),g=compareSamplesAsStrings;
d=null==d?"categoric":d.toLowerCase();"numeric"==d||"expression"==d?g=compareSamplesAsNumeric:"date"==d&&(g=compareSamplesAsDate);f.sort(g);for(var g=[],p=0;p<f.length;p++)g.push(f[p].id);return g};this.selectIds=function(c,d){for(var f=[],g=null==d?this.getData():this.getData(d),p=0;p<g.length;p++){var m=g[p];m.val==c&&f.push(m.id)}return f};this.getStats=function(c,d){"undefined"===typeof d&&(d=3);var f={min:0,max:0,mean:0,median:0,sd:0,meddev:0,meandev:0,percentNullData:0};f.percentNullData=this.getPercentNullData();
f.percentNullData=f.percentNullData.toPrecision(d);if(1==f.percentNullData)return f;var g=this.getAllSampleIds(!0);null==c&&(c=utils.getKeys(g));for(var p=[],m=0;m<c.length;m++){var t=c[m];if(t in g){var t=this.dataCollection[g[t]],q=null,q=utils.hasOwnProperty(t,"val_orig")?t.val_orig:t.val;utils.isNumerical(q)&&p.push(q)}}f.mean=jStat.mean(p).toPrecision(d);f.sd=jStat.stdev(p).toPrecision(d);f.median=jStat.median(p).toPrecision(d);f.meddev=jStat.meddev(p).toPrecision(d);f.meandev=jStat.meandev(p).toPrecision(d);
f.min=jStat.min(p).toPrecision(d);f.max=jStat.max(p).toPrecision(d);return f}};g.sortingSteps=function(c){this.steps=[];null!=c&&(this.steps=c);this.getSteps=function(){return this.steps};this.getIndex=function(c){for(var d=0;d<this.steps.length;d++)if(this.steps[d].name==c)return d;return-1};this.addStep=function(c,d){var f=this.getIndex(c);0<=f?(f=this.steps.splice(f,1)[0],d||(f.reverse=!f.reverse),this.steps.push(f)):this.steps.push({name:c,reverse:!1})};this.removeStep=function(c){c=this.getIndex(c);
0<=c&&this.steps.splice(c,1)};this.clearSteps=function(){this.steps.splice(0,this.steps.length)}};g.sampleSelectionCriteria=function(){this.criteria=[];this.getCriteria=function(){return this.criteria};this.addCriteria=function(c,g){var d={eventId:c,value:g},f;for(f in this.criteria)if(JSON.stringify(this.criteria[f])==JSON.stringify(d))return;this.criteria.push(d)};this.removeCriteria=function(c,g){for(var d=0;d<this.criteria.length;d++)if(this.criteria[d].eventId==c&&this.criteria[d].value==g){this.criteria.splice(d,
1);break}};this.clearCriteria=function(){this.criteria.splice(0,this.criteria.length)}}})(eventData);var medbookDataLoader=medbookDataLoader||{};
(function(g){g.transposeClinicalData=function(c,g){for(var d={},f=0;f<c.length;f++){var l=c[f],p=l[g],m;for(m in l)m in d||(d[m]={}),d[m][p]=l[m]}return d};g.getClinicalData=function(c,k){for(var d=utils.getResponse(c).split("\n"),f=[],l=[],p=[],m=0;m<d.length;m++){var t=d[m];utils.beginsWith(t,"#")?l.push(t):utils.beginsWith(t,"STRING")?p=t.split("\t"):f.push(t)}d=d3.tsv.parse(f.join("\n"));f=this.transposeClinicalData(d,"SAMPLE_ID");delete f.SAMPLE_ID;l=utils.getKeys(f);for(m=0;m<l.length;m++){var t=
l[m],q=f[t],u=p[m+1],w="categoric";"number"==u.toLowerCase()?w="numeric":"date"==u.toLowerCase()&&(w="date");g.loadEventBySampleData(k,t,"","clinical data",w,q)}return d};g.getMutationData=function(c,g){for(var d=utils.getResponse(c),f=d3.tsv.parse(d),d={},l=0;l<f.length;l++){var p=f[l],m=p.Hugo_Symbol,p=p.Tumor_Sample_Barcode,p=p.replace(/_/g,"-"),p=p.replace(/[A-Z]$/,"");utils.hasOwnProperty(d,m)||(d[m]={},d[m].metadata={id:m+"_mut",name:null,displayName:null,description:null,datatype:"mutation data",
allowedValues:"categoric"},d[m].data={});d[m].data[p]=!0}f=utils.getKeys(d);for(l=0;l<f.length;l++)m=d[f[l]],g.addEvent(m.metadata,m.data);return d};g.getExpressionData=function(c,k){g.getGeneBySampleData(c,k,"_mRNA","expression data","numeric")};g.getViperData=function(c,k){g.getGeneBySampleData(c,k,"_viper","viper data","numeric")};g.getGeneBySampleData=function(c,k,d,f,l){c=utils.getResponse(c);c=d3.tsv.parse(c);for(var p in c){var m=c[p],t=m[""];delete m[""];g.loadEventBySampleData(k,t,d,f,l,
m)}};g.loadEventBySampleData=function(c,g,d,f,l,p){return c.addEvent({geneSuffix:d,id:g+d,name:f+" for "+g,displayName:g,description:null,datatype:f,allowedValues:l},p)};g.mongoClinicalData=function(c,k){for(var d=0;d<c.length;d++){var f=c[d],l=null;if(utils.hasOwnProperty(f,"sample"))l=f.sample;else if(hasOwnProperty(f,"Sample"))l=f.Sample;else if(hasOwnProperty(f,"Patient ID"))l=f["Patient ID"];else if(hasOwnProperty(f,"Patient ID "))l=f["Patient ID "];else{console.log("no sample ID found in clinical doc: "+
prettyJson(f));continue}l=l.trim();if("Patient ID"!==l&&"Patient ID "!==l)for(var p=utils.getKeys(f),m=0;m<p.length;m++){var t=p[m];if(!utils.isObjInArray(["_id","sample","Sample"],t)){var q=k.getEvent(t);null==q&&(q=g.loadEventBySampleData(k,t,"","clinical data","categoric",[]));var u={};u[l]=f[t];q.data.setData(u)}}}return q};g.mongoExpressionData=function(c,k){for(var d=0;d<c.length;d++){var f=c[d],l=null;if(utils.hasOwnProperty(f,"gene"))l=f.gene;else if(utils.hasOwnProperty(f,"id"))l=f.id;else{console.log("no gene identifier found in expression doc: "+
utils.prettyJson(f));continue}var l=l.trim(),p=l+"_mRNA";utils.getKeys(f);var m=f.samples,f={},t;for(t in m)f[t]=m[t].rsem_quan_log2;p=k.getEvent(p);null==p?g.loadEventBySampleData(k,l,"_mRNA","expression data","numeric",f):p.data.setData(f)}};g.mongoExpressionData_old=function(c,k){for(var d=0;d<c.length;d++){var f=c[d],l=null;if(utils.hasOwnProperty(f,"gene"))l=f.gene;else if(utils.hasOwnProperty(f,"id"))l=f.id;else{console.log("no gene identifier found in expression doc: "+utils.prettyJson(f));
continue}for(var l=l.trim(),p=l+"_mRNA",m=utils.getKeys(f),t=0;t<m.length;t++){var q=m[t];if(!utils.isObjInArray(["_id","gene","id"],q)){var u=k.getEvent(p);null==u&&(u=g.loadEventBySampleData(k,l,"_mRNA","expression data","numeric",[]));var w={};w[q]=parseFloat(f[q]);u.data.setData(w)}}}return u};g.getSignature=function(c,g){var d=utils.getResponse(c),d=d3.tsv.parse(d),f=c.split("/").pop(),l=g.getEvent(f);null==l&&(g.addEvent({id:f,name:null,displayName:null,description:null,datatype:"expression signature",
allowedValues:"numeric",weightedGeneVector:d},[]),l=g.getEvent(f));return l};g.loadSignatureObj=function(c,k){for(var d={},f=0;f<c.length;f++){var l=c[f],p=l.id,m=l.name,l=l.val;utils.hasOwnProperty(d,m)||(d[m]={});d[m][p]=l}p=utils.getKeys(d);for(f=0;f<p.length;f++){var m=p[f],l=d[m],t;t=m.split("_v");t.pop();t=t.join("_v");t=utils.endsWith(t,"_kinase_viper")?"kinase target activity":utils.endsWith(t,"_tf_viper")||utils.beginsWith(t,"tf_viper_")?"tf target activity":"expression signature";var q=
k.getEvent(m);null==q&&(q=g.loadEventBySampleData(k,m,"",t,"numeric",{}),q.metadata.setWeightVector([],"expression data"));q.data.setData(l)}};g.loadSignatureWeightsObj=function(c,k){var d=c.name+"_v"+c.version,f;f=utils.endsWith(c.name,"_kinase_viper")?"kinase target activity":utils.endsWith(c.name,"_tf_viper")||utils.beginsWith(c.name,"tf_viper_")?"tf target activity":"expression signature";for(var l=k.getEvent(d),p=[],m=c.signature,t=utils.getKeys(m),q=0;q<t.length;q++){var u=t[q];p.push({gene:u,
weight:m[u].weight})}null==l&&(l=g.loadEventBySampleData(k,d,"",f,"numeric",[]));l.metadata.setWeightVector(p,"expression data");return l};g.loadBmegSignatureWeightsAsSamples=function(c,k){var d=utils.getKeys(c.query.weights),f=c.features,l=[],p=[],m;for(m in f)l.push({gene:m,weight:f[m]}),p.push(m);var p=utils.eliminateDuplicates(p),t=c.signatures,f={},q={},u;for(u in t){m=t[u];q[u]=m.score;var w=m.weights;m=d.slice(0);m=m.concat(utils.getKeys(w));m=utils.eliminateDuplicates(m);for(var x=0,r=m.length;x<
r;x++){var H=m[x];if(utils.isObjInArray(d,H)||utils.isObjInArray(p,H)){var B=w[H];"undefined"!==typeof B&&(utils.hasOwnProperty(f,H)||(f[H]={}),f[H][u]=B)}}}console.log("num genes:"+utils.getKeys(f).length);g.loadEventBySampleData(k,"query_score","","signature query score","numeric",q).metadata.setWeightVector(l,"signature weight");m=utils.getKeys(f);for(d=0;d<m.length;d++)H=m[d],l=H+"_weight",p=k.getEvent(l),null==p?(p=g.loadEventBySampleData(k,H,"_weight","signature weight","numeric",f[H]),p.metadata.setScoreRange(-1,
1)):console.log("loadBmegSignatureWeightsAsSamples:","existing event for: "+l)};g.loadPivotScores=function(c,g){for(var d=[],f=0;f<c.length;f++){var l=c[f],p=l.name_1,m=function(c,d,f){var g;"signature"===d?g=c+"_v"+f:"expression"===d&&(g=c);return g},p=m(p,l.datatype_1,l.version_1),t=l.name_2,t=m(t,l.datatype_2,l.version_2);d.push({eventId1:p,eventId2:t,score:l.score})}g.setPivotScores_array(null,d)}})(medbookDataLoader);var HighchartsAdapter=function(){function g(d){function f(c,d,g){c.removeEventListener(d,g,!1)}function g(c,d,f){f=c.HCProxiedMethods[f.toString()];c.detachEvent("on"+d,f)}function k(c,d){var l=c.HCEvents,m,u,p;if(c.removeEventListener)m=f;else if(c.attachEvent)m=g;else return;d?(u={},u[d]=!0):u=l;for(p in u)if(l[p])for(u=l[p].length;u--;)m(c,p,l[p][u])}d.HCExtended||Highcharts.extend(d,{HCExtended:!0,HCEvents:{},bind:function(d,f){var g=this,k=this.HCEvents,l;g.addEventListener?g.addEventListener(d,
f,!1):g.attachEvent&&(l=function(c){f.call(g,c)},g.HCProxiedMethods||(g.HCProxiedMethods={}),g.HCProxiedMethods[f.toString()]=l,g.attachEvent("on"+d,l));k[d]===c&&(k[d]=[]);k[d].push(f)},unbind:function(c,d){var l,m;c?(l=this.HCEvents[c]||[],d?(m=HighchartsAdapter.inArray(d,l),-1<m&&(l.splice(m,1),this.HCEvents[c]=l),this.removeEventListener?f(this,c,d):this.attachEvent&&g(this,c,d)):(k(this,c),this.HCEvents[c]=[])):(k(this),this.HCEvents={})},trigger:function(c,d){var f=this.HCEvents[c]||[],g=f.length,
k,l,m;l=function(){d.defaultPrevented=!0};for(k=0;k<g;k++){m=f[k];if(d.stopped)break;d.preventDefault=l;d.target=this;d.type||(d.type=c);!1===m.call(this,d)&&d.preventDefault()}}});return d}var c,k=document,d=[],f=[],l,p;Math.easeInOutSine=function(c,d,f,g){return-f/2*(Math.cos(Math.PI*c/g)-1)+d};return{init:function(c){k.defaultView||(this._getStyle=function(c,d){var f;return c.style[d]?c.style[d]:("opacity"===d&&(d="filter"),f=c.currentStyle[d.replace(/\-(\w)/g,function(c,d){return d.toUpperCase()})],
"filter"===d&&(f=f.replace(/alpha\(opacity=([0-9]+)\)/,function(c,d){return d/100})),""===f?1:f)},this.adapterRun=function(c,d){var f={width:"clientWidth",height:"clientHeight"}[d];if(f)return c.style.zoom=1,c[f]-2*parseInt(HighchartsAdapter._getStyle(c,"padding"),10)});Array.prototype.forEach||(this.each=function(c,d){for(var f=0,g=c.length;f<g;f++)if(!1===d.call(c[f],c[f],f,c))return f});Array.prototype.indexOf||(this.inArray=function(c,d){var f,g=0;if(d)for(f=d.length;g<f;g++)if(d[g]===c)return g;
return-1});Array.prototype.filter||(this.grep=function(c,d){for(var f=[],g=0,k=c.length;g<k;g++)d(c[g],g)&&f.push(c[g]);return f});p=function(c,d,f){this.options=d;this.elem=c;this.prop=f};p.prototype={update:function(){var d;d=this.paths;var f=this.elem,g=f.element;d&&g?f.attr("d",c.step(d[0],d[1],this.now,this.toD)):f.attr?g&&f.attr(this.prop,this.now):(d={},d[f]=this.now+this.unit,Highcharts.css(f,d));this.options.step&&this.options.step.call(this.elem,this.now,this)},custom:function(c,d,g){var k=
this,m=function(c){return k.step(c)},r;this.startTime=+new Date;this.start=c;this.end=d;this.unit=g;this.now=this.start;this.pos=this.state=0;m.elem=this.elem;m()&&1===f.push(m)&&(l=setInterval(function(){for(r=0;r<f.length;r++)f[r]()||f.splice(r--,1);f.length||clearInterval(l)},13))},step:function(c){var d=+new Date,f;f=this.options;var g;if(this.elem.stopAnimation)f=!1;else if(c||d>=f.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();c=this.options.curAnim[this.prop]=
!0;for(g in f.curAnim)!0!==f.curAnim[g]&&(c=!1);c&&f.complete&&f.complete.call(this.elem);f=!1}else g=d-this.startTime,this.state=g/f.duration,this.pos=f.easing(g,0,1,f.duration),this.now=this.start+(this.end-this.start)*this.pos,this.update(),f=!0;return f}};this.animate=function(d,f,g){var k,l="",r,H,B;d.stopAnimation=!1;if("object"!==typeof g||null===g)k=arguments,g={duration:k[2],easing:k[3],complete:k[4]};"number"!==typeof g.duration&&(g.duration=400);g.easing=Math[g.easing]||Math.easeInOutSine;
g.curAnim=Highcharts.extend({},f);for(B in f)H=new p(d,g,B),r=null,"d"===B?(H.paths=c.init(d,d.d,f.d),H.toD=f.d,k=0,r=1):d.attr?k=d.attr(B):(k=parseFloat(HighchartsAdapter._getStyle(d,B))||0,"opacity"!==B&&(l="px")),r||(r=parseFloat(f[B])),H.custom(k,r,l)}},_getStyle:function(c,d){return window.getComputedStyle(c).getPropertyValue(d)},getScript:function(c,d){var f=k.getElementsByTagName("head")[0],g=k.createElement("script");g.type="text/javascript";g.src=c;g.onload=d;f.appendChild(g)},inArray:function(c,
f){return f.indexOf?f.indexOf(c):d.indexOf.call(f,c)},adapterRun:function(c,d){return parseInt(HighchartsAdapter._getStyle(c,d),10)},grep:function(c,f){return d.filter.call(c,f)},map:function(c,d){for(var f=[],g=0,k=c.length;g<k;g++)f[g]=d.call(c[g],c[g],g,c);return f},offset:function(c){for(var d=0,f=0;c;)d+=c.offsetLeft,f+=c.offsetTop,c=c.offsetParent;return{left:d,top:f}},addEvent:function(c,d,f){g(c).bind(d,f)},removeEvent:function(c,d,f){g(c).unbind(d,f)},fireEvent:function(c,d,f,g){var l;k.createEvent&&
(c.dispatchEvent||c.fireEvent)?(l=k.createEvent("Events"),l.initEvent(d,!0,!0),l.target=c,Highcharts.extend(l,f),c.dispatchEvent?c.dispatchEvent(l):c.fireEvent(d,l)):!0===c.HCExtended&&(f=f||{},c.trigger(d,f));f&&f.defaultPrevented&&(g=null);g&&g(f)},washMouseEvent:function(c){return c},stop:function(c){c.stopAnimation=!0},each:function(c,d){return Array.prototype.forEach.call(c,d)}}}();
(function(){function g(a,b){var e;a||(a={});for(e in b)a[e]=b[e];return a}function c(){var a,b=arguments,e,h={},n=function(a,b){var e,h;"object"!==typeof a&&(a={});for(h in b)b.hasOwnProperty(h)&&(e=b[h],a[h]=e&&"object"===typeof e&&"[object Array]"!==Object.prototype.toString.call(e)&&"number"!==typeof e.nodeType?n(a[h]||{},e):b[h]);return a};!0===b[0]&&(h=b[1],b=Array.prototype.slice.call(b,2));e=b.length;for(a=0;a<e;a++)h=n(h,b[a]);return h}function k(a,b){return parseInt(a,b||10)}function d(a){return"string"===
typeof a}function f(a){return"object"===typeof a}function l(a){return"[object Array]"===Object.prototype.toString.call(a)}function p(a){return"number"===typeof a}function m(a){return J.log(a)/J.LN10}function t(a){return J.pow(10,a)}function q(a,b){for(var e=a.length;e--;)if(a[e]===b){a.splice(e,1);break}}function u(a){return a!==G&&null!==a}function w(a,b,e){var h,n;if(d(b))u(e)?a.setAttribute(b,e):a&&a.getAttribute&&(n=a.getAttribute(b));else if(u(b)&&f(b))for(h in b)a.setAttribute(h,b[h]);return n}
function x(a){return l(a)?a:[a]}function r(){var a=arguments,b,e,h=a.length;for(b=0;b<h;b++)if(e=a[b],"undefined"!==typeof e&&null!==e)return e}function H(a,b){La&&b&&b.opacity!==G&&(b.filter="alpha(opacity="+100*b.opacity+")");g(a.style,b)}function B(a,b,e,h,n){a=F.createElement(a);b&&g(a,b);n&&H(a,{padding:0,border:ma,margin:0});e&&H(a,e);h&&h.appendChild(a);return a}function P(a,b){var e=function(){};e.prototype=new a;g(e.prototype,b);return e}function R(a,b,e,h){var n=ia.lang;a=+a||0;var y=-1===
b?(a.toString().split(".")[1]||"").length:isNaN(b=aa(b))?2:b;b=void 0===e?n.decimalPoint:e;h=void 0===h?n.thousandsSep:h;n=0>a?"-":"";e=String(k(a=aa(a).toFixed(y)));var c=3<e.length?e.length%3:0;return n+(c?e.substr(0,c)+h:"")+e.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+h)+(y?b+aa(a-e).toFixed(y).slice(2):"")}function N(a,b){return Array((b||2)+1-String(a).length).join(0)+a}function Ca(a,b,e){var h=a[b];a[b]=function(){var a=Array.prototype.slice.call(arguments);a.unshift(h);return e.apply(this,a)}}
function ba(a,b){for(var e="{",h=!1,n,y,c,d,f,g=[];-1!==(e=a.indexOf(e));){n=a.slice(0,e);if(h){y=n.split(":");c=y.shift().split(".");f=c.length;n=b;for(d=0;d<f;d++)n=n[c[d]];y.length&&(y=y.join(":"),c=/\.([0-9])/,d=ia.lang,/f$/.test(y)?(f=(f=y.match(c))?f[1]:-1,n=R(n,f,d.decimalPoint,-1<y.indexOf(",")?d.thousandsSep:"")):n=ab(y,n))}g.push(n);a=a.slice(e+1);e=(h=!h)?"}":"{"}g.push(a);return g.join("")}function xa(a){return J.pow(10,ca(J.log(a)/J.LN10))}function ka(a,b,e,h){var n;e=r(e,1);n=a/e;b||
(b=[1,2,2.5,5,10],h&&!1===h.allowDecimals&&(1===e?b=[1,2,5,10]:.1>=e&&(b=[1/e])));for(h=0;h<b.length&&!(a=b[h],n<=(b[h]+(b[h+1]||b[h]))/2);h++);return a*e}function la(){this.symbol=this.color=0}function Fa(a,b){var e=a.length,h,n;for(n=0;n<e;n++)a[n].ss_i=n;a.sort(function(a,e){h=b(a,e);return 0===h?a.ss_i-e.ss_i:h});for(n=0;n<e;n++)delete a[n].ss_i}function qa(a){for(var b=a.length,e=a[0];b--;)a[b]<e&&(e=a[b]);return e}function na(a){for(var b=a.length,e=a[0];b--;)a[b]>e&&(e=a[b]);return e}function oa(a,
b){for(var e in a)a[e]&&a[e]!==b&&a[e].destroy&&a[e].destroy(),delete a[e]}function S(a){bb||(bb=B(Pa));a&&bb.appendChild(a);bb.innerHTML=""}function fa(a,b){var e="Highcharts error #"+a+": www.highcharts.com/errors/"+a;if(b)throw e;Q.console&&console.log(e)}function O(a){return parseFloat(a.toPrecision(14))}function ra(a,b){Ga=r(a,b.animation)}function v(){var a=ia.global.useUTC,b=a?"getUTC":"get",e=a?"setUTC":"set";Ta=6E4*(a&&ia.global.timezoneOffset||0);cb=a?Date.UTC:function(a,b,e,c,d,f){return(new Date(a,
b,r(e,1),r(c,0),r(d,0),r(f,0))).getTime()};kb=b+"Minutes";lb=b+"Hours";mb=b+"Day";Wa=b+"Date";db=b+"Month";eb=b+"FullYear";ub=e+"Minutes";vb=e+"Hours";nb=e+"Date";wb=e+"Month";xb=e+"FullYear"}function I(){}function U(a,b,e,h){this.axis=a;this.pos=b;this.type=e||"";this.isNew=!0;e||h||this.addLabel()}function M(){this.init.apply(this,arguments)}function da(a,b,e,h,n,y){var c=a.chart.inverted;this.axis=a;this.isNegative=e;this.options=b;this.x=h;this.total=null;this.points={};this.stack=n;this.percent=
"percent"===y;this.alignOptions={align:b.align||(c?e?"left":"right":"center"),verticalAlign:b.verticalAlign||(c?"middle":e?"bottom":"top"),y:r(b.y,c?4:e?14:-6),x:r(b.x,c?e?-6:6:0)};this.textAlign=b.textAlign||(c?e?"right":"left":"center")}function K(){this.init.apply(this,arguments)}function D(){this.init.apply(this,arguments)}var G,F=document,Q=window,J=Math,C=J.round,ca=J.floor,Qa=J.ceil,E=J.max,T=J.min,aa=J.abs,sa=J.cos,ya=J.sin,Ma=J.PI,Na=2*Ma/360,Ha=navigator.userAgent,yb=Q.opera,La=/msie/i.test(Ha)&&
!yb,fb=8===F.documentMode,gb=/AppleWebKit/.test(Ha),Xa=/Firefox/.test(Ha),zb=/(Mobile|Android|Windows Phone)/.test(Ha),Oa="http://www.w3.org/2000/svg",ta=!!F.createElementNS&&!!F.createElementNS(Oa,"svg").createSVGRect,Eb=Xa&&4>parseInt(Ha.split("Firefox/")[1],10),Ba=!ta&&!La&&!!F.createElement("canvas").getContext,Ya,hb=F.documentElement.ontouchstart!==G,Ab={},ob=0,bb,ia,ab,Ga,pb,X,Da=function(){},Ra=[],Pa="div",ma="none",Fb=/^[0-9]+$/,Bb="rgba(192,192,192,"+(ta?1E-4:.002)+")",cb,Ta,kb,lb,mb,Wa,
db,eb,ub,vb,nb,wb,xb,ja={};Q.Highcharts=Q.Highcharts?fa(16,!0):{};ab=function(a,b,e){if(!u(b)||isNaN(b))return"Invalid date";a=r(a,"%Y-%m-%d %H:%M:%S");var h=new Date(b-Ta),n,y=h[lb](),c=h[mb](),d=h[Wa](),f=h[db](),Aa=h[eb](),k=ia.lang,l=k.weekdays,h=g({a:l[c].substr(0,3),A:l[c],d:N(d),e:d,b:k.shortMonths[f],B:k.months[f],m:N(f+1),y:Aa.toString().substr(2,2),Y:Aa,H:N(y),I:N(y%12||12),l:y%12||12,M:N(h[kb]()),p:12>y?"AM":"PM",P:12>y?"am":"pm",S:N(h.getSeconds()),L:N(C(b%1E3),3)},Highcharts.dateFormats);
for(n in h)for(;-1!==a.indexOf("%"+n);)a=a.replace("%"+n,"function"===typeof h[n]?h[n](b):h[n]);return e?a.substr(0,1).toUpperCase()+a.substr(1):a};la.prototype={wrapColor:function(a){this.color>=a&&(this.color=0)},wrapSymbol:function(a){this.symbol>=a&&(this.symbol=0)}};X=function(){for(var a=0,b=arguments,e=b.length,h={};a<e;a++)h[b[a++]]=b[a];return h}("millisecond",1,"second",1E3,"minute",6E4,"hour",36E5,"day",864E5,"week",6048E5,"month",26784E5,"year",31556952E3);pb={init:function(a,b,e){b=b||
"";var h=a.shift,n=-1<b.indexOf("C"),y=n?7:3,c;b=b.split(" ");e=[].concat(e);var d,f,g=function(a){for(c=a.length;c--;)"M"===a[c]&&a.splice(c+1,0,a[c+1],a[c+2],a[c+1],a[c+2])};n&&(g(b),g(e));a.isArea&&(d=b.splice(b.length-6,6),f=e.splice(e.length-6,6));if(h<=e.length/y&&b.length===e.length)for(;h--;)e=[].concat(e).splice(0,y).concat(e);a.shift=0;if(b.length)for(a=e.length;b.length<a;)h=[].concat(b).splice(b.length-y,y),n&&(h[y-6]=h[y-2],h[y-5]=h[y-1]),b=b.concat(h);d&&(b=b.concat(d),e=e.concat(f));
return[b,e]},step:function(a,b,e,h){var n=[],y=a.length;if(1===e)n=h;else if(y===b.length&&1>e)for(;y--;)h=parseFloat(a[y]),n[y]=isNaN(h)?a[y]:e*parseFloat(b[y]-h)+h;else n=b;return n}};(function(a){Q.HighchartsAdapter=Q.HighchartsAdapter||a&&{init:function(b){var e=a.fx,h=e.step,n,y=a.Tween,c=y&&y.propHooks;n=a.cssHooks.opacity;a.extend(a.easing,{easeOutQuad:function(a,b,e,h,n){return-h*(b/=n)*(b-2)+e}});a.each(["cur","_default","width","height","opacity"],function(a,b){var n=h,d;"cur"===b?n=e.prototype:
"_default"===b&&y&&(n=c[b],b="set");(d=n[b])&&(n[b]=function(e){var h;e=a?e:this;if("align"!==e.prop)return h=e.elem,h.attr?h.attr(e.prop,"cur"===b?G:e.now):d.apply(this,arguments)})});Ca(n,"get",function(a,b,e){return b.attr?b.opacity||0:a.call(this,b,e)});n=function(a){var e=a.elem,h;a.started||(h=b.init(e,e.d,e.toD),a.start=h[0],a.end=h[1],a.started=!0);e.attr("d",b.step(a.start,a.end,a.pos,e.toD))};y?c.d={set:n}:h.d=n;this.each=Array.prototype.forEach?function(a,b){return Array.prototype.forEach.call(a,
b)}:function(a,b){for(var e=0,h=a.length;e<h;e++)if(!1===b.call(a[e],a[e],e,a))return e};a.fn.highcharts=function(){var a="Chart",b=arguments,e,h;d(b[0])&&(a=b[0],b=Array.prototype.slice.call(b,1));e=b[0];e!==G&&(e.chart=e.chart||{},e.chart.renderTo=this[0],new Highcharts[a](e,b[1]),h=this);e===G&&(h=Ra[w(this[0],"data-highcharts-chart")]);return h}},getScript:a.getScript,inArray:a.inArray,adapterRun:function(b,e){return a(b)[e]()},grep:a.grep,map:function(a,e){for(var h=[],n=0,y=a.length;n<y;n++)h[n]=
e.call(a[n],a[n],n,a);return h},offset:function(b){return a(b).offset()},addEvent:function(b,e,h){a(b).bind(e,h)},removeEvent:function(b,e,h){var n=F.removeEventListener?"removeEventListener":"detachEvent";F[n]&&b&&!b[n]&&(b[n]=function(){});a(b).unbind(e,h)},fireEvent:function(b,e,h,n){var y=a.Event(e),c="detached"+e,d;!La&&h&&(delete h.layerX,delete h.layerY);g(y,h);b[e]&&(b[c]=b[e],b[e]=null);a.each(["preventDefault","stopPropagation"],function(a,b){var e=y[b];y[b]=function(){try{e.call(y)}catch(a){"preventDefault"===
b&&(d=!0)}}});a(b).trigger(y);b[c]&&(b[e]=b[c],b[c]=null);n&&!y.isDefaultPrevented()&&!d&&n(y)},washMouseEvent:function(a){var e=a.originalEvent||a;e.pageX===G&&(e.pageX=a.pageX,e.pageY=a.pageY);return e},animate:function(b,e,h){var n=a(b);b.style||(b.style={});e.d&&(b.toD=e.d,e.d=1);n.stop();e.opacity!==G&&b.attr&&(e.opacity+="px");n.animate(e,h)},stop:function(b){a(b).stop()}}})(Q.jQuery);var ua=Q.HighchartsAdapter,ga=ua||{};ua&&ua.init.call(ua,pb);var ib=ga.adapterRun,Gb=ga.getScript,Ia=ga.inArray,
A=ga.each,qb=ga.grep,Hb=ga.offset,Ua=ga.map,ha=ga.addEvent,va=ga.removeEvent,W=ga.fireEvent,Ib=ga.washMouseEvent,jb=ga.animate,Za=ga.stop,ga={enabled:!0,x:0,y:15,style:{color:"#666",cursor:"default",fontSize:"11px"}};ia={colors:"#2f7ed8 #0d233a #8bbc21 #910000 #1aadce #492970 #f28f43 #77a1e5 #c42525 #a6c96a".split(" "),symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January February March April May June July August September October November December".split(" "),
shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),decimalPoint:".",numericSymbols:"kMGTPE".split(""),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/3.0.9/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/3.0.9/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:5,
defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"12px"},backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#274b6d",fontSize:"16px"}},subtitle:{text:"",align:"center",style:{color:"#4d759e"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,
animation:{duration:1E3},events:{},lineWidth:2,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:c(ga,{align:"center",enabled:!1,formatter:function(){return null===this.y?"":R(this.y,-1)},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1E3}},labels:{style:{position:"absolute",color:"#3E576F"}},
legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderWidth:1,borderColor:"#909090",borderRadius:5,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{cursor:"pointer",color:"#274b6d",fontSize:"12px"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",
position:"relative",top:"1em"},style:{position:"absolute",backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:ta,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',
pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',shadow:!0,snap:zb?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var wa=ia.plotOptions,ua=wa.line;v();var Jb=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,
Kb=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,Lb=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,Ja=function(a){var b=[],e,h;(function(a){a&&a.stops?h=Ua(a.stops,function(a){return Ja(a[1])}):(e=Jb.exec(a))?b=[k(e[1]),k(e[2]),k(e[3]),parseFloat(e[4],10)]:(e=Kb.exec(a))?b=[k(e[1],16),k(e[2],16),k(e[3],16),1]:(e=Lb.exec(a))&&(b=[k(e[1]),k(e[2]),k(e[3]),1])})(a);return{get:function(e){var y;h?(y=c(a),y.stops=[].concat(y.stops),A(h,function(a,b){y.stops[b]=[y.stops[b][0],a.get(e)]})):
y=b&&!isNaN(b[0])?"rgb"===e?"rgb("+b[0]+","+b[1]+","+b[2]+")":"a"===e?b[3]:"rgba("+b.join(",")+")":a;return y},brighten:function(a){if(h)A(h,function(b){b.brighten(a)});else if(p(a)&&0!==a){var e;for(e=0;3>e;e++)b[e]+=k(255*a),0>b[e]&&(b[e]=0),255<b[e]&&(b[e]=255)}return this},rgba:b,setOpacity:function(a){b[3]=a;return this}}};I.prototype={init:function(a,b){this.element="span"===b?B(b):F.createElementNS(Oa,b);this.renderer=a;this.attrSetters={}},opacity:1,animate:function(a,b,e){b=r(b,Ga,!0);Za(this);
b?(b=c(b),e&&(b.complete=e),jb(this,a,b)):(this.attr(a),e&&e())},attr:function(a,b){var e,h,n,y,c=this.element,f=c.nodeName.toLowerCase(),g=this.renderer,Aa,l=this.attrSetters,Z=this.shadows,m,Y,z=this;d(a)&&u(b)&&(e=a,a={},a[e]=b);if(d(a))e=a,"circle"===f?e={x:"cx",y:"cy"}[e]||e:"strokeWidth"===e&&(e="stroke-width"),z=w(c,e)||this[e]||0,"d"!==e&&"visibility"!==e&&"fill"!==e&&(z=parseFloat(z));else{for(e in a)if(Aa=!1,h=a[e],n=l[e]&&l[e].call(this,h,e),!1!==n){n!==G&&(h=n);if("d"===e)h&&h.join&&(h=
h.join(" ")),/(NaN| {2}|^$)/.test(h)&&(h="M 0 0");else if("x"===e&&"text"===f)for(n=0;n<c.childNodes.length;n++)y=c.childNodes[n],w(y,"x")===w(c,"x")&&w(y,"x",h);else if(!this.rotation||"x"!==e&&"y"!==e)if("fill"===e)h=g.color(h,c,e);else if("circle"!==f||"x"!==e&&"y"!==e)if("rect"===f&&"r"===e)w(c,{rx:h,ry:h}),Aa=!0;else if("translateX"===e||"translateY"===e||"rotation"===e||"verticalAlign"===e||"scaleX"===e||"scaleY"===e)Aa=Y=!0;else if("stroke"===e)h=g.color(h,c,e);else if("dashstyle"===e)if(e=
"stroke-dasharray",h=h&&h.toLowerCase(),"solid"===h)h=ma;else{if(h){h=h.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(n=h.length;n--;)h[n]=k(h[n])*r(a["stroke-width"],this["stroke-width"]);h=h.join(",")}}else"width"===e?h=k(h):"align"===e?(e="text-anchor",h={left:"start",center:"middle",right:"end"}[h]):"title"===
e&&((n=c.getElementsByTagName("title")[0])||(n=F.createElementNS(Oa,"title"),c.appendChild(n)),n.textContent=h);else e={x:"cx",y:"cy"}[e]||e;else Y=!0;"strokeWidth"===e&&(e="stroke-width");if("stroke-width"===e||"stroke"===e)this[e]=h,this.stroke&&this["stroke-width"]?(w(c,"stroke",this.stroke),w(c,"stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===e&&0===h&&this.hasStroke&&(c.removeAttribute("stroke"),this.hasStroke=!1),Aa=!0;this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(e)&&
(m||(this.symbolAttr(a),m=!0),Aa=!0);if(Z&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(e))for(n=Z.length;n--;)w(Z[n],e,"height"===e?E(h-(Z[n].cutHeight||0),0):h);("width"===e||"height"===e)&&"rect"===f&&0>h&&(h=0);this[e]=h;"text"===e?(h!==this.textStr&&delete this.bBox,this.textStr=h,this.added&&g.buildText(this)):Aa||w(c,e,h)}Y&&this.updateTransform()}return z},addClass:function(a){var b=this.element,e=w(b,"class")||"";-1===e.indexOf(a)&&w(b,"class",e+" "+a);return this},symbolAttr:function(a){var b=
this;A("x y r start end width height innerR anchorX anchorY".split(" "),function(e){b[e]=r(a[e],b[e])});b.attr({d:b.renderer.symbols[b.symbolName](b.x,b.y,b.width,b.height,b)})},clip:function(a){return this.attr("clip-path",a?"url("+this.renderer.url+"#"+a.id+")":ma)},crisp:function(a,b,e,h,n){var y,c={},d={},f;a=a||this.strokeWidth||this.attr&&this.attr("stroke-width")||0;f=C(a)%2/2;d.x=ca(b||this.x||0)+f;d.y=ca(e||this.y||0)+f;d.width=ca((h||this.width||0)-2*f);d.height=ca((n||this.height||0)-2*
f);d.strokeWidth=a;for(y in d)this[y]!==d[y]&&(this[y]=c[y]=d[y]);return c},css:function(a){var b=this.element,e=this.textWidth=a&&a.width&&"text"===b.nodeName.toLowerCase()&&k(a.width),h,n="",y=function(a,b){return"-"+b.toLowerCase()};a&&a.color&&(a.fill=a.color);this.styles=a=g(this.styles,a);e&&delete a.width;if(La&&!ta)H(this.element,a);else{for(h in a)n+=h.replace(/([A-Z])/g,y)+":"+a[h]+";";w(b,"style",n)}e&&this.added&&this.renderer.buildText(this);return this},on:function(a,b){var e=this,h=
e.element;hb&&"click"===a?(h.ontouchstart=function(a){e.touchEventFired=Date.now();a.preventDefault();b.call(h,a)},h.onclick=function(a){(-1===Ha.indexOf("Android")||1100<Date.now()-(e.touchEventFired||0))&&b.call(h,a)}):h["on"+a]=b;return this},setRadialReference:function(a){this.element.radialReference=a;return this},translate:function(a,b){return this.attr({translateX:a,translateY:b})},invert:function(){this.inverted=!0;this.updateTransform();return this},updateTransform:function(){var a=this.translateX||
0,b=this.translateY||0,e=this.scaleX,h=this.scaleY,n=this.inverted,y=this.rotation;n&&(a+=this.attr("width"),b+=this.attr("height"));a=["translate("+a+","+b+")"];n?a.push("rotate(90) scale(-1,1)"):y&&a.push("rotate("+y+" "+(this.x||0)+" "+(this.y||0)+")");(u(e)||u(h))&&a.push("scale("+r(e,1)+" "+r(h,1)+")");a.length&&w(this.element,"transform",a.join(" "))},toFront:function(){var a=this.element;a.parentNode.appendChild(a);return this},align:function(a,b,e){var h,n,y,c,f={};n=this.renderer;y=n.alignedObjects;
if(a){if(this.alignOptions=a,this.alignByTranslate=b,!e||d(e))this.alignTo=h=e||"renderer",q(y,this),y.push(this),e=null}else a=this.alignOptions,b=this.alignByTranslate,h=this.alignTo;e=r(e,n[h],n);h=a.align;n=a.verticalAlign;y=(e.x||0)+(a.x||0);c=(e.y||0)+(a.y||0);if("right"===h||"center"===h)y+=(e.width-(a.width||0))/{right:1,center:2}[h];f[b?"translateX":"x"]=C(y);if("bottom"===n||"middle"===n)c+=(e.height-(a.height||0))/({bottom:1,middle:2}[n]||1);f[b?"translateY":"y"]=C(c);this[this.placed?
"animate":"attr"](f);this.placed=!0;this.alignAttr=f;return this},getBBox:function(){var a=this.bBox,b=this.renderer,e,h,n=this.rotation;e=this.element;var y=this.styles,c=n*Na;h=this.textStr;var d;if(""===h||Fb.test(h))d=h.length+"|"+y.fontSize+"|"+y.fontFamily,a=b.cache[d];if(!a){if(e.namespaceURI===Oa||b.forExport){try{a=e.getBBox?g({},e.getBBox()):{width:e.offsetWidth,height:e.offsetHeight}}catch(f){}if(!a||0>a.width)a={width:0,height:0}}else a=this.htmlGetBBox();b.isSVG&&(e=a.width,h=a.height,
La&&y&&"11px"===y.fontSize&&"16.9"===h.toPrecision(3)&&(a.height=h=14),n&&(a.width=aa(h*ya(c))+aa(e*sa(c)),a.height=aa(h*sa(c))+aa(e*ya(c))));this.bBox=a;d&&(b.cache[d]=a)}return a},show:function(){return this.attr({visibility:"visible"})},hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(a){var b=this;b.animate({opacity:0},{duration:a||150,complete:function(){b.hide()}})},add:function(a){var b=this.renderer,e=a||b,h=e.element||b.box,n=h.childNodes,y=this.element,c=w(y,"zIndex"),
d;a&&(this.parentGroup=a);this.parentInverted=a&&a.inverted;void 0!==this.textStr&&b.buildText(this);c&&(e.handleZ=!0,c=k(c));if(e.handleZ)for(e=0;e<n.length;e++)if(a=n[e],b=w(a,"zIndex"),a!==y&&(k(b)>c||!u(c)&&u(b))){h.insertBefore(y,a);d=!0;break}d||h.appendChild(y);this.added=!0;W(this,"add");return this},safeRemoveChild:function(a){var b=a.parentNode;b&&b.removeChild(a)},destroy:function(){var a=this,b=a.element||{},e=a.shadows,h=a.renderer.isSVG&&"SPAN"===b.nodeName&&a.parentGroup,n,y;b.onclick=
b.onmouseout=b.onmouseover=b.onmousemove=b.point=null;Za(a);a.clipPath&&(a.clipPath=a.clipPath.destroy());if(a.stops){for(y=0;y<a.stops.length;y++)a.stops[y]=a.stops[y].destroy();a.stops=null}a.safeRemoveChild(b);for(e&&A(e,function(b){a.safeRemoveChild(b)});h&&0===h.div.childNodes.length;)b=h.parentGroup,a.safeRemoveChild(h.div),delete h.div,h=b;a.alignTo&&q(a.renderer.alignedObjects,a);for(n in a)delete a[n];return null},shadow:function(a,b,e){var h=[],n,y,c=this.element,d,f,g,k;if(a){f=r(a.width,
3);g=(a.opacity||.15)/f;k=this.parentInverted?"(-1,-1)":"("+r(a.offsetX,1)+", "+r(a.offsetY,1)+")";for(n=1;n<=f;n++)y=c.cloneNode(0),d=2*f+1-2*n,w(y,{isShadow:"true",stroke:a.color||"black","stroke-opacity":g*n,"stroke-width":d,transform:"translate"+k,fill:ma}),e&&(w(y,"height",E(w(y,"height")-d,0)),y.cutHeight=d),b?b.element.appendChild(y):c.parentNode.insertBefore(y,c),h.push(y);this.shadows=h}return this}};var Ka=function(){this.init.apply(this,arguments)};Ka.prototype={Element:I,init:function(a,
b,e,h){var n=location,y,c;y=this.createElement("svg").attr({version:"1.1"});c=y.element;a.appendChild(c);-1===a.innerHTML.indexOf("xmlns")&&w(c,"xmlns",Oa);this.isSVG=!0;this.box=c;this.boxWrapper=y;this.alignedObjects=[];this.url=(Xa||gb)&&F.getElementsByTagName("base").length?n.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"";this.createElement("desc").add().element.appendChild(F.createTextNode("Created with Highcharts 3.0.9"));this.defs=this.createElement("defs").add();
this.forExport=h;this.gradients={};this.cache={};this.setSize(b,e,!1);var d;Xa&&a.getBoundingClientRect&&(this.subPixelFix=b=function(){H(a,{left:0,top:0});d=a.getBoundingClientRect();H(a,{left:Qa(d.left)-d.left+"px",top:Qa(d.top)-d.top+"px"})},b(),ha(Q,"resize",b))},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var a=this.defs;this.box=null;this.boxWrapper=this.boxWrapper.destroy();oa(this.gradients||{});this.gradients=null;a&&(this.defs=a.destroy());this.subPixelFix&&
va(Q,"resize",this.subPixelFix);return this.alignedObjects=null},createElement:function(a){var b=new this.Element;b.init(this,a);return b},draw:function(){},buildText:function(a){for(var b=a.element,e=this,h=e.forExport,n=r(a.textStr,"").toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g),y=b.childNodes,c=/style="([^"]+)"/,d=/href="(http[^"]+)"/,
f=w(b,"x"),g=a.styles,l=a.textWidth,Z=g&&g.lineHeight,m=y.length,Y=function(a){return Z?k(Z):e.fontMetrics(/px$/.test(a&&a.style.fontSize)?a.style.fontSize:g.fontSize||11).h};m--;)b.removeChild(y[m]);l&&!a.added&&this.box.appendChild(b);""===n[n.length-1]&&n.pop();A(n,function(n,y){var k,Z=0;n=n.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");k=n.split("|||");A(k,function(n){if(""!==n||1===k.length){var m={},z=F.createElementNS(Oa,"tspan"),L;c.test(n)&&(L=n.match(c)[1].replace(/(;| |^)color([ :])/,
"$1fill$2"),w(z,"style",L));d.test(n)&&!h&&(w(z,"onclick",'location.href="'+n.match(d)[1]+'"'),H(z,{cursor:"pointer"}));n=(n.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">");if(" "!==n&&(z.appendChild(F.createTextNode(n)),Z?m.dx=0:m.x=f,w(z,m),!Z&&y&&(!ta&&h&&H(z,{display:"block"}),w(z,"dy",Y(z),gb&&z.offsetHeight)),b.appendChild(z),Z++,l)){n=n.replace(/([^\^])-/g,"$1- ").split(" ");for(var m=1<n.length&&"nowrap"!==g.whiteSpace,r,u,p=a._clipHeight,v=[],t=Y(),q=1;m&&(n.length||
v.length);)delete a.bBox,r=a.getBBox(),u=r.width,!ta&&e.forExport&&(u=e.measureSpanWidth(z.firstChild.data,a.styles)),(r=u>l)&&1!==n.length?(z.removeChild(z.firstChild),v.unshift(n.pop())):(n=v,v=[],n.length&&(q++,p&&q*t>p?(n=["..."],a.attr("title",a.textStr)):(z=F.createElementNS(Oa,"tspan"),w(z,{dy:t,x:f}),L&&w(z,"style",L),b.appendChild(z),u>l&&(l=u)))),n.length&&z.appendChild(F.createTextNode(n.join(" ").replace(/- /g,"-")))}}})})},button:function(a,b,e,h,n,y,d,f,Db){var k=this.label(a,b,e,Db,
null,null,null,null,"button"),l=0,Z,m,Y,z,r,u;a={x1:0,y1:0,x2:0,y2:1};n=c({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:a,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},n);Y=n.style;delete n.style;y=c(n,{stroke:"#68A",fill:{linearGradient:a,stops:[[0,"#FFF"],[1,"#ACF"]]}},y);z=y.style;delete y.style;d=c(n,{stroke:"#68A",fill:{linearGradient:a,stops:[[0,"#9BD"],[1,"#CDF"]]}},d);r=d.style;delete d.style;f=c(n,{style:{color:"#CCC"}},f);u=f.style;delete f.style;ha(k.element,
La?"mouseover":"mouseenter",function(){3!==l&&k.attr(y).css(z)});ha(k.element,La?"mouseout":"mouseleave",function(){3!==l&&(Z=[n,y,d][l],m=[Y,z,r][l],k.attr(Z).css(m))});k.setState=function(a){(k.state=l=a)?2===a?k.attr(d).css(r):3===a&&k.attr(f).css(u):k.attr(n).css(Y)};return k.on("click",function(){3!==l&&h.call(k)}).attr(n).css(g({cursor:"default"},Y))},crispLine:function(a,b){a[1]===a[4]&&(a[1]=a[4]=C(a[1])-b%2/2);a[2]===a[5]&&(a[2]=a[5]=C(a[2])+b%2/2);return a},path:function(a){var b={fill:ma};
l(a)?b.d=a:f(a)&&g(b,a);return this.createElement("path").attr(b)},circle:function(a,b,e){a=f(a)?a:{x:a,y:b,r:e};return this.createElement("circle").attr(a)},arc:function(a,b,e,h,n,y){f(a)&&(b=a.y,e=a.r,h=a.innerR,n=a.start,y=a.end,a=a.x);a=this.symbol("arc",a||0,b||0,e||0,e||0,{innerR:h||0,start:n||0,end:y||0});a.r=e;return a},rect:function(a,b,e,h,n,y){n=f(a)?a.r:n;n=this.createElement("rect").attr({rx:n,ry:n,fill:ma});return n.attr(f(a)?a:n.crisp(y,a,b,E(e,0),E(h,0)))},setSize:function(a,b,e){var h=
this.alignedObjects,n=h.length;this.width=a;this.height=b;for(this.boxWrapper[r(e,!0)?"animate":"attr"]({width:a,height:b});n--;)h[n].align()},g:function(a){var b=this.createElement("g");return u(a)?b.attr({"class":"highcharts-"+a}):b},image:function(a,b,e,h,n){var y={preserveAspectRatio:ma};1<arguments.length&&g(y,{x:b,y:e,width:h,height:n});y=this.createElement("image").attr(y);y.element.setAttributeNS?y.element.setAttributeNS("http://www.w3.org/1999/xlink","href",a):y.element.setAttribute("hc-svg-href",
a);return y},symbol:function(a,b,e,h,n,y){var c,d=this.symbols[a],d=d&&d(C(b),C(e),h,n,y),f=/^url\((.*?)\)$/,k,l;d?(c=this.path(d),g(c,{symbolName:a,x:b,y:e,width:h,height:n}),y&&g(c,y)):f.test(a)&&(l=function(a,b){a.element&&(a.attr({width:b[0],height:b[1]}),a.alignByTranslate||a.translate(C((h-b[0])/2),C((n-b[1])/2)))},k=a.match(f)[1],a=Ab[k],c=this.image(k).attr({x:b,y:e}),c.isImg=!0,a?l(c,a):(c.attr({width:0,height:0}),B("img",{onload:function(){l(c,Ab[k]=[this.width,this.height])},src:k})));
return c},symbols:{circle:function(a,b,e,h){var n=.166*e;return["M",a+e/2,b,"C",a+e+n,b,a+e+n,b+h,a+e/2,b+h,"C",a-n,b+h,a-n,b,a+e/2,b,"Z"]},square:function(a,b,e,h){return["M",a,b,"L",a+e,b,a+e,b+h,a,b+h,"Z"]},triangle:function(a,b,e,h){return["M",a+e/2,b,"L",a+e,b+h,a,b+h,"Z"]},"triangle-down":function(a,b,e,h){return["M",a,b,"L",a+e,b,a+e/2,b+h,"Z"]},diamond:function(a,b,e,h){return["M",a+e/2,b,"L",a+e,b+h/2,a+e/2,b+h,a,b+h/2,"Z"]},arc:function(a,b,e,h,n){var y=n.start;e=n.r||e||h;var c=n.end-.001;
h=n.innerR;var d=n.open,f=sa(y),g=ya(y),k=sa(c),c=ya(c);n=n.end-y<Ma?0:1;return["M",a+e*f,b+e*g,"A",e,e,0,n,1,a+e*k,b+e*c,d?"M":"L",a+h*k,b+h*c,"A",h,h,0,n,0,a+h*f,b+h*g,d?"":"Z"]}},clipRect:function(a,b,e,h){var n="highcharts-"+ob++,c=this.createElement("clipPath").attr({id:n}).add(this.defs);a=this.rect(a,b,e,h,0).add(c);a.id=n;a.clipPath=c;return a},color:function(a,b,e){var h=this,n,y=/^rgba/,d,f,g,k,V,Z,m,Y=[];a&&a.linearGradient?d="linearGradient":a&&a.radialGradient&&(d="radialGradient");if(d){e=
a[d];f=h.gradients;k=a.stops;b=b.radialReference;l(e)&&(a[d]=e={x1:e[0],y1:e[1],x2:e[2],y2:e[3],gradientUnits:"userSpaceOnUse"});"radialGradient"===d&&b&&!u(e.gradientUnits)&&(e=c(e,{cx:b[0]-b[2]/2+e.cx*b[2],cy:b[1]-b[2]/2+e.cy*b[2],r:e.r*b[2],gradientUnits:"userSpaceOnUse"}));for(m in e)"id"!==m&&Y.push(m,e[m]);for(m in k)Y.push(k[m]);Y=Y.join(",");f[Y]?a=f[Y].id:(e.id=a="highcharts-"+ob++,f[Y]=g=h.createElement(d).attr(e).add(h.defs),g.stops=[],A(k,function(a){y.test(a[1])?(n=Ja(a[1]),V=n.get("rgb"),
Z=n.get("a")):(V=a[1],Z=1);a=h.createElement("stop").attr({offset:a[0],"stop-color":V,"stop-opacity":Z}).add(g);g.stops.push(a)}));return"url("+h.url+"#"+a+")"}return y.test(a)?(n=Ja(a),w(b,e+"-opacity",n.get("a")),n.get("rgb")):(b.removeAttribute(e+"-opacity"),a)},text:function(a,b,e,h){var n=ia.chart.style,c=Ba||!ta&&this.forExport;if(h&&!this.forExport)return this.html(a,b,e);b=C(r(b,0));e=C(r(e,0));a=this.createElement("text").attr({x:b,y:e,text:a}).css({fontFamily:n.fontFamily,fontSize:n.fontSize});
c&&a.css({position:"absolute"});a.x=b;a.y=e;return a},fontMetrics:function(a){a=k(a||11);a=24>a?a+4:C(1.2*a);var b=C(.8*a);return{h:a,b:b}},label:function(a,b,e,h,n,y,d,f,k){function Aa(){var a,b;a=r.element.style;v=(void 0===K||void 0===w||z.styles.textAlign)&&r.getBBox();z.width=(K||v.width||0)+2*q+D;z.height=(w||v.height||0)+2*q;x=q+Y.fontMetrics(a&&a.fontSize).b;J&&(p||(a=C(-t*q),b=f?-x:0,z.box=p=h?Y.symbol(h,a,b,z.width,z.height,da):Y.rect(a,b,z.width,z.height,0,da["stroke-width"]),p.add(z)),
p.isImg||p.attr(c({width:z.width,height:z.height},da)),da=null)}function l(){var a=z.styles,a=a&&a.textAlign,b=D+q*(1-t),e;e=f?0:x;!u(K)||"center"!==a&&"right"!==a||(b+={center:.5,right:1}[a]*(K-v.width));b===r.x&&e===r.y||r.attr({x:b,y:e});r.x=b;r.y=e}function m(a,b){p?p.attr(a,b):da[a]=b}function L(){r.add(z);z.attr({text:a,x:b,y:e});p&&u(n)&&z.attr({anchorX:n,anchorY:y})}var Y=this,z=Y.g(k),r=Y.text("",0,0,d).attr({zIndex:1}),p,v,t=0,q=3,D=0,K,w,U,M,F=0,da={},x;d=z.attrSetters;var J;ha(z,"add",
L);d.width=function(a){K=a;return!1};d.height=function(a){w=a;return!1};d.padding=function(a){u(a)&&a!==q&&(q=a,l());return!1};d.paddingLeft=function(a){u(a)&&a!==D&&(D=a,l());return!1};d.align=function(a){t={left:0,center:.5,right:1}[a];return!1};d.text=function(a,b){r.attr(b,a);Aa();l();return!1};d["stroke-width"]=function(a,b){J=!0;F=a%2/2;m(b,a);return!1};d.stroke=d.fill=d.r=function(a,b){"fill"===b&&(J=!0);m(b,a);return!1};d.anchorX=function(a,b){n=a;m(b,a+F-U);return!1};d.anchorY=function(a,
b){y=a;m(b,a-M);return!1};d.x=function(a){z.x=a;a-=t*((K||v.width)+q);U=C(a);z.attr("translateX",U);return!1};d.y=function(a){M=z.y=C(a);z.attr("translateY",M);return!1};var Q=z.css;return g(z,{css:function(a){if(a){var b={};a=c(a);A("fontSize fontWeight fontFamily color lineHeight width textDecoration textShadow".split(" "),function(e){a[e]!==G&&(b[e]=a[e],delete a[e])});r.css(b)}return Q.call(z,a)},getBBox:function(){return{width:v.width+2*q,height:v.height+2*q,x:v.x-q,y:v.y-q}},shadow:function(a){p&&
p.shadow(a);return z},destroy:function(){va(z,"add",L);va(z.element,"mouseenter");va(z.element,"mouseleave");r&&(r=r.destroy());p&&(p=p.destroy());I.prototype.destroy.call(z);z=Y=Aa=l=m=L=null}})}};Ya=Ka;g(I.prototype,{htmlCss:function(a){var b=this.element;if(b=a&&"SPAN"===b.tagName&&a.width)delete a.width,this.textWidth=b,this.updateTransform();this.styles=g(this.styles,a);H(this.element,a);return this},htmlGetBBox:function(){var a=this.element,b=this.bBox;b||("text"===a.nodeName&&(a.style.position=
"absolute"),b=this.bBox={x:a.offsetLeft,y:a.offsetTop,width:a.offsetWidth,height:a.offsetHeight});return b},htmlUpdateTransform:function(){if(this.added){var a=this.renderer,b=this.element,e=this.translateX||0,h=this.translateY||0,n=this.x||0,c=this.y||0,d=this.textAlign||"left",f={left:0,center:.5,right:1}[d],g=this.shadows;H(b,{marginLeft:e,marginTop:h});g&&A(g,function(a){H(a,{marginLeft:e+1,marginTop:h+1})});this.inverted&&A(b.childNodes,function(e){a.invertChild(e,b)});if("SPAN"===b.tagName){var l=
this.rotation,V,m=k(this.textWidth),L=[l,d,b.innerHTML,this.textWidth].join();L!==this.cTT&&(V=a.fontMetrics(b.style.fontSize).b,u(l)&&this.setSpanRotation(l,f,V),g=r(this.elemWidth,b.offsetWidth),g>m&&/[ \-]/.test(b.textContent||b.innerText)&&(H(b,{width:m+"px",display:"block",whiteSpace:"normal"}),g=m),this.getSpanCorrection(g,V,f,l,d));H(b,{left:n+(this.xCorr||0)+"px",top:c+(this.yCorr||0)+"px"});gb&&(V=b.offsetHeight);this.cTT=L}}else this.alignOnAdd=!0},setSpanRotation:function(a,b,e){var h=
{},n=La?"-ms-transform":gb?"-webkit-transform":Xa?"MozTransform":yb?"-o-transform":"";h[n]=h.transform="rotate("+a+"deg)";h[n+(Xa?"Origin":"-origin")]=100*b+"% "+e+"px";H(this.element,h)},getSpanCorrection:function(a,b,e){this.xCorr=-a*e;this.yCorr=-b}});g(Ka.prototype,{html:function(a,b,e){var h=ia.chart.style,n=this.createElement("span"),c=n.attrSetters,d=n.element,f=n.renderer;c.text=function(a){a!==d.innerHTML&&delete this.bBox;d.innerHTML=a;return!1};c.x=c.y=c.align=c.rotation=function(a,b){"align"===
b&&(b="textAlign");n[b]=a;n.htmlUpdateTransform();return!1};n.attr({text:a,x:C(b),y:C(e)}).css({position:"absolute",whiteSpace:"nowrap",fontFamily:h.fontFamily,fontSize:h.fontSize});n.css=n.htmlCss;f.isSVG&&(n.add=function(a){var b,e=f.box.parentNode,h=[];if(this.parentGroup=a){if(b=a.div,!b){for(;a;)h.push(a),a=a.parentGroup;A(h.reverse(),function(a){var h;b=a.div=a.div||B(Pa,{className:w(a.element,"class")},{position:"absolute",left:(a.translateX||0)+"px",top:(a.translateY||0)+"px"},b||e);h=b.style;
g(a.attrSetters,{translateX:function(a){h.left=a+"px"},translateY:function(a){h.top=a+"px"},visibility:function(a,b){h[b]=a}})})}}else b=e;b.appendChild(d);n.added=!0;n.alignOnAdd&&n.htmlUpdateTransform();return n});return n}});var pa;if(!ta&&!Ba){Highcharts.VMLElement=pa={init:function(a,b){var e=["<",b,' filled="f" stroked="f"'],h=["position: ","absolute",";"],n=b===Pa;("shape"===b||n)&&h.push("left:0;top:0;width:1px;height:1px;");h.push("visibility: ",n?"hidden":"visible");e.push(' style="',h.join(""),
'"/>');b&&(e=n||"span"===b||"img"===b?e.join(""):a.prepVML(e),this.element=B(e));this.renderer=a;this.attrSetters={}},add:function(a){var b=this.renderer,e=this.element,h=b.box,h=a?a.element||a:h;a&&a.inverted&&b.invertChild(e,h);h.appendChild(e);this.added=!0;this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform();W(this,"add");return this},updateTransform:I.prototype.htmlUpdateTransform,setSpanRotation:function(){var a=this.rotation,b=sa(a*Na),e=ya(a*Na);H(this.element,{filter:a?["progid:DXImageTransform.Microsoft.Matrix(M11=",
b,", M12=",-e,", M21=",e,", M22=",b,", sizingMethod='auto expand')"].join(""):ma})},getSpanCorrection:function(a,b,e,h,n){var c=h?sa(h*Na):1,d=h?ya(h*Na):0,f=r(this.elemHeight,this.element.offsetHeight),g;this.xCorr=0>c&&-a;this.yCorr=0>d&&-f;g=0>c*d;this.xCorr+=d*b*(g?1-e:e);this.yCorr-=c*b*(h?g?e:1-e:1);n&&"left"!==n&&(this.xCorr-=a*e*(0>c?-1:1),h&&(this.yCorr-=f*e*(0>d?-1:1)),H(this.element,{textAlign:n}))},pathToVML:function(a){for(var b=a.length,e=[];b--;)p(a[b])?e[b]=C(10*a[b])-5:"Z"===a[b]?
e[b]="x":(e[b]=a[b],!a.isArc||"wa"!==a[b]&&"at"!==a[b])||(e[b+5]===e[b+7]&&(e[b+7]+=a[b+7]>a[b+5]?1:-1),e[b+6]===e[b+8]&&(e[b+8]+=a[b+8]>a[b+6]?1:-1));return e.join(" ")||"x"},attr:function(a,b){var e,h,n,c=this.element||{},f=c.style,g=c.nodeName,k=this.renderer,l=this.symbolName,V,m=this.shadows,L,r=this.attrSetters,z=this;d(a)&&u(b)&&(e=a,a={},a[e]=b);if(d(a))e=a,z="strokeWidth"===e||"stroke-width"===e?this.strokeweight:this[e];else for(e in a)if(h=a[e],L=!1,n=r[e]&&r[e].call(this,h,e),!1!==n&&
null!==h){n!==G&&(h=n);if(l&&/^(x|y|r|start|end|width|height|innerR|anchorX|anchorY)/.test(e))V||(this.symbolAttr(a),V=!0),L=!0;else if("d"===e){h=h||[];this.d=h.join(" ");c.path=h=this.pathToVML(h);if(m)for(n=m.length;n--;)m[n].path=m[n].cutOff?this.cutOffPath(h,m[n].cutOff):h;L=!0}else if("visibility"===e){if(m)for(n=m.length;n--;)m[n].style[e]=h;"DIV"===g&&(h="hidden"===h?"-999em":0,fb||(f[e]=h?"visible":"hidden"),e="top");f[e]=h;L=!0}else if("zIndex"===e)h&&(f[e]=h),L=!0;else if(-1!==Ia(e,["x",
"y","width","height"]))this[e]=h,"x"===e||"y"===e?e={x:"left",y:"top"}[e]:h=E(0,h),this.updateClipping?(this[e]=h,this.updateClipping()):f[e]=h,L=!0;else if("class"===e&&"DIV"===g)c.className=h;else if("stroke"===e)h=k.color(h,c,e),e="strokecolor";else if("stroke-width"===e||"strokeWidth"===e)c.stroked=h?!0:!1,e="strokeweight",this[e]=h,p(h)&&(h+="px");else if("dashstyle"===e)(c.getElementsByTagName("stroke")[0]||B(k.prepVML(["<stroke/>"]),null,null,c))[e]=h||"solid",this.dashstyle=h,L=!0;else if("fill"===
e)"SPAN"===g?f.color=h:"IMG"!==g&&(c.filled=h!==ma?!0:!1,h=k.color(h,c,e,this),e="fillcolor");else if("opacity"===e)L=!0;else if("shape"===g&&"rotation"===e)this[e]=c.style[e]=h,c.style.left=-C(ya(h*Na)+1)+"px",c.style.top=C(sa(h*Na))+"px";else if("translateX"===e||"translateY"===e||"rotation"===e)this[e]=h,this.updateTransform(),L=!0;L||(fb?c[e]=h:w(c,e,h))}return z},clip:function(a){var b=this,e;a?(e=a.members,q(e,b),e.push(b),b.destroyClip=function(){q(e,b)},a=a.getCSS(b)):(b.destroyClip&&b.destroyClip(),
a={clip:fb?"inherit":"rect(auto)"});return b.css(a)},css:I.prototype.htmlCss,safeRemoveChild:function(a){a.parentNode&&S(a)},destroy:function(){this.destroyClip&&this.destroyClip();return I.prototype.destroy.apply(this)},on:function(a,b){this.element["on"+a]=function(){var a=Q.event;a.target=a.srcElement;b(a)};return this},cutOffPath:function(a,b){var e;a=a.split(/[ ,]/);e=a.length;if(9===e||11===e)a[e-4]=a[e-2]=k(a[e-2])-10*b;return a.join(" ")},shadow:function(a,b,e){var h=[],n,c=this.element,d=
this.renderer,f,g=c.style,l,V=c.path,m,L,p,z;V&&"string"!==typeof V.value&&(V="x");L=V;if(a){p=r(a.width,3);z=(a.opacity||.15)/p;for(n=1;3>=n;n++)m=2*p+1-2*n,e&&(L=this.cutOffPath(V.value,m+.5)),l=['<shape isShadow="true" strokeweight="',m,'" filled="false" path="',L,'" coordsize="10 10" style="',c.style.cssText,'" />'],f=B(d.prepVML(l),null,{left:k(g.left)+r(a.offsetX,1),top:k(g.top)+r(a.offsetY,1)}),e&&(f.cutOff=m+1),l=['<stroke color="',a.color||"black",'" opacity="',z*n,'"/>'],B(d.prepVML(l),
null,null,f),b?b.element.appendChild(f):c.parentNode.insertBefore(f,c),h.push(f);this.shadows=h}return this}};pa=P(I,pa);var rb={Element:pa,isIE8:-1<Ha.indexOf("MSIE 8.0"),init:function(a,b,e){var h,n;this.alignedObjects=[];h=this.createElement(Pa);n=h.element;n.style.position="relative";a.appendChild(h.element);this.isVML=!0;this.box=n;this.boxWrapper=h;this.cache={};this.setSize(b,e,!1);if(!F.namespaces.hcv){F.namespaces.add("hcv","urn:schemas-microsoft-com:vml");try{F.createStyleSheet().cssText=
"hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}catch(c){F.styleSheets[0].cssText+="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(a,b,e,h){var n=this.createElement(),c=f(a);return g(n,{members:[],left:(c?a.x:a)+1,top:(c?a.y:b)+1,width:(c?a.width:e)-1,height:(c?a.height:h)-1,getCSS:function(a){var b=a.element,e=
b.nodeName;a=a.inverted;var h=this.top-("shape"===e?b.offsetTop:0),n=this.left,b=n+this.width,c=h+this.height,h={clip:"rect("+C(a?n:h)+"px,"+C(a?c:b)+"px,"+C(a?b:c)+"px,"+C(a?h:n)+"px)"};!a&&fb&&"DIV"===e&&g(h,{width:b+"px",height:c+"px"});return h},updateClipping:function(){A(n.members,function(a){a.css(n.getCSS(a))})}})},color:function(a,b,e,h){var n=this,c,d=/^rgba/,f,g,k=ma;a&&a.linearGradient?g="gradient":a&&a.radialGradient&&(g="pattern");if(g){var l,m,L=a.linearGradient||a.radialGradient,r,
z,p,u,v,q="";a=a.stops;var t,D=[],K=function(){f=['<fill colors="'+D.join(",")+'" opacity="',p,'" o:opacity2="',z,'" type="',g,'" ',q,'focus="100%" method="any" />'];B(n.prepVML(f),null,null,b)};r=a[0];t=a[a.length-1];0<r[0]&&a.unshift([0,r[1]]);1>t[0]&&a.push([1,t[1]]);A(a,function(a,b){d.test(a[1])?(c=Ja(a[1]),l=c.get("rgb"),m=c.get("a")):(l=a[1],m=1);D.push(100*a[0]+"% "+l);b?(p=m,u=l):(z=m,v=l)});if("fill"===e)if("gradient"===g)e=L.x1||L[0]||0,a=L.y1||L[1]||0,r=L.x2||L[2]||0,L=L.y2||L[3]||0,q=
'angle="'+(90-180*J.atan((L-a)/(r-e))/Ma)+'"',K();else{var k=L.r,G=2*k,w=2*k,U=L.cx,I=L.cy,M=b.radialReference,F,k=function(){M&&(F=h.getBBox(),U+=(M[0]-F.x)/F.width-.5,I+=(M[1]-F.y)/F.height-.5,G*=M[2]/F.width,w*=M[2]/F.height);q='src="'+ia.global.VMLRadialGradientURL+'" size="'+G+","+w+'" origin="0.5,0.5" position="'+U+","+I+'" color2="'+v+'" ';K()};h.added?k():ha(h,"add",k);k=u}else k=l}else d.test(a)&&"IMG"!==b.tagName?(c=Ja(a),f=["<",e,' opacity="',c.get("a"),'"/>'],B(this.prepVML(f),null,null,
b),k=c.get("rgb")):(k=b.getElementsByTagName(e),k.length&&(k[0].opacity=1,k[0].type="solid"),k=a);return k},prepVML:function(a){var b=this.isIE8;a=a.join("");b?(a=a.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),a=-1===a.indexOf('style="')?a.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):a.replace('style="','style="display:inline-block;behavior:url(#default#VML);')):a=a.replace("<","<hcv:");return a},text:Ka.prototype.html,path:function(a){var b={coordsize:"10 10"};
l(a)?b.d=a:f(a)&&g(b,a);return this.createElement("shape").attr(b)},circle:function(a,b,e){var h=this.symbol("circle");f(a)&&(e=a.r,b=a.y,a=a.x);h.isCircle=!0;h.r=e;return h.attr({x:a,y:b})},g:function(a){var b;a&&(b={className:"highcharts-"+a,"class":"highcharts-"+a});return this.createElement(Pa).attr(b)},image:function(a,b,e,h,n){var c=this.createElement("img").attr({src:a});1<arguments.length&&c.attr({x:b,y:e,width:h,height:n});return c},rect:function(a,b,e,h,n,c){var d=this.symbol("rect");d.r=
f(a)?a.r:n;return d.attr(f(a)?a:d.crisp(c,a,b,E(e,0),E(h,0)))},invertChild:function(a,b){var e=b.style;H(a,{flip:"x",left:k(e.width)-1,top:k(e.height)-1,rotation:-90})},symbols:{arc:function(a,b,e,h,n){var c=n.start,d=n.end,f=n.r||e||h;e=n.innerR;h=sa(c);var g=ya(c),k=sa(d),l=ya(d);if(0===d-c)return["x"];c=["wa",a-f,b-f,a+f,b+f,a+f*h,b+f*g,a+f*k,b+f*l];n.open&&!e&&c.push("e","M",a,b);c.push("at",a-e,b-e,a+e,b+e,a+e*k,b+e*l,a+e*h,b+e*g,"x","e");c.isArc=!0;return c},circle:function(a,b,e,h,n){n&&(e=
h=2*n.r);n&&n.isCircle&&(a-=e/2,b-=h/2);return["wa",a,b,a+e,b+h,a+e,b+h/2,a+e,b+h/2,"e"]},rect:function(a,b,e,h,n){var c=a+e,d=b+h,f;u(n)&&n.r?(f=T(n.r,e,h),c=["M",a+f,b,"L",c-f,b,"wa",c-2*f,b,c,b+2*f,c-f,b,c,b+f,"L",c,d-f,"wa",c-2*f,d-2*f,c,d,c,d-f,c-f,d,"L",a+f,d,"wa",a,d-2*f,a+2*f,d,a+f,d,a,d-f,"L",a,b+f,"wa",a,b,a+2*f,b+2*f,a,b+f,a+f,b,"x","e"]):c=Ka.prototype.symbols.square.apply(0,arguments);return c}}};Highcharts.VMLRenderer=pa=function(){this.init.apply(this,arguments)};pa.prototype=c(Ka.prototype,
rb);Ya=pa}Ka.prototype.measureSpanWidth=function(a,b){var e=F.createElement("span"),h;h=F.createTextNode(a);e.appendChild(h);H(e,b);this.box.appendChild(e);h=e.offsetWidth;S(e);return h};var Cb;Ba&&(Highcharts.CanVGRenderer=pa=function(){Oa="http://www.w3.org/1999/xhtml"},pa.prototype.symbols={},Cb=function(){function a(){var a=b.length,h;for(h=0;h<a;h++)b[h]();b=[]}var b=[];return{push:function(e,h){0===b.length&&Gb(h,a);b.push(e)}}}(),Ya=pa);U.prototype={addLabel:function(){var a=this.axis,b=a.options,
e=a.chart,h=a.horiz,n=a.categories,c=a.names,d=this.pos,f=b.labels,k=a.tickPositions,h=h&&n&&!f.step&&!f.staggerLines&&!f.rotation&&e.plotWidth/k.length||!h&&(e.margin[3]||.33*e.chartWidth),l=d===k[0],m=d===k[k.length-1],Z,c=n?r(n[d],c[d],d):d,n=this.label,L=k.info;a.isDatetimeAxis&&L&&(Z=b.dateTimeLabelFormats[L.higherRanks[d]||L.unitName]);this.isFirst=l;this.isLast=m;b=a.labelFormatter.call({axis:a,chart:e,isFirst:l,isLast:m,dateTimeLabelFormat:Z,value:a.isLog?O(t(c)):c});d=h&&{width:E(1,C(h-2*
(f.padding||10)))+"px"};d=g(d,f.style);u(n)?n&&n.attr({text:b}).css(d):(Z={align:a.labelAlign},p(f.rotation)&&(Z.rotation=f.rotation),h&&f.ellipsis&&(Z._clipHeight=a.len/k.length),this.label=u(b)&&f.enabled?e.renderer.text(b,0,0,f.useHTML).attr(Z).css(d).add(a.labelGroup):null)},getLabelSize:function(){var a=this.label,b=this.axis;return a?a.getBBox()[b.horiz?"height":"width"]:0},getLabelSides:function(){var a=this.label.getBBox(),b=this.axis,e=b.horiz,h=b.options.labels,a=e?a.width:a.height,b=e?
a*{left:0,center:.5,right:1}[b.labelAlign]-h.x:a;return[-b,a-b]},handleOverflow:function(a,b){var e,h=!0,n=this.axis,c=this.isFirst,d=this.isLast,f=n.horiz?b.x:b.y,g=n.reversed;e=n.tickPositions;var k=this.getLabelSides(),l=k[0],k=k[1],m=n.pos,L=m+n.len,r=this.label.line||0,z=n.labelEdge,p=n.justifyLabels&&(c||d);z[r]===G||f+l>z[r]?z[r]=f+k:p||(h=!1);p&&(e=(n=n.ticks[e[a+(c?1:-1)]])&&n.label.xy&&n.label.xy.x+n.getLabelSides()[c?0:1],c&&!g||d&&g?f+l<m&&(f=m-l,n&&f+k>e&&(h=!1)):f+k>L&&(f=L-k,n&&f+l<
e&&(h=!1)),b.x=f);return h},getPosition:function(a,b,e,h){var n=this.axis,c=n.chart,d=h&&c.oldChartHeight||c.chartHeight;return{x:a?n.translate(b+e,null,null,h)+n.transB:n.left+n.offset+(n.opposite?(h&&c.oldChartWidth||c.chartWidth)-n.right-n.left:0),y:a?d-n.bottom+n.offset-(n.opposite?n.height:0):d-n.translate(b+e,null,null,h)-n.transB}},getLabelPosition:function(a,b,e,h,n,c,d,f){var g=this.axis,k=g.transA,l=g.reversed,m=g.staggerLines,r=g.chart.renderer.fontMetrics(n.style.fontSize).b,p=n.rotation;
a=a+n.x-(c&&h?c*k*(l?-1:1):0);b=b+n.y-(c&&!h?c*k*(l?1:-1):0);p&&2===g.side&&(b-=r-r*sa(p*Na));u(n.y)||p||(b+=r-e.getBBox().height/2);m&&(e.line=d/(f||1)%m,b+=g.labelOffset/m*e.line);return{x:a,y:b}},getMarkPath:function(a,b,e,h,n,c){return c.crispLine(["M",a,b,"L",a+(n?0:-e),b+(n?e:0)],h)},render:function(a,b,e){var h=this.axis,n=h.options,c=h.chart.renderer,d=h.horiz,f=this.type,g=this.label,k=this.pos,l=n.labels,m=this.gridLine,L=f?f+"Grid":"grid",p=f?f+"Tick":"tick",z=n[L+"LineWidth"],u=n[L+"LineColor"],
v=n[L+"LineDashStyle"],q=n[p+"Length"],L=n[p+"Width"]||0,t=n[p+"Color"],D=n[p+"Position"],p=this.mark,K=l.step,w=!0,U=h.tickmarkOffset,I=this.getPosition(d,k,U,b),M=I.x,I=I.y,A=d&&M===h.pos+h.len||!d&&I===h.pos?-1:1;this.isActive=!0;if(z&&(k=h.getPlotLinePath(k+U,z*A,b,!0),m===G&&(m={stroke:u,"stroke-width":z},v&&(m.dashstyle=v),f||(m.zIndex=1),b&&(m.opacity=0),this.gridLine=m=z?c.path(k).attr(m).add(h.gridGroup):null),!b&&m&&k))m[this.isNew?"attr":"animate"]({d:k,opacity:e});L&&q&&("inside"===D&&
(q=-q),h.opposite&&(q=-q),f=this.getMarkPath(M,I,q,L*A,d,c),p?p.animate({d:f,opacity:e}):this.mark=c.path(f).attr({stroke:t,"stroke-width":L,opacity:e}).add(h.axisGroup));g&&!isNaN(M)&&(g.xy=I=this.getLabelPosition(M,I,g,d,l,U,a,K),this.isFirst&&!this.isLast&&!r(n.showFirstLabel,1)||this.isLast&&!this.isFirst&&!r(n.showLastLabel,1)?w=!1:h.isRadial||l.step||l.rotation||b||0===e||(w=this.handleOverflow(a,I)),K&&a%K&&(w=!1),w&&!isNaN(I.y)?(I.opacity=e,g[this.isNew?"attr":"animate"](I),this.isNew=!1):
g.attr("y",-9999))},destroy:function(){oa(this,this.axis)}};var sb=function(a,b){this.axis=a;b&&(this.options=b,this.id=b.id)};sb.prototype={render:function(){var a=this,b=a.axis,e=b.horiz,h=(b.pointRange||0)/2,n=a.options,d=n.label,f=a.label,g=n.width,k=n.to,l=n.from,V=u(l)&&u(k),p=n.value,L=n.dashStyle,v=a.svgElem,z=[],q,t=n.color,K=n.zIndex,D=n.events,w=b.chart.renderer;b.isLog&&(l=m(l),k=m(k),p=m(p));if(g){if(z=b.getPlotLinePath(p,g),h={stroke:t,"stroke-width":g},L)h.dashstyle=L}else if(V){if(l=
E(l,b.min-h),k=T(k,b.max+h),z=b.getPlotBandPath(l,k,n),h={fill:t},n.borderWidth)h.stroke=n.borderColor,h["stroke-width"]=n.borderWidth}else return;u(K)&&(h.zIndex=K);if(v)if(z)v.animate({d:z},null,v.onGetPath);else{if(v.hide(),v.onGetPath=function(){v.show()},f)a.label=f=f.destroy()}else if(z&&z.length&&(a.svgElem=v=w.path(z).attr(h).add(),D))for(q in n=function(b){v.on(b,function(e){D[b].apply(a,[e])})},D)n(q);d&&u(d.text)&&z&&z.length&&0<b.width&&0<b.height?(d=c({align:e&&V&&"center",x:e?!V&&4:
10,verticalAlign:!e&&V&&"middle",y:e?V?16:10:V?6:-4,rotation:e&&!V&&90},d),f||(a.label=f=w.text(d.text,0,0,d.useHTML).attr({align:d.textAlign||d.align,rotation:d.rotation,zIndex:K}).css(d.style).add()),b=[z[1],z[4],r(z[6],z[1])],z=[z[2],z[5],r(z[7],z[2])],e=qa(b),V=qa(z),f.align(d,!1,{x:e,y:V,width:na(b)-e,height:na(z)-V}),f.show()):f&&f.hide();return a},destroy:function(){q(this.axis.plotLinesAndBands,this);delete this.axis;oa(this)}};M.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",
second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:ga,lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:5,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#4d759e",
fontWeight:"bold"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return R(this.total,-1)},style:ga.style}},defaultLeftAxisOptions:{labels:{x:-8,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:8,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{x:0,
y:14},title:{rotation:0}},defaultTopAxisOptions:{labels:{x:0,y:-5},title:{rotation:0}},init:function(a,b){var e=b.isX;this.horiz=a.inverted?!e:e;this.coll=(this.isXAxis=e)?"xAxis":"yAxis";this.opposite=b.opposite;this.side=b.side||(this.horiz?this.opposite?0:2:this.opposite?1:3);this.setOptions(b);var h=this.options,n=h.type;this.labelFormatter=h.labels.formatter||this.defaultLabelFormatter;this.userOptions=b;this.minPixelPadding=0;this.chart=a;this.reversed=h.reversed;this.zoomEnabled=!1!==h.zoomEnabled;
this.categories=h.categories||"category"===n;this.names=[];this.isLog="logarithmic"===n;this.isDatetimeAxis="datetime"===n;this.isLinked=u(h.linkedTo);this.tickmarkOffset=this.categories&&"between"===h.tickmarkPlacement?.5:0;this.ticks={};this.labelEdge=[];this.minorTicks={};this.plotLinesAndBands=[];this.alternateBands={};this.len=0;this.minRange=this.userMinRange=h.minRange||h.maxZoom;this.range=h.range;this.offset=h.offset||0;this.stacks={};this.oldStacks={};this.stackExtremes={};this.min=this.max=
null;this.crosshair=r(h.crosshair,x(a.options.tooltip.crosshairs)[e?0:1],!1);var c,h=this.options.events;-1===Ia(this,a.axes)&&(a.axes.push(this),a[this.coll].push(this));this.series=this.series||[];a.inverted&&e&&this.reversed===G&&(this.reversed=!0);this.removePlotLine=this.removePlotBand=this.removePlotBandOrLine;for(c in h)ha(this,c,h[c]);this.isLog&&(this.val2lin=m,this.lin2val=t)},setOptions:function(a){this.options=c(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,
this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],c(ia[this.coll],a))},defaultLabelFormatter:function(){var a=this.axis,b=this.value,e=a.categories,h=this.dateTimeLabelFormat,n=ia.lang.numericSymbols,c=n&&n.length,d,f=a.options.labels.format,a=a.isLog?b:a.tickInterval;if(f)d=ba(f,this);else if(e)d=b;else if(h)d=ab(h,b);else if(c&&1E3<=a)for(;c--&&d===G;)e=Math.pow(1E3,c+1),a>=e&&null!==n[c]&&(d=R(b/e,-1)+n[c]);d===G&&(d=1E4<=b?R(b,0):R(b,-1,G,""));
return d},getSeriesExtremes:function(){var a=this,b=a.chart;a.hasVisibleSeries=!1;a.dataMin=a.dataMax=null;a.stackExtremes={};a.buildStacks();A(a.series,function(e){if(e.visible||!b.options.chart.ignoreHiddenSeries){var h;h=e.options.threshold;var n;a.hasVisibleSeries=!0;a.isLog&&0>=h&&(h=null);if(a.isXAxis){if(h=e.xData,h.length)a.dataMin=T(r(a.dataMin,h[0]),qa(h)),a.dataMax=E(r(a.dataMax,h[0]),na(h))}else e.getExtremes(),n=e.dataMax,e=e.dataMin,u(e)&&u(n)&&(a.dataMin=T(r(a.dataMin,e),e),a.dataMax=
E(r(a.dataMax,n),n)),u(h)&&(a.dataMin>=h?(a.dataMin=h,a.ignoreMinPadding=!0):a.dataMax<h&&(a.dataMax=h,a.ignoreMaxPadding=!0))}})},translate:function(a,b,e,h,n,c){var d=this.len,f=1,g=0,k=h?this.oldTransA:this.transA;h=h?this.oldMin:this.min;var l=this.minPixelPadding;n=(this.options.ordinal||this.isLog&&n)&&this.lin2val;k||(k=this.transA);e&&(f*=-1,g=d);this.reversed&&(f*=-1,g-=f*d);b?(a=a*f+g,a-=l,a=a/k+h,n&&(a=this.lin2val(a))):(n&&(a=this.val2lin(a)),"between"===c&&(c=.5),a=f*(a-h)*k+g+f*l+(p(c)?
k*c*this.pointRange:0));return a},toPixels:function(a,b){return this.translate(a,!1,!this.horiz,null,!0)+(b?0:this.pos)},toValue:function(a,b){return this.translate(a-(b?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(a,b,e,h,n){var c=this.chart,d=this.left,f=this.top,g,k,l=e&&c.oldChartHeight||c.chartHeight,m=e&&c.oldChartWidth||c.chartWidth,p;g=this.transB;n=r(n,this.translate(a,null,null,e));a=e=C(n+g);g=k=C(l-n-g);if(isNaN(n))p=!0;else if(this.horiz){if(g=f,k=l-this.bottom,a<d||
a>d+this.width)p=!0}else if(a=d,e=m-this.right,g<f||g>f+this.height)p=!0;return p&&!h?null:c.renderer.crispLine(["M",a,g,"L",e,k],b||1)},getLinearTickPositions:function(a,b,e){var h;b=O(ca(b/a)*a);e=O(Qa(e/a)*a);for(var n=[];b<=e;){n.push(b);b=O(b+a);if(b===h)break;h=b}return n},getMinorTickPositions:function(){var a=this.options,b=this.tickPositions,e=this.minorTickInterval,h=[],n;if(this.isLog)for(n=b.length,a=1;a<n;a++)h=h.concat(this.getLogTickPositions(e,b[a-1],b[a],!0));else if(this.isDatetimeAxis&&
"auto"===a.minorTickInterval)h=h.concat(this.getTimeTicks(this.normalizeTimeTickInterval(e),this.min,this.max,a.startOfWeek)),h[0]<this.min&&h.shift();else for(b=this.min+(b[0]-this.min)%e;b<=this.max;b+=e)h.push(b);return h},adjustForMinRange:function(){var a=this.options,b=this.min,e=this.max,h,n=this.dataMax-this.dataMin>=this.minRange,c,d,f,g;this.isXAxis&&this.minRange===G&&!this.isLog&&(u(a.min)||u(a.max)?this.minRange=null:(A(this.series,function(a){g=a.xData;for(d=a.xIncrement?1:g.length-
1;0<d;d--)if(f=g[d]-g[d-1],c===G||f<c)c=f}),this.minRange=T(5*c,this.dataMax-this.dataMin)));if(e-b<this.minRange){var k=this.minRange;h=(k-e+b)/2;h=[b-h,r(a.min,b-h)];n&&(h[2]=this.dataMin);b=na(h);e=[b+k,r(a.max,b+k)];n&&(e[2]=this.dataMax);e=qa(e);e-b<k&&(h[0]=e-k,h[1]=r(a.min,e-k),b=na(h))}this.min=b;this.max=e},setAxisTranslation:function(a){var b=this.max-this.min,e=0,h,n=0,c=0,f=this.linkedParent,g=!!this.categories,k=this.transA;if(this.isXAxis||g)f?(n=f.minPointOffset,c=f.pointRangePadding):
A(this.series,function(a){var f=E(a.pointRange,+g),k=a.options.pointPlacement,l=a.closestPointRange;f>b&&(f=0);e=E(e,f);n=E(n,d(k)?0:f/2);c=E(c,"on"===k?0:f);!a.noSharedTooltip&&u(l)&&(h=u(h)?T(h,l):l)}),f=this.ordinalSlope&&h?this.ordinalSlope/h:1,this.minPointOffset=n*=f,this.pointRangePadding=c*=f,this.pointRange=T(e,b),this.closestPointRange=h;a&&(this.oldTransA=k);this.translationSlope=this.transA=k=this.len/(b+c||1);this.transB=this.horiz?this.left:this.bottom;this.minPixelPadding=k*n},setTickPositions:function(a){var b=
this,e=b.chart,h=b.options,n=b.isLog,c=b.isDatetimeAxis,d=b.isXAxis,f=b.isLinked,g=b.options.tickPositioner,k=h.maxPadding,l=h.minPadding,p=h.tickInterval,L=h.minTickInterval,v=h.tickPixelInterval,z,q=b.categories;f?(b.linkedParent=e[b.coll][h.linkedTo],e=b.linkedParent.getExtremes(),b.min=r(e.min,e.dataMin),b.max=r(e.max,e.dataMax),h.type!==b.linkedParent.options.type&&fa(11,1)):(b.min=r(b.userMin,h.min,b.dataMin),b.max=r(b.userMax,h.max,b.dataMax));n&&(!a&&0>=T(b.min,r(b.dataMin,b.min))&&fa(10,
1),b.min=O(m(b.min)),b.max=O(m(b.max)));b.range&&u(b.max)&&(b.userMin=b.min=E(b.min,b.max-b.range),b.userMax=b.max,b.range=null);b.beforePadding&&b.beforePadding();b.adjustForMinRange();!q&&!b.usePercentage&&!f&&u(b.min)&&u(b.max)&&(e=b.max-b.min)&&(u(h.min)||u(b.userMin)||!l||!(0>b.dataMin)&&b.ignoreMinPadding||(b.min-=e*l),u(h.max)||u(b.userMax)||!k||!(0<b.dataMax)&&b.ignoreMaxPadding||(b.max+=e*k));b.min===b.max||void 0===b.min||void 0===b.max?b.tickInterval=1:f&&!p&&v===b.linkedParent.options.tickPixelInterval?
b.tickInterval=b.linkedParent.tickInterval:(b.tickInterval=r(p,q?1:(b.max-b.min)*v/E(b.len,v)),!u(p)&&b.len<v&&!this.isRadial&&!q&&h.startOnTick&&h.endOnTick&&(z=!0,b.tickInterval/=4));d&&!a&&A(b.series,function(a){a.processData(b.min!==b.oldMin||b.max!==b.oldMax)});b.setAxisTranslation(!0);b.beforeSetTickPositions&&b.beforeSetTickPositions();b.postProcessTickInterval&&(b.tickInterval=b.postProcessTickInterval(b.tickInterval));b.pointRange&&(b.tickInterval=E(b.pointRange,b.tickInterval));!p&&b.tickInterval<
L&&(b.tickInterval=L);c||n||p||(b.tickInterval=ka(b.tickInterval,null,xa(b.tickInterval),h));b.minorTickInterval="auto"===h.minorTickInterval&&b.tickInterval?b.tickInterval/5:h.minorTickInterval;b.tickPositions=a=h.tickPositions?[].concat(h.tickPositions):g&&g.apply(b,[b.min,b.max]);a||(!b.ordinalPositions&&(b.max-b.min)/b.tickInterval>E(2*b.len,200)&&fa(19,!0),a=c?b.getTimeTicks(b.normalizeTimeTickInterval(b.tickInterval,h.units),b.min,b.max,h.startOfWeek,b.ordinalPositions,b.closestPointRange,!0):
n?b.getLogTickPositions(b.tickInterval,b.min,b.max):b.getLinearTickPositions(b.tickInterval,b.min,b.max),z&&a.splice(1,a.length-2),b.tickPositions=a);f||(n=a[0],c=a[a.length-1],f=b.minPointOffset||0,h.startOnTick?b.min=n:b.min-f>n&&a.shift(),h.endOnTick?b.max=c:b.max+f<c&&a.pop(),1===a.length&&(b.min-=.001,b.max+=.001))},setMaxTicks:function(){var a=this.chart,b=a.maxTicks||{},e=this.tickPositions,h=this._maxTicksKey=[this.coll,this.pos,this.len].join("-");!this.isLinked&&!this.isDatetimeAxis&&e&&
e.length>(b[h]||0)&&!1!==this.options.alignTicks&&(b[h]=e.length);a.maxTicks=b},adjustTickAmount:function(){var a=this._maxTicksKey,b=this.tickPositions,e=this.chart.maxTicks;if(e&&e[a]&&!this.isDatetimeAxis&&!this.categories&&!this.isLinked&&!1!==this.options.alignTicks&&this.min!==G){var h=this.tickAmount,n=b.length;this.tickAmount=a=e[a];if(n<a){for(;b.length<a;)b.push(O(b[b.length-1]+this.tickInterval));this.transA*=(n-1)/(a-1);this.max=b[b.length-1]}u(h)&&a!==h&&(this.isDirty=!0)}},setScale:function(){var a=
this.stacks,b,e,h,n;this.oldMin=this.min;this.oldMax=this.max;this.oldAxisLength=this.len;this.setAxisSize();n=this.len!==this.oldAxisLength;A(this.series,function(a){if(a.isDirtyData||a.isDirty||a.xAxis.isDirty)h=!0});if(n||h||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax){if(!this.isXAxis)for(b in a)for(e in a[b])a[b][e].total=null,a[b][e].cum=0;this.forceRedraw=!1;this.getSeriesExtremes();this.setTickPositions();this.oldUserMin=this.userMin;this.oldUserMax=
this.userMax;this.isDirty||(this.isDirty=n||this.min!==this.oldMin||this.max!==this.oldMax)}else if(!this.isXAxis)for(b in this.oldStacks&&(a=this.stacks=this.oldStacks),a)for(e in a[b])a[b][e].cum=a[b][e].total;this.setMaxTicks()},setExtremes:function(a,b,e,h,n){var c=this,d=c.chart;e=r(e,!0);n=g(n,{min:a,max:b});W(c,"setExtremes",n,function(){c.userMin=a;c.userMax=b;c.eventArgs=n;c.isDirtyExtremes=!0;e&&d.redraw(h)})},zoom:function(a,b){this.allowZoomOutside||(u(this.dataMin)&&a<=this.dataMin&&
(a=G),u(this.dataMax)&&b>=this.dataMax&&(b=G));this.displayBtn=a!==G||b!==G;this.setExtremes(a,b,!1,G,{trigger:"zoom"});return!0},setAxisSize:function(){var a=this.chart,b=this.options,e=b.offsetLeft||0,h=b.offsetRight||0,n=this.horiz,c,d;this.left=d=r(b.left,a.plotLeft+e);this.top=c=r(b.top,a.plotTop);this.width=e=r(b.width,a.plotWidth-e+h);this.height=b=r(b.height,a.plotHeight);this.bottom=a.chartHeight-b-c;this.right=a.chartWidth-e-d;this.len=E(n?e:b,0);this.pos=n?d:c},getExtremes:function(){var a=
this.isLog;return{min:a?O(t(this.min)):this.min,max:a?O(t(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(a){var b=this.isLog,e=b?t(this.min):this.min,b=b?t(this.max):this.max;e>a||null===a?a=e:b<a&&(a=b);return this.translate(a,0,1,0,1)},autoLabelAlign:function(a){a=(r(a,0)-90*this.side+720)%360;return 15<a&&165>a?"right":195<a&&345>a?"left":"center"},getOffset:function(){var a=this,b=a.chart,e=b.renderer,h=a.options,
n=a.tickPositions,c=a.ticks,d=a.horiz,f=a.side,g=b.inverted?[1,0,3,2][f]:f,k,l=0,m,p=0,v=h.title,z=h.labels,q=0,t=b.axisOffset,K=b.clipOffset,D=[-1,1,1,-1][f],w,I=1,M=r(z.maxStaggerLines,5),F,C,da,x;a.hasData=k=a.hasVisibleSeries||u(a.min)&&u(a.max)&&!!n;a.showAxis=b=k||r(h.showEmpty,!0);a.staggerLines=a.horiz&&z.staggerLines;a.axisGroup||(a.gridGroup=e.g("grid").attr({zIndex:h.gridZIndex||1}).add(),a.axisGroup=e.g("axis").attr({zIndex:h.zIndex||2}).add(),a.labelGroup=e.g("axis-labels").attr({zIndex:z.zIndex||
7}).add());if(k||a.isLinked){a.labelAlign=r(z.align||a.autoLabelAlign(z.rotation));A(n,function(b){c[b]?c[b].addLabel():c[b]=new U(a,b)});if(a.horiz&&!a.staggerLines&&M&&!z.rotation){for(w=a.reversed?[].concat(n).reverse():n;I<M;){k=[];F=!1;for(z=0;z<w.length;z++)C=w[z],da=(da=c[C].label&&c[C].label.getBBox())?da.width:0,x=z%I,da&&(C=a.translate(C),k[x]!==G&&C<k[x]&&(F=!0),k[x]=C+da);if(F)I++;else break}1<I&&(a.staggerLines=I)}A(n,function(b){if(0===f||2===f||{1:"left",3:"right"}[f]===a.labelAlign)q=
E(c[b].getLabelSize(),q)});a.staggerLines&&(q*=a.staggerLines,a.labelOffset=q)}else for(w in c)c[w].destroy(),delete c[w];v&&v.text&&!1!==v.enabled&&(a.axisTitle||(a.axisTitle=e.text(v.text,0,0,v.useHTML).attr({zIndex:7,rotation:v.rotation||0,align:v.textAlign||{low:"left",middle:"center",high:"right"}[v.align]}).css(v.style).add(a.axisGroup),a.axisTitle.isNew=!0),b&&(l=a.axisTitle.getBBox()[d?"height":"width"],p=r(v.margin,d?5:10),m=v.offset),a.axisTitle[b?"show":"hide"]());a.offset=D*r(h.offset,
t[f]);a.axisTitleMargin=r(m,q+p+(2!==f&&q&&D*h.labels[d?"y":"x"]));t[f]=E(t[f],a.axisTitleMargin+l+D*a.offset);K[g]=E(K[g],2*ca(h.lineWidth/2))},getLinePath:function(a){var b=this.chart,e=this.opposite,h=this.offset,n=this.horiz,c=this.left+(e?this.width:0)+h,h=b.chartHeight-this.bottom-(e?this.height:0)+h;e&&(a*=-1);return b.renderer.crispLine(["M",n?this.left:c,n?h:this.top,"L",n?b.chartWidth-this.right:c,n?h:b.chartHeight-this.bottom],a)},getTitlePosition:function(){var a=this.horiz,b=this.left,
e=this.top,h=this.len,n=this.options.title,c=a?b:e,d=this.opposite,f=this.offset,g=k(n.style.fontSize||12),h={low:c+(a?0:h),middle:c+h/2,high:c+(a?h:0)}[n.align],b=(a?e+this.height:b)+(a?1:-1)*(d?-1:1)*this.axisTitleMargin+(2===this.side?g:0);return{x:a?h:b+(d?this.width:0)+f+(n.x||0),y:a?b-(d?this.height:0)+f:h+(n.y||0)}},render:function(){var a=this,b=a.horiz,e=a.reversed,h=a.chart,n=h.renderer,c=a.options,d=a.isLog,f=a.isLinked,g=a.tickPositions,k,l=a.axisTitle,m=a.stacks,p=a.ticks,r=a.minorTicks,
z=a.alternateBands,v=c.stackLabels,q=c.alternateGridColor,D=a.tickmarkOffset,K=c.lineWidth,w=h.hasRendered&&u(a.oldMin)&&!isNaN(a.oldMin),I=a.hasData,M=a.showAxis,F,C=a.justifyLabels=!a.staggerLines&&b&&"justify"===c.labels.overflow,da;a.labelEdge.length=0;A([p,r,z],function(a){for(var b in a)a[b].isActive=!1});if(I||f)(a.minorTickInterval&&!a.categories&&A(a.getMinorTickPositions(),function(b){r[b]||(r[b]=new U(a,b,"minor"));w&&r[b].isNew&&r[b].render(null,!0);r[b].render(null,!1,1)}),g.length&&
(k=g.slice(),(b&&e||!b&&!e)&&k.reverse(),C&&(k=k.slice(1).concat([k[0]])),A(k,function(b,e){C&&(e=e===k.length-1?0:e+1);if(!f||b>=a.min&&b<=a.max)p[b]||(p[b]=new U(a,b)),w&&p[b].isNew&&p[b].render(e,!0,.1),p[b].render(e,!1,1)}),D&&0===a.min&&(p[-1]||(p[-1]=new U(a,-1,null,!0)),p[-1].render(-1))),q&&A(g,function(b,e){0===e%2&&b<a.max&&(z[b]||(z[b]=new sb(a)),F=b+D,da=g[e+1]!==G?g[e+1]+D:a.max,z[b].options={from:d?t(F):F,to:d?t(da):da,color:q},z[b].render(),z[b].isActive=!0)}),a._addedPlotLB)||(A((c.plotLines||
[]).concat(c.plotBands||[]),function(b){a.addPlotBandOrLine(b)}),a._addedPlotLB=!0);A([p,r,z],function(a){var b,e,n=[],c=Ga?Ga.duration||500:0,d=function(){for(e=n.length;e--;)a[n[e]]&&!a[n[e]].isActive&&(a[n[e]].destroy(),delete a[n[e]])};for(b in a)a[b].isActive||(a[b].render(b,!1,0),a[b].isActive=!1,n.push(b));a!==z&&h.hasRendered&&c?c&&setTimeout(d,c):d()});K&&(b=a.getLinePath(K),a.axisLine?a.axisLine.animate({d:b}):a.axisLine=n.path(b).attr({stroke:c.lineColor,"stroke-width":K,zIndex:7}).add(a.axisGroup),
a.axisLine[M?"show":"hide"]());l&&M&&(l[l.isNew?"attr":"animate"](a.getTitlePosition()),l.isNew=!1);if(v&&v.enabled){var x,J,c=a.stackTotalGroup;c||(a.stackTotalGroup=c=n.g("stack-labels").attr({visibility:"visible",zIndex:6}).add());c.translate(h.plotLeft,h.plotTop);for(x in m)for(J in n=m[x],n)n[J].render(c)}a.isDirty=!1},redraw:function(){var a=this.chart.pointer;a.reset&&a.reset(!0);this.render();A(this.plotLinesAndBands,function(a){a.render()});A(this.series,function(a){a.isDirty=!0})},buildStacks:function(){var a=
this.series,b=a.length;if(!this.isXAxis){for(;b--;)a[b].setStackedPoints();if(this.usePercentage)for(b=0;b<a.length;b++)a[b].setPercentStacks()}},destroy:function(a){var b=this,e=b.stacks,h,n=b.plotLinesAndBands;a||va(b);for(h in e)oa(e[h]),e[h]=null;A([b.ticks,b.minorTicks,b.alternateBands],function(a){oa(a)});for(a=n.length;a--;)n[a].destroy();A("stackTotalGroup axisLine axisTitle axisGroup cross gridGroup labelGroup".split(" "),function(a){b[a]&&(b[a]=b[a].destroy())});this.cross&&this.cross.destroy()},
drawCrosshair:function(a,b){if(this.crosshair)if(!1===(u(b)||!r(this.crosshair.snap,!0)))this.hideCrosshair();else{var e,h=this.crosshair,n=h.animation;r(h.snap,!0)?u(b)&&(e=this.chart.inverted!=this.horiz?b.plotX:this.len-b.plotY):e=this.horiz?a.chartX-this.pos:this.len-a.chartY+this.pos;e=this.isRadial?this.getPlotLinePath(this.isXAxis?b.x:r(b.stackY,b.y)):this.getPlotLinePath(null,null,null,null,e);if(null===e)this.hideCrosshair();else if(this.cross)this.cross.attr({visibility:"visible"})[n?"animate":
"attr"]({d:e},n);else n={"stroke-width":h.width||1,stroke:h.color||"#C0C0C0",zIndex:h.zIndex||2},h.dashStyle&&(n.dashstyle=h.dashStyle),this.cross=this.chart.renderer.path(e).attr(n).add()}},hideCrosshair:function(){this.cross&&this.cross.hide()}};g(M.prototype,{getPlotBandPath:function(a,b){var e=this.getPlotLinePath(b),h=this.getPlotLinePath(a);h&&e?h.push(e[4],e[5],e[1],e[2]):h=null;return h},addPlotBand:function(a){this.addPlotBandOrLine(a,"plotBands")},addPlotLine:function(a){this.addPlotBandOrLine(a,
"plotLines")},addPlotBandOrLine:function(a,b){var e=(new sb(this,a)).render(),h=this.userOptions;e&&(b&&(h[b]=h[b]||[],h[b].push(a)),this.plotLinesAndBands.push(e));return e},removePlotBandOrLine:function(a){for(var b=this.plotLinesAndBands,e=this.options,h=this.userOptions,n=b.length;n--;)b[n].id===a&&b[n].destroy();A([e.plotLines||[],h.plotLines||[],e.plotBands||[],h.plotBands||[]],function(b){for(n=b.length;n--;)b[n].id===a&&q(b,b[n])})}});M.prototype.getLogTickPositions=function(a,b,e,h){var n=
this.options,c=this.len,d=[];h||(this._minorAutoInterval=null);if(.5<=a)a=C(a),d=this.getLinearTickPositions(a,b,e);else if(.08<=a)for(var c=ca(b),f,g,k,l,p,n=.3<a?[1,2,4]:.15<a?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];c<e+1&&!p;c++)for(g=n.length,f=0;f<g&&!p;f++)k=m(t(c)*n[f]),k>b&&(!h||l<=e)&&d.push(l),l>e&&(p=!0),l=k;else(b=t(b),e=t(e),a=n[h?"minorTickInterval":"tickInterval"],a=r("auto"===a?null:a,this._minorAutoInterval,n.tickPixelInterval/(h?5:1)*(e-b)/((h?c/this.tickPositions.length:c)||1)),a=ka(a,
null,xa(a)),d=Ua(this.getLinearTickPositions(a,b,e),m),h)||(this._minorAutoInterval=a/5);h||(this.tickInterval=a);return d};M.prototype.getTimeTicks=function(a,b,e,h){var n=[],c={},d=ia.global.useUTC,f,k=new Date(b-Ta),l=a.unitRange,m=a.count;if(u(b)){l>=X.second&&(k.setMilliseconds(0),k.setSeconds(l>=X.minute?0:m*ca(k.getSeconds()/m)));if(l>=X.minute)k[ub](l>=X.hour?0:m*ca(k[kb]()/m));if(l>=X.hour)k[vb](l>=X.day?0:m*ca(k[lb]()/m));if(l>=X.day)k[nb](l>=X.month?1:m*ca(k[Wa]()/m));l>=X.month&&(k[wb](l>=
X.year?0:m*ca(k[db]()/m)),f=k[eb]());l>=X.year&&(f-=f%m,k[xb](f));if(l===X.week)k[nb](k[Wa]()-k[mb]()+r(h,1));b=1;Ta&&(k=new Date(k.getTime()+Ta));f=k[eb]();h=k.getTime();for(var p=k[db](),v=k[Wa](),q=d?Ta:(864E5+6E4*k.getTimezoneOffset())%864E5;h<e;)n.push(h),l===X.year?h=cb(f+b*m,0):l===X.month?h=cb(f,p+b*m):d||l!==X.day&&l!==X.week?h+=l*m:h=cb(f,p,v+b*m*(l===X.day?1:7)),b++;n.push(h);A(qb(n,function(a){return l<=X.hour&&a%X.day===q}),function(a){c[a]="day"})}n.info=g(a,{higherRanks:c,totalRange:l*
m});return n};M.prototype.normalizeTimeTickInterval=function(a,b){var e=b||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],h=e[e.length-1],n=X[h[0]],c=h[1],d;for(d=0;d<e.length&&!(h=e[d],n=X[h[0]],c=h[1],e[d+1]&&a<=(n*c[c.length-1]+X[e[d+1][0]])/2);d++);n===X.year&&a<5*n&&(c=[1,2,5]);e=ka(a/n,c,"year"===h[0]?E(xa(a/n),1):1);return{unitRange:n,count:e,
unitName:h[0]}};da.prototype={destroy:function(){oa(this,this.axis)},render:function(a){var b=this.options,e=b.format,e=e?ba(e,this):b.formatter.call(this);this.label?this.label.attr({text:e,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(e,0,0,b.useHTML).css(b.style).attr({align:this.textAlign,rotation:b.rotation,visibility:"hidden"}).add(a)},setOffset:function(a,b){var e=this.axis,h=e.chart,n=h.inverted,c=this.isNegative,d=e.translate(this.percent?100:this.total,0,0,0,1),e=e.translate(0),
e=aa(d-e),f=h.xAxis[0].translate(this.x)+a,g=h.plotHeight,c={x:n?c?d:d-e:f,y:n?g-f-b:c?g-d-e:g-d,width:n?e:b,height:n?b:e};if(n=this.label)n.align(this.alignOptions,null,c),c=n.alignAttr,n.attr({visibility:!1===this.options.crop||h.isInsidePlot(c.x,c.y)?ta?"inherit":"visible":"hidden"})}};K.prototype={init:function(a,b){var e=b.borderWidth,h=b.style,n=k(h.padding);this.chart=a;this.options=b;this.crosshairs=[];this.now={x:0,y:0};this.isHidden=!0;this.label=a.renderer.label("",0,0,b.shape,null,null,
b.useHTML,null,"tooltip").attr({padding:n,fill:b.backgroundColor,"stroke-width":e,r:b.borderRadius,zIndex:8}).css(h).css({padding:0}).add().attr({y:-999});Ba||this.label.shadow(b.shadow);this.shared=b.shared},destroy:function(){this.label&&(this.label=this.label.destroy());clearTimeout(this.hideTimer);clearTimeout(this.tooltipTimeout)},move:function(a,b,e,h){var n=this,c=n.now,d=!1!==n.options.animation&&!n.isHidden;g(c,{x:d?(2*c.x+a)/3:a,y:d?(c.y+b)/2:b,anchorX:d?(2*c.anchorX+e)/3:e,anchorY:d?(c.anchorY+
h)/2:h});n.label.attr(c);d&&(1<aa(a-c.x)||1<aa(b-c.y))&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){n&&n.move(a,b,e,h)},32))},hide:function(){var a=this,b;clearTimeout(this.hideTimer);this.isHidden||(b=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){a.label.fadeOut();a.isHidden=!0},r(this.options.hideDelay,500)),b&&A(b,function(a){a.setState()}),this.chart.hoverPoints=null)},getAnchor:function(a,b){var e,h=this.chart,n=h.inverted,c=h.plotTop,d=0,f=0,g;
a=x(a);e=a[0].tooltipPos;this.followPointer&&b&&(b.chartX===G&&(b=h.pointer.normalize(b)),e=[b.chartX-h.plotLeft,b.chartY-c]);e||(A(a,function(a){g=a.series.yAxis;d+=a.plotX;f+=(a.plotLow?(a.plotLow+a.plotHigh)/2:a.plotY)+(!n&&g?g.top-c:0)}),d/=a.length,f/=a.length,e=[n?h.plotWidth-f:d,this.shared&&!n&&1<a.length&&b?b.chartY-c:n?h.plotHeight-d:f]);return Ua(e,C)},getPosition:function(a,b,e){var h=this.chart,n=h.plotLeft,c=h.plotTop,d=h.plotWidth,f=h.plotHeight,g=r(this.options.distance,12),k=e.plotX;
e=e.plotY;var h=k+n+(h.inverted?g:-a-g),l=e-b+c+15,m;7>h&&(h=n+E(k,0)+g);h+a>n+d&&(h-=h+a-(n+d),l=e-b+c-g,m=!0);l<c+5&&(l=c+5,m&&e>=l&&e<=l+b&&(l=e+c+g));l+b>c+f&&(l=E(c,c+f-b-g));return{x:h,y:l}},defaultFormatter:function(a){var b=this.points||x(this),e=b[0].series,h;h=[e.tooltipHeaderFormatter(b[0])];A(b,function(a){e=a.series;h.push(e.tooltipFormatter&&e.tooltipFormatter(a)||a.point.tooltipFormatter(e.tooltipOptions.pointFormat))});h.push(a.options.footerFormat||"");return h.join("")},refresh:function(a,
b){var e=this.chart,h=this.label,n=this.options,c,d,f={},g,k=[];g=n.formatter||this.defaultFormatter;var f=e.hoverPoints,l,m=this.shared;clearTimeout(this.hideTimer);this.followPointer=x(a)[0].series.tooltipOptions.followPointer;d=this.getAnchor(a,b);c=d[0];d=d[1];!m||a.series&&a.series.noSharedTooltip?f=a.getLabelConfig():(e.hoverPoints=a,f&&A(f,function(a){a.setState()}),A(a,function(a){a.setState("hover");k.push(a.getLabelConfig())}),f={x:a[0].category,y:a[0].y},f.points=k,a=a[0]);g=g.call(f,this);
f=a.series;!1===g?this.hide():(this.isHidden&&(Za(h),h.attr("opacity",1).show()),h.attr({text:g}),l=n.borderColor||a.color||f.color||"#606060",h.attr({stroke:l}),this.updatePosition({plotX:c,plotY:d}),this.isHidden=!1);W(e,"tooltipRefresh",{text:g,x:c+e.plotLeft,y:d+e.plotTop,borderColor:l})},updatePosition:function(a){var b=this.chart,e=this.label,e=(this.options.positioner||this.getPosition).call(this,e.width,e.height,a);this.move(C(e.x),C(e.y),a.plotX+b.plotLeft,a.plotY+b.plotTop)}};var $a=Highcharts.Pointer=
function(a,b){this.init(a,b)};$a.prototype={init:function(a,b){var e=b.chart,h=e.events,n=Ba?"":e.zoomType,e=a.inverted,c;this.options=b;this.chart=a;this.zoomX=c=/x/.test(n);this.zoomY=n=/y/.test(n);this.zoomHor=c&&!e||n&&e;this.zoomVert=n&&!e||c&&e;this.runChartClick=h&&!!h.click;this.pinchDown=[];this.lastValidTouch={};b.tooltip.enabled&&(a.tooltip=new K(a,b.tooltip));this.setDOMEvents()},normalize:function(a,b){var e,h;a=a||Q.event;a.target||(a.target=a.srcElement);a=Ib(a);h=a.touches?a.touches.item(0):
a;b||(this.chartPosition=b=Hb(this.chart.container));h.pageX===G?(e=E(a.x,a.clientX-b.left),h=a.y):(e=h.pageX-b.left,h=h.pageY-b.top);return g(a,{chartX:C(e),chartY:C(h)})},getCoordinates:function(a){var b={xAxis:[],yAxis:[]};A(this.chart.axes,function(e){b[e.isXAxis?"xAxis":"yAxis"].push({axis:e,value:e.toValue(a[e.horiz?"chartX":"chartY"])})});return b},getIndex:function(a){var b=this.chart;return b.inverted?b.plotHeight+b.plotTop-a.chartY:a.chartX-b.plotLeft},runPointActions:function(a){var b=
this,e=b.chart,h=e.series,n=e.tooltip,c,d,f=e.hoverPoint,g=e.hoverSeries,k,l,m=e.chartWidth,p=b.getIndex(a);if(n&&b.options.tooltip.shared&&(!g||!g.noSharedTooltip)){d=[];k=h.length;for(l=0;l<k;l++)h[l].visible&&!1!==h[l].options.enableMouseTracking&&!h[l].noSharedTooltip&&h[l].tooltipPoints.length&&(c=h[l].tooltipPoints[p])&&c.series&&(c._dist=aa(p-c.clientX),m=T(m,c._dist),d.push(c));for(k=d.length;k--;)d[k]._dist>m&&d.splice(k,1);d.length&&d[0].clientX!==b.hoverX&&(n.refresh(d,a),b.hoverX=d[0].clientX)}if(g&&
g.tracker){if((c=g.tooltipPoints[p])&&c!==f)c.onMouseOver(a)}else n&&n.followPointer&&!n.isHidden&&(h=n.getAnchor([{}],a),n.updatePosition({plotX:h[0],plotY:h[1]}));n&&!b._onDocumentMouseMove&&(b._onDocumentMouseMove=function(a){b.onDocumentMouseMove(a)},ha(F,"mousemove",b._onDocumentMouseMove));A(e.axes,function(b){b.drawCrosshair(a,r(c,f))})},reset:function(a){var b=this.chart,e=b.hoverSeries,h=b.hoverPoint,n=b.tooltip,c=n&&n.shared?b.hoverPoints:h;(a=a&&n&&c)&&x(c)[0].plotX===G&&(a=!1);if(a)n.refresh(c),
h&&h.setState(h.state,!0);else{if(h)h.onMouseOut();if(e)e.onMouseOut();n&&n.hide();this._onDocumentMouseMove&&(va(F,"mousemove",this._onDocumentMouseMove),this._onDocumentMouseMove=null);A(b.axes,function(a){a.hideCrosshair()});this.hoverX=null}},scaleGroups:function(a,b){var e=this.chart,h;A(e.series,function(n){h=a||n.getPlotBox();n.xAxis&&n.xAxis.zoomEnabled&&(n.group.attr(h),n.markerGroup&&(n.markerGroup.attr(h),n.markerGroup.clip(b?e.clipRect:null)),n.dataLabelsGroup&&n.dataLabelsGroup.attr(h))});
e.clipRect.attr(b||e.clipBox)},pinchTranslate:function(a,b,e,h,n,c,d,f){a&&this.pinchTranslateDirection(!0,e,h,n,c,d,f);b&&this.pinchTranslateDirection(!1,e,h,n,c,d,f)},pinchTranslateDirection:function(a,b,e,h,n,c,d,f){var g=this.chart,k=a?"x":"y",l=a?"X":"Y",m="chart"+l,p=a?"width":"height",r=g["plot"+(a?"Left":"Top")],z,v,q=f||1,u=g.inverted,t=g.bounds[a?"h":"v"],D=1===b.length,K=b[0][m],w=e[0][m],I=!D&&b[1][m],G=!D&&e[1][m],U;e=function(){!D&&20<aa(K-I)&&(q=f||aa(w-G)/aa(K-I));v=(r-w)/q+K;z=g["plot"+
(a?"Width":"Height")]/q};e();b=v;b<t.min?(b=t.min,U=!0):b+z>t.max&&(b=t.max-z,U=!0);U?(w-=.8*(w-d[k][0]),D||(G-=.8*(G-d[k][1])),e()):d[k]=[w,G];u||(c[k]=v-r,c[p]=z);c=u?1/q:q;n[p]=z;n[k]=b;h[u?a?"scaleY":"scaleX":"scale"+l]=q;h["translate"+l]=c*r+(w-c*K)},pinch:function(a){var b=this,e=b.chart,h=b.pinchDown,n=e.tooltip&&e.tooltip.options.followTouchMove,c=a.touches,d=c.length,f=b.lastValidTouch,k=b.zoomHor||b.pinchHor,l=b.zoomVert||b.pinchVert,m=k||l,p=b.selectionMarker,r={},v=1===d&&(b.inClass(a.target,
"highcharts-tracker")&&e.runTrackerClick||e.runChartClick),z={};(m||n)&&!v&&a.preventDefault();Ua(c,function(a){return b.normalize(a)});"touchstart"===a.type?(A(c,function(a,b){h[b]={chartX:a.chartX,chartY:a.chartY}}),f.x=[h[0].chartX,h[1]&&h[1].chartX],f.y=[h[0].chartY,h[1]&&h[1].chartY],A(e.axes,function(a){if(a.zoomEnabled){var b=e.bounds[a.horiz?"h":"v"],h=a.minPixelPadding,n=a.toPixels(a.dataMin),c=a.toPixels(a.dataMax),d=T(n,c),n=E(n,c);b.min=T(a.pos,d-h);b.max=E(a.pos+a.len,n+h)}})):h.length&&
(p||(b.selectionMarker=p=g({destroy:Da},e.plotBox)),b.pinchTranslate(k,l,h,c,r,p,z,f),b.hasPinched=m,b.scaleGroups(r,z),!m&&n&&1===d&&this.runPointActions(b.normalize(a)))},dragStart:function(a){var b=this.chart;b.mouseIsDown=a.type;b.cancelClick=!1;b.mouseDownX=this.mouseDownX=a.chartX;b.mouseDownY=this.mouseDownY=a.chartY},drag:function(a){var b=this.chart,e=b.options.chart,h=a.chartX,n=a.chartY,c=this.zoomHor,d=this.zoomVert,f=b.plotLeft,g=b.plotTop,k=b.plotWidth,l=b.plotHeight,m,p=this.mouseDownX,
r=this.mouseDownY;h<f?h=f:h>f+k&&(h=f+k);n<g?n=g:n>g+l&&(n=g+l);this.hasDragged=Math.sqrt(Math.pow(p-h,2)+Math.pow(r-n,2));10<this.hasDragged&&(m=b.isInsidePlot(p-f,r-g),b.hasCartesianSeries&&(this.zoomX||this.zoomY)&&m&&!this.selectionMarker&&(this.selectionMarker=b.renderer.rect(f,g,c?1:k,d?1:l,0).attr({fill:e.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add()),this.selectionMarker&&c&&(h-=p,this.selectionMarker.attr({width:aa(h),x:(0<h?0:h)+p})),this.selectionMarker&&d&&(h=n-r,this.selectionMarker.attr({height:aa(h),
y:(0<h?0:h)+r})),m&&!this.selectionMarker&&e.panning&&b.pan(a,e.panning))},drop:function(a){var b=this.chart,e=this.hasPinched;if(this.selectionMarker){var h={xAxis:[],yAxis:[],originalEvent:a.originalEvent||a},n=this.selectionMarker,c=n.x,d=n.y,f;if(this.hasDragged||e)A(b.axes,function(a){if(a.zoomEnabled){var b=a.horiz,e=a.toValue(b?c:d),b=a.toValue(b?c+n.width:d+n.height);!isNaN(e)&&!isNaN(b)&&(h[a.coll].push({axis:a,min:T(e,b),max:E(e,b)}),f=!0)}}),f&&W(b,"selection",h,function(a){b.zoom(g(a,
e?{animation:!1}:null))});this.selectionMarker=this.selectionMarker.destroy();e&&this.scaleGroups()}b&&(H(b.container,{cursor:b._cursor}),b.cancelClick=10<this.hasDragged,b.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(a){a=this.normalize(a);a.preventDefault&&a.preventDefault();this.dragStart(a)},onDocumentMouseUp:function(a){this.drop(a)},onDocumentMouseMove:function(a){var b=this.chart,e=this.chartPosition,h=b.hoverSeries;a=this.normalize(a,e);
e&&h&&!this.inClass(a.target,"highcharts-tracker")&&!b.isInsidePlot(a.chartX-b.plotLeft,a.chartY-b.plotTop)&&this.reset()},onContainerMouseLeave:function(){this.reset();this.chartPosition=null},onContainerMouseMove:function(a){var b=this.chart;a=this.normalize(a);"mousedown"===b.mouseIsDown&&this.drag(a);(this.inClass(a.target,"highcharts-tracker")||b.isInsidePlot(a.chartX-b.plotLeft,a.chartY-b.plotTop))&&!b.openMenu&&this.runPointActions(a)},inClass:function(a,b){for(var e;a;){if(e=w(a,"class")){if(-1!==
e.indexOf(b))return!0;if(-1!==e.indexOf("highcharts-container"))return!1}a=a.parentNode}},onTrackerMouseOut:function(a){var b=this.chart.hoverSeries,e=(a=a.relatedTarget||a.toElement)&&a.point&&a.point.series;if(b&&!b.options.stickyTracking&&!this.inClass(a,"highcharts-tooltip")&&e!==b)b.onMouseOut()},onContainerClick:function(a){var b=this.chart,e=b.hoverPoint,h=b.plotLeft,c=b.plotTop,d=b.inverted,f,k,l;a=this.normalize(a);a.cancelBubble=!0;b.cancelClick||(e&&this.inClass(a.target,"highcharts-tracker")?
(f=this.chartPosition,k=e.plotX,l=e.plotY,g(e,{pageX:f.left+h+(d?b.plotWidth-l:k),pageY:f.top+c+(d?b.plotHeight-k:l)}),W(e.series,"click",g(a,{point:e})),b.hoverPoint&&e.firePointEvent("click",a)):(g(a,this.getCoordinates(a)),b.isInsidePlot(a.chartX-h,a.chartY-c)&&W(b,"click",a)))},onContainerTouchStart:function(a){var b=this.chart;1===a.touches.length?(a=this.normalize(a),b.isInsidePlot(a.chartX-b.plotLeft,a.chartY-b.plotTop)?(this.runPointActions(a),this.pinch(a)):this.reset()):2===a.touches.length&&
this.pinch(a)},onContainerTouchMove:function(a){1!==a.touches.length&&2!==a.touches.length||this.pinch(a)},onDocumentTouchEnd:function(a){this.drop(a)},setDOMEvents:function(){var a=this,b=a.chart.container,e;this._events=e=[[b,"onmousedown","onContainerMouseDown"],[b,"onmousemove","onContainerMouseMove"],[b,"onclick","onContainerClick"],[b,"mouseleave","onContainerMouseLeave"],[F,"mouseup","onDocumentMouseUp"]];hb&&e.push([b,"ontouchstart","onContainerTouchStart"],[b,"ontouchmove","onContainerTouchMove"],
[F,"touchend","onDocumentTouchEnd"]);A(e,function(b){a["_"+b[2]]=function(e){a[b[2]](e)};0===b[1].indexOf("on")?b[0][b[1]]=a["_"+b[2]]:ha(b[0],b[1],a["_"+b[2]])})},destroy:function(){var a=this;A(a._events,function(b){0===b[1].indexOf("on")?b[0][b[1]]=null:va(b[0],b[1],a["_"+b[2]])});delete a._events;clearInterval(a.tooltipTimeout)}};ga=Highcharts.TrackerMixin={drawTrackerPoint:function(){var a=this,b=a.chart,e=b.pointer,h=a.options.cursor,c=h&&{cursor:h},d=function(e){var h=e.target,c;if(b.hoverSeries!==
a)a.onMouseOver();for(;h&&!c;)c=h.point,h=h.parentNode;if(c!==G&&c!==b.hoverPoint)c.onMouseOver(e)};A(a.points,function(a){a.graphic&&(a.graphic.element.point=a);a.dataLabel&&(a.dataLabel.element.point=a)});a._hasTracking||(A(a.trackerGroups,function(b){if(a[b]&&(a[b].addClass("highcharts-tracker").on("mouseover",d).on("mouseout",function(a){e.onTrackerMouseOut(a)}).css(c),hb))a[b].on("touchstart",d)}),a._hasTracking=!0)},drawTrackerGraph:function(){var a=this,b=a.options,e=b.trackByArea,h=[].concat(e?
a.areaPath:a.graphPath),c=h.length,d=a.chart,f=d.pointer,g=d.renderer,k=d.options.tooltip.snap,l=a.tracker,m=b.cursor,p=m&&{cursor:m},m=a.singlePoints,r,v=function(){if(d.hoverSeries!==a)a.onMouseOver()};if(c&&!e)for(r=c+1;r--;)"M"===h[r]&&h.splice(r+1,0,h[r+1]-k,h[r+2],"L"),(r&&"M"===h[r]||r===c)&&h.splice(r,0,"L",h[r-2]+k,h[r-1]);for(r=0;r<m.length;r++)c=m[r],h.push("M",c.plotX-k,c.plotY,"L",c.plotX+k,c.plotY);l?l.attr({d:h}):(a.tracker=g.path(h).attr({"stroke-linejoin":"round",visibility:a.visible?
"visible":"hidden",stroke:Bb,fill:e?Bb:ma,"stroke-width":b.lineWidth+(e?0:2*k),zIndex:2}).add(a.group),A([a.tracker,a.markerGroup],function(a){a.addClass("highcharts-tracker").on("mouseover",v).on("mouseout",function(a){f.onTrackerMouseOut(a)}).css(p);if(hb)a.on("touchstart",v)}))}};if(Q.PointerEvent||Q.MSPointerEvent){var Ea={};$a.prototype.getWebkitTouches=function(){var a,b=[];b.item=function(a){return this[a]};for(a in Ea)Ea.hasOwnProperty(a)&&b.push({pageX:Ea[a].pageX,pageY:Ea[a].pageY,target:Ea[a].target});
return b};Ca($a.prototype,"init",function(a,b,e){b.container.style["-ms-touch-action"]=b.container.style["touch-action"]="none";a.call(this,b,e)});Ca($a.prototype,"setDOMEvents",function(a){var b=this;a.apply(this,Array.prototype.slice.call(arguments,1));A([[this.chart.container,"PointerDown","touchstart","onContainerTouchStart",function(a){Ea[a.pointerId]={pageX:a.pageX,pageY:a.pageY,target:a.currentTarget}}],[this.chart.container,"PointerMove","touchmove","onContainerTouchMove",function(a){Ea[a.pointerId]=
{pageX:a.pageX,pageY:a.pageY};Ea[a.pointerId].target||(Ea[a.pointerId].target=a.currentTarget)}],[document,"PointerUp","touchend","onDocumentTouchEnd",function(a){delete Ea[a.pointerId]}]],function(a){ha(a[0],window.PointerEvent?a[1].toLowerCase():"MS"+a[1],function(h){h=h.originalEvent;if("touch"===h.pointerType||h.pointerType===h.MSPOINTER_TYPE_TOUCH)a[4](h),b[a[3]]({type:a[2],target:h.currentTarget,preventDefault:Da,touches:b.getWebkitTouches()})})})})}var tb=Highcharts.Legend=function(a,b){this.init(a,
b)};tb.prototype={init:function(a,b){var e=this,h=b.itemStyle,n=r(b.padding,8),d=b.itemMarginTop||0;this.options=b;b.enabled&&(e.baseline=k(h.fontSize)+3+d,e.itemStyle=h,e.itemHiddenStyle=c(h,b.itemHiddenStyle),e.itemMarginTop=d,e.padding=n,e.initialItemX=n,e.initialItemY=n-5,e.maxItemWidth=0,e.chart=a,e.itemHeight=0,e.lastLineHeight=0,e.symbolWidth=r(b.symbolWidth,16),e.pages=[],e.render(),ha(e.chart,"endResize",function(){e.positionCheckboxes()}))},colorizeItem:function(a,b){var e=this.options,
h=a.legendItem,c=a.legendLine,d=a.legendSymbol,f=this.itemHiddenStyle.color,e=b?e.itemStyle.color:f,g=b?a.legendColor||a.color:f,f=a.options&&a.options.marker,k={stroke:g,fill:g},l;h&&h.css({fill:e,color:e});c&&c.attr({stroke:g});if(d){if(f&&d.isMarker)for(l in f=a.convertAttribs(f),f)h=f[l],h!==G&&(k[l]=h);d.attr(k)}},positionItem:function(a){var b=this.options,e=b.symbolPadding,b=!b.rtl,h=a._legendItemPos,c=h[0],h=h[1],d=a.checkbox;a.legendGroup&&a.legendGroup.translate(b?c:this.legendWidth-c-2*
e-4,h);d&&(d.x=c,d.y=h)},destroyItem:function(a){var b=a.checkbox;A(["legendItem","legendLine","legendSymbol","legendGroup"],function(b){a[b]&&(a[b]=a[b].destroy())});b&&S(a.checkbox)},destroy:function(){var a=this.group,b=this.box;b&&(this.box=b.destroy());a&&(this.group=a.destroy())},positionCheckboxes:function(a){var b=this.group.alignAttr,e,h=this.clipHeight||this.legendHeight;b&&(e=b.translateY,A(this.allItems,function(c){var d=c.checkbox,f;d&&(f=e+d.y+(a||0)+3,H(d,{left:b.translateX+c.legendItemWidth+
d.x-20+"px",top:f+"px",display:f>e-6&&f<e+h-6?"":ma}))}))},renderTitle:function(){var a=this.padding,b=this.options.title,e=0;b.text&&(this.title||(this.title=this.chart.renderer.label(b.text,a-3,a-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(b.style).add(this.group)),a=this.title.getBBox(),e=a.height,this.offsetWidth=a.width,this.contentGroup.attr({translateY:e}));this.titleHeight=e},renderItem:function(a){var b=this,e=b.chart,h=e.renderer,n=b.options,d="horizontal"===n.layout,
f=b.symbolWidth,g=n.symbolPadding,k=b.itemStyle,l=b.itemHiddenStyle,m=b.padding,p=d?r(n.itemDistance,8):0,v=!n.rtl,q=n.width,z=n.itemMarginBottom||0,u=b.itemMarginTop,t=b.initialItemX,D=a.legendItem,K=a.series&&a.series.drawLegendSymbol?a.series:a,w=K.options,w=w&&w.showCheckbox,I=n.useHTML;!D&&(a.legendGroup=h.g("legend-item").attr({zIndex:1}).add(b.scrollGroup),K.drawLegendSymbol(b,a),a.legendItem=D=h.text(n.labelFormat?ba(n.labelFormat,a):n.labelFormatter.call(a),v?f+g:-g,b.baseline,I).css(c(a.visible?
k:l)).attr({align:v?"left":"right",zIndex:2}).add(a.legendGroup),(I?D:a.legendGroup).on("mouseover",function(){a.setState("hover");D.css(b.options.itemHoverStyle)}).on("mouseout",function(){D.css(a.visible?k:l);a.setState()}).on("click",function(b){var e=function(){a.setVisible()};b={browserEvent:b};a.firePointEvent?a.firePointEvent("legendItemClick",b,e):W(a,"legendItemClick",b,e)}),b.colorizeItem(a,a.visible),w)&&(a.checkbox=B("input",{type:"checkbox",checked:a.selected,defaultChecked:a.selected},
n.itemCheckboxStyle,e.container),ha(a.checkbox,"click",function(b){W(a,"checkboxClick",{checked:b.target.checked},function(){a.select()})}));h=D.getBBox();n=a.legendItemWidth=n.itemWidth||a.legendItemWidth||f+g+h.width+p+(w?20:0);b.itemHeight=f=C(a.legendItemHeight||h.height);d&&b.itemX-t+n>(q||e.chartWidth-2*m-t)&&(b.itemX=t,b.itemY+=u+b.lastLineHeight+z,b.lastLineHeight=0);b.maxItemWidth=E(b.maxItemWidth,n);b.lastItemY=u+b.itemY+z;b.lastLineHeight=E(f,b.lastLineHeight);a._legendItemPos=[b.itemX,
b.itemY];d?b.itemX+=n:(b.itemY+=u+f+z,b.lastLineHeight=f);b.offsetWidth=q||E((d?b.itemX-t-p:n)+m,b.offsetWidth)},getAllItems:function(){var a=[];A(this.chart.series,function(b){var e=b.options;r(e.showInLegend,u(e.linkedTo)?!1:G,!0)&&(a=a.concat(b.legendItems||("point"===e.legendType?b.data:b)))});return a},render:function(){var a=this,b=a.chart,e=b.renderer,h=a.group,c,d,f,k,l=a.box,m=a.options,p=a.padding,r=m.borderWidth,v=m.backgroundColor;a.itemX=a.initialItemX;a.itemY=a.initialItemY;a.offsetWidth=
0;a.lastItemY=0;h||(a.group=h=e.g("legend").attr({zIndex:7}).add(),a.contentGroup=e.g().attr({zIndex:1}).add(h),a.scrollGroup=e.g().add(a.contentGroup));a.renderTitle();c=a.getAllItems();Fa(c,function(a,b){return(a.options&&a.options.legendIndex||0)-(b.options&&b.options.legendIndex||0)});m.reversed&&c.reverse();a.allItems=c;a.display=d=!!c.length;A(c,function(b){a.renderItem(b)});f=m.width||a.offsetWidth;k=a.lastItemY+a.lastLineHeight+a.titleHeight;k=a.handleOverflow(k);if(r||v)f+=p,k+=p,l?0<f&&
0<k&&(l[l.isNew?"attr":"animate"](l.crisp(null,null,null,f,k)),l.isNew=!1):(a.box=l=e.rect(0,0,f,k,m.borderRadius,r||0).attr({stroke:m.borderColor,"stroke-width":r||0,fill:v||ma}).add(h).shadow(m.shadow),l.isNew=!0),l[d?"show":"hide"]();a.legendWidth=f;a.legendHeight=k;A(c,function(b){a.positionItem(b)});d&&h.align(g({width:f,height:k},m),!0,"spacingBox");b.isResizing||this.positionCheckboxes()},handleOverflow:function(a){var b=this,e=this.chart,h=e.renderer,c=this.options,d=c.y,d=e.spacingBox.height+
("top"===c.verticalAlign?-d:d)-this.padding,f=c.maxHeight,g,k=this.clipRect,l=c.navigation,m=r(l.animation,!0),p=l.arrowSize||12,v=this.nav,q=this.pages,z,u=this.allItems;"horizontal"===c.layout&&(d/=2);f&&(d=T(d,f));q.length=0;a>d&&!c.useHTML?(this.clipHeight=g=d-20-this.titleHeight-this.padding,this.currentPage=r(this.currentPage,1),this.fullHeight=a,A(u,function(a,b){var e=a._legendItemPos[1],h=C(a.legendItem.bBox.height),c=q.length;(!c||e-q[c-1]>g)&&q.push(z||e);b===u.length-1&&e+h-q[c-1]>g&&
q.push(e);e!==z&&(z=e)}),k||(k=b.clipRect=h.clipRect(0,this.padding,9999,0),b.contentGroup.clip(k)),k.attr({height:g}),v||(this.nav=v=h.g().attr({zIndex:1}).add(this.group),this.up=h.symbol("triangle",0,0,p,p).on("click",function(){b.scroll(-1,m)}).add(v),this.pager=h.text("",15,10).css(l.style).add(v),this.down=h.symbol("triangle-down",0,0,p,p).on("click",function(){b.scroll(1,m)}).add(v)),b.scroll(0),a=d):v&&(k.attr({height:e.chartHeight}),v.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=
0);return a},scroll:function(a,b){var e=this.pages,h=e.length,c=this.currentPage+a,d=this.clipHeight,f=this.options.navigation,g=f.activeColor,f=f.inactiveColor,k=this.pager,l=this.padding;c>h&&(c=h);0<c&&(b!==G&&ra(b,this.chart),this.nav.attr({translateX:l,translateY:d+this.padding+7+this.titleHeight,visibility:"visible"}),this.up.attr({fill:1===c?f:g}).css({cursor:1===c?"default":"pointer"}),k.attr({text:c+"/"+h}),this.down.attr({x:18+this.pager.getBBox().width,fill:c===h?f:g}).css({cursor:c===
h?"default":"pointer"}),e=-e[c-1]+this.initialItemY,this.scrollGroup.animate({translateY:e}),this.currentPage=c,this.positionCheckboxes(e))}};pa=Highcharts.LegendSymbolMixin={drawRectangle:function(a,b){var e=a.options.symbolHeight||12;b.legendSymbol=this.chart.renderer.rect(0,a.baseline-5-e/2,a.symbolWidth,e,r(a.options.symbolRadius,2)).attr({zIndex:3}).add(b.legendGroup)},drawLineMarker:function(a){var b=this.options,e=b.marker,h;h=a.symbolWidth;var c=this.chart.renderer,d=this.legendGroup;a=a.baseline-
C(.3*c.fontMetrics(a.options.itemStyle.fontSize).b);var f;b.lineWidth&&(f={"stroke-width":b.lineWidth},b.dashStyle&&(f.dashstyle=b.dashStyle),this.legendLine=c.path(["M",0,a,"L",h,a]).attr(f).add(d));e&&e.enabled&&(b=e.radius,this.legendSymbol=h=c.symbol(this.symbol,h/2-b,a-b,2*b,2*b).add(d),h.isMarker=!0)}};/Trident\/7\.0/.test(Ha)&&Ca(tb.prototype,"positionItem",function(a,b){var e=this,h=function(){b._legendItemPos&&a.call(e,b)};e.chart.renderer.forExport?h():setTimeout(h)});D.prototype={init:function(a,
b){var e,h=a.series;a.series=null;e=c(ia,a);e.series=a.series=h;this.userOptions=a;h=e.chart;this.margin=this.splashArray("margin",h);this.spacing=this.splashArray("spacing",h);var n=h.events;this.bounds={h:{},v:{}};this.callback=b;this.isResizing=0;this.options=e;this.axes=[];this.series=[];this.hasCartesianSeries=h.showAxes;var d=this,f;d.index=Ra.length;Ra.push(d);!1!==h.reflow&&ha(d,"load",function(){d.initReflow()});if(n)for(f in n)ha(d,f,n[f]);d.xAxis=[];d.yAxis=[];d.animation=Ba?!1:r(h.animation,
!0);d.pointCount=0;d.counters=new la;d.firstRender()},initSeries:function(a){var b=this.options.chart;(b=ja[a.type||b.type||b.defaultSeriesType])||fa(17,!0);b=new b;b.init(this,a);return b},isInsidePlot:function(a,b,e){var h=e?b:a;a=e?a:b;return 0<=h&&h<=this.plotWidth&&0<=a&&a<=this.plotHeight},adjustTickAmounts:function(){!1!==this.options.chart.alignTicks&&A(this.axes,function(a){a.adjustTickAmount()});this.maxTicks=null},redraw:function(a){var b=this.axes,e=this.series,h=this.pointer,c=this.legend,
d=this.isDirtyLegend,f,k,l=this.isDirtyBox,m=e.length,p=m,r=this.renderer,v=r.isHidden(),q=[];ra(a,this);v&&this.cloneRenderTo();for(this.layOutTitles();p--;)if(a=e[p],a.options.stacking&&(f=!0,a.isDirty)){k=!0;break}if(k)for(p=m;p--;)if(a=e[p],a.options.stacking)a.isDirty=!0;A(e,function(a){a.isDirty&&"point"===a.options.legendType&&(d=!0)});d&&c.options.enabled&&(c.render(),this.isDirtyLegend=!1);f&&this.getStacks();this.hasCartesianSeries&&(this.isResizing||(this.maxTicks=null,A(b,function(a){a.setScale()})),
this.adjustTickAmounts(),this.getMargins(),A(b,function(a){a.isDirty&&(l=!0)}),A(b,function(a){a.isDirtyExtremes&&(a.isDirtyExtremes=!1,q.push(function(){W(a,"afterSetExtremes",g(a.eventArgs,a.getExtremes()));delete a.eventArgs}));(l||f)&&a.redraw()}));l&&this.drawChartBox();A(e,function(a){a.isDirty&&a.visible&&(!a.isCartesian||a.xAxis)&&a.redraw()});h&&h.reset&&h.reset(!0);r.draw();W(this,"redraw");v&&this.cloneRenderTo(!0);A(q,function(a){a.call()})},get:function(a){var b=this.axes,e=this.series,
h,c;for(h=0;h<b.length;h++)if(b[h].options.id===a)return b[h];for(h=0;h<e.length;h++)if(e[h].options.id===a)return e[h];for(h=0;h<e.length;h++)for(c=e[h].points||[],b=0;b<c.length;b++)if(c[b].id===a)return c[b];return null},getAxes:function(){var a=this,b=this.options,e=b.xAxis=x(b.xAxis||{}),b=b.yAxis=x(b.yAxis||{});A(e,function(a,b){a.index=b;a.isX=!0});A(b,function(a,b){a.index=b});e=e.concat(b);A(e,function(b){new M(a,b)});a.adjustTickAmounts()},getSelectedPoints:function(){var a=[];A(this.series,
function(b){a=a.concat(qb(b.points||[],function(a){return a.selected}))});return a},getSelectedSeries:function(){return qb(this.series,function(a){return a.selected})},getStacks:function(){var a=this;A(a.yAxis,function(a){a.stacks&&a.hasVisibleSeries&&(a.oldStacks=a.stacks)});A(a.series,function(b){!b.options.stacking||!0!==b.visible&&!1!==a.options.chart.ignoreHiddenSeries||(b.stackKey=b.type+r(b.options.stack,""))})},showResetZoom:function(){var a=this,b=ia.lang,e=a.options.chart.resetZoomButton,
h=e.theme,c=h.states,d="chart"===e.relativeTo?null:"plotBox";this.resetZoomButton=a.renderer.button(b.resetZoom,null,null,function(){a.zoomOut()},h,c&&c.hover).attr({align:e.position.align,title:b.resetZoomTitle}).add().align(e.position,!1,d)},zoomOut:function(){var a=this;W(a,"selection",{resetSelection:!0},function(){a.zoom()})},zoom:function(a){var b,e=this.pointer,h=!1,c;!a||a.resetSelection?A(this.axes,function(a){b=a.zoom()}):A(a.xAxis.concat(a.yAxis),function(a){var c=a.axis,d=c.isXAxis;if(e[d?
"zoomX":"zoomY"]||e[d?"pinchX":"pinchY"])b=c.zoom(a.min,a.max),c.displayBtn&&(h=!0)});c=this.resetZoomButton;h&&!c?this.showResetZoom():!h&&f(c)&&(this.resetZoomButton=c.destroy());b&&this.redraw(r(this.options.chart.animation,a&&a.animation,100>this.pointCount))},pan:function(a,b){var e=this,h=e.hoverPoints,c;h&&A(h,function(a){a.setState()});A("xy"===b?[1,0]:[1],function(b){var h=a[b?"chartX":"chartY"],d=e[b?"xAxis":"yAxis"][0],f=e[b?"mouseDownX":"mouseDownY"],g=(d.pointRange||0)/2,k=d.getExtremes(),
l=d.toValue(f-h,!0)+g,f=d.toValue(f+e[b?"plotWidth":"plotHeight"]-h,!0)-g;d.series.length&&l>T(k.dataMin,k.min)&&f<E(k.dataMax,k.max)&&(d.setExtremes(l,f,!1,!1,{trigger:"pan"}),c=!0);e[b?"mouseDownX":"mouseDownY"]=h});c&&e.redraw(!1);H(e.container,{cursor:"move"})},setTitle:function(a,b){var e=this,h=e.options,d;d=h.title=c(h.title,a);h=h.subtitle=c(h.subtitle,b);A([["title",a,d],["subtitle",b,h]],function(a){var b=a[0],h=e[b],c=a[1];a=a[2];h&&c&&(e[b]=h=h.destroy());a&&a.text&&!h&&(e[b]=e.renderer.text(a.text,
0,0,a.useHTML).attr({align:a.align,"class":"highcharts-"+b,zIndex:a.zIndex||4}).css(a.style).add())});e.layOutTitles()},layOutTitles:function(){var a=0,b=this.title,e=this.subtitle,h=this.options,c=h.title,h=h.subtitle,d=this.spacingBox.width-44;!b||(b.css({width:(c.width||d)+"px"}).align(g({y:15},c),!1,"spacingBox"),c.floating||c.verticalAlign)||(a=b.getBBox().height,18<=a&&25>=a&&(a=15));e&&(e.css({width:(h.width||d)+"px"}).align(g({y:a+c.margin},h),!1,"spacingBox"),!h.floating&&!h.verticalAlign&&
(a=Qa(a+e.getBBox().height)));this.titleOffset=a},getChartSize:function(){var a=this.options.chart,b=this.renderToClone||this.renderTo;this.containerWidth=ib(b,"width");this.containerHeight=ib(b,"height");this.chartWidth=E(0,a.width||this.containerWidth||600);this.chartHeight=E(0,r(a.height,19<this.containerHeight?this.containerHeight:400))},cloneRenderTo:function(a){var b=this.renderToClone,e=this.container;a?b&&(this.renderTo.appendChild(e),S(b),delete this.renderToClone):(e&&e.parentNode===this.renderTo&&
this.renderTo.removeChild(e),this.renderToClone=b=this.renderTo.cloneNode(0),H(b,{position:"absolute",top:"-9999px",display:"block"}),F.body.appendChild(b),e&&b.appendChild(e))},getContainer:function(){var a,b=this.options.chart,e,h,c;this.renderTo=a=b.renderTo;c="highcharts-"+ob++;d(a)&&(this.renderTo=a=F.getElementById(a));a||fa(13,!0);e=k(w(a,"data-highcharts-chart"));!isNaN(e)&&Ra[e]&&Ra[e].destroy();w(a,"data-highcharts-chart",this.index);a.innerHTML="";a.offsetWidth||this.cloneRenderTo();this.getChartSize();
e=this.chartWidth;h=this.chartHeight;this.container=a=B(Pa,{className:"highcharts-container"+(b.className?" "+b.className:""),id:c},g({position:"relative",overflow:"hidden",width:e+"px",height:h+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},b.style),this.renderToClone||a);this._cursor=a.style.cursor;this.renderer=b.forExport?new Ka(a,e,h,!0):new Ya(a,e,h);Ba&&this.renderer.create(this,a,e,h)},getMargins:function(){var a=this.spacing,b,e=this.legend,
h=this.margin,c=this.options.legend,d=r(c.margin,10),f=c.x,g=c.y,k=c.align,l=c.verticalAlign,m=this.titleOffset;this.resetMargins();b=this.axisOffset;m&&!u(h[0])&&(this.plotTop=E(this.plotTop,m+this.options.title.margin+a[0]));e.display&&!c.floating&&("right"===k?u(h[1])||(this.marginRight=E(this.marginRight,e.legendWidth-f+d+a[1])):"left"===k?u(h[3])||(this.plotLeft=E(this.plotLeft,e.legendWidth+f+d+a[3])):"top"===l?u(h[0])||(this.plotTop=E(this.plotTop,e.legendHeight+g+d+a[0])):"bottom"!==l||u(h[2])||
(this.marginBottom=E(this.marginBottom,e.legendHeight-g+d+a[2])));this.extraBottomMargin&&(this.marginBottom+=this.extraBottomMargin);this.extraTopMargin&&(this.plotTop+=this.extraTopMargin);this.hasCartesianSeries&&A(this.axes,function(a){a.getOffset()});u(h[3])||(this.plotLeft+=b[3]);u(h[0])||(this.plotTop+=b[0]);u(h[2])||(this.marginBottom+=b[2]);u(h[1])||(this.marginRight+=b[1]);this.setChartSize()},reflow:function(a){var b=this,e=b.options.chart,h=b.renderTo,c=e.width||ib(h,"width"),d=e.height||
ib(h,"height"),e=a?a.target:Q,h=function(){b.container&&(b.setSize(c,d,!1),b.hasUserSize=null)};if(!b.hasUserSize&&c&&d&&(e===Q||e===F)){if(c!==b.containerWidth||d!==b.containerHeight)clearTimeout(b.reflowTimeout),a?b.reflowTimeout=setTimeout(h,100):h();b.containerWidth=c;b.containerHeight=d}},initReflow:function(){var a=this,b=function(b){a.reflow(b)};ha(Q,"resize",b);ha(a,"destroy",function(){va(Q,"resize",b)})},setSize:function(a,b,e){var h=this,c,d,f;h.isResizing+=1;f=function(){h&&W(h,"endResize",
null,function(){--h.isResizing})};ra(e,h);h.oldChartHeight=h.chartHeight;h.oldChartWidth=h.chartWidth;u(a)&&(h.chartWidth=c=E(0,C(a)),h.hasUserSize=!!c);u(b)&&(h.chartHeight=d=E(0,C(b)));(Ga?jb:H)(h.container,{width:c+"px",height:d+"px"},Ga);h.setChartSize(!0);h.renderer.setSize(c,d,e);h.maxTicks=null;A(h.axes,function(a){a.isDirty=!0;a.setScale()});A(h.series,function(a){a.isDirty=!0});h.isDirtyLegend=!0;h.isDirtyBox=!0;h.getMargins();h.redraw(e);h.oldChartHeight=null;W(h,"resize");!1===Ga?f():setTimeout(f,
Ga&&Ga.duration||500)},setChartSize:function(a){var b=this.inverted,e=this.renderer,h=this.chartWidth,c=this.chartHeight,d=this.options.chart,f=this.spacing,g=this.clipOffset,k,l,m,p;this.plotLeft=k=C(this.plotLeft);this.plotTop=l=C(this.plotTop);this.plotWidth=m=E(0,C(h-k-this.marginRight));this.plotHeight=p=E(0,C(c-l-this.marginBottom));this.plotSizeX=b?p:m;this.plotSizeY=b?m:p;this.plotBorderWidth=d.plotBorderWidth||0;this.spacingBox=e.spacingBox={x:f[3],y:f[0],width:h-f[3]-f[1],height:c-f[0]-
f[2]};this.plotBox=e.plotBox={x:k,y:l,width:m,height:p};h=2*ca(this.plotBorderWidth/2);b=Qa(E(h,g[3])/2);e=Qa(E(h,g[0])/2);this.clipBox={x:b,y:e,width:ca(this.plotSizeX-E(h,g[1])/2-b),height:ca(this.plotSizeY-E(h,g[2])/2-e)};a||A(this.axes,function(a){a.setAxisSize();a.setAxisTranslation()})},resetMargins:function(){var a=this.spacing,b=this.margin;this.plotTop=r(b[0],a[0]);this.marginRight=r(b[1],a[1]);this.marginBottom=r(b[2],a[2]);this.plotLeft=r(b[3],a[3]);this.axisOffset=[0,0,0,0];this.clipOffset=
[0,0,0,0]},drawChartBox:function(){var a=this.options.chart,b=this.renderer,e=this.chartWidth,h=this.chartHeight,c=this.chartBackground,d=this.plotBackground,f=this.plotBorder,g=this.plotBGImage,k=a.borderWidth||0,l=a.backgroundColor,m=a.plotBackgroundColor,p=a.plotBackgroundImage,r=a.plotBorderWidth||0,v,q=this.plotLeft,u=this.plotTop,t=this.plotWidth,D=this.plotHeight,w=this.plotBox,K=this.clipRect,I=this.clipBox;v=k+(a.shadow?8:0);if(k||l)c?c.animate(c.crisp(null,null,null,e-v,h-v)):(c={fill:l||
ma},k&&(c.stroke=a.borderColor,c["stroke-width"]=k),this.chartBackground=b.rect(v/2,v/2,e-v,h-v,a.borderRadius,k).attr(c).add().shadow(a.shadow));m&&(d?d.animate(w):this.plotBackground=b.rect(q,u,t,D,0).attr({fill:m}).add().shadow(a.plotShadow));p&&(g?g.animate(w):this.plotBGImage=b.image(p,q,u,t,D).add());K?K.animate({width:I.width,height:I.height}):this.clipRect=b.clipRect(I);r&&(f?f.animate(f.crisp(null,q,u,t,D)):this.plotBorder=b.rect(q,u,t,D,0,-r).attr({stroke:a.plotBorderColor,"stroke-width":r,
zIndex:1}).add());this.isDirtyBox=!1},propFromSeries:function(){var a=this,b=a.options.chart,e,h=a.options.series,c,d;A(["inverted","angular","polar"],function(f){e=ja[b.type||b.defaultSeriesType];d=a[f]||b[f]||e&&e.prototype[f];for(c=h&&h.length;!d&&c--;)(e=ja[h[c].type])&&e.prototype[f]&&(d=!0);a[f]=d})},linkSeries:function(){var a=this,b=a.series;A(b,function(a){a.linkedSeries.length=0});A(b,function(b){var h=b.options.linkedTo;d(h)&&(h=":previous"===h?a.series[b.index-1]:a.get(h))&&(h.linkedSeries.push(b),
b.linkedParent=h)})},render:function(){var a=this,b=a.axes,e=a.renderer,h=a.options,c=h.labels,d=h.credits,f;a.setTitle();a.legend=new tb(a,h.legend);a.getStacks();A(b,function(a){a.setScale()});a.getMargins();a.maxTicks=null;A(b,function(a){a.setTickPositions(!0);a.setMaxTicks()});a.adjustTickAmounts();a.getMargins();a.drawChartBox();a.hasCartesianSeries&&A(b,function(a){a.render()});a.seriesGroup||(a.seriesGroup=e.g("series-group").attr({zIndex:3}).add());A(a.series,function(a){a.translate();a.setTooltipPoints();
a.render()});c.items&&A(c.items,function(b){var h=g(c.style,b.style),d=k(h.left)+a.plotLeft,f=k(h.top)+a.plotTop+12;delete h.left;delete h.top;e.text(b.html,d,f).attr({zIndex:2}).css(h).add()});d.enabled&&!a.credits&&(f=d.href,a.credits=e.text(d.text,0,0).on("click",function(){f&&(location.href=f)}).attr({align:d.position.align,zIndex:8}).css(d.style).add().align(d.position));a.hasRendered=!0},destroy:function(){var a=this,b=a.axes,e=a.series,h=a.container,c,d=h&&h.parentNode;W(a,"destroy");Ra[a.index]=
G;a.renderTo.removeAttribute("data-highcharts-chart");va(a);for(c=b.length;c--;)b[c]=b[c].destroy();for(c=e.length;c--;)e[c]=e[c].destroy();A("title subtitle chartBackground plotBackground plotBGImage plotBorder seriesGroup clipRect credits pointer scroller rangeSelector legend resetZoomButton tooltip renderer".split(" "),function(b){var e=a[b];e&&e.destroy&&(a[b]=e.destroy())});h&&(h.innerHTML="",va(h),d&&S(h));for(c in a)delete a[c]},isReadyToRender:function(){var a=this;return!ta&&Q==Q.top&&"complete"!==
F.readyState||Ba&&!Q.canvg?(Ba?Cb.push(function(){a.firstRender()},a.options.global.canvasToolsURL):F.attachEvent("onreadystatechange",function(){F.detachEvent("onreadystatechange",a.firstRender);"complete"===F.readyState&&a.firstRender()}),!1):!0},firstRender:function(){var a=this,b=a.options,e=a.callback;a.isReadyToRender()&&(a.getContainer(),W(a,"init"),a.resetMargins(),a.setChartSize(),a.propFromSeries(),a.getAxes(),A(b.series||[],function(b){a.initSeries(b)}),a.linkSeries(),W(a,"beforeRender"),
a.pointer=new $a(a,b),a.render(),a.renderer.draw(),e&&e.apply(a,[a]),A(a.callbacks,function(b){b.apply(a,[a])}),a.cloneRenderTo(!0),W(a,"load"))},splashArray:function(a,b){var e=b[a],e=f(e)?e:[e,e,e,e];return[r(b[a+"Top"],e[0]),r(b[a+"Right"],e[1]),r(b[a+"Bottom"],e[2]),r(b[a+"Left"],e[3])]}};D.prototype.callbacks=[];var rb=Highcharts.CenteredSeriesMixin={getCenter:function(){var a=this.options,b=this.chart,e=2*(a.slicedOffset||0),h,c=b.plotWidth-2*e,d=b.plotHeight-2*e,b=a.center,a=[r(b[0],"50%"),
r(b[1],"50%"),a.size||"100%",a.innerSize||0],f=T(c,d),g;return Ua(a,function(a,b){g=/%$/.test(a);h=2>b||2===b&&g;return(g?[c,d,f,f][b]*k(a)/100:a)+(h?e:0)})}},Sa=function(){};Sa.prototype={init:function(a,b,e){this.series=a;this.applyOptions(b,e);this.pointAttr={};a.options.colorByPoint&&(b=a.options.colors||a.chart.options.colors,this.color=this.color||b[a.colorCounter++],a.colorCounter===b.length)&&(a.colorCounter=0);a.chart.pointCount++;return this},applyOptions:function(a,b){var e=this.series,
h=e.pointValKey;a=Sa.prototype.optionsToObject.call(this,a);g(this,a);this.options=this.options?g(this.options,a):a;h&&(this.y=this[h]);this.x===G&&e&&(this.x=b===G?e.autoIncrement():b);return this},optionsToObject:function(a){var b={},e=this.series,h=e.pointArrayMap||["y"],c=h.length,d=0,f=0;if("number"===typeof a||null===a)b[h[0]]=a;else if(l(a))for(a.length>c&&(e=typeof a[0],"string"===e?b.name=a[0]:"number"===e&&(b.x=a[0]),d++);f<c;)b[h[f++]]=a[d++];else"object"===typeof a&&(b=a,a.dataLabels&&
(e._hasPointLabels=!0),a.marker&&(e._hasPointMarkers=!0));return b},destroy:function(){var a=this.series.chart,b=a.hoverPoints,e;a.pointCount--;b&&(this.setState(),q(b,this),!b.length)&&(a.hoverPoints=null);if(this===a.hoverPoint)this.onMouseOut();if(this.graphic||this.dataLabel)va(this),this.destroyElements();this.legendItem&&a.legend.destroyItem(this);for(e in this)this[e]=null},destroyElements:function(){for(var a="graphic dataLabel dataLabelUpper group connector shadowGroup".split(" "),b,e=6;e--;)b=
a[e],this[b]&&(this[b]=this[b].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},select:function(a,b){var e=this,h=e.series,c=h.chart;a=r(a,!e.selected);e.firePointEvent(a?"select":"unselect",{accumulate:b},function(){e.selected=e.options.selected=a;h.options.data[Ia(e,h.data)]=e.options;e.setState(a&&"select");b||A(c.getSelectedPoints(),function(a){a.selected&&
a!==e&&(a.selected=a.options.selected=!1,h.options.data[Ia(a,h.data)]=a.options,a.setState(""),a.firePointEvent("unselect"))})})},onMouseOver:function(a){var b=this.series,e=b.chart,h=e.tooltip,c=e.hoverPoint;if(c&&c!==this)c.onMouseOut();this.firePointEvent("mouseOver");h&&(!h.shared||b.noSharedTooltip)&&h.refresh(this,a);this.setState("hover");e.hoverPoint=this},onMouseOut:function(){var a=this.series.chart,b=a.hoverPoints;b&&-1!==Ia(this,b)||(this.firePointEvent("mouseOut"),this.setState(),a.hoverPoint=
null)},tooltipFormatter:function(a){var b=this.series,e=b.tooltipOptions,h=r(e.valueDecimals,""),c=e.valuePrefix||"",d=e.valueSuffix||"";A(b.pointArrayMap||["y"],function(b){b="{point."+b;if(c||d)a=a.replace(b+"}",c+b+"}"+d);a=a.replace(b+"}",b+":,."+h+"f}")});return ba(a,{point:this,series:this.series})},firePointEvent:function(a,b,e){var h=this,c=this.series.options;(c.point.events[a]||h.options&&h.options.events&&h.options.events[a])&&this.importEvents();"click"===a&&c.allowPointSelect&&(e=function(a){h.select(null,
a.ctrlKey||a.metaKey||a.shiftKey)});W(this,a,b,e)},importEvents:function(){if(!this.hasImportedEvents){var a=c(this.series.options.point,this.options).events,b;this.events=a;for(b in a)ha(this,b,a[b]);this.hasImportedEvents=!0}},setState:function(a,b){var e=this.plotX,h=this.plotY,d=this.series,f=d.options.states,g=wa[d.type].marker&&d.options.marker,k=g&&!g.enabled,l=g&&g.states[a],m=l&&!1===l.enabled,p=d.stateMarkerGraphic,r=this.marker||{},v=d.chart,q=this.pointAttr;a=a||"";b=b&&p;if(!(a===this.state&&
!b||this.selected&&"select"!==a||f[a]&&!1===f[a].enabled||a&&(m||k&&!l.enabled)||a&&r.states&&r.states[a]&&!1===r.states[a].enabled)){if(this.graphic)f=g&&this.graphic.symbolName&&q[a].r,this.graphic.attr(c(q[a],f?{x:e-f,y:h-f,width:2*f,height:2*f}:{}));else{if(a&&l)if(f=l.radius,r=r.symbol||d.symbol,p&&p.currentSymbol!==r&&(p=p.destroy()),p)p[b?"animate":"attr"]({x:e-f,y:h-f});else d.stateMarkerGraphic=p=v.renderer.symbol(r,e-f,h-f,2*f,2*f).attr(q[a]).add(d.markerGroup),p.currentSymbol=r;if(p)p[a&&
v.isInsidePlot(e,h,v.inverted)?"show":"hide"]()}this.state=a}}};var ea=function(){};ea.prototype={isCartesian:!0,type:"line",pointClass:Sa,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(a,b){var e=this,h,c,d=a.series,f=function(a,b){return r(a.options.index,a._i)-r(b.options.index,b._i)};e.chart=a;e.options=b=e.setOptions(b);e.linkedSeries=[];
e.bindAxes();g(e,{name:b.name,state:"",pointAttr:{},visible:!1!==b.visible,selected:!0===b.selected});Ba&&(b.animation=!1);c=b.events;for(h in c)ha(e,h,c[h]);if(c&&c.click||b.point&&b.point.events&&b.point.events.click||b.allowPointSelect)a.runTrackerClick=!0;e.getColor();e.getSymbol();A(e.parallelArrays,function(a){e[a+"Data"]=[]});e.setData(b.data,!1);e.isCartesian&&(a.hasCartesianSeries=!0);d.push(e);e._i=d.length-1;Fa(d,f);this.yAxis&&Fa(this.yAxis.series,f);A(d,function(a,b){a.index=b;a.name=
a.name||"Series "+(b+1)})},bindAxes:function(){var a=this,b=a.options,e=a.chart,h;A(a.axisTypes||[],function(c){A(e[c],function(e){h=e.options;if(b[c]===h.index||b[c]!==G&&b[c]===h.id||b[c]===G&&0===h.index)e.series.push(a),a[c]=e,e.isDirty=!0});!a[c]&&a.optionalAxis!==c&&fa(18,!0)})},updateParallelArrays:function(a,b){var e=a.series,h=arguments;A(e.parallelArrays,"number"===typeof b?function(h){var c="y"===h&&e.toYData?e.toYData(a):a[h];e[h+"Data"][b]=c}:function(a){Array.prototype[b].apply(e[a+
"Data"],Array.prototype.slice.call(h,2))})},autoIncrement:function(){var a=this.options,b=this.xIncrement,b=r(b,a.pointStart,0);this.pointInterval=r(this.pointInterval,a.pointInterval,1);this.xIncrement=b+this.pointInterval;return b},getSegments:function(){var a=-1,b=[],e,h=this.points,c=h.length;if(c)if(this.options.connectNulls){for(e=c;e--;)null===h[e].y&&h.splice(e,1);h.length&&(b=[h])}else A(h,function(e,d){null===e.y?(d>a+1&&b.push(h.slice(a+1,d)),a=d):d===c-1&&b.push(h.slice(a+1,d+1))});this.segments=
b},setOptions:function(a){var b=this.chart,e=b.options.plotOptions,b=b.userOptions||{},h=b.plotOptions||{},d=e[this.type];this.userOptions=a;e=c(d,e.series,a);this.tooltipOptions=c(ia.tooltip,ia.plotOptions[this.type].tooltip,b.tooltip,h.series&&h.series.tooltip,h[this.type]&&h[this.type].tooltip,a.tooltip);null===d.marker&&delete e.marker;return e},getColor:function(){var a=this.options,b=this.userOptions,e=this.chart.options.colors,h=this.chart.counters,c;c=a.color||wa[this.type].color;c||a.colorByPoint||
(u(b._colorIndex)?a=b._colorIndex:(b._colorIndex=h.color,a=h.color++),c=e[a]);this.color=c;h.wrapColor(e.length)},getSymbol:function(){var a=this.userOptions,b=this.options.marker,e=this.chart,h=e.options.symbols,e=e.counters;this.symbol=b.symbol;this.symbol||(u(a._symbolIndex)?a=a._symbolIndex:(a._symbolIndex=e.symbol,a=e.symbol++),this.symbol=h[a]);/^url/.test(this.symbol)&&(b.radius=0);e.wrapSymbol(h.length)},drawLegendSymbol:pa.drawLineMarker,setData:function(a,b){var e=this,h=e.points,c=e.options,
f=e.chart,g=null,k=e.xAxis,m=k&&!!k.categories,v;e.xIncrement=null;e.pointRange=m?1:c.pointRange;e.colorCounter=0;a=a||[];var q=a.length;v=c.turboThreshold;var u=this.xData,t=this.yData,D=e.pointArrayMap,D=D&&D.length;A(this.parallelArrays,function(a){e[a+"Data"].length=0});if(v&&q>v){for(v=0;null===g&&v<q;)g=a[v],v++;if(p(g)){m=r(c.pointStart,0);c=r(c.pointInterval,1);for(v=0;v<q;v++)u[v]=m,t[v]=a[v],m+=c;e.xIncrement=m}else if(l(g))if(D)for(v=0;v<q;v++)c=a[v],u[v]=c[0],t[v]=c.slice(1,D+1);else for(v=
0;v<q;v++)c=a[v],u[v]=c[0],t[v]=c[1];else fa(12)}else for(v=0;v<q;v++)a[v]!==G&&(c={series:e},e.pointClass.prototype.applyOptions.apply(c,[a[v]]),e.updateParallelArrays(c,v),m&&c.name)&&(k.names[c.x]=c.name);d(t[0])&&fa(14,!0);e.data=[];e.options.data=a;for(v=h&&h.length||0;v--;)h[v]&&h[v].destroy&&h[v].destroy();k&&(k.minRange=k.userMinRange);e.isDirty=e.isDirtyData=f.isDirtyBox=!0;r(b,!0)&&f.redraw(!1)},processData:function(a){var b=this.xData,e=this.yData,h=b.length,c;c=0;var d,f,g=this.xAxis,
k=this.options,l=k.cropThreshold,m=this.isCartesian;if(m&&!this.isDirty&&!g.isDirty&&!this.yAxis.isDirty&&!a)return!1;if(m&&this.sorted&&(!l||h>l||this.forceCrop))if(a=g.min,g=g.max,b[h-1]<a||b[0]>g)b=[],e=[];else if(b[0]<a||b[h-1]>g)c=this.cropData(this.xData,this.yData,a,g),b=c.xData,e=c.yData,c=c.start,d=!0;for(g=b.length-1;0<=g;g--)h=b[g]-b[g-1],0<h&&(f===G||h<f)?f=h:0>h&&this.requireSorting&&fa(15);this.cropped=d;this.cropStart=c;this.processedXData=b;this.processedYData=e;null===k.pointRange&&
(this.pointRange=f||1);this.closestPointRange=f},cropData:function(a,b,e,h){var c=a.length,d=0,f=c,g=r(this.cropShoulder,1),k;for(k=0;k<c;k++)if(a[k]>=e){d=E(0,k-g);break}for(;k<c;k++)if(a[k]>h){f=k+g;break}return{xData:a.slice(d,f),yData:b.slice(d,f),start:d,end:f}},generatePoints:function(){var a=this.options.data,b=this.data,e,h=this.processedXData,c=this.processedYData,d=this.pointClass,f=h.length,g=this.cropStart||0,k,l=this.hasGroupedData,m,p=[],v;b||l||(b=[],b.length=a.length,b=this.data=b);
for(v=0;v<f;v++)k=g+v,l?p[v]=(new d).init(this,[h[v]].concat(x(c[v]))):(b[k]?m=b[k]:a[k]!==G&&(b[k]=m=(new d).init(this,a[k],h[v])),p[v]=m);if(b&&(f!==(e=b.length)||l))for(v=0;v<e;v++)if(v===g&&!l&&(v+=f),b[v])b[v].destroyElements(),b[v].plotX=G;this.data=b;this.points=p},setStackedPoints:function(){if(this.options.stacking&&(!0===this.visible||!1===this.chart.options.chart.ignoreHiddenSeries)){var a=this.processedXData,b=this.processedYData,e=[],h=b.length,c=this.options,d=c.threshold,f=c.stack,
c=c.stacking,g=this.stackKey,k="-"+g,l=this.negStacks,m=this.yAxis,v=m.stacks,p=m.oldStacks,r,q,u,t,D;for(u=0;u<h;u++)t=a[u],D=b[u],q=(r=l&&D<d)?k:g,v[q]||(v[q]={}),v[q][t]||(p[q]&&p[q][t]?(v[q][t]=p[q][t],v[q][t].total=null):v[q][t]=new da(m,m.options.stackLabels,r,t,f,c)),q=v[q][t],q.points[this.index]=[q.cum||0],"percent"===c?(r=r?g:k,l&&v[r]&&v[r][t]?(r=v[r][t],q.total=r.total=E(r.total,q.total)+aa(D)||0):q.total=O(q.total+(aa(D)||0))):q.total=O(q.total+(D||0)),q.cum=(q.cum||0)+(D||0),q.points[this.index].push(q.cum),
e[u]=q.cum;"percent"===c&&(m.usePercentage=!0);this.stackedYData=e;m.oldStacks={}}},setPercentStacks:function(){var a=this,b=a.stackKey,e=a.yAxis.stacks;A([b,"-"+b],function(b){for(var c,d=a.xData.length,f,g;d--;)if(f=a.xData[d],c=(g=e[b]&&e[b][f])&&g.points[a.index],f=c)g=g.total?100/g.total:0,f[0]=O(f[0]*g),f[1]=O(f[1]*g),a.stackedYData[d]=f[1]})},getExtremes:function(a){var b=this.yAxis,e=this.processedXData,c,d=[],f=0;c=this.xAxis.getExtremes();var g=c.min,k=c.max,l,m,v,p;a=a||this.stackedYData||
this.processedYData;c=a.length;for(p=0;p<c;p++)if(m=e[p],v=a[p],l=null!==v&&v!==G&&(!b.isLog||v.length||0<v),m=this.getExtremesFromAll||this.cropped||(e[p+1]||m)>=g&&(e[p-1]||m)<=k,l&&m)if(l=v.length)for(;l--;)null!==v[l]&&(d[f++]=v[l]);else d[f++]=v;this.dataMin=r(void 0,qa(d));this.dataMax=r(void 0,na(d))},translate:function(){this.processedXData||this.processData();this.generatePoints();for(var a=this.options,b=a.stacking,e=this.xAxis,c=e.categories,d=this.yAxis,f=this.points,g=f.length,k=!!this.modifyValue,
l=a.pointPlacement,m="between"===l||p(l),v=a.threshold,a=0;a<g;a++){var q=f[a],t=q.x,D=q.y,w=q.low,K=b&&d.stacks[(this.negStacks&&D<v?"-":"")+this.stackKey];d.isLog&&0>=D&&(q.y=D=null);q.plotX=e.translate(t,0,0,0,1,l,"flags"===this.type);b&&this.visible&&K&&K[t]&&(K=K[t],D=K.points[this.index],w=D[0],D=D[1],0===w&&(w=r(v,d.min)),d.isLog&&0>=w&&(w=null),q.total=q.stackTotal=K.total,q.percentage="percent"===b&&q.y/K.total*100,q.stackY=D,K.setOffset(this.pointXOffset||0,this.barW||0));q.yBottom=u(w)?
d.translate(w,0,1,0,1):null;k&&(D=this.modifyValue(D,q));q.plotY="number"===typeof D&&Infinity!==D?d.translate(D,0,1,0,1):G;q.clientX=m?e.translate(t,0,0,0,1):q.plotX;q.negative=q.y<(v||0);q.category=c&&c[q.x]!==G?c[q.x]:q.x}this.getSegments()},setTooltipPoints:function(a){var b=[],e,c,d=this.xAxis,f=d&&d.getExtremes(),g=d?d.tooltipLen||d.len:this.chart.plotSizeX,k,l,m=[];if(!1!==this.options.enableMouseTracking){a&&(this.tooltipPoints=null);A(this.segments||this.points,function(a){b=b.concat(a)});
d&&d.reversed&&(b=b.reverse());this.orderTooltipPoints&&this.orderTooltipPoints(b);a=b.length;for(l=0;l<a;l++)if(d=b[l],e=d.x,e>=f.min&&e<=f.max)for(k=b[l+1],e=c===G?0:c+1,c=b[l+1]?T(E(0,ca((d.clientX+(k?k.wrappedClientX||k.clientX:g))/2)),g):g;0<=e&&e<=c;)m[e++]=d;this.tooltipPoints=m}},tooltipHeaderFormatter:function(a){var b=this.tooltipOptions,e=b.dateTimeLabelFormats,c=b.xDateFormat,d=this.xAxis,f=d&&"datetime"===d.options.type,b=b.headerFormat,d=d&&d.closestPointRange,g;if(f&&!c){if(d)for(g in X){if(X[g]>=
d){c=e[g];break}}else c=e.day;c=c||e.year}f&&c&&p(a.key)&&(b=b.replace("{point.key}","{point.key:"+c+"}"));return ba(b,{point:a,series:this})},onMouseOver:function(){var a=this.chart,b=a.hoverSeries;if(b&&b!==this)b.onMouseOut();this.options.events.mouseOver&&W(this,"mouseOver");this.setState("hover");a.hoverSeries=this},onMouseOut:function(){var a=this.options,b=this.chart,e=b.tooltip,c=b.hoverPoint;if(c)c.onMouseOut();this&&a.events.mouseOut&&W(this,"mouseOut");!e||a.stickyTracking||e.shared&&!this.noSharedTooltip||
e.hide();this.setState();b.hoverSeries=null},animate:function(a){var b=this,e=b.chart,c=e.renderer,d;d=b.options.animation;var k=e.clipBox,l=e.inverted,m;d&&!f(d)&&(d=wa[b.type].animation);m="_sharedClip"+d.duration+d.easing;if(a)a=e[m],d=e[m+"m"],a||(e[m]=a=c.clipRect(g(k,{width:0})),e[m+"m"]=d=c.clipRect(-99,l?-e.plotLeft:-e.plotTop,99,l?e.chartWidth:e.chartHeight)),b.group.clip(a),b.markerGroup.clip(d),b.sharedClipKey=m;else{if(a=e[m])a.animate({width:e.plotSizeX},d),e[m+"m"].animate({width:e.plotSizeX+
99},d);b.animate=null;b.animationTimeout=setTimeout(function(){b.afterAnimate()},d.duration)}},afterAnimate:function(){var a=this.chart,b=this.sharedClipKey,e=this.group;e&&!1!==this.options.clip&&(e.clip(a.clipRect),this.markerGroup.clip());setTimeout(function(){b&&a[b]&&(a[b]=a[b].destroy(),a[b+"m"]=a[b+"m"].destroy())},100)},drawPoints:function(){var a,b=this.points,e=this.chart,c,d,f,k,l,m,v,p,q=this.options.marker,t,D=this.markerGroup;if(q.enabled||this._hasPointMarkers)for(f=b.length;f--;)(k=
b[f],c=ca(k.plotX),d=k.plotY,p=k.graphic,m=k.marker||{},a=q.enabled&&m.enabled===G||m.enabled,t=e.isInsidePlot(C(c),d,e.inverted),a&&d!==G&&!isNaN(d)&&null!==k.y)?(a=k.pointAttr[k.selected?"select":""],l=a.r,m=r(m.symbol,this.symbol),v=0===m.indexOf("url"),p)?p.attr({visibility:t?ta?"inherit":"visible":"hidden"}).animate(g({x:c-l,y:d-l},p.symbolName?{width:2*l,height:2*l}:{})):t&&(0<l||v)&&(k.graphic=e.renderer.symbol(m,c-l,d-l,2*l,2*l).attr(a).add(D)):p&&(k.graphic=p.destroy())},convertAttribs:function(a,
b,e,c){var d=this.pointAttrToOptions,f,g,k={};a=a||{};b=b||{};e=e||{};c=c||{};for(f in d)g=d[f],k[f]=r(a[g],b[f],e[f],c[f]);return k},getAttribs:function(){var a=this,b=a.options,e=wa[a.type].marker?b.marker:b,c=e.states,d=c.hover,f,k=a.color,l={stroke:k,fill:k},m=a.points||[],v=[],p,q=a.pointAttrToOptions,r=b.negativeColor,t=e.lineColor,D=e.fillColor,K;b.marker?(d.radius=d.radius||e.radius+2,d.lineWidth=d.lineWidth||e.lineWidth+1):d.color=d.color||Ja(d.color||k).brighten(d.brightness).get();v[""]=
a.convertAttribs(e,l);A(["hover","select"],function(b){v[b]=a.convertAttribs(c[b],v[""])});a.pointAttr=v;for(k=m.length;k--;){l=m[k];(e=l.options&&l.options.marker||l.options)&&!1===e.enabled&&(e.radius=0);l.negative&&r&&(l.color=l.fillColor=r);p=b.colorByPoint||l.color;if(l.options)for(K in q)u(e[q[K]])&&(p=!0);p?(e=e||{},p=[],c=e.states||{},f=c.hover=c.hover||{},b.marker||(f.color=Ja(f.color||l.color).brighten(f.brightness||d.brightness).get()),f={color:l.color},D||(f.fillColor=l.color),t||(f.lineColor=
l.color),p[""]=a.convertAttribs(g(f,e),v[""]),p.hover=a.convertAttribs(c.hover,v.hover,p[""]),p.select=a.convertAttribs(c.select,v.select,p[""])):p=v;l.pointAttr=p}},destroy:function(){var a=this,b=a.chart,e=/AppleWebKit\/533/.test(Ha),c,d,f=a.data||[],g,k,l;W(a,"destroy");va(a);A(a.axisTypes||[],function(b){if(l=a[b])q(l.series,a),l.isDirty=l.forceRedraw=!0});a.legendItem&&a.chart.legend.destroyItem(a);for(d=f.length;d--;)(g=f[d])&&g.destroy&&g.destroy();a.points=null;clearTimeout(a.animationTimeout);
A("area graph dataLabelsGroup group markerGroup tracker graphNeg areaNeg posClip negClip".split(" "),function(b){a[b]&&(c=e&&"group"===b?"hide":"destroy",a[b][c]())});b.hoverSeries===a&&(b.hoverSeries=null);q(b.series,a);for(k in a)delete a[k]},getSegmentPath:function(a){var b=this,e=[],c=b.options.step;A(a,function(d,f){var g=d.plotX,k=d.plotY,l;b.getPointSpline?e.push.apply(e,b.getPointSpline(a,d,f)):(e.push(f?"L":"M"),c&&f&&(l=a[f-1],"right"===c?e.push(l.plotX,k):"center"===c?e.push((l.plotX+g)/
2,l.plotY,(l.plotX+g)/2,k):e.push(g,l.plotY)),e.push(d.plotX,d.plotY))});return e},getGraphPath:function(){var a=this,b=[],e,c=[];A(a.segments,function(d){e=a.getSegmentPath(d);1<d.length?b=b.concat(e):c.push(d[0])});a.singlePoints=c;return a.graphPath=b},drawGraph:function(){var a=this,b=this.options,e=[["graph",b.lineColor||this.color]],c=b.lineWidth,d=b.dashStyle,f="square"!==b.linecap,g=this.getGraphPath(),k=b.negativeColor;k&&e.push(["graphNeg",k]);A(e,function(e,k){var l=e[0],m=a[l];m?(Za(m),
m.animate({d:g})):c&&g.length&&(m={stroke:e[1],"stroke-width":c,zIndex:1},d?m.dashstyle=d:f&&(m["stroke-linecap"]=m["stroke-linejoin"]="round"),a[l]=a.chart.renderer.path(g).attr(m).add(a.group).shadow(!k&&b.shadow))})},clipNeg:function(){var a=this.options,b=this.chart,e=b.renderer,c=a.negativeColor||a.negativeFillColor,d,f=this.graph,g=this.area,k=this.posClip,l=this.negClip;d=b.chartWidth;var m=b.chartHeight,v=E(d,m),p=this.yAxis;c&&(f||g)&&(c=C(p.toPixels(a.threshold||0,!0)),0>c&&(v-=c),a={x:0,
y:0,width:v,height:c},v={x:0,y:c,width:v,height:v},b.inverted&&(a.height=v.y=b.plotWidth-c,e.isVML&&(a={x:b.plotWidth-c-b.plotLeft,y:0,width:d,height:m},v={x:c+b.plotLeft-d,y:0,width:b.plotLeft+c,height:d})),p.reversed?(b=v,d=a):(b=a,d=v),k?(k.animate(b),l.animate(d)):(this.posClip=k=e.clipRect(b),this.negClip=l=e.clipRect(d),f&&this.graphNeg&&(f.clip(k),this.graphNeg.clip(l)),g&&(g.clip(k),this.areaNeg.clip(l))))},invertGroups:function(){function a(){var a={width:b.yAxis.len,height:b.xAxis.len};
A(["group","markerGroup"],function(e){b[e]&&b[e].attr(a).invert()})}var b=this,e=b.chart;b.xAxis&&(ha(e,"resize",a),ha(b,"destroy",function(){va(e,"resize",a)}),a(),b.invertGroups=a)},plotGroup:function(a,b,e,c,d){var f=this[a],g=!f;g&&(this[a]=f=this.chart.renderer.g(b).attr({visibility:e,zIndex:c||.1}).add(d));f[g?"attr":"animate"](this.getPlotBox());return f},getPlotBox:function(){return{translateX:this.xAxis?this.xAxis.left:this.chart.plotLeft,translateY:this.yAxis?this.yAxis.top:this.chart.plotTop,
scaleX:1,scaleY:1}},render:function(){var a=this.chart,b,e=this.options,c=e.animation&&!!this.animate&&a.renderer.isSVG,d=this.visible?"visible":"hidden",f=e.zIndex,g=this.hasRendered,k=a.seriesGroup;b=this.plotGroup("group","series",d,f,k);this.markerGroup=this.plotGroup("markerGroup","markers",d,f,k);c&&this.animate(!0);this.getAttribs();b.inverted=this.isCartesian?a.inverted:!1;this.drawGraph&&(this.drawGraph(),this.clipNeg());this.drawDataLabels&&this.drawDataLabels();this.visible&&this.drawPoints();
!1!==this.options.enableMouseTracking&&this.drawTracker();a.inverted&&this.invertGroups();!1===e.clip||this.sharedClipKey||g||b.clip(a.clipRect);c?this.animate():g||this.afterAnimate();this.isDirty=this.isDirtyData=!1;this.hasRendered=!0},redraw:function(){var a=this.chart,b=this.isDirtyData,e=this.group,c=this.xAxis,d=this.yAxis;e&&(a.inverted&&e.attr({width:a.plotWidth,height:a.plotHeight}),e.animate({translateX:r(c&&c.left,a.plotLeft),translateY:r(d&&d.top,a.plotTop)}));this.translate();this.setTooltipPoints(!0);
this.render();b&&W(this,"updatedData")},setState:function(a){var b=this.options,e=this.graph,c=this.graphNeg,d=b.states,b=b.lineWidth;a=a||"";this.state!==a&&(this.state=a,d[a]&&!1===d[a].enabled||(a&&(b=d[a].lineWidth||b+1),e&&!e.dashstyle&&(a={"stroke-width":b},e.attr(a),c&&c.attr(a))))},setVisible:function(a,b){var e=this,c=e.chart,d=e.legendItem,f,g=c.options.chart.ignoreHiddenSeries,k=e.visible;f=(e.visible=a=e.userOptions.visible=a===G?!k:a)?"show":"hide";A(["group","dataLabelsGroup","markerGroup",
"tracker"],function(a){if(e[a])e[a][f]()});if(c.hoverSeries===e)e.onMouseOut();d&&c.legend.colorizeItem(e,a);e.isDirty=!0;e.options.stacking&&A(c.series,function(a){a.options.stacking&&a.visible&&(a.isDirty=!0)});A(e.linkedSeries,function(b){b.setVisible(a,!1)});g&&(c.isDirtyBox=!0);!1!==b&&c.redraw();W(e,f)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(a){this.selected=a=a===G?!this.selected:a;this.checkbox&&(this.checkbox.checked=a);W(this,a?"select":
"unselect")},drawTracker:ga.drawTrackerGraph};g(D.prototype,{addSeries:function(a,b,e){var c,d=this;a&&(b=r(b,!0),W(d,"addSeries",{options:a},function(){c=d.initSeries(a);d.isDirtyLegend=!0;d.linkSeries();b&&d.redraw(e)}));return c},addAxis:function(a,b,e,d){var f=b?"xAxis":"yAxis",g=this.options;new M(this,c(a,{index:this[f].length,isX:b}));g[f]=x(g[f]||{});g[f].push(a);r(e,!0)&&this.redraw(d)},showLoading:function(a){var b=this.options,e=this.loadingDiv,c=b.loading;e||(this.loadingDiv=e=B(Pa,{className:"highcharts-loading"},
g(c.style,{zIndex:10,display:ma}),this.container),this.loadingSpan=B("span",null,c.labelStyle,e));this.loadingSpan.innerHTML=a||b.lang.loading;this.loadingShown||(H(e,{opacity:0,display:"",left:this.plotLeft+"px",top:this.plotTop+"px",width:this.plotWidth+"px",height:this.plotHeight+"px"}),jb(e,{opacity:c.style.opacity},{duration:c.showDuration||0}),this.loadingShown=!0)},hideLoading:function(){var a=this.options,b=this.loadingDiv;b&&jb(b,{opacity:0},{duration:a.loading.hideDuration||100,complete:function(){H(b,
{display:ma})}});this.loadingShown=!1}});g(Sa.prototype,{update:function(a,b,e){var c=this,d=c.series,g=c.graphic,k,l=d.data,m=d.chart,v=d.options;b=r(b,!0);c.firePointEvent("update",{options:a},function(){c.applyOptions(a);f(a)&&(d.getAttribs(),g&&(a&&a.marker&&a.marker.symbol?c.graphic=g.destroy():g.attr(c.pointAttr[c.state||""])),a&&a.dataLabels&&c.dataLabel&&(c.dataLabel=c.dataLabel.destroy()));k=Ia(c,l);d.updateParallelArrays(c,k);v.data[k]=c.options;d.isDirty=d.isDirtyData=!0;!d.fixedBox&&d.hasCartesianSeries&&
(m.isDirtyBox=!0);"point"===v.legendType&&m.legend.destroyItem(c);b&&m.redraw(e)})},remove:function(a,b){var e=this,c=e.series,d=c.points,f=c.chart,g,k=c.data;ra(b,f);a=r(a,!0);e.firePointEvent("remove",null,function(){g=Ia(e,k);k.length===d.length&&d.splice(g,1);k.splice(g,1);c.options.data.splice(g,1);c.updateParallelArrays(e,"splice",g,1);e.destroy();c.isDirty=!0;c.isDirtyData=!0;a&&f.redraw()})}});g(ea.prototype,{addPoint:function(a,b,e,c){var d=this.options,f=this.data,g=this.graph,k=this.area,
l=this.chart,m=this.xAxis&&this.xAxis.names,v=g&&g.shift||0,p=d.data,q,t=this.xData;ra(c,l);e&&A([g,k,this.graphNeg,this.areaNeg],function(a){a&&(a.shift=v+1)});k&&(k.isArea=!0);b=r(b,!0);c={series:this};this.pointClass.prototype.applyOptions.apply(c,[a]);g=c.x;k=t.length;if(this.requireSorting&&g<t[k-1])for(q=!0;k&&t[k-1]>g;)k--;this.updateParallelArrays(c,"splice",k,0,0);this.updateParallelArrays(c,k);m&&(m[g]=c.name);p.splice(k,0,a);q&&(this.data.splice(k,0,null),this.processData());"point"===
d.legendType&&this.generatePoints();e&&(f[0]&&f[0].remove?f[0].remove(!1):(f.shift(),this.updateParallelArrays(c,"shift"),p.shift()));this.isDirtyData=this.isDirty=!0;b&&(this.getAttribs(),l.redraw())},remove:function(a,b){var e=this,c=e.chart;a=r(a,!0);e.isRemoving||(e.isRemoving=!0,W(e,"remove",null,function(){e.destroy();c.isDirtyLegend=c.isDirtyBox=!0;c.linkSeries();a&&c.redraw(b)}));e.isRemoving=!1},update:function(a,b){var e=this.chart,d=this.type,f=ja[d].prototype,k;a=c(this.userOptions,{animation:!1,
index:this.index,pointStart:this.xData[0]},{data:this.options.data},a);this.remove(!1);for(k in f)f.hasOwnProperty(k)&&(this[k]=G);g(this,ja[a.type||d].prototype);this.init(e,a);r(b,!0)&&e.redraw(!1)}});g(M.prototype,{update:function(a,b){var e=this.chart;a=e.options[this.coll][this.options.index]=c(this.userOptions,a);this.destroy(!0);this._addedPlotLB=this.userMin=this.userMax=G;this.init(e,g(a,{events:G}));e.isDirtyBox=!0;r(b,!0)&&e.redraw()},remove:function(a){var b=this.chart,e=this.coll;A(this.series,
function(a){a.remove(!1)});q(b.axes,this);q(b[e],this);b.options[e].splice(this.options.index,1);A(b[e],function(a,b){a.options.index=b});this.destroy();b.isDirtyBox=!0;r(a,!0)&&b.redraw()},setTitle:function(a,b){this.update({title:a},b)},setCategories:function(a,b){this.update({categories:a},b)}});var za=P(ea);ja.line=za;wa.area=c(ua,{threshold:0});var Va=P(ea,{type:"area",getSegments:function(){var a=[],b=[],e=[],c=this.xAxis,d=this.yAxis,f=d.stacks[this.stackKey],g={},k,l,m=this.points,v=this.options.connectNulls,
p,q,r;if(this.options.stacking&&!this.cropped){for(q=0;q<m.length;q++)g[m[q].x]=m[q];for(r in f)null!==f[r].total&&e.push(+r);e.sort(function(a,b){return a-b});A(e,function(a){if(!v||g[a]&&null!==g[a].y)g[a]?b.push(g[a]):(k=c.translate(a),p=f[a].percent?f[a].total?100*f[a].cum/f[a].total:0:f[a].cum,l=d.toPixels(p,!0),b.push({y:null,plotX:k,clientX:k,plotY:l,yBottom:l,onMouseOver:Da}))});b.length&&a.push(b)}else ea.prototype.getSegments.call(this),a=this.segments;this.segments=a},getSegmentPath:function(a){var b=
ea.prototype.getSegmentPath.call(this,a),e=[].concat(b),c,d=this.options;c=b.length;var f=this.yAxis.getThreshold(d.threshold),g;3===c&&e.push("L",b[1],b[2]);if(d.stacking&&!this.closedStacks)for(c=a.length-1;0<=c;c--)g=r(a[c].yBottom,f),c<a.length-1&&d.step&&e.push(a[c+1].plotX,g),e.push(a[c].plotX,g);else this.closeSegment(e,a,f);this.areaPath=this.areaPath.concat(e);return b},closeSegment:function(a,b,e){a.push("L",b[b.length-1].plotX,e,"L",b[0].plotX,e)},drawGraph:function(){this.areaPath=[];
ea.prototype.drawGraph.apply(this);var a=this,b=this.areaPath,e=this.options,c=e.negativeColor,d=e.negativeFillColor,f=[["area",this.color,e.fillColor]];(c||d)&&f.push(["areaNeg",c,d]);A(f,function(c){var d=c[0],h=a[d];h?h.animate({d:b}):a[d]=a.chart.renderer.path(b).attr({fill:r(c[2],Ja(c[1]).setOpacity(r(e.fillOpacity,.75)).get()),zIndex:0}).add(a.group)})},drawLegendSymbol:pa.drawRectangle});ja.area=Va;wa.spline=c(ua);za=P(ea,{type:"spline",getPointSpline:function(a,b,e){var c=b.plotX,d=b.plotY,
f=a[e-1],g=a[e+1],k,l,m,v;if(f&&g){a=f.plotY;m=g.plotX;var g=g.plotY,p;k=(1.5*c+f.plotX)/2.5;l=(1.5*d+a)/2.5;m=(1.5*c+m)/2.5;v=(1.5*d+g)/2.5;p=(v-l)*(m-c)/(m-k)+d-v;l+=p;v+=p;l>a&&l>d?(l=E(a,d),v=2*d-l):l<a&&l<d&&(l=T(a,d),v=2*d-l);v>g&&v>d?(v=E(g,d),l=2*d-v):v<g&&v<d&&(v=T(g,d),l=2*d-v);b.rightContX=m;b.rightContY=v}e?(b=["C",f.rightContX||f.plotX,f.rightContY||f.plotY,k||c,l||d,c,d],f.rightContX=f.rightContY=null):b=["M",c,d];return b}});ja.spline=za;wa.areaspline=c(wa.area);Va=Va.prototype;za=
P(za,{type:"areaspline",closedStacks:!0,getSegmentPath:Va.getSegmentPath,closeSegment:Va.closeSegment,drawGraph:Va.drawGraph,drawLegendSymbol:pa.drawRectangle});ja.areaspline=za;wa.column=c(ua,{borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},stickyTracking:!1,
threshold:0});za=P(ea,{type:"column",pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",r:"borderRadius"},cropShoulder:0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){ea.prototype.init.apply(this,arguments);var a=this,b=a.chart;b.hasRendered&&A(b.series,function(b){b.type===a.type&&(b.isDirty=!0)})},getColumnMetrics:function(){var a=this,b=a.options,e=a.xAxis,c=a.yAxis,d=e.reversed,f,g={},k,l=0;!1===b.grouping?l=1:A(a.chart.series,function(b){var e=
b.options,d=b.yAxis;b.type===a.type&&b.visible&&c.len===d.len&&c.pos===d.pos&&(e.stacking?(f=b.stackKey,g[f]===G&&(g[f]=l++),k=g[f]):!1!==e.grouping&&(k=l++),b.columnIndex=k)});var e=T(aa(e.transA)*(e.ordinalSlope||b.pointRange||e.closestPointRange||1),e.len),m=e*b.groupPadding,v=(e-2*m)/l,p=b.pointWidth,b=u(p)?(v-p)/2:v*b.pointPadding,p=r(p,v-2*b);return a.columnMetrics={width:p,offset:b+(m+((d?l-(a.columnIndex||0):a.columnIndex)||0)*v-e/2)*(d?-1:1)}},translate:function(){var a=this.chart,b=this.options,
e=b.borderWidth,c=this.yAxis,d=this.translatedThreshold=c.getThreshold(b.threshold),f=r(b.minPointLength,5),b=this.getColumnMetrics(),g=b.width,k=this.barW=Qa(E(g,1+2*e)),l=this.pointXOffset=b.offset,m=-(e%2?.5:0),v=e%2?.5:1;a.renderer.isVML&&a.inverted&&(v+=1);ea.prototype.translate.apply(this);A(this.points,function(a){var b=r(a.yBottom,d),e=T(E(-999-b,a.plotY),c.len+999+b),p=a.plotX+l,q=k,t=T(e,b),D,e=E(e,b)-t;aa(e)<f&&f&&(e=f,t=C(aa(t-d)>f?b-f:d-(c.translate(a.y,0,1,0,1)<=d?f:0)));a.barX=p;a.pointWidth=
g;b=.5>aa(p);q=C(p+q)+m;p=C(p)+m;q-=p;D=.5>aa(t);e=C(t+e)+v;t=C(t)+v;e-=t;b&&(p+=1,--q);D&&(--t,e+=1);a.shapeType="rect";a.shapeArgs={x:p,y:t,width:q,height:e}})},getSymbol:Da,drawLegendSymbol:pa.drawRectangle,drawGraph:Da,drawPoints:function(){var a=this,b=this.chart,e=a.options,d=b.renderer,f=b.options.animationLimit||250,g;A(a.points,function(k){var l=k.plotY,m=k.graphic;l===G||isNaN(l)||null===k.y?m&&(k.graphic=m.destroy()):(g=k.shapeArgs,m?(Za(m),m[b.pointCount<f?"animate":"attr"](c(g))):k.graphic=
d[k.shapeType](g).attr(k.pointAttr[k.selected?"select":""]).add(a.group).shadow(e.shadow,null,e.stacking&&!e.borderRadius))})},drawTracker:ga.drawTrackerPoint,animate:function(a){var b=this.yAxis,e=this.options,c=this.chart.inverted,d={};ta&&(a?(d.scaleY=.001,a=T(b.pos+b.len,E(b.pos,b.toPixels(e.threshold))),c?d.translateX=a-b.len:d.translateY=a,this.group.attr(d)):(d.scaleY=1,d[c?"translateX":"translateY"]=b.pos,this.group.animate(d,this.options.animation),this.animate=null))},remove:function(){var a=
this,b=a.chart;b.hasRendered&&A(b.series,function(b){b.type===a.type&&(b.isDirty=!0)});ea.prototype.remove.apply(a,arguments)}});ja.column=za;wa.bar=c(wa.column);za=P(za,{type:"bar",inverted:!0});ja.bar=za;wa.scatter=c(ua,{lineWidth:0,tooltip:{headerFormat:'<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>",followPointer:!0},stickyTracking:!1});za=P(ea,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,
trackerGroups:["markerGroup"],takeOrdinalPosition:!1,drawTracker:ga.drawTrackerPoint,drawGraph:function(){this.options.lineWidth&&ea.prototype.drawGraph.call(this)},setTooltipPoints:Da});ja.scatter=za;wa.pie=c(ua,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},
stickyTracking:!1,tooltip:{followPointer:!0}});ua={type:"pie",isCartesian:!1,pointClass:P(Sa,{init:function(){Sa.prototype.init.apply(this,arguments);var a=this,b;0>a.y&&(a.y=null);g(a,{visible:!1!==a.visible,name:r(a.name,"Slice")});b=function(b){a.slice("select"===b.type)};ha(a,"select",b);ha(a,"unselect",b);return a},setVisible:function(a){var b=this,e=b.series,c=e.chart,d;b.visible=b.options.visible=a=a===G?!b.visible:a;e.options.data[Ia(b,e.data)]=b.options;d=a?"show":"hide";A(["graphic","dataLabel",
"connector","shadowGroup"],function(a){if(b[a])b[a][d]()});b.legendItem&&c.legend.colorizeItem(b,a);!e.isDirty&&e.options.ignoreHiddenPoint&&(e.isDirty=!0,c.redraw())},slice:function(a,b,e){var c=this.series;ra(e,c.chart);r(b,!0);this.sliced=this.options.sliced=a=u(a)?a:!this.sliced;c.options.data[Ia(this,c.data)]=this.options;a=a?this.slicedTranslation:{translateX:0,translateY:0};this.graphic.animate(a);this.shadowGroup&&this.shadowGroup.animate(a)}}),requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group",
"dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},getColor:Da,animate:function(a){var b=this,e=b.points,c=b.startAngleRad;a||(A(e,function(a){var e=a.graphic;a=a.shapeArgs;e&&(e.attr({r:b.center[3]/2,start:c,end:c}),e.animate({r:a.r,start:a.start,end:a.end},b.options.animation))}),b.animate=null)},setData:function(a,b){ea.prototype.setData.call(this,a,!1);this.processData();this.generatePoints();r(b,!0)&&this.chart.redraw()},generatePoints:function(){var a,
b=0,e,c,d,f=this.options.ignoreHiddenPoint;ea.prototype.generatePoints.call(this);e=this.points;c=e.length;for(a=0;a<c;a++)d=e[a],b+=f&&!d.visible?0:d.y;this.total=b;for(a=0;a<c;a++)d=e[a],d.percentage=0<b?d.y/b*100:0,d.total=b},translate:function(a){this.generatePoints();var b=0,e=this.options,c=e.slicedOffset,d=c+e.borderWidth,f,g,k,l=e.startAngle||0,m=this.startAngleRad=Ma/180*(l-90),l=(this.endAngleRad=Ma/180*((e.endAngle||l+360)-90))-m,v=this.points,p=e.dataLabels.distance,e=e.ignoreHiddenPoint,
q,r=v.length,t;a||(this.center=a=this.getCenter());this.getX=function(b,e){k=J.asin((b-a[1])/(a[2]/2+p));return a[0]+(e?-1:1)*sa(k)*(a[2]/2+p)};for(q=0;q<r;q++){t=v[q];f=m+b*l;if(!e||t.visible)b+=t.percentage/100;g=m+b*l;t.shapeType="arc";t.shapeArgs={x:a[0],y:a[1],r:a[2]/2,innerR:a[3]/2,start:C(1E3*f)/1E3,end:C(1E3*g)/1E3};k=(g+f)/2;k>.75*l&&(k-=2*Ma);t.slicedTranslation={translateX:C(sa(k)*c),translateY:C(ya(k)*c)};f=sa(k)*a[2]/2;g=ya(k)*a[2]/2;t.tooltipPos=[a[0]+.7*f,a[1]+.7*g];t.half=k<-Ma/2||
k>Ma/2?1:0;t.angle=k;d=T(d,p/2);t.labelPos=[a[0]+f+sa(k)*p,a[1]+g+ya(k)*p,a[0]+f+sa(k)*d,a[1]+g+ya(k)*d,a[0]+f,a[1]+g,0>p?"center":t.half?"right":"left",k]}},setTooltipPoints:Da,drawGraph:null,drawPoints:function(){var a=this,b=a.chart.renderer,e,c,d=a.options.shadow,f,k;d&&!a.shadowGroup&&(a.shadowGroup=b.g("shadow").add(a.group));A(a.points,function(l){c=l.graphic;k=l.shapeArgs;f=l.shadowGroup;d&&!f&&(f=l.shadowGroup=b.g("shadow").add(a.shadowGroup));e=l.sliced?l.slicedTranslation:{translateX:0,
translateY:0};f&&f.attr(e);c?c.animate(g(k,e)):l.graphic=c=b.arc(k).setRadialReference(a.center).attr(l.pointAttr[l.selected?"select":""]).attr({"stroke-linejoin":"round"}).attr(e).add(a.group).shadow(d,f);void 0!==l.visible&&l.setVisible(l.visible)})},sortByAngle:function(a,b){a.sort(function(a,c){return void 0!==a.angle&&(c.angle-a.angle)*b})},drawTracker:ga.drawTrackerPoint,drawLegendSymbol:pa.drawRectangle,getCenter:rb.getCenter,getSymbol:Da};ua=P(ea,ua);ja.pie=ua;ea.prototype.drawDataLabels=
function(){var a=this,b=a.options,e=b.cursor,d=b.dataLabels,b=a.points,f,k,l,m;if(d.enabled||a._hasPointLabels)a.dlProcessOptions&&a.dlProcessOptions(d),m=a.plotGroup("dataLabelsGroup","data-labels",a.visible?"visible":"hidden",d.zIndex||6),k=d,A(b,function(b){var v,p=b.dataLabel,q,t,D=b.connector,K=!0;f=b.options&&b.options.dataLabels;v=r(f&&f.enabled,k.enabled);if(p&&!v)b.dataLabel=p.destroy();else if(v){d=c(k,f);v=d.rotation;q=b.getLabelConfig();l=d.format?ba(d.format,q):d.formatter.call(q,d);
d.style.color=r(d.color,d.style.color,a.color,"black");if(p)if(u(l))p.attr({text:l}),K=!1;else{if(b.dataLabel=p=p.destroy(),D)b.connector=D.destroy()}else if(u(l)){p={fill:d.backgroundColor,stroke:d.borderColor,"stroke-width":d.borderWidth,r:d.borderRadius||0,rotation:v,padding:d.padding,zIndex:1};for(t in p)p[t]===G&&delete p[t];p=b.dataLabel=a.chart.renderer[v?"text":"label"](l,0,-999,null,null,null,d.useHTML).attr(p).css(g(d.style,e&&{cursor:e})).add(m).shadow(d.shadow)}p&&a.alignDataLabel(b,p,
d,null,K)}})};ea.prototype.alignDataLabel=function(a,b,e,c,d){var f=this.chart,k=f.inverted,l=r(a.plotX,-999),m=r(a.plotY,-999),v=b.getBBox();if(a=this.visible&&(a.series.forceDL||f.isInsidePlot(a.plotX,a.plotY,k)))c=g({x:k?f.plotWidth-m:l,y:C(k?f.plotHeight-l:m),width:0,height:0},c),g(e,{width:v.width,height:v.height}),e.rotation?(k={align:e.align,x:c.x+e.x+c.width/2,y:c.y+e.y+c.height/2},b[d?"attr":"animate"](k)):(b.align(e,null,c),k=b.alignAttr,"justify"===r(e.overflow,"justify")?this.justifyDataLabel(b,
e,k,v,c,d):r(e.crop,!0)&&(a=f.isInsidePlot(k.x,k.y)&&f.isInsidePlot(k.x+v.width,k.y+v.height)));a||(b.attr({y:-999}),b.placed=!1)};ea.prototype.justifyDataLabel=function(a,b,e,c,d,f){var g=this.chart,k=b.align,l=b.verticalAlign,m,v;m=e.x;0>m&&("right"===k?b.align="left":b.x=-m,v=!0);m=e.x+c.width;m>g.plotWidth&&("left"===k?b.align="right":b.x=g.plotWidth-m,v=!0);m=e.y;0>m&&("bottom"===l?b.verticalAlign="top":b.y=-m,v=!0);m=e.y+c.height;m>g.plotHeight&&("top"===l?b.verticalAlign="bottom":b.y=g.plotHeight-
m,v=!0);v&&(a.placed=!f,a.align(b,null,d))};ja.pie&&(ja.pie.prototype.drawDataLabels=function(){var a=this,b=a.data,e,c=a.chart,d=a.options.dataLabels,f=r(d.connectorPadding,10),g=r(d.connectorWidth,1),k=c.plotWidth,c=c.plotHeight,l,m,v=r(d.softConnector,!0),p=d.distance,q=a.center,t=q[2]/2,D=q[1],u=0<p,K,w,I,G,U=[[],[]],M,F,da,x,J,Q=[0,0,0,0],N=function(a,b){return b.y-a.y};if(a.visible&&(d.enabled||a._hasPointLabels)){ea.prototype.drawDataLabels.apply(a);A(b,function(a){a.dataLabel&&a.visible&&
U[a.half].push(a)});for(x=0;!G&&b[x];)G=b[x]&&b[x].dataLabel&&(b[x].dataLabel.getBBox().height||21),x++;for(x=2;x--;){var b=[],R=[],H=U[x],ba=H.length,B;a.sortByAngle(H,x-.5);if(0<p){for(J=D-t-p;J<=D+t+p;J+=G)b.push(J);w=b.length;if(ba>w){e=[].concat(H);e.sort(N);for(J=ba;J--;)e[J].rank=J;for(J=ba;J--;)H[J].rank>=w&&H.splice(J,1);ba=H.length}for(J=0;J<ba;J++){e=H[J];I=e.labelPos;e=9999;var T,ca;for(ca=0;ca<w;ca++)T=aa(b[ca]-I[1]),T<e&&(e=T,B=ca);if(B<J&&null!==b[J])B=J;else for(w<ba-J+B&&null!==b[J]&&
(B=w-ba+J);null===b[B];)B++;R.push({i:B,y:b[B]});b[B]=null}R.sort(N)}for(J=0;J<ba;J++){e=H[J];I=e.labelPos;K=e.dataLabel;da=!1===e.visible?"hidden":"visible";e=I[1];if(0<p){if(w=R.pop(),B=w.i,F=w.y,e>F&&null!==b[B+1]||e<F&&null!==b[B-1])F=e}else F=e;M=d.justify?q[0]+(x?-1:1)*(t+p):a.getX(0===B||B===b.length-1?e:F,x);K._attr={visibility:da,align:I[6]};K._pos={x:M+d.x+({left:f,right:-f}[I[6]]||0),y:F+d.y-10};K.connX=M;K.connY=F;null===this.options.size&&(w=K.width,M-w<f?Q[3]=E(C(w-M+f),Q[3]):M+w>k-
f&&(Q[1]=E(C(M+w-k+f),Q[1])),0>F-G/2?Q[0]=E(C(-F+G/2),Q[0]):F+G/2>c&&(Q[2]=E(C(F+G/2-c),Q[2])))}}if(0===na(Q)||this.verifyDataLabelOverflow(Q))this.placeDataLabels(),u&&g&&A(this.points,function(b){l=b.connector;I=b.labelPos;(K=b.dataLabel)&&K._pos?(da=K._attr.visibility,M=K.connX,F=K.connY,m=v?["M",M+("left"===I[6]?5:-5),F,"C",M,F,2*I[2]-I[4],2*I[3]-I[5],I[2],I[3],"L",I[4],I[5]]:["M",M+("left"===I[6]?5:-5),F,"L",I[2],I[3],"L",I[4],I[5]],l?(l.animate({d:m}),l.attr("visibility",da)):b.connector=l=
a.chart.renderer.path(m).attr({"stroke-width":g,stroke:d.connectorColor||b.color||"#606060",visibility:da}).add(a.group)):l&&(b.connector=l.destroy())})}},ja.pie.prototype.placeDataLabels=function(){A(this.points,function(a){a=a.dataLabel;var b;a&&((b=a._pos)?(a.attr(a._attr),a[a.moved?"animate":"attr"](b),a.moved=!0):a&&a.attr({y:-999}))})},ja.pie.prototype.alignDataLabel=Da,ja.pie.prototype.verifyDataLabelOverflow=function(a){var b=this.center,e=this.options,c=e.center,d=e=e.minSize||80,f;null!==
c[0]?d=E(b[2]-E(a[1],a[3]),e):(d=E(b[2]-a[1]-a[3],e),b[0]+=(a[3]-a[1])/2);null!==c[1]?d=E(T(d,b[2]-E(a[0],a[2])),e):(d=E(T(d,b[2]-a[0]-a[2]),e),b[1]+=(a[0]-a[2])/2);d<b[2]?(b[2]=d,this.translate(b),A(this.points,function(a){a.dataLabel&&(a.dataLabel._pos=null)}),this.drawDataLabels&&this.drawDataLabels()):f=!0;return f});ja.column&&(ja.column.prototype.alignDataLabel=function(a,b,e,d,f){var g=this.chart,k=g.inverted,l=a.dlBox||a.shapeArgs,m=a.below||a.plotY>r(this.translatedThreshold,g.plotSizeY),
v=r(e.inside,!!this.options.stacking);l&&(d=c(l),k&&(d={x:g.plotWidth-d.y-d.height,y:g.plotHeight-d.x-d.width,width:d.height,height:d.width}),!v)&&(k?(d.x+=m?0:d.width,d.width=0):(d.y+=m?d.height:0,d.height=0));e.align=r(e.align,!k||v?"center":m?"right":"left");e.verticalAlign=r(e.verticalAlign,k||v?"middle":m?"top":"bottom");ea.prototype.alignDataLabel.call(this,a,b,e,d,f)});g(Highcharts,{Axis:M,Chart:D,Color:Ja,Point:Sa,Tick:U,Tooltip:K,Renderer:Ya,Series:ea,SVGElement:I,SVGRenderer:Ka,arrayMin:qa,
arrayMax:na,charts:Ra,dateFormat:ab,format:ba,pathAnim:pb,getOptions:function(){return ia},hasBidiBug:Eb,isTouchDevice:zb,numberFormat:R,seriesTypes:ja,setOptions:function(a){ia=c(!0,ia,a);v();return ia},addEvent:ha,removeEvent:va,createElement:B,discardElement:S,css:H,each:A,extend:g,map:Ua,merge:c,pick:r,splat:x,extendClass:P,pInt:k,wrap:Ca,svg:ta,canvas:Ba,vml:!ta&&!Ba,product:"Highcharts",version:"3.0.9"})})();
(function(g,c){function k(c,d,f){this.init.call(this,c,d,f)}var d=g.arrayMin,f=g.arrayMax,l=g.each,p=g.extend,m=g.merge,t=g.map,q=g.pick,u=g.pInt,w=g.getOptions().plotOptions,x=g.seriesTypes,r=g.extendClass,H=g.splat,B=g.wrap,P=g.Axis,R=g.Tick,N=g.Point,Ca=g.Pointer,ba=g.TrackerMixin,xa=g.CenteredSeriesMixin,ka=g.Series,la=Math,Fa=la.round,qa=la.floor,na=la.max,oa=g.Color,S=function(){};p(k.prototype,{init:function(c,d,f){var g=this,k=g.defaultOptions;g.chart=d;d.angular&&(k.background={});g.options=
c=m(k,c);(c=c.background)&&l([].concat(H(c)).reverse(),function(c){var d=c.backgroundColor;c=m(g.defaultBackgroundOptions,c);d&&(c.backgroundColor=d);c.color=c.backgroundColor;f.options.plotBands.unshift(c)})},defaultOptions:{center:["50%","50%"],size:"85%",startAngle:0},defaultBackgroundOptions:{shape:"circle",borderWidth:1,borderColor:"silver",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#FFF"],[1,"#DDD"]]},from:Number.MIN_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"}});
var fa=P.prototype,R=R.prototype,O={getOffset:S,redraw:function(){this.isDirty=!1},render:function(){this.isDirty=!1},setScale:S,setCategories:S,setTitle:S},ra={isRadial:!0,defaultRadialGaugeOptions:{labels:{align:"center",x:0,y:null},minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,plotBands:[],tickLength:10,tickPosition:"inside",tickWidth:2,title:{rotation:0},zIndex:2},defaultRadialXOptions:{gridLineWidth:1,labels:{align:null,distance:15,
x:0,y:null},maxPadding:0,minPadding:0,plotBands:[],showLastLabel:!1,tickLength:0},defaultRadialYOptions:{gridLineInterpolation:"circle",labels:{align:"right",x:-3,y:-2},plotBands:[],showLastLabel:!1,title:{x:4,text:null,rotation:90}},setOptions:function(c){this.options=m(this.defaultOptions,this.defaultRadialOptions,c)},getOffset:function(){fa.getOffset.call(this);this.chart.axisOffset[this.side]=0;this.center=this.pane.center=xa.getCenter.call(this.pane)},getLinePath:function(c,d){var f=this.center;
d=q(d,f[2]/2-this.offset);return this.chart.renderer.symbols.arc(this.left+f[0],this.top+f[1],d,d,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})},setAxisTranslation:function(){fa.setAxisTranslation.call(this);this.center&&(this.transA=this.isCircular?(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.center[2]/2/(this.max-this.min||1),this.minPixelPadding=this.isXAxis?this.transA*this.minPointOffset+(this.reversed?(this.endAngleRad-this.startAngleRad)/4:0):0)},beforeSetTickPositions:function(){this.autoConnect&&
(this.max+=this.categories&&1||this.pointRange||this.closestPointRange||0)},setAxisSize:function(){fa.setAxisSize.call(this);this.isRadial&&(this.center=this.pane.center=g.CenteredSeriesMixin.getCenter.call(this.pane),this.len=this.width=this.height=this.isCircular?this.center[2]*(this.endAngleRad-this.startAngleRad)/2:this.center[2]/2)},getPosition:function(c,d){this.isCircular||(d=this.translate(c),c=this.min);return this.postTranslate(this.translate(c),q(d,this.center[2]/2)-this.offset)},postTranslate:function(c,
d){var f=this.chart,g=this.center;c=this.startAngleRad+c;return{x:f.plotLeft+g[0]+Math.cos(c)*d,y:f.plotTop+g[1]+Math.sin(c)*d}},getPlotBandPath:function(c,d,f){var g=this.center,k=this.startAngleRad,l=g[2]/2,m=[q(f.outerRadius,"100%"),f.innerRadius,q(f.thickness,10)],p=/%$/,r,w=this.isCircular;"polygon"===this.options.gridLineInterpolation?g=this.getPlotLinePath(c).concat(this.getPlotLinePath(d,!0)):(w||(m[0]=this.translate(c),m[1]=this.translate(d)),m=t(m,function(c){p.test(c)&&(c=u(c,10)*l/100);
return c}),"circle"!==f.shape&&w?(c=k+this.translate(c),d=k+this.translate(d)):(c=-Math.PI/2,d=1.5*Math.PI,r=!0),g=this.chart.renderer.symbols.arc(this.left+g[0],this.top+g[1],m[0],m[0],{start:c,end:d,innerR:q(m[1],m[0]-m[2]),open:r}));return g},getPlotLinePath:function(c,d){var f=this.center,g=this.chart,k=this.getPosition(c),m,p,q;this.isCircular?q=["M",f[0]+g.plotLeft,f[1]+g.plotTop,"L",k.x,k.y]:"circle"===this.options.gridLineInterpolation?(c=this.translate(c))&&(q=this.getLinePath(0,c)):(m=g.xAxis[0],
q=[],c=this.translate(c),f=m.tickPositions,m.autoConnect&&(f=f.concat([f[0]])),d&&(f=[].concat(f).reverse()),l(f,function(d,f){p=m.getPosition(d,c);q.push(f?"L":"M",p.x,p.y)}));return q},getTitlePosition:function(){var c=this.center,d=this.chart,f=this.options.title;return{x:d.plotLeft+c[0]+(f.x||0),y:d.plotTop+c[1]-{high:.5,middle:.25,low:0}[f.align]*c[2]+(f.y||0)}}};B(fa,"init",function(d,f,g){var l,r=f.angular,t=f.polar,u=g.isX,w=r&&u,F,x;x=f.options;var J=g.pane||0;if(r){if(p(this,w?O:ra),F=!u)this.defaultRadialOptions=
this.defaultRadialGaugeOptions}else t&&(p(this,ra),this.defaultRadialOptions=(F=u)?this.defaultRadialXOptions:m(this.defaultYAxisOptions,this.defaultRadialYOptions));d.call(this,f,g);w||!r&&!t||(d=this.options,f.panes||(f.panes=[]),this.pane=(l=f.panes[J]=f.panes[J]||new k(H(x.pane)[J],f,this),J=l),J=J.options,f.inverted=!1,x.chart.zoomType=null,this.startAngleRad=f=(J.startAngle-90)*Math.PI/180,this.endAngleRad=x=(q(J.endAngle,J.startAngle+360)-90)*Math.PI/180,this.offset=d.offset||0,(this.isCircular=
F)&&g.max===c&&x-f===2*Math.PI&&(this.autoConnect=!0))});B(R,"getPosition",function(c,d,f,g,k){var l=this.axis;return l.getPosition?l.getPosition(f):c.call(this,d,f,g,k)});B(R,"getLabelPosition",function(c,d,f,g,k,l,m,p,r){var t=this.axis,u=l.y,w=l.align,x=(t.translate(this.pos)+t.startAngleRad+Math.PI/2)/Math.PI*180%360;t.isRadial?(c=t.getPosition(this.pos,t.center[2]/2+q(l.distance,-25)),"auto"===l.rotation?g.attr({rotation:x}):null===u&&(u=t.chart.renderer.fontMetrics(g.styles.fontSize).b-g.getBBox().height/
2),null===w&&(w=t.isCircular?20<x&&160>x?"left":200<x&&340>x?"right":"center":"center",g.attr({align:w})),c.x+=l.x,c.y+=u):c=c.call(this,d,f,g,k,l,m,p,r);return c});B(R,"getMarkPath",function(c,d,f,g,k,l,m){var p=this.axis;p.isRadial?(c=p.getPosition(this.pos,p.center[2]/2+g),d=["M",d,f,"L",c.x,c.y]):d=c.call(this,d,f,g,k,l,m);return d});w.arearange=m(w.area,{lineWidth:1,marker:null,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.low}</b> - <b>{point.high}</b><br/>'},
trackByArea:!0,dataLabels:{verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0}});x.arearange=r(x.area,{type:"arearange",pointArrayMap:["low","high"],toYData:function(c){return[c.low,c.high]},pointValKey:"low",getSegments:function(){var c=this;l(c.points,function(d){c.options.connectNulls||null!==d.low&&null!==d.high?null===d.low&&null!==d.high&&(d.y=d.high):d.y=null});ka.prototype.getSegments.call(this)},translate:function(){var c=this.yAxis;x.area.prototype.translate.apply(this);l(this.points,function(d){var f=
d.low,g=d.high,k=d.plotY;null===g&&null===f?d.y=null:null===f?(d.plotLow=d.plotY=null,d.plotHigh=c.translate(g,0,1,0,1)):null===g?(d.plotLow=k,d.plotHigh=null):(d.plotLow=k,d.plotHigh=c.translate(g,0,1,0,1))})},getSegmentPath:function(c){var d,f=[],g=c.length,k=ka.prototype.getSegmentPath,l,m;m=this.options;var p=m.step;for(d=HighchartsAdapter.grep(c,function(c){return null!==c.plotLow});g--;)l=c[g],null!==l.plotHigh&&f.push({plotX:l.plotX,plotY:l.plotHigh});c=k.call(this,d);p&&(!0===p&&(p="left"),
m.step={left:"right",center:"center",right:"left"}[p]);f=k.call(this,f);m.step=p;m=[].concat(c,f);f[0]="L";this.areaPath=this.areaPath.concat(c,f);return m},drawDataLabels:function(){var c=this.data,d=c.length,f,g=[],k=ka.prototype,l=this.options.dataLabels,m,p=this.chart.inverted;if(l.enabled||this._hasPointLabels){for(f=d;f--;)m=c[f],m.y=m.high,m.plotY=m.plotHigh,g[f]=m.dataLabel,m.dataLabel=m.dataLabelUpper,m.below=!1,p?(l.align="left",l.x=l.xHigh):l.y=l.yHigh;k.drawDataLabels&&k.drawDataLabels.apply(this,
arguments);for(f=d;f--;)m=c[f],m.dataLabelUpper=m.dataLabel,m.dataLabel=g[f],m.y=m.low,m.plotY=m.plotLow,m.below=!0,p?(l.align="right",l.x=l.xLow):l.y=l.yLow;k.drawDataLabels&&k.drawDataLabels.apply(this,arguments)}},alignDataLabel:function(){x.column.prototype.alignDataLabel.apply(this,arguments)},getSymbol:x.column.prototype.getSymbol,drawPoints:S});w.areasplinerange=m(w.arearange);x.areasplinerange=r(x.arearange,{type:"areasplinerange",getPointSpline:x.spline.prototype.getPointSpline});(function(){var c=
x.column.prototype;w.columnrange=m(w.column,w.arearange,{lineWidth:1,pointRange:null});x.columnrange=r(x.arearange,{type:"columnrange",translate:function(){var d=this,f=d.yAxis,g;c.translate.apply(d);l(d.points,function(c){var k=c.shapeArgs,l=d.options.minPointLength,m;c.plotHigh=g=f.translate(c.high,0,1,0,1);c.plotLow=c.plotY;m=g;c=c.plotY-g;c<l&&(l-=c,c+=l,m-=l/2);k.height=c;k.y=m})},trackerGroups:["group","dataLabels"],drawGraph:S,pointAttrToOptions:c.pointAttrToOptions,drawPoints:c.drawPoints,
drawTracker:c.drawTracker,animate:c.animate,getColumnMetrics:c.getColumnMetrics})})();w.gauge=m(w.line,{dataLabels:{enabled:!0,y:15,borderWidth:1,borderColor:"silver",borderRadius:3,crop:!1,style:{fontWeight:"bold"},verticalAlign:"top",zIndex:2},dial:{},pivot:{},tooltip:{headerFormat:""},showInLegend:!1});N={type:"gauge",pointClass:r(N,{setState:function(c){this.state=c}}),angular:!0,drawGraph:S,fixedBox:!0,forceDL:!0,trackerGroups:["group","dataLabels"],translate:function(){var c=this.yAxis,d=this.options,
f=c.center;this.generatePoints();l(this.points,function(g){var k=m(d.dial,g.dial),l=u(q(k.radius,80))*f[2]/200,p=u(q(k.baseLength,70))*l/100,r=u(q(k.rearLength,10))*l/100,t=k.baseWidth||3,w=k.topWidth||1,x=c.startAngleRad+c.translate(g.y,null,null,null,!0);!1===d.wrap&&(x=Math.max(c.startAngleRad,Math.min(c.endAngleRad,x)));x=180*x/Math.PI;g.shapeType="path";g.shapeArgs={d:k.path||["M",-r,-t/2,"L",p,-t/2,l,-w/2,l,w/2,p,t/2,-r,t/2,"z"],translateX:f[0],translateY:f[1],rotation:x};g.plotX=f[0];g.plotY=
f[1]})},drawPoints:function(){var c=this,d=c.yAxis.center,f=c.pivot,g=c.options,k=g.pivot,p=c.chart.renderer;l(c.points,function(d){var f=d.graphic,k=d.shapeArgs,l=k.d,q=m(g.dial,d.dial);f?(f.animate(k),k.d=l):d.graphic=p[d.shapeType](k).attr({stroke:q.borderColor||"none","stroke-width":q.borderWidth||0,fill:q.backgroundColor||"black",rotation:k.rotation}).add(c.group)});f?f.animate({translateX:d[0],translateY:d[1]}):c.pivot=p.circle(0,0,q(k.radius,5)).attr({"stroke-width":k.borderWidth||0,stroke:k.borderColor||
"silver",fill:k.backgroundColor||"black"}).translate(d[0],d[1]).add(c.group)},animate:function(c){var d=this;c||(l(d.points,function(c){var f=c.graphic;f&&(f.attr({rotation:180*d.yAxis.startAngleRad/Math.PI}),f.animate({rotation:c.shapeArgs.rotation},d.options.animation))}),d.animate=null)},render:function(){this.group=this.plotGroup("group","series",this.visible?"visible":"hidden",this.options.zIndex,this.chart.seriesGroup);ka.prototype.render.call(this);this.group.clip(this.chart.clipRect)},setData:function(c,
d){ka.prototype.setData.call(this,c,!1);this.processData();this.generatePoints();q(d,!0)&&this.chart.redraw()},drawTracker:ba.drawTrackerPoint};x.gauge=r(x.line,N);w.boxplot=m(w.column,{fillColor:"#FFFFFF",lineWidth:1,medianWidth:2,states:{hover:{brightness:-.3}},threshold:null,tooltip:{pointFormat:'<span style="color:{series.color};font-weight:bold">{series.name}</span><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},
whiskerLength:"50%",whiskerWidth:2});x.boxplot=r(x.column,{type:"boxplot",pointArrayMap:["low","q1","median","q3","high"],toYData:function(c){return[c.low,c.q1,c.median,c.q3,c.high]},pointValKey:"high",pointAttrToOptions:{fill:"fillColor",stroke:"color","stroke-width":"lineWidth"},drawDataLabels:S,translate:function(){var c=this.yAxis,d=this.pointArrayMap;x.column.prototype.translate.apply(this);l(this.points,function(f){l(d,function(d){null!==f[d]&&(f[d+"Plot"]=c.translate(f[d],0,1,0,1))})})},drawPoints:function(){var d=
this,f=d.points,g=d.options,k=d.chart.renderer,m,p,r,t,u,w,x,C,N,R,E,B,H,ba,Ca,la,P,S,O,ka,fa,oa,na=!1!==d.doQuartiles,xa=parseInt(d.options.whiskerLength,10)/100;l(f,function(f){N=f.graphic;fa=f.shapeArgs;E={};ba={};la={};oa=f.color||d.color;f.plotY!==c&&((m=f.pointAttr[f.selected?"selected":""],P=fa.width,S=qa(fa.x),O=S+P,ka=Fa(P/2),p=qa(na?f.q1Plot:f.lowPlot),r=qa(na?f.q3Plot:f.lowPlot),t=qa(f.highPlot),u=qa(f.lowPlot),E.stroke=f.stemColor||g.stemColor||oa,E["stroke-width"]=q(f.stemWidth,g.stemWidth,
g.lineWidth),E.dashstyle=f.stemDashStyle||g.stemDashStyle,ba.stroke=f.whiskerColor||g.whiskerColor||oa,ba["stroke-width"]=q(f.whiskerWidth,g.whiskerWidth,g.lineWidth),la.stroke=f.medianColor||g.medianColor||oa,la["stroke-width"]=q(f.medianWidth,g.medianWidth,g.lineWidth),la["stroke-linecap"]="round",x=E["stroke-width"]%2/2,C=S+ka+x,R=["M",C,r,"L",C,t,"M",C,p,"L",C,u,"z"],na&&(x=m["stroke-width"]%2/2,C=qa(C)+x,p=qa(p)+x,r=qa(r)+x,S+=x,O+=x,B=["M",S,r,"L",S,p,"L",O,p,"L",O,r,"L",S,r,"z"]),xa&&(x=ba["stroke-width"]%
2/2,t+=x,u+=x,H=["M",C-ka*xa,t,"L",C+ka*xa,t,"M",C-ka*xa,u,"L",C+ka*xa,u]),x=la["stroke-width"]%2/2,w=Fa(f.medianPlot)+x,Ca=["M",S,w,"L",O,w,"z"],N)?(f.stem.animate({d:R}),xa&&f.whiskers.animate({d:H}),na&&f.box.animate({d:B}),f.medianShape.animate({d:Ca})):(f.graphic=N=k.g().add(d.group),f.stem=k.path(R).attr(E).add(N),xa&&(f.whiskers=k.path(H).attr(ba).add(N)),na&&(f.box=k.path(B).attr(m).add(N)),f.medianShape=k.path(Ca).attr(la).add(N)))})}});w.errorbar=m(w.boxplot,{color:"#000000",grouping:!1,
linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null});x.errorbar=r(x.boxplot,{type:"errorbar",pointArrayMap:["low","high"],toYData:function(c){return[c.low,c.high]},pointValKey:"high",doQuartiles:!1,getColumnMetrics:function(){return this.linkedParent&&this.linkedParent.columnMetrics||x.column.prototype.getColumnMetrics.call(this)}});w.waterfall=m(w.column,{lineWidth:1,lineColor:"#333",
dashStyle:"dot",borderColor:"#333"});x.waterfall=r(x.column,{type:"waterfall",upColorProp:"fill",pointArrayMap:["low","y"],pointValKey:"y",init:function(c,d){d.stacking=!0;x.column.prototype.init.call(this,c,d)},translate:function(){var c=this.options,d=this.yAxis,f,g,k,l,m,p,q,r,t;f=c.threshold;c=c.borderWidth%2/2;x.column.prototype.translate.apply(this);r=f;k=this.points;g=0;for(f=k.length;g<f;g++)l=k[g],m=l.shapeArgs,p=this.getStack(g),t=p.points[this.index],isNaN(l.y)&&(l.y=this.yData[g]),q=na(r,
r+l.y)+t[0],m.y=d.translate(q,0,1),l.isSum||l.isIntermediateSum?(m.y=d.translate(t[1],0,1),m.height=d.translate(t[0],0,1)-m.y):r+=p.total,0>m.height&&(m.y+=m.height,m.height*=-1),l.plotY=m.y=Fa(m.y)-c,m.height=Fa(m.height),l.yBottom=m.y+m.height},processData:function(c){var d=this.yData,f=this.points,g,k=d.length,l=this.options.threshold||0,m,p,q,r,t,u;p=m=q=r=l;for(u=0;u<k;u++)t=d[u],g=f&&f[u]?f[u]:{},"sum"===t||g.isSum?d[u]=p:"intermediateSum"===t||g.isIntermediateSum?(d[u]=m,m=l):(p+=t,m+=t),q=
Math.min(p,q),r=Math.max(p,r);ka.prototype.processData.call(this,c);this.dataMin=q;this.dataMax=r},toYData:function(c){return c.isSum?"sum":c.isIntermediateSum?"intermediateSum":c.y},getAttribs:function(){x.column.prototype.getAttribs.apply(this,arguments);var c=this.options,d=c.states,f=c.upColor||this.color,c=g.Color(f).brighten(.1).get(),k=m(this.pointAttr),p=this.upColorProp;k[""][p]=f;k.hover[p]=d.hover.upColor||c;k.select[p]=d.select.upColor||f;l(this.points,function(c){0<c.y&&!c.color&&(c.pointAttr=
k,c.color=f)})},getGraphPath:function(){var c=this.data,d=c.length,f=Fa(this.options.lineWidth+this.options.borderWidth)%2/2,g=[],k,l,m;for(m=1;m<d;m++)l=c[m].shapeArgs,k=c[m-1].shapeArgs,l=["M",k.x+k.width,k.y+f,"L",l.x,k.y+f],0>c[m-1].y&&(l[2]+=k.height,l[5]+=k.height),g=g.concat(l);return g},getExtremes:S,getStack:function(c){var d=this.yAxis.stacks,f=this.stackKey;this.processedYData[c]<this.options.threshold&&(f="-"+f);return d[f][c]},drawGraph:ka.prototype.drawGraph});w.bubble=m(w.scatter,{dataLabels:{inside:!0,
style:{color:"white",textShadow:"0px 0px 3px black"},verticalAlign:"middle"},marker:{lineColor:null,lineWidth:1},minSize:8,maxSize:"20%",tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0});x.bubble=r(x.scatter,{type:"bubble",pointArrayMap:["y","z"],parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],bubblePadding:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor"},applyOpacity:function(c){var d=this.options.marker,
f=q(d.fillOpacity,.5);c=c||d.fillColor||this.color;1!==f&&(c=oa(c).setOpacity(f).get("rgba"));return c},convertAttribs:function(){var c=ka.prototype.convertAttribs.apply(this,arguments);c.fill=this.applyOpacity(c.fill);return c},getRadii:function(c,d,f,g){var k,l,m,p=this.zData,q=[],r="width"!==this.options.sizeBy;l=0;for(k=p.length;l<k;l++)m=d-c,m=0<m?(p[l]-c)/(d-c):.5,r&&0<=m&&(m=Math.sqrt(m)),q.push(la.ceil(f+m*(g-f))/2);this.radii=q},animate:function(c){var d=this.options.animation;c||(l(this.points,
function(c){var f=c.graphic;c=c.shapeArgs;f&&c&&(f.attr("r",1),f.animate({r:c.r},d))}),this.animate=null)},translate:function(){var d,f=this.data,g,k,l=this.radii;x.scatter.prototype.translate.call(this);for(d=f.length;d--;)g=f[d],k=l?l[d]:0,g.negative=g.z<(this.options.zThreshold||0),k>=this.minPxSize/2?(g.shapeType="circle",g.shapeArgs={x:g.plotX,y:g.plotY,r:k},g.dlBox={x:g.plotX-k,y:g.plotY-k,width:2*k,height:2*k}):g.shapeArgs=g.plotY=g.dlBox=c},drawLegendSymbol:function(c,d){var f=u(c.itemStyle.fontSize)/
2;d.legendSymbol=this.chart.renderer.circle(f,c.baseline-f,f).attr({zIndex:3}).add(d.legendGroup);d.legendSymbol.isMarker=!0},drawPoints:x.column.prototype.drawPoints,alignDataLabel:x.column.prototype.alignDataLabel});P.prototype.beforePadding=function(){var g=this,k=this.len,m=this.chart,p=0,r=k,t=this.isXAxis,w=t?"xData":"yData",x=this.min,F={},N=la.min(m.plotWidth,m.plotHeight),J=Number.MAX_VALUE,C=-Number.MAX_VALUE,R=this.max-x,B=k/R,E=[];this.tickPositions&&(l(this.series,function(c){var k=c.options;
c.bubblePadding&&c.visible&&(g.allowZoomOutside=!0,E.push(c),t)&&(l(["minSize","maxSize"],function(c){var d=k[c],f=/%$/.test(d),d=u(d);F[c]=f?N*d/100:d}),c.minPxSize=F.minSize,c=c.zData,c.length&&(J=la.min(J,la.max(d(c),!1===k.displayNegative?k.zThreshold:-Number.MAX_VALUE)),C=la.max(C,f(c))))}),l(E,function(c){var d=c[w],f=d.length,g;t&&c.getRadii(J,C,F.minSize,F.maxSize);if(0<R)for(;f--;)"number"===typeof d[f]&&(g=c.radii[f],p=Math.min((d[f]-x)*B-g,p),r=Math.max((d[f]-x)*B+g,r))}),E.length&&0<R&&
q(this.options.min,this.userMin)===c&&q(this.options.max,this.userMax)===c&&(r-=k,B*=(k+p-r)/k,this.min+=p/B,this.max+=r/B))};(function(){function c(d,f,g){d.call(this,f,g);this.chart.polar&&(this.closeSegment=function(c){var d=this.xAxis.center;c.push("L",d[0],d[1])},this.closedStacks=!0)}function d(c,f){var g=this.chart,k=this.options.animation,l=this.group,m=this.markerGroup,p=this.xAxis.center,q=g.plotLeft,r=g.plotTop;if(g.polar){if(g.renderer.isSVG)if(!0===k&&(k={}),f){if(g={translateX:p[0]+
q,translateY:p[1]+r,scaleX:.001,scaleY:.001},l.attr(g),m)m.attrSetters=l.attrSetters,m.attr(g)}else g={translateX:q,translateY:r,scaleX:1,scaleY:1},l.animate(g,k),m&&m.animate(g,k),this.animate=null}else c.call(this,f)}var f=ka.prototype,g=Ca.prototype,k;f.toXY=function(c){var d,f=this.chart;d=c.plotX;var g=c.plotY;c.rectPlotX=d;c.rectPlotY=g;c.clientX=(d/Math.PI*180+this.xAxis.pane.options.startAngle)%360;d=this.xAxis.postTranslate(c.plotX,this.yAxis.len-g);c.plotX=c.polarPlotX=d.x-f.plotLeft;c.plotY=
c.polarPlotY=d.y-f.plotTop};f.orderTooltipPoints=function(c){this.chart.polar&&(c.sort(function(c,d){return c.clientX-d.clientX}),c[0])&&(c[0].wrappedClientX=c[0].clientX+360,c.push(c[0]))};x.area&&B(x.area.prototype,"init",c);x.areaspline&&B(x.areaspline.prototype,"init",c);x.spline&&B(x.spline.prototype,"getPointSpline",function(c,d,f,g){var k,l,m,p,q,r,t;this.chart.polar?(k=f.plotX,l=f.plotY,c=d[g-1],m=d[g+1],this.connectEnds&&(c||(c=d[d.length-2]),m||(m=d[1])),c&&m&&(p=c.plotX,q=c.plotY,d=m.plotX,
r=m.plotY,p=(1.5*k+p)/2.5,q=(1.5*l+q)/2.5,m=(1.5*k+d)/2.5,t=(1.5*l+r)/2.5,d=Math.sqrt(Math.pow(p-k,2)+Math.pow(q-l,2)),r=Math.sqrt(Math.pow(m-k,2)+Math.pow(t-l,2)),p=Math.atan2(q-l,p-k),q=Math.atan2(t-l,m-k),t=Math.PI/2+(p+q)/2,Math.abs(p-t)>Math.PI/2&&(t-=Math.PI),p=k+Math.cos(t)*d,q=l+Math.sin(t)*d,m=k+Math.cos(Math.PI+t)*r,t=l+Math.sin(Math.PI+t)*r,f.rightContX=m,f.rightContY=t),g?(f=["C",c.rightContX||c.plotX,c.rightContY||c.plotY,p||k,q||l,k,l],c.rightContX=c.rightContY=null):f=["M",k,l]):f=
c.call(this,d,f,g);return f});B(f,"translate",function(c){c.call(this);if(this.chart.polar&&!this.preventPostTranslate){c=this.points;for(var d=c.length;d--;)this.toXY(c[d])}});B(f,"getSegmentPath",function(c,d){var f=this.points;this.chart.polar&&!1!==this.options.connectEnds&&d[d.length-1]===f[f.length-1]&&null!==f[0].y&&(this.connectEnds=!0,d=[].concat(d,[f[0]]));return c.call(this,d)});B(f,"animate",d);B(f,"setTooltipPoints",function(c,d){this.chart.polar&&p(this.xAxis,{tooltipLen:360});return c.call(this,
d)});x.column&&(k=x.column.prototype,B(k,"animate",d),B(k,"translate",function(c){var d=this.xAxis,f=this.yAxis.len,g=d.center,k=d.startAngleRad,l=this.chart.renderer,m,p;this.preventPostTranslate=!0;c.call(this);if(d.isRadial)for(d=this.points,p=d.length;p--;)m=d[p],c=m.barX+k,m.shapeType="path",m.shapeArgs={d:l.symbols.arc(g[0],g[1],f-m.plotY,null,{start:c,end:c+m.pointWidth,innerR:f-q(m.yBottom,f)})},this.toXY(m)}),B(k,"alignDataLabel",function(c,d,g,k,l,m){this.chart.polar?(c=d.rectPlotX/Math.PI*
180,null===k.align&&(k.align=20<c&&160>c?"left":200<c&&340>c?"right":"center"),null===k.verticalAlign&&(k.verticalAlign=45>c||315<c?"bottom":135<c&&225>c?"top":"middle"),f.alignDataLabel.call(this,d,g,k,l,m)):c.call(this,d,g,k,l,m)}));B(g,"getIndex",function(c,d){var f,g=this.chart,k;g.polar?(k=g.xAxis[0].center,f=d.chartX-k[0]-g.plotLeft,g=d.chartY-k[1]-g.plotTop,f=180-Math.round(Math.atan2(f,g)/Math.PI*180)):f=c.call(this,d);return f});B(g,"getCoordinates",function(c,d){var f=this.chart,g={xAxis:[],
yAxis:[]};f.polar?l(f.axes,function(c){var k=c.isXAxis,l=c.center,m=d.chartX-l[0]-f.plotLeft,l=d.chartY-l[1]-f.plotTop;g[k?"xAxis":"yAxis"].push({axis:c,value:c.translate(k?Math.PI-Math.atan2(m,l):Math.sqrt(Math.pow(m,2)+Math.pow(l,2)),!0)})}):g=c.call(this,d);return g})})()})(Highcharts);
(function(g){var c=g.Chart,k=g.addEvent,d=g.removeEvent,f=g.createElement,l=g.discardElement,p=g.css,m=g.merge,t=g.each,q=g.extend,u=Math.max,w=document,x=window,r=g.isTouchDevice,H=g.Renderer.prototype.symbols,B=g.getOptions(),P;q(B.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"});B.navigation={menuStyle:{border:"1px solid #A0A0A0",
background:"#FFFFFF",padding:"5px 0"},menuItemStyle:{padding:"0 10px",background:"none",color:"#303030",fontSize:r?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{symbolFill:"#E0E0E0",symbolSize:14,symbolStroke:"#666",symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,theme:{fill:"white",stroke:"none"},verticalAlign:"top",width:24}};B.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{menuClassName:"highcharts-contextmenu",
symbol:"menu",_titleKey:"contextButtonTitle",menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:!0},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}};g.post=function(c,d,g){var k;c=f("form",m({method:"post",
action:c,enctype:"multipart/form-data"},g),{display:"none"},w.body);for(k in d)f("input",{type:"hidden",name:k,value:d[k]},null,c);c.submit();l(c)};q(c.prototype,{getSVG:function(c){var d=this,k,p,r,u,x=m(d.options,c);w.createElementNS||(w.createElementNS=function(c,d){return w.createElement(d)});c=f("div",null,{position:"absolute",top:"-9999em",width:d.chartWidth+"px",height:d.chartHeight+"px"},w.body);p=d.renderTo.style.width;u=d.renderTo.style.height;p=x.exporting.sourceWidth||x.chart.width||/px$/.test(p)&&
parseInt(p,10)||600;u=x.exporting.sourceHeight||x.chart.height||/px$/.test(u)&&parseInt(u,10)||400;q(x.chart,{animation:!1,renderTo:c,forExport:!0,width:p,height:u});x.exporting.enabled=!1;x.series=[];t(d.series,function(c){r=m(c.options,{animation:!1,showCheckbox:!1,visible:c.visible});r.isInternal||x.series.push(r)});k=new g.Chart(x,d.callback);t(["xAxis","yAxis"],function(c){t(d[c],function(d,f){var g=k[c][f],l=d.getExtremes(),m=l.userMin,l=l.userMax;g&&(void 0!==m||void 0!==l)&&g.setExtremes(m,
l,!0,!1)})});p=k.container.innerHTML;x=null;k.destroy();l(c);p=p.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/&nbsp;/g,"\u00a0").replace(/&shy;/g,"\u00ad").replace(/<IMG /g,"<image ").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,
'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/id=([^" >]+)/g,'id="$1"').replace(/class=([^" >]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(c){return c.toLowerCase()});return p=p.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'")},exportChart:function(c,d){c=c||{};var f=this.options.exporting,f=this.getSVG(m({chart:{borderRadius:0}},f.chartOptions,d,{exporting:{sourceWidth:c.sourceWidth||
f.sourceWidth,sourceHeight:c.sourceHeight||f.sourceHeight}}));c=m(this.options.exporting,c);g.post(c.url,{filename:c.filename||"chart",type:c.type,width:c.width||0,scale:c.scale||2,svg:f},c.formAttributes)},print:function(){var c=this,d=c.container,f=[],g=d.parentNode,k=w.body,l=k.childNodes;c.isPrinting||(c.isPrinting=!0,t(l,function(c,d){1===c.nodeType&&(f[d]=c.style.display,c.style.display="none")}),k.appendChild(d),x.focus(),x.print(),setTimeout(function(){g.appendChild(d);t(l,function(c,d){1===
c.nodeType&&(c.style.display=f[d])});c.isPrinting=!1},1E3))},contextMenu:function(c,g,l,m,r,w,x){var B=this,H=B.options.navigation,P=H.menuItemStyle,oa=B.chartWidth,S=B.chartHeight,fa="cache-"+c,O=B[fa],ra=u(r,w),v,I,U,M=function(d){B.pointer.inClass(d.target,c)||I()};O||(B[fa]=O=f("div",{className:c},{position:"absolute",zIndex:1E3,padding:ra+"px"},B.container),v=f("div",null,q({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},H.menuStyle),O),I=
function(){p(O,{display:"none"});x&&x.setState(0);B.openMenu=!1},k(O,"mouseleave",function(){U=setTimeout(I,500)}),k(O,"mouseenter",function(){clearTimeout(U)}),k(document,"mouseup",M),k(B,"destroy",function(){d(document,"mouseup",M)}),t(g,function(c){if(c){var d=c.separator?f("hr",null,null,v):f("div",{onmouseover:function(){p(this,H.menuItemHoverStyle)},onmouseout:function(){p(this,P)},onclick:function(){I();c.onclick.apply(B,arguments)},innerHTML:c.text||B.options.lang[c.textKey]},q({cursor:"pointer"},
P),v);B.exportDivElements.push(d)}}),B.exportDivElements.push(v,O),B.exportMenuWidth=O.offsetWidth,B.exportMenuHeight=O.offsetHeight);g={display:"block"};l+B.exportMenuWidth>oa?g.right=oa-l-r-ra+"px":g.left=l-ra+"px";m+w+B.exportMenuHeight>S&&"top"!==x.alignOptions.verticalAlign?g.bottom=S-m-ra+"px":g.top=m+w-ra+"px";p(O,g);B.openMenu=!0},addButton:function(c){var d=this,f=d.renderer,k=m(d.options.navigation.buttonOptions,c),l=k.onclick,p=k.menuItems,r,t,u={stroke:k.symbolStroke,fill:k.symbolFill},
w=k.symbolSize||12;d.btnCount||(d.btnCount=0);d.exportDivElements||(d.exportDivElements=[],d.exportSVGElements=[]);if(!1!==k.enabled){var x=k.theme,B=x.states,H=B&&B.hover,B=B&&B.select,O;delete x.states;l?O=function(){l.apply(d,arguments)}:p&&(O=function(){d.contextMenu(t.menuClassName,p,t.translateX,t.translateY,t.width,t.height,t);t.setState(2)});k.text&&k.symbol?x.paddingLeft=g.pick(x.paddingLeft,25):k.text||q(x,{width:k.width,height:k.height,padding:0});t=f.button(k.text,0,0,O,x,H,B).attr({title:d.options.lang[k._titleKey],
"stroke-linecap":"round"});t.menuClassName=c.menuClassName||"highcharts-menu-"+d.btnCount++;k.symbol&&(r=f.symbol(k.symbol,k.symbolX-w/2,k.symbolY-w/2,w,w).attr(q(u,{"stroke-width":k.symbolStrokeWidth||1,zIndex:1})).add(t));t.add().align(q(k,{width:t.width,x:g.pick(k.x,P)}),!0,"spacingBox");P+=(t.width+k.buttonSpacing)*("right"===k.align?-1:1);d.exportSVGElements.push(t,r)}},destroyExport:function(c){c=c.target;var f,g;for(f=0;f<c.exportSVGElements.length;f++)if(g=c.exportSVGElements[f])g.onclick=
g.ontouchstart=null,c.exportSVGElements[f]=g.destroy();for(f=0;f<c.exportDivElements.length;f++)g=c.exportDivElements[f],d(g,"mouseleave"),c.exportDivElements[f]=g.onmouseout=g.onmouseover=g.ontouchstart=g.onclick=null,l(g)}});H.menu=function(c,d,f,g){return["M",c,d+2.5,"L",c+f,d+2.5,"M",c,d+g/2+.5,"L",c+f,d+g/2+.5,"M",c,d+g-1.5,"L",c+f,d+g-1.5]};c.prototype.callbacks.push(function(c){var d,f=c.options.exporting,g=f.buttons;P=0;if(!1!==f.enabled){for(d in g)c.addButton(g[d]);k(c,"destroy",c.destroyExport)}})})(Highcharts);
(function(g){var c=g.each,k=function(c,f){this.init(c,f)};g.extend(k.prototype,{init:function(c,f){this.options=c;this.chartOptions=f;this.columns=c.columns||this.rowsToColumns(c.rows)||[];this.columns.length?this.dataFound():(this.parseCSV(),this.parseTable(),this.parseGoogleSpreadsheet())},getColumnDistribution:function(){var d=this.chartOptions,f=d&&d.chart&&d.chart.type,k=[];c(d&&d.series||[],function(c){k.push((g.seriesTypes[c.type||f||"line"].prototype.pointArrayMap||[0]).length)});this.valueCount=
{global:(g.seriesTypes[f||"line"].prototype.pointArrayMap||[0]).length,individual:k}},dataFound:function(){this.options.switchRowsAndColumns&&(this.columns=this.rowsToColumns(this.columns));this.parseTypes();this.findHeaderRow();this.parsed();this.complete()},parseCSV:function(){var d=this,f=this.options,g=f.csv,k=this.columns,m=f.startRow||0,t=f.endRow||Number.MAX_VALUE,q=f.startColumn||0,u=f.endColumn||Number.MAX_VALUE,w,x,r=0;g&&(x=g.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split(f.lineDelimiter||
"\n"),w=f.itemDelimiter||(-1!==g.indexOf("\t")?"\t":","),c(x,function(f,g){var l=d.trim(f),x=0===l.indexOf("#");g>=m&&g<=t&&!x&&""!==l&&(l=f.split(w),c(l,function(c,d){d>=q&&d<=u&&(k[d-q]||(k[d-q]=[]),k[d-q][r]=c)}),r+=1)}),this.dataFound())},parseTable:function(){var d=this.options,f=d.table,g=this.columns,k=d.startRow||0,m=d.endRow||Number.MAX_VALUE,t=d.startColumn||0,q=d.endColumn||Number.MAX_VALUE,u;f&&("string"===typeof f&&(f=document.getElementById(f)),c(f.getElementsByTagName("tr"),function(d,
f){u=0;f>=k&&f<=m&&c(d.childNodes,function(c){("TD"===c.tagName||"TH"===c.tagName)&&u>=t&&u<=q&&(g[u]||(g[u]=[]),g[u][f-k]=c.innerHTML,u+=1)})}),this.dataFound())},parseGoogleSpreadsheet:function(){var c=this,f=this.options,g=f.googleSpreadsheetKey,k=this.columns,m=f.startRow||0,t=f.endRow||Number.MAX_VALUE,q=f.startColumn||0,u=f.endColumn||Number.MAX_VALUE,w,x;g&&jQuery.getJSON("https://spreadsheets.google.com/feeds/cells/"+g+"/"+(f.googleSpreadsheetWorksheet||"od6")+"/public/values?alt=json-in-script&callback=?",
function(f){f=f.feed.entry;var g,l=f.length,P=0,R=0,N;for(N=0;N<l;N++)g=f[N],P=Math.max(P,g.gs$cell.col),R=Math.max(R,g.gs$cell.row);for(N=0;N<P;N++)N>=q&&N<=u&&(k[N-q]=[],k[N-q].length=Math.min(R,t-m));for(N=0;N<l;N++)if(g=f[N],w=g.gs$cell.row-1,x=g.gs$cell.col-1,x>=q&&x<=u&&w>=m&&w<=t)k[x-q][w-m]=g.content.$t;c.dataFound()})},findHeaderRow:function(){c(this.columns,function(){});this.headerRow=0},trim:function(c){return"string"===typeof c?c.replace(/^\s+|\s+$/g,""):c},parseTypes:function(){for(var c=
this.columns,f=c.length,g,k,m,t;f--;)for(g=c[f].length;g--;)k=c[f][g],m=parseFloat(k),t=this.trim(k),t==m?(c[f][g]=m,31536E6<m?c[f].isDatetime=!0:c[f].isNumeric=!0):(k=this.parseDate(k),0!==f||"number"!==typeof k||isNaN(k)?c[f][g]=""===t?null:t:(c[f][g]=k,c[f].isDatetime=!0))},dateFormats:{"YYYY-mm-dd":{regex:"^([0-9]{4})-([0-9]{2})-([0-9]{2})$",parser:function(c){return Date.UTC(+c[1],c[2]-1,+c[3])}}},parseDate:function(c){var f=this.options.parseDate,g,k,m;f&&(g=f(c));if("string"===typeof c)for(k in this.dateFormats)f=
this.dateFormats[k],(m=c.match(f.regex))&&(g=f.parser(m));return g},rowsToColumns:function(c){var f,g,k,m,t;if(c)for(t=[],g=c.length,f=0;f<g;f++)for(m=c[f].length,k=0;k<m;k++)t[k]||(t[k]=[]),t[k][f]=c[f][k];return t},parsed:function(){this.options.parsed&&this.options.parsed.call(this,this.columns)},complete:function(){var c=this.columns,f,k,p=this.options,m,t,q,u,w,x;if(p.complete){this.getColumnDistribution();1<c.length&&(f=c.shift(),0===this.headerRow&&f.shift(),f.isDatetime?k="datetime":f.isNumeric||
(k="category"));for(u=0;u<c.length;u++)0===this.headerRow&&(c[u].name=c[u].shift());t=[];for(x=u=0;u<c.length;x++){m=g.pick(this.valueCount.individual[x],this.valueCount.global);q=[];for(w=0;w<c[u].length;w++)q[w]=[f[w],void 0!==c[u][w]?c[u][w]:null],1<m&&q[w].push(void 0!==c[u+1][w]?c[u+1][w]:null),2<m&&q[w].push(void 0!==c[u+2][w]?c[u+2][w]:null),3<m&&q[w].push(void 0!==c[u+3][w]?c[u+3][w]:null),4<m&&q[w].push(void 0!==c[u+4][w]?c[u+4][w]:null);t[x]={name:c[u].name,data:q};u+=m}p.complete({xAxis:{type:k},
series:t})}}});g.Data=k;g.data=function(c,f){return new k(c,f)};g.wrap(g.Chart.prototype,"init",function(d,f,k){var p=this;f&&f.data?g.data(g.extend(f.data,{complete:function(m){f.series&&c(f.series,function(c,d){f.series[d]=g.merge(c,m.series[d])});f=g.merge(m,f);d.call(p,f,k)}}),f):d.call(p,f,k)})})(Highcharts);var dataUrl="data_summary/data/cohort2_20140922.json",datatypeUrl="data_summary/data/WCDT_datatypes_20140922.tab",chartObjMapping={},sliceColorMapping={},selectionCriteria=new eventData.sampleSelectionCriteria,cohort=null,config={},getConfiguration=function(g){var c=utils.parseJson(utils.getCookie("od_config"))||{};g.querySettings=c;c=null;"eventAlbum"in g?c=g.eventAlbum:(c=new eventData.OD_eventAlbum,g.eventAlbum=c);var k=medbookDataLoader;"clinicalUrl"in g&&k.getClinicalData(g.clinicalUrl,c);"expressionUrl"in
g&&k.getExpressionData(g.expressionUrl,c);"mutationUrl"in g&&k.getMutationData(g.mutationUrl,c);if("mongoData"in g){var d=g.mongoData;"clinical"in d&&("aaa"===d.clinical?k.mongoClinicalData(aaa,c):k.mongoClinicalData(d.clinical,c));"expression"in d&&k.mongoExpressionData(d.expression,c)}return g};
Highcharts.setOptions({chart:{borderWidth:2,events:{load:function(){this.renderer.text("move to top",3,11).attr({cursor:"pointer"}).on("click",function(){moveChartUp(this.parentNode.parentNode.parentNode)}).add();this.renderer.text("pie slice samples",3,22).attr({cursor:"pointer"}).on("click",function(){var g=this.parentNode.parentNode.parentNode.id.replace(/^chart/,""),g=utils.getKeys(chartObjMapping)[g-1],c=getVisiblePointsIds(chartObjMapping[g],cohort.selectSamples(selectionCriteria.getCriteria()));
console.log("The",c.length,"IDs from the visible pie slices from",g,"are",c)}).add()}}}});
var chartOptions={renderTo:null,plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1},plotOptions={pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,color:"black",distance:5,format:"{point.y}"},point:{events:{click:function(){var g=this.series.name,c=this.name;"null "===c&&(c=null);selectionCriteria.addCriteria(g,c);redrawCharts()}}}}},tooltipOptions={pointFormat:"{point.y} samples is <b>{point.percentage:.1f} %</b>"},legendOptions={enabled:!0,floating:!1,itemWidth:null,layout:"horizontal",
align:"center"},pieChartOptionsTemplate={chart:chartOptions,legend:legendOptions,title:{text:""},credits:{enabled:!1},tooltip:tooltipOptions,plotOptions:plotOptions,series:[{type:"pie",name:null,data:null,showInLegend:!0}]},setChartRenderTo=function(g,c){c.chart.renderTo=g},setChartSeries=function(g,c,k){k.series[0].name=g;k.series[0].data=c},setChartTitle=function(g,c){c.title.text=g},setupChartOptions=function(g,c,k,d,f){setChartRenderTo(g,f);setChartSeries(c,k,f);setChartTitle(d,f);return f},createCrumbButton=
function(g,c){var k=g+"<br>"+c,d=document.createElement("button");d.innerHTML=k;d.onmouseover=function(c){this.innerHTML="<s>"+k+"</s>"};d.onmouseout=function(c){this.innerHTML=k};d.onclick=function(d){selectionCriteria.removeCriteria(g,c);redrawCharts()};return d},updateChartCrumbs=function(g){var c=document.getElementById("chartCrumbs");c.innerHTML="applied filters: ";g=g.getCriteria();for(var k in g){var d=createCrumbButton(g[k].eventId,g[k].value);c.appendChild(d)}},moveChartUp=function(g){for(var c=
document.getElementsByClassName("pieChart"),k=null,d=c.length-1;0<=d;--d){var f=c[d];f.parentNode.id==g.parentNode.id?k=f:null!=k&&utils.swapContainingDivs(k,f)}},setNewChartData=function(g,c){g.series[0].data.length=0;g.series[0].setData(c)},redrawNewData=function(g,c){var k=g.options.title.text;k in sliceColorMapping||(sliceColorMapping[k]=extractColorMapping(g));for(var k=sliceColorMapping[k],d=0;d<c.length;d++)c[d].color=k[c[d].name];setNewChartData(g,c);g.redraw()},extractColorMapping=function(g){var c=
{},k=g.series[0].options.data;g=g.options.colors;for(var d=0;d<k.length;d++)c[k[d].name]=g[d%g.length];return c},redrawCharts=function(){for(var g=cohort.selectSamples(selectionCriteria.getCriteria()),c=utils.getKeys(chartObjMapping),k=0;k<c.length;k++){var d=c[k],f=chartObjMapping[d],d=cohort.getEvent(d).data.getValueCounts(g),d=countsToPieData(d);redrawNewData(f,d)}updateChartCrumbs(selectionCriteria)},countsToPieData=function(g){for(var c=[],k=utils.getKeys(g),d=0;d<k.length;d++){var f=k[d],l=
g[f],p={};c.push(p);"null"===f&&(f="null ");p.name=f;p.y=l}return c},getVisiblePointsIds=function(g,c){if(null==g)return[];for(var k=g.series[0].name,d=[],f=g.series[0].data,l=0;l<f.length;l++){var p=f[l];p.visible&&d.push("null "===p.name?null:p.name)}f=[];for(l=0;l<d.length;l++){var p=d[l],m=new eventData.sampleSelectionCriteria;m.addCriteria(k,p);p=cohort.selectSamples(m.getCriteria());f=f.concat(p)}f=utils.eliminateDuplicates(f);f=f.concat(c);return f=utils.keepReplicates(f)},initializeChart=
function(g,c,k,d){d=cohort.getEvent(k).data.getValueCounts(d);d=countsToPieData(d);var f=pieChartOptionsTemplate;setupChartOptions(g,k,d,c,f);return new Highcharts.Chart(f)},initializeCharts=function(g){for(var c=cohort.selectSamples(selectionCriteria.getCriteria()),k={},d=0;d<g.length;d++){var f=g[d];k[f]=initializeChart("chart"+(d+1),f,f,c)}updateChartCrumbs(selectionCriteria);return k},setupDiv=function(g,c){utils.removeChildElems(g);g.appendChild(utils.createDivElement("chartCrumbs"));for(var k=
0;k<c.length;k++){var d=utils.createDivElement("chart"+(k+1)+"_container","pieChartContainer"),f=utils.createDivElement("chart"+(k+1),"pieChart");g.appendChild(d);d.appendChild(f)}};pie_charts=function(g,c){c=getConfiguration(c);cohort=c.eventAlbum;var k=cohort.getEventIdsByType()["clinical data"];setupDiv(g,k);chartObjMapping=initializeCharts(k)};
