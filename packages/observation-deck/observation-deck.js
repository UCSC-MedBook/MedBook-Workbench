(function(f,h){function d(f){f=f.split(/\s+/);for(var b=[],d=0,g;g=f[d];d++)g=g[0].toUpperCase(),b.push(g);return b}function g(b){return b.id&&f('label[for="'+b.id+'"]').val()||b.name}function b(d,k,n){n||(n=0);k.each(function(){var k=f(this),m=this,q=this.nodeName.toLowerCase(),p,r;"label"==q&&k.find("input, textarea, select").length&&(p=k.text(),k=k.children().first(),m=k.get(0),q=m.nodeName.toLowerCase());switch(q){case "menu":r={name:k.attr("label"),items:{}};n=b(r.items,k.children(),n);break;
case "a":case "button":r={name:k.text(),disabled:!!k.attr("disabled"),callback:function(){return function(){k.click()}}()};break;case "menuitem":case "command":switch(k.attr("type")){case h:case "command":case "menuitem":r={name:k.attr("label"),disabled:!!k.attr("disabled"),callback:function(){return function(){k.click()}}()};break;case "checkbox":r={type:"checkbox",disabled:!!k.attr("disabled"),name:k.attr("label"),selected:!!k.attr("checked")};break;case "radio":r={type:"radio",disabled:!!k.attr("disabled"),
name:k.attr("label"),radio:k.attr("radiogroup"),value:k.attr("id"),selected:!!k.attr("checked")};break;default:r=h}break;case "hr":r="-------";break;case "input":switch(k.attr("type")){case "text":r={type:"text",name:p||g(m),disabled:!!k.attr("disabled"),value:k.val()};break;case "checkbox":r={type:"checkbox",name:p||g(m),disabled:!!k.attr("disabled"),selected:!!k.attr("checked")};break;case "radio":r={type:"radio",name:p||g(m),disabled:!!k.attr("disabled"),radio:!!k.attr("name"),value:k.val(),selected:!!k.attr("checked")};
break;default:r=h}break;case "select":r={type:"select",name:p||g(m),disabled:!!k.attr("disabled"),selected:k.val(),options:{}};k.children().each(function(){r.options[this.value]=f(this).text()});break;case "textarea":r={type:"textarea",name:p||g(m),disabled:!!k.attr("disabled"),value:k.val()};break;case "label":break;default:r={type:"html",html:k.clone(!0)}}r&&(n++,d["key"+n]=r)});return n}f.support.htmlMenuitem="HTMLMenuItemElement"in window;f.support.htmlCommand="HTMLCommandElement"in window;f.support.eventSelectstart=
"onselectstart"in document.documentElement;if(!f.ui||!f.ui.widget){var k=f.cleanData;f.cleanData=function(b){for(var d=0,g;null!=(g=b[d]);d++)try{f(g).triggerHandler("remove")}catch(h){}k(b)}}var n=null,q=!1,m=f(window),p=0,r={},t={},x={},v={selector:null,appendTo:null,trigger:"right",autoHide:!1,delay:200,reposition:!0,determinePosition:function(b){if(f.ui&&f.ui.position)b.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none");
else{var d=this.offset();d.top+=this.outerHeight();d.left+=this.outerWidth()/2-b.outerWidth()/2;b.css(d)}},position:function(b,f,d){if(f||d){f="maintain"===f&&"maintain"===d?b.$menu.position():{top:d,left:f};d=m.scrollTop()+m.height();var k=m.scrollLeft()+m.width(),g=b.$menu.height(),h=b.$menu.width();f.top+g>d&&(f.top-=g);f.left+h>k&&(f.left-=h);b.$menu.css(f)}else b.determinePosition.call(this,b.$menu)},positionSubmenu:function(b){if(f.ui&&f.ui.position)b.css("display","block").position({my:"left top",
at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var d={top:0,left:this.outerWidth()};b.css(d)}},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{show:f.noop,hide:f.noop},callback:null,items:{}},w=null,z=null,N=null,P,Oa=function(b){for(var f=0;f=Math.max(f,parseInt(b.css("z-index"),10)||0),b=b.parent(),b&&b.length&&!(-1<"html body".indexOf(b.prop("nodeName").toLowerCase())););return f},B={abortevent:function(b){b.preventDefault();b.stopImmediatePropagation()},
contextmenu:function(b){var d=f(this);b.preventDefault();b.stopImmediatePropagation();if(!("right"!=b.data.trigger&&b.originalEvent||d.hasClass("context-menu-active")||d.hasClass("context-menu-disabled"))){n=d;if(b.data.build){var k=b.data.build(n,b);if(!1===k)return;b.data=f.extend(!0,{},v,b.data,k||{});if(!b.data.items||f.isEmptyObject(b.data.items))throw window.console&&(console.error||console.log)("No items specified to show in contextMenu"),Error("No Items specified");b.data.$trigger=n;U.create(b.data)}U.show.call(d,
b.data,b.pageX,b.pageY)}},click:function(b){b.preventDefault();b.stopImmediatePropagation();f(this).trigger(f.Event("contextmenu",{data:b.data,pageX:b.pageX,pageY:b.pageY}))},mousedown:function(b){var d=f(this);n&&n.length&&!n.is(d)&&n.data("contextMenu").$menu.trigger("contextmenu:hide");2==b.button&&(n=d.data("contextMenuActive",!0))},mouseup:function(b){var d=f(this);d.data("contextMenuActive")&&n&&n.length&&n.is(d)&&!d.hasClass("context-menu-disabled")&&(b.preventDefault(),b.stopImmediatePropagation(),
n=d,d.trigger(f.Event("contextmenu",{data:b.data,pageX:b.pageX,pageY:b.pageY})));d.removeData("contextMenuActive")},mouseenter:function(b){var d=f(this),k=f(b.relatedTarget),g=f(document);k.is(".context-menu-list")||k.closest(".context-menu-list").length||n&&n.length||(z=b.pageX,N=b.pageY,P=b.data,g.on("mousemove.contextMenuShow",B.mousemove),w=setTimeout(function(){w=null;g.off("mousemove.contextMenuShow");n=d;d.trigger(f.Event("contextmenu",{data:P,pageX:z,pageY:N}))},b.data.delay))},mousemove:function(b){z=
b.pageX;N=b.pageY},mouseleave:function(b){b=f(b.relatedTarget);if(!b.is(".context-menu-list")&&!b.closest(".context-menu-list").length){try{clearTimeout(w)}catch(d){}w=null}},layerClick:function(b){var d=f(this).data("contextMenuRoot"),k=b.button,g=b.pageX,h=b.pageY,n,q;b.preventDefault();b.stopImmediatePropagation();setTimeout(function(){var p,r="left"==d.trigger&&0===k||"right"==d.trigger&&2===k;document.elementFromPoint&&(d.$layer.hide(),n=document.elementFromPoint(g-m.scrollLeft(),h-m.scrollTop()),
d.$layer.show());if(d.reposition&&r)if(document.elementFromPoint){if(d.$trigger.is(n)||d.$trigger.has(n).length){d.position.call(d.$trigger,d,g,h);return}}else if(q=d.$trigger.offset(),p=f(window),q.top+=p.scrollTop(),q.top<=b.pageY&&(q.left+=p.scrollLeft(),q.left<=b.pageX&&(q.bottom=q.top+d.$trigger.outerHeight(),q.bottom>=b.pageY&&(q.right=q.left+d.$trigger.outerWidth(),q.right>=b.pageX)))){d.position.call(d.$trigger,d,g,h);return}if(n&&r)d.$trigger.one("contextmenu:hidden",function(){f(n).contextMenu({x:g,
y:h})});d.$menu.trigger("contextmenu:hide")},50)},keyStop:function(b,f){f.isInput||b.preventDefault();b.stopPropagation()},key:function(b){var f=n.data("contextMenu")||{};switch(b.keyCode){case 9:case 38:if(B.keyStop(b,f),f.isInput){if(9==b.keyCode&&b.shiftKey){b.preventDefault();f.$selected&&f.$selected.find("input, textarea, select").blur();f.$menu.trigger("prevcommand");return}if(38==b.keyCode&&"checkbox"==f.$selected.find("input, textarea, select").prop("type")){b.preventDefault();return}}else if(9!=
b.keyCode||b.shiftKey){f.$menu.trigger("prevcommand");return}case 40:B.keyStop(b,f);if(f.isInput){if(9==b.keyCode){b.preventDefault();f.$selected&&f.$selected.find("input, textarea, select").blur();f.$menu.trigger("nextcommand");return}if(40==b.keyCode&&"checkbox"==f.$selected.find("input, textarea, select").prop("type")){b.preventDefault();return}}else{f.$menu.trigger("nextcommand");return}break;case 37:B.keyStop(b,f);if(f.isInput||!f.$selected||!f.$selected.length)break;if(!f.$selected.parent().hasClass("context-menu-root")){b=
f.$selected.parent().parent();f.$selected.trigger("contextmenu:blur");f.$selected=b;return}break;case 39:B.keyStop(b,f);if(f.isInput||!f.$selected||!f.$selected.length)break;var d=f.$selected.data("contextMenu")||{};if(d.$menu&&f.$selected.hasClass("context-menu-submenu")){f.$selected=null;d.$selected=null;d.$menu.trigger("nextcommand");return}break;case 35:case 36:f.$selected&&f.$selected.find("input, textarea, select").length||((f.$selected&&f.$selected.parent()||f.$menu).children(":not(.disabled, .not-selectable)")[36==
b.keyCode?"first":"last"]().trigger("contextmenu:focus"),b.preventDefault());return;case 13:B.keyStop(b,f);if(f.isInput){if(f.$selected&&!f.$selected.is("textarea, select")){b.preventDefault();return}break}f.$selected&&f.$selected.trigger("mouseup");return;case 32:case 33:case 34:B.keyStop(b,f);return;case 27:B.keyStop(b,f);f.$menu.trigger("contextmenu:hide");return;default:if(d=String.fromCharCode(b.keyCode).toUpperCase(),f.accesskeys[d]){f.accesskeys[d].$node.trigger(f.accesskeys[d].$menu?"contextmenu:focus":
"mouseup");return}}b.stopPropagation();f.$selected&&f.$selected.trigger(b)},prevItem:function(b){b.stopPropagation();var d=f(this).data("contextMenu")||{};if(d.$selected){var k=d.$selected,d=d.$selected.parent().data("contextMenu")||{};d.$selected=k}for(var k=d.$menu.children(),g=d.$selected&&d.$selected.prev().length?d.$selected.prev():k.last(),h=g;g.hasClass("disabled")||g.hasClass("not-selectable");)if(g=g.prev().length?g.prev():k.last(),g.is(h))return;d.$selected&&B.itemMouseleave.call(d.$selected.get(0),
b);B.itemMouseenter.call(g.get(0),b);b=g.find("input, textarea, select");b.length&&b.focus()},nextItem:function(b){b.stopPropagation();var d=f(this).data("contextMenu")||{};if(d.$selected){var k=d.$selected,d=d.$selected.parent().data("contextMenu")||{};d.$selected=k}for(var k=d.$menu.children(),g=d.$selected&&d.$selected.next().length?d.$selected.next():k.first(),h=g;g.hasClass("disabled")||g.hasClass("not-selectable");)if(g=g.next().length?g.next():k.first(),g.is(h))return;d.$selected&&B.itemMouseleave.call(d.$selected.get(0),
b);B.itemMouseenter.call(g.get(0),b);b=g.find("input, textarea, select");b.length&&b.focus()},focusInput:function(b){b=f(this).closest(".context-menu-item");var d=b.data(),g=d.contextMenu,d=d.contextMenuRoot;d.$selected=g.$selected=b;d.isInput=g.isInput=!0},blurInput:function(b){b=f(this).closest(".context-menu-item").data();b.contextMenuRoot.isInput=b.contextMenu.isInput=!1},menuMouseenter:function(b){f(this).data().contextMenuRoot.hovering=!0},menuMouseleave:function(b){var d=f(this).data().contextMenuRoot;
d.$layer&&d.$layer.is(b.relatedTarget)&&(d.hovering=!1)},itemMouseenter:function(b){var d=f(this),g=d.data(),k=g.contextMenu,g=g.contextMenuRoot;g.hovering=!0;b&&g.$layer&&g.$layer.is(b.relatedTarget)&&(b.preventDefault(),b.stopImmediatePropagation());(k.$menu?k:g).$menu.children(".hover").trigger("contextmenu:blur");d.hasClass("disabled")||d.hasClass("not-selectable")?k.$selected=null:d.trigger("contextmenu:focus")},itemMouseleave:function(b){var d=f(this),g=d.data(),k=g.contextMenu,g=g.contextMenuRoot;
g!==k&&g.$layer&&g.$layer.is(b.relatedTarget)?(g.$selected&&g.$selected.trigger("contextmenu:blur"),b.preventDefault(),b.stopImmediatePropagation(),g.$selected=k.$selected=k.$node):d.trigger("contextmenu:blur")},itemClick:function(b){var d=f(this),g=d.data(),k=g.contextMenuRoot,h=g.contextMenuKey;if(g.contextMenu.items[h]&&!d.is(".disabled, .context-menu-submenu, .context-menu-separator, .not-selectable")){b.preventDefault();b.stopImmediatePropagation();if(f.isFunction(k.callbacks[h])&&Object.prototype.hasOwnProperty.call(k.callbacks,
h))b=k.callbacks[h];else if(f.isFunction(k.callback))b=k.callback;else return;!1!==b.call(k.$trigger,h,k)?k.$menu.trigger("contextmenu:hide"):k.$menu.parent().length&&U.update.call(k.$trigger,k)}},inputClick:function(b){b.stopImmediatePropagation()},hideMenu:function(b,d){var g=f(this).data("contextMenuRoot");U.hide.call(g.$trigger,g,d&&d.force)},focusItem:function(b){b.stopPropagation();b=f(this);var d=b.data(),g=d.contextMenu,d=d.contextMenuRoot;b.addClass("hover").siblings(".hover").trigger("contextmenu:blur");
g.$selected=d.$selected=b;g.$node&&d.positionSubmenu.call(g.$node,g.$menu)},blurItem:function(b){b.stopPropagation();b=f(this);var d=b.data().contextMenu;b.removeClass("hover");d.$selected=null}},U={show:function(b,d,g){var k=f(this),h={};f("#context-menu-layer").trigger("mousedown");b.$trigger=k;if(!1===b.events.show.call(k,b))n=null;else if(U.update.call(k,b),b.position.call(k,b,d,g),b.zIndex&&(h.zIndex=Oa(k)+b.zIndex),U.layer.call(b.$menu,b,h.zIndex),b.$menu.find("ul").css("zIndex",h.zIndex+1),
b.$menu.css(h)[b.animation.show](b.animation.duration,function(){k.trigger("contextmenu:visible")}),k.data("contextMenu",b).addClass("context-menu-active"),f(document).off("keydown.contextMenu").on("keydown.contextMenu",B.key),b.autoHide)f(document).on("mousemove.contextMenuAutoHide",function(f){var d=k.offset();d.right=d.left+k.outerWidth();d.bottom=d.top+k.outerHeight();!b.$layer||b.hovering||f.pageX>=d.left&&f.pageX<=d.right&&f.pageY>=d.top&&f.pageY<=d.bottom||b.$menu.trigger("contextmenu:hide")})},
hide:function(b,d){var g=f(this);b||(b=g.data("contextMenu")||{});if(d||!b.events||!1!==b.events.hide.call(g,b)){g.removeData("contextMenu").removeClass("context-menu-active");if(b.$layer){setTimeout(function(b){return function(){b.remove()}}(b.$layer),10);try{delete b.$layer}catch(k){b.$layer=null}}n=null;b.$menu.find(".hover").trigger("contextmenu:blur");b.$selected=null;f(document).off(".contextMenuAutoHide").off("keydown.contextMenu");b.$menu&&b.$menu[b.animation.hide](b.animation.duration,function(){b.build&&
(b.$menu.remove(),f.each(b,function(d,f){switch(d){case "ns":case "selector":case "build":case "trigger":return!0;default:b[d]=h;try{delete b[d]}catch(g){}return!0}}));setTimeout(function(){g.trigger("contextmenu:hidden")},10)})}},create:function(b,g){g===h&&(g=b);b.$menu=f('<ul class="context-menu-list"></ul>').addClass(b.className||"").data({contextMenu:b,contextMenuRoot:g});f.each(["callbacks","commands","inputs"],function(d,f){b[f]={};g[f]||(g[f]={})});g.accesskeys||(g.accesskeys={});f.each(b.items,
function(k,h){var n=f('<li class="context-menu-item"></li>').addClass(h.className||""),m=null,q=null;n.on("click",f.noop);h.$node=n.data({contextMenu:b,contextMenuRoot:g,contextMenuKey:k});if(h.accesskey)for(var p=d(h.accesskey),r=0,t;t=p[r];r++)if(!g.accesskeys[t]){g.accesskeys[t]=h;h._name=h.name.replace(new RegExp("("+t+")","i"),'<span class="context-menu-accesskey">$1</span>');break}if("string"==typeof h)n.addClass("context-menu-separator not-selectable");else if(h.type&&x[h.type])x[h.type].call(n,
h,b,g),f.each([b,g],function(b,d){d.commands[k]=h;f.isFunction(h.callback)&&(d.callbacks[k]=h.callback)});else{"html"==h.type?n.addClass("context-menu-html not-selectable"):h.type?(m=f("<label></label>").appendTo(n),f("<span></span>").html(h._name||h.name).appendTo(m),n.addClass("context-menu-input"),b.hasTypes=!0,f.each([b,g],function(b,d){d.commands[k]=h;d.inputs[k]=h})):h.items&&(h.type="sub");switch(h.type){case "text":q=f('<input type="text" value="1" name="" value="">').attr("name","context-menu-input-"+
k).val(h.value||"").appendTo(m);break;case "textarea":q=f('<textarea name=""></textarea>').attr("name","context-menu-input-"+k).val(h.value||"").appendTo(m);h.height&&q.height(h.height);break;case "checkbox":q=f('<input type="checkbox" value="1" name="" value="">').attr("name","context-menu-input-"+k).val(h.value||"").prop("checked",!!h.selected).prependTo(m);break;case "radio":q=f('<input type="radio" value="1" name="" value="">').attr("name","context-menu-input-"+h.radio).val(h.value||"").prop("checked",
!!h.selected).prependTo(m);break;case "select":q=f('<select name="">').attr("name","context-menu-input-"+k).appendTo(m);h.options&&(f.each(h.options,function(b,d){f("<option></option>").val(b).text(d).appendTo(q)}),q.val(h.selected));break;case "sub":f("<span></span>").html(h._name||h.name).appendTo(n);h.appendTo=h.$node;U.create(h,g);n.data("contextMenu",h).addClass("context-menu-submenu");h.callback=null;break;case "html":f(h.html).appendTo(n);break;default:f.each([b,g],function(b,d){d.commands[k]=
h;f.isFunction(h.callback)&&(d.callbacks[k]=h.callback)}),f("<span></span>").html(h._name||h.name||"").appendTo(n)}if(h.type&&"sub"!=h.type&&"html"!=h.type&&(q.on("focus",B.focusInput).on("blur",B.blurInput),h.events))q.on(h.events,b);h.icon&&n.addClass("icon icon-"+h.icon)}h.$input=q;h.$label=m;n.appendTo(b.$menu);if(!b.hasTypes&&f.support.eventSelectstart)n.on("selectstart.disableTextSelect",B.abortevent)});b.$node||b.$menu.css("display","none").addClass("context-menu-root");b.$menu.appendTo(b.appendTo||
document.body)},resize:function(b,d){b.css({position:"absolute",display:"block"});b.data("width",Math.ceil(b.width())+1);b.css({position:"static",minWidth:"0px",maxWidth:"100000px"});b.find("> li > ul").each(function(){U.resize(f(this),!0)});d||b.find("ul").andSelf().css({position:"",display:"",minWidth:"",maxWidth:""}).width(function(){return f(this).data("width")})},update:function(b,d){var g=this;d===h&&(d=b,U.resize(b.$menu));b.$menu.children().each(function(){var k=f(this),h=k.data("contextMenuKey"),
n=b.items[h],h=f.isFunction(n.disabled)&&n.disabled.call(g,h,d)||!0===n.disabled;k[h?"addClass":"removeClass"]("disabled");if(n.type)switch(k.find("input, select, textarea").prop("disabled",h),n.type){case "text":case "textarea":n.$input.val(n.value||"");break;case "checkbox":case "radio":n.$input.val(n.value||"").prop("checked",!!n.selected);break;case "select":n.$input.val(n.selected||"")}n.$menu&&U.update.call(g,n,d)})},layer:function(b,d){var g=b.$layer=f('<div id="context-menu-layer" style="position:fixed; z-index:'+
d+'; top:0; left:0; opacity: 0; filter: alpha(opacity=0); background-color: #000;"></div>').css({height:m.height(),width:m.width(),display:"block"}).data("contextMenuRoot",b).insertBefore(this).on("contextmenu",B.abortevent).on("mousedown",B.layerClick);f.support.fixedPosition||g.css({position:"absolute",height:f(document).height()});return g}};f.fn.contextMenu=function(b){b===h?this.first().trigger("contextmenu"):b.x&&b.y?this.first().trigger(f.Event("contextmenu",{pageX:b.x,pageY:b.y})):"hide"===
b?(b=this.data("contextMenu").$menu)&&b.trigger("contextmenu:hide"):"destroy"===b?f.contextMenu("destroy",{context:this}):f.isPlainObject(b)?(b.context=this,f.contextMenu("create",b)):b?this.removeClass("context-menu-disabled"):b||this.addClass("context-menu-disabled");return this};f.contextMenu=function(b,d){"string"!=typeof b&&(d=b,b="create");"string"==typeof d?d={selector:d}:d===h&&(d={});var g=f.extend(!0,{},v,d||{}),k=f(document),n=k,m=!1;g.context&&g.context.length?(n=f(g.context).first(),
g.context=n.get(0),m=g.context!==document):g.context=document;switch(b){case "create":if(!g.selector)throw Error("No selector specified");if(g.selector.match(/.context-menu-(list|item|input)($|\s)/))throw Error('Cannot bind to selector "'+g.selector+'" as it contains a reserved className');if(!g.build&&(!g.items||f.isEmptyObject(g.items)))throw Error("No Items specified");p++;g.ns=".contextMenu"+p;m||(r[g.selector]=g.ns);t[g.ns]=g;g.trigger||(g.trigger="right");q||(k.on({"contextmenu:hide.contextMenu":B.hideMenu,
"prevcommand.contextMenu":B.prevItem,"nextcommand.contextMenu":B.nextItem,"contextmenu.contextMenu":B.abortevent,"mouseenter.contextMenu":B.menuMouseenter,"mouseleave.contextMenu":B.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",B.inputClick).on({"mouseup.contextMenu":B.itemClick,"contextmenu:focus.contextMenu":B.focusItem,"contextmenu:blur.contextMenu":B.blurItem,"contextmenu.contextMenu":B.abortevent,"mouseenter.contextMenu":B.itemMouseenter,"mouseleave.contextMenu":B.itemMouseleave},
".context-menu-item"),q=!0);n.on("contextmenu"+g.ns,g.selector,g,B.contextmenu);if(m)n.on("remove"+g.ns,function(){f(this).contextMenu("destroy")});switch(g.trigger){case "hover":n.on("mouseenter"+g.ns,g.selector,g,B.mouseenter).on("mouseleave"+g.ns,g.selector,g,B.mouseleave);break;case "left":n.on("click"+g.ns,g.selector,g,B.click)}g.build||U.create(g);break;case "destroy":var w;if(m){var x=g.context;f.each(t,function(b,d){if(d.context!==x)return!0;w=f(".context-menu-list").filter(":visible");w.length&&
w.data().contextMenuRoot.$trigger.is(f(d.context).find(d.selector))&&w.trigger("contextmenu:hide",{force:!0});try{t[d.ns].$menu&&t[d.ns].$menu.remove(),delete t[d.ns]}catch(g){t[d.ns]=null}f(d.context).off(d.ns);return!0})}else if(!g.selector)k.off(".contextMenu .contextMenuAutoHide"),f.each(t,function(b,d){f(d.context).off(d.ns)}),r={},t={},p=0,q=!1,f("#context-menu-layer, .context-menu-list").remove();else if(r[g.selector]){w=f(".context-menu-list").filter(":visible");w.length&&w.data().contextMenuRoot.$trigger.is(g.selector)&&
w.trigger("contextmenu:hide",{force:!0});try{t[r[g.selector]].$menu&&t[r[g.selector]].$menu.remove(),delete t[r[g.selector]]}catch(z){t[r[g.selector]]=null}k.off(r[g.selector])}break;case "html5":(!f.support.htmlCommand&&!f.support.htmlMenuitem||"boolean"==typeof d&&d)&&f('menu[type="context"]').each(function(){this.id&&f.contextMenu({selector:"[contextmenu="+this.id+"]",items:f.contextMenu.fromMenu(this)})}).css("display","none");break;default:throw Error('Unknown operation "'+b+'"');}return this};
f.contextMenu.setInputValues=function(b,d){d===h&&(d={});f.each(b.inputs,function(b,f){switch(f.type){case "text":case "textarea":f.value=d[b]||"";break;case "checkbox":f.selected=d[b]?!0:!1;break;case "radio":f.selected=(d[f.radio]||"")==f.value?!0:!1;break;case "select":f.selected=d[b]||""}})};f.contextMenu.getInputValues=function(b,d){d===h&&(d={});f.each(b.inputs,function(b,f){switch(f.type){case "text":case "textarea":case "select":d[b]=f.$input.val();break;case "checkbox":d[b]=f.$input.prop("checked");
break;case "radio":f.$input.prop("checked")&&(d[f.radio]=f.value)}});return d};f.contextMenu.fromMenu=function(d){d=f(d);var g={};b(g,d.children());return g};f.contextMenu.defaults=v;f.contextMenu.types=x;f.contextMenu.handle=B;f.contextMenu.op=U;f.contextMenu.menus=t})(jQuery);!function(){function f(a,e){return e>a?-1:a>e?1:a>=e?0:0/0}function h(a){return null!=a&&!isNaN(a)}function d(a){return{left:function(e,l,y,b){3>arguments.length&&(y=0);for(4>arguments.length&&(b=e.length);b>y;){var u=y+b>>>1;0>a(e[u],l)?y=u+1:b=u}return y},right:function(e,l,y,b){3>arguments.length&&(y=0);for(4>arguments.length&&(b=e.length);b>y;){var u=y+b>>>1;0<a(e[u],l)?b=u:y=u+1}return y}}}function g(a){return a.length}function b(a,e){try{for(var l in e)Object.defineProperty(a.prototype,l,{value:e[l],
enumerable:!1})}catch(y){a.prototype=e}}function k(){}function n(a){return Pa+a in this}function q(){var a=[];return this.forEach(function(e){a.push(e)}),a}function m(){var a=0,e;for(e in this)e.charCodeAt(0)===Db&&++a;return a}function p(){for(var a in this)if(a.charCodeAt(0)===Db)return!1;return!0}function r(){}function t(a,e,l){return function(){var y=l.apply(e,arguments);return y===e?a:y}}function x(a,e){if(e in a)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var l=0,y=Sd.length;y>l;++l){var b=
Sd[l]+e;if(b in a)return b}}function v(){}function w(){}function z(a){function e(){for(var e,y=l,b=-1,d=y.length;++b<d;)(e=y[b].on)&&e.apply(this,arguments);return a}var l=[],y=new k;return e.on=function(e,b){var d,f=y.get(e);return 2>arguments.length?f&&f.on:(f&&(f.on=null,l=l.slice(0,d=l.indexOf(f)).concat(l.slice(d+1)),y.remove(e)),b&&l.push(y.set(e,{on:b})),a)},e}function N(){s.event.preventDefault()}function P(){for(var a,e=s.event;a=e.sourceEvent;)e=a;return e}function Oa(a){for(var e=new w,
l=0,y=arguments.length;++l<y;)e[arguments[l]]=z(e);return e.of=function(l,y){return function(b){try{var d=b.sourceEvent=s.event;b.target=a;s.event=b;e[b.type].apply(l,y)}finally{s.event=d}}},e}function B(a){return Eb(a,L),a}function U(a){return"function"==typeof a?a:function(){return Cc(a,this)}}function Jd(a){return"function"==typeof a?a:function(){return Dc(a,this)}}function Kd(a,e){function l(){this.removeAttribute(a)}function y(){this.removeAttributeNS(a.space,a.local)}function b(){this.setAttribute(a,
e)}function u(){this.setAttributeNS(a.space,a.local,e)}function d(){var l=e.apply(this,arguments);null==l?this.removeAttribute(a):this.setAttribute(a,l)}function f(){var l=e.apply(this,arguments);null==l?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,l)}return a=s.ns.qualify(a),null==e?a.local?y:l:"function"==typeof e?a.local?f:d:a.local?u:b}function Ld(a){return a.trim().replace(/\s+/g," ")}function Md(a){return new RegExp("(?:^|\\s+)"+s.requote(a)+"(?:\\s+|$)","g")}
function Nd(a,e){function l(){for(var l=-1;++l<b;)a[l](this,e)}function y(){for(var l=-1,y=e.apply(this,arguments);++l<b;)a[l](this,y)}a=(a+"").trim().split(/^|\s+/).map(rg);var b=a.length;return"function"==typeof e?y:l}function rg(a){var e=Md(a);return function(l,y){if(b=l.classList)return y?b.add(a):b.remove(a);var b=l.getAttribute("class")||"";y?(e.lastIndex=0,e.test(b)||l.setAttribute("class",Ld(b+" "+a))):l.setAttribute("class",Ld(b.replace(e," ")))}}function Od(a,e,l){function y(){this.style.removeProperty(a)}
function b(){this.style.setProperty(a,e,l)}function u(){var y=e.apply(this,arguments);null==y?this.style.removeProperty(a):this.style.setProperty(a,y,l)}return null==e?y:"function"==typeof e?u:b}function Pd(a,e){function l(){delete this[a]}function y(){this[a]=e}function b(){var l=e.apply(this,arguments);null==l?delete this[a]:this[a]=l}return null==e?l:"function"==typeof e?b:y}function Qd(a){return"function"==typeof a?a:(a=s.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,
a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,a)}}function Rd(a){return function(){return Ud(this,a)}}function sg(a){return arguments.length||(a=f),function(e,l){return e&&l?a(e.__data__,l.__data__):!e-!l}}function va(a,e){for(var l=0,y=a.length;y>l;l++)for(var b,u=a[l],d=0,f=u.length;f>d;d++)(b=u[d])&&e(b,d,l);return a}function Vd(a){return Eb(a,wa),a}function tg(a){var e,l;return function(y,b,u){y=a[u].update;var d=y.length;u!=l&&(l=u,e=0);for(b>=e&&(e=b+1);!(b=
y[e])&&++e<d;);return b}}function Fb(){var a=this.__transition__;a&&++a.active}function Wd(a,e,l){function y(){var e=this[d];e&&(this.removeEventListener(a,e,e.$),delete this[d])}function b(){var u=g(e,Fa(arguments));y.call(this);this.addEventListener(a,this[d]=u,u.$=l);u._=e}function u(){var e,l=new RegExp("^__on([^.]+)"+s.requote(a)+"$"),y;for(y in this)if(e=y.match(l)){var b=this[y];this.removeEventListener(e[1],b,b.$);delete this[y]}}var d="__on"+a,f=a.indexOf("."),g=Xd;0<f&&(a=a.slice(0,f));
var k=Ec.get(a);return k&&(a=k,g=ug),f?e?b:y:e?v:u}function Xd(a,e){return function(l){var y=s.event;s.event=l;e[0]=this.__data__;try{a.apply(this,e)}finally{s.event=y}}}function ug(a,e){var l=Xd(a,e);return function(a){var e=a.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||l.call(this,a)}}function Gb(){var a=".dragsuppress-"+ ++vg,e="click"+a,l=s.select(aa).on("touchmove"+a,N).on("dragstart"+a,N).on("selectstart"+a,N);if(ob){var y=xa.style,b=y[ob];y[ob]="none"}return function(u){function d(){l.on(e,
null)}l.on(a,null);ob&&(y[ob]=b);u&&(l.on(e,function(){N();d()},!0),setTimeout(d,0))}}function Fc(a,e){e.changedTouches&&(e=e.changedTouches[0]);var l=a.ownerSVGElement||a;if(l.createSVGPoint){var y=l.createSVGPoint();if(0>Gc&&(aa.scrollX||aa.scrollY)){var l=s.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),b=l[0][0].getScreenCTM();Gc=!(b.f||b.e);l.remove()}return Gc?(y.x=e.pageX,y.y=e.pageY):(y.x=e.clientX,y.y=e.clientY),y=y.matrixTransform(a.getScreenCTM().inverse()),
[y.x,y.y]}l=a.getBoundingClientRect();return[e.clientX-l.left-a.clientLeft,e.clientY-l.top-a.clientTop]}function wg(){return s.event.changedTouches[0].identifier}function xg(){return s.event.target}function yg(){return aa}function Hc(a,e,l){return(e[0]-a[0])*(l[1]-a[1])-(e[1]-a[1])*(l[0]-a[0])}function Yd(a){return 1<a?0:-1>a?F:Math.acos(a)}function $a(a){return 1<a?Y:-1>a?-Y:Math.asin(a)}function Zd(a){return((a=Math.exp(a))+1/a)/2}function $d(a){return(a=Math.sin(a/2))*a}function Qa(){}function ra(a,
e,l){return this instanceof ra?(this.h=+a,this.s=+e,void(this.l=+l)):2>arguments.length?a instanceof ra?new ra(a.h,a.s,a.l):ae(""+a,be,ra):new ra(a,e,l)}function Ic(a,e,l){function b(a){return 360<a?a-=360:0>a&&(a+=360),60>a?d+(u-d)*a/60:180>a?u:240>a?d+(u-d)*(240-a)/60:d}var d,u;return a=isNaN(a)?0:0>(a%=360)?a+360:a,e=isNaN(e)?0:0>e?0:1<e?1:e,l=0>l?0:1<l?1:l,u=.5>=l?l*(1+e):l+e-l*e,d=2*l-u,new ba(Math.round(255*b(a+120)),Math.round(255*b(a)),Math.round(255*b(a-120)))}function la(a,e,l){return this instanceof
la?(this.h=+a,this.c=+e,void(this.l=+l)):2>arguments.length?a instanceof la?new la(a.h,a.c,a.l):a instanceof ma?ce(a.l,a.a,a.b):ce((a=de((a=s.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new la(a,e,l)}function Jc(a,e,l){return isNaN(a)&&(a=0),isNaN(e)&&(e=0),new ma(l,Math.cos(a*=E)*e,Math.sin(a)*e)}function ma(a,e,l){return this instanceof ma?(this.l=+a,this.a=+e,void(this.b=+l)):2>arguments.length?a instanceof ma?new ma(a.l,a.a,a.b):a instanceof la?Jc(a.l,a.c,a.h):de((a=ba(a)).r,a.g,a.b):new ma(a,e,l)}function ee(a,
e,l){a=(a+16)/116;e=a+e/500;l=a-l/200;return e=Kc(e)*fe,a=Kc(a)*ge,l=Kc(l)*he,new ba(Lc(3.2404542*e-1.5371385*a-.4985314*l),Lc(-.969266*e+1.8760108*a+.041556*l),Lc(.0556434*e-.2040259*a+1.0572252*l))}function ce(a,e,l){return 0<a?new la(Math.atan2(l,e)*O,Math.sqrt(e*e+l*l),a):new la(0/0,0/0,a)}function Kc(a){return.206893034<a?a*a*a:(a-4/29)/7.787037}function Mc(a){return.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function Lc(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}
function ba(a,e,l){return this instanceof ba?(this.r=~~a,this.g=~~e,void(this.b=~~l)):2>arguments.length?a instanceof ba?new ba(a.r,a.g,a.b):ae(""+a,ba,Ic):new ba(a,e,l)}function Hb(a){return new ba(a>>16,255&a>>8,255&a)+""}function ab(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function ae(a,e,l){var b,d,u,f=0,g=0,k=0;if(b=/([a-z]+)\((.*)\)/i.exec(a))switch(d=b[2].split(","),b[1]){case "hsl":return l(parseFloat(d[0]),parseFloat(d[1])/100,parseFloat(d[2])/100);case "rgb":return e(Nc(d[0]),
Nc(d[1]),Nc(d[2]))}return(u=Ib.get(a))?e(u.r,u.g,u.b):(null==a||"#"!==a.charAt(0)||isNaN(u=parseInt(a.slice(1),16))||(4===a.length?(f=(3840&u)>>4,f|=f>>4,g=240&u,g|=g>>4,k=15&u,k|=k<<4):7===a.length&&(f=(16711680&u)>>16,g=(65280&u)>>8,k=255&u)),e(f,g,k))}function be(a,e,l){var b,d,u=Math.min(a/=255,e/=255,l/=255),f=Math.max(a,e,l),g=f-u,k=(f+u)/2;return g?(d=.5>k?g/(f+u):g/(2-f-u),b=a==f?(e-l)/g+(l>e?6:0):e==f?(l-a)/g+2:(a-e)/g+4,b*=60):(b=0/0,d=0<k&&1>k?0:b),new ra(b,d,k)}function de(a,e,l){a=Oc(a);
e=Oc(e);l=Oc(l);var b=Mc((.4124564*a+.3575761*e+.1804375*l)/fe),d=Mc((.2126729*a+.7151522*e+.072175*l)/ge);a=Mc((.0193339*a+.119192*e+.9503041*l)/he);return ma(116*d-16,500*(b-d),200*(d-a))}function Oc(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Nc(a){var e=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*e):e}function K(a){return"function"==typeof a?a:function(){return a}}function X(a){return a}function Pc(a){return function(e,l,b){return 2===arguments.length&&
"function"==typeof l&&(b=l,l=null),Jb(e,l,a,b)}}function Jb(a,e,l,b){function d(){var a,e=k.status,b;if(b=!e)b=(b=k.responseType)&&"text"!==b?k.response:k.responseText;if(b||200<=e&&300>e||304===e){try{a=l.call(u,k)}catch(y){return f.error.call(u,y),void 0}f.load.call(u,a)}else f.error.call(u,k)}var u={},f=s.dispatch("beforesend","progress","load","error"),g={},k=new XMLHttpRequest,M=null;return!aa.XDomainRequest||"withCredentials"in k||!/^(http(s)?:)?\/\//.test(a)||(k=new XDomainRequest),"onload"in
k?k.onload=k.onerror=d:k.onreadystatechange=function(){3<k.readyState&&d()},k.onprogress=function(a){var e=s.event;s.event=a;try{f.progress.call(u,k)}finally{s.event=e}},u.header=function(a,e){return a=(a+"").toLowerCase(),2>arguments.length?g[a]:(null==e?delete g[a]:g[a]=e+"",u)},u.mimeType=function(a){return arguments.length?(e=null==a?null:a+"",u):e},u.responseType=function(a){return arguments.length?(M=a,u):M},u.response=function(a){return l=a,u},["get","post"].forEach(function(a){u[a]=function(){return u.send.apply(u,
[a].concat(Fa(arguments)))}}),u.send=function(l,b,y){if(2===arguments.length&&"function"==typeof b&&(y=b,b=null),k.open(l,a,!0),null==e||"accept"in g||(g.accept=e+",*/*"),k.setRequestHeader)for(var d in g)k.setRequestHeader(d,g[d]);return null!=e&&k.overrideMimeType&&k.overrideMimeType(e),null!=M&&(k.responseType=M),null!=y&&u.on("error",y).on("load",function(a){y(null,a)}),f.beforesend.call(u,k),k.send(null==b?null:b),u},u.abort=function(){return k.abort(),u},s.rebind(u,f,"on"),null==b?u:u.get(zg(b))}
function zg(a){return 1===a.length?function(e,l){a(null==e?l:null)}:a}function Qc(){var a=ie(),a=je()-a;24<a?(isFinite(a)&&(clearTimeout(Kb),Kb=setTimeout(Qc,a)),Lb=0):(Lb=1,ke(Qc))}function ie(){var a=Date.now();for(ya=Mb;ya;)a>=ya.t&&(ya.f=ya.c(a-ya.t)),ya=ya.n;return a}function je(){for(var a,e=Mb,l=1/0;e;)e.f?e=a?a.n=e.n:Mb=e.n:(e.t<l&&(l=e.t),e=(a=e).n);return Nb=a,l}function Rc(a,e){return e-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Ag(a){var e=a.decimal,l=a.thousands,b=a.grouping,d=a.currency,
u=b?function(a){for(var e=a.length,u=[],d=0,D=b[0];0<D&&0<e;)u.push(a.substring(e-=D,e+D)),D=b[d=(d+1)%b.length];return u.reverse().join(l)}:X;return function(a){a=le.exec(a);var l=a[1]||" ",b=a[2]||">",y=a[3]||"",f=a[4]||"",g=a[5],k=+a[6],h=a[7],n=a[8],m=a[9],q=1,p="",r="",J=!1;switch(n&&(n=+n.substring(1)),(g||"0"===l&&"="===b)&&(g=l="0",b="=",h&&(k-=Math.floor((k-1)/4))),m){case "n":h=!0;m="g";break;case "%":q=100;r="%";m="f";break;case "p":q=100;r="%";m="r";break;case "b":case "o":case "x":case "X":"#"===
f&&(p="0"+m.toLowerCase());case "c":case "d":J=!0;n=0;break;case "s":q=-1,m="r"}"$"===f&&(p=d[0],r=d[1]);"r"!=m||n||(m="g");null!=n&&("g"==m?n=Math.max(1,Math.min(21,n)):("e"==m||"f"==m)&&(n=Math.max(0,Math.min(20,n))));var m=Bg.get(m)||Cg,t=g&&h;return function(a){var d=r;if(J&&a%1)return"";var D=0>a||0===a&&0>1/a?(a=-a,"-"):y;0>q?(d=s.formatPrefix(a,n),a=d.scale(a),d=d.symbol+r):a*=q;a=m(a,n);var f=a.lastIndexOf("."),S=0>f?a:a.substring(0,f),f=0>f?"":e+a.substring(f+1);!g&&h&&(S=u(S));var T=p.length+
S.length+f.length+(t?0:D.length),w=k>T?Array(T=k-T+1).join(l):"";return t&&(S=u(w+S)),D+=p,a=S+f,("<"===b?D+a+w:">"===b?w+D+a:"^"===b?w.substring(0,T>>=1)+D+a+w.substring(T):D+(t?a:w+a))+d}}}function Cg(a){return a+""}function Aa(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Ra(a,e,l){function b(e){var l=a(e),y=u(l,1);return y-e>e-l?l:y}function d(l){return e(l=a(new Z(l-1)),1),l}function u(a,l){return e(a=new Z(+a),l),a}function f(a,b,y){a=d(a);var u=
[];if(1<y)for(;b>a;)l(a)%y||u.push(new Date(+a)),e(a,1);else for(;b>a;)u.push(new Date(+a)),e(a,1);return u}a.floor=a;a.round=b;a.ceil=d;a.offset=u;a.range=f;var g=a.utc=Pb(a);return g.floor=g,g.round=Pb(b),g.ceil=Pb(d),g.offset=Pb(u),g.range=function(a,e,l){try{Z=Aa;var b=new Aa;return b._=a,f(b,e,l)}finally{Z=Date}},a}function Pb(a){return function(e,l){try{Z=Aa;var b=new Aa;return b._=e,a(b,l)._}finally{Z=Date}}}function Eg(a){function e(a){function e(l){for(var y,u,d,f=[],D=-1,g=0;++D<b;)37===
a.charCodeAt(D)&&(f.push(a.slice(g,D)),null!=(u=me[y=a.charAt(++D)])&&(y=a.charAt(++D)),(d=w[y])&&(y=d(l,null==u?"e"===y?" ":"0":u)),f.push(y),g=D+1);return f.push(a.slice(g,D)),f.join("")}var b=a.length;return e.parse=function(e){var b={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(l(b,a,e,0)!=e.length)return null;"p"in b&&(b.H=b.H%12+12*b.p);e=null!=b.Z&&Z!==Aa;var y=new (e?Aa:Z);return"j"in b?y.setFullYear(b.y,0,b.j):"w"in b&&("W"in b||"U"in b)?(y.setFullYear(b.y,0,1),y.setFullYear(b.y,0,"W"in b?(b.w+
6)%7+7*b.W-(y.getDay()+5)%7:b.w+7*b.U-(y.getDay()+6)%7)):y.setFullYear(b.y,b.m,b.d),y.setHours(b.H+(0|b.Z/100),b.M+b.Z%100,b.S,b.L),e?y._:y},e.toString=function(){return a},e}function l(a,e,l,b){for(var y,u,d,D=0,f=e.length,g=l.length;f>D;){if(b>=g)return-1;if(y=e.charCodeAt(D++),37===y){if(d=e.charAt(D++),u=v[d in me?e.charAt(D++):d],!u||0>(b=u(a,l,b)))return-1}else if(y!=l.charCodeAt(b++))return-1}return b}var b=a.dateTime,d=a.date,u=a.time,f=a.periods,g=a.days,k=a.shortDays,M=a.months,h=a.shortMonths;
e.utc=function(a){function l(a){try{Z=Aa;var e=new Z;return e._=a,b(e)}finally{Z=Date}}var b=e(a);return l.parse=function(a){try{Z=Aa;var e=b.parse(a);return e&&e._}finally{Z=Date}},l.toString=b.toString,l};e.multi=e.utc.multi=Fg;var n=s.map(),m=Qb(g),q=Rb(g),p=Qb(k),r=Rb(k),t=Qb(M),na=Rb(M),I=Qb(h),J=Rb(h);f.forEach(function(a,e){n.set(a.toLowerCase(),e)});var w={a:function(a){return k[a.getDay()]},A:function(a){return g[a.getDay()]},b:function(a){return h[a.getMonth()]},B:function(a){return M[a.getMonth()]},
c:e(b),d:function(a,e){return ca(a.getDate(),e,2)},e:function(a,e){return ca(a.getDate(),e,2)},H:function(a,e){return ca(a.getHours(),e,2)},I:function(a,e){return ca(a.getHours()%12||12,e,2)},j:function(a,e){return ca(1+C.dayOfYear(a),e,3)},L:function(a,e){return ca(a.getMilliseconds(),e,3)},m:function(a,e){return ca(a.getMonth()+1,e,2)},M:function(a,e){return ca(a.getMinutes(),e,2)},p:function(a){return f[+(12<=a.getHours())]},S:function(a,e){return ca(a.getSeconds(),e,2)},U:function(a,e){return ca(C.sundayOfYear(a),
e,2)},w:function(a){return a.getDay()},W:function(a,e){return ca(C.mondayOfYear(a),e,2)},x:e(d),X:e(u),y:function(a,e){return ca(a.getFullYear()%100,e,2)},Y:function(a,e){return ca(a.getFullYear()%1E4,e,4)},Z:Gg,"%":function(){return"%"}},v={a:function(a,e,l){p.lastIndex=0;return(e=p.exec(e.slice(l)))?(a.w=r.get(e[0].toLowerCase()),l+e[0].length):-1},A:function(a,e,l){m.lastIndex=0;return(e=m.exec(e.slice(l)))?(a.w=q.get(e[0].toLowerCase()),l+e[0].length):-1},b:function(a,e,l){I.lastIndex=0;return(e=
I.exec(e.slice(l)))?(a.m=J.get(e[0].toLowerCase()),l+e[0].length):-1},B:function(a,e,l){t.lastIndex=0;return(e=t.exec(e.slice(l)))?(a.m=na.get(e[0].toLowerCase()),l+e[0].length):-1},c:function(a,e,b){return l(a,w.c.toString(),e,b)},d:ne,e:ne,H:oe,I:oe,j:Hg,L:Ig,m:Jg,M:Kg,p:function(a,e,l){e=n.get(e.slice(l,l+=2).toLowerCase());return null==e?-1:(a.p=e,l)},S:Lg,U:Mg,w:Ng,W:Og,x:function(a,e,b){return l(a,w.x.toString(),e,b)},X:function(a,e,b){return l(a,w.X.toString(),e,b)},y:Pg,Y:Qg,Z:Rg,"%":Sg};
return e}function ca(a,e,l){var b=0>a?"-":"";a=(b?-a:a)+"";var d=a.length;return b+(l>d?Array(l-d+1).join(e)+a:a)}function Qb(a){return new RegExp("^(?:"+a.map(s.requote).join("|")+")","i")}function Rb(a){for(var e=new k,l=-1,b=a.length;++l<b;)e.set(a[l].toLowerCase(),l);return e}function Ng(a,e,l){R.lastIndex=0;return(e=R.exec(e.slice(l,l+1)))?(a.w=+e[0],l+e[0].length):-1}function Mg(a,e,l){R.lastIndex=0;return(e=R.exec(e.slice(l)))?(a.U=+e[0],l+e[0].length):-1}function Og(a,e,l){R.lastIndex=0;return(e=
R.exec(e.slice(l)))?(a.W=+e[0],l+e[0].length):-1}function Qg(a,e,l){R.lastIndex=0;return(e=R.exec(e.slice(l,l+4)))?(a.y=+e[0],l+e[0].length):-1}function Pg(a,e,l){R.lastIndex=0;if(e=R.exec(e.slice(l,l+2))){var b=+e[0];a=(a.y=b+(68<b?1900:2E3),l+e[0].length)}else a=-1;return a}function Rg(a,e,l){return/^[+-]\d{4}$/.test(e=e.slice(l,l+5))?(a.Z=-e,l+5):-1}function Jg(a,e,l){R.lastIndex=0;return(e=R.exec(e.slice(l,l+2)))?(a.m=e[0]-1,l+e[0].length):-1}function ne(a,e,l){R.lastIndex=0;return(e=R.exec(e.slice(l,
l+2)))?(a.d=+e[0],l+e[0].length):-1}function Hg(a,e,l){R.lastIndex=0;return(e=R.exec(e.slice(l,l+3)))?(a.j=+e[0],l+e[0].length):-1}function oe(a,e,l){R.lastIndex=0;return(e=R.exec(e.slice(l,l+2)))?(a.H=+e[0],l+e[0].length):-1}function Kg(a,e,l){R.lastIndex=0;return(e=R.exec(e.slice(l,l+2)))?(a.M=+e[0],l+e[0].length):-1}function Lg(a,e,l){R.lastIndex=0;return(e=R.exec(e.slice(l,l+2)))?(a.S=+e[0],l+e[0].length):-1}function Ig(a,e,l){R.lastIndex=0;return(e=R.exec(e.slice(l,l+3)))?(a.L=+e[0],l+e[0].length):
-1}function Gg(a){var e=a.getTimezoneOffset();a=0<e?"-":"+";var l=0|H(e)/60,e=H(e)%60;return a+ca(l,"0",2)+ca(e,"0",2)}function Sg(a,e,l){pe.lastIndex=0;return(a=pe.exec(e.slice(l,l+1)))?l+a[0].length:-1}function Fg(a){for(var e=a.length,l=-1;++l<e;)a[l][0]=this(a[l][0]);return function(e){for(var l=0,b=a[l];!b[1](e);)b=a[++l];return b[0](e)}}function Sc(){}function qe(a,e,l){var b=l.s=a+e,d=b-a;l.t=a-(b-d)+(e-d)}function Sb(a,e){a&&re.hasOwnProperty(a.type)&&re[a.type](a,e)}function Tc(a,e,l){var b=
-1,d=a.length-l;for(e.lineStart();++b<d;)l=a[b],e.point(l[0],l[1],l[2]);e.lineEnd()}function se(a,e){var l=-1,b=a.length;for(e.polygonStart();++l<b;)Tc(a[l],e,1);e.polygonEnd()}function Tg(){function a(a,e){a*=E;e=e*E/2+F/4;var l=a-b,f=0<=l?1:-1,g=f*l,l=Math.cos(e),k=Math.sin(e),h=u*k,n=d*l+h*Math.cos(g),f=h*f*Math.sin(g);Sa.add(Math.atan2(f,n));b=a;d=l;u=k}var e,l,b,d,u;ea.point=function(f,g){ea.point=a;b=(e=f)*E;d=Math.cos(g=(l=g)*E/2+F/4);u=Math.sin(g)};ea.lineEnd=function(){a(e,l)}}function Ta(a){var e=
a[0];a=a[1];var l=Math.cos(a);return[l*Math.cos(e),l*Math.sin(e),Math.sin(a)]}function Tb(a,e){return a[0]*e[0]+a[1]*e[1]+a[2]*e[2]}function db(a,e){return[a[1]*e[2]-a[2]*e[1],a[2]*e[0]-a[0]*e[2],a[0]*e[1]-a[1]*e[0]]}function Uc(a,e){a[0]+=e[0];a[1]+=e[1];a[2]+=e[2]}function Ub(a,e){return[a[0]*e,a[1]*e,a[2]*e]}function Vb(a){var e=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=e;a[1]/=e;a[2]/=e}function Wb(a){return[Math.atan2(a[1],a[0]),$a(a[2])]}function Xb(a,e){return H(a[0]-e[0])<A&&H(a[1]-e[1])<
A}function Vc(a,e){a*=E;var l=Math.cos(e*=E);qb(l*Math.cos(a),l*Math.sin(a),Math.sin(e))}function qb(a,e,l){++rb;Ba+=(a-Ba)/rb;Ca+=(e-Ca)/rb;sa+=(l-sa)/rb}function te(){function a(a,u){a*=E;var d=Math.cos(u*=E),f=d*Math.cos(a),d=d*Math.sin(a),g=Math.sin(u),k=Math.atan2(Math.sqrt((k=l*g-b*d)*k+(k=b*f-e*g)*k+(k=e*d-l*f)*k),e*f+l*d+b*g);eb+=k;ha+=k*(e+(e=f));ia+=k*(l+(l=d));da+=k*(b+(b=g));qb(e,l,b)}var e,l,b;oa.point=function(d,u){d*=E;var f=Math.cos(u*=E);e=f*Math.cos(d);l=f*Math.sin(d);b=Math.sin(u);
oa.point=a;qb(e,l,b)}}function ue(){oa.point=Vc}function Ug(){function a(a,e){a*=E;var l=Math.cos(e*=E),f=l*Math.cos(a),l=l*Math.sin(a),g=Math.sin(e),k=d*g-u*l,h=u*f-b*g,n=b*l-d*f,m=Math.sqrt(k*k+h*h+n*n),q=b*f+d*l+u*g,p=m&&-Yd(q)/m,m=Math.atan2(m,q);Ia+=p*k;Ja+=p*h;ta+=p*n;eb+=m;ha+=m*(b+(b=f));ia+=m*(d+(d=l));da+=m*(u+(u=g));qb(b,d,u)}var e,l,b,d,u;oa.point=function(f,g){e=f;l=g;oa.point=a;f*=E;var k=Math.cos(g*=E);b=k*Math.cos(f);d=k*Math.sin(f);u=Math.sin(g);qb(b,d,u)};oa.lineEnd=function(){a(e,
l);oa.lineEnd=ue;oa.point=Vc}}function fb(){return!0}function ve(a,e,l,b,d){var u=[],f=[];if(a.forEach(function(a){if(!(0>=(e=a.length-1))){var e,l=a[0],b=a[e];if(Xb(l,b)){d.lineStart();for(b=0;e>b;++b)d.point((l=a[b])[0],l[1]);return d.lineEnd(),void 0}e=new Yb(l,a,null,!0);l=new Yb(l,null,e,!1);e.o=l;u.push(e);f.push(l);e=new Yb(b,a,null,!1);l=new Yb(b,null,e,!0);e.o=l;u.push(e);f.push(l)}}),f.sort(e),we(u),we(f),u.length){a=0;e=l;for(l=f.length;l>a;++a)f[a].e=e=!e;for(var g,k=u[0];;){for(var M=
k,h=!0;M.v;)if((M=M.n)===k)return;e=M.z;d.lineStart();do{if(M.v=M.o.v=!0,M.e){if(h)for(a=0,l=e.length;l>a;++a)d.point((g=e[a])[0],g[1]);else b(M.x,M.n.x,1,d);M=M.n}else{if(h)for(e=M.p.z,a=e.length-1;0<=a;--a)d.point((g=e[a])[0],g[1]);else b(M.x,M.p.x,-1,d);M=M.p}M=M.o;e=M.z;h=!h}while(!M.v);d.lineEnd()}}}function we(a){if(e=a.length){for(var e,l,b=0,d=a[0];++b<e;)d.n=l=a[b],l.p=d,d=l;d.n=l=a[0];l.p=d}}function Yb(a,e,l,b){this.x=a;this.z=e;this.o=l;this.e=b;this.v=!1;this.n=this.p=null}function xe(a,
e,l,b){return function(d,u){function f(e,l){var b=d(e,l);a(e=b[0],l=b[1])&&u.point(e,l)}function g(a,e){var l=d(a,e);t.point(l[0],l[1])}function k(){I.point=g;t.lineStart()}function M(){I.point=f;t.lineEnd()}function h(a,e){r.push([a,e]);var l=d(a,e);w.point(l[0],l[1])}function n(){w.lineStart();r=[]}function m(){h(r[0][0],r[0][1]);w.lineEnd();var a;a=w.clean();var e=J.buffer(),l=e.length;if(r.pop(),p.push(r),r=null,l)if(1&a){a=e[0];var b,l=a.length-1,e=-1;if(0<l){v||(u.polygonStart(),v=!0);for(u.lineStart();++e<
l;)u.point((b=a[e])[0],b[1]);u.lineEnd()}}else 1<l&&2&a&&e.push(e.pop().concat(e.shift())),q.push(e.filter(Vg))}var q,p,r,t=e(u),na=d.invert(b[0],b[1]),I={point:f,lineStart:k,lineEnd:M,polygonStart:function(){I.point=h;I.lineStart=n;I.lineEnd=m;q=[];p=[]},polygonEnd:function(){I.point=f;I.lineStart=k;I.lineEnd=M;q=s.merge(q);var a,e=na;a=p;var b=e[0],y=e[1],d=[Math.sin(b),-Math.cos(b),0],g=0,D=0;Sa.reset();for(var Q=0,h=a.length;h>Q;++Q){var n=a[Q],m=n.length;if(m)for(var T=n[0],ka=T[0],e=T[1]/2+
F/4,Ga=Math.sin(e),r=Math.cos(e),t=1;;){t===m&&(t=0);var e=n[t],J=e[0],pb=e[1]/2+F/4,w=Math.sin(pb),pb=Math.cos(pb),Ha=J-ka,V=0<=Ha?1:-1,x=V*Ha,z=x>F,Ga=Ga*w;if(Sa.add(Math.atan2(Ga*V*Math.sin(x),r*pb+Ga*Math.cos(x))),g+=z?Ha+V*fa:Ha,z^ka>=b^J>=b)T=db(Ta(T),Ta(e)),Vb(T),ka=db(d,T),Vb(ka),ka=(z^0<=Ha?-1:1)*$a(ka[2]),(y>ka||y===ka&&(T[0]||T[1]))&&(D+=z^0<=Ha?1:-1);if(!t++)break;ka=J;Ga=w;r=pb;T=e}}a=(-A>g||A>g&&0>Sa)^1&D;q.length?(v||(u.polygonStart(),v=!0),ve(q,Wg,a,l,u)):a&&(v||(u.polygonStart(),
v=!0),u.lineStart(),l(null,null,1,u),u.lineEnd());v&&(u.polygonEnd(),v=!1);q=p=null},sphere:function(){u.polygonStart();u.lineStart();l(null,null,1,u);u.lineEnd();u.polygonEnd()}},J=ye(),w=e(J),v=!1;return I}}function Vg(a){return 1<a.length}function ye(){var a,e=[];return{lineStart:function(){e.push(a=[])},point:function(e,b){a.push([e,b])},lineEnd:v,buffer:function(){var l=e;return e=[],a=null,l},rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))}}}function Wg(a,e){return(0>(a=a.x)[0]?
a[1]-Y-A:Y-a[1])-(0>(e=e.x)[0]?e[1]-Y-A:Y-e[1])}function Xg(a){function e(a,e){return Math.cos(a)*Math.cos(e)>d}function l(a,e,l){var b=Ta(a),y=Ta(e),u=[1,0,0],y=db(b,y),f=Tb(y,y),b=y[0],g=f-b*b;if(!g)return!l&&a;f=d*f/g;g=-d*b/g;b=db(u,y);u=Ub(u,f);y=Ub(y,g);Uc(u,y);y=Tb(u,b);f=Tb(b,b);g=y*y-f*(Tb(u,u)-1);if(!(0>g)){var k=Math.sqrt(g),g=Ub(b,(-y-k)/f);if(Uc(g,u),g=Wb(g),!l)return g;var Q;l=a[0];var S=e[0];a=a[1];e=e[1];l>S&&(Q=l,l=S,S=Q);var h=S-l,n=H(h-F)<A,m=n||A>h;if(!n&&a>e&&(Q=a,a=e,e=Q),m?
n?0<a+e^g[1]<(H(g[0]-l)<A?a:e):a<=g[1]&&g[1]<=e:h>F^(l<=g[0]&&g[0]<=S))return Q=Ub(b,(-y+k)/f),Uc(Q,u),[g,Wb(Q)]}}function b(e,l){var y=u?a:F-a,d=0;return-y>e?d|=1:e>y&&(d|=2),-y>l?d|=4:l>y&&(d|=8),d}var d=Math.cos(a),u=0<d,f=H(d)>A,g=Wc(a,6*E);return xe(e,function(a){var d,g,D,k,Q;return{lineStart:function(){k=D=!1;Q=1},point:function(h,n){var m,q=[h,n],p=e(h,n),s=u?p?0:b(h,n):p?b(h+(0>h?F:-F),n):0;if(!d&&(k=D=p)&&a.lineStart(),p!==D&&(m=l(d,q),(Xb(d,m)||Xb(q,m))&&(q[0]+=A,q[1]+=A,p=e(q[0],q[1]))),
p!==D)Q=0,p?(a.lineStart(),m=l(q,d),a.point(m[0],m[1])):(m=l(d,q),a.point(m[0],m[1]),a.lineEnd()),d=m;else if(f&&d&&u^p){var r;s&g||!(r=l(q,d,!0))||(Q=0,u?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!p||d&&Xb(d,q)||a.point(q[0],q[1]);d=q;D=p;g=s},lineEnd:function(){D&&a.lineEnd();d=null},clean:function(){return Q|(k&&D)<<1}}},g,u?[0,-a]:[-F,a-F])}function ze(a,e,l,b){return function(d){var u,
f=d.a,g=d.b,k=f.x,f=f.y,h=0,n=1,m=g.x-k,g=g.y-f;if(u=a-k,m||!(0<u)){if(u/=m,0>m){if(h>u)return;n>u&&(n=u)}else if(0<m){if(u>n)return;u>h&&(h=u)}if(u=l-k,m||!(0>u)){if(u/=m,0>m){if(u>n)return;u>h&&(h=u)}else if(0<m){if(h>u)return;n>u&&(n=u)}if(u=e-f,g||!(0<u)){if(u/=g,0>g){if(h>u)return;n>u&&(n=u)}else if(0<g){if(u>n)return;u>h&&(h=u)}if(u=b-f,g||!(0>u)){if(u/=g,0>g){if(u>n)return;u>h&&(h=u)}else if(0<g){if(h>u)return;n>u&&(n=u)}return 0<h&&(d.a={x:k+h*m,y:f+h*g}),1>n&&(d.b={x:k+n*m,y:f+n*g}),d}}}}}}
function Ae(a,e,l,b){function d(b,y){return H(b[0]-a)<A?0<y?0:3:H(b[0]-l)<A?0<y?2:1:H(b[1]-e)<A?0<y?1:0:0<y?3:2}function u(a,e){return f(a.x,e.x)}function f(a,e){var l=d(a,1),b=d(e,1);return l!==b?l-b:0===l?e[1]-a[1]:1===l?a[0]-e[0]:2===l?a[1]-e[1]:e[0]-a[0]}return function(g){function k(u,g,Q,h){var n=0,M=0;if(null==u||(n=d(u,Q))!==(M=d(g,Q))||0>f(u,g)^0<Q){do h.point(0===n||3===n?a:l,1<n?b:e);while((n=(n+Q+4)%4)!==M)}else h.point(g[0],g[1])}function h(d,u){d>=a&&l>=d&&u>=e&&b>=u&&g.point(d,u)}function n(d,
u){d=Math.max(-Zb,Math.min(Zb,d));u=Math.max(-Zb,Math.min(Zb,u));var f=d>=a&&l>=d&&u>=e&&b>=u;if(q&&p.push([d,u]),V)r=d,t=u,w=f,V=!1,f&&(g.lineStart(),g.point(d,u));else if(f&&J)g.point(d,u);else{var D={a:{x:na,y:I},b:{x:d,y:u}};Dg(D)?(J||(g.lineStart(),g.point(D.a.x,D.a.y)),g.point(D.b.x,D.b.y),f||g.lineEnd(),v=!1):f&&(g.lineStart(),g.point(d,u),v=!1)}na=d;I=u;J=f}var m,q,p,r,t,w,na,I,J,V,v,x=g,z=ye(),Dg=ze(a,e,l,b),bb={point:h,lineStart:function(){bb.point=n;q&&q.push(p=[]);V=!0;J=!1;na=I=0/0},
lineEnd:function(){m&&(n(r,t),w&&J&&z.rejoin(),m.push(z.buffer()));bb.point=h;J&&g.lineEnd()},polygonStart:function(){g=z;m=[];q=[];v=!0},polygonEnd:function(){g=x;m=s.merge(m);var e;e=[a,b];for(var l=0,d=q.length,f=e[1],D=0;d>D;++D)for(var h,S=1,n=q[D],M=n.length,T=n[0];M>S;++S)h=n[S],T[1]<=f?h[1]>f&&0<Hc(T,h,e)&&++l:h[1]<=f&&0>Hc(T,h,e)&&--l,T=h;e=0!==l;l=v&&e;d=m.length;(l||d)&&(g.polygonStart(),l&&(g.lineStart(),k(null,null,1,g),g.lineEnd()),d&&ve(m,u,e,k,g),g.polygonEnd());m=q=p=null}};return bb}}
function Be(a,e){function l(l,b){return l=a(l,b),e(l[0],l[1])}return a.invert&&e.invert&&(l.invert=function(l,b){return l=e.invert(l,b),l&&a.invert(l[0],l[1])}),l}function Xc(a){var e=0,l=F/3,b=Yc(a);a=b(e,l);return a.parallels=function(a){return arguments.length?b(e=a[0]*F/180,l=a[1]*F/180):[e/F*180,l/F*180]},a}function Ce(a,e){function l(a,e){var l=Math.sqrt(u-2*d*Math.sin(e))/d;return[l*Math.sin(a*=d),f-l*Math.cos(a)]}var b=Math.sin(a),d=(b+Math.sin(e))/2,u=1+b*(2*d-b),f=Math.sqrt(u)/d;return l.invert=
function(a,e){var l=f-e;return[Math.atan2(a,l)/d,$a((u-(a*a+l*l)*d*d)/(2*d))]},l}function Yg(){function a(a,e){$b+=d*a-b*e;b=a;d=e}var e,l,b,d;Ka.point=function(u,f){Ka.point=a;e=b=u;l=d=f};Ka.lineEnd=function(){a(e,l)}}function Zg(){function a(a,e){f.push("M",a,",",e,u)}function e(a,e){f.push("M",a,",",e);g.point=l}function l(a,e){f.push("L",a,",",e)}function b(){g.point=a}function d(){f.push("Z")}var u=De(4.5),f=[],g={point:a,lineStart:function(){g.point=e},lineEnd:b,polygonStart:function(){g.lineEnd=
d},polygonEnd:function(){g.lineEnd=b;g.point=a},pointRadius:function(a){return u=De(a),g},result:function(){if(f.length){var a=f.join("");return f=[],a}}};return g}function De(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Ua(a,e){Ba+=a;Ca+=e;++sa}function Ee(){function a(a,b){var d=a-e,f=b-l,d=Math.sqrt(d*d+f*f);ha+=d*(e+a)/2;ia+=d*(l+b)/2;da+=d;Ua(e=a,l=b)}var e,l;pa.point=function(b,d){pa.point=a;Ua(e=b,l=d)}}function Fe(){pa.point=Ua}function $g(){function a(a,
e){var l=a-b,f=e-d,l=Math.sqrt(l*l+f*f);ha+=l*(b+a)/2;ia+=l*(d+e)/2;da+=l;l=d*a-b*e;Ia+=l*(b+a);Ja+=l*(d+e);ta+=3*l;Ua(b=a,d=e)}var e,l,b,d;pa.point=function(u,f){pa.point=a;Ua(e=b=u,l=d=f)};pa.lineEnd=function(){a(e,l)}}function ah(a){function e(e,l){a.moveTo(e,l);a.arc(e,l,f,0,fa)}function l(e,l){a.moveTo(e,l);g.point=b}function b(e,l){a.lineTo(e,l)}function d(){g.point=e}function u(){a.closePath()}var f=4.5,g={point:e,lineStart:function(){g.point=l},lineEnd:d,polygonStart:function(){g.lineEnd=
u},polygonEnd:function(){g.lineEnd=d;g.point=e},pointRadius:function(a){return f=a,g},result:v};return g}function Ge(a){function e(a){return(g?b:l)(a)}function l(e){return He(e,function(l,b){l=a(l,b);e.point(l[0],l[1])})}function b(e){function l(b,d){b=a(b,d);e.point(b[0],b[1])}function u(){w=0/0;B.point=y;e.lineStart()}function y(l,b){var u=Ta([l,b]),f=a(l,b);d(w,v,t,x,z,N,w=f[0],v=f[1],t=l,x=u[0],z=u[1],N=u[2],g,e);e.point(w,v)}function f(){B.point=l;e.lineEnd()}function k(){u();B.point=h;B.lineEnd=
S}function h(a,e){y(n=a,e);m=w;q=v;p=x;s=z;r=N;B.point=y}function S(){d(w,v,t,x,z,N,m,q,n,p,s,r,g,e);B.lineEnd=f;f()}var n,m,q,p,s,r,t,w,v,x,z,N,B={point:l,lineStart:u,lineEnd:f,polygonStart:function(){e.polygonStart();B.lineStart=k},polygonEnd:function(){e.polygonEnd();B.lineStart=u}};return B}function d(e,l,b,y,g,k,h,Q,n,m,q,p,s,r){var t=h-e,w=Q-l,v=t*t+w*w;if(v>4*u&&s--){var x=y+m,z=g+q,N=k+p,B=Math.sqrt(x*x+z*z+N*N),cb=Math.asin(N/=B),C=H(H(N)-1)<A||H(b-n)<A?(b+n)/2:Math.atan2(z,x),P=a(C,cb),
cb=P[0],P=P[1],E=cb-e,F=P-l,U=w*E-t*F;(U*U/v>u||.3<H((t*E+w*F)/v-.5)||f>y*m+g*q+k*p)&&(d(e,l,b,y,g,k,cb,P,C,x/=B,z/=B,N,s,r),r.point(cb,P),d(cb,P,C,x,z,N,h,Q,n,m,q,p,s,r))}}var u=.5,f=Math.cos(30*E),g=16;return e.precision=function(a){return arguments.length?(g=0<(u=a*a)&&16,e):Math.sqrt(u)},e}function bh(a){var e=Ge(function(e,b){return a([e*O,b*O])});return function(a){return Ie(e(a))}}function Je(a){this.stream=a}function He(a,e){return{point:e,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},
lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function La(a){return Yc(function(){return a})()}function Yc(a){function e(a){return a=g(a[0]*E,a[1]*E),[a[0]*q+k,h-a[1]*q]}function l(a){return a=g.invert((a[0]-k)/q,(h-a[1])/q),a&&[a[0]*O,a[1]*O]}function b(){g=Be(f=Zc(na,I,J),u);var a=u(t,w);return k=p-a[0]*q,h=r+a[1]*q,d()}function d(){return n&&(n.valid=!1,n=null),e}var u,f,g,k,h,n,m=Ge(function(a,e){return a=u(a,e),[a[0]*q+k,h-a[1]*
q]}),q=150,p=480,r=250,t=0,w=0,na=0,I=0,J=0,v=Ke,x=X,z=null,za=null;return e.stream=function(a){return n&&(n.valid=!1),n=Ie(v(f,m(x(a)))),n.valid=!0,n},e.clipAngle=function(a){return arguments.length?(v=null==a?(z=a,Ke):Xg((z=+a)*E),d()):z},e.clipExtent=function(a){return arguments.length?(za=a,x=a?Ae(a[0][0],a[0][1],a[1][0],a[1][1]):X,d()):za},e.scale=function(a){return arguments.length?(q=+a,b()):q},e.translate=function(a){return arguments.length?(p=+a[0],r=+a[1],b()):[p,r]},e.center=function(a){return arguments.length?
(t=a[0]%360*E,w=a[1]%360*E,b()):[t*O,w*O]},e.rotate=function(a){return arguments.length?(na=a[0]%360*E,I=a[1]%360*E,J=2<a.length?a[2]%360*E:0,b()):[na*O,I*O,J*O]},s.rebind(e,m,"precision"),function(){return u=a.apply(this,arguments),e.invert=u.invert&&l,b()}}function Ie(a){return He(a,function(e,l){a.point(e*E,l*E)})}function sb(a,e){return[a,e]}function Le(a,e){return[a>F?a-fa:-F>a?a+fa:a,e]}function Zc(a,e,l){return a?e||l?Be(Me(a),Ne(e,l)):Me(a):e||l?Ne(e,l):Le}function Oe(a){return function(e,
l){return e+=a,[e>F?e-fa:-F>e?e+fa:e,l]}}function Me(a){var e=Oe(a);return e.invert=Oe(-a),e}function Ne(a,e){function l(a,e){var l=Math.cos(e),g=Math.cos(a)*l,l=Math.sin(a)*l,k=Math.sin(e),h=k*b+g*d;return[Math.atan2(l*u-h*f,g*b-k*d),$a(h*u+l*f)]}var b=Math.cos(a),d=Math.sin(a),u=Math.cos(e),f=Math.sin(e);return l.invert=function(a,e){var l=Math.cos(e),g=Math.cos(a)*l,l=Math.sin(a)*l,k=Math.sin(e),h=k*u-l*f;return[Math.atan2(l*u+k*f,g*b+h*d),$a(h*b-g*d)]},l}function Wc(a,e){var l=Math.cos(a),b=Math.sin(a);
return function(d,u,f,g){var k=f*e;null!=d?(d=Pe(l,d),u=Pe(l,u),(0<f?u>d:d>u)&&(d+=f*fa)):(d=a+f*fa,u=a-.5*k);for(var h;0<f?d>u:u>d;d-=k)g.point((h=Wb([l,-b*Math.cos(d),-b*Math.sin(d)]))[0],h[1])}}function Pe(a,e){var l=Ta(e);l[0]-=a;Vb(l);var b=Yd(-l[1]);return((0>-l[2]?-b:b)+2*Math.PI-A)%(2*Math.PI)}function Qe(a,e,l){var b=s.range(a,e-A,l).concat(e);return function(a){return b.map(function(e){return[a,e]})}}function Re(a,e,l){var b=s.range(a,e-A,l).concat(e);return function(a){return b.map(function(e){return[e,
a]})}}function $c(a){return a.source}function ad(a){return a.target}function ch(a,e,l,b){var d=Math.cos(e),u=Math.sin(e),f=Math.cos(b),g=Math.sin(b),k=d*Math.cos(a),h=d*Math.sin(a),n=f*Math.cos(l),m=f*Math.sin(l),q=2*Math.asin(Math.sqrt($d(b-e)+d*f*$d(l-a))),p=1/Math.sin(q);l=q?function(a){var e=Math.sin(a*=q)*p,l=Math.sin(q-a)*p;a=l*k+e*n;var b=l*h+e*m,e=l*u+e*g;return[Math.atan2(b,a)*O,Math.atan2(e,Math.sqrt(a*a+b*b))*O]}:function(){return[a*O,e*O]};return l.distance=q,l}function tb(a,e){function l(e,
l){var b=Math.cos(e),d=Math.cos(l),b=a(b*d);return[b*d*Math.sin(e),b*Math.sin(l)]}return l.invert=function(a,l){var b=Math.sqrt(a*a+l*l),d=e(b),f=Math.sin(d),d=Math.cos(d);return[Math.atan2(a*f,b*d),Math.asin(b&&l*f/b)]},l}function Se(a,e){function l(a,e){0<u?-Y+A>e&&(e=-Y+A):e>Y-A&&(e=Y-A);var l=u/Math.pow(Math.tan(F/4+e/2),d);return[l*Math.sin(d*a),u-l*Math.cos(d*a)]}var b=Math.cos(a),d=a===e?Math.sin(a):Math.log(b/Math.cos(e))/Math.log(Math.tan(F/4+e/2)/Math.tan(F/4+a/2)),u=b*Math.pow(Math.tan(F/
4+a/2),d)/d;return d?(l.invert=function(a,e){var l=u-e,b=(0<d?1:0>d?-1:0)*Math.sqrt(a*a+l*l);return[Math.atan2(a,l)/d,2*Math.atan(Math.pow(u/b,1/d))-Y]},l):ac}function Te(a,e){function l(a,e){var l=u-e;return[l*Math.sin(d*a),u-l*Math.cos(d*a)]}var b=Math.cos(a),d=a===e?Math.sin(a):(b-Math.cos(e))/(e-a),u=b/d+a;return H(d)<A?sb:(l.invert=function(a,e){var l=u-e;return[Math.atan2(a,l)/d,u-(0<d?1:0>d?-1:0)*Math.sqrt(a*a+l*l)]},l)}function ac(a,e){return[a,Math.log(Math.tan(F/4+e/2))]}function Ue(a){var e,
l=La(a),b=l.scale,d=l.translate,u=l.clipExtent;return l.scale=function(){var a=b.apply(l,arguments);return a===l?e?l.clipExtent(null):l:a},l.translate=function(){var a=d.apply(l,arguments);return a===l?e?l.clipExtent(null):l:a},l.clipExtent=function(a){var f=u.apply(l,arguments);if(f===l){if(e=null==a){var g=F*b(),k=d();u([[k[0]-g,k[1]-g],[k[0]+g,k[1]+g]])}}else e&&(f=null);return f},l.clipExtent(null)}function bd(a,e){return[Math.log(Math.tan(F/4+e/2)),-a]}function gb(a){return a[0]}function ub(a){return a[1]}
function Ve(a){for(var e=a.length,l=[0,1],b=2,d=2;e>d;d++){for(;1<b&&0>=Hc(a[l[b-2]],a[l[b-1]],a[d]);)--b;l[b++]=d}return l.slice(0,b)}function dh(a,e){return a[0]-e[0]||a[1]-e[1]}function cd(a,e,l){return(l[0]-e[0])*(a[1]-e[1])<(l[1]-e[1])*(a[0]-e[0])}function We(a,e,l,b){var d=a[0],u=l[0],f=e[0]-d,g=b[0]-u;a=a[1];l=l[1];e=e[1]-a;b=b[1]-l;u=(g*(a-l)-b*(d-u))/(b*f-g*e);return[d+u*f,a+u*e]}function Xe(a){var e=a[0];a=a[a.length-1];return!(e[0]-a[0]||e[1]-a[1])}function eh(){bc(this);this.edge=this.site=
this.circle=null}function Ye(a){var e=Ze.pop()||new eh;return e.site=a,e}function dd(a){hb(a);ib.remove(a);Ze.push(a);bc(a)}function $e(a,e){var l=a.site,b=l.x,d=l.y,u=d-e;if(!u)return b;var f=a.P;if(!f)return-1/0;var l=f.site,f=l.x,l=l.y,g=l-e;if(!g)return f;var k=f-b,h=1/u-1/g,n=k/g;return h?(-n+Math.sqrt(n*n-2*h*(k*k/(-2*g)-l+g/2+d-u/2)))/h+b:(b+f)/2}function af(a){this.site=a;this.edges=[]}function bf(a,e){return e.angle-a.angle}function fh(){bc(this);this.x=this.y=this.arc=this.site=this.cy=
null}function jb(a){var e=a.P,l=a.N;if(e&&l){var b=e.site,e=a.site,d=l.site;if(b!==d){var l=e.x,f=e.y,g=b.x-l,k=b.y-f,b=d.x-l,d=d.y-f,h=2*(g*d-k*b);if(!(h>=-ed)){var n=g*g+k*k,m=b*b+d*d,k=(d*n-k*m)/h,g=(g*m-b*n)/h,d=g+f,f=cf.pop()||new fh;f.arc=a;f.site=e;f.x=k+l;f.y=d+Math.sqrt(k*k+g*g);f.cy=d;a.circle=f;a=null;for(e=vb._;e;)if(f.y<e.y||f.y===e.y&&f.x<=e.x){if(!e.L){a=e.P;break}e=e.L}else{if(!e.R){a=e;break}e=e.R}vb.insert(a,f);a||(fd=f)}}}}function hb(a){var e=a.circle;e&&(e.P||(fd=e.N),vb.remove(e),
cf.push(e),bc(e),a.circle=null)}function gh(a,e){var l=a.b;if(l)return!0;var b,d,f=a.a,l=e[0][0],g=e[1][0],k=e[0][1],h=e[1][1],n=a.l,m=a.r,q=n.x,n=n.y,p=m.x,m=m.y;d=(q+p)/2;if(m===n){if(l>d||d>=g)return;if(q>p){if(f){if(f.y>=h)return}else f={x:d,y:k};l={x:d,y:h}}else{if(f){if(f.y<k)return}else f={x:d,y:h};l={x:d,y:k}}}else if(b=(q-p)/(m-n),d=(n+m)/2-b*d,-1>b||1<b)if(q>p){if(f){if(f.y>=h)return}else f={x:(k-d)/b,y:k};l={x:(h-d)/b,y:h}}else{if(f){if(f.y<k)return}else f={x:(h-d)/b,y:h};l={x:(k-d)/b,
y:k}}else if(m>n){if(f){if(f.x>=g)return}else f={x:l,y:b*l+d};l={x:g,y:b*g+d}}else{if(f){if(f.x<l)return}else f={x:g,y:b*g+d};l={x:l,y:b*l+d}}return a.a=f,a.b=l,!0}function df(a,e){this.l=a;this.r=e;this.a=this.b=null}function wb(a,e,l,b){var d=new df(a,e);return kb.push(d),l&&cc(d,a,e,l),b&&cc(d,e,a,b),Va[a.i].edges.push(new dc(d,a,e)),Va[e.i].edges.push(new dc(d,e,a)),d}function hh(a,e,l){a=new df(a,null);return a.a=e,a.b=l,kb.push(a),a}function cc(a,e,l,b){a.a||a.b?a.l===l?a.b=b:a.a=b:(a.a=b,a.l=
e,a.r=l)}function dc(a,e,l){var b=a.a,d=a.b;this.edge=a;this.site=e;this.angle=l?Math.atan2(l.y-e.y,l.x-e.x):a.l===e?Math.atan2(d.x-b.x,b.y-d.y):Math.atan2(b.x-d.x,d.y-b.y)}function gd(){this._=null}function bc(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function xb(a,e){var l=e.R,b=e.U;b?b.L===e?b.L=l:b.R=l:a._=l;l.U=b;e.U=l;e.R=l.L;e.R&&(e.R.U=e);l.L=e}function yb(a,e){var l=e.L,b=e.U;b?b.L===e?b.L=l:b.R=l:a._=l;l.U=b;e.U=l;e.L=l.R;e.L&&(e.L.U=e);l.R=e}function ef(a){for(;a.L;)a=a.L;return a}function hd(a,
e){var l,b,d,f=a.sort(ih).pop();kb=[];Va=Array(a.length);ib=new gd;for(vb=new gd;;)if(d=fd,f&&(!d||f.y<d.y||f.y===d.y&&f.x<d.x)){if(f.x!==l||f.y!==b){Va[f.i]=new af(f);l=f;for(var g=b=void 0,k=void 0,h=void 0,n=l.x,m=l.y,q=ib._;q;)if(k=$e(q,m)-n,k>A)q=q.L;else{var p;var s=q;p=m;var r=s.N;r?p=$e(r,p):(s=s.site,p=s.y===p?s.x:1/0);if(h=n-p,!(h>A)){k>-A?(b=q.P,g=q):h>-A?(b=q,g=q.N):b=g=q;break}if(!q.R){b=q;break}q=q.R}k=Ye(l);if(ib.insert(b,k),b||g)if(b===g)hb(b),g=Ye(b.site),ib.insert(k,g),k.edge=g.edge=
wb(b.site,k.site),jb(b),jb(g);else if(g){hb(b);hb(g);h=b.site;m=h.x;q=h.y;p=l.x-m;var s=l.y-q,n=g.site,r=n.x-m,t=n.y-q,w=2*(p*t-s*r),v=p*p+s*s,I=r*r+t*t,m={x:(t*v-s*I)/w+m,y:(p*I-r*v)/w+q};cc(g.edge,h,n,m);k.edge=wb(h,l,null,m);g.edge=wb(l,n,null,m);jb(b);jb(g)}else k.edge=wb(b.site,k.site);l=f.x;b=f.y}f=a.pop()}else{if(!d)break;n=d.arc;g=n.circle;h=g.x;m=g.cy;g={x:h,y:m};p=n.P;q=n.N;k=[n];dd(n);for(n=p;n.circle&&H(h-n.circle.x)<A&&H(m-n.circle.cy)<A;)p=n.P,k.unshift(n),dd(n),n=p;k.unshift(n);hb(n);
for(p=q;p.circle&&H(h-p.circle.x)<A&&H(m-p.circle.cy)<A;)q=p.N,k.push(p),dd(p),p=q;k.push(p);hb(p);h=void 0;m=k.length;for(h=1;m>h;++h)p=k[h],n=k[h-1],cc(p.edge,n.site,p.site,g);n=k[0];p=k[m-1];p.edge=wb(n.site,p.site,null,g);jb(n);jb(p)}if(e){f=kb;l=ze(e[0][0],e[0][1],e[1][0],e[1][1]);for(b=f.length;b--;)d=f[b],(!gh(d,e)||!l(d)||H(d.a.x-d.b.x)<A&&H(d.a.y-d.b.y)<A)&&(d.a=d.b=null,f.splice(b,1));var J,n=e[0][0],m=e[1][0],q=e[0][1];p=e[1][1];s=Va;for(r=s.length;r--;)if(J=s[r],J&&J.prepare())for(g=J.edges,
k=g.length,b=0;k>b;)h=g[b].end(),f=h.x,l=h.y,t=g[++b%k].start(),d=t.x,t=t.y,(H(f-d)>A||H(l-t)>A)&&(g.splice(b,0,new dc(hh(J.site,h,H(f-n)<A&&p-l>A?{x:n,y:H(d-n)<A?t:p}:H(l-p)<A&&m-f>A?{x:H(t-p)<A?d:m,y:p}:H(f-m)<A&&l-q>A?{x:m,y:H(d-m)<A?t:q}:H(l-q)<A&&f-n>A?{x:H(t-q)<A?d:n,y:q}:null),J.site,null)),++k)}J={cells:Va,edges:kb};return ib=vb=kb=Va=null,J}function ih(a,e){return e.y-a.y||e.x-a.x}function jh(a){return a.x}function kh(a){return a.y}function ff(){return{leaf:!0,nodes:[],point:null,x:null,
y:null}}function zb(a,e,l,b,d,f){if(!a(e,l,b,d,f)){var g=.5*(l+d),k=.5*(b+f);e=e.nodes;e[0]&&zb(a,e[0],l,b,g,k);e[1]&&zb(a,e[1],g,b,d,k);e[2]&&zb(a,e[2],l,k,g,f);e[3]&&zb(a,e[3],g,k,d,f)}}function id(a,e){a=s.rgb(a);e=s.rgb(e);var l=a.r,b=a.g,d=a.b,f=e.r-l,g=e.g-b,k=e.b-d;return function(a){return"#"+ab(Math.round(l+f*a))+ab(Math.round(b+g*a))+ab(Math.round(d+k*a))}}function gf(a,e){var l,b={},d={};for(l in a)l in e?b[l]=Wa(a[l],e[l]):d[l]=a[l];for(l in e)l in a||(d[l]=e[l]);return function(a){for(l in b)d[l]=
b[l](a);return d}}function Da(a,e){return e-=a=+a,function(l){return a+e*l}}function hf(a,e){var l,b,d,f=jd.lastIndex=kd.lastIndex=0,g=-1,k=[],h=[];a+="";for(e+="";(l=jd.exec(a))&&(b=kd.exec(e));)(d=b.index)>f&&(d=e.slice(f,d),k[g]?k[g]+=d:k[++g]=d),(l=l[0])===(b=b[0])?k[g]?k[g]+=b:k[++g]=b:(k[++g]=null,h.push({i:g,x:Da(l,b)})),f=kd.lastIndex;return f<e.length&&(d=e.slice(f),k[g]?k[g]+=d:k[++g]=d),2>k.length?h[0]?(e=h[0].x,function(a){return e(a)+""}):function(){return e}:(e=h.length,function(a){for(var l,
b=0;e>b;++b)k[(l=h[b]).i]=l.x(a);return k.join("")})}function Wa(a,e){for(var l,b=s.interpolators.length;0<=--b&&!(l=s.interpolators[b](a,e)););return l}function ec(a,e){var l,b=[],d=[],f=a.length,g=e.length,k=Math.min(a.length,e.length);for(l=0;k>l;++l)b.push(Wa(a[l],e[l]));for(;f>l;++l)d[l]=a[l];for(;g>l;++l)d[l]=e[l];return function(a){for(l=0;k>l;++l)d[l]=b[l](a);return d}}function lh(a){return function(e){return 0>=e?0:1<=e?1:a(e)}}function jf(a){return function(e){return 1-a(1-e)}}function kf(a){return function(e){return.5*
(.5>e?a(2*e):2-a(2-2*e))}}function mh(a){return a*a}function nh(a){return a*a*a}function oh(a){if(0>=a)return 0;if(1<=a)return 1;var e=a*a,l=e*a;return 4*(.5>a?l:3*(a-e)+l-.75)}function ph(a){return 1-Math.cos(a*Y)}function qh(a){return Math.pow(2,10*(a-1))}function rh(a){return 1-Math.sqrt(1-a*a)}function sh(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function lf(a,e){return e-=a,function(l){return Math.round(a+
e*l)}}function mf(a){var e=[a.a,a.b],l=[a.c,a.d],b=nf(e),d=e[0]*l[0]+e[1]*l[1],f;f=-d;f=(l[0]+=f*e[0],l[1]+=f*e[1],l);f=nf(f)||0;e[0]*l[1]<l[0]*e[1]&&(e[0]*=-1,e[1]*=-1,b*=-1,d*=-1);this.rotate=(b?Math.atan2(e[1],e[0]):Math.atan2(-l[0],l[1]))*O;this.translate=[a.e,a.f];this.scale=[b,f];this.skew=f?Math.atan2(d,f)*O:0}function nf(a){var e=Math.sqrt(a[0]*a[0]+a[1]*a[1]);return e&&(a[0]/=e,a[1]/=e),e}function of(a,e){var l,b=[],d=[],f=s.transform(a),g=s.transform(e),k=f.translate,h=g.translate,n=f.rotate,
m=g.rotate,q=f.skew,p=g.skew,f=f.scale,g=g.scale;return k[0]!=h[0]||k[1]!=h[1]?(b.push("translate(",null,",",null,")"),d.push({i:1,x:Da(k[0],h[0])},{i:3,x:Da(k[1],h[1])})):h[0]||h[1]?b.push("translate("+h+")"):b.push(""),n!=m?(180<n-m?m+=360:180<m-n&&(n+=360),d.push({i:b.push(b.pop()+"rotate(",null,")")-2,x:Da(n,m)})):m&&b.push(b.pop()+"rotate("+m+")"),q!=p?d.push({i:b.push(b.pop()+"skewX(",null,")")-2,x:Da(q,p)}):p&&b.push(b.pop()+"skewX("+p+")"),f[0]!=g[0]||f[1]!=g[1]?(l=b.push(b.pop()+"scale(",
null,",",null,")"),d.push({i:l-4,x:Da(f[0],g[0])},{i:l-2,x:Da(f[1],g[1])})):(1!=g[0]||1!=g[1])&&b.push(b.pop()+"scale("+g+")"),l=d.length,function(a){for(var e,f=-1;++f<l;)b[(e=d[f]).i]=e.x(a);return b.join("")}}function th(a,e){return e=e-(a=+a)?1/(e-a):0,function(l){return(l-a)*e}}function uh(a,e){return e=e-(a=+a)?1/(e-a):0,function(l){return Math.max(0,Math.min(1,(l-a)*e))}}function vh(a){var e=a.source;a=a.target;var l;var b=a;if(e===b)l=e;else{l=pf(e);for(var b=pf(b),d=l.pop(),f=b.pop(),g=null;d===
f;)g=d,d=l.pop(),f=b.pop();l=g}for(b=[e];e!==l;)e=e.parent,b.push(e);for(e=b.length;a!==l;)b.splice(e,0,a),a=a.parent;return b}function pf(a){for(var e=[],l=a.parent;null!=l;)e.push(a),a=l,l=l.parent;return e.push(a),e}function wh(a){a.fixed|=2}function xh(a){a.fixed&=-7}function yh(a){a.fixed|=4;a.px=a.x;a.py=a.y}function zh(a){a.fixed&=-5}function qf(a,e,l){var b=0,d=0;if(a.charge=0,!a.leaf)for(var f,g=a.nodes,k=g.length,h=-1;++h<k;)f=g[h],null!=f&&(qf(f,e,l),a.charge+=f.charge,b+=f.charge*f.cx,
d+=f.charge*f.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5),e*=l[a.point.index],a.charge+=a.pointCharge=e,b+=e*a.point.x,d+=e*a.point.y);a.cx=b/a.charge;a.cy=d/a.charge}function Ab(a,e){return s.rebind(a,e,"sort","children","value"),a.nodes=a,a.links=Ah,a}function Bb(a,e){for(var l=[a];null!=(a=l.pop());)if(e(a),(d=a.children)&&(b=d.length))for(var b,d;0<=--b;)l.push(d[b])}function ua(a,e){for(var l=[a],b=[];null!=(a=l.pop());)if(b.push(a),(f=a.children)&&(d=f.length))for(var d,
f,g=-1;++g<d;)l.push(f[g]);for(;null!=(a=b.pop());)e(a)}function Bh(a){return a.children}function Ch(a){return a.value}function Dh(a,e){return e.value-a.value}function Ah(a){return s.merge(a.map(function(a){return(a.children||[]).map(function(l){return{source:a,target:l}})}))}function Eh(a){return a.x}function Fh(a){return a.y}function Gh(a,e,l){a.y0=e;a.y=l}function ld(a){return s.range(a.length)}function md(a){var e=-1;a=a[0].length;for(var l=[];++e<a;)l[e]=0;return l}function Hh(a){for(var e,l=
1,b=0,d=a[0][1],f=a.length;f>l;++l)(e=a[l][1])>d&&(b=l,d=e);return b}function Ih(a){return a.reduce(Jh,0)}function Jh(a,e){return a+e[1]}function Kh(a,e){return rf(a,Math.ceil(Math.log(e.length)/Math.LN2+1))}function rf(a,e){for(var l=-1,b=+a[0],d=(a[1]-b)/e,f=[];++l<=e;)f[l]=d*l+b;return f}function Lh(a){return[s.min(a),s.max(a)]}function Mh(a,e){return a.value-e.value}function nd(a,e){var l=a._pack_next;a._pack_next=e;e._pack_prev=a;e._pack_next=l;l._pack_prev=e}function sf(a,e){a._pack_next=e;
e._pack_prev=a}function tf(a,e){var l=e.x-a.x,b=e.y-a.y,d=a.r+e.r;return.999*d*d>l*l+b*b}function uf(a){function e(a){m=Math.min(a.x-a.r,m);q=Math.max(a.x+a.r,q);p=Math.min(a.y-a.r,p);s=Math.max(a.y+a.r,s)}if((l=a.children)&&(n=l.length)){var l,b,d,f,g,k,h,n,m=1/0,q=-1/0,p=1/0,s=-1/0;if(l.forEach(Nh),b=l[0],b.x=-b.r,b.y=0,e(b),1<n&&(d=l[1],d.x=d.r,d.y=0,e(d),2<n))for(f=l[2],vf(b,d,f),e(f),nd(b,f),b._pack_prev=f,nd(f,d),d=b._pack_next,g=3;n>g;g++){vf(b,d,f=l[g]);var r=0,t=1,w=1;for(k=d._pack_next;k!==
d;k=k._pack_next,t++)if(tf(k,f)){r=1;break}if(1==r)for(h=b._pack_prev;h!==k._pack_prev&&!tf(h,f);h=h._pack_prev,w++);r?(w>t||t==w&&d.r<b.r?sf(b,d=k):sf(b=h,d),g--):(nd(b,f),d=f,e(f))}b=(m+q)/2;d=(p+s)/2;for(g=k=0;n>g;g++)f=l[g],f.x-=b,f.y-=d,k=Math.max(k,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=k;l.forEach(Oh)}}function Nh(a){a._pack_next=a._pack_prev=a}function Oh(a){delete a._pack_next;delete a._pack_prev}function wf(a,e,b,d){var f=a.children;if(a.x=e+=d*a.x,a.y=b+=d*a.y,a.r*=d,f){a=-1;for(var g=f.length;++a<
g;)wf(f[a],e,b,d)}}function vf(a,e,b){var d=a.r+b.r,f=e.x-a.x,g=e.y-a.y;if(d&&(f||g)){var k=e.r+b.r,h=f*f+g*g,k=k*k,d=d*d;e=.5+(d-k)/(2*h);k=Math.sqrt(Math.max(0,2*k*(d+h)-(d-=h)*d-k*k))/(2*h);b.x=a.x+e*f+k*g;b.y=a.y+e*g-k*f}else b.x=a.x+d,b.y=a.y}function xf(a,e){return a.parent==e.parent?1:2}function od(a){var e=a.children;return e.length?e[0]:a.t}function pd(a){var e,b=a.children;return(e=b.length)?b[e-1]:a.t}function Ph(a){return 1+s.max(a,function(a){return a.y})}function Qh(a){return a.reduce(function(a,
b){return a+b.x},0)/a.length}function yf(a){var e=a.children;return e&&e.length?yf(e[0]):a}function zf(a){var e,b=a.children;return b&&(e=b.length)?zf(b[e-1]):a}function qd(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Af(a,e){var b=a.x+e[3],d=a.y+e[0],f=a.dx-e[1]-e[3],g=a.dy-e[0]-e[2];return 0>f&&(b+=f/2,f=0),0>g&&(d+=g/2,g=0),{x:b,y:d,dx:f,dy:g}}function lb(a){var e=a[0];a=a[a.length-1];return a>e?[e,a]:[a,e]}function fc(a){return a.rangeExtent?a.rangeExtent():lb(a.range())}function Rh(a,e,b,
d){var f=b(a[0],a[1]),g=d(e[0],e[1]);return function(a){return g(f(a))}}function gc(a,e){var b,d=0,f=a.length-1,g=a[d],k=a[f];return g>k&&(b=d,d=f,f=b,b=g,g=k,k=b),a[d]=e.floor(g),a[f]=e.ceil(k),a}function Bf(a){return a?{floor:function(e){return Math.floor(e/a)*a},ceil:function(e){return Math.ceil(e/a)*a}}:Sh}function Th(a,e,b,d){var f=[],g=[],k=0,h=Math.min(a.length,e.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),e=e.slice().reverse());++k<=h;)f.push(b(a[k-1],a[k])),g.push(d(e[k-1],e[k]));return function(e){var b=
s.bisect(a,e,1,h)-1;return g[b](f[b](e))}}function Cf(a,e,b,d){function f(){var n=2<Math.min(a.length,e.length)?Th:Rh,D=d?uh:th;return k=n(a,e,D,b),h=n(e,a,D,Wa),g}function g(a){return k(a)}var k,h;return g.invert=function(a){return h(a)},g.domain=function(e){return arguments.length?(a=e.map(Number),f()):a},g.range=function(a){return arguments.length?(e=a,f()):e},g.rangeRound=function(a){return g.range(a).interpolate(lf)},g.clamp=function(a){return arguments.length?(d=a,f()):d},g.interpolate=function(a){return arguments.length?
(b=a,f()):b},g.ticks=function(e){return s.range.apply(s,Ma(a,e))},g.tickFormat=function(e,b){return rd(a,e,b)},g.nice=function(e){return gc(a,Bf(Ma(a,e)[2])),f()},g.copy=function(){return Cf(a,e,b,d)},f()}function sd(a,e){return s.rebind(a,e,"range","rangeRound","interpolate","clamp")}function Ma(a,e){null==e&&(e=10);var b=lb(a),d=b[1]-b[0],f=Math.pow(10,Math.floor(Math.log(d/e)/Math.LN10)),d=e/d*f;return.15>=d?f*=10:.35>=d?f*=5:.75>=d&&(f*=2),b[0]=Math.ceil(b[0]/f)*f,b[1]=Math.floor(b[1]/f)*f+.5*
f,b[2]=f,b}function rd(a,e,b){a=Ma(a,e);if(b){e=le.exec(b);if(e.shift(),"s"===e[8]){var d=s.formatPrefix(Math.max(H(a[0]),H(a[1])));return e[7]||(e[7]="."+hc(d.scale(a[2]))),e[8]="f",b=s.format(e.join("")),function(a){return b(d.scale(a))+d.symbol}}e[7]||(e[7]="."+Uh(e[8],a));b=e.join("")}else b=",."+hc(a[2])+"f";return s.format(b)}function hc(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function Uh(a,e){var b=hc(e[2]);return a in Vh?Math.abs(b-hc(Math.max(H(e[0]),H(e[1]))))+ +("e"!==a):b-2*("%"===
a)}function Df(a,e,b,d){function f(a){return(b?Math.log(0>a?0:a):-Math.log(0<a?0:-a))/Math.log(e)}function g(a){return b?Math.pow(e,a):-Math.pow(e,-a)}function k(e){return a(f(e))}return k.invert=function(e){return g(a.invert(e))},k.domain=function(e){return arguments.length?(b=0<=e[0],a.domain((d=e.map(Number)).map(f)),k):d},k.base=function(b){return arguments.length?(e=+b,a.domain(d.map(f)),k):e},k.nice=function(){var e=gc(d.map(f),b?Math:Wh);return a.domain(e),d=e.map(g),k},k.ticks=function(){var a=
lb(d),k=[],h=a[0],a=a[1],n=Math.floor(f(h)),m=Math.ceil(f(a)),q=e%1?2:e;if(isFinite(m-n)){if(b){for(;m>n;n++)for(var p=1;q>p;p++)k.push(g(n)*p);k.push(g(n))}else for(k.push(g(n));n++<m;)for(p=q-1;0<p;p--)k.push(g(n)*p);for(n=0;k[n]<h;n++);for(m=k.length;k[m-1]>a;m--);k=k.slice(n,m)}return k},k.tickFormat=function(a,e){if(!arguments.length)return Ef;2>arguments.length?e=Ef:"function"!=typeof e&&(e=s.format(e));var d,y=Math.max(.1,a/k.ticks().length),h=b?(d=1E-12,Math.ceil):(d=-1E-12,Math.floor);return function(a){return a/
g(h(f(a)+d))<=y?e(a):""}},k.copy=function(){return Df(a.copy(),e,b,d)},sd(k,a)}function Ff(a,e,b){function d(e){return a(f(e))}var f=ic(e),g=ic(1/e);return d.invert=function(e){return g(a.invert(e))},d.domain=function(e){return arguments.length?(a.domain((b=e.map(Number)).map(f)),d):b},d.ticks=function(a){return s.range.apply(s,Ma(b,a))},d.tickFormat=function(a,e){return rd(b,a,e)},d.nice=function(a){return d.domain(gc(b,Bf(Ma(b,a)[2])))},d.exponent=function(k){return arguments.length?(f=ic(e=k),
g=ic(1/e),a.domain(b.map(f)),d):e},d.copy=function(){return Ff(a.copy(),e,b)},sd(d,a)}function ic(a){return function(e){return 0>e?-Math.pow(-e,a):Math.pow(e,a)}}function Gf(a,e){function b(l){return g[((f.get(l)||("range"===e.t?f.set(l,a.push(l)):0/0))-1)%g.length]}function d(e,b){return s.range(a.length).map(function(a){return e+b*a})}var f,g,h;return b.domain=function(d){if(!arguments.length)return a;a=[];f=new k;for(var g,u=-1,y=d.length;++u<y;)f.has(g=d[u])||f.set(g,a.push(g));return b[e.t].apply(b,
e.a)},b.range=function(a){return arguments.length?(g=a,h=0,e={t:"range",a:arguments},b):g},b.rangePoints=function(f,k){2>arguments.length&&(k=0);var n=f[0],m=f[1],D=(m-n)/(Math.max(1,a.length-1)+k);return g=d(2>a.length?(n+m)/2:n+D*k/2,D),h=0,e={t:"rangePoints",a:arguments},b},b.rangeBands=function(f,k,n){2>arguments.length&&(k=0);3>arguments.length&&(n=k);var m=f[1]<f[0],D=f[m-0],q=(f[1-m]-D)/(a.length-k+2*n);return g=d(D+q*n,q),m&&g.reverse(),h=q*(1-k),e={t:"rangeBands",a:arguments},b},b.rangeRoundBands=
function(f,k,n){2>arguments.length&&(k=0);3>arguments.length&&(n=k);var m=f[1]<f[0],D=f[m-0],q=f[1-m],p=Math.floor((q-D)/(a.length-k+2*n));return g=d(D+Math.round((q-D-(a.length-k)*p)/2),p),m&&g.reverse(),h=Math.round(p*(1-k)),e={t:"rangeRoundBands",a:arguments},b},b.rangeBand=function(){return h},b.rangeExtent=function(){return lb(e.a[0])},b.copy=function(){return Gf(a,e)},b.domain(a)}function Hf(a,e){function b(){var l=0,f=e.length;for(g=[];++l<f;)g[l-1]=s.quantile(a,l/f);return d}function d(a){return isNaN(a=
+a)?void 0:e[s.bisect(g,a)]}var g;return d.domain=function(e){return arguments.length?(a=e.filter(h).sort(f),b()):a},d.range=function(a){return arguments.length?(e=a,b()):e},d.quantiles=function(){return g},d.invertExtent=function(b){return b=e.indexOf(b),0>b?[0/0,0/0]:[0<b?g[b-1]:a[0],b<g.length?g[b]:a[a.length-1]]},d.copy=function(){return Hf(a,e)},b()}function If(a,e,b){function d(e){return b[Math.max(0,Math.min(k,Math.floor(g*(e-a))))]}function f(){return g=b.length/(e-a),k=b.length-1,d}var g,
k;return d.domain=function(b){return arguments.length?(a=+b[0],e=+b[b.length-1],f()):[a,e]},d.range=function(a){return arguments.length?(b=a,f()):b},d.invertExtent=function(e){return e=b.indexOf(e),e=0>e?0/0:e/g+a,[e,e+1/g]},d.copy=function(){return If(a,e,b)},f()}function Jf(a,e){function b(l){return l>=l?e[s.bisect(a,l)]:void 0}return b.domain=function(e){return arguments.length?(a=e,b):a},b.range=function(a){return arguments.length?(e=a,b):e},b.invertExtent=function(b){return b=e.indexOf(b),[a[b-
1],a[b]]},b.copy=function(){return Jf(a,e)},b}function Kf(a){function e(a){return+a}return e.invert=e,e.domain=e.range=function(b){return arguments.length?(a=b.map(e),e):a},e.ticks=function(e){return s.range.apply(s,Ma(a,e))},e.tickFormat=function(e,b){return rd(a,e,b)},e.copy=function(){return Kf(a)},e}function Xh(a){return a.innerRadius}function Yh(a){return a.outerRadius}function Lf(a){return a.startAngle}function Mf(a){return a.endAngle}function Nf(a){function e(e){function k(){m.push("M",g(a(q),
h))}for(var n,m=[],q=[],p=-1,s=e.length,S=K(b),r=K(d);++p<s;)f.call(this,n=e[p],p)?q.push([+S.call(this,n,p),+r.call(this,n,p)]):q.length&&(k(),q=[]);return q.length&&k(),m.length?m.join(""):null}var b=gb,d=ub,f=fb,g=ga,k=g.key,h=.7;return e.x=function(a){return arguments.length?(b=a,e):b},e.y=function(a){return arguments.length?(d=a,e):d},e.defined=function(a){return arguments.length?(f=a,e):f},e.interpolate=function(a){return arguments.length?(k="function"==typeof a?g=a:(g=td.get(a)||ga).key,e):
k},e.tension=function(a){return arguments.length?(h=a,e):h},e}function ga(a){return a.join("L")}function ud(a){for(var e=0,b=a.length,d=a[0],f=[d[0],",",d[1]];++e<b;)f.push("V",(d=a[e])[1],"H",d[0]);return f.join("")}function vd(a){for(var e=0,b=a.length,d=a[0],f=[d[0],",",d[1]];++e<b;)f.push("H",(d=a[e])[0],"V",d[1]);return f.join("")}function jc(a,e){if(1>e.length||a.length!=e.length&&a.length!=e.length+2)return ga(a);var b=a.length!=e.length,d="",f=a[0],g=a[1],k=e[0],h=k,n=1;if(b&&(d+="Q"+(g[0]-
2*k[0]/3)+","+(g[1]-2*k[1]/3)+","+g[0]+","+g[1],f=a[1],n=2),1<e.length)for(h=e[1],g=a[n],n++,d+="C"+(f[0]+k[0])+","+(f[1]+k[1])+","+(g[0]-h[0])+","+(g[1]-h[1])+","+g[0]+","+g[1],f=2;f<e.length;f++,n++)g=a[n],h=e[f],d+="S"+(g[0]-h[0])+","+(g[1]-h[1])+","+g[0]+","+g[1];b&&(b=a[n],d+="Q"+(g[0]+2*h[0]/3)+","+(g[1]+2*h[1]/3)+","+b[0]+","+b[1]);return d}function wd(a,e){for(var b,d=[],f=(1-e)/2,g=a[0],k=a[1],h=1,n=a.length;++h<n;)b=g,g=k,k=a[h],d.push([f*(k[0]-b[0]),f*(k[1]-b[1])]);return d}function Of(a){if(3>
a.length)return ga(a);var e=1,b=a.length,d=a[0],f=d[0],g=d[1],k=[f,f,f,(d=a[1])[0]],h=[g,g,g,d[1]],f=[f,",",g,"L",ja(Na,k),",",ja(Na,h)];for(a.push(a[b-1]);++e<=b;)d=a[e],k.shift(),k.push(d[0]),h.shift(),h.push(d[1]),xd(f,k,h);return a.pop(),f.push("L",d),f.join("")}function ja(a,e){return a[0]*e[0]+a[1]*e[1]+a[2]*e[2]+a[3]*e[3]}function xd(a,e,b){a.push("C",ja(Pf,e),",",ja(Pf,b),",",ja(Qf,e),",",ja(Qf,b),",",ja(Na,e),",",ja(Na,b))}function yd(a,e){return(e[1]-a[1])/(e[0]-a[0])}function Rf(a){for(var e,
b,d,f=-1,g=a.length;++f<g;)e=a[f],b=e[0],d=e[1]+Xa,e[0]=b*Math.cos(d),e[1]=b*Math.sin(d);return a}function Sf(a){function e(e){function n(){t.push("M",h(a(J),p),q,m(a(w.reverse()),p),"Z")}for(var s,r,Td,t=[],w=[],J=[],v=-1,x=e.length,z=K(b),za=K(f),N=b===d?function(){return r}:K(d),B=f===g?function(){return Td}:K(g);++v<x;)k.call(this,s=e[v],v)?(w.push([r=+z.call(this,s,v),Td=+za.call(this,s,v)]),J.push([+N.call(this,s,v),+B.call(this,s,v)])):w.length&&(n(),w=[],J=[]);return w.length&&n(),t.length?
t.join(""):null}var b=gb,d=gb,f=0,g=ub,k=fb,h=ga,n=h.key,m=h,q="L",p=.7;return e.x=function(a){return arguments.length?(b=d=a,e):d},e.x0=function(a){return arguments.length?(b=a,e):b},e.x1=function(a){return arguments.length?(d=a,e):d},e.y=function(a){return arguments.length?(f=g=a,e):g},e.y0=function(a){return arguments.length?(f=a,e):f},e.y1=function(a){return arguments.length?(g=a,e):g},e.defined=function(a){return arguments.length?(k=a,e):k},e.interpolate=function(a){return arguments.length?(n=
"function"==typeof a?h=a:(h=td.get(a)||ga).key,m=h.reverse||h,q=h.closed?"M":"L",e):n},e.tension=function(a){return arguments.length?(p=a,e):p},e}function Zh(a){return a.radius}function Tf(a){return[a.x,a.y]}function $h(a){return function(){var e=a.apply(this,arguments),b=e[0],e=e[1]+Xa;return[b*Math.cos(e),b*Math.sin(e)]}}function ai(){return 64}function bi(){return"circle"}function Uf(a){a=Math.sqrt(a/F);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function Cb(a,e){return Eb(a,
W),a.id=e,a}function zd(a,e,b,d){var f=a.id;return va(a,"function"==typeof b?function(a,g,k){a.__transition__[f].tween.set(e,d(b.call(a,a.__data__,g,k)))}:(b=d(b),function(a){a.__transition__[f].tween.set(e,b)}))}function ci(a){return null==a&&(a=""),function(){this.textContent=a}}function kc(a,e,b,d){var f=a.__transition__||(a.__transition__={active:0,count:0}),g=f[b];if(!g){var h=d.time,g=f[b]={tween:new k,time:h,ease:d.ease,delay:d.delay,duration:d.duration};++f.count;s.timer(function(d){function k(d){return f.active>
b?y():(f.active=b,g.event&&g.event.start.call(a,m,e),g.tween.forEach(function(b,d){(d=d.call(a,m,e))&&w.push(d)}),s.timer(function(){return t.c=n(d||1)?fb:n,1},0,h),void 0)}function n(d){if(f.active!==b)return y();d/=r;for(var k=q(d),h=w.length;0<h;)w[--h].call(a,k);return 1<=d?(g.event&&g.event.end.call(a,m,e),y()):void 0}function y(){return--f.count?delete f[b]:delete a.__transition__,1}var m=a.__data__,q=g.ease,p=g.delay,r=g.duration,t=ya,w=[];return t.t=p+h,d>=p?k(d-p):(t.c=k,void 0)},0,h)}}function Vf(a,
e){a.attr("transform",function(a){return"translate("+e(a)+",0)"})}function Wf(a,e){a.attr("transform",function(a){return"translate(0,"+e(a)+")"})}function Ad(a){return a.toISOString()}function Bd(a,e,b){function d(e){return a(e)}function f(a,b){var d=(a[1]-a[0])/b,l=s.bisect(lc,d);return l==lc.length?[e.year,Ma(a.map(function(a){return a/31536E6}),b)[2]]:l?e[d/lc[l-1]<lc[l]/d?l-1:l]:[di,Ma(a,b)[2]]}return d.invert=function(e){return Ya(a.invert(e))},d.domain=function(e){return arguments.length?(a.domain(e),
d):a.domain().map(Ya)},d.nice=function(a,e){function b(d){return!isNaN(d)&&!a.range(d,Ya(+d+1),e).length}var l=d.domain(),g=lb(l),g=null==a?f(g,10):"number"==typeof a&&f(g,a);return g&&(a=g[0],e=g[1]),d.domain(gc(l,1<e?{floor:function(e){for(;b(e=a.floor(e));)e=Ya(e-1);return e},ceil:function(e){for(;b(e=a.ceil(e));)e=Ya(+e+1);return e}}:a))},d.ticks=function(a,e){var b=lb(d.domain()),l=null==a?f(b,10):"number"==typeof a?f(b,a):!a.range&&[{range:a},e];return l&&(a=l[0],e=l[1]),a.range(b[0],Ya(+b[1]+
1),1>e?1:e)},d.tickFormat=function(){return b},d.copy=function(){return Bd(a.copy(),e,b)},sd(d,a)}function Ya(a){return new Date(a)}function ei(a){return JSON.parse(a.responseText)}function fi(a){var e=qa.createRange();return e.selectNode(qa.body),e.createContextualFragment(a.responseText)}var s={version:"3.4.12"};Date.now||(Date.now=function(){return+new Date});var Xf=[].slice,Fa=function(a){return Xf.call(a)},qa=document,xa=qa.documentElement,aa=window;try{Fa(xa.childNodes)[0].nodeType}catch(Fi){Fa=
function(a){for(var e=a.length,b=Array(e);e--;)b[e]=a[e];return b}}try{qa.createElement("div").style.setProperty("opacity",0,"")}catch(Gi){var mc=aa.Element.prototype,gi=mc.setAttribute,hi=mc.setAttributeNS,Yf=aa.CSSStyleDeclaration.prototype,ii=Yf.setProperty;mc.setAttribute=function(a,e){gi.call(this,a,e+"")};mc.setAttributeNS=function(a,e,b){hi.call(this,a,e,b+"")};Yf.setProperty=function(a,e,b){ii.call(this,a,e+"",b)}}s.ascending=f;s.descending=function(a,e){return a>e?-1:e>a?1:e>=a?0:0/0};s.min=
function(a,e){var b,d,f=-1,g=a.length;if(1===arguments.length){for(;++f<g&&!(null!=(b=a[f])&&b>=b);)b=void 0;for(;++f<g;)null!=(d=a[f])&&b>d&&(b=d)}else{for(;++f<g&&!(null!=(b=e.call(a,a[f],f))&&b>=b);)b=void 0;for(;++f<g;)null!=(d=e.call(a,a[f],f))&&b>d&&(b=d)}return b};s.max=function(a,e){var b,d,f=-1,g=a.length;if(1===arguments.length){for(;++f<g&&!(null!=(b=a[f])&&b>=b);)b=void 0;for(;++f<g;)null!=(d=a[f])&&d>b&&(b=d)}else{for(;++f<g&&!(null!=(b=e.call(a,a[f],f))&&b>=b);)b=void 0;for(;++f<g;)null!=
(d=e.call(a,a[f],f))&&d>b&&(b=d)}return b};s.extent=function(a,e){var b,d,f,g=-1,k=a.length;if(1===arguments.length){for(;++g<k&&!(null!=(b=f=a[g])&&b>=b);)b=f=void 0;for(;++g<k;)null!=(d=a[g])&&(b>d&&(b=d),d>f&&(f=d))}else{for(;++g<k&&!(null!=(b=f=e.call(a,a[g],g))&&b>=b);)b=void 0;for(;++g<k;)null!=(d=e.call(a,a[g],g))&&(b>d&&(b=d),d>f&&(f=d))}return[b,f]};s.sum=function(a,e){var b,d=0,f=a.length,g=-1;if(1===arguments.length)for(;++g<f;)isNaN(b=+a[g])||(d+=b);else for(;++g<f;)isNaN(b=+e.call(a,
a[g],g))||(d+=b);return d};s.mean=function(a,e){var b,d=0,f=a.length,g=-1,k=f;if(1===arguments.length)for(;++g<f;)h(b=a[g])?d+=b:--k;else for(;++g<f;)h(b=e.call(a,a[g],g))?d+=b:--k;return k?d/k:void 0};s.quantile=function(a,e){var b=(a.length-1)*e+1,d=Math.floor(b),f=+a[d-1];return(b-=d)?f+b*(a[d]-f):f};s.median=function(a,e){return 1<arguments.length&&(a=a.map(e)),a=a.filter(h),a.length?s.quantile(a.sort(f),.5):void 0};var Zf=d(f);s.bisectLeft=Zf.left;s.bisect=s.bisectRight=Zf.right;s.bisector=function(a){return d(1===
a.length?function(e,b){return f(a(e),b)}:a)};s.shuffle=function(a){for(var e,b,d=a.length;d;)b=0|Math.random()*d--,e=a[d],a[d]=a[b],a[b]=e;return a};s.permute=function(a,e){for(var b=e.length,d=Array(b);b--;)d[b]=a[e[b]];return d};s.pairs=function(a){for(var e=0,b=a.length-1,d=a[0],f=Array(0>b?0:b);b>e;)f[e]=[d,d=a[++e]];return f};s.zip=function(){if(!(d=arguments.length))return[];for(var a=-1,e=s.min(arguments,g),b=Array(e);++a<e;)for(var d,f=-1,k=b[a]=Array(d);++f<d;)k[f]=arguments[f][a];return b};
s.transpose=function(a){return s.zip.apply(s,a)};s.keys=function(a){var e=[],b;for(b in a)e.push(b);return e};s.values=function(a){var e=[],b;for(b in a)e.push(a[b]);return e};s.entries=function(a){var e=[],b;for(b in a)e.push({key:b,value:a[b]});return e};s.merge=function(a){var e,b,d,f=a.length;e=-1;for(var g=0;++e<f;)g+=a[e].length;for(b=Array(g);0<=--f;)for(d=a[f],e=d.length;0<=--e;)b[--g]=d[e];return b};var H=Math.abs;s.range=function(a,e,b){if(3>arguments.length&&(b=1,2>arguments.length&&(e=
a,a=0)),1/0===(e-a)/b)throw Error("infinite range");var d,f=[],g;d=H(b);for(g=1;d*g%1;)g*=10;var k=-1;if(a*=g,e*=g,b*=g,0>b)for(;(d=a+b*++k)>e;)f.push(d/g);else for(;(d=a+b*++k)<e;)f.push(d/g);return f};s.map=function(a){var e=new k;if(a instanceof k)a.forEach(function(a,b){e.set(a,b)});else for(var b in a)e.set(b,a[b]);return e};b(k,{has:n,get:function(a){return this[Pa+a]},set:function(a,e){return this[Pa+a]=e},remove:function(a){return a=Pa+a,a in this&&delete this[a]},keys:q,values:function(){var a=
[];return this.forEach(function(e,b){a.push(b)}),a},entries:function(){var a=[];return this.forEach(function(e,b){a.push({key:e,value:b})}),a},size:m,empty:p,forEach:function(a){for(var e in this)e.charCodeAt(0)===Db&&a.call(this,e.slice(1),this[e])}});var Pa="\x00",Db=Pa.charCodeAt(0);s.nest=function(){function a(e,h,n){if(n>=g.length)return d?d.call(f,h):b?h.sort(b):h;for(var m,q,p,s,r=-1,S=h.length,t=g[n++],w=new k;++r<S;)(s=w.get(m=t(q=h[r])))?s.push(q):w.set(m,[q]);return e?(q=e(),p=function(b,
d){q.set(b,a(e,d,n))}):(q={},p=function(b,d){q[b]=a(e,d,n)}),w.forEach(p),q}function e(a,b){if(b>=g.length)return a;var d=[],f=h[b++];return a.forEach(function(a,f){d.push({key:a,values:e(f,b)})}),f?d.sort(function(a,e){return f(a.key,e.key)}):d}var b,d,f={},g=[],h=[];return f.map=function(e,b){return a(b,e,0)},f.entries=function(b){return e(a(s.map,b,0),0)},f.key=function(a){return g.push(a),f},f.sortKeys=function(a){return h[g.length-1]=a,f},f.sortValues=function(a){return b=a,f},f.rollup=function(a){return d=
a,f},f};s.set=function(a){var e=new r;if(a)for(var b=0,d=a.length;d>b;++b)e.add(a[b]);return e};b(r,{has:n,add:function(a){return this[Pa+a]=!0,a},remove:function(a){return a=Pa+a,a in this&&delete this[a]},values:q,size:m,empty:p,forEach:function(a){for(var e in this)e.charCodeAt(0)===Db&&a.call(this,e.slice(1))}});s.behavior={};s.rebind=function(a,e){for(var b,d=1,f=arguments.length;++d<f;)a[b=arguments[d]]=t(a,e,e[b]);return a};var Sd="webkit ms moz Moz o O".split(" ");s.dispatch=function(){for(var a=
new w,e=-1,b=arguments.length;++e<b;)a[arguments[e]]=z(a);return a};w.prototype.on=function(a,e){var b=a.indexOf("."),d="";if(0<=b&&(d=a.slice(b+1),a=a.slice(0,b)),a)return 2>arguments.length?this[a].on(d):this[a].on(d,e);if(2===arguments.length){if(null==e)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}};s.event=null;s.requote=function(a){return a.replace(ji,"\\$&")};var ji=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Eb={}.__proto__?function(a,e){a.__proto__=e}:function(a,e){for(var b in e)a[b]=
e[b]},Cc=function(a,e){return e.querySelector(a)},Dc=function(a,e){return e.querySelectorAll(a)},ki=xa.matches||xa[x(xa,"matchesSelector")],Ud=function(a,e){return ki.call(a,e)};"function"==typeof Sizzle&&(Cc=function(a,e){return Sizzle(a,e)[0]||null},Dc=Sizzle,Ud=Sizzle.matchesSelector);s.selection=function(){return $f};var L=s.selection.prototype=[];L.select=function(a){var e,b,d,f,g=[];a=U(a);for(var k=-1,h=this.length;++k<h;){g.push(e=[]);e.parentNode=(d=this[k]).parentNode;for(var n=-1,m=d.length;++n<
m;)(f=d[n])?(e.push(b=a.call(f,f.__data__,n,k)),b&&"__data__"in f&&(b.__data__=f.__data__)):e.push(null)}return B(g)};L.selectAll=function(a){var e,b,d=[];a=Jd(a);for(var f=-1,g=this.length;++f<g;)for(var k=this[f],h=-1,n=k.length;++h<n;)(b=k[h])&&(d.push(e=Fa(a.call(b,b.__data__,h,f))),e.parentNode=b);return B(d)};var Cd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};
s.ns={prefix:Cd,qualify:function(a){var e=a.indexOf(":"),b=a;return 0<=e&&(b=a.slice(0,e),a=a.slice(e+1)),Cd.hasOwnProperty(b)?{space:Cd[b],local:a}:a}};L.attr=function(a,e){if(2>arguments.length){if("string"==typeof a){var b=this.node();return a=s.ns.qualify(a),a.local?b.getAttributeNS(a.space,a.local):b.getAttribute(a)}for(e in a)this.each(Kd(e,a[e]));return this}return this.each(Kd(a,e))};L.classed=function(a,e){if(2>arguments.length){if("string"==typeof a){var b=this.node(),d=(a=(a+"").trim().split(/^|\s+/)).length,
f=-1;if(e=b.classList)for(;++f<d;){if(!e.contains(a[f]))return!1}else for(e=b.getAttribute("class");++f<d;)if(!Md(a[f]).test(e))return!1;return!0}for(e in a)this.each(Nd(e,a[e]));return this}return this.each(Nd(a,e))};L.style=function(a,e,b){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(e="");for(b in a)this.each(Od(b,a[b],e));return this}if(2>d)return aa.getComputedStyle(this.node(),null).getPropertyValue(a);b=""}return this.each(Od(a,e,b))};L.property=function(a,e){if(2>arguments.length){if("string"==
typeof a)return this.node()[a];for(e in a)this.each(Pd(e,a[e]));return this}return this.each(Pd(a,e))};L.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var e=a.apply(this,arguments);this.textContent=null==e?"":e}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};L.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var e=a.apply(this,arguments);this.innerHTML=null==e?"":e}:null==a?function(){this.innerHTML=
""}:function(){this.innerHTML=a}):this.node().innerHTML};L.append=function(a){return a=Qd(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})};L.insert=function(a,e){return a=Qd(a),e=U(e),this.select(function(){return this.insertBefore(a.apply(this,arguments),e.apply(this,arguments)||null)})};L.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};L.data=function(a,e){function b(a,d){var f,g,l,h=a.length,u=d.length,y=Math.min(h,u),p=
Array(u),D=Array(u),s=Array(h);if(e){var r=new k,t=new k,S=[];for(f=-1;++f<h;)y=e.call(g=a[f],g.__data__,f),r.has(y)?s[f]=g:r.set(y,g),S.push(y);for(f=-1;++f<u;)y=e.call(d,l=d[f],f),(g=r.get(y))?(p[f]=g,g.__data__=l):t.has(y)||(D[f]={__data__:l}),t.set(y,l),r.remove(y);for(f=-1;++f<h;)r.has(S[f])&&(s[f]=a[f])}else{for(f=-1;++f<y;)g=a[f],l=d[f],g?(g.__data__=l,p[f]=g):D[f]={__data__:l};for(;u>f;++f)D[f]={__data__:d[f]};for(;h>f;++f)s[f]=a[f]}D.update=p;D.parentNode=p.parentNode=s.parentNode=a.parentNode;
n.push(D);m.push(p);q.push(s)}var d,f,g=-1,h=this.length;if(!arguments.length){for(a=Array(h=(d=this[0]).length);++g<h;)(f=d[g])&&(a[g]=f.__data__);return a}var n=Vd([]),m=B([]),q=B([]);if("function"==typeof a)for(;++g<h;)b(d=this[g],a.call(d,d.parentNode.__data__,g));else for(;++g<h;)b(d=this[g],a);return m.enter=function(){return n},m.exit=function(){return q},m};L.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};L.filter=function(a){var e,b,d,f=[];
"function"!=typeof a&&(a=Rd(a));for(var g=0,k=this.length;k>g;g++){f.push(e=[]);e.parentNode=(b=this[g]).parentNode;for(var h=0,n=b.length;n>h;h++)(d=b[h])&&a.call(d,d.__data__,h,g)&&e.push(d)}return B(f)};L.order=function(){for(var a=-1,e=this.length;++a<e;)for(var b,d=this[a],f=d.length-1,g=d[f];0<=--f;)(b=d[f])&&(g&&g!==b.nextSibling&&g.parentNode.insertBefore(b,g),g=b);return this};L.sort=function(a){a=sg.apply(this,arguments);for(var e=-1,b=this.length;++e<b;)this[e].sort(a);return this.order()};
L.each=function(a){return va(this,function(e,b,d){a.call(e,e.__data__,b,d)})};L.call=function(a){var e=Fa(arguments);return a.apply(e[0]=this,e),this};L.empty=function(){return!this.node()};L.node=function(){for(var a=0,e=this.length;e>a;a++)for(var b=this[a],d=0,f=b.length;f>d;d++){var g=b[d];if(g)return g}return null};L.size=function(){var a=0;return va(this,function(){++a}),a};var wa=[];s.selection.enter=Vd;s.selection.enter.prototype=wa;wa.append=L.append;wa.empty=L.empty;wa.node=L.node;wa.call=
L.call;wa.size=L.size;wa.select=function(a){for(var e,b,d,f,g,k=[],h=-1,n=this.length;++h<n;){d=(f=this[h]).update;k.push(e=[]);e.parentNode=f.parentNode;for(var m=-1,q=f.length;++m<q;)(g=f[m])?(e.push(d[m]=b=a.call(f.parentNode,g.__data__,m,h)),b.__data__=g.__data__):e.push(null)}return B(k)};wa.insert=function(a,e){return 2>arguments.length&&(e=tg(this)),L.insert.call(this,a,e)};L.transition=function(){for(var a,e,b=Za||++ag,d=[],f=nc||{time:Date.now(),ease:oh,delay:0,duration:250},g=-1,k=this.length;++g<
k;){d.push(a=[]);for(var h=this[g],n=-1,m=h.length;++n<m;)(e=h[n])&&kc(e,n,b,f),a.push(e)}return Cb(d,b)};L.interrupt=function(){return this.each(Fb)};s.select=function(a){a=["string"==typeof a?Cc(a,qa):a];return a.parentNode=xa,B([a])};s.selectAll=function(a){a=Fa("string"==typeof a?Dc(a,qa):a);return a.parentNode=xa,B([a])};var $f=s.select(xa);L.on=function(a,e,b){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(e=!1);for(b in a)this.each(Wd(b,a[b],e));return this}if(2>d)return(d=this.node()["__on"+
a])&&d._;b=!1}return this.each(Wd(a,e,b))};var Ec=s.map({mouseenter:"mouseover",mouseleave:"mouseout"});Ec.forEach(function(a){"on"+a in qa&&Ec.remove(a)});var ob="onselectstart"in qa?null:x(xa.style,"userSelect"),vg=0;s.mouse=function(a){return Fc(a,P())};var Gc=/WebKit/.test(aa.navigator.userAgent)?-1:0;s.touch=function(a,e,b){if(3>arguments.length&&(b=e,e=P().changedTouches),e)for(var d,f=0,g=e.length;g>f;++f)if((d=e[f]).identifier===b)return Fc(a,d)};s.behavior.drag=function(){function a(){this.on("mousedown.drag",
f).on("touchstart.drag",g)}function e(a,e,f,g,k){return function(){var h,n=s.event.target,u=this.parentNode,m=b.of(this,arguments),q=0,p=a(),D=".drag"+(null==p?"":"-"+p),r=s.select(f()).on(g+D,function(){var a,b,d=e(u,p);d&&(a=d[0]-w[0],b=d[1]-w[1],q=q|a|b,w=d,m({type:"drag",x:d[0]+h[0],y:d[1]+h[1],dx:a,dy:b}))}).on(k+D,function(){e(u,p)&&(r.on(g+D,null).on(k+D,null),t(q&&s.event.target===n),m({type:"dragend"}))}),t=Gb(),w=e(u,p);d?(h=d.apply(this,arguments),h=[h.x-w[0],h.y-w[1]]):h=[0,0];m({type:"dragstart"})}}
var b=Oa(a,"drag","dragstart","dragend"),d=null,f=e(v,s.mouse,yg,"mousemove","mouseup"),g=e(wg,s.touch,xg,"touchmove","touchend");return a.origin=function(e){return arguments.length?(d=e,a):d},s.rebind(a,b,"on")};s.touches=function(a,e){return 2>arguments.length&&(e=P().touches),e?Fa(e).map(function(e){var b=Fc(a,e);return b.identifier=e.identifier,b}):[]};var F=Math.PI,fa=2*F,Y=F/2,A=1E-6,ed=A*A,E=F/180,O=180/F,oc=Math.SQRT2;s.interpolateZoom=function(a,e){function b(a){var e=a*t;if(r){a=Zd(s);var l=
g/(2*q),k,m=oc*e+s;k=((m=Math.exp(2*m))-1)/(m+1);k*=a;var p=s,m=((p=Math.exp(p))-1/p)/2,l=l*(k-m);return[d+l*h,f+l*n,g*a/Zd(oc*e+s)]}return[d+a*h,f+a*n,g*Math.exp(oc*e)]}var d=a[0],f=a[1],g=a[2],k=e[2],h=e[0]-d,n=e[1]-f,m=h*h+n*n,q=Math.sqrt(m),p=(k*k-g*g+4*m)/(4*g*q),m=(k*k-g*g-4*m)/(4*k*q),s=Math.log(Math.sqrt(p*p+1)-p),r=Math.log(Math.sqrt(m*m+1)-m)-s,t=(r||Math.log(k/g))/oc;return b.duration=1E3*t,b};s.behavior.zoom=function(){function a(a){a.on(B,n).on(li+".zoom",q).on("dblclick.zoom",p).on(C,
m)}function e(a){return[(a[0]-G.x)/G.k,(a[1]-G.y)/G.k]}function b(a){G.k=Math.max(za[0],Math.min(za[1],a))}function d(a,e){e=[e[0]*G.k+G.x,e[1]*G.k+G.y];G.x+=a[0]-e[0];G.y+=a[1]-e[1]}function f(){I&&I.domain(z.range().map(function(a){return(a-G.x)/G.k}).map(z.invert));V&&V.domain(J.range().map(function(a){return(a-G.y)/G.k}).map(J.invert))}function g(a){a({type:"zoomstart"})}function k(a){f();a({type:"zoom",scale:G.k,translate:[G.x,G.y]})}function h(a){a({type:"zoomend"})}function n(){var a=this,
b=s.event.target,f=P.of(a,arguments),l=0,m=s.select(aa).on(bb,function(){l=1;d(s.mouse(a),q);k(f)}).on(A,function(){m.on(bb,null).on(A,null);p(l&&s.event.target===b);h(f)}),q=e(s.mouse(a)),p=Gb();Fb.call(a);g(f)}function m(){function a(){var b=s.touches(r);return D=G.k,b.forEach(function(a){a.identifier in w&&(w[a.identifier]=e(a))}),b}function f(){var e=s.event.target;s.select(e).on(ka,q).on(v,p);Ga.push(e);for(var e=s.event.changedTouches,g=0,h=e.length;h>g;++g)w[e[g].identifier]=null;h=a();g=Date.now();
1===h.length?(500>g-x&&(e=h[0],h=w[e.identifier],b(2*G.k),d(e,h),N(),k(t)),x=g):1<h.length&&(e=h[0],h=h[1],g=e[0]-h[0],e=e[1]-h[1],T=g*g+e*e)}function q(){for(var a,e,f,g,h=s.touches(r),n=0,u=h.length;u>n;++n,g=null)if(f=h[n],g=w[f.identifier]){if(e)break;a=f;e=g}if(g){var m=(m=f[0]-a[0])*m+(m=f[1]-a[1])*m,h=T&&Math.sqrt(m/T);a=[(a[0]+f[0])/2,(a[1]+f[1])/2];e=[(e[0]+g[0])/2,(e[1]+g[1])/2];b(h*D)}x=null;d(a,e);k(t)}function p(){if(s.event.touches.length){for(var e=s.event.changedTouches,b=0,d=e.length;d>
b;++b)delete w[e[b].identifier];for(var f in w)return void a()}s.selectAll(Ga).on(J,null);z.on(B,n).on(C,m);I();h(t)}var D,r=this,t=P.of(r,arguments),w={},T=0,J=".zoom-"+s.event.changedTouches[0].identifier,ka="touchmove"+J,v="touchend"+J,Ga=[],z=s.select(r),I=Gb();Fb.call(r);f();g(t);z.on(B,null).on(C,f)}function q(){var a=P.of(this,arguments);v?clearTimeout(v):(r=e(t=w||s.mouse(this)),Fb.call(this),g(a));v=setTimeout(function(){v=null;h(a)},50);N();b(Math.pow(2,.002*pc())*G.k);d(t,r);k(a)}function p(){var a=
P.of(this,arguments),f=s.mouse(this),n=e(f),m=Math.log(G.k)/Math.LN2;g(a);b(Math.pow(2,s.event.shiftKey?Math.ceil(m)-1:Math.floor(m)+1));d(f,n);k(a);h(a)}var r,t,w,v,x,z,I,J,V,G={x:0,y:0,k:1},Ob=[960,500],za=bg,B="mousedown.zoom",bb="mousemove.zoom",A="mouseup.zoom",C="touchstart.zoom",P=Oa(a,"zoomstart","zoom","zoomend");return a.event=function(a){a.each(function(){var a=P.of(this,arguments),e=G;Za?s.select(this).transition().each("start.zoom",function(){G=this.__chart__||{x:0,y:0,k:1};g(a)}).tween("zoom:zoom",
function(){var b=Ob[0],d=b/2,f=Ob[1]/2,g=s.interpolateZoom([(d-G.x)/G.k,(f-G.y)/G.k,b/G.k],[(d-e.x)/e.k,(f-e.y)/e.k,b/e.k]);return function(e){e=g(e);var l=b/e[2];this.__chart__=G={x:d-e[0]*l,y:f-e[1]*l,k:l};k(a)}}).each("end.zoom",function(){h(a)}):(this.__chart__=G,g(a),k(a),h(a))})},a.translate=function(e){return arguments.length?(G={x:+e[0],y:+e[1],k:G.k},f(),a):[G.x,G.y]},a.scale=function(e){return arguments.length?(G={x:G.x,y:G.y,k:+e},f(),a):G.k},a.scaleExtent=function(e){return arguments.length?
(za=null==e?bg:[+e[0],+e[1]],a):za},a.center=function(e){return arguments.length?(w=e&&[+e[0],+e[1]],a):w},a.size=function(e){return arguments.length?(Ob=e&&[+e[0],+e[1]],a):Ob},a.x=function(e){return arguments.length?(I=e,z=e.copy(),G={x:0,y:0,k:1},a):I},a.y=function(e){return arguments.length?(V=e,J=e.copy(),G={x:0,y:0,k:1},a):V},s.rebind(a,P,"on")};var pc,bg=[0,1/0],li="onwheel"in qa?(pc=function(){return-s.event.deltaY*(s.event.deltaMode?120:1)},"wheel"):"onmousewheel"in qa?(pc=function(){return s.event.wheelDelta},
"mousewheel"):(pc=function(){return-s.event.detail},"MozMousePixelScroll");s.color=Qa;Qa.prototype.toString=function(){return this.rgb()+""};s.hsl=ra;var Dd=ra.prototype=new Qa;Dd.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),new ra(this.h,this.s,this.l/a)};Dd.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ra(this.h,this.s,a*this.l)};Dd.rgb=function(){return Ic(this.h,this.s,this.l)};s.hcl=la;var Ed=la.prototype=new Qa;Ed.brighter=function(a){return new la(this.h,
this.c,Math.min(100,this.l+qc*(arguments.length?a:1)))};Ed.darker=function(a){return new la(this.h,this.c,Math.max(0,this.l-qc*(arguments.length?a:1)))};Ed.rgb=function(){return Jc(this.h,this.c,this.l).rgb()};s.lab=ma;var qc=18,fe=.95047,ge=1,he=1.08883,Fd=ma.prototype=new Qa;Fd.brighter=function(a){return new ma(Math.min(100,this.l+qc*(arguments.length?a:1)),this.a,this.b)};Fd.darker=function(a){return new ma(Math.max(0,this.l-qc*(arguments.length?a:1)),this.a,this.b)};Fd.rgb=function(){return ee(this.l,
this.a,this.b)};s.rgb=ba;var rc=ba.prototype=new Qa;rc.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var e=this.r,b=this.g,d=this.b;return e||b||d?(e&&30>e&&(e=30),b&&30>b&&(b=30),d&&30>d&&(d=30),new ba(Math.min(255,e/a),Math.min(255,b/a),Math.min(255,d/a))):new ba(30,30,30)};rc.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ba(a*this.r,a*this.g,a*this.b)};rc.hsl=function(){return be(this.r,this.g,this.b)};rc.toString=function(){return"#"+ab(this.r)+ab(this.g)+ab(this.b)};
var Ib=s.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,
tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Ib.forEach(function(a,e){Ib.set(a,new ba(e>>16,255&e>>8,255&e))});s.functor=K;s.xhr=Pc(X);s.dsv=function(a,e){function b(a,g,l){3>arguments.length&&(l=g,g=null);var k=Jb(a,e,null==g?d:f(g),l);return k.row=function(a){return arguments.length?k.response(null==(g=a)?d:f(a)):g},k}function d(a){return b.parse(a.responseText)}function f(a){return function(e){return b.parse(e.responseText,
a)}}function g(e){return e.map(k).join(a)}function k(a){return h.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var h=new RegExp('["'+a+"\n]"),n=a.charCodeAt(0);return b.parse=function(a,e){var d;return b.parseRows(a,function(a,b){if(d)return d(a,b-1);var f=new Function("d","return {"+a.map(function(a,e){return JSON.stringify(a)+": d["+e+"]"}).join(",")+"}");d=e?function(a,b){return e(f(a),b)}:f})},b.parseRows=function(a,e){function b(){if(u>=h)return l;if(f)return f=!1,g;var e=u;if(34===a.charCodeAt(e)){for(var d=
e;d++<h;)if(34===a.charCodeAt(d)){if(34!==a.charCodeAt(d+1))break;++d}u=d+2;var k=a.charCodeAt(d+1);return 13===k?(f=!0,10===a.charCodeAt(d+2)&&++u):10===k&&(f=!0),a.slice(e+1,d).replace(/""/g,'"')}for(;h>u;){k=a.charCodeAt(u++);d=1;if(10===k)f=!0;else if(13===k)f=!0,10===a.charCodeAt(u)&&(++u,++d);else if(k!==n)continue;return a.slice(e,u-d)}return a.slice(e)}for(var d,f,g={},l={},k=[],h=a.length,u=0,m=0;(d=b())!==l;){for(var q=[];d!==g&&d!==l;)q.push(d),d=b();e&&!(q=e(q,m++))||k.push(q)}return k},
b.format=function(e){if(Array.isArray(e[0]))return b.formatRows(e);var d=new r,f=[];return e.forEach(function(a){for(var e in a)d.has(e)||f.push(d.add(e))}),[f.map(k).join(a)].concat(e.map(function(e){return f.map(function(a){return k(e[a])}).join(a)})).join("\n")},b.formatRows=function(a){return a.map(g).join("\n")},b};s.csv=s.dsv(",","text/csv");s.tsv=s.dsv("\t","text/tab-separated-values");var Mb,Nb,Lb,Kb,ya,ke=aa[x(aa,"requestAnimationFrame")]||function(a){setTimeout(a,17)};s.timer=function(a,
e,b){var d=arguments.length;2>d&&(e=0);3>d&&(b=Date.now());d={c:a,t:b+e,f:!1,n:null};Nb?Nb.n=d:Mb=d;Nb=d;Lb||(Kb=clearTimeout(Kb),Lb=1,ke(Qc))};s.timer.flush=function(){ie();je()};s.round=function(a,e){return e?Math.round(a*(e=Math.pow(10,e)))/e:Math.round(a)};var mi="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,e){var b=Math.pow(10,3*H(8-e));return{scale:8<e?function(a){return a/b}:function(a){return a*b},symbol:a}});s.formatPrefix=function(a,e){var b=0;return a&&(0>a&&(a*=-1),
e&&(a=s.round(a,Rc(a,e))),b=1+Math.floor(1E-12+Math.log(a)/Math.LN10),b=Math.max(-24,Math.min(24,3*Math.floor((b-1)/3)))),mi[8+b/3]};var le=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Bg=s.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,e){return a.toPrecision(e)},e:function(a,e){return a.toExponential(e)},
f:function(a,e){return a.toFixed(e)},r:function(a,e){return(a=s.round(a,Rc(a,e))).toFixed(Math.max(0,Math.min(20,Rc(a*(1+1E-15),e))))}}),C=s.time={},Z=Date;Aa.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},
getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ea.setUTCDate.apply(this._,arguments)},setDay:function(){Ea.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ea.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ea.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Ea.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ea.setUTCMinutes.apply(this._,
arguments)},setMonth:function(){Ea.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Ea.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ea.setTime.apply(this._,arguments)}};var Ea=Date.prototype;C.year=Ra(function(a){return a=C.day(a),a.setMonth(0,1),a},function(a,e){a.setFullYear(a.getFullYear()+e)},function(a){return a.getFullYear()});C.years=C.year.range;C.years.utc=C.year.utc.range;C.day=Ra(function(a){var e=new Z(2E3,0);return e.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),
e},function(a,e){a.setDate(a.getDate()+e)},function(a){return a.getDate()-1});C.days=C.day.range;C.days.utc=C.day.utc.range;C.dayOfYear=function(a){var e=C.year(a);return Math.floor((a-e-6E4*(a.getTimezoneOffset()-e.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(a,e){e=7-e;var b=C[a]=Ra(function(a){return(a=C.day(a)).setDate(a.getDate()-(a.getDay()+e)%7),a},function(a,e){a.setDate(a.getDate()+7*Math.floor(e))},function(a){var b=
C.year(a).getDay();return Math.floor((C.dayOfYear(a)+(b+e)%7)/7)-(b!==e)});C[a+"s"]=b.range;C[a+"s"].utc=b.utc.range;C[a+"OfYear"]=function(a){var b=C.year(a).getDay();return Math.floor((C.dayOfYear(a)+(b+e)%7)/7)}});C.week=C.sunday;C.weeks=C.sunday.range;C.weeks.utc=C.sunday.utc.range;C.weekOfYear=C.sundayOfYear;var me={"-":"",_:" ",0:"0"},R=/^\s*\d+/,pe=/^%/;s.locale=function(a){return{numberFormat:Ag(a),timeFormat:Eg(a)}};var cg=s.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],
dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});s.format=cg.numberFormat;s.geo={};Sc.prototype={s:0,t:0,add:function(a){qe(a,this.t,sc);qe(sc.s,this.s,this);this.s?
this.t+=sc.t:this.s=sc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var sc=new Sc;s.geo.stream=function(a,e){a&&dg.hasOwnProperty(a.type)?dg[a.type](a,e):Sb(a,e)};var dg={Feature:function(a,e){Sb(a.geometry,e)},FeatureCollection:function(a,e){for(var b=a.features,d=-1,f=b.length;++d<f;)Sb(b[d].geometry,e)}},re={Sphere:function(a,e){e.sphere()},Point:function(a,e){a=a.coordinates;e.point(a[0],a[1],a[2])},MultiPoint:function(a,e){for(var b=a.coordinates,d=-1,f=b.length;++d<
f;)a=b[d],e.point(a[0],a[1],a[2])},LineString:function(a,e){Tc(a.coordinates,e,0)},MultiLineString:function(a,e){for(var b=a.coordinates,d=-1,f=b.length;++d<f;)Tc(b[d],e,0)},Polygon:function(a,e){se(a.coordinates,e)},MultiPolygon:function(a,e){for(var b=a.coordinates,d=-1,f=b.length;++d<f;)se(b[d],e)},GeometryCollection:function(a,e){for(var b=a.geometries,d=-1,f=b.length;++d<f;)Sb(b[d],e)}};s.geo.area=function(a){return mb=0,s.geo.stream(a,ea),mb};var mb,Sa=new Sc,ea={sphere:function(){mb+=4*F},
point:v,lineStart:v,lineEnd:v,polygonStart:function(){Sa.reset();ea.lineStart=Tg},polygonEnd:function(){var a=2*Sa;mb+=0>a?4*F+a:a;ea.lineStart=ea.lineEnd=ea.point=v}};s.geo.bounds=function(){function a(a,e){J.push(V=[q=a,r=a]);p>e&&(p=e);e>t&&(t=e)}function e(e,b){var d=Ta([e*E,b*E]);if(z){var f=db(z,d),f=db([f[1],-f[0],0],f);Vb(f);var f=Wb(f),g=e-w,l=0<g?1:-1,k=f[0]*O*l,g=180<H(g);g^(k>l*w&&l*e>k)?(f=f[1]*O,f>t&&(t=f)):(k=(k+360)%360-180,g^(k>l*w&&l*e>k))?(f=-f[1]*O,p>f&&(p=f)):(p>b&&(p=b),b>t&&
(t=b));g?w>e?h(q,e)>h(q,r)&&(r=e):h(e,r)>h(q,r)&&(q=e):r>=q?(q>e&&(q=e),e>r&&(r=e)):e>w?h(q,e)>h(q,r)&&(r=e):h(e,r)>h(q,r)&&(q=e)}else a(e,b);z=d;w=e}function b(){G.point=e}function d(){V[0]=q;V[1]=r;G.point=a;z=null}function f(a,b){if(z){var d=a-w;I+=180<H(d)?d+(0<d?360:-360):d}else v=a,x=b;ea.point(a,b);e(a,b)}function g(){ea.lineStart()}function k(){f(v,x);ea.lineEnd();H(I)>A&&(q=-(r=180));V[0]=q;V[1]=r;z=null}function h(a,e){return 0>(e-=a)?e+360:e}function n(a,e){return a[0]-e[0]}function m(a,
e){return e[0]<=e[1]?e[0]<=a&&a<=e[1]:a<e[0]||e[1]<a}var q,p,r,t,w,v,x,z,I,J,V,G={point:a,lineStart:b,lineEnd:d,polygonStart:function(){G.point=f;G.lineStart=g;G.lineEnd=k;I=0;ea.polygonStart()},polygonEnd:function(){ea.polygonEnd();G.point=a;G.lineStart=b;G.lineEnd=d;0>Sa?(q=-(r=180),p=-(t=90)):I>A?t=90:-A>I&&(p=-90);V[0]=q;V[1]=r}};return function(a){t=r=-(q=p=1/0);J=[];s.geo.stream(a,G);if(a=J.length){J.sort(n);for(var e,b=1,d=J[0],f=[d];a>b;++b)e=J[b],m(e[0],d)||m(e[1],d)?(h(d[0],e[1])>h(d[0],
d[1])&&(d[1]=e[1]),h(e[0],d[1])>h(d[0],d[1])&&(d[0]=e[0])):f.push(d=e);var g,l=-1/0;a=f.length-1;b=0;for(d=f[a];a>=b;d=e,++b)e=f[b],(g=h(d[1],e[0]))>l&&(l=g,q=e[0],r=d[1])}return J=V=null,1/0===q||1/0===p?[[0/0,0/0],[0/0,0/0]]:[[q,p],[r,t]]}}();s.geo.centroid=function(a){rb=eb=Ba=Ca=sa=ha=ia=da=Ia=Ja=ta=0;s.geo.stream(a,oa);a=Ia;var e=Ja,b=ta,d=a*a+e*e+b*b;return ed>d&&(a=ha,e=ia,b=da,A>eb&&(a=Ba,e=Ca,b=sa),d=a*a+e*e+b*b,ed>d)?[0/0,0/0]:[Math.atan2(e,a)*O,$a(b/Math.sqrt(d))*O]};var rb,eb,Ba,Ca,sa,
ha,ia,da,Ia,Ja,ta,oa={sphere:v,point:Vc,lineStart:te,lineEnd:ue,polygonStart:function(){oa.lineStart=Ug},polygonEnd:function(){oa.lineStart=te}},Ke=xe(fb,function(a){var e,b=0/0,d=0/0,f=0/0;return{lineStart:function(){a.lineStart();e=1},point:function(g,k){var h=0<g?F:-F,n=H(g-b);if(H(n-F)<A)a.point(b,d=0<(d+k)/2?Y:-Y),a.point(f,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(g,d),e=0;else if(f!==h&&n>=F){H(b-f)<A&&(b-=f*A);H(g-h)<A&&(g-=h*A);var n=b,m=d,q=g,p,r,s=Math.sin(n-q);d=H(s)>A?Math.atan((Math.sin(m)*
(r=Math.cos(k))*Math.sin(q)-Math.sin(k)*(p=Math.cos(m))*Math.sin(n))/(p*r*s)):(m+k)/2;a.point(f,d);a.lineEnd();a.lineStart();a.point(h,d);e=0}a.point(b=g,d=k);f=h},lineEnd:function(){a.lineEnd();b=d=0/0},clean:function(){return 2-e}}},function(a,e,b,d){null==a?(b*=Y,d.point(-F,b),d.point(0,b),d.point(F,b),d.point(F,0),d.point(F,-b),d.point(0,-b),d.point(-F,-b),d.point(-F,0),d.point(-F,b)):H(a[0]-e[0])>A?(a=a[0]<e[0]?F:-F,b=b*a/2,d.point(-a,b),d.point(0,b),d.point(a,b)):d.point(e[0],e[1])},[-F,-F/
2]),Zb=1E9;s.geo.clipExtent=function(){var a,e,b,d,f,g,k={stream:function(a){return f&&(f.valid=!1),f=g(a),f.valid=!0,f},extent:function(h){return arguments.length?(g=Ae(a=+h[0][0],e=+h[0][1],b=+h[1][0],d=+h[1][1]),f&&(f.valid=!1,f=null),k):[[a,e],[b,d]]}};return k.extent([[0,0],[960,500]])};(s.geo.conicEqualArea=function(){return Xc(Ce)}).raw=Ce;s.geo.albers=function(){return s.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};s.geo.albersUsa=function(){function a(a){var g=
a[0];a=a[1];return e=null,b(g,a),e||(d(g,a),e)||f(g,a),e}var e,b,d,f,g=s.geo.albers(),k=s.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=s.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),n={point:function(a,b){e=[a,b]}};return a.invert=function(a){var e=g.scale(),b=g.translate(),d=(a[0]-b[0])/e,e=(a[1]-b[1])/e;return(.12<=e&&.234>e&&-.425<=d&&-.214>d?k:.166<=e&&.234>e&&-.214<=d&&-.115>d?h:g).invert(a)},a.stream=function(a){var e=g.stream(a),b=
k.stream(a),d=h.stream(a);return{point:function(a,f){e.point(a,f);b.point(a,f);d.point(a,f)},sphere:function(){e.sphere();b.sphere();d.sphere()},lineStart:function(){e.lineStart();b.lineStart();d.lineStart()},lineEnd:function(){e.lineEnd();b.lineEnd();d.lineEnd()},polygonStart:function(){e.polygonStart();b.polygonStart();d.polygonStart()},polygonEnd:function(){e.polygonEnd();b.polygonEnd();d.polygonEnd()}}},a.precision=function(e){return arguments.length?(g.precision(e),k.precision(e),h.precision(e),
a):g.precision()},a.scale=function(e){return arguments.length?(g.scale(e),k.scale(.35*e),h.scale(e),a.translate(g.translate())):g.scale()},a.translate=function(e){if(!arguments.length)return g.translate();var m=g.scale(),q=+e[0],p=+e[1];return b=g.translate(e).clipExtent([[q-.455*m,p-.238*m],[q+.455*m,p+.238*m]]).stream(n).point,d=k.translate([q-.307*m,p+.201*m]).clipExtent([[q-.425*m+A,p+.12*m+A],[q-.214*m-A,p+.234*m-A]]).stream(n).point,f=h.translate([q-.205*m,p+.212*m]).clipExtent([[q-.214*m+A,
p+.166*m+A],[q-.115*m-A,p+.234*m-A]]).stream(n).point,a},a.scale(1070)};var tc,$b,uc,vc,wc,xc,Ka={point:v,lineStart:v,lineEnd:v,polygonStart:function(){$b=0;Ka.lineStart=Yg},polygonEnd:function(){Ka.lineStart=Ka.lineEnd=Ka.point=v;tc+=H($b/2)}},ni={point:function(a,e){uc>a&&(uc=a);a>wc&&(wc=a);vc>e&&(vc=e);e>xc&&(xc=e)},lineStart:v,lineEnd:v,polygonStart:v,polygonEnd:v},pa={point:Ua,lineStart:Ee,lineEnd:Fe,polygonStart:function(){pa.lineStart=$g},polygonEnd:function(){pa.point=Ua;pa.lineStart=Ee;
pa.lineEnd=Fe}};s.geo.path=function(){function a(a){return a&&("function"==typeof k&&f.pointRadius(+k.apply(this,arguments)),g&&g.valid||(g=d(f)),s.geo.stream(a,g)),f.result()}var e,b,d,f,g,k=4.5;return a.area=function(a){return tc=0,s.geo.stream(a,d(Ka)),tc},a.centroid=function(a){return Ba=Ca=sa=ha=ia=da=Ia=Ja=ta=0,s.geo.stream(a,d(pa)),ta?[Ia/ta,Ja/ta]:da?[ha/da,ia/da]:sa?[Ba/sa,Ca/sa]:[0/0,0/0]},a.bounds=function(a){return wc=xc=-(uc=vc=1/0),s.geo.stream(a,d(ni)),[[uc,vc],[wc,xc]]},a.projection=
function(b){return arguments.length?(d=(e=b)?b.stream||bh(b):X,g=null,a):e},a.context=function(e){return arguments.length?(f=null==(b=e)?new Zg:new ah(e),"function"!=typeof k&&f.pointRadius(k),g=null,a):b},a.pointRadius=function(e){return arguments.length?(k="function"==typeof e?e:(f.pointRadius(+e),+e),a):k},a.projection(s.geo.albersUsa()).context(null)};s.geo.transform=function(a){return{stream:function(e){e=new Je(e);for(var b in a)e[b]=a[b];return e}}};Je.prototype={point:function(a,e){this.stream.point(a,
e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};s.geo.projection=La;s.geo.projectionMutator=Yc;(s.geo.equirectangular=function(){return La(sb)}).raw=sb.invert=sb;s.geo.rotation=function(a){function e(e){return e=a(e[0]*E,e[1]*E),e[0]*=O,e[1]*=O,e}return a=Zc(a[0]%360*E,a[1]*E,2<a.length?a[2]*E:0),e.invert=function(e){return e=
a.invert(e[0]*E,e[1]*E),e[0]*=O,e[1]*=O,e},e};Le.invert=sb;s.geo.circle=function(){function a(){var a="function"==typeof d?d.apply(this,arguments):d,e=Zc(-a[0]*E,-a[1]*E,0).invert,f=[];return b(null,null,1,{point:function(a,b){f.push(a=e(a,b));a[0]*=O;a[1]*=O}}),{type:"Polygon",coordinates:[f]}}var e,b,d=[0,0],f=6;return a.origin=function(e){return arguments.length?(d=e,a):d},a.angle=function(d){return arguments.length?(b=Wc((e=+d)*E,f*E),a):e},a.precision=function(d){return arguments.length?(b=Wc(e*
E,(f=+d)*E),a):f},a.angle(90)};s.geo.distance=function(a,e){var b,d=(e[0]-a[0])*E,f=a[1]*E,g=e[1]*E,k=Math.sin(d),d=Math.cos(d),h=Math.sin(f),f=Math.cos(f),n=Math.sin(g),g=Math.cos(g);return Math.atan2(Math.sqrt((b=g*k)*b+(b=f*n-h*g*d)*b),h*n+f*g*d)};s.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:e()}}function e(){return s.range(Math.ceil(g/z)*z,f,z).map(r).concat(s.range(Math.ceil(m/x)*x,n,x).map(t)).concat(s.range(Math.ceil(d/w)*w,b,w).filter(function(a){return H(a%
z)>A}).map(q)).concat(s.range(Math.ceil(h/v)*v,k,v).filter(function(a){return H(a%x)>A}).map(p))}var b,d,f,g,k,h,n,m,q,p,r,t,w=10,v=w,z=90,x=360,I=2.5;return a.lines=function(){return e().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[r(g).concat(t(n).slice(1),r(f).reverse().slice(1),t(m).reverse().slice(1))]}},a.extent=function(e){return arguments.length?a.majorExtent(e).minorExtent(e):a.minorExtent()},a.majorExtent=function(e){return arguments.length?
(g=+e[0][0],f=+e[1][0],m=+e[0][1],n=+e[1][1],g>f&&(e=g,g=f,f=e),m>n&&(e=m,m=n,n=e),a.precision(I)):[[g,m],[f,n]]},a.minorExtent=function(e){return arguments.length?(d=+e[0][0],b=+e[1][0],h=+e[0][1],k=+e[1][1],d>b&&(e=d,d=b,b=e),h>k&&(e=h,h=k,k=e),a.precision(I)):[[d,h],[b,k]]},a.step=function(e){return arguments.length?a.majorStep(e).minorStep(e):a.minorStep()},a.majorStep=function(e){return arguments.length?(z=+e[0],x=+e[1],a):[z,x]},a.minorStep=function(e){return arguments.length?(w=+e[0],v=+e[1],
a):[w,v]},a.precision=function(e){return arguments.length?(I=+e,q=Qe(h,k,90),p=Re(d,b,I),r=Qe(m,n,90),t=Re(g,f,I),a):I},a.majorExtent([[-180,-90+A],[180,90-A]]).minorExtent([[-180,-80-A],[180,80+A]])};s.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[e||d.apply(this,arguments),b||f.apply(this,arguments)]}}var e,b,d=$c,f=ad;return a.distance=function(){return s.geo.distance(e||d.apply(this,arguments),b||f.apply(this,arguments))},a.source=function(b){return arguments.length?
(d=b,e="function"==typeof b?null:b,a):d},a.target=function(e){return arguments.length?(f=e,b="function"==typeof e?null:e,a):f},a.precision=function(){return arguments.length?a:0},a};s.geo.interpolate=function(a,e){return ch(a[0]*E,a[1]*E,e[0]*E,e[1]*E)};s.geo.length=function(a){return yc=0,s.geo.stream(a,nb),yc};var yc,nb={sphere:v,point:v,lineStart:function(){function a(a,f){var g=Math.sin(f*=E),k=Math.cos(f),h=H((a*=E)-e),n=Math.cos(h);yc+=Math.atan2(Math.sqrt((h=k*Math.sin(h))*h+(h=d*g-b*k*n)*
h),b*g+d*k*n);e=a;b=g;d=k}var e,b,d;nb.point=function(f,g){e=f*E;b=Math.sin(g*=E);d=Math.cos(g);nb.point=a};nb.lineEnd=function(){nb.point=nb.lineEnd=v}},lineEnd:v,polygonStart:v,polygonEnd:v},eg=tb(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(s.geo.azimuthalEqualArea=function(){return La(eg)}).raw=eg;var fg=tb(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},X);(s.geo.azimuthalEquidistant=function(){return La(fg)}).raw=fg;(s.geo.conicConformal=function(){return Xc(Se)}).raw=
Se;(s.geo.conicEquidistant=function(){return Xc(Te)}).raw=Te;var gg=tb(function(a){return 1/a},Math.atan);(s.geo.gnomonic=function(){return La(gg)}).raw=gg;ac.invert=function(a,e){return[a,2*Math.atan(Math.exp(e))-Y]};(s.geo.mercator=function(){return Ue(ac)}).raw=ac;var hg=tb(function(){return 1},Math.asin);(s.geo.orthographic=function(){return La(hg)}).raw=hg;var ig=tb(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(s.geo.stereographic=function(){return La(ig)}).raw=ig;bd.invert=
function(a,e){return[-e,2*Math.atan(Math.exp(a))-Y]};(s.geo.transverseMercator=function(){var a=Ue(bd),e=a.center,b=a.rotate;return a.center=function(a){return a?e([-a[1],a[0]]):(a=e(),[a[1],-a[0]])},a.rotate=function(a){return a?b([a[0],a[1],2<a.length?a[2]+90:90]):(a=b(),[a[0],a[1],a[2]-90])},b([0,0,90])}).raw=bd;s.geom={};s.geom.hull=function(a){function e(a){if(3>a.length)return[];var e,f=K(b),g=K(d),k=a.length,h=[],n=[];for(e=0;k>e;e++)h.push([+f.call(this,a[e],e),+g.call(this,a[e],e),e]);h.sort(dh);
for(e=0;k>e;e++)n.push([h[e][0],-h[e][1]]);var f=Ve(h),n=Ve(n),g=n[0]===f[0],k=n[n.length-1]===f[f.length-1],m=[];for(e=f.length-1;0<=e;--e)m.push(a[h[f[e]][2]]);for(e=+g;e<n.length-k;++e)m.push(a[h[n[e]][2]]);return m}var b=gb,d=ub;return arguments.length?e(a):(e.x=function(a){return arguments.length?(b=a,e):b},e.y=function(a){return arguments.length?(d=a,e):d},e)};s.geom.polygon=function(a){return Eb(a,zc),a};var zc=s.geom.polygon.prototype=[];zc.area=function(){for(var a,e=-1,b=this.length,d=this[b-
1],f=0;++e<b;)a=d,d=this[e],f+=a[1]*d[0]-a[0]*d[1];return.5*f};zc.centroid=function(a){var e,b,d=-1,f=this.length,g=0,k=0,h=this[f-1];for(arguments.length||(a=-1/(6*this.area()));++d<f;)e=h,h=this[d],b=e[0]*h[1]-h[0]*e[1],g+=(e[0]+h[0])*b,k+=(e[1]+h[1])*b;return[g*a,k*a]};zc.clip=function(a){for(var e,b,d,f,g,k,h=Xe(a),n=-1,m=this.length-Xe(this),q=this[m-1];++n<m;){e=a.slice();a.length=0;f=this[n];g=e[(d=e.length-h)-1];for(b=-1;++b<d;)k=e[b],cd(k,q,f)?(cd(g,q,f)||a.push(We(g,k,q,f)),a.push(k)):cd(g,
q,f)&&a.push(We(g,k,q,f)),g=k;h&&a.push(a[0]);q=f}return a};var kb,Va,ib,fd,vb,Ze=[],cf=[];af.prototype.prepare=function(){for(var a,e=this.edges,b=e.length;b--;)a=e[b].edge,a.b&&a.a||e.splice(b,1);return e.sort(bf),e.length};dc.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};gd.prototype={insert:function(a,e){var b,d,f;if(a){if(e.P=a,e.N=a.N,a.N&&(a.N.P=e),a.N=e,a.R){for(a=a.R;a.L;)a=a.L;a.L=
e}else a.R=e;b=a}else this._?(a=ef(this._),e.P=null,e.N=a,a.P=a.L=e,b=a):(e.P=e.N=null,this._=e,b=null);e.L=e.R=null;e.U=b;e.C=!0;for(a=e;b&&b.C;)d=b.U,b===d.L?(f=d.R,f&&f.C?(b.C=f.C=!1,d.C=!0,a=d):(a===b.R&&(xb(this,b),a=b,b=a.U),b.C=!1,d.C=!0,yb(this,d))):(f=d.L,f&&f.C?(b.C=f.C=!1,d.C=!0,a=d):(a===b.L&&(yb(this,b),a=b,b=a.U),b.C=!1,d.C=!0,xb(this,d))),b=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var e,b,d,f=a.U,g=a.L,k=a.R;if(b=g?k?ef(k):g:k,f?f.L===a?f.L=
b:f.R=b:this._=b,g&&k?(d=b.C,b.C=a.C,b.L=g,g.U=b,b!==k?(f=b.U,b.U=a.U,a=b.R,f.L=a,b.R=k,k.U=b):(b.U=f,f=b,a=b.R)):(d=a.C,a=b),a&&(a.U=f),!d){if(a&&a.C)return a.C=!1,void 0;do{if(a===this._)break;if(a===f.L){if(e=f.R,e.C&&(e.C=!1,f.C=!0,xb(this,f),e=f.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,yb(this,e),e=f.R);e.C=f.C;f.C=e.R.C=!1;xb(this,f);a=this._;break}}else if(e=f.L,e.C&&(e.C=!1,f.C=!0,yb(this,f),e=f.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,xb(this,e),e=f.L);e.C=f.C;
f.C=e.L.C=!1;yb(this,f);a=this._;break}e.C=!0;a=f;f=f.U}while(!a.C);a&&(a.C=!1)}}};s.geom.voronoi=function(a){function e(a){var e=Array(a.length),d=h[0][0],f=h[0][1],g=h[1][0],k=h[1][1];return hd(b(a),h).cells.forEach(function(b,l){var h=b.edges,n=b.site;(e[l]=h.length?h.map(function(a){a=a.start();return[a.x,a.y]}):n.x>=d&&n.x<=g&&n.y>=f&&n.y<=k?[[d,k],[g,k],[g,f],[d,f]]:[]).point=a[l]}),e}function b(a){return a.map(function(a,e){return{x:Math.round(g(a,e)/A)*A,y:Math.round(k(a,e)/A)*A,i:e}})}var d=
gb,f=ub,g=d,k=f,h=Ac;return a?e(a):(e.links=function(a){return hd(b(a)).edges.filter(function(a){return a.l&&a.r}).map(function(e){return{source:a[e.l.i],target:a[e.r.i]}})},e.triangles=function(a){var e=[];return hd(b(a)).cells.forEach(function(b,d){for(var f,g=b.site,k=b.edges.sort(bf),l=-1,h=k.length,n=k[h-1].edge,n=n.l===g?n.r:n.l;++l<h;)f=n,n=k[l].edge,n=n.l===g?n.r:n.l,d<f.i&&d<n.i&&0>(g.x-n.x)*(f.y-g.y)-(g.x-f.x)*(n.y-g.y)&&e.push([a[d],a[f.i],a[n.i]])}),e},e.x=function(a){return arguments.length?
(g=K(d=a),e):d},e.y=function(a){return arguments.length?(k=K(f=a),e):f},e.clipExtent=function(a){return arguments.length?(h=null==a?Ac:a,e):h===Ac?null:h},e.size=function(a){return arguments.length?e.clipExtent(a&&[[0,0],a]):h===Ac?null:h&&h[1]},e)};var Ac=[[-1E6,-1E6],[1E6,1E6]];s.geom.delaunay=function(a){return s.geom.voronoi().triangles(a)};s.geom.quadtree=function(a,e,b,d,f){function g(a){function m(a,e,b,d,f,g,k,l){if(!isNaN(b)&&!isNaN(d))if(a.leaf){var h=a.x,n=a.y;if(null!=h){if(!(.01>H(h-
b)+H(n-d))){var u=a.point;a.x=a.y=a.point=null;q(a,u,h,n,f,g,k,l)}q(a,e,b,d,f,g,k,l)}else a.x=b,a.y=d,a.point=e}else q(a,e,b,d,f,g,k,l)}function q(a,e,b,d,f,g,k,l){var h=.5*(f+k),n=.5*(g+l),u=b>=h,p=d>=n,r=(p<<1)+u;a.leaf=!1;a=a.nodes[r]||(a.nodes[r]=ff());u?f=h:k=h;p?g=n:l=n;m(a,e,b,d,f,g,k,l)}var u,p,r,s,t,w,v,z,x,G=K(h),N=K(n);if(null!=e)w=e,v=b,z=d,x=f;else if(z=x=-(w=v=1/0),p=[],r=[],t=a.length,k)for(s=0;t>s;++s)u=a[s],u.x<w&&(w=u.x),u.y<v&&(v=u.y),u.x>z&&(z=u.x),u.y>x&&(x=u.y),p.push(u.x),r.push(u.y);
else for(s=0;t>s;++s){var B=+G(u=a[s],s);u=+N(u,s);w>B&&(w=B);v>u&&(v=u);B>z&&(z=B);u>x&&(x=u);p.push(B);r.push(u)}B=z-w;u=x-v;B>u?x=v+B:z=w+u;var A=ff();if(A.add=function(a){m(A,a,+G(a,++s),+N(a,s),w,v,z,x)},A.visit=function(a){zb(a,A,w,v,z,x)},s=-1,null==e){for(;++s<t;)m(A,a[s],p[s],r[s],w,v,z,x);--s}else a.forEach(A.add);return p=r=a=u=null,A}var k,h=gb,n=ub;return(k=arguments.length)?(h=jh,n=kh,3===k&&(f=b,d=e,b=e=0),g(a)):(g.x=function(a){return arguments.length?(h=a,g):h},g.y=function(a){return arguments.length?
(n=a,g):n},g.extent=function(a){return arguments.length?(null==a?e=b=d=f=null:(e=+a[0][0],b=+a[0][1],d=+a[1][0],f=+a[1][1]),g):null==e?null:[[e,b],[d,f]]},g.size=function(a){return arguments.length?(null==a?e=b=d=f=null:(e=b=0,d=+a[0],f=+a[1]),g):null==e?null:[d-e,f-b]},g)};s.interpolateRgb=id;s.interpolateObject=gf;s.interpolateNumber=Da;s.interpolateString=hf;var jd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kd=new RegExp(jd.source,"g");s.interpolate=Wa;s.interpolators=[function(a,e){var b=typeof e;
return("string"===b?Ib.has(e)||/^(#|rgb\(|hsl\()/.test(e)?id:hf:e instanceof Qa?id:Array.isArray(e)?ec:"object"===b&&isNaN(e)?gf:Da)(a,e)}];s.interpolateArray=ec;var jg=function(){return X},oi=s.map({linear:jg,poly:function(a){return function(e){return Math.pow(e,a)}},quad:function(){return mh},cubic:function(){return nh},sin:function(){return ph},exp:function(){return qh},circle:function(){return rh},elastic:function(a,e){var b;return 2>arguments.length&&(e=.45),arguments.length?b=e/fa*Math.asin(1/
a):(a=1,b=e/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-b)*fa/e)}},back:function(a){return a||(a=1.70158),function(e){return e*e*((a+1)*e-a)}},bounce:function(){return sh}}),pi=s.map({"in":X,out:jf,"in-out":kf,"out-in":function(a){return kf(jf(a))}});s.ease=function(a){var e=a.indexOf("-"),b=0<=e?a.slice(0,e):a,e=0<=e?a.slice(e+1):"in";return b=oi.get(b)||jg,e=pi.get(e)||X,lh(e(b.apply(null,Xf.call(arguments,1))))};s.interpolateHcl=function(a,e){a=s.hcl(a);e=s.hcl(e);var b=a.h,d=a.c,f=
a.l,g=e.h-b,k=e.c-d,h=e.l-f;return isNaN(k)&&(k=0,d=isNaN(d)?e.c:d),isNaN(g)?(g=0,b=isNaN(b)?e.h:b):180<g?g-=360:-180>g&&(g+=360),function(a){return Jc(b+g*a,d+k*a,f+h*a)+""}};s.interpolateHsl=function(a,e){a=s.hsl(a);e=s.hsl(e);var b=a.h,d=a.s,f=a.l,g=e.h-b,k=e.s-d,h=e.l-f;return isNaN(k)&&(k=0,d=isNaN(d)?e.s:d),isNaN(g)?(g=0,b=isNaN(b)?e.h:b):180<g?g-=360:-180>g&&(g+=360),function(a){return Ic(b+g*a,d+k*a,f+h*a)+""}};s.interpolateLab=function(a,e){a=s.lab(a);e=s.lab(e);var b=a.l,d=a.a,f=a.b,g=e.l-
b,k=e.a-d,h=e.b-f;return function(a){return ee(b+g*a,d+k*a,f+h*a)+""}};s.interpolateRound=lf;s.transform=function(a){var e=qa.createElementNS(s.ns.prefix.svg,"g");return(s.transform=function(a){if(null!=a){e.setAttribute("transform",a);var b=e.transform.baseVal.consolidate()}return new mf(b?b.matrix:qi)})(a)};mf.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var qi={a:1,b:0,c:0,d:1,e:0,f:0};s.interpolateTransform=
of;s.layout={};s.layout.bundle=function(){return function(a){for(var e=[],b=-1,d=a.length;++b<d;)e.push(vh(a[b]));return e}};s.layout.chord=function(){function a(){var a,m,p,r,t,w={},v=[],M=s.range(g),z=[];b=[];d=[];a=0;for(r=-1;++r<g;){m=0;for(t=-1;++t<g;)m+=f[r][t];v.push(m);z.push(s.range(g));a+=m}k&&M.sort(function(a,e){return k(v[a],v[e])});h&&z.forEach(function(a,e){a.sort(function(a,b){return h(f[e][a],f[e][b])})});a=(fa-q*g)/a;m=0;for(r=-1;++r<g;){p=m;for(t=-1;++t<g;){var x=M[r],G=z[x][t],
B=f[x][G],N=m,A=m+=B*a;w[x+"-"+G]={index:x,subindex:G,startAngle:N,endAngle:A,value:B}}d[x]={index:x,startAngle:p,endAngle:m,value:(m-p)/a};m+=q}for(r=-1;++r<g;)for(t=r-1;++t<g;)a=w[r+"-"+t],m=w[t+"-"+r],(a.value||m.value)&&b.push(a.value<m.value?{source:m,target:a}:{source:a,target:m});n&&e()}function e(){b.sort(function(a,e){return n((a.source.value+a.target.value)/2,(e.source.value+e.target.value)/2)})}var b,d,f,g,k,h,n,m={},q=0;return m.matrix=function(a){return arguments.length?(g=(f=a)&&f.length,
b=d=null,m):f},m.padding=function(a){return arguments.length?(q=a,b=d=null,m):q},m.sortGroups=function(a){return arguments.length?(k=a,b=d=null,m):k},m.sortSubgroups=function(a){return arguments.length?(h=a,b=null,m):h},m.sortChords=function(a){return arguments.length?(n=a,b&&e(),m):n},m.chords=function(){return b||a(),b},m.groups=function(){return d||a(),d},m};s.layout.force=function(){function a(a){return function(e,b,d,f){if(e.point!==a){d=e.cx-a.x;var g=e.cy-a.y;b=f-b;f=d*d+g*g;if(f>b*b/x)return w>
f&&(b=e.charge/f,a.px-=d*b,a.py-=g*b),!0;e.point&&f&&w>f&&(b=e.pointCharge/f,a.px-=d*b,a.py-=g*b)}return!e.charge}}function e(a){a.px=s.event.x;a.py=s.event.y;h.resume()}var b,d,f,g,k,h={},n=s.dispatch("start","tick","end"),m=[1,1],q=.9,p=ri,r=si,t=-30,w=ti,v=.1,x=.64,z=[],I=[];return h.tick=function(){if(.005>(d*=.99))return n.end({type:"end",alpha:d=0}),!0;var e,b,l,h,p,r,w,x,Q=z.length,Ha=I.length;for(b=0;Ha>b;++b)l=I[b],e=l.source,h=l.target,w=h.x-e.x,x=h.y-e.y,(p=w*w+x*x)&&(p=d*g[b]*((p=Math.sqrt(p))-
f[b])/p,w*=p,x*=p,h.x-=w*(r=e.weight/(h.weight+e.weight)),h.y-=x*r,e.x+=w*(r=1-r),e.y+=x*r);if((r=d*v)&&(w=m[0]/2,x=m[1]/2,b=-1,r))for(;++b<Q;)l=z[b],l.x+=(w-l.x)*r,l.y+=(x-l.y)*r;if(t)for(qf(e=s.geom.quadtree(z),d,k),b=-1;++b<Q;)(l=z[b]).fixed||e.visit(a(l));for(b=-1;++b<Q;)l=z[b],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*q,l.y-=(l.py-(l.py=l.y))*q);n.tick({type:"tick",alpha:d})},h.nodes=function(a){return arguments.length?(z=a,h):z},h.links=function(a){return arguments.length?(I=a,h):
I},h.size=function(a){return arguments.length?(m=a,h):m},h.linkDistance=function(a){return arguments.length?(p="function"==typeof a?a:+a,h):p},h.distance=h.linkDistance,h.linkStrength=function(a){return arguments.length?(r="function"==typeof a?a:+a,h):r},h.friction=function(a){return arguments.length?(q=+a,h):q},h.charge=function(a){return arguments.length?(t="function"==typeof a?a:+a,h):t},h.chargeDistance=function(a){return arguments.length?(w=a*a,h):Math.sqrt(w)},h.gravity=function(a){return arguments.length?
(v=+a,h):v},h.theta=function(a){return arguments.length?(x=a*a,h):Math.sqrt(x)},h.alpha=function(a){return arguments.length?(a=+a,d?d=0<a?a:0:0<a&&(n.start({type:"start",alpha:d=a}),s.timer(h.tick)),h):d},h.start=function(){function a(d,f){if(!b){b=Array(l);for(h=0;l>h;++h)b[h]=[];for(h=0;n>h;++h){var g=I[h];b[g.source.index].push(g.target);b[g.target.index].push(g.source)}}for(var k=b[e],h=-1,n=k.length;++h<n;)if(!isNaN(g=k[h][d]))return g;return Math.random()*f}var e,b,d,l=z.length,n=I.length,q=
m[0],s=m[1];for(e=0;l>e;++e)(d=z[e]).index=e,d.weight=0;for(e=0;n>e;++e)d=I[e],"number"==typeof d.source&&(d.source=z[d.source]),"number"==typeof d.target&&(d.target=z[d.target]),++d.source.weight,++d.target.weight;for(e=0;l>e;++e)d=z[e],isNaN(d.x)&&(d.x=a("x",q)),isNaN(d.y)&&(d.y=a("y",s)),isNaN(d.px)&&(d.px=d.x),isNaN(d.py)&&(d.py=d.y);if(f=[],"function"==typeof p)for(e=0;n>e;++e)f[e]=+p.call(this,I[e],e);else for(e=0;n>e;++e)f[e]=p;if(g=[],"function"==typeof r)for(e=0;n>e;++e)g[e]=+r.call(this,
I[e],e);else for(e=0;n>e;++e)g[e]=r;if(k=[],"function"==typeof t)for(e=0;l>e;++e)k[e]=+t.call(this,z[e],e);else for(e=0;l>e;++e)k[e]=t;return h.resume()},h.resume=function(){return h.alpha(.1)},h.stop=function(){return h.alpha(0)},h.drag=function(){return b||(b=s.behavior.drag().origin(X).on("dragstart.force",wh).on("drag.force",e).on("dragend.force",xh)),arguments.length?(this.on("mouseover.force",yh).on("mouseout.force",zh).call(b),void 0):b},s.rebind(h,n,"on")};var ri=20,si=1,ti=1/0;s.layout.hierarchy=
function(){function a(f){var g,k=[f],h=[];for(f.depth=0;null!=(g=k.pop());)if(h.push(g),(m=b.call(a,g,g.depth))&&(n=m.length)){for(var n,m,q;0<=--n;)k.push(q=m[n]),q.parent=g,q.depth=g.depth+1;d&&(g.value=0);g.children=m}else d&&(g.value=+d.call(a,g,g.depth)||0),delete g.children;return ua(f,function(a){var b,f;e&&(b=a.children)&&b.sort(e);d&&(f=a.parent)&&(f.value+=a.value)}),h}var e=Dh,b=Bh,d=Ch;return a.sort=function(b){return arguments.length?(e=b,a):e},a.children=function(e){return arguments.length?
(b=e,a):b},a.value=function(e){return arguments.length?(d=e,a):d},a.revalue=function(e){return d&&(Bb(e,function(a){a.children&&(a.value=0)}),ua(e,function(e){var b;e.children||(e.value=+d.call(a,e,e.depth)||0);(b=e.parent)&&(b.value+=e.value)})),e},a};s.layout.partition=function(){function a(e,b,d,f){var g=e.children;if(e.x=b,e.y=e.depth*f,e.dx=d,e.dy=f,g&&(k=g.length)){var k,l,h=-1;for(d=e.value?d/e.value:0;++h<k;)a(l=g[h],b,e=l.value*d,f),b+=e}}function e(a){a=a.children;var b=0;if(a&&(d=a.length))for(var d,
f=-1;++f<d;)b=Math.max(b,e(a[f]));return 1+b}function b(g,k){var l=d.call(this,g,k);return a(l[0],0,f[0],f[1]/e(l[0])),l}var d=s.layout.hierarchy(),f=[1,1];return b.size=function(a){return arguments.length?(f=a,b):f},Ab(b,d)};s.layout.pie=function(){function a(g){var k=g.map(function(b,d){return+e.call(a,b,d)}),h=+("function"==typeof d?d.apply(this,arguments):d),n=(("function"==typeof f?f.apply(this,arguments):f)-h)/s.sum(k),m=s.range(g.length);null!=b&&m.sort(b===kg?function(a,e){return k[e]-k[a]}:
function(a,e){return b(g[a],g[e])});var q=[];return m.forEach(function(a){var e;q[a]={data:g[a],value:e=k[a],startAngle:h,endAngle:h+=e*n}}),q}var e=Number,b=kg,d=0,f=fa;return a.value=function(b){return arguments.length?(e=b,a):e},a.sort=function(e){return arguments.length?(b=e,a):b},a.startAngle=function(e){return arguments.length?(d=e,a):d},a.endAngle=function(e){return arguments.length?(f=e,a):f},a};var kg={};s.layout.stack=function(){function a(h,n){var m=h.map(function(b,d){return e.call(a,
b,d)}),q=m.map(function(e){return e.map(function(e,b){return[g.call(a,e,b),k.call(a,e,b)]})}),p=b.call(a,q,n),m=s.permute(m,p),q=s.permute(q,p),r,t,w=d.call(a,q,n),v=m.length,x=m[0].length;for(r=0;x>r;++r)for(f.call(a,m[0][r],t=w[r],q[0][r][1]),p=1;v>p;++p)f.call(a,m[p][r],t+=q[p-1][r][1],q[p][r][1]);return h}var e=X,b=ld,d=md,f=Gh,g=Eh,k=Fh;return a.values=function(b){return arguments.length?(e=b,a):e},a.order=function(e){return arguments.length?(b="function"==typeof e?e:ui.get(e)||ld,a):b},a.offset=
function(e){return arguments.length?(d="function"==typeof e?e:vi.get(e)||md,a):d},a.x=function(e){return arguments.length?(g=e,a):g},a.y=function(e){return arguments.length?(k=e,a):k},a.out=function(e){return arguments.length?(f=e,a):f},a};var ui=s.map({"inside-out":function(a){var e,b=a.length,d=a.map(Hh),f=a.map(Ih),g=s.range(b).sort(function(a,e){return d[a]-d[e]}),k=0,h=0,n=[],m=[];for(a=0;b>a;++a)e=g[a],h>k?(k+=f[e],n.push(e)):(h+=f[e],m.push(e));return m.reverse().concat(n)},reverse:function(a){return s.range(a.length).reverse()},
"default":ld}),vi=s.map({silhouette:function(a){var e,b,d,f=a.length,g=a[0].length,k=[],h=0,n=[];for(b=0;g>b;++b){for(d=e=0;f>e;e++)d+=a[e][b][1];d>h&&(h=d);k.push(d)}for(b=0;g>b;++b)n[b]=(h-k[b])/2;return n},wiggle:function(a){var e,b,d,f,g,k,h,n,m,q=a.length,p=a[0],r=p.length,s=[];s[0]=n=m=0;for(b=1;r>b;++b){for(f=e=0;q>e;++e)f+=a[e][b][1];g=e=0;for(h=p[b][0]-p[b-1][0];q>e;++e){d=0;for(k=(a[e][b][1]-a[e][b-1][1])/(2*h);e>d;++d)k+=(a[d][b][1]-a[d][b-1][1])/h;g+=k*a[e][b][1]}s[b]=n-=f?g/f*h:0;m>n&&
(m=n)}for(b=0;r>b;++b)s[b]-=m;return s},expand:function(a){var e,b,d,f=a.length,g=a[0].length,k=1/f,h=[];for(b=0;g>b;++b){for(d=e=0;f>e;e++)d+=a[e][b][1];if(d)for(e=0;f>e;e++)a[e][b][1]/=d;else for(e=0;f>e;e++)a[e][b][1]=k}for(b=0;g>b;++b)h[b]=0;return h},zero:md});s.layout.histogram=function(){function a(a,g){var k,h,n=[],m=a.map(b,this),q=d.call(this,m,g),p=f.call(this,q,m,g);g=-1;for(var r=m.length,t=p.length-1,w=e?1:1/r;++g<t;)k=n[g]=[],k.dx=p[g+1]-(k.x=p[g]),k.y=0;if(0<t)for(g=-1;++g<r;)h=m[g],
h>=q[0]&&h<=q[1]&&(k=n[s.bisect(p,h,1,t)-1],k.y+=w,k.push(a[g]));return n}var e=!0,b=Number,d=Lh,f=Kh;return a.value=function(e){return arguments.length?(b=e,a):b},a.range=function(e){return arguments.length?(d=K(e),a):d},a.bins=function(e){return arguments.length?(f="number"==typeof e?function(a){return rf(a,e)}:K(e),a):f},a.frequency=function(b){return arguments.length?(e=!!b,a):e},a};s.layout.pack=function(){function a(a,g){var k=b.call(this,a,g),h=k[0],n=f[0],m=f[1],q=null==e?Math.sqrt:"function"==
typeof e?e:function(){return e};if(h.x=h.y=0,ua(h,function(a){a.r=+q(a.value)}),ua(h,uf),d){var p=d*(e?1:Math.max(2*h.r/n,2*h.r/m))/2;ua(h,function(a){a.r+=p});ua(h,uf);ua(h,function(a){a.r-=p})}return wf(h,n/2,m/2,e?1:1/Math.max(2*h.r/n,2*h.r/m)),k}var e,b=s.layout.hierarchy().sort(Mh),d=0,f=[1,1];return a.size=function(e){return arguments.length?(f=e,a):f},a.radius=function(b){return arguments.length?(e=null==b||"function"==typeof b?b:+b,a):e},a.padding=function(e){return arguments.length?(d=+e,
a):d},Ab(a,b)};s.layout.tree=function(){function a(a,m){var q=g.call(this,a,m),p=q[0],r=e(p);if(ua(r,b),r.parent.m=-r.z,Bb(r,d),n)Bb(p,f);else{var s=p,t=p,w=p;Bb(p,function(a){a.x<s.x&&(s=a);a.x>t.x&&(t=a);a.depth>w.depth&&(w=a)});var v=k(s,t)/2-s.x,x=h[0]/(t.x+k(t,s)/2+v),z=h[1]/(w.depth||1);Bb(p,function(a){a.x=(a.x+v)*x;a.y=a.depth*z})}return q}function e(a){for(var e={A:null,children:[a]},b=[e];null!=(a=b.pop());)for(var d,f=a.children,g=0,k=f.length;k>g;++g)b.push((f[g]=d={_:f[g],parent:a,children:(d=
f[g].children)&&d.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=d);return e.children[0]}function b(a){var e=a.children,d=a.parent.children,f=a.i?d[a.i-1]:null;if(e.length){for(var g,h=0,l=0,n=a.children,m=n.length;0<=--m;)g=n[m],g.z+=h,g.m+=h,h+=g.s+(l+=g.c);e=(e[0].z+e[e.length-1].z)/2;f?(a.z=f.z+k(a._,f._),a.m=a.z-e):a.z=e}else f&&(a.z=f.z+k(a._,f._));e=a.parent;d=a.parent.A||d[0];if(f){for(var h=g=a,l=f,n=g.parent.children[0],m=g.m,q=h.m,p=l.m,r=n.m;l=pd(l),g=od(g),l&&g;){n=od(n);h=
pd(h);h.a=a;f=l.z+p-g.z-m+k(l._,g._);if(0<f){var u=l.a.parent===a.parent?l.a:d,s=a,t=f,w=t/(s.i-u.i);s.c-=w;s.s+=t;u.c+=w;s.z+=t;s.m+=t;m+=f;q+=f}p+=l.m;m+=g.m;r+=n.m;q+=h.m}l&&!pd(h)&&(h.t=l,h.m+=p-q);g&&!od(n)&&(n.t=g,n.m+=m-r,d=a)}e.A=d}function d(a){a._.x=a.z+a.parent.m;a.m+=a.parent.m}function f(a){a.x*=h[0];a.y=a.depth*h[1]}var g=s.layout.hierarchy().sort(null).value(null),k=xf,h=[1,1],n=null;return a.separation=function(e){return arguments.length?(k=e,a):k},a.size=function(e){return arguments.length?
(n=null==(h=e)?f:null,a):n?null:h},a.nodeSize=function(e){return arguments.length?(n=null==(h=e)?null:f,a):n?h:null},Ab(a,g)};s.layout.cluster=function(){function a(a,g){var k,h=e.call(this,a,g),n=h[0],m=0;ua(n,function(a){var e=a.children;e&&e.length?(a.x=Qh(e),a.y=Ph(e)):(a.x=k?m+=b(a,k):0,a.y=0,k=a)});var q=yf(n),p=zf(n),r=q.x-b(q,p)/2,s=p.x+b(p,q)/2;return ua(n,f?function(a){a.x=(a.x-n.x)*d[0];a.y=(n.y-a.y)*d[1]}:function(a){a.x=(a.x-r)/(s-r)*d[0];a.y=(1-(n.y?a.y/n.y:1))*d[1]}),h}var e=s.layout.hierarchy().sort(null).value(null),
b=xf,d=[1,1],f=!1;return a.separation=function(e){return arguments.length?(b=e,a):b},a.size=function(e){return arguments.length?(f=null==(d=e),a):f?null:d},a.nodeSize=function(e){return arguments.length?(f=null!=(d=e),a):f?d:null},Ab(a,e)};s.layout.treemap=function(){function a(a,e){for(var b,d,f=-1,g=a.length;++f<g;)d=(b=a[f]).value*(0>e?0:e),b.area=isNaN(d)||0>=d?0:d}function e(b){var f=b.children;if(f&&f.length){var g,k=q(b),h=[],l=f.slice(),n=1/0,m="slice"===r?k.dx:"dice"===r?k.dy:"slice-dice"===
r?1&b.depth?k.dy:k.dx:Math.min(k.dx,k.dy);a(l,k.dx*k.dy/b.value);for(h.area=0;0<(b=l.length);){h.push(b=l[b-1]);h.area+=b.area;var p;if(!(p="squarify"!==r)){b=m;g=void 0;var u=h.area;p=0;for(var s=1/0,w=-1,v=h.length;++w<v;)(g=h[w].area)&&(s>g&&(s=g),g>p&&(p=g));p=(g=(u*=u,b*=b,u?Math.max(b*p*t/u,u/(b*s*t)):1/0))<=n}p?(l.pop(),n=g):(h.area-=h.pop().area,d(h,m,k,!1),m=Math.min(k.dx,k.dy),h.length=h.area=0,n=1/0)}h.length&&(d(h,m,k,!0),h.length=h.area=0);f.forEach(e)}}function b(e){var f=e.children;
if(f&&f.length){var g=q(e),k=f.slice(),h=[];a(k,g.dx*g.dy/e.value);for(h.area=0;e=k.pop();)h.push(e),h.area+=e.area,null!=e.z&&(d(h,e.z?g.dx:g.dy,g,!k.length),h.length=h.area=0);f.forEach(b)}}function d(a,e,b,f){var g,k=-1,l=a.length,n=b.x,m=b.y,q=e?h(a.area/e):0;if(e==b.dx){for((f||q>b.dy)&&(q=b.dy);++k<l;)g=a[k],g.x=n,g.y=m,g.dy=q,n+=g.dx=Math.min(b.x+b.dx-n,q?h(g.area/q):0);g.z=!0;g.dx+=b.x+b.dx-n;b.y+=q;b.dy-=q}else{for((f||q>b.dx)&&(q=b.dx);++k<l;)g=a[k],g.x=n,g.y=m,g.dx=q,m+=g.dy=Math.min(b.y+
b.dy-m,q?h(g.area/q):0);g.z=!1;g.dy+=b.y+b.dy-m;b.x+=q;b.dx-=q}}function f(d){d=g||k(d);var h=d[0];return h.x=0,h.y=0,h.dx=n[0],h.dy=n[1],g&&k.revalue(h),a([h],h.dx*h.dy/h.value),(g?b:e)(h),p&&(g=d),d}var g,k=s.layout.hierarchy(),h=Math.round,n=[1,1],m=null,q=qd,p=!1,r="squarify",t=.5*(1+Math.sqrt(5));return f.size=function(a){return arguments.length?(n=a,f):n},f.padding=function(a){function b(e){var d=a.call(f,e,e.depth);return null==d?qd(e):Af(e,"number"==typeof d?[d,d,d,d]:d)}function e(b){return Af(b,
a)}if(!arguments.length)return m;var d;return q=null==(m=a)?qd:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],e):e,f},f.round=function(a){return arguments.length?(h=a?Math.round:Number,f):h!=Number},f.sticky=function(a){return arguments.length?(p=a,g=null,f):p},f.ratio=function(a){return arguments.length?(t=a,f):t},f.mode=function(a){return arguments.length?(r=a+"",f):r},Ab(f,k)};s.random={normal:function(a,e){var b=arguments.length;return 2>b&&(e=1),1>b&&(a=0),function(){var b,d;do b=2*Math.random()-
1,d=2*Math.random()-1,d=b*b+d*d;while(!d||1<d);return a+e*b*Math.sqrt(-2*Math.log(d)/d)}},logNormal:function(){var a=s.random.normal.apply(s,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=s.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,d=0;a>d;d++)b+=Math.random();return b}}};s.scale={};var Sh={floor:X,ceil:X};s.scale.linear=function(){return Cf([0,1],[0,1],Wa,!1)};var Vh={s:1,g:1,p:1,r:1,e:1};s.scale.log=function(){return Df(s.scale.linear().domain([0,
1]),10,!0,[1,10])};var Ef=s.format(".0e"),Wh={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};s.scale.pow=function(){return Ff(s.scale.linear(),1,[0,1])};s.scale.sqrt=function(){return s.scale.pow().exponent(.5)};s.scale.ordinal=function(){return Gf([],{t:"range",a:[[]]})};s.scale.category10=function(){return s.scale.ordinal().range(wi)};s.scale.category20=function(){return s.scale.ordinal().range(xi)};s.scale.category20b=function(){return s.scale.ordinal().range(yi)};
s.scale.category20c=function(){return s.scale.ordinal().range(zi)};var wi=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Hb),xi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Hb),yi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,
10834324,13528509,14589654].map(Hb),zi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Hb);s.scale.quantile=function(){return Hf([],[])};s.scale.quantize=function(){return If(0,1,[0,1])};s.scale.threshold=function(){return Jf([.5],[0,1])};s.scale.identity=function(){return Kf([0,1])};s.svg={};s.svg.arc=function(){function a(){var a=b.apply(this,arguments),k=d.apply(this,
arguments),h=f.apply(this,arguments)+Xa,n=g.apply(this,arguments)+Xa,m=(h>n&&(m=h,h=n,n=m),n-h),q=F>m?"0":"1",p=Math.cos(h),h=Math.sin(h),r=Math.cos(n),n=Math.sin(n);return m>=Ai?a?"M0,"+k+"A"+k+","+k+" 0 1,1 0,"+-k+"A"+k+","+k+" 0 1,1 0,"+k+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+k+"A"+k+","+k+" 0 1,1 0,"+-k+"A"+k+","+k+" 0 1,1 0,"+k+"Z":a?"M"+k*p+","+k*h+"A"+k+","+k+" 0 "+q+",1 "+k*r+","+k*n+"L"+a*r+","+a*n+"A"+a+","+a+" 0 "+q+",0 "+a*p+","+a*h+"Z":"M"+k*p+","+k*h+
"A"+k+","+k+" 0 "+q+",1 "+k*r+","+k*n+"L0,0Z"}var b=Xh,d=Yh,f=Lf,g=Mf;return a.innerRadius=function(d){return arguments.length?(b=K(d),a):b},a.outerRadius=function(b){return arguments.length?(d=K(b),a):d},a.startAngle=function(b){return arguments.length?(f=K(b),a):f},a.endAngle=function(b){return arguments.length?(g=K(b),a):g},a.centroid=function(){var a=(b.apply(this,arguments)+d.apply(this,arguments))/2,k=(f.apply(this,arguments)+g.apply(this,arguments))/2+Xa;return[Math.cos(k)*a,Math.sin(k)*a]},
a};var Xa=-Y,Ai=fa-A;s.svg.line=function(){return Nf(X)};var td=s.map({linear:ga,"linear-closed":function(a){return ga(a)+"Z"},step:function(a){for(var b=0,d=a.length,f=a[0],g=[f[0],",",f[1]];++b<d;)g.push("H",(f[0]+(f=a[b])[0])/2,"V",f[1]);return 1<d&&g.push("H",f[0]),g.join("")},"step-before":ud,"step-after":vd,basis:Of,"basis-open":function(a){if(4>a.length)return ga(a);for(var b,d=[],f=-1,g=a.length,k=[0],h=[0];3>++f;)b=a[f],k.push(b[0]),h.push(b[1]);d.push(ja(Na,k)+","+ja(Na,h));for(--f;++f<
g;)b=a[f],k.shift(),k.push(b[0]),h.shift(),h.push(b[1]),xd(d,k,h);return d.join("")},"basis-closed":function(a){for(var b,d,f=-1,g=a.length,k=g+4,h=[],n=[];4>++f;)d=a[f%g],h.push(d[0]),n.push(d[1]);b=[ja(Na,h),",",ja(Na,n)];for(--f;++f<k;)d=a[f%g],h.shift(),h.push(d[0]),n.shift(),n.push(d[1]),xd(b,h,n);return b.join("")},bundle:function(a,b){var d=a.length-1;if(d)for(var f,g,k=a[0][0],h=a[0][1],n=a[d][0]-k,m=a[d][1]-h,q=-1;++q<=d;)f=a[q],g=q/d,f[0]=b*f[0]+(1-b)*(k+g*n),f[1]=b*f[1]+(1-b)*(h+g*m);return Of(a)},
cardinal:function(a,b){return 3>a.length?ga(a):a[0]+jc(a,wd(a,b))},"cardinal-open":function(a,b){return 4>a.length?ga(a):a[1]+jc(a.slice(1,a.length-1),wd(a,b))},"cardinal-closed":function(a,b){return 3>a.length?ga(a):a[0]+jc((a.push(a[0]),a),wd([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=ga(a);else{var b=a[0],d,f,g,k,h=[],n;d=0;n=a.length-1;for(var m=[],q=a[1],p=m[0]=yd(a[0],q);++d<n;)m[d]=(p+(p=yd(q,q=a[d+1])))/2;n=(m[d]=p,m);m=-1;for(q=a.length-1;++m<q;)d=yd(a[m],
a[m+1]),H(d)<A?n[m]=n[m+1]=0:(f=n[m]/d,g=n[m+1]/d,k=f*f+g*g,9<k&&(k=3*d/Math.sqrt(k),n[m]=k*f,n[m+1]=k*g));for(m=-1;++m<=q;)k=(a[Math.min(q,m+1)][0]-a[Math.max(0,m-1)][0])/(6*(1+n[m]*n[m])),h.push([k||0,n[m]*k||0]);a=b+jc(a,h)}return a}});td.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var Pf=[0,2/3,1/3,0],Qf=[0,1/3,2/3,0],Na=[0,1/6,2/3,1/6];s.svg.line.radial=function(){var a=Nf(Rf);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a};ud.reverse=vd;vd.reverse=ud;s.svg.area=function(){return Sf(X)};
s.svg.area.radial=function(){var a=Sf(Rf);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a};s.svg.chord=function(){function a(a,k){var h=b(this,f,a,k),n=b(this,g,a,k);return"M"+h.p0+d(h.r,h.p1,h.a1-h.a0)+(h.a0==n.a0&&h.a1==n.a1?"Q 0,0 "+h.p0:"Q 0,0 "+n.p0+d(n.r,n.p1,n.a1-n.a0)+("Q 0,0 "+h.p0))+"Z"}function b(a,e,d,f){var g=e.call(a,d,f);e=k.call(a,g,f);d=h.call(a,g,f)+Xa;
a=n.call(a,g,f)+Xa;return{r:e,a0:d,a1:a,p0:[e*Math.cos(d),e*Math.sin(d)],p1:[e*Math.cos(a),e*Math.sin(a)]}}function d(a,b,e){return"A"+a+","+a+" 0 "+ +(e>F)+",1 "+b}var f=$c,g=ad,k=Zh,h=Lf,n=Mf;return a.radius=function(b){return arguments.length?(k=K(b),a):k},a.source=function(b){return arguments.length?(f=K(b),a):f},a.target=function(b){return arguments.length?(g=K(b),a):g},a.startAngle=function(b){return arguments.length?(h=K(b),a):h},a.endAngle=function(b){return arguments.length?(n=K(b),a):n},
a};s.svg.diagonal=function(){function a(a,g){var k=b.call(this,a,g),h=d.call(this,a,g),n=(k.y+h.y)/2,k=[k,{x:k.x,y:n},{x:h.x,y:n},h];return k=k.map(f),"M"+k[0]+"C"+k[1]+" "+k[2]+" "+k[3]}var b=$c,d=ad,f=Tf;return a.source=function(d){return arguments.length?(b=K(d),a):b},a.target=function(b){return arguments.length?(d=K(b),a):d},a.projection=function(b){return arguments.length?(f=b,a):f},a};s.svg.diagonal.radial=function(){var a=s.svg.diagonal(),b=Tf,d=a.projection;return a.projection=function(a){return arguments.length?
d($h(b=a)):b},a};s.svg.symbol=function(){function a(a,f){return(lg.get(b.call(this,a,f))||Uf)(d.call(this,a,f))}var b=bi,d=ai;return a.type=function(d){return arguments.length?(b=K(d),a):b},a.size=function(b){return arguments.length?(d=K(b),a):d},a};var lg=s.map({circle:Uf,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*mg));var b=a*mg;return"M0,"+-a+"L"+b+",0 0,"+a+
" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/Bc);var b=a*Bc/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Bc);var b=a*Bc/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});s.svg.symbolTypes=lg.keys();var Za,nc,Bc=Math.sqrt(3),mg=Math.tan(30*E),W=[],ag=0;W.call=L.call;W.empty=L.empty;W.node=L.node;W.size=L.size;s.transition=function(a){return arguments.length?
Za?a.transition():a:$f.transition()};s.transition.prototype=W;W.select=function(a){var b,d,f,g=this.id,k=[];a=U(a);for(var h=-1,n=this.length;++h<n;){k.push(b=[]);for(var m=this[h],q=-1,p=m.length;++q<p;)(f=m[q])&&(d=a.call(f,f.__data__,q,h))?("__data__"in f&&(d.__data__=f.__data__),kc(d,q,g,f.__transition__[g]),b.push(d)):b.push(null)}return Cb(k,g)};W.selectAll=function(a){var b,d,f,g,k=this.id,h=[];a=Jd(a);for(var n=-1,m=this.length;++n<m;)for(var q=this[n],p=-1,r=q.length;++p<r;)if(b=q[p]){g=
b.__transition__[k];d=a.call(b,b.__data__,p,n);h.push(b=[]);for(var s=-1,t=d.length;++s<t;)(f=d[s])&&kc(f,s,k,g),b.push(f)}return Cb(h,k)};W.filter=function(a){var b,d,f,g=[];"function"!=typeof a&&(a=Rd(a));for(var k=0,h=this.length;h>k;k++){g.push(b=[]);d=this[k];for(var n=0,m=d.length;m>n;n++)(f=d[n])&&a.call(f,f.__data__,n,k)&&b.push(f)}return Cb(g,this.id)};W.tween=function(a,b){var d=this.id;return 2>arguments.length?this.node().__transition__[d].tween.get(a):va(this,null==b?function(b){b.__transition__[d].tween.remove(a)}:
function(f){f.__transition__[d].tween.set(a,b)})};W.attr=function(a,b){function d(){this.removeAttribute(n)}function f(){this.removeAttributeNS(n.space,n.local)}function g(a){return null==a?d:(a+="",function(){var b,e=this.getAttribute(n);return e!==a&&(b=h(e,a),function(a){this.setAttribute(n,b(a))})})}function k(a){return null==a?f:(a+="",function(){var b,e=this.getAttributeNS(n.space,n.local);return e!==a&&(b=h(e,a),function(a){this.setAttributeNS(n.space,n.local,b(a))})})}if(2>arguments.length){for(b in a)this.attr(b,
a[b]);return this}var h="transform"==a?of:Wa,n=s.ns.qualify(a);return zd(this,"attr."+a,b,n.local?k:g)};W.attrTween=function(a,b){function d(a,f){var k=b.call(this,a,f,this.getAttribute(g));return k&&function(a){this.setAttribute(g,k(a))}}function f(a,d){var k=b.call(this,a,d,this.getAttributeNS(g.space,g.local));return k&&function(a){this.setAttributeNS(g.space,g.local,k(a))}}var g=s.ns.qualify(a);return this.tween("attr."+a,g.local?f:d)};W.style=function(a,b,d){function f(){this.style.removeProperty(a)}
var g=arguments.length;if(3>g){if("string"!=typeof a){2>g&&(b="");for(d in a)this.style(d,a[d],b);return this}d=""}return zd(this,"style."+a,b,function(b){return null==b?f:(b+="",function(){var e,f=aa.getComputedStyle(this,null).getPropertyValue(a);return f!==b&&(e=Wa(f,b),function(b){this.style.setProperty(a,e(b),d)})})})};W.styleTween=function(a,b,d){return 3>arguments.length&&(d=""),this.tween("style."+a,function(f,g){var k=b.call(this,f,g,aa.getComputedStyle(this,null).getPropertyValue(a));return k&&
function(b){this.style.setProperty(a,k(b),d)}})};W.text=function(a){return zd(this,"text",a,ci)};W.remove=function(){return this.each("end.transition",function(){var a;2>this.__transition__.count&&(a=this.parentNode)&&a.removeChild(this)})};W.ease=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].ease:("function"!=typeof a&&(a=s.ease.apply(s,arguments)),va(this,function(d){d.__transition__[b].ease=a}))};W.delay=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].delay:
va(this,"function"==typeof a?function(d,f,g){d.__transition__[b].delay=+a.call(d,d.__data__,f,g)}:(a=+a,function(d){d.__transition__[b].delay=a}))};W.duration=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].duration:va(this,"function"==typeof a?function(d,f,g){d.__transition__[b].duration=Math.max(1,a.call(d,d.__data__,f,g))}:(a=Math.max(1,a),function(d){d.__transition__[b].duration=a}))};W.each=function(a,b){var d=this.id;if(2>arguments.length){var f=nc,g=Za;Za=
d;va(this,function(b,e,f){nc=b.__transition__[d];a.call(b,b.__data__,e,f)});nc=f;Za=g}else va(this,function(f){f=f.__transition__[d];(f.event||(f.event=s.dispatch("start","end"))).on(a,b)});return this};W.transition=function(){for(var a,b,d,f,g=this.id,k=++ag,h=[],n=0,m=this.length;m>n;n++){h.push(a=[]);b=this[n];for(var q=0,p=b.length;p>q;q++)(d=b[q])&&(f=Object.create(d.__transition__[g]),f.delay+=f.duration,kc(d,q,k,f)),a.push(d)}return Cb(h,k)};s.svg.axis=function(){function a(a){a.each(function(){var a,
q=s.select(this),p=this.__chart__||d,r=this.__chart__=d.copy(),t=null==m?r.ticks?r.ticks.apply(r,n):r.domain():m,w=null==b?r.tickFormat?r.tickFormat.apply(r,n):X:b,v=q.selectAll(".tick").data(t,r),t=v.enter().insert("g",".domain").attr("class","tick").style("opacity",A),x=s.transition(v.exit()).style("opacity",A).remove(),z=s.transition(v.order()).style("opacity",1),B=fc(r),q=q.selectAll(".domain").data([0]),q=(q.enter().append("path").attr("class","domain"),s.transition(q));t.append("line");t.append("text");
var N=t.select("line"),C=z.select("line"),w=v.select("text").text(w),v=t.select("text"),M=z.select("text");switch(f){case "bottom":a=Vf;N.attr("y2",g);v.attr("y",Math.max(g,0)+h);C.attr("x2",0).attr("y2",g);M.attr("x",0).attr("y",Math.max(g,0)+h);w.attr("dy",".71em").style("text-anchor","middle");q.attr("d","M"+B[0]+","+k+"V0H"+B[1]+"V"+k);break;case "top":a=Vf;N.attr("y2",-g);v.attr("y",-(Math.max(g,0)+h));C.attr("x2",0).attr("y2",-g);M.attr("x",0).attr("y",-(Math.max(g,0)+h));w.attr("dy","0em").style("text-anchor",
"middle");q.attr("d","M"+B[0]+","+-k+"V0H"+B[1]+"V"+-k);break;case "left":a=Wf;N.attr("x2",-g);v.attr("x",-(Math.max(g,0)+h));C.attr("x2",-g).attr("y2",0);M.attr("x",-(Math.max(g,0)+h)).attr("y",0);w.attr("dy",".32em").style("text-anchor","end");q.attr("d","M"+-k+","+B[0]+"H0V"+B[1]+"H"+-k);break;case "right":a=Wf,N.attr("x2",g),v.attr("x",Math.max(g,0)+h),C.attr("x2",g).attr("y2",0),M.attr("x",Math.max(g,0)+h).attr("y",0),w.attr("dy",".32em").style("text-anchor","start"),q.attr("d","M"+k+","+B[0]+
"H0V"+B[1]+"H"+k)}if(r.rangeBand)var P=r,E=P.rangeBand()/2,p=r=function(a){return P(a)+E};else p.rangeBand?p=r:x.call(a,r);t.call(a,p);z.call(a,r)})}var b,d=s.scale.linear(),f=ng,g=6,k=6,h=3,n=[10],m=null;return a.scale=function(b){return arguments.length?(d=b,a):d},a.orient=function(b){return arguments.length?(f=b in Bi?b+"":ng,a):f},a.ticks=function(){return arguments.length?(n=arguments,a):n},a.tickValues=function(b){return arguments.length?(m=b,a):m},a.tickFormat=function(d){return arguments.length?
(b=d,a):b},a.tickSize=function(b){var e=arguments.length;return e?(g=+b,k=+arguments[e-1],a):g},a.innerTickSize=function(b){return arguments.length?(g=+b,a):g},a.outerTickSize=function(b){return arguments.length?(k=+b,a):k},a.tickPadding=function(b){return arguments.length?(h=+b,a):h},a.tickSubdivide=function(){return arguments.length&&a},a};var ng="bottom",Bi={top:1,right:1,bottom:1,left:1};s.svg.brush=function(){function a(k){k.each(function(){var k=s.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color",
"rgba(0,0,0,0)").on("mousedown.brush",g).on("touchstart.brush",g),h=k.selectAll(".background").data([0]);h.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");k.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=k.selectAll(".resize").data(v,X);n.exit().remove();n.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Ci[a]}).append("rect").attr("x",
function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");n.style("display",a.empty()?"none":null);var p,k=s.transition(k),h=s.transition(h);m&&(p=fc(m),h.attr("x",p[0]).attr("width",p[1]-p[0]),d(k));q&&(p=fc(q),h.attr("y",p[0]).attr("height",p[1]-p[0]),f(k));b(k)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+p[+/e$/.test(a)]+","+r[+/^s/.test(a)]+")"})}function d(a){a.select(".extent").attr("x",
p[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",p[1]-p[0])}function f(a){a.select(".extent").attr("y",r[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",r[1]-r[0])}function g(){function v(){var a=s.mouse(C),g=!1;A&&(a[0]+=A[0],a[1]+=A[1]);L||(s.event.altKey?(B||(B=[(p[0]+p[1])/2,(r[0]+r[1])/2]),K[0]=p[+(a[0]<B[0])],K[1]=r[+(a[1]<B[1])]):B=null);H&&x(a,m,0)&&(d(E),g=!0);U&&x(a,q,1)&&(f(E),g=!0);g&&(b(E),D({type:"brush",mode:L?"move":"resize"}))}function x(a,b,e){var d,f,g=fc(b);b=
g[0];var g=g[1],n=K[e],l=e?r:p,m=l[1]-l[0];return L&&(b-=n,g-=m+n),d=(e?w:t)?Math.max(b,Math.min(g,a[e])):a[e],L?f=(d+=n)+m:(B&&(n=Math.max(b,Math.min(g,2*B[e]-d))),d>n?(f=d,d=n):f=n),l[0]!=d||l[1]!=f?(e?h=null:k=null,l[0]=d,l[1]=f,!0):void 0}function z(){v();E.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);s.select("body").style("cursor",null);O.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",
null).on("keyup.brush",null);Oa();D({type:"brushend"})}var B,A,C=this,P=s.select(s.event.target),D=n.of(C,arguments),E=s.select(C),F=P.datum(),H=!/^(n|s)$/.test(F)&&m,U=!/^(e|w)$/.test(F)&&q,L=P.classed("extent"),Oa=Gb(),K=s.mouse(C),O=s.select(aa).on("keydown.brush",function(){32==s.event.keyCode&&(L||(B=null,K[0]-=p[1],K[1]-=r[1],L=2),N())}).on("keyup.brush",function(){32==s.event.keyCode&&2==L&&(K[0]+=p[1],K[1]+=r[1],L=0,N())});if(s.event.changedTouches?O.on("touchmove.brush",v).on("touchend.brush",
z):O.on("mousemove.brush",v).on("mouseup.brush",z),E.interrupt().selectAll("*").interrupt(),L)K[0]=p[0]-K[0],K[1]=r[0]-K[1];else if(F){var R=+/w$/.test(F),F=+/^n/.test(F);A=[p[1-R]-K[0],r[1-F]-K[1]];K[0]=p[R];K[1]=r[F]}else s.event.altKey&&(B=K.slice());E.style("pointer-events","none").selectAll(".resize").style("display",null);s.select("body").style("cursor",P.style("cursor"));D({type:"brushstart"});v()}var k,h,n=Oa(a,"brushstart","brush","brushend"),m=null,q=null,p=[0,0],r=[0,0],t=!0,w=!0,v=Gd[0];
return a.event=function(a){a.each(function(){var a=n.of(this,arguments),b={x:p,y:r,i:k,j:h},e=this.__chart__||b;this.__chart__=b;Za?s.select(this).transition().each("start.brush",function(){k=e.i;h=e.j;p=e.x;r=e.y;a({type:"brushstart"})}).tween("brush:brush",function(){var e=ec(p,b.x),d=ec(r,b.y);return k=h=null,function(f){p=b.x=e(f);r=b.y=d(f);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){k=b.i;h=b.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),
a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(m=b,v=Gd[!m<<1|!q],a):m},a.y=function(b){return arguments.length?(q=b,v=Gd[!m<<1|!q],a):q},a.clamp=function(b){return arguments.length?(m&&q?(t=!!b[0],w=!!b[1]):m?t=!!b:q&&(w=!!b),a):m&&q?[t,w]:m?t:q?w:null},a.extent=function(b){var e,d,f,g,n;return arguments.length?(m&&(e=b[0],d=b[1],q&&(e=e[0],d=d[0]),k=[e,d],m.invert&&(e=m(e),d=m(d)),e>d&&(n=e,e=d,d=n),(e!=p[0]||d!=p[1])&&(p=[e,d])),q&&(f=b[0],g=b[1],
m&&(f=f[1],g=g[1]),h=[f,g],q.invert&&(f=q(f),g=q(g)),f>g&&(n=f,f=g,g=n),(f!=r[0]||g!=r[1])&&(r=[f,g])),a):(m&&(k?(e=k[0],d=k[1]):(e=p[0],d=p[1],m.invert&&(e=m.invert(e),d=m.invert(d)),e>d&&(n=e,e=d,d=n))),q&&(h?(f=h[0],g=h[1]):(f=r[0],g=r[1],q.invert&&(f=q.invert(f),g=q.invert(g)),f>g&&(n=f,f=g,g=n))),m&&q?[[e,f],[d,g]]:m?[e,d]:q&&[f,g])},a.clear=function(){return a.empty()||(p=[0,0],r=[0,0],k=h=null),a},a.empty=function(){return!!m&&p[0]==p[1]||!!q&&r[0]==r[1]},s.rebind(a,n,"on")};var Ci={n:"ns-resize",
e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Gd=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Hd=C.format=cg.timeFormat,og=Hd.utc,pg=og("%Y-%m-%dT%H:%M:%S.%LZ");Hd.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ad:pg;Ad.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Ad.toString=pg.toString;C.second=Ra(function(a){return new Z(1E3*Math.floor(a/1E3))},function(a,b){a.setTime(a.getTime()+1E3*
Math.floor(b))},function(a){return a.getSeconds()});C.seconds=C.second.range;C.seconds.utc=C.second.utc.range;C.minute=Ra(function(a){return new Z(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});C.minutes=C.minute.range;C.minutes.utc=C.minute.utc.range;C.hour=Ra(function(a){var b=a.getTimezoneOffset()/60;return new Z(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},function(a){return a.getHours()});
C.hours=C.hour.range;C.hours.utc=C.hour.utc.range;C.month=Ra(function(a){return a=C.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});C.months=C.month.range;C.months.utc=C.month.utc.range;var lc=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Id=[[C.second,1],[C.second,5],[C.second,15],[C.second,30],[C.minute,1],[C.minute,5],[C.minute,15],[C.minute,30],[C.hour,1],[C.hour,3],[C.hour,6],[C.hour,12],
[C.day,1],[C.day,2],[C.week,1],[C.month,1],[C.month,3],[C.year,1]],Di=Hd.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",fb]]),di={range:function(a,b,d){return s.range(Math.ceil(a/d)*d,+b,d).map(Ya)},floor:X,ceil:X};
Id.year=C.year;C.scale=function(){return Bd(s.scale.linear(),Id,Di)};var qg=Id.map(function(a){return[a[0].utc,a[1]]}),Ei=og.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",fb]]);qg.year=C.year.utc;
C.scale.utc=function(){return Bd(s.scale.linear(),qg,Ei)};s.text=Pc(function(a){return a.responseText});s.json=function(a,b){return Jb(a,"application/json",ei,b)};s.html=function(a,b){return Jb(a,"text/html",fi,b)};s.xml=Pc(function(a){return a.responseXML});"function"==typeof define&&define.amd?define(s):"object"==typeof module&&module.exports&&(module.exports=s);this.d3=s}();this.j$=this.jStat=function(f,h){function d(b,d){var g=b>d?b:d;return f.pow(10,17-~~(f.log(0<g?g:-g)*f.LOG10E))}function g(b){return"[object Function]"===t.call(b)}function b(b){return"number"==typeof b&&b===b}function k(){return new k._init(arguments)}function n(){return 0}function q(){return 1}function m(b,d){return b===d?1:0}var p=Array.prototype.concat,r=Array.prototype.slice,t=Object.prototype.toString,x=Array.isArray||function(b){return"[object Array]"===t.call(b)};k.fn=k.prototype;k._init=
function(d){var f;if(x(d[0]))if(x(d[0][0])){g(d[1])&&(d[0]=k.map(d[0],d[1]));for(f=0;f<d[0].length;f++)this[f]=d[0][f];this.length=d[0].length}else this[0]=g(d[1])?k.map(d[0],d[1]):d[0],this.length=1;else{if(b(d[0]))this[0]=k.seq.apply(null,d);else{if(d[0]instanceof k)return k(d[0].toArray());this[0]=[]}this.length=1}return this};k._init.prototype=k.prototype;k._init.constructor=k;k.utils={calcRdx:d,isArray:x,isFunction:g,isNumber:b,toVector:function(b){return p.apply([],b)}};k.extend=function(b){var d,
f;if(1===arguments.length){for(f in b)k[f]=b[f];return this}for(d=1;d<arguments.length;d++)for(f in arguments[d])b[f]=arguments[d][f];return b};k.rows=function(b){return b.length||1};k.cols=function(b){return b[0].length||1};k.dimensions=function(b){return{rows:k.rows(b),cols:k.cols(b)}};k.row=function(b,d){return b[d]};k.col=function(b,d){for(var f=Array(b.length),g=0;g<b.length;g++)f[g]=[b[g][d]];return f};k.diag=function(b){for(var d=k.rows(b),f=Array(d),g=0;g<d;g++)f[g]=[b[g][g]];return f};k.antidiag=
function(b){for(var d=k.rows(b)-1,f=Array(d),g=0;0<=d;d--,g++)f[g]=[b[g][d]];return f};k.transpose=function(b){var d=[],f,g,k,h,n;x(b[0])||(b=[b]);g=b.length;k=b[0].length;for(n=0;n<k;n++){f=Array(g);for(h=0;h<g;h++)f[h]=b[h][n];d.push(f)}return 1===d.length?d[0]:d};k.map=function(b,d,f){var g,k,h,n;x(b[0])||(b=[b]);g=b.length;k=b[0].length;h=f?b:Array(g);for(f=0;f<g;f++)for(h[f]||(h[f]=Array(k)),n=0;n<k;n++)h[f][n]=d(b[f][n],f,n);return 1===h.length?h[0]:h};k.alter=function(b,d){return k.map(b,d,
!0)};k.create=function(b,d,f){var k=Array(b),h,n;g(d)&&(f=d,d=b);for(h=0;h<b;h++)for(k[h]=Array(d),n=0;n<d;n++)k[h][n]=f(h,n);return k};k.zeros=function(d,f){return b(f)||(f=d),k.create(d,f,n)};k.ones=function(d,f){return b(f)||(f=d),k.create(d,f,q)};k.rand=function(d,g){return b(g)||(g=d),k.create(d,g,f.random)};k.identity=function(d,f){return b(f)||(f=d),k.create(d,f,m)};k.symmetric=function(b){var d=b.length,f,g;if(b.length!==b[0].length)return!1;for(f=0;f<d;f++)for(g=0;g<d;g++)if(b[g][f]!==b[f][g])return!1;
return!0};k.clear=function(b){return k.alter(b,n)};k.seq=function(b,f,k,h){g(h)||(h=!1);var n=[],m=d(b,f);k=(f*m-b*m)/((k-1)*m);var q=b,p;for(p=0;q<=f;p++,q=(b*m+k*m*p)/m)n.push(h?h(q,p):q);return n};var v=k.prototype;return v.length=0,v.push=Array.prototype.push,v.sort=Array.prototype.sort,v.splice=Array.prototype.splice,v.slice=Array.prototype.slice,v.toArray=function(){return 1<this.length?r.call(this):r.call(this)[0]},v.map=function(b,d){return k(k.map(this,b,d))},v.alter=function(b){return k.alter(this,
b),this},function(b){for(var d=0;d<b.length;d++)(function(b){v[b]=function(d){var f=this,g;return d?(setTimeout(function(){d.call(f,v[b].call(f))}),this):(g=k[b](this),x(g)?k(g):g)}})(b[d])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(b){for(var d=0;d<b.length;d++)(function(b){v[b]=function(d,f){var g=this;return f?(setTimeout(function(){f.call(g,v[b].call(g,d))}),this):k(k[b](this,d))}})(b[d])}(["row","col"]),function(b){for(var d=0;d<b.length;d++){var f=b[d];
v[f]=new Function("return jStat(jStat."+f+".apply(null, arguments));")}}(["create","zeros","ones","rand","identity"]),k}(Math);
(function(f,h){function d(b,d){return b-d}var g=f.utils.isFunction;f.sum=function(b){for(var d=0,f=b.length;0<=--f;)d+=b[f];return d};f.sumsqrd=function(b){for(var d=0,f=b.length;0<=--f;)d+=b[f]*b[f];return d};f.sumsqerr=function(b){for(var d=f.mean(b),g=0,h=b.length,p;0<=--h;)p=b[h]-d,g+=p*p;return g};f.product=function(b){for(var d=1,f=b.length;0<=--f;)d*=b[f];return d};f.min=function(b){for(var d=b[0],f=0;++f<b.length;)b[f]<d&&(d=b[f]);return d};f.max=function(b){for(var d=b[0],f=0;++f<b.length;)b[f]>
d&&(d=b[f]);return d};f.mean=function(b){return f.sum(b)/b.length};f.meansqerr=function(b){return f.sumsqerr(b)/b.length};f.geomean=function(b){return h.pow(f.product(b),1/b.length)};f.median=function(b){var f=b.length;b=b.slice().sort(d);return f&1?b[f/2|0]:(b[f/2-1]+b[f/2])/2};f.cumsum=function(b){var d=b.length,f=Array(d),g;f[0]=b[0];for(g=1;g<d;g++)f[g]=f[g-1]+b[g];return f};f.diff=function(b){var d=[],f=b.length,g;for(g=1;g<f;g++)d.push(b[g]-b[g-1]);return d};f.mode=function(b){var f=b.length;
b=b.slice().sort(d);var g=1,h=0,p=0,r=[],t;for(t=0;t<f;t++)b[t]===b[t+1]?g++:(g>h?(r=[b[t]],h=g,p=0):g===h&&(r.push(b[t]),p++),g=1);return 0===p?r[0]:r};f.range=function(b){return f.max(b)-f.min(b)};f.variance=function(b,d){return f.sumsqerr(b)/(b.length-(d?1:0))};f.stdev=function(b,d){return h.sqrt(f.variance(b,d))};f.meandev=function(b){var d=0,g=f.mean(b),m;for(m=b.length-1;0<=m;m--)d+=h.abs(b[m]-g);return d/b.length};f.meddev=function(b){var d=0,g=f.median(b),m;for(m=b.length-1;0<=m;m--)d+=h.abs(b[m]-
g);return d/b.length};f.coeffvar=function(b){return f.stdev(b)/f.mean(b)};f.quartiles=function(b){var f=b.length;b=b.slice().sort(d);return[b[h.round(f/4)-1],b[h.round(f/2)-1],b[h.round(3*f/4)-1]]};f.quantiles=function(b,f,g,m){var p=b.slice().sort(d),r=[f.length];b=b.length;var t,x,v;"undefined"==typeof g&&(g=.375);"undefined"==typeof m&&(m=.375);for(t=0;t<f.length;t++)x=f[t],v=g+x*(1-g-m),v=b*x+v,x=h.floor(h.max(1,h.min(v,b-1))),v=h.max(0,h.min(v-x,1)),r[t]=(1-v)*p[x-1]+v*p[x];return r};f.percentileOfScore=
function(b,d,f){var g=0,h=b.length,r=!1,t;"strict"===f&&(r=!0);for(t=0;t<h;t++)f=b[t],(r&&f<d||!r&&f<=d)&&g++;return g/h};f.covariance=function(b,d){var g=f.mean(b),h=f.mean(d),p=b.length,r=Array(p),t;for(t=0;t<p;t++)r[t]=(b[t]-g)*(d[t]-h);return f.sum(r)/(p-1)};f.corrcoeff=function(b,d){return f.covariance(b,d)/f.stdev(b,1)/f.stdev(d,1)};var b=f.prototype;b.cumsum=function(d,h){var q=[],m=0,p=this;g(d)&&(h=d,d=!1);if(h)return setTimeout(function(){h.call(p,b.cumsum.call(p,d))}),this;if(1<this.length){for(p=
!0===d?this:this.transpose();m<p.length;m++)q[m]=f.cumsum(p[m]);return q}return f.cumsum(this[0],d)};(function(d){for(var h=0;h<d.length;h++)(function(d){b[d]=function(k,h){var n=[],t=0,x=this;g(k)&&(h=k,k=!1);if(h)return setTimeout(function(){h.call(x,b[d].call(x,k))}),this;if(1<this.length){for(x=!0===k?this:this.transpose();t<x.length;t++)n[t]=f[d](x[t]);return!0===k?f[d](f.utils.toVector(n)):n}return f[d](this[0],k)}})(d[h])})("sum sumsqrd sumsqerr product min max mean meansqerr geomean median diff mode range variance stdev meandev meddev coeffvar quartiles".split(" "));
(function(d){for(var h=0;h<d.length;h++)(function(d){b[d]=function(){var k=[],h=0,n=this,t=Array.prototype.slice.call(arguments);if(g(t[t.length-1])){var x=t[t.length-1],v=t.slice(0,t.length-1);return setTimeout(function(){x.call(n,b[d].apply(n,v))}),this}x=void 0;if(1<this.length){for(n=n.transpose();h<n.length;h++)k[h]=f[d].apply(n,[n[h]].concat(t));return k}return f[d].apply(n,[this[0]].concat(t))}})(d[h])})(["quantiles","percentileOfScore"])})(this.jStat,Math);
(function(f,h){f.gammaln=function(d){var f=0,b=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5.395239384953E-6],k=1.000000000190015,n,q;q=(n=d)+5.5;for(q-=(d+.5)*h.log(q);6>f;f++)k+=b[f]/++n;return h.log(2.5066282746310007*k/d)-q};f.gammafn=function(d){var f=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],b=[-30.8402300119739,315.35062697960416,
-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],k=!1,n=0,q=0,m=0,p,r,t,x;if(0>=d)if(x=d%1+3.6E-16)k=(d&1?-1:1)*h.PI/h.sin(h.PI*x),d=1-d;else return Infinity;t=d;1>d?r=d++:r=(d-=n=(d|0)-1)-1;for(p=0;8>p;++p)m=(m+f[p])*r,q=q*r+b[p];x=m/q+1;if(t<d)x/=t;else if(t>d)for(p=0;p<n;++p)x*=d,d++;return k&&(x=k/x),x};f.gammap=function(d,g){var b=f.gammaln(d),k=d,n=1/d,q=n,m=g+1-d,p=1/1E-30,r=1/m,t=r,x=1,v=-~(8.5*h.log(1<=d?d:1/d)+.4*d+17);if(0>
g||0>=d)return NaN;if(g<d+1){for(;x<=v;x++)n+=q*=g/++k;return n*h.exp(-g+d*h.log(g)-b)}for(;x<=v;x++)k=-x*(x-d),m+=2,r=k*r+m,p=m+k/p,r=1/r,t=t*r*p;return 1-t*h.exp(-g+d*h.log(g)-b)};f.factorialln=function(d){return 0>d?NaN:f.gammaln(d+1)};f.factorial=function(d){return 0>d?NaN:f.gammafn(d+1)};f.combination=function(d,g){return 170<d||170<g?h.exp(f.combinationln(d,g)):f.factorial(d)/f.factorial(g)/f.factorial(d-g)};f.combinationln=function(d,g){return f.factorialln(d)-f.factorialln(g)-f.factorialln(d-
g)};f.permutation=function(d,g){return f.factorial(d)/f.factorial(d-g)};f.betafn=function(d,g){return 0>=d||0>=g?void 0:170<d+g?h.exp(f.betaln(d,g)):f.gammafn(d)*f.gammafn(g)/f.gammafn(d+g)};f.betaln=function(d,g){return f.gammaln(d)+f.gammaln(g)-f.gammaln(d+g)};f.betacf=function(d,f,b){var k=1,n=f+b,q=f+1,m=f-1,p=1,r=1-n*d/q,t,x,v;1E-30>h.abs(r)&&(r=1E-30);for(v=r=1/r;100>=k&&!(t=2*k,x=k*(b-k)*d/((m+t)*(f+t)),r=1+x*r,1E-30>h.abs(r)&&(r=1E-30),p=1+x/p,1E-30>h.abs(p)&&(p=1E-30),r=1/r,v=v*r*p,x=-(f+
k)*(n+k)*d/((f+t)*(q+t)),r=1+x*r,1E-30>h.abs(r)&&(r=1E-30),p=1+x/p,1E-30>h.abs(p)&&(p=1E-30),r=1/r,t=r*p,v*=t,3E-7>h.abs(t-1));k++);return v};f.gammapinv=function(d,g){var b=0,k=g-1,n=f.gammaln(g),q,m,p,r,t;if(1<=d)return h.max(100,g+100*h.sqrt(g));if(0>=d)return 0;for(1<g?(r=h.log(k),t=h.exp(k*(r-1)-n),m=.5>d?d:1-d,p=h.sqrt(-2*h.log(m)),q=(2.30753+.27061*p)/(1+p*(.99229+.04481*p))-p,.5>d&&(q=-q),q=h.max(.001,g*h.pow(1-1/(9*g)-q/(3*h.sqrt(g)),3))):(p=1-g*(.253+.12*g),d<p?q=h.pow(d/p,1/g):q=1-h.log(1-
(d-p)/(1-p)));12>b;b++){if(0>=q)return 0;m=f.gammap(g,q)-d;1<g?p=t*h.exp(-(q-k)+k*(h.log(q)-r)):p=h.exp(-q+k*h.log(q)-n);p=m/p;q-=p/=1-.5*h.min(1,p*((g-1)/q-1));0>=q&&(q=.5*(q+p));if(h.abs(p)<1E-8*q)break}return q};f.erf=function(d){var f=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-9.46595344482036E-4,3.66839497852761E-4,4.2523324806907E-5,-2.0278578112534E-5,-1.624290004647E-6,1.30365583558E-6,1.5626441722E-8,-8.5238095915E-8,6.529054439E-9,5.059343495E-9,-9.91364156E-10,
-2.27365122E-10,9.6467911E-11,2.394038E-12,-6.886027E-12,8.94487E-13,3.13092E-13,-1.12708E-13,3.81E-16,7.106E-15,-1.523E-15,-9.4E-17,1.21E-16,-2.8E-17],b=f.length-1,k=!1,n=0,q=0,m,p,r,t;0>d&&(d=-d,k=!0);m=2/(2+d);for(p=4*m-2;0<b;b--)r=n,n=p*n-q+f[b],q=r;return t=m*h.exp(-d*d+.5*(f[0]+p*n)-q),k?t-1:1-t};f.erfc=function(d){return 1-f.erf(d)};f.erfcinv=function(d){var g=0,b,k,n;if(2<=d)return-100;if(0>=d)return 100;n=1>d?d:2-d;b=h.sqrt(-2*h.log(n/2));for(b=-.70711*((2.30753+.27061*b)/(1+b*(.99229+.04481*
b))-b);2>g;g++)k=f.erfc(b)-n,b+=k/(1.1283791670955126*h.exp(-b*b)-b*k);return 1>d?b:-b};f.ibetainv=function(d,g,b){var k=g-1,n=b-1,q=0,m,p,r,t,x,v,w,z,N;if(0>=d)return 0;if(1<=d)return 1;1<=g&&1<=b?(r=.5>d?d:1-d,t=h.sqrt(-2*h.log(r)),v=(2.30753+.27061*t)/(1+t*(.99229+.04481*t))-t,.5>d&&(v=-v),w=(v*v-3)/6,z=2/(1/(2*g-1)+1/(2*b-1)),N=v*h.sqrt(w+z)/z-(1/(2*b-1)-1/(2*g-1))*(w+5/6-2/(3*z)),v=g/(g+b*h.exp(2*N))):(m=h.log(g/(g+b)),p=h.log(b/(g+b)),t=h.exp(g*m)/g,x=h.exp(b*p)/b,N=t+x,d<t/N?v=h.pow(g*N*d,
1/g):v=1-h.pow(b*N*(1-d),1/b));for(m=-f.gammaln(g)-f.gammaln(b)+f.gammaln(g+b);10>q&&0!==v&&1!==v&&!(x=f.ibeta(v,g,b)-d,t=h.exp(k*h.log(v)+n*h.log(1-v)+m),x/=t,v-=t=x/(1-.5*h.min(1,x*(k/v-n/(1-v)))),0>=v&&(v=.5*(v+t)),1<=v&&(v=.5*(v+t+1)),h.abs(t)<1E-8*v&&0<q);q++);return v};f.ibeta=function(d,g,b){var k=0===d||1===d?0:h.exp(f.gammaln(g+b)-f.gammaln(g)-f.gammaln(b)+g*h.log(d)+b*h.log(1-d));return 0>d||1<d?!1:d<(g+1)/(g+b+2)?k*f.betacf(d,g,b)/g:1-k*f.betacf(1-d,b,g)/b};f.randn=function(d,g){var b,
k,n,q;g||(g=d);if(d)return f.create(d,g,function(){return f.randn()});do b=h.random(),k=1.7156*(h.random()-.5),n=b-.449871,q=h.abs(k)+.386595,n=n*n+q*(.196*q-.25472*n);while(.27597<n&&(.27846<n||k*k>-4*h.log(b)*b*b));return k/b};f.randg=function(d,g,b){var k=d,n,q,m;b||(b=g);d||(d=1);if(g)return n=f.zeros(g,b),n.alter(function(){return f.randg(d)}),n;1>d&&(d+=1);g=d-1/3;b=1/h.sqrt(9*g);do{do m=f.randn(),q=1+b*m;while(0>=q);q*=q*q;n=h.random()}while(n>1-.331*h.pow(m,4)&&h.log(n)>.5*m*m+g*(1-q+h.log(q)));
if(d==k)return g*q;do n=h.random();while(0===n);return h.pow(n,1/k)*g*q};(function(d){for(var g=0;g<d.length;g++)(function(b){f.fn[b]=function(){return f(f.map(this,function(d){return f[b](d)}))}})(d[g])})(["gammaln","gammafn","factorial","factorialln"]);(function(d){for(var g=0;g<d.length;g++)(function(b){f.fn[b]=function(){return f(f[b].apply(null,arguments))}})(d[g])})(["randn"])})(this.jStat,Math);
(function(f,h){(function(d){for(var g=0;g<d.length;g++)(function(b){f[b]=function(b,d,f){return this instanceof arguments.callee?(this._a=b,this._b=d,this._c=f,this):new arguments.callee(b,d,f)};f.fn[b]=function(d,g,h){d=f[b](d,g,h);return d.data=this,d};f[b].prototype.sample=function(d){var g=this._a,h=this._b,m=this._c;return d?f.alter(d,function(){return f[b].sample(g,h,m)}):f[b].sample(g,h,m)};(function(d){for(var g=0;g<d.length;g++)(function(d){f[b].prototype[d]=function(g){var k=this._a,h=this._b,
n=this._c;return!g&&0!==g&&(g=this.data),"number"!=typeof g?f.fn.map.call(g,function(g){return f[b][d](g,k,h,n)}):f[b][d](g,k,h,n)}})(d[g])})(["pdf","cdf","inv"]);(function(d){for(var g=0;g<d.length;g++)(function(d){f[b].prototype[d]=function(){return f[b][d](this._a,this._b,this._c)}})(d[g])})(["mean","median","mode","variance"])})(d[g])})("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy lognormal normal pareto studentt weibull uniform  binomial negbin hypgeom poisson triangular".split(" "));
f.extend(f.beta,{pdf:function(d,g,b){return 1<d||0>d?0:1==g&&1==b?1:512>g||512>b?h.pow(d,g-1)*h.pow(1-d,b-1)/f.betafn(g,b):h.exp((g-1)*h.log(d)+(b-1)*h.log(1-d)-f.betaln(g,b))},cdf:function(d,g,b){return 1<d||0>d?1*(1<d):f.ibeta(d,g,b)},inv:function(d,g,b){return f.ibetainv(d,g,b)},mean:function(d,f){return d/(d+f)},median:function(d,f){throw Error("median not yet implemented");},mode:function(d,f){return d*f/(h.pow(d+f,2)*(d+f+1))},sample:function(d,g){var b=f.randg(d);return b/(b+f.randg(g))},variance:function(d,
f){return d*f/(h.pow(d+f,2)*(d+f+1))}});f.extend(f.centralF,{pdf:function(d,g,b){return 0>d?void 0:h.sqrt(h.pow(g*d,g)*h.pow(b,b)/h.pow(g*d+b,g+b))/(d*f.betafn(g/2,b/2))},cdf:function(d,g,b){return f.ibeta(g*d/(g*d+b),g/2,b/2)},inv:function(d,g,b){return b/(g*(1/f.ibetainv(d,g/2,b/2)-1))},mean:function(d,f){return 2<f?f/(f-2):void 0},mode:function(d,f){return 2<d?f*(d-2)/(d*(f+2)):void 0},sample:function(d,g){var b=2*f.randg(d/2),k=2*f.randg(g/2);return b/d/(k/g)},variance:function(d,f){return 4>=
f?void 0:2*f*f*(d+f-2)/(d*(f-2)*(f-2)*(f-4))}});f.extend(f.cauchy,{pdf:function(d,f,b){return b/(h.pow(d-f,2)+h.pow(b,2))/h.PI},cdf:function(d,f,b){return h.atan((d-f)/b)/h.PI+.5},inv:function(d,f,b){return f+b*h.tan(h.PI*(d-.5))},median:function(d,f){return d},mode:function(d,f){return d},sample:function(d,g){return f.randn()*h.sqrt(1/(2*f.randg(.5)))*g+d}});f.extend(f.chisquare,{pdf:function(d,g){return h.exp((g/2-1)*h.log(d)-d/2-g/2*h.log(2)-f.gammaln(g/2))},cdf:function(d,g){return f.gammap(g/
2,d/2)},inv:function(d,g){return 2*f.gammapinv(d,.5*g)},mean:function(d){return d},median:function(d){return d*h.pow(1-2/(9*d),3)},mode:function(d){return 0<d-2?d-2:0},sample:function(d){return 2*f.randg(d/2)},variance:function(d){return 2*d}});f.extend(f.exponential,{pdf:function(d,f){return 0>d?0:f*h.exp(-f*d)},cdf:function(d,f){return 0>d?0:1-h.exp(-f*d)},inv:function(d,f){return-h.log(1-d)/f},mean:function(d){return 1/d},median:function(d){return 1/d*h.log(2)},mode:function(d){return 0},sample:function(d){return-1/
d*h.log(h.random())},variance:function(d){return h.pow(d,-2)}});f.extend(f.gamma,{pdf:function(d,g,b){return h.exp((g-1)*h.log(d)-d/b-f.gammaln(g)-g*h.log(b))},cdf:function(d,g,b){return f.gammap(g,d/b)},inv:function(d,g,b){return f.gammapinv(d,g)*b},mean:function(d,f){return d*f},mode:function(d,f){return 1<d?(d-1)*f:void 0},sample:function(d,g){return f.randg(d)*g},variance:function(d,f){return d*f*f}});f.extend(f.invgamma,{pdf:function(d,g,b){return h.exp(-(g+1)*h.log(d)-b/d-f.gammaln(g)+g*h.log(b))},
cdf:function(d,g,b){return 1-f.gammap(g,b/d)},inv:function(d,g,b){return b/f.gammapinv(1-d,g)},mean:function(d,f){return 1<d?f/(d-1):void 0},mode:function(d,f){return f/(d+1)},sample:function(d,g){return g/f.randg(d)},variance:function(d,f){return 2>=d?void 0:f*f/((d-1)*(d-1)*(d-2))}});f.extend(f.kumaraswamy,{pdf:function(d,f,b){return h.exp(h.log(f)+h.log(b)+(f-1)*h.log(d)+(b-1)*h.log(1-h.pow(d,f)))},cdf:function(d,f,b){return 1-h.pow(1-h.pow(d,f),b)},mean:function(d,g){return g*f.gammafn(1+1/d)*
f.gammafn(g)/f.gammafn(1+1/d+g)},median:function(d,f){return h.pow(1-h.pow(2,-1/f),1/d)},mode:function(d,f){return 1<=d&&1<=f&&1!==d&&1!==f?h.pow((d-1)/(d*f-1),1/d):void 0},variance:function(d,f){throw Error("variance not yet implemented");}});f.extend(f.lognormal,{pdf:function(d,f,b){return h.exp(-h.log(d)-.5*h.log(2*h.PI)-h.log(b)-h.pow(h.log(d)-f,2)/(2*b*b))},cdf:function(d,g,b){return.5+.5*f.erf((h.log(d)-g)/h.sqrt(2*b*b))},inv:function(d,g,b){return h.exp(-1.4142135623730951*b*f.erfcinv(2*d)+
g)},mean:function(d,f){return h.exp(d+f*f/2)},median:function(d,f){return h.exp(d)},mode:function(d,f){return h.exp(d-f*f)},sample:function(d,g){return h.exp(f.randn()*g+d)},variance:function(d,f){return(h.exp(f*f)-1)*h.exp(2*d+f*f)}});f.extend(f.normal,{pdf:function(d,f,b){return h.exp(-.5*h.log(2*h.PI)-h.log(b)-h.pow(d-f,2)/(2*b*b))},cdf:function(d,g,b){return.5*(1+f.erf((d-g)/h.sqrt(2*b*b)))},inv:function(d,g,b){return-1.4142135623730951*b*f.erfcinv(2*d)+g},mean:function(d,f){return d},median:function(d,
f){return d},mode:function(d,f){return d},sample:function(d,g){return f.randn()*g+d},variance:function(d,f){return f*f}});f.extend(f.pareto,{pdf:function(d,f,b){return d<=f?void 0:b*h.pow(f,b)/h.pow(d,b+1)},cdf:function(d,f,b){return 1-h.pow(f/d,b)},mean:function(d,f){return 1>=f?void 0:f*h.pow(d,f)/(f-1)},median:function(d,f){return d*f*h.SQRT2},mode:function(d,f){return d},variance:function(d,f){return 2>=f?void 0:d*d*f/(h.pow(f-1,2)*(f-2))}});f.extend(f.studentt,{pdf:function(d,g){return f.gammafn((g+
1)/2)/(h.sqrt(g*h.PI)*f.gammafn(g/2))*h.pow(1+d*d/g,-((g+1)/2))},cdf:function(d,g){var b=g/2;return f.ibeta((d+h.sqrt(d*d+g))/(2*h.sqrt(d*d+g)),b,b)},inv:function(d,g){var b=f.ibetainv(2*h.min(d,1-d),.5*g,.5);return b=h.sqrt(g*(1-b)/b),.5<d?b:-b},mean:function(d){return 1<d?0:void 0},median:function(d){return 0},mode:function(d){return 0},sample:function(d){return f.randn()*h.sqrt(d/(2*f.randg(d/2)))},variance:function(d){return 2<d?d/(d-2):1<d?Infinity:void 0}});f.extend(f.weibull,{pdf:function(d,
f,b){return 0>d?0:b/f*h.pow(d/f,b-1)*h.exp(-h.pow(d/f,b))},cdf:function(d,f,b){return 0>d?0:1-h.exp(-h.pow(d/f,b))},inv:function(d,f,b){return f*h.pow(-h.log(1-d),1/b)},mean:function(d,g){return d*f.gammafn(1+1/g)},median:function(d,f){return d*h.pow(h.log(2),1/f)},mode:function(d,f){return 1>=f?void 0:d*h.pow((f-1)/f,1/f)},sample:function(d,f){return d*h.pow(-h.log(h.random()),1/f)},variance:function(d,g){return d*d*f.gammafn(1+2/g)-h.pow(this.mean(d,g),2)}});f.extend(f.uniform,{pdf:function(d,f,
b){return d<f||d>b?0:1/(b-f)},cdf:function(d,f,b){return d<f?0:d<b?(d-f)/(b-f):1},mean:function(d,f){return.5*(d+f)},median:function(d,g){return f.mean(d,g)},mode:function(d,f){throw Error("mode is not yet implemented");},sample:function(d,f){return d/2+f/2+(f/2-d/2)*(2*h.random()-1)},variance:function(d,f){return h.pow(f-d,2)/12}});f.extend(f.binomial,{pdf:function(d,g,b){return 0===b||1===b?g*b===d?1:0:f.combination(g,d)*h.pow(b,d)*h.pow(1-b,g-d)},cdf:function(d,g,b){var k=[],h=0;if(0>d)return 0;
if(d<g){for(;h<=d;h++)k[h]=f.binomial.pdf(h,g,b);return f.sum(k)}return 1}});f.extend(f.negbin,{pdf:function(d,g,b){return d!==d|0?!1:0>d?0:f.combination(d+g-1,g-1)*h.pow(1-b,d)*h.pow(b,g)},cdf:function(d,g,b){var k=0,h=0;if(0>d)return 0;for(;h<=d;h++)k+=f.negbin.pdf(h,g,b);return k}});f.extend(f.hypgeom,{pdf:function(d,g,b,k){if(d!==d|0)return!1;if(0>d||d<b-(g-k)||d>k||d>b)return 0;if(2*b>g)return 2*k>g?f.hypgeom.pdf(g-b-k+d,g,g-b,g-k):f.hypgeom.pdf(k-d,g,g-b,k);if(2*k>g)return f.hypgeom.pdf(b-d,
g,b,g-k);if(b<k)return f.hypgeom.pdf(d,g,k,b);for(var n=1,q=0,m=0;m<d;m++){for(;1<n&&q<k;)n*=1-b/(g-q),q++;n*=(k-m)*(b-m)/((m+1)*(g-b-k+m+1))}for(;q<k;q++)n*=1-b/(g-q);return h.min(1,h.max(0,n))},cdf:function(d,g,b,k){if(0>d||d<b-(g-k))return 0;if(d>=k||d>=b)return 1;if(2*b>g)return 2*k>g?f.hypgeom.cdf(g-b-k+d,g,g-b,g-k):1-f.hypgeom.cdf(k-d-1,g,g-b,k);if(2*k>g)return 1-f.hypgeom.cdf(b-d-1,g,b,g-k);if(b<k)return f.hypgeom.cdf(d,g,k,b);for(var n=1,q=1,m=0,p=0;p<d;p++){for(;1<n&&m<k;){var r=1-b/(g-m),
q=q*r,n=n*r;m++}q*=(k-p)*(b-p)/((p+1)*(g-b-k+p+1));n+=q}for(;m<k;m++)n*=1-b/(g-m);return h.min(1,h.max(0,n))}});f.extend(f.poisson,{pdf:function(d,g){return h.pow(g,d)*h.exp(-g)/f.factorial(d)},cdf:function(d,g){var b=[],k=0;if(0>d)return 0;for(;k<=d;k++)b.push(f.poisson.pdf(k,g));return f.sum(b)},mean:function(d){return d},variance:function(d){return d},sample:function(d){var f=1,b=0;d=h.exp(-d);do b++,f*=h.random();while(f>d);return b-1}});f.extend(f.triangular,{pdf:function(d,f,b,k){return b<=
f||k<f||k>b?void 0:d<f||d>b?0:d<=k?2*(d-f)/((b-f)*(k-f)):2*(b-d)/((b-f)*(b-k))},cdf:function(d,f,b,k){return b<=f||k<f||k>b?void 0:d<f?0:d<=k?h.pow(d-f,2)/((b-f)*(k-f)):1-h.pow(b-d,2)/((b-f)*(b-k))},mean:function(d,f,b){return(d+f+b)/3},median:function(d,f,b){if(b<=(d+f)/2)return f-h.sqrt((f-d)*(f-b))/h.sqrt(2);if(b>(d+f)/2)return d+h.sqrt((f-d)*(b-d))/h.sqrt(2)},mode:function(d,f,b){return b},sample:function(d,f,b){var k=h.random();return k<(b-d)/(f-d)?d+h.sqrt(k*(f-d)*(b-d)):f-h.sqrt((1-k)*(f-d)*
(f-b))},variance:function(d,f,b){return(d*d+f*f+b*b-d*f-d*b-f*b)/18}})})(this.jStat,Math);
(function(f,h){var d=Array.prototype.push,g=f.utils.isArray;f.extend({add:function(b,d){return g(d)?(g(d[0])||(d=[d]),f.map(b,function(b,f,g){return b+d[f][g]})):f.map(b,function(b){return b+d})},subtract:function(b,d){return g(d)?(g(d[0])||(d=[d]),f.map(b,function(b,f,g){return b-d[f][g]||0})):f.map(b,function(b){return b-d})},divide:function(b,d){return g(d)?(g(d[0])||(d=[d]),f.multiply(b,f.inv(d))):f.map(b,function(b){return b/d})},multiply:function(b,d){var h,q,m,p,r=b.length,t=b[0].length,x=
f.zeros(r,m=g(d)?d[0].length:t),v=0;if(g(d)){for(;v<m;v++)for(h=0;h<r;h++){for(q=p=0;q<t;q++)p+=b[h][q]*d[q][v];x[h][v]=p}return 1===r&&1===v?x[0][0]:x}return f.map(b,function(b){return b*d})},dot:function(b,d){g(b[0])||(b=[b]);g(d[0])||(d=[d]);for(var h=1===b[0].length&&1!==b.length?f.transpose(b):b,q=1===d[0].length&&1!==d.length?f.transpose(d):d,m=[],p=0,r=h.length,t=h[0].length,x,v;p<r;p++){m[p]=[];for(v=x=0;v<t;v++)x+=h[p][v]*q[p][v];m[p]=x}return 1===m.length?m[0]:m},pow:function(b,d){return f.map(b,
function(b){return h.pow(b,d)})},abs:function(b){return f.map(b,function(b){return h.abs(b)})},norm:function(b,d){var f=0,q=0;isNaN(d)&&(d=2);for(g(b[0])&&(b=b[0]);q<b.length;q++)f+=h.pow(h.abs(b[q]),d);return h.pow(f,1/d)},angle:function(b,d){return h.acos(f.dot(b,d)/(f.norm(b)*f.norm(d)))},aug:function(b,f){for(var g=b.slice(),h=0;h<g.length;h++)d.apply(g[h],f[h]);return g},inv:function(b){var d=b.length,g=b[0].length,h=f.identity(d,g);b=f.gauss_jordan(b,h);for(var h=[],m=0,p;m<d;m++)for(h[m]=[],
p=g-1;p<b[0].length;p++)h[m][p-g]=b[m][p];return h},det:function(b){var d=b.length,f=2*d,g=Array(f),h=d-1,p=f-1,r=h-d+1,t=p,x=0,v=0,w;if(2===d)return b[0][0]*b[1][1]-b[0][1]*b[1][0];for(;x<f;x++)g[x]=1;for(x=0;x<d;x++){for(w=0;w<d;w++)g[0>r?r+d:r]*=b[x][w],g[t<d?t+d:t]*=b[x][w],r++,t--;r=--h-d+1;t=--p}for(x=0;x<d;x++)v+=g[x];for(;x<f;x++)v-=g[x];return v},gauss_elimination:function(b,d){var g=0,q=0,m=b.length,p=b[0].length,r=1,t=0,x=[],v;b=f.aug(b,d);for(v=b[0].length;g<m;g++){r=b[g][g];q=g;for(t=
g+1;t<p;t++)r<h.abs(b[t][g])&&(r=b[t][g],q=t);if(q!=g)for(t=0;t<v;t++)r=b[g][t],b[g][t]=b[q][t],b[q][t]=r;for(q=g+1;q<m;q++)for(r=b[q][g]/b[g][g],t=g;t<v;t++)b[q][t]-=r*b[g][t]}for(g=m-1;0<=g;g--){t=0;for(q=g+1;q<=m-1;q++)t=x[q]*b[g][q];x[g]=(b[g][v-1]-t)/b[g][g]}return x},gauss_jordan:function(b,d){for(var g=f.aug(b,d),q=g.length,m=g[0].length,p=0;p<q;p++){for(var r=p,t=p+1;t<q;t++)h.abs(g[t][p])>h.abs(g[r][p])&&(r=t);t=g[p];g[p]=g[r];g[r]=t;for(t=p+1;t<q;t++)for(c=g[t][p]/g[p][p],r=p;r<m;r++)g[t][r]-=
g[p][r]*c}for(p=q-1;0<=p;p--){c=g[p][p];for(t=0;t<p;t++)for(r=m-1;r>p-1;r--)g[t][r]-=g[p][r]*g[t][p]/c;g[p][p]/=c;for(r=q;r<m;r++)g[p][r]/=c}return g},lu:function(b,d){throw Error("lu not yet implemented");},cholesky:function(b,d){throw Error("cholesky not yet implemented");},gauss_jacobi:function(b,d,g,q){for(var m=0,p=0,r=b.length,t=[],x=[],v=[];m<r;m++)for(t[m]=[],x[m]=[],v[m]=[],p=0;p<r;p++)m>p?(t[m][p]=b[m][p],x[m][p]=v[m][p]=0):m<p?(x[m][p]=b[m][p],t[m][p]=v[m][p]=0):(v[m][p]=b[m][p],t[m][p]=
x[m][p]=0);b=f.multiply(f.multiply(f.inv(v),f.add(t,x)),-1);v=f.multiply(f.inv(v),d);d=g;g=f.add(f.multiply(b,g),v);for(m=2;h.abs(f.norm(f.subtract(g,d)))>q;)d=g,g=f.add(f.multiply(b,d),v),m++;return g},gauss_seidel:function(b,d,g,q){for(var m=0,p=b.length,r=[],t=[],x=[],v;m<p;m++)for(r[m]=[],t[m]=[],x[m]=[],v=0;v<p;v++)m>v?(r[m][v]=b[m][v],t[m][v]=x[m][v]=0):m<v?(t[m][v]=b[m][v],r[m][v]=x[m][v]=0):(x[m][v]=b[m][v],r[m][v]=t[m][v]=0);b=f.multiply(f.multiply(f.inv(f.add(x,r)),t),-1);r=f.multiply(f.inv(f.add(x,
r)),d);d=g;g=f.add(f.multiply(b,g),r);for(m=2;h.abs(f.norm(f.subtract(g,d)))>q;)d=g,g=f.add(f.multiply(b,d),r),m+=1;return g},SOR:function(b,d,g,q,m){for(var p=0,r=b.length,t=[],x=[],v=[],w;p<r;p++)for(t[p]=[],x[p]=[],v[p]=[],w=0;w<r;w++)p>w?(t[p][w]=b[p][w],x[p][w]=v[p][w]=0):p<w?(x[p][w]=b[p][w],t[p][w]=v[p][w]=0):(v[p][w]=b[p][w],t[p][w]=x[p][w]=0);b=f.multiply(f.inv(f.add(v,f.multiply(t,m))),f.subtract(f.multiply(v,1-m),f.multiply(x,m)));m=f.multiply(f.multiply(f.inv(f.add(v,f.multiply(t,m))),
d),m);d=g;g=f.add(f.multiply(b,g),m);for(p=2;h.abs(f.norm(f.subtract(g,d)))>q;)d=g,g=f.add(f.multiply(b,d),m),p++;return g},householder:function(b){for(var d=b.length,g=b[0].length,q=0,m=[],p=[],r;q<d-1;q++){p=0;for(m=q+1;m<g;m++)p+=b[m][q]*b[m][q];m=0<b[q+1][q]?-1:1;p=m*h.sqrt(p);r=h.sqrt((p*p-b[q+1][q]*p)/2);m=f.zeros(d,1);m[q+1][0]=(b[q+1][q]-p)/(2*r);for(p=q+2;p<d;p++)m[p][0]=b[p][q]/(2*r);p=f.subtract(f.identity(d,g),f.multiply(f.multiply(m,f.transpose(m)),2));b=f.multiply(p,f.multiply(b,p))}return b},
QR:function(b,d){for(var g=b.length,q=b[0].length,m=0,p=[],r=[],t=[],x;m<g-1;m++){r=0;for(p=m+1;p<q;p++)r+=b[p][m]*b[p][m];p=0<b[m+1][m]?-1:1;r=p*h.sqrt(r);x=h.sqrt((r*r-b[m+1][m]*r)/2);p=f.zeros(g,1);p[m+1][0]=(b[m+1][m]-r)/(2*x);for(r=m+2;r<g;r++)p[r][0]=b[r][m]/(2*x);r=f.subtract(f.identity(g,q),f.multiply(f.multiply(p,f.transpose(p)),2));b=f.multiply(r,b);d=f.multiply(r,d)}for(m=g-1;0<=m;m--){for(p=m+1;p<=q-1;p++);t[m]=d[m][0]/b[m][m]}return t},jacobi:function(b){for(var d=1,g=0,q=b.length,m=
f.identity(q,q),p=[],r,t,x,v,w;1===d;){g++;v=b[0][1];d=0;x=1;for(r=0;r<q;r++)for(t=0;t<q;t++)r!=t&&v<h.abs(b[r][t])&&(v=h.abs(b[r][t]),d=r,x=t);b[d][d]===b[x][x]?w=0<b[d][x]?h.PI/4:-h.PI/4:w=h.atan(2*b[d][x]/(b[d][d]-b[x][x]))/2;r=f.identity(q,q);r[d][d]=h.cos(w);r[d][x]=-h.sin(w);r[x][d]=h.sin(w);r[x][x]=h.cos(w);m=f.multiply(m,r);b=f.multiply(f.multiply(f.inv(r),b),r);d=0;for(r=1;r<q;r++)for(t=1;t<q;t++)r!=t&&.001<h.abs(b[r][t])&&(d=1)}for(r=0;r<q;r++)p.push(b[r][r]);return[m,p]},rungekutta:function(b,
d,f,g,h,p){var r,t,x;if(2===p)for(;g<=f;)r=d*b(g,h),t=d*b(g+d,h+r),h+=(r+t)/2,g+=d;if(4===p)for(;g<=f;)r=d*b(g,h),t=d*b(g+d/2,h+r/2),p=d*b(g+d/2,h+t/2),x=d*b(g+d,h+p),h+=(r+2*t+2*p+x)/6,g+=d;return h},romberg:function(b,d,f,g){for(var m=0,p=(f-d)/2,r=[],t=[],x=[],v,w,z;m<g/2;){z=b(d);w=d;for(v=0;w<=f;w+=p,v++)r[v]=w;v=r.length;for(w=1;w<v-1;w++)z+=(0!==w%2?4:2)*b(r[w]);z=p/3*(z+b(f));x[m]=z;p/=2;m++}b=x.length;for(v=1;1!==b;){for(w=0;w<b-1;w++)t[w]=(h.pow(4,v)*x[w+1]-x[w])/(h.pow(4,v)-1);b=t.length;
x=t;t=[];v++}return x},richardson:function(b,d,f,g){function m(b,d){for(var f=0,g=b.length,h;f<g;f++)b[f]===d&&(h=f);return h}for(var p=h.abs(f-b[m(b,f)+1]),r=0,t=[],x=[],v,w;g>=p;)v=m(b,f+g),w=m(b,f),t[r]=(d[v]-2*d[w]+d[2*w-v])/(g*g),g/=2,r++;d=t.length;for(b=1;1!=d;){for(f=0;f<d-1;f++)x[f]=(h.pow(4,b)*t[f+1]-t[f])/(h.pow(4,b)-1);d=x.length;t=x;x=[];b++}return t},simpson:function(b,d,f,g){g=(f-d)/g;var h=b(d),p=[],r=d,t=0;for(d=1;r<=f;r+=g,t++)p[t]=r;for(r=p.length;d<r-1;d++)h+=(0!==d%2?4:2)*b(p[d]);
return g/3*(h+b(f))},hermite:function(b,d,f,g){for(var h=b.length,p=0,r=0,t=[],x=[],v=[],w=[],z;r<h;r++){t[r]=1;for(z=0;z<h;z++)r!=z&&(t[r]*=(g-b[z])/(b[r]-b[z]));for(z=x[r]=0;z<h;z++)r!=z&&(x[r]+=1/(b[r]-b[z]));v[r]=(1-2*(g-b[r])*x[r])*t[r]*t[r];w[r]=(g-b[r])*t[r]*t[r];p+=v[r]*d[r]+w[r]*f[r]}return p},lagrange:function(b,d,f){for(var g=0,h=0,p,r,t=b.length;h<t;h++){r=d[h];for(p=0;p<t;p++)h!=p&&(r*=(f-b[p])/(b[h]-b[p]));g+=r}return g},cubic_spline:function(b,d,g){for(var h=b.length,m=0,p=[],r=[],
t=[],x=[],v=[],w=[],z=[];m<h-1;m++)v[m]=b[m+1]-b[m];t[0]=0;for(m=1;m<h-1;m++)t[m]=3/v[m]*(d[m+1]-d[m])-3/v[m-1]*(d[m]-d[m-1]);for(m=1;m<h-1;m++)p[m]=[],r[m]=[],p[m][m-1]=v[m-1],p[m][m]=2*(v[m-1]+v[m]),p[m][m+1]=v[m],r[m][0]=t[m];x=f.multiply(f.inv(p),r);for(m=0;m<h-1;m++)w[m]=(d[m+1]-d[m])/v[m]-v[m]*(x[m+1][0]+2*x[m][0])/3,z[m]=(x[m+1][0]-x[m][0])/(3*v[m]);for(m=0;m<h&&!(b[m]>g);m++);return m-=1,d[m]+(g-b[m])*w[m]+f.sq(g-b[m])*x[m]+(g-b[m])*f.sq(g-b[m])*z[m]},gauss_quadrature:function(){throw Error("gauss_quadrature not yet implemented");
},PCA:function(b){var d=b.length,g=b[0].length,h=0,m,p,r=[],t=[];m=[];for(var x=[],v=[],w=[],w=[],t=[],h=[],z=[],h=0;h<d;h++)r[h]=f.sum(b[h])/g;for(h=0;h<g;h++)for(w[h]=[],m=0;m<d;m++)w[h][m]=b[m][h]-r[m];w=f.transpose(w);for(h=0;h<d;h++)for(t[h]=[],m=0;m<d;m++)t[h][m]=f.dot([w[h]],[w[m]])/(g-1);m=f.jacobi(t);h=m[0];t=m[1];z=f.transpose(h);for(h=0;h<t.length;h++)for(m=h;m<t.length;m++)t[h]<t[m]&&(p=t[h],t[h]=t[m],t[m]=p,x=z[h],z[h]=z[m],z[m]=x);w=f.transpose(w);for(h=0;h<d;h++)for(v[h]=[],m=0;m<w.length;m++)v[h][m]=
f.dot([z[h]],[w[m]]);return[b,t,z,v]}});(function(b){for(var d=0;d<b.length;d++)(function(b){f.fn[b]=function(d,g){var h=this;return g?(setTimeout(function(){g.call(h,f.fn[b].call(h,d))},15),this):"number"==typeof f[b](this,d)?f[b](this,d):f(f[b](this,d))}})(b[d])})("add divide multiply subtract dot pow abs norm angle".split(" "))})(this.jStat,Math);
(function(f,h){var d=[].slice,g=f.utils.isNumber;f.extend({zscore:function(){var b=d.call(arguments);return g(b[1])?(b[0]-b[1])/b[2]:(b[0]-f.mean(b[1]))/f.stdev(b[1],b[2])},ztest:function(){var b=d.call(arguments);if(4===b.length){if(g(b[1])){var k=f.zscore(b[0],b[1],b[2]);return 1===b[3]?f.normal.cdf(-h.abs(k),0,1):2*f.normal.cdf(-h.abs(k),0,1)}k=b[0];return 1===b[2]?f.normal.cdf(-h.abs(k),0,1):2*f.normal.cdf(-h.abs(k),0,1)}k=f.zscore(b[0],b[1],b[3]);return 1===b[1]?f.normal.cdf(-h.abs(k),0,1):2*
f.normal.cdf(-h.abs(k),0,1)}});f.extend(f.fn,{zscore:function(b,d){return(b-this.mean())/this.stdev(d)},ztest:function(b,d,g){b=h.abs(this.zscore(b,g));return 1===d?f.normal.cdf(-b,0,1):2*f.normal.cdf(-b,0,1)}});f.extend({tscore:function(){var b=d.call(arguments);return 4===b.length?(b[0]-b[1])/(b[2]/h.sqrt(b[3])):(b[0]-f.mean(b[1]))/(f.stdev(b[1],!0)/h.sqrt(b[1].length))},ttest:function(){var b=d.call(arguments),k;return 5===b.length?(k=h.abs(f.tscore(b[0],b[1],b[2],b[3])),1===b[4]?f.studentt.cdf(-k,
b[3]-1):2*f.studentt.cdf(-k,b[3]-1)):g(b[1])?(k=h.abs(b[0]),1==b[2]?f.studentt.cdf(-k,b[1]-1):2*f.studentt.cdf(-k,b[1]-1)):(k=h.abs(f.tscore(b[0],b[1])),1==b[2]?f.studentt.cdf(-k,b[1].length-1):2*f.studentt.cdf(-k,b[1].length-1))}});f.extend(f.fn,{tscore:function(b){return(b-this.mean())/(this.stdev(!0)/h.sqrt(this.cols()))},ttest:function(b,d){return 1===d?1-f.studentt.cdf(h.abs(this.tscore(b)),this.cols()-1):2*f.studentt.cdf(-h.abs(this.tscore(b)),this.cols()-1)}});f.extend({anovafscore:function(){var b=
d.call(arguments),g,n,q,m,p,r;if(1===b.length){g=Array(b[0].length);for(p=0;p<b[0].length;p++)g[p]=b[0][p];b=g}if(2===b.length)return f.variance(b[0])/f.variance(b[1]);n=[];for(p=0;p<b.length;p++)n=n.concat(b[p]);q=f.mean(n);for(p=g=0;p<b.length;p++)g+=b[p].length*h.pow(f.mean(b[p])-q,2);g/=b.length-1;for(p=m=0;p<b.length;p++)for(q=f.mean(b[p]),r=0;r<b[p].length;r++)m+=h.pow(b[p][r]-q,2);return m/=n.length-b.length,g/m},anovaftest:function(){var b=d.call(arguments),h,n,q,m;if(g(b[0]))return 1-f.centralF.cdf(b[0],
b[1],b[2]);anovafscore=f.anovafscore(b);h=b.length-1;for(m=q=0;m<b.length;m++)q+=b[m].length;return n=q-h-1,1-f.centralF.cdf(anovafscore,h,n)},ftest:function(b,d,g){return 1-f.centralF.cdf(b,d,g)}});f.extend(f.fn,{anovafscore:function(){return f.anovafscore(this.toArray())},anovaftes:function(){var b=0,d;for(d=0;d<this.length;d++)b+=this[d].length;return f.ftest(this.anovafscore(),this.length-1,b-this.length)}});f.extend({normalci:function(){var b=d.call(arguments),g=Array(2),n;return 4===b.length?
n=h.abs(f.normal.inv(b[1]/2,0,1)*b[2]/h.sqrt(b[3])):n=h.abs(f.normal.inv(b[1]/2,0,1)*f.stdev(b[2])/h.sqrt(b[2].length)),g[0]=b[0]-n,g[1]=b[0]+n,g},tci:function(){var b=d.call(arguments),g=Array(2),n;return 4===b.length?n=h.abs(f.studentt.inv(b[1]/2,b[3]-1)*b[2]/h.sqrt(b[3])):n=h.abs(f.studentt.inv(b[1]/2,b[2].length-1)*f.stdev(b[2],!0)/h.sqrt(b[2].length)),g[0]=b[0]-n,g[1]=b[0]+n,g},significant:function(b,d){return b<d}});f.extend(f.fn,{normalci:function(b,d){return f.normalci(b,d,this.toArray())},
tci:function(b,d){return f.tci(b,d,this.toArray())}})})(this.jStat,Math);svgNamespaceUri="http://www.w3.org/2000/svg";xlinkUri="http://www.w3.org/1999/xlink";hasOwnProperty=function(f,h){var d=f.__proto__||f.constructor.prototype;return h in f&&(!(h in d)||d[h]!==f[h])};isObjInArray=function(f,h){var d=!1;0<=f.indexOf(h)&&(d=!0);return d};getKeys=function(f){var h=[],d;for(d in f)h.push(d);return h};eliminateDuplicates=function(f){var h,d=f.length,g=[],b={};for(h=0;h<d;h++)b[f[h]]=0;for(h in b)g.push(h);return g};
keepReplicates=function(f,h,d){for(var g={},b=0;b<f.length;b++){var k=f[b];k in g||(g[k]=0);g[k]++}h=null==h?2:h;f=[];for(k in g)null!=d&&d?g[k]<h&&f.push(k):g[k]>=h&&f.push(k);return f};beginsWith=function(f,h){return 0===f.indexOf(h)};endsWith=function(f,h){return-1!==f.indexOf(h,f.length-h.length)};isNumerical=function(f){return null==f||""===f||isNaN(f)?!1:!0};getListBoxSelectedValues=function(f){for(var h=[],d=0;d<f.length;d++){var g=f[d];g.selected&&h.push(g.value)}return h};
compareAsNumeric=function(f,h){var d=parseFloat(f),g=parseFloat(h);if(isNumerical(d)&&isNumerical(g)){if(d<g)return-1;if(d>g)return 1}else if(d==d||g==g){if(d!=d)return-1;if(g!=g)return 1}return 0};compareAsString=function(f,h){var d=new String(f),g=new String(h);return"null"==d&&"null"!=g?-1:"null"!=d&&"null"==g?1:d.localeCompare(g)};compareAsDate=function(f,h){var d=f,g=h;null==d?d="1000":""==d&&(d="1001");null==g?g="1000":""==g&&(g="1001");return new Date(d)-new Date(g)};
centeredRgbaColorMapper=function(f,h,d,g){var b=null,k=null==h?0:h,n=null==d?-1.96:d,q=null==g?1.96:g;return b=function(b){var d=1,g=169,h=169,x=169;b=parseFloat(b);null!=b&&b==b&&(b>k?(g=255,x=h=0,b>q?d=1:(d=(b-k)/(q-k),d=Math.abs(d),f&&(d=Math.log(d)))):b<k?(h=g=0,x=255,b<n?d=1:(d=(b-k)/(n-k),d=Math.abs(d),f&&(d=Math.log(d)))):(x=h=g=255,d=1));return"rgba("+g+","+h+","+x+","+d+")"}};
setupQuantileColorMapper=function(f,h){var d=h;null==d&&(d="rgb(255,255,217) rgb(237,248,177) rgb(199,233,180) rgb(127,205,187) rgb(65,182,196) rgb(29,145,192) rgb(34,94,168) rgb(37,52,148) rgb(8,29,88)".split(" "));var g=d.length;return d3.scale.quantile().domain([0,g-1,d3.max(f,function(b){return parseFloat(b)})]).range(d)};getXmlDom_url=function(f){xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");xmlhttp.open("GET",f,!1);xmlhttp.send();return xmlDoc=xmlhttp.responseXML};
getXmlDom_string=function(f){window.DOMParser?(parser=new DOMParser,xmlDoc=parser.parseFromString(f,"text/xml")):(xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),xmlDoc.async=!1,xmlDoc.loadXML(f));return xmlDoc};
getDateTime=function(){var f=new Date,h=f.getFullYear(),d=f.getMonth()+1,g=f.getDate(),b=f.getHours(),k=f.getMinutes(),f=f.getSeconds();1==d.toString().length&&(d="0"+d);1==g.toString().length&&(g="0"+g);1==b.toString().length&&(b="0"+b);1==k.toString().length&&(k="0"+k);1==f.toString().length&&(f="0"+f);return h+"/"+d+"/"+g+" "+b+":"+k+":"+f};
todaysDate=function(){var f=new Date,h=f.getDate();f.getDay();var d=f.getMonth()+1,f=f.getYear();return[,"January","February","March","April","May","June","July","August","September","October","November","December"][d]+" "+h+", "+(1E3>f?f+1900:f)};createDivElement=function(f,h){var d=document.createElement("div");null!=f&&(d.id=f);null!=h&&(d.className=h);return d};
swapContainingDivs=function(f,h){var d=h.parentNode;document.getElementById("#"+f.parentNode.id).appendChild(h);document.getElementById("#"+d.id).appendChild(f)};lengthOfLongestString=function(f){var h=[],d;for(d in f)h.push(f[d].length);return Math.max.apply(null,h)};simpleAsyncGet=function(f,h){var d=new XMLHttpRequest;d.onreadystatechange=function(){this.readyState===(this.DONE||4)&&h(d.responseText)};d.open("GET",f,!0);d.setRequestHeader("X-Requested-With","XMLHttpRequest");d.send(null)};
getResponse=function(f){var h=null,d=null,d=new XMLHttpRequest;d.open("GET",f,!1);d.onload=function(){h=d.status;200!=h&&console.log("xhr status: "+h+" for "+f)};d.send(null);var g=null;200==h&&(g=d.responseText);return g};loadNewSettings=function(f){f=window.location.pathname+"?query="+JSON.stringify(f);window.open(f,"_self")};getQueryObj=function(){var f={};location.search.slice(1).split("&").forEach(function(h){h=h.split("=");f[h[0]]=decodeURIComponent(h[1])||""});return f};
getQueryStringParameterByName=function(f){f=f.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");f=(new RegExp("[\\?&]"+f+"=([^&#]*)")).exec(location.search);return null==f?"":decodeURIComponent(f[1].replace(/\+/g," "))};parseJson=function(f){return JSON.parse(f)};serializeJson=function(f,h){return h?JSON.stringify(f,null,"\t"):JSON.stringify(f)};prettyJson=function(f){return serializeJson(f,!0)};
bottomRoundedRectSvgPath=function(f,h,d,g,b){f=""+("M"+f+","+h)+("h"+d);f+="v"+(g-b);f+="a"+b+","+b+" 0 0 1 "+-1*b+","+b;f+="h"+-1*(d-2*b);f+="a"+b+","+b+" 0 0 1 "+-1*b+","+-1*b;f+="v"+-1*(g-b);return f+="z"};allRoundedRectSvgPath=function(f,h,d,g,b){f=""+("M"+f+","+(h+b))+("a"+b+","+b+" 0 0 1 "+b+","+-1*b);f+="h"+(d-2*b);f+="a"+b+","+b+" 0 0 1 "+b+","+b;f+="v"+(g-2*b);f+="a"+b+","+b+" 0 0 1 "+-1*b+","+b;f+="h"+-1*(d-2*b);f+="a"+b+","+b+" 0 0 1 "+-1*b+","+-1*b;f+="v"+-1*(g-2*b);return f+="z"};
allAngledRectSvgPath=function(f,h,d,g){var b=d>g?d/8:g/8;f=""+("M"+(f+b)+","+h)+("h"+(d-2*b));f+="l"+b+","+b;f+="v"+(g-2*b);f+="l"+-1*b+","+b;f+="h"+-1*(d-2*b);f+="l"+-1*b+","+-1*b;f+="v"+-1*(g-2*b);return f+="z"};
createSvgRingElement=function(f,h,d,g){function b(b,d,f,g){g=(g-90)*Math.PI/180;return{x:b+f*Math.cos(g),y:d+f*Math.sin(g)}}f=function(d,f,g,h,k){var t=b(d,f,g,k);d=b(d,f,g,h);return["M",t.x,t.y,"A",g,g,0,180>=k-h?"0":"1",0,d.x,d.y].join(" ")}(f,h,d,0,359.9);h=document.createElementNS(svgNamespaceUri,"path");h.setAttributeNS(null,"d",f);if(null!=g)for(var k in g)h.setAttributeNS(null,k,g[k]);return h};
createSvgCircleElement=function(f,h,d,g){var b=document.createElementNS(svgNamespaceUri,"circle");b.setAttributeNS(null,"cx",f);b.setAttributeNS(null,"cy",h);b.setAttributeNS(null,"r",d);if(null!=g)for(var k in g)b.setAttributeNS(null,k,g[k]);return b};
createSvgRectElement=function(f,h,d,g,b,k,n){var q=document.createElementNS(svgNamespaceUri,"rect");q.setAttributeNS(null,"x",f);q.setAttributeNS(null,"y",h);q.setAttributeNS(null,"rx",d);q.setAttributeNS(null,"ry",g);q.setAttributeNS(null,"width",b);q.setAttributeNS(null,"height",k);if(null!=n)for(var m in n)q.setAttributeNS(null,m,n[m]);return q};
createSvgImageElement=function(f,h,d,g,b,k){var n=document.createElementNS(svgNamespaceUri,"image");n.setAttributeNS(xlinkUri,"href",f);n.setAttributeNS(null,"x",h);n.setAttributeNS(null,"y",d);n.setAttributeNS(null,"width",g);n.setAttributeNS(null,"height",b);if(null!=k)for(var q in k)n.setAttributeNS(null,q,k[q]);return n};setCookie=function(f,h,d){if(d){var g=new Date;g.setTime(g.getTime()+864E5*d);d="; expires="+g.toGMTString()}else d="";document.cookie=f+"="+h+d+"; path=/"};
getCookie=function(f){f+="=";for(var h=document.cookie.split(";"),d=0;d<h.length;d++){for(var g=h[d];" "==g.charAt(0);)g=g.substring(1,g.length);if(0==g.indexOf(f))return g.substring(f.length,g.length)}return null};deleteCookie=function(f){setCookie(f,"",-1)};var eventHierarchyUrl="observation_deck/data/eventHierarchy.xml";function getEventElems(f,h){var d=[];f.find("event").each(function(f,b){var k=b.getAttribute("type");void 0===h||null===h?d.push(b):k===h&&d.push(b)});return d}
function getEventParentChildren(f,h){var d={parent:null,children:[]},g=getEventElems(f,h);$(g).each(function(b,f){if("event"!==f.tagName)return"continue";d.parent=f.parentNode.getAttribute("type");$(f.children).each(function(b,f){"event"===f.tagName&&d.children.push(f.getAttribute("type"))})});return d}
function tracebackToRoot(f,h){for(var d=[],g=getEventElems(f,h),b=0;b<g.length;b++){var k=g[b],n=[];d.push(n);k=k.getAttribute("type");for(k=getEventParentChildren(f,k).parent;void 0!==k&&null!==k;)n.push(k),k=getEventParentChildren(f,k).parent}return d}
function OD_eventMetadataAlbum(){this.album={};this.addEvent=function(f,h){var d=new OD_event(f);this.album[f.id]=d;d.data.setData(h,"numeric"==f.allowedValues||"expression"==f.allowedValues);return this};this.getEventIdsByType=function(){for(var f={},h=getKeys(this.album),d=0;d<h.length;d++){var g=h[d],b=this.getEvent(g).metadata.datatype;hasOwnProperty(f,b)||(f[b]=[]);f[b].push(g)}return f};this.getEventData=function(f){for(var h={},d=getKeys(this.album),g=0;g<d.length;g++){var b=d[g],k=this.getEvent(b).data.getData(f);
h[b]=k}return h};this.getAllDataAsList=function(){for(var f=[],h=this.getEventData(),d=getKeys(h),g=0;g<d.length;g++){for(var b=d[g],k=h[b].slice(),n=0;n<k.length;n++)k[n].eventId=b;f=f.concat(k)}return f};this.getAllSampleIds=function(){for(var f=[],h=getKeys(this.album),d=0;d<h.length;d++)var g=this.getEvent(h[d]).data.getAllSampleIds(),f=f.concat(g);return eliminateDuplicates(f)};this.getEvent=function(f){return this.album[f]};this.getAllChildren=function(f,h){for(var d="undefined"===typeof h?
[]:h,g=[],b=0;b<f.length;b++)var k=this.getEvent(f[b]).metadata,g=g.concat(getKeys(k.children));if(0==g.length)return d;d=d.concat(g);return this.getAllChildren(g,d)};this.multisortSamples=function(f){var h=this.getAllSampleIds();if(null==f)return h;var d=f.getSteps().slice();d.reverse();var g=this;h.sort(function(b,f){for(var h=0,q=0;q<d.length;q++){var m=d[q].name,p=d[q].reverse,h=g.getEvent(m).metadata.allowedValues,r=g.getEvent(m).data.getData([b,f]),m=r[0].val,r=r[1].val,t=null,t="numeric"==
h?compareAsNumeric:"categoric"==h?compareAsString:"expression"==h?compareAsNumeric:"date"==h?compareAsDate:compareAsString,h=t(m,r);p&&(h*=-1);if(0!=h)break}return h});return h};this.scaledExpressionRescaling=function(){};this.zScoreExpressionRescaling=function(){console.log("zScoreExpressionRescaling");var f=this.getEventIdsByType();if(!hasOwnProperty(f,"expression data"))return console.log("no expression"),null;for(var f=f["expression data"],h={},d={stats:h},g=[],b=0;b<f.length;b++){var k=f[b],
n=this.getEvent(k).data.getMeanAndSd();h[k]={};h[k]=n;for(var n=this.getEvent(k).data.getData(),q=0;q<n.length;q++){var m=n[q],p=m.val;m.val_orig=p;isNumerical(p)&&(m.val=(p-h[k].mean)/h[k].sd,g.push(m.val))}}d.maxVal=jStat.max(g);d.minVal=jStat.min(g);return d};this.betweenMeansExpressionRescaling=function(f,h,d){console.log("betweenMeansExpressionRescaling",f,h,d);h=this.getEvent(f).data.selectIds(h);var g=null;null==d?(g=this.getEvent(f).data.selectIds(d),g=g.concat(h),g=eliminateDuplicates(g)):
g=this.getEvent(f).data.selectIds(d);f=this.getEventIdsByType();if(!hasOwnProperty(f,"expression data"))return console.log("no expression"),null;f=f["expression data"];d={};for(var b={meanVals:d},k=[],n=0;n<f.length;n++){var q=f[n];d[q]={};d[q].group1=this.getEvent(q).data.getMeanAndSd(h).mean;d[q].group2=this.getEvent(q).data.getMeanAndSd(g).mean;for(var m=(d[q].group2-d[q].group1)/2,q=this.getEvent(q).data.getData(),p=0;p<q.length;p++){var r=q[p],t=r.val;r.val_orig=t;isNumerical(t)&&(r.val=t-m,
k.push(r.val))}}b.maxVal=jStat.max(k);b.minVal=jStat.min(k);return b};this.yuliaExpressionRescaling=function(f,h){console.log("yuliaExpressionRescaling",f,h);var d=this.getEvent(f).data.selectIds(h),g=this.getEventIdsByType();if(!hasOwnProperty(g,"expression data"))return console.log("no expression"),null;for(var g=g["expression data"],b={},k={meanVals:b},n=[],q=0;q<g.length;q++){var m=g[q];b[m]=this.getEvent(m).data.getMeanAndSd(d).mean;for(var p=this.getEvent(m).data.getData(),r=0;r<p.length;r++){var t=
p[r],x=t.val;t.val_orig=x;isNumerical(x)&&(t.val=x-b[m],n.push(t.val))}}k.maxVal=jStat.max(n);k.minVal=jStat.min(n);return k};this.fillInMissingSamples=function(f){for(var h=this.getAllSampleIds(),d=this.getEventIdsByType(),g=0;g<getKeys(d).length;g++)for(var b=getKeys(d)[g],k=0;k<d[b].length;k++){var n=d[b][k],q=this.getEvent(n).data.getAllSampleIds();if(0!=h.length-q.length){for(var q=keepReplicates(h.concat(q),2,!0),m={},p=0;p<q.length;p++)m[q[p]]=f;this.getEvent(n).data.setData(m)}}}}
function OD_event(f){this.metadata=new OD_eventMetadata(f);this.data=new OD_eventDataCollection}function OD_eventMetadata(f){this.id=f.id;this.name=f.name;this.displayName=f.displayName;this.description=f.description;this.datatype=f.datatype;this.allowedValues=f.allowedValues;this.parents={};this.children={};this.addParent=function(f){this.parents[f]=f;return this};this.addChild=function(f){this.children[f]=f;return this};this.computeCompositeScore=function(f){return null}}
function OD_eventDataCollection(){function f(f,d){this.id=f;this.val=d}this.dataCollection=[];this.getValues=function(f){for(var d=[],g=this.getData(),b=0;b<g.length;b++)d.push(g[b].val);null!=f&&1==f&&(d=eliminateDuplicates(d));return d};this.setData=function(h,d){for(var g in h){var b=h[g];"NaN"!=b&&"null"!=b&&""!=b&&"N/A"!=b&&(null!=d&&1==d&&(b=parseFloat(b)),this.dataCollection.push(new f(g,b)))}return this};this.getData=function(h){var d=this.getAllSampleIds(!0);null==h&&(h=getKeys(d));for(var g=
[],b=0;b<h.length;b++){var k=h[b];k in d?g.push(this.dataCollection[d[k]]):g.push(new f(k,null))}return g};this.getAllSampleIds=function(f){for(var d={},g=0;g<this.dataCollection.length;g++)d[this.dataCollection[g].id]=g;return f?d:getKeys(d)};this.sortSamples=function(f,d){var g=this.getData(f),b=compareSamplesAsStrings;d=null==d?"categoric":d.toLowerCase();"numeric"==d||"expression"==d?b=compareSamplesAsNumeric:"date"==d&&(b=compareSamplesAsDate);g.sort(b);for(var b=[],k=0;k<g.length;k++)b.push(g[k].id);
return b};this.selectIds=function(f){for(var d=[],g=this.getData(),b=0;b<g.length;b++){var k=g[b];k.val==f&&d.push(k.id)}return d};this.getMeanAndSd=function(f){var d={mean:0,sd:0},g=this.getAllSampleIds(!0);null==f&&(f=getKeys(g));for(var b=[],k=0;k<f.length;k++){var n=f[k];n in g&&(n=this.dataCollection[g[n]].val,isNumerical(n)&&b.push(n))}d.mean=jStat.mean(b);d.sd=jStat.stdev(b);return d}}
function sortingSteps(f){this.steps=[];null!=f&&(this.steps=f);this.getSteps=function(){return this.steps};this.getIndex=function(f){for(var d=0;d<this.steps.length;d++)if(this.steps[d].name==f)return d;return-1};this.addStep=function(f){var d=this.getIndex(f);0<=d?(f=this.steps.splice(d,1)[0],f.reverse=!f.reverse,this.steps.push(f)):this.steps.push({name:f,reverse:!1})};this.removeStep=function(f){f=this.getIndex(f);0<=f&&this.steps.splice(f,1)};this.clearSteps=function(){this.steps.splice(0,this.steps.length)}}
;function transposeClinicalData(f,h){for(var d={},g=0;g<f.length;g++){var b=f[g],k=b[h],n;for(n in b)n in d||(d[n]={}),d[n][k]=b[n]}return d}
function getClinicalData(f,h){for(var d=getResponse(f).split("\n"),g=[],b=[],k=[],n=0;n<d.length;n++){var q=d[n];beginsWith(q,"#")?b.push(q):beginsWith(q,"STRING")?k=q.split("\t"):g.push(q)}d=d3.tsv.parse(g.join("\n"));g=transposeClinicalData(d,"SAMPLE_ID");delete g.SAMPLE_ID;b=getKeys(g);for(n=0;n<b.length;n++){var q=b[n],m=g[q],p=k[n+1],r="categoric";"number"==p.toLowerCase()?r="numeric":"date"==p.toLowerCase()&&(r="date");h.addEvent({id:q,name:null,displayName:null,description:null,datatype:"clinical data",
allowedValues:r},m)}return d}function getClinicalData_old(f,h){var d=getResponse(f),d=d3.tsv.parse(d),d=transposeClinicalData(d,"CASE_ID"),g;for(g in d){var b=d[g],k=g,n=endsWith(k.toLowerCase(),"_score")?"numeric":"categoric";h.addEvent({id:k,name:null,displayName:null,description:null,datatype:"clinical data",allowedValues:n},b)}}
function getMutationData(f,h){for(var d=getResponse(f),g=d3.tsv.parse(d),d={},b=0;b<g.length;b++){var k=g[b],n=k.Hugo_Symbol,k=k.Tumor_Sample_Barcode,k=k.replace(/_/g,"-"),k=k.replace(/[A-Z]$/,"");hasOwnProperty(d,n)||(d[n]={},d[n].metadata={id:n+"_mut",name:null,displayName:null,description:null,datatype:"mutation data",allowedValues:"categoric"},d[n].data={});d[n].data[k]=!0}g=getKeys(d);for(b=0;b<g.length;b++)n=d[g[b]],h.addEvent(n.metadata,n.data);return d}
function getMutationData_old(f){var h=getResponse(f).split("\n"),d=[],g=[];for(f=0;f<h.length;f++){var b=h[f];beginsWith(b,"#")?g.push(b):d.push(b)}h=d3.tsv.parse(d.join("\n"));for(f=0;f<h.length;f++)d=h[f],g=d.COMMON,delete d.GENE_ID,delete d.COMMON,OD_eventAlbum.addEvent({id:g+"_mutation",name:null,displayName:null,description:null,datatype:"mutation",allowedValues:"numeric"},d);return h}
function getExpressionData(f,h){var d=getResponse(f),d=d3.tsv.parse(d),g;for(g in d){var b=d[g],k=b[""];delete b[""];h.addEvent({id:k+"_mRNA",name:null,displayName:null,description:null,datatype:"expression data",allowedValues:"expression"},b)}}
mongoClinicalData=function(f,h){for(var d=0;d<f.length;d++){var g=f[d];delete g._id;var b=g.sample.trim();delete g.sample;if("Patient ID"!=b)for(var k=getKeys(g),n=0;n<k.length;n++){var q=k[n],m=h.getEvent(q);null==m&&(h.addEvent({id:q,name:null,displayName:null,description:null,datatype:"clinical data",allowedValues:"categoric"},[]),m=h.getEvent(q));var p={};p[b]=g[q];m.data.setData(p)}}return null};buildObservationDeck=function(f,h){h=getConfiguration(h);drawMatrix(f,h);setupContextMenus(h.querySettings)};
getConfiguration=function(f){null==f&&(f={});var h=parseJson(getCookie("od_config"))||{};f.querySettings=h;h=null;"eventAlbum"in f?h=f.eventAlbum:(console.log("od creating album"),h=new OD_eventMetadataAlbum,f.eventAlbum=h);"clinicalUrl"in f&&getClinicalData(f.clinicalUrl,h);"expressionUrl"in f&&getExpressionData(f.expressionUrl,h);"mutationUrl"in f&&getMutationData(f.mutationUrl,h);var d=f.mongoData;"clinical"in d&&mongoClinicalData(d.clinical,h);return f};
setupContextMenus=function(f){setupRowLabelContextMenu(f);setupCategoricCellContextMenu(f)};
setupRowLabelContextMenu=function(f){$.contextMenu({selector:".rowLabel",callback:function(f,d){var g=this[0].textContent,b=0<=this[0].getAttribute("class").indexOf("axis")?!0:!1;b&&(b=0<=this[0].getAttribute("class").indexOf("rowLabel")?"row":"column");console.log(f,g,b)},items:{test:{name:"test",icon:null,disabled:!1,callback:function(f,d){console.log(f,this[0].textContent);console.log("href",window.location.href);console.log("host",window.location.host);console.log("pathname",window.location.pathname);
console.log("search",window.location.search)}},sort:{name:"sort",icon:null,disabled:!1,callback:function(h,d){var g=this[0].textContent,b=0<=this[0].getAttribute("class").indexOf("axis")?!0:!1;if(b){var b=0<=this[0].getAttribute("class").indexOf("rowLabel")?"row":"column",k="colSort";"row"!=b&&(k="rowSort");b=null;b=k in f?new sortingSteps(f[k].steps):new sortingSteps;b.addStep(g);f[k]=b;setCookie("od_config",JSON.stringify(f));window.open(window.location.pathname,"_self")}else console.log("exit out because not a row or a column")}},
sep1:"---------",expand:{name:"expand",icon:null,disabled:!0},collapse:{name:"collapse",icon:null,disabled:!0},reset:{name:"reset",icon:null,disabled:!1,callback:function(f,d){deleteCookie("od_config");window.open(window.location.pathname,"_self")}}}})};
setupCategoricCellContextMenu=function(f){$.contextMenu({selector:".categoric",callback:function(f,d){},items:{test:{name:"Yulia's atrribute-based expression rescaling",icon:null,disabled:!1,callback:function(h,d){var g=this[0],b=g.getAttribute("eventId");g.getAttribute("sampleId");g=g.getAttribute("val");console.log("key:",h,"eventId:",b,"val:",g);console.log("href",window.location.href);console.log("host",window.location.host);console.log("pathname",window.location.pathname);console.log("search",
window.location.search);f.yulia_rescaling={eventId:b,val:g};setCookie("od_config",JSON.stringify(f));window.open(window.location.pathname,"_self")}},sep1:"---------",reset:{name:"reset",icon:null,disabled:!1,callback:function(f,d){deleteCookie("od_config");window.open(window.location.pathname,"_self")}}}})};
drawMatrix=function(f,h){h.rowClickback=function(b,d){console.log("rowClickback: "+b)};h.columnClickback=function(b,d){alert("open page for sample: "+b)};h.cellClickback=function(b,d){console.log("cellClickback: r"+b.eventId+" c"+b.id+" val:"+b.val)};h.rowRightClickback=function(b,d){console.log("rowRightClickback: "+b);d3.event.preventDefault()};h.columnRightClickback=function(b,d){console.log("columnRightClickback: "+b);d3.event.preventDefault()};for(h.cellRightClickback=function(b,d){console.log("cellRightClickback: r"+
b.eventId+" c"+b.id+" val:"+b.val);d3.event.preventDefault()};f.firstChild;)f.removeChild(f.firstChild);var d=h.eventAlbum;d.fillInMissingSamples(null);var g=d.getEventIdsByType(),b=[],k;for(k in g)b=b.concat(g[k]);k=h.querySettings;for(var n={},q=0;q<b.length;q++){var m=b[q],g=d.getEvent(m).metadata.allowedValues;if("categoric"==g)n[m]=d3.scale.category10();else if("numeric"==g){for(var p=d.getEvent(m).data.getValues(),g=[],r=0;r<p.length;r++){var t=p[r];isNumerical(t)&&g.push(t)}p=Math.min.apply(null,
g);g=Math.max.apply(null,g);n[m]=centeredRgbaColorMapper(!1,0,p,g)}else n[m]="expression"==g?null:d3.scale.category10()}m=g=null;"colSort"in k&&(m=new sortingSteps(k.colSort.steps));var g=d.multisortSamples(m),x={};for(q in g)p=g[q],x[p]=q;k=[];if(null!=m){p=m.getSteps();for(r=0;r<p.length;r++)m=p[r].name,k.push(m);k.reverse()}for(p=0;p<b.length;p++)m=b[p],isObjInArray(k,m)||k.push(m);var v={};for(q in k)p=k[q],v[p]=q;var b=lengthOfLongestString(g),q=lengthOfLongestString(k),b=3<b?9*b:30,q=1<q?8*
q:15,m=document.documentElement.clientWidth,w=Math.floor((m-q-0)/(g.length>k.length?g.length:k.length)),p=b+0+w*k.length,b=d3.select(f).append("svg").attr({width:m,height:p,viewBox:"0 0 "+m+" "+p,perserveAspectRatio:"xMinYMin meet"}).append("g").attr({transform:"translate("+q+","+b+")"}),q=-6,m=w/1.5;k=b.selectAll(".rowLabel").data(k).enter().append("text").text(function(b){return b}).attr({x:0,y:function(b,d){return d*w},transform:"translate("+q+", "+m+")","class":function(b,d){return"rowLabel mono axis unselectable"}}).style("text-anchor",
"end");k.on("click",h.rowClickback);k.on("contextmenu",h.rowRightClickback);q=Math.floor(w/5);m=-1*Math.floor(w/3);g=b.selectAll(".colLabel").data(g).enter().append("text").text(function(b){return b}).attr({y:function(b,d){return(d+1)*w},x:0,transform:"rotate(-90) translate("+q+", "+m+")","class":function(b,d){return"colLabel mono axis unselectable"}}).style("text-anchor","start");g.on("click",h.columnClickback);g.on("contextmenu",h.columnRightClickback);g=d.getAllDataAsList();g=b.selectAll(".cell").data(g).enter().append(function(b){var f=
document.createElementNS(svgNamespaceUri,"g");f.setAttributeNS(null,"class","cell");var g=x[b.id]*w,h=v[b.eventId]*w,k,m,p=w,q=w,r={"class":"bordered"};k=b.eventId;r.fill=null==k||null==b.val?"lightgrey":"white";f.appendChild(createSvgRectElement(g,h,4,4,p,q,r));if(null==k||null==b.val)return f;r=b.val;g=x[b.id]*w;h=v[b.eventId]*w;m=k=4;q=p=w;r={stroke:"#E6E6E6","stroke-width":"2px",fill:(0,n[b.eventId])(r)};d.getEvent(b.eventId).metadata.allowedValues&&(r["class"]="categoric",r.eventId=b.eventId,
r.sampleId=b.id,r.val=b.val);f.appendChild(createSvgRectElement(g,h,k,m,p,q,r));return f});g.on("click",h.cellClickback).on("contextmenu",h.cellRightClickback);g.append("title").text(function(b){return"r:"+b.eventId+"\n\nc:"+b.id+"\n\nval:"+b.val});return h};
