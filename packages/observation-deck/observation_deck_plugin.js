(function(e,k){function d(e){e=e.split(/\s+/);for(var b=[],d=0,g;g=e[d];d++)g=g[0].toUpperCase(),b.push(g);return b}function g(b){return b.id&&e('label[for="'+b.id+'"]').val()||b.name}function b(d,h,l){l||(l=0);h.each(function(){var h=e(this),n=this,q=this.nodeName.toLowerCase(),p,r;"label"==q&&h.find("input, textarea, select").length&&(p=h.text(),h=h.children().first(),n=h.get(0),q=n.nodeName.toLowerCase());switch(q){case "menu":r={name:h.attr("label"),items:{}};l=b(r.items,h.children(),l);break;
case "a":case "button":r={name:h.text(),disabled:!!h.attr("disabled"),callback:function(){return function(){h.click()}}()};break;case "menuitem":case "command":switch(h.attr("type")){case k:case "command":case "menuitem":r={name:h.attr("label"),disabled:!!h.attr("disabled"),callback:function(){return function(){h.click()}}()};break;case "checkbox":r={type:"checkbox",disabled:!!h.attr("disabled"),name:h.attr("label"),selected:!!h.attr("checked")};break;case "radio":r={type:"radio",disabled:!!h.attr("disabled"),
name:h.attr("label"),radio:h.attr("radiogroup"),value:h.attr("id"),selected:!!h.attr("checked")};break;default:r=k}break;case "hr":r="-------";break;case "input":switch(h.attr("type")){case "text":r={type:"text",name:p||g(n),disabled:!!h.attr("disabled"),value:h.val()};break;case "checkbox":r={type:"checkbox",name:p||g(n),disabled:!!h.attr("disabled"),selected:!!h.attr("checked")};break;case "radio":r={type:"radio",name:p||g(n),disabled:!!h.attr("disabled"),radio:!!h.attr("name"),value:h.val(),selected:!!h.attr("checked")};
break;default:r=k}break;case "select":r={type:"select",name:p||g(n),disabled:!!h.attr("disabled"),selected:h.val(),options:{}};h.children().each(function(){r.options[this.value]=e(this).text()});break;case "textarea":r={type:"textarea",name:p||g(n),disabled:!!h.attr("disabled"),value:h.val()};break;case "label":break;default:r={type:"html",html:h.clone(!0)}}r&&(l++,d["key"+l]=r)});return l}e.support.htmlMenuitem="HTMLMenuItemElement"in window;e.support.htmlCommand="HTMLCommandElement"in window;e.support.eventSelectstart=
"onselectstart"in document.documentElement;if(!e.ui||!e.ui.widget){var h=e.cleanData;e.cleanData=function(b){for(var d=0,g;null!=(g=b[d]);d++)try{e(g).triggerHandler("remove")}catch(k){}h(b)}}var l=null,q=!1,n=e(window),p=0,r={},s={},w={},v={selector:null,appendTo:null,trigger:"right",autoHide:!1,delay:200,reposition:!0,determinePosition:function(b){if(e.ui&&e.ui.position)b.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none");
else{var d=this.offset();d.top+=this.outerHeight();d.left+=this.outerWidth()/2-b.outerWidth()/2;b.css(d)}},position:function(e,b,d){if(b||d){b="maintain"===b&&"maintain"===d?e.$menu.position():{top:d,left:b};d=n.scrollTop()+n.height();var g=n.scrollLeft()+n.width(),h=e.$menu.height(),k=e.$menu.width();b.top+h>d&&(b.top-=h);b.left+k>g&&(b.left-=k);e.$menu.css(b)}else e.determinePosition.call(this,e.$menu)},positionSubmenu:function(b){if(e.ui&&e.ui.position)b.css("display","block").position({my:"left top",
at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var d={top:0,left:this.outerWidth()};b.css(d)}},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{show:e.noop,hide:e.noop},callback:null,items:{}},x=null,y=null,L=null,M,N=function(b){for(var e=0;e=Math.max(e,parseInt(b.css("z-index"),10)||0),b=b.parent(),b&&b.length&&!(-1<"html body".indexOf(b.prop("nodeName").toLowerCase())););return e},z={abortevent:function(b){b.preventDefault();b.stopImmediatePropagation()},
contextmenu:function(b){var d=e(this);b.preventDefault();b.stopImmediatePropagation();if(!("right"!=b.data.trigger&&b.originalEvent||d.hasClass("context-menu-active")||d.hasClass("context-menu-disabled"))){l=d;if(b.data.build){var h=b.data.build(l,b);if(!1===h)return;b.data=e.extend(!0,{},v,b.data,h||{});if(!b.data.items||e.isEmptyObject(b.data.items))throw window.console&&(console.error||console.log)("No items specified to show in contextMenu"),Error("No Items specified");b.data.$trigger=l;T.create(b.data)}T.show.call(d,
b.data,b.pageX,b.pageY)}},click:function(b){b.preventDefault();b.stopImmediatePropagation();e(this).trigger(e.Event("contextmenu",{data:b.data,pageX:b.pageX,pageY:b.pageY}))},mousedown:function(b){var d=e(this);l&&l.length&&!l.is(d)&&l.data("contextMenu").$menu.trigger("contextmenu:hide");2==b.button&&(l=d.data("contextMenuActive",!0))},mouseup:function(b){var d=e(this);d.data("contextMenuActive")&&l&&l.length&&l.is(d)&&!d.hasClass("context-menu-disabled")&&(b.preventDefault(),b.stopImmediatePropagation(),
l=d,d.trigger(e.Event("contextmenu",{data:b.data,pageX:b.pageX,pageY:b.pageY})));d.removeData("contextMenuActive")},mouseenter:function(b){var d=e(this),h=e(b.relatedTarget),g=e(document);h.is(".context-menu-list")||h.closest(".context-menu-list").length||l&&l.length||(y=b.pageX,L=b.pageY,M=b.data,g.on("mousemove.contextMenuShow",z.mousemove),x=setTimeout(function(){x=null;g.off("mousemove.contextMenuShow");l=d;d.trigger(e.Event("contextmenu",{data:M,pageX:y,pageY:L}))},b.data.delay))},mousemove:function(b){y=
b.pageX;L=b.pageY},mouseleave:function(b){b=e(b.relatedTarget);if(!b.is(".context-menu-list")&&!b.closest(".context-menu-list").length){try{clearTimeout(x)}catch(d){}x=null}},layerClick:function(b){var d=e(this).data("contextMenuRoot"),h=b.button,g=b.pageX,k=b.pageY,l,q;b.preventDefault();b.stopImmediatePropagation();setTimeout(function(){var p,r="left"==d.trigger&&0===h||"right"==d.trigger&&2===h;document.elementFromPoint&&(d.$layer.hide(),l=document.elementFromPoint(g-n.scrollLeft(),k-n.scrollTop()),
d.$layer.show());if(d.reposition&&r)if(document.elementFromPoint){if(d.$trigger.is(l)||d.$trigger.has(l).length){d.position.call(d.$trigger,d,g,k);return}}else if(q=d.$trigger.offset(),p=e(window),q.top+=p.scrollTop(),q.top<=b.pageY&&(q.left+=p.scrollLeft(),q.left<=b.pageX&&(q.bottom=q.top+d.$trigger.outerHeight(),q.bottom>=b.pageY&&(q.right=q.left+d.$trigger.outerWidth(),q.right>=b.pageX)))){d.position.call(d.$trigger,d,g,k);return}if(l&&r)d.$trigger.one("contextmenu:hidden",function(){e(l).contextMenu({x:g,
y:k})});d.$menu.trigger("contextmenu:hide")},50)},keyStop:function(b,e){e.isInput||b.preventDefault();b.stopPropagation()},key:function(b){var e=l.data("contextMenu")||{};switch(b.keyCode){case 9:case 38:if(z.keyStop(b,e),e.isInput){if(9==b.keyCode&&b.shiftKey){b.preventDefault();e.$selected&&e.$selected.find("input, textarea, select").blur();e.$menu.trigger("prevcommand");return}if(38==b.keyCode&&"checkbox"==e.$selected.find("input, textarea, select").prop("type")){b.preventDefault();return}}else if(9!=
b.keyCode||b.shiftKey){e.$menu.trigger("prevcommand");return}case 40:z.keyStop(b,e);if(e.isInput){if(9==b.keyCode){b.preventDefault();e.$selected&&e.$selected.find("input, textarea, select").blur();e.$menu.trigger("nextcommand");return}if(40==b.keyCode&&"checkbox"==e.$selected.find("input, textarea, select").prop("type")){b.preventDefault();return}}else{e.$menu.trigger("nextcommand");return}break;case 37:z.keyStop(b,e);if(e.isInput||!e.$selected||!e.$selected.length)break;if(!e.$selected.parent().hasClass("context-menu-root")){b=
e.$selected.parent().parent();e.$selected.trigger("contextmenu:blur");e.$selected=b;return}break;case 39:z.keyStop(b,e);if(e.isInput||!e.$selected||!e.$selected.length)break;var d=e.$selected.data("contextMenu")||{};if(d.$menu&&e.$selected.hasClass("context-menu-submenu")){e.$selected=null;d.$selected=null;d.$menu.trigger("nextcommand");return}break;case 35:case 36:e.$selected&&e.$selected.find("input, textarea, select").length||((e.$selected&&e.$selected.parent()||e.$menu).children(":not(.disabled, .not-selectable)")[36==
b.keyCode?"first":"last"]().trigger("contextmenu:focus"),b.preventDefault());return;case 13:z.keyStop(b,e);if(e.isInput){if(e.$selected&&!e.$selected.is("textarea, select")){b.preventDefault();return}break}e.$selected&&e.$selected.trigger("mouseup");return;case 32:case 33:case 34:z.keyStop(b,e);return;case 27:z.keyStop(b,e);e.$menu.trigger("contextmenu:hide");return;default:if(d=String.fromCharCode(b.keyCode).toUpperCase(),e.accesskeys[d]){e.accesskeys[d].$node.trigger(e.accesskeys[d].$menu?"contextmenu:focus":
"mouseup");return}}b.stopPropagation();e.$selected&&e.$selected.trigger(b)},prevItem:function(b){b.stopPropagation();var d=e(this).data("contextMenu")||{};if(d.$selected){var h=d.$selected,d=d.$selected.parent().data("contextMenu")||{};d.$selected=h}for(var h=d.$menu.children(),g=d.$selected&&d.$selected.prev().length?d.$selected.prev():h.last(),k=g;g.hasClass("disabled")||g.hasClass("not-selectable");)if(g=g.prev().length?g.prev():h.last(),g.is(k))return;d.$selected&&z.itemMouseleave.call(d.$selected.get(0),
b);z.itemMouseenter.call(g.get(0),b);b=g.find("input, textarea, select");b.length&&b.focus()},nextItem:function(b){b.stopPropagation();var d=e(this).data("contextMenu")||{};if(d.$selected){var g=d.$selected,d=d.$selected.parent().data("contextMenu")||{};d.$selected=g}for(var g=d.$menu.children(),h=d.$selected&&d.$selected.next().length?d.$selected.next():g.first(),k=h;h.hasClass("disabled")||h.hasClass("not-selectable");)if(h=h.next().length?h.next():g.first(),h.is(k))return;d.$selected&&z.itemMouseleave.call(d.$selected.get(0),
b);z.itemMouseenter.call(h.get(0),b);b=h.find("input, textarea, select");b.length&&b.focus()},focusInput:function(b){b=e(this).closest(".context-menu-item");var d=b.data(),h=d.contextMenu,d=d.contextMenuRoot;d.$selected=h.$selected=b;d.isInput=h.isInput=!0},blurInput:function(b){b=e(this).closest(".context-menu-item").data();b.contextMenuRoot.isInput=b.contextMenu.isInput=!1},menuMouseenter:function(b){e(this).data().contextMenuRoot.hovering=!0},menuMouseleave:function(b){var d=e(this).data().contextMenuRoot;
d.$layer&&d.$layer.is(b.relatedTarget)&&(d.hovering=!1)},itemMouseenter:function(b){var d=e(this),h=d.data(),g=h.contextMenu,h=h.contextMenuRoot;h.hovering=!0;b&&h.$layer&&h.$layer.is(b.relatedTarget)&&(b.preventDefault(),b.stopImmediatePropagation());(g.$menu?g:h).$menu.children(".hover").trigger("contextmenu:blur");d.hasClass("disabled")||d.hasClass("not-selectable")?g.$selected=null:d.trigger("contextmenu:focus")},itemMouseleave:function(b){var d=e(this),h=d.data(),g=h.contextMenu,h=h.contextMenuRoot;
h!==g&&h.$layer&&h.$layer.is(b.relatedTarget)?(h.$selected&&h.$selected.trigger("contextmenu:blur"),b.preventDefault(),b.stopImmediatePropagation(),h.$selected=g.$selected=g.$node):d.trigger("contextmenu:blur")},itemClick:function(b){var d=e(this),h=d.data(),g=h.contextMenuRoot,k=h.contextMenuKey;if(h.contextMenu.items[k]&&!d.is(".disabled, .context-menu-submenu, .context-menu-separator, .not-selectable")){b.preventDefault();b.stopImmediatePropagation();if(e.isFunction(g.callbacks[k])&&Object.prototype.hasOwnProperty.call(g.callbacks,
k))b=g.callbacks[k];else if(e.isFunction(g.callback))b=g.callback;else return;!1!==b.call(g.$trigger,k,g)?g.$menu.trigger("contextmenu:hide"):g.$menu.parent().length&&T.update.call(g.$trigger,g)}},inputClick:function(b){b.stopImmediatePropagation()},hideMenu:function(b,d){var h=e(this).data("contextMenuRoot");T.hide.call(h.$trigger,h,d&&d.force)},focusItem:function(b){b.stopPropagation();b=e(this);var d=b.data(),h=d.contextMenu,d=d.contextMenuRoot;b.addClass("hover").siblings(".hover").trigger("contextmenu:blur");
h.$selected=d.$selected=b;h.$node&&d.positionSubmenu.call(h.$node,h.$menu)},blurItem:function(b){b.stopPropagation();b=e(this);var d=b.data().contextMenu;b.removeClass("hover");d.$selected=null}},T={show:function(b,d,h){var g=e(this),k={};e("#context-menu-layer").trigger("mousedown");b.$trigger=g;if(!1===b.events.show.call(g,b))l=null;else if(T.update.call(g,b),b.position.call(g,b,d,h),b.zIndex&&(k.zIndex=N(g)+b.zIndex),T.layer.call(b.$menu,b,k.zIndex),b.$menu.find("ul").css("zIndex",k.zIndex+1),
b.$menu.css(k)[b.animation.show](b.animation.duration,function(){g.trigger("contextmenu:visible")}),g.data("contextMenu",b).addClass("context-menu-active"),e(document).off("keydown.contextMenu").on("keydown.contextMenu",z.key),b.autoHide)e(document).on("mousemove.contextMenuAutoHide",function(d){var e=g.offset();e.right=e.left+g.outerWidth();e.bottom=e.top+g.outerHeight();!b.$layer||b.hovering||d.pageX>=e.left&&d.pageX<=e.right&&d.pageY>=e.top&&d.pageY<=e.bottom||b.$menu.trigger("contextmenu:hide")})},
hide:function(b,d){var h=e(this);b||(b=h.data("contextMenu")||{});if(d||!b.events||!1!==b.events.hide.call(h,b)){h.removeData("contextMenu").removeClass("context-menu-active");if(b.$layer){setTimeout(function(b){return function(){b.remove()}}(b.$layer),10);try{delete b.$layer}catch(g){b.$layer=null}}l=null;b.$menu.find(".hover").trigger("contextmenu:blur");b.$selected=null;e(document).off(".contextMenuAutoHide").off("keydown.contextMenu");b.$menu&&b.$menu[b.animation.hide](b.animation.duration,function(){b.build&&
(b.$menu.remove(),e.each(b,function(d,e){switch(d){case "ns":case "selector":case "build":case "trigger":return!0;default:b[d]=k;try{delete b[d]}catch(h){}return!0}}));setTimeout(function(){h.trigger("contextmenu:hidden")},10)})}},create:function(b,h){h===k&&(h=b);b.$menu=e('<ul class="context-menu-list"></ul>').addClass(b.className||"").data({contextMenu:b,contextMenuRoot:h});e.each(["callbacks","commands","inputs"],function(d,e){b[e]={};h[e]||(h[e]={})});h.accesskeys||(h.accesskeys={});e.each(b.items,
function(g,k){var l=e('<li class="context-menu-item"></li>').addClass(k.className||""),n=null,q=null;l.on("click",e.noop);k.$node=l.data({contextMenu:b,contextMenuRoot:h,contextMenuKey:g});if(k.accesskey)for(var p=d(k.accesskey),r=0,s;s=p[r];r++)if(!h.accesskeys[s]){h.accesskeys[s]=k;k._name=k.name.replace(new RegExp("("+s+")","i"),'<span class="context-menu-accesskey">$1</span>');break}if("string"==typeof k)l.addClass("context-menu-separator not-selectable");else if(k.type&&w[k.type])w[k.type].call(l,
k,b,h),e.each([b,h],function(b,d){d.commands[g]=k;e.isFunction(k.callback)&&(d.callbacks[g]=k.callback)});else{"html"==k.type?l.addClass("context-menu-html not-selectable"):k.type?(n=e("<label></label>").appendTo(l),e("<span></span>").html(k._name||k.name).appendTo(n),l.addClass("context-menu-input"),b.hasTypes=!0,e.each([b,h],function(b,d){d.commands[g]=k;d.inputs[g]=k})):k.items&&(k.type="sub");switch(k.type){case "text":q=e('<input type="text" value="1" name="" value="">').attr("name","context-menu-input-"+
g).val(k.value||"").appendTo(n);break;case "textarea":q=e('<textarea name=""></textarea>').attr("name","context-menu-input-"+g).val(k.value||"").appendTo(n);k.height&&q.height(k.height);break;case "checkbox":q=e('<input type="checkbox" value="1" name="" value="">').attr("name","context-menu-input-"+g).val(k.value||"").prop("checked",!!k.selected).prependTo(n);break;case "radio":q=e('<input type="radio" value="1" name="" value="">').attr("name","context-menu-input-"+k.radio).val(k.value||"").prop("checked",
!!k.selected).prependTo(n);break;case "select":q=e('<select name="">').attr("name","context-menu-input-"+g).appendTo(n);k.options&&(e.each(k.options,function(b,d){e("<option></option>").val(b).text(d).appendTo(q)}),q.val(k.selected));break;case "sub":e("<span></span>").html(k._name||k.name).appendTo(l);k.appendTo=k.$node;T.create(k,h);l.data("contextMenu",k).addClass("context-menu-submenu");k.callback=null;break;case "html":e(k.html).appendTo(l);break;default:e.each([b,h],function(b,d){d.commands[g]=
k;e.isFunction(k.callback)&&(d.callbacks[g]=k.callback)}),e("<span></span>").html(k._name||k.name||"").appendTo(l)}if(k.type&&"sub"!=k.type&&"html"!=k.type&&(q.on("focus",z.focusInput).on("blur",z.blurInput),k.events))q.on(k.events,b);k.icon&&l.addClass("icon icon-"+k.icon)}k.$input=q;k.$label=n;l.appendTo(b.$menu);if(!b.hasTypes&&e.support.eventSelectstart)l.on("selectstart.disableTextSelect",z.abortevent)});b.$node||b.$menu.css("display","none").addClass("context-menu-root");b.$menu.appendTo(b.appendTo||
document.body)},resize:function(b,d){b.css({position:"absolute",display:"block"});b.data("width",Math.ceil(b.width())+1);b.css({position:"static",minWidth:"0px",maxWidth:"100000px"});b.find("> li > ul").each(function(){T.resize(e(this),!0)});d||b.find("ul").andSelf().css({position:"",display:"",minWidth:"",maxWidth:""}).width(function(){return e(this).data("width")})},update:function(b,d){var h=this;d===k&&(d=b,T.resize(b.$menu));b.$menu.children().each(function(){var g=e(this),k=g.data("contextMenuKey"),
l=b.items[k],k=e.isFunction(l.disabled)&&l.disabled.call(h,k,d)||!0===l.disabled;g[k?"addClass":"removeClass"]("disabled");if(l.type)switch(g.find("input, select, textarea").prop("disabled",k),l.type){case "text":case "textarea":l.$input.val(l.value||"");break;case "checkbox":case "radio":l.$input.val(l.value||"").prop("checked",!!l.selected);break;case "select":l.$input.val(l.selected||"")}l.$menu&&T.update.call(h,l,d)})},layer:function(b,d){var h=b.$layer=e('<div id="context-menu-layer" style="position:fixed; z-index:'+
d+'; top:0; left:0; opacity: 0; filter: alpha(opacity=0); background-color: #000;"></div>').css({height:n.height(),width:n.width(),display:"block"}).data("contextMenuRoot",b).insertBefore(this).on("contextmenu",z.abortevent).on("mousedown",z.layerClick);e.support.fixedPosition||h.css({position:"absolute",height:e(document).height()});return h}};e.fn.contextMenu=function(b){b===k?this.first().trigger("contextmenu"):b.x&&b.y?this.first().trigger(e.Event("contextmenu",{pageX:b.x,pageY:b.y})):"hide"===
b?(b=this.data("contextMenu").$menu)&&b.trigger("contextmenu:hide"):"destroy"===b?e.contextMenu("destroy",{context:this}):e.isPlainObject(b)?(b.context=this,e.contextMenu("create",b)):b?this.removeClass("context-menu-disabled"):b||this.addClass("context-menu-disabled");return this};e.contextMenu=function(b,d){"string"!=typeof b&&(d=b,b="create");"string"==typeof d?d={selector:d}:d===k&&(d={});var h=e.extend(!0,{},v,d||{}),g=e(document),l=g,n=!1;h.context&&h.context.length?(l=e(h.context).first(),
h.context=l.get(0),n=h.context!==document):h.context=document;switch(b){case "create":if(!h.selector)throw Error("No selector specified");if(h.selector.match(/.context-menu-(list|item|input)($|\s)/))throw Error('Cannot bind to selector "'+h.selector+'" as it contains a reserved className');if(!h.build&&(!h.items||e.isEmptyObject(h.items)))throw Error("No Items specified");p++;h.ns=".contextMenu"+p;n||(r[h.selector]=h.ns);s[h.ns]=h;h.trigger||(h.trigger="right");q||(g.on({"contextmenu:hide.contextMenu":z.hideMenu,
"prevcommand.contextMenu":z.prevItem,"nextcommand.contextMenu":z.nextItem,"contextmenu.contextMenu":z.abortevent,"mouseenter.contextMenu":z.menuMouseenter,"mouseleave.contextMenu":z.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",z.inputClick).on({"mouseup.contextMenu":z.itemClick,"contextmenu:focus.contextMenu":z.focusItem,"contextmenu:blur.contextMenu":z.blurItem,"contextmenu.contextMenu":z.abortevent,"mouseenter.contextMenu":z.itemMouseenter,"mouseleave.contextMenu":z.itemMouseleave},
".context-menu-item"),q=!0);l.on("contextmenu"+h.ns,h.selector,h,z.contextmenu);if(n)l.on("remove"+h.ns,function(){e(this).contextMenu("destroy")});switch(h.trigger){case "hover":l.on("mouseenter"+h.ns,h.selector,h,z.mouseenter).on("mouseleave"+h.ns,h.selector,h,z.mouseleave);break;case "left":l.on("click"+h.ns,h.selector,h,z.click)}h.build||T.create(h);break;case "destroy":var x;if(n){var w=h.context;e.each(s,function(b,d){if(d.context!==w)return!0;x=e(".context-menu-list").filter(":visible");x.length&&
x.data().contextMenuRoot.$trigger.is(e(d.context).find(d.selector))&&x.trigger("contextmenu:hide",{force:!0});try{s[d.ns].$menu&&s[d.ns].$menu.remove(),delete s[d.ns]}catch(h){s[d.ns]=null}e(d.context).off(d.ns);return!0})}else if(!h.selector)g.off(".contextMenu .contextMenuAutoHide"),e.each(s,function(b,d){e(d.context).off(d.ns)}),r={},s={},p=0,q=!1,e("#context-menu-layer, .context-menu-list").remove();else if(r[h.selector]){x=e(".context-menu-list").filter(":visible");x.length&&x.data().contextMenuRoot.$trigger.is(h.selector)&&
x.trigger("contextmenu:hide",{force:!0});try{s[r[h.selector]].$menu&&s[r[h.selector]].$menu.remove(),delete s[r[h.selector]]}catch(y){s[r[h.selector]]=null}g.off(r[h.selector])}break;case "html5":(!e.support.htmlCommand&&!e.support.htmlMenuitem||"boolean"==typeof d&&d)&&e('menu[type="context"]').each(function(){this.id&&e.contextMenu({selector:"[contextmenu="+this.id+"]",items:e.contextMenu.fromMenu(this)})}).css("display","none");break;default:throw Error('Unknown operation "'+b+'"');}return this};
e.contextMenu.setInputValues=function(b,d){d===k&&(d={});e.each(b.inputs,function(b,e){switch(e.type){case "text":case "textarea":e.value=d[b]||"";break;case "checkbox":e.selected=d[b]?!0:!1;break;case "radio":e.selected=(d[e.radio]||"")==e.value?!0:!1;break;case "select":e.selected=d[b]||""}})};e.contextMenu.getInputValues=function(b,d){d===k&&(d={});e.each(b.inputs,function(b,e){switch(e.type){case "text":case "textarea":case "select":d[b]=e.$input.val();break;case "checkbox":d[b]=e.$input.prop("checked");
break;case "radio":e.$input.prop("checked")&&(d[e.radio]=e.value)}});return d};e.contextMenu.fromMenu=function(d){d=e(d);var h={};b(h,d.children());return h};e.contextMenu.defaults=v;e.contextMenu.types=w;e.contextMenu.handle=z;e.contextMenu.op=T;e.contextMenu.menus=s})(jQuery);!function(){function e(a,f){return f>a?-1:a>f?1:a>=f?0:0/0}function k(a){return null!=a&&!isNaN(a)}function d(a){return{left:function(f,m,D,b){3>arguments.length&&(D=0);for(4>arguments.length&&(b=f.length);b>D;){var u=D+b>>>1;0>a(f[u],m)?D=u+1:b=u}return D},right:function(f,m,D,b){3>arguments.length&&(D=0);for(4>arguments.length&&(b=f.length);b>D;){var u=D+b>>>1;0<a(f[u],m)?b=u:D=u+1}return D}}}function g(a){return a.length}function b(a,f){try{for(var m in f)Object.defineProperty(a.prototype,m,{value:f[m],
enumerable:!1})}catch(b){a.prototype=f}}function h(){}function l(a){return Oa+a in this}function q(){var a=[];return this.forEach(function(f){a.push(f)}),a}function n(){var a=0,f;for(f in this)f.charCodeAt(0)===Cb&&++a;return a}function p(){for(var a in this)if(a.charCodeAt(0)===Cb)return!1;return!0}function r(){}function s(a,f,m){return function(){var b=m.apply(f,arguments);return b===f?a:b}}function w(a,f){if(f in a)return f;f=f.charAt(0).toUpperCase()+f.slice(1);for(var m=0,b=Rd.length;b>m;++m){var B=
Rd[m]+f;if(B in a)return B}}function v(){}function x(){}function y(a){function f(){for(var f,b=m,D=-1,d=b.length;++D<d;)(f=b[D].on)&&f.apply(this,arguments);return a}var m=[],b=new h;return f.on=function(f,u){var d,e=b.get(f);return 2>arguments.length?e&&e.on:(e&&(e.on=null,m=m.slice(0,d=m.indexOf(e)).concat(m.slice(d+1)),b.remove(f)),u&&m.push(b.set(f,{on:u})),a)},f}function L(){t.event.preventDefault()}function M(){for(var a,f=t.event;a=f.sourceEvent;)f=a;return f}function N(a){for(var f=new x,
m=0,b=arguments.length;++m<b;)f[arguments[m]]=y(f);return f.of=function(m,b){return function(D){try{var d=D.sourceEvent=t.event;D.target=a;t.event=D;f[D.type].apply(m,b)}finally{t.event=d}}},f}function z(a){return Db(a,O),a}function T(a){return"function"==typeof a?a:function(){return Ac(a,this)}}function Id(a){return"function"==typeof a?a:function(){return Bc(a,this)}}function Jd(a,f){function m(){this.removeAttribute(a)}function b(){this.removeAttributeNS(a.space,a.local)}function B(){this.setAttribute(a,
f)}function u(){this.setAttributeNS(a.space,a.local,f)}function d(){var m=f.apply(this,arguments);null==m?this.removeAttribute(a):this.setAttribute(a,m)}function e(){var m=f.apply(this,arguments);null==m?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,m)}return a=t.ns.qualify(a),null==f?a.local?b:m:"function"==typeof f?a.local?e:d:a.local?u:B}function Kd(a){return a.trim().replace(/\s+/g," ")}function Ld(a){return new RegExp("(?:^|\\s+)"+t.requote(a)+"(?:\\s+|$)","g")}
function Md(a,f){function m(){for(var m=-1;++m<B;)a[m](this,f)}function b(){for(var m=-1,D=f.apply(this,arguments);++m<B;)a[m](this,D)}a=(a+"").trim().split(/^|\s+/).map(pg);var B=a.length;return"function"==typeof f?b:m}function pg(a){var f=Ld(a);return function(m,b){if(B=m.classList)return b?B.add(a):B.remove(a);var B=m.getAttribute("class")||"";b?(f.lastIndex=0,f.test(B)||m.setAttribute("class",Kd(B+" "+a))):m.setAttribute("class",Kd(B.replace(f," ")))}}function Nd(a,f,m){function b(){this.style.removeProperty(a)}
function B(){this.style.setProperty(a,f,m)}function u(){var b=f.apply(this,arguments);null==b?this.style.removeProperty(a):this.style.setProperty(a,b,m)}return null==f?b:"function"==typeof f?u:B}function Od(a,f){function m(){delete this[a]}function b(){this[a]=f}function B(){var m=f.apply(this,arguments);null==m?delete this[a]:this[a]=m}return null==f?m:"function"==typeof f?B:b}function Pd(a){return"function"==typeof a?a:(a=t.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,
a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,a)}}function Qd(a){return function(){return Sd(this,a)}}function qg(a){return arguments.length||(a=e),function(f,m){return f&&m?a(f.__data__,m.__data__):!f-!m}}function xa(a,f){for(var m=0,b=a.length;b>m;m++)for(var B,u=a[m],d=0,e=u.length;e>d;d++)(B=u[d])&&f(B,d,m);return a}function Td(a){return Db(a,ya),a}function rg(a){var f,m;return function(b,B,u){b=a[u].update;var d=b.length;u!=m&&(m=u,f=0);for(B>=f&&(f=B+1);!(B=
b[f])&&++f<d;);return B}}function Eb(){var a=this.__transition__;a&&++a.active}function Ud(a,f,m){function b(){var f=this[d];f&&(this.removeEventListener(a,f,f.$),delete this[d])}function B(){var u=h(f,Ga(arguments));b.call(this);this.addEventListener(a,this[d]=u,u.$=m);u._=f}function u(){var f,m=new RegExp("^__on([^.]+)"+t.requote(a)+"$"),b;for(b in this)if(f=b.match(m)){var D=this[b];this.removeEventListener(f[1],D,D.$);delete this[b]}}var d="__on"+a,e=a.indexOf("."),h=Vd;0<e&&(a=a.slice(0,e));
var g=Cc.get(a);return g&&(a=g,h=sg),e?f?B:b:f?v:u}function Vd(a,f){return function(m){var b=t.event;t.event=m;f[0]=this.__data__;try{a.apply(this,f)}finally{t.event=b}}}function sg(a,f){var m=Vd(a,f);return function(a){var f=a.relatedTarget;f&&(f===this||8&f.compareDocumentPosition(this))||m.call(this,a)}}function Fb(){var a=".dragsuppress-"+ ++tg,f="click"+a,m=t.select(aa).on("touchmove"+a,L).on("dragstart"+a,L).on("selectstart"+a,L);if(ob){var b=za.style,d=b[ob];b[ob]="none"}return function(u){function e(){m.on(f,
null)}m.on(a,null);ob&&(b[ob]=d);u&&(m.on(f,function(){L();e()},!0),setTimeout(e,0))}}function Dc(a,f){f.changedTouches&&(f=f.changedTouches[0]);var m=a.ownerSVGElement||a;if(m.createSVGPoint){var b=m.createSVGPoint();if(0>Ec&&(aa.scrollX||aa.scrollY)){var m=t.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),d=m[0][0].getScreenCTM();Ec=!(d.f||d.e);m.remove()}return Ec?(b.x=f.pageX,b.y=f.pageY):(b.x=f.clientX,b.y=f.clientY),b=b.matrixTransform(a.getScreenCTM().inverse()),
[b.x,b.y]}m=a.getBoundingClientRect();return[f.clientX-m.left-a.clientLeft,f.clientY-m.top-a.clientTop]}function ug(){return t.event.changedTouches[0].identifier}function vg(){return t.event.target}function wg(){return aa}function Fc(a,f,m){return(f[0]-a[0])*(m[1]-a[1])-(f[1]-a[1])*(m[0]-a[0])}function Wd(a){return 1<a?0:-1>a?F:Math.acos(a)}function ab(a){return 1<a?Y:-1>a?-Y:Math.asin(a)}function Xd(a){return((a=Math.exp(a))+1/a)/2}function Yd(a){return(a=Math.sin(a/2))*a}function Qa(){}function sa(a,
f,m){return this instanceof sa?(this.h=+a,this.s=+f,void(this.l=+m)):2>arguments.length?a instanceof sa?new sa(a.h,a.s,a.l):Zd(""+a,$d,sa):new sa(a,f,m)}function Gc(a,f,m){function b(a){return 360<a?a-=360:0>a&&(a+=360),60>a?d+(u-d)*a/60:180>a?u:240>a?d+(u-d)*(240-a)/60:d}var d,u;return a=isNaN(a)?0:0>(a%=360)?a+360:a,f=isNaN(f)?0:0>f?0:1<f?1:f,m=0>m?0:1<m?1:m,u=.5>=m?m*(1+f):m+f-m*f,d=2*m-u,new ba(Math.round(255*b(a+120)),Math.round(255*b(a)),Math.round(255*b(a-120)))}function na(a,f,m){return this instanceof
na?(this.h=+a,this.c=+f,void(this.l=+m)):2>arguments.length?a instanceof na?new na(a.h,a.c,a.l):a instanceof oa?ae(a.l,a.a,a.b):ae((a=be((a=t.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new na(a,f,m)}function Hc(a,f,m){return isNaN(a)&&(a=0),isNaN(f)&&(f=0),new oa(m,Math.cos(a*=E)*f,Math.sin(a)*f)}function oa(a,f,m){return this instanceof oa?(this.l=+a,this.a=+f,void(this.b=+m)):2>arguments.length?a instanceof oa?new oa(a.l,a.a,a.b):a instanceof na?Hc(a.l,a.c,a.h):be((a=ba(a)).r,a.g,a.b):new oa(a,f,m)}function ce(a,
f,m){a=(a+16)/116;f=a+f/500;m=a-m/200;return f=Ic(f)*de,a=Ic(a)*ee,m=Ic(m)*fe,new ba(Jc(3.2404542*f-1.5371385*a-.4985314*m),Jc(-.969266*f+1.8760108*a+.041556*m),Jc(.0556434*f-.2040259*a+1.0572252*m))}function ae(a,f,m){return 0<a?new na(Math.atan2(m,f)*P,Math.sqrt(f*f+m*m),a):new na(0/0,0/0,a)}function Ic(a){return.206893034<a?a*a*a:(a-4/29)/7.787037}function Kc(a){return.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function Jc(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}
function ba(a,f,m){return this instanceof ba?(this.r=~~a,this.g=~~f,void(this.b=~~m)):2>arguments.length?a instanceof ba?new ba(a.r,a.g,a.b):Zd(""+a,ba,Gc):new ba(a,f,m)}function Gb(a){return new ba(a>>16,255&a>>8,255&a)+""}function bb(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function Zd(a,f,m){var b,d,u,e=0,h=0,g=0;if(b=/([a-z]+)\((.*)\)/i.exec(a))switch(d=b[2].split(","),b[1]){case "hsl":return m(parseFloat(d[0]),parseFloat(d[1])/100,parseFloat(d[2])/100);case "rgb":return f(Lc(d[0]),
Lc(d[1]),Lc(d[2]))}return(u=Hb.get(a))?f(u.r,u.g,u.b):(null==a||"#"!==a.charAt(0)||isNaN(u=parseInt(a.slice(1),16))||(4===a.length?(e=(3840&u)>>4,e|=e>>4,h=240&u,h|=h>>4,g=15&u,g|=g<<4):7===a.length&&(e=(16711680&u)>>16,h=(65280&u)>>8,g=255&u)),f(e,h,g))}function $d(a,f,m){var b,d,u=Math.min(a/=255,f/=255,m/=255),e=Math.max(a,f,m),h=e-u,g=(e+u)/2;return h?(d=.5>g?h/(e+u):h/(2-e-u),b=a==e?(f-m)/h+(m>f?6:0):f==e?(m-a)/h+2:(a-f)/h+4,b*=60):(b=0/0,d=0<g&&1>g?0:b),new sa(b,d,g)}function be(a,f,m){a=Mc(a);
f=Mc(f);m=Mc(m);var b=Kc((.4124564*a+.3575761*f+.1804375*m)/de),d=Kc((.2126729*a+.7151522*f+.072175*m)/ee);a=Kc((.0193339*a+.119192*f+.9503041*m)/fe);return oa(116*d-16,500*(b-d),200*(d-a))}function Mc(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Lc(a){var f=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*f):f}function J(a){return"function"==typeof a?a:function(){return a}}function X(a){return a}function Nc(a){return function(f,m,b){return 2===arguments.length&&
"function"==typeof m&&(b=m,m=null),Ib(f,m,a,b)}}function Ib(a,f,m,b){function d(){var a,f=g.status,b;if(b=!f)b=(b=g.responseType)&&"text"!==b?g.response:g.responseText;if(b||200<=f&&300>f||304===f){try{a=m.call(u,g)}catch(D){return e.error.call(u,D),void 0}e.load.call(u,a)}else e.error.call(u,g)}var u={},e=t.dispatch("beforesend","progress","load","error"),h={},g=new XMLHttpRequest,da=null;return!aa.XDomainRequest||"withCredentials"in g||!/^(http(s)?:)?\/\//.test(a)||(g=new XDomainRequest),"onload"in
g?g.onload=g.onerror=d:g.onreadystatechange=function(){3<g.readyState&&d()},g.onprogress=function(a){var f=t.event;t.event=a;try{e.progress.call(u,g)}finally{t.event=f}},u.header=function(a,f){return a=(a+"").toLowerCase(),2>arguments.length?h[a]:(null==f?delete h[a]:h[a]=f+"",u)},u.mimeType=function(a){return arguments.length?(f=null==a?null:a+"",u):f},u.responseType=function(a){return arguments.length?(da=a,u):da},u.response=function(a){return m=a,u},["get","post"].forEach(function(a){u[a]=function(){return u.send.apply(u,
[a].concat(Ga(arguments)))}}),u.send=function(m,b,D){if(2===arguments.length&&"function"==typeof b&&(D=b,b=null),g.open(m,a,!0),null==f||"accept"in h||(h.accept=f+",*/*"),g.setRequestHeader)for(var d in h)g.setRequestHeader(d,h[d]);return null!=f&&g.overrideMimeType&&g.overrideMimeType(f),null!=da&&(g.responseType=da),null!=D&&u.on("error",D).on("load",function(a){D(null,a)}),e.beforesend.call(u,g),g.send(null==b?null:b),u},u.abort=function(){return g.abort(),u},t.rebind(u,e,"on"),null==b?u:u.get(xg(b))}
function xg(a){return 1===a.length?function(f,m){a(null==f?m:null)}:a}function Oc(){var a=ge(),a=he()-a;24<a?(isFinite(a)&&(clearTimeout(Jb),Jb=setTimeout(Oc,a)),Kb=0):(Kb=1,ie(Oc))}function ge(){var a=Date.now();for(Aa=Lb;Aa;)a>=Aa.t&&(Aa.f=Aa.c(a-Aa.t)),Aa=Aa.n;return a}function he(){for(var a,f=Lb,m=1/0;f;)f.f?f=a?a.n=f.n:Lb=f.n:(f.t<m&&(m=f.t),f=(a=f).n);return Mb=a,m}function Pc(a,f){return f-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function yg(a){var f=a.decimal,m=a.thousands,b=a.grouping,d=a.currency,
u=b?function(a){for(var f=a.length,u=[],d=0,e=b[0];0<e&&0<f;)u.push(a.substring(f-=e,f+e)),e=b[d=(d+1)%b.length];return u.reverse().join(m)}:X;return function(a){a=je.exec(a);var m=a[1]||" ",b=a[2]||">",D=a[3]||"",e=a[4]||"",h=a[5],g=+a[6],k=a[7],l=a[8],n=a[9],q=1,p="",r="",s=!1;switch(l&&(l=+l.substring(1)),(h||"0"===m&&"="===b)&&(h=m="0",b="=",k&&(g-=Math.floor((g-1)/4))),n){case "n":k=!0;n="g";break;case "%":q=100;r="%";n="f";break;case "p":q=100;r="%";n="r";break;case "b":case "o":case "x":case "X":"#"===
e&&(p="0"+n.toLowerCase());case "c":case "d":s=!0;l=0;break;case "s":q=-1,n="r"}"$"===e&&(p=d[0],r=d[1]);"r"!=n||l||(n="g");null!=l&&("g"==n?l=Math.max(1,Math.min(21,l)):("e"==n||"f"==n)&&(l=Math.max(0,Math.min(20,l))));var n=zg.get(n)||Ag,H=h&&k;return function(a){var d=r;if(s&&a%1)return"";var e=0>a||0===a&&0>1/a?(a=-a,"-"):D;0>q?(d=t.formatPrefix(a,l),a=d.scale(a),d=d.symbol+r):a*=q;a=n(a,l);var B=a.lastIndexOf("."),U=0>B?a:a.substring(0,B),B=0>B?"":f+a.substring(B+1);!h&&k&&(U=u(U));var Q=p.length+
U.length+B.length+(H?0:e.length),x=g>Q?Array(Q=g-Q+1).join(m):"";return H&&(U=u(x+U)),e+=p,a=U+B,("<"===b?e+a+x:">"===b?x+e+a:"^"===b?x.substring(0,Q>>=1)+e+a+x.substring(Q):e+(H?a:x+a))+d}}}function Ag(a){return a+""}function Ba(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Ra(a,f,m){function b(f){var m=a(f),D=u(m,1);return D-f>f-m?m:D}function d(m){return f(m=a(new Z(m-1)),1),m}function u(a,m){return f(a=new Z(+a),m),a}function e(a,b,D){a=d(a);var u=
[];if(1<D)for(;b>a;)m(a)%D||u.push(new Date(+a)),f(a,1);else for(;b>a;)u.push(new Date(+a)),f(a,1);return u}a.floor=a;a.round=b;a.ceil=d;a.offset=u;a.range=e;var h=a.utc=Nb(a);return h.floor=h,h.round=Nb(b),h.ceil=Nb(d),h.offset=Nb(u),h.range=function(a,f,m){try{Z=Ba;var b=new Ba;return b._=a,e(b,f,m)}finally{Z=Date}},a}function Nb(a){return function(f,m){try{Z=Ba;var b=new Ba;return b._=f,a(b,m)._}finally{Z=Date}}}function Bg(a){function f(a){function f(m){for(var u,D,d,e=[],B=-1,h=0;++B<b;)37===
a.charCodeAt(B)&&(e.push(a.slice(h,B)),null!=(D=ke[u=a.charAt(++B)])&&(u=a.charAt(++B)),(d=H[u])&&(u=d(m,null==D?"e"===u?" ":"0":D)),e.push(u),h=B+1);return e.push(a.slice(h,B)),e.join("")}var b=a.length;return f.parse=function(f){var b={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(m(b,a,f,0)!=f.length)return null;"p"in b&&(b.H=b.H%12+12*b.p);f=null!=b.Z&&Z!==Ba;var u=new (f?Ba:Z);return"j"in b?u.setFullYear(b.y,0,b.j):"w"in b&&("W"in b||"U"in b)?(u.setFullYear(b.y,0,1),u.setFullYear(b.y,0,"W"in b?(b.w+
6)%7+7*b.W-(u.getDay()+5)%7:b.w+7*b.U-(u.getDay()+6)%7)):u.setFullYear(b.y,b.m,b.d),u.setHours(b.H+(0|b.Z/100),b.M+b.Z%100,b.S,b.L),f?u._:u},f.toString=function(){return a},f}function m(a,f,m,b){for(var u,D,d,e=0,B=f.length,h=m.length;B>e;){if(b>=h)return-1;if(u=f.charCodeAt(e++),37===u){if(d=f.charAt(e++),D=x[d in ke?f.charAt(e++):d],!D||0>(b=D(a,m,b)))return-1}else if(u!=m.charCodeAt(b++))return-1}return b}var b=a.dateTime,d=a.date,u=a.time,e=a.periods,h=a.days,g=a.shortDays,da=a.months,k=a.shortMonths;
f.utc=function(a){function m(a){try{Z=Ba;var f=new Z;return f._=a,b(f)}finally{Z=Date}}var b=f(a);return m.parse=function(a){try{Z=Ba;var f=b.parse(a);return f&&f._}finally{Z=Date}},m.toString=b.toString,m};f.multi=f.utc.multi=Cg;var l=t.map(),n=Ob(h),q=Pb(h),p=Ob(g),r=Pb(g),s=Ob(da),R=Pb(da),G=Ob(k),K=Pb(k);e.forEach(function(a,f){l.set(a.toLowerCase(),f)});var H={a:function(a){return g[a.getDay()]},A:function(a){return h[a.getDay()]},b:function(a){return k[a.getMonth()]},B:function(a){return da[a.getMonth()]},
c:f(b),d:function(a,f){return ca(a.getDate(),f,2)},e:function(a,f){return ca(a.getDate(),f,2)},H:function(a,f){return ca(a.getHours(),f,2)},I:function(a,f){return ca(a.getHours()%12||12,f,2)},j:function(a,f){return ca(1+A.dayOfYear(a),f,3)},L:function(a,f){return ca(a.getMilliseconds(),f,3)},m:function(a,f){return ca(a.getMonth()+1,f,2)},M:function(a,f){return ca(a.getMinutes(),f,2)},p:function(a){return e[+(12<=a.getHours())]},S:function(a,f){return ca(a.getSeconds(),f,2)},U:function(a,f){return ca(A.sundayOfYear(a),
f,2)},w:function(a){return a.getDay()},W:function(a,f){return ca(A.mondayOfYear(a),f,2)},x:f(d),X:f(u),y:function(a,f){return ca(a.getFullYear()%100,f,2)},Y:function(a,f){return ca(a.getFullYear()%1E4,f,4)},Z:Dg,"%":function(){return"%"}},x={a:function(a,f,m){p.lastIndex=0;return(f=p.exec(f.slice(m)))?(a.w=r.get(f[0].toLowerCase()),m+f[0].length):-1},A:function(a,f,m){n.lastIndex=0;return(f=n.exec(f.slice(m)))?(a.w=q.get(f[0].toLowerCase()),m+f[0].length):-1},b:function(a,f,m){G.lastIndex=0;return(f=
G.exec(f.slice(m)))?(a.m=K.get(f[0].toLowerCase()),m+f[0].length):-1},B:function(a,f,m){s.lastIndex=0;return(f=s.exec(f.slice(m)))?(a.m=R.get(f[0].toLowerCase()),m+f[0].length):-1},c:function(a,f,b){return m(a,H.c.toString(),f,b)},d:le,e:le,H:me,I:me,j:Eg,L:Fg,m:Gg,M:Hg,p:function(a,f,m){f=l.get(f.slice(m,m+=2).toLowerCase());return null==f?-1:(a.p=f,m)},S:Ig,U:Jg,w:Kg,W:Lg,x:function(a,f,b){return m(a,H.x.toString(),f,b)},X:function(a,f,b){return m(a,H.X.toString(),f,b)},y:Mg,Y:Ng,Z:Og,"%":Pg};return f}
function ca(a,f,m){var b=0>a?"-":"";a=(b?-a:a)+"";var d=a.length;return b+(m>d?Array(m-d+1).join(f)+a:a)}function Ob(a){return new RegExp("^(?:"+a.map(t.requote).join("|")+")","i")}function Pb(a){for(var f=new h,m=-1,b=a.length;++m<b;)f.set(a[m].toLowerCase(),m);return f}function Kg(a,f,m){S.lastIndex=0;return(f=S.exec(f.slice(m,m+1)))?(a.w=+f[0],m+f[0].length):-1}function Jg(a,f,m){S.lastIndex=0;return(f=S.exec(f.slice(m)))?(a.U=+f[0],m+f[0].length):-1}function Lg(a,f,m){S.lastIndex=0;return(f=S.exec(f.slice(m)))?
(a.W=+f[0],m+f[0].length):-1}function Ng(a,f,m){S.lastIndex=0;return(f=S.exec(f.slice(m,m+4)))?(a.y=+f[0],m+f[0].length):-1}function Mg(a,f,m){S.lastIndex=0;if(f=S.exec(f.slice(m,m+2))){var b=+f[0];a=(a.y=b+(68<b?1900:2E3),m+f[0].length)}else a=-1;return a}function Og(a,f,m){return/^[+-]\d{4}$/.test(f=f.slice(m,m+5))?(a.Z=-f,m+5):-1}function Gg(a,f,m){S.lastIndex=0;return(f=S.exec(f.slice(m,m+2)))?(a.m=f[0]-1,m+f[0].length):-1}function le(a,f,m){S.lastIndex=0;return(f=S.exec(f.slice(m,m+2)))?(a.d=
+f[0],m+f[0].length):-1}function Eg(a,f,m){S.lastIndex=0;return(f=S.exec(f.slice(m,m+3)))?(a.j=+f[0],m+f[0].length):-1}function me(a,f,m){S.lastIndex=0;return(f=S.exec(f.slice(m,m+2)))?(a.H=+f[0],m+f[0].length):-1}function Hg(a,f,m){S.lastIndex=0;return(f=S.exec(f.slice(m,m+2)))?(a.M=+f[0],m+f[0].length):-1}function Ig(a,f,m){S.lastIndex=0;return(f=S.exec(f.slice(m,m+2)))?(a.S=+f[0],m+f[0].length):-1}function Fg(a,f,m){S.lastIndex=0;return(f=S.exec(f.slice(m,m+3)))?(a.L=+f[0],m+f[0].length):-1}function Dg(a){var f=
a.getTimezoneOffset();a=0<f?"-":"+";var m=0|I(f)/60,f=I(f)%60;return a+ca(m,"0",2)+ca(f,"0",2)}function Pg(a,f,m){ne.lastIndex=0;return(a=ne.exec(f.slice(m,m+1)))?m+a[0].length:-1}function Cg(a){for(var f=a.length,m=-1;++m<f;)a[m][0]=this(a[m][0]);return function(f){for(var m=0,b=a[m];!b[1](f);)b=a[++m];return b[0](f)}}function Rc(){}function oe(a,f,m){var b=m.s=a+f,d=b-a;m.t=a-(b-d)+(f-d)}function Qb(a,f){a&&pe.hasOwnProperty(a.type)&&pe[a.type](a,f)}function Sc(a,f,m){var b=-1,d=a.length-m;for(f.lineStart();++b<
d;)m=a[b],f.point(m[0],m[1],m[2]);f.lineEnd()}function qe(a,f){var m=-1,b=a.length;for(f.polygonStart();++m<b;)Sc(a[m],f,1);f.polygonEnd()}function Qg(){function a(a,f){a*=E;f=f*E/2+F/4;var m=a-b,e=0<=m?1:-1,h=e*m,m=Math.cos(f),g=Math.sin(f),k=u*g,l=d*m+k*Math.cos(h),e=k*e*Math.sin(h);Sa.add(Math.atan2(e,l));b=a;d=m;u=g}var f,m,b,d,u;ga.point=function(e,h){ga.point=a;b=(f=e)*E;d=Math.cos(h=(m=h)*E/2+F/4);u=Math.sin(h)};ga.lineEnd=function(){a(f,m)}}function Ta(a){var f=a[0];a=a[1];var m=Math.cos(a);
return[m*Math.cos(f),m*Math.sin(f),Math.sin(a)]}function Rb(a,f){return a[0]*f[0]+a[1]*f[1]+a[2]*f[2]}function db(a,f){return[a[1]*f[2]-a[2]*f[1],a[2]*f[0]-a[0]*f[2],a[0]*f[1]-a[1]*f[0]]}function Tc(a,f){a[0]+=f[0];a[1]+=f[1];a[2]+=f[2]}function Sb(a,f){return[a[0]*f,a[1]*f,a[2]*f]}function Tb(a){var f=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=f;a[1]/=f;a[2]/=f}function Ub(a){return[Math.atan2(a[1],a[0]),ab(a[2])]}function Vb(a,f){return I(a[0]-f[0])<C&&I(a[1]-f[1])<C}function Uc(a,f){a*=E;var m=
Math.cos(f*=E);pb(m*Math.cos(a),m*Math.sin(a),Math.sin(f))}function pb(a,f,m){++qb;Ca+=(a-Ca)/qb;Da+=(f-Da)/qb;ua+=(m-ua)/qb}function re(){function a(a,u){a*=E;var d=Math.cos(u*=E),e=d*Math.cos(a),d=d*Math.sin(a),h=Math.sin(u),g=Math.atan2(Math.sqrt((g=m*h-b*d)*g+(g=b*e-f*h)*g+(g=f*d-m*e)*g),f*e+m*d+b*h);eb+=g;ja+=g*(f+(f=e));ka+=g*(m+(m=d));ea+=g*(b+(b=h));pb(f,m,b)}var f,m,b;pa.point=function(d,u){d*=E;var e=Math.cos(u*=E);f=e*Math.cos(d);m=e*Math.sin(d);b=Math.sin(u);pa.point=a;pb(f,m,b)}}function se(){pa.point=
Uc}function Rg(){function a(a,f){a*=E;var m=Math.cos(f*=E),e=m*Math.cos(a),m=m*Math.sin(a),h=Math.sin(f),g=d*h-u*m,k=u*e-b*h,l=b*m-d*e,n=Math.sqrt(g*g+k*k+l*l),q=b*e+d*m+u*h,p=n&&-Wd(q)/n,n=Math.atan2(n,q);Ia+=p*g;Ja+=p*k;va+=p*l;eb+=n;ja+=n*(b+(b=e));ka+=n*(d+(d=m));ea+=n*(u+(u=h));pb(b,d,u)}var f,m,b,d,u;pa.point=function(e,h){f=e;m=h;pa.point=a;e*=E;var g=Math.cos(h*=E);b=g*Math.cos(e);d=g*Math.sin(e);u=Math.sin(h);pb(b,d,u)};pa.lineEnd=function(){a(f,m);pa.lineEnd=se;pa.point=Uc}}function fb(){return!0}
function te(a,f,m,b,d){var u=[],e=[];if(a.forEach(function(a){if(!(0>=(f=a.length-1))){var f,m=a[0],b=a[f];if(Vb(m,b)){d.lineStart();for(b=0;f>b;++b)d.point((m=a[b])[0],m[1]);return d.lineEnd(),void 0}f=new Wb(m,a,null,!0);m=new Wb(m,null,f,!1);f.o=m;u.push(f);e.push(m);f=new Wb(b,a,null,!1);m=new Wb(b,null,f,!0);f.o=m;u.push(f);e.push(m)}}),e.sort(f),ue(u),ue(e),u.length){a=0;f=m;for(m=e.length;m>a;++a)e[a].e=f=!f;for(var h,g=u[0];;){for(var k=g,l=!0;k.v;)if((k=k.n)===g)return;f=k.z;d.lineStart();
do{if(k.v=k.o.v=!0,k.e){if(l)for(a=0,m=f.length;m>a;++a)d.point((h=f[a])[0],h[1]);else b(k.x,k.n.x,1,d);k=k.n}else{if(l)for(f=k.p.z,a=f.length-1;0<=a;--a)d.point((h=f[a])[0],h[1]);else b(k.x,k.p.x,-1,d);k=k.p}k=k.o;f=k.z;l=!l}while(!k.v);d.lineEnd()}}}function ue(a){if(f=a.length){for(var f,m,b=0,d=a[0];++b<f;)d.n=m=a[b],m.p=d,d=m;d.n=m=a[0];m.p=d}}function Wb(a,f,m,b){this.x=a;this.z=f;this.o=m;this.e=b;this.v=!1;this.n=this.p=null}function ve(a,f,m,b){return function(d,u){function e(f,m){var b=
d(f,m);a(f=b[0],m=b[1])&&u.point(f,m)}function h(a,f){var m=d(a,f);fa.point(m[0],m[1])}function g(){G.point=h;fa.lineStart()}function k(){G.point=e;fa.lineEnd()}function l(a,f){s.push([a,f]);var m=d(a,f);H.point(m[0],m[1])}function n(){H.lineStart();s=[]}function q(){l(s[0][0],s[0][1]);H.lineEnd();var a;a=H.clean();var f=K.buffer(),m=f.length;if(s.pop(),r.push(s),s=null,m)if(1&a){a=f[0];var b,m=a.length-1,f=-1;if(0<m){x||(u.polygonStart(),x=!0);for(u.lineStart();++f<m;)u.point((b=a[f])[0],b[1]);u.lineEnd()}}else 1<
m&&2&a&&f.push(f.pop().concat(f.shift())),p.push(f.filter(Sg))}var p,r,s,fa=f(u),R=d.invert(b[0],b[1]),G={point:e,lineStart:g,lineEnd:k,polygonStart:function(){G.point=l;G.lineStart=n;G.lineEnd=q;p=[];r=[]},polygonEnd:function(){G.point=e;G.lineStart=g;G.lineEnd=k;p=t.merge(p);var a,f=R;a=r;var b=f[0],d=f[1],D=[Math.sin(b),-Math.cos(b),0],h=0,B=0;Sa.reset();for(var V=0,l=a.length;l>V;++V){var n=a[V],q=n.length;if(q)for(var Q=n[0],ma=Q[0],f=Q[1]/2+F/4,Pa=Math.sin(f),s=Math.cos(f),K=1;;){K===q&&(K=
0);var f=n[K],Qc=f[0],fa=f[1]/2+F/4,H=Math.sin(fa),fa=Math.cos(fa),v=Qc-ma,w=0<=v?1:-1,y=w*v,z=y>F,Pa=Pa*H;if(Sa.add(Math.atan2(Pa*w*Math.sin(y),s*fa+Pa*Math.cos(y))),h+=z?v+w*ha:v,z^ma>=b^Qc>=b)Q=db(Ta(Q),Ta(f)),Tb(Q),ma=db(D,Q),Tb(ma),ma=(z^0<=v?-1:1)*ab(ma[2]),(d>ma||d===ma&&(Q[0]||Q[1]))&&(B+=z^0<=v?1:-1);if(!K++)break;ma=Qc;Pa=H;s=fa;Q=f}}a=(-C>h||C>h&&0>Sa)^1&B;p.length?(x||(u.polygonStart(),x=!0),te(p,Tg,a,m,u)):a&&(x||(u.polygonStart(),x=!0),u.lineStart(),m(null,null,1,u),u.lineEnd());x&&
(u.polygonEnd(),x=!1);p=r=null},sphere:function(){u.polygonStart();u.lineStart();m(null,null,1,u);u.lineEnd();u.polygonEnd()}},K=we(),H=f(K),x=!1;return G}}function Sg(a){return 1<a.length}function we(){var a,f=[];return{lineStart:function(){f.push(a=[])},point:function(f,b){a.push([f,b])},lineEnd:v,buffer:function(){var m=f;return f=[],a=null,m},rejoin:function(){1<f.length&&f.push(f.pop().concat(f.shift()))}}}function Tg(a,f){return(0>(a=a.x)[0]?a[1]-Y-C:Y-a[1])-(0>(f=f.x)[0]?f[1]-Y-C:Y-f[1])}function Ug(a){function f(a,
f){return Math.cos(a)*Math.cos(f)>d}function m(a,f,m){var b=Ta(a),u=Ta(f),e=[1,0,0],u=db(b,u),D=Rb(u,u),b=u[0],h=D-b*b;if(!h)return!m&&a;D=d*D/h;h=-d*b/h;b=db(e,u);e=Sb(e,D);u=Sb(u,h);Tc(e,u);u=Rb(e,b);D=Rb(b,b);h=u*u-D*(Rb(e,e)-1);if(!(0>h)){var g=Math.sqrt(h),h=Sb(b,(-u-g)/D);if(Tc(h,e),h=Ub(h),!m)return h;var V;m=a[0];var k=f[0];a=a[1];f=f[1];m>k&&(V=m,m=k,k=V);var U=k-m,l=I(U-F)<C,n=l||C>U;if(!l&&a>f&&(V=a,a=f,f=V),n?l?0<a+f^h[1]<(I(h[0]-m)<C?a:f):a<=h[1]&&h[1]<=f:U>F^(m<=h[0]&&h[0]<=k))return V=
Sb(b,(-u+g)/D),Tc(V,e),[h,Ub(V)]}}function b(f,m){var d=u?a:F-a,e=0;return-d>f?e|=1:f>d&&(e|=2),-d>m?e|=4:m>d&&(e|=8),e}var d=Math.cos(a),u=0<d,e=I(d)>C,h=Vc(a,6*E);return ve(f,function(a){var d,h,B,g,V;return{lineStart:function(){g=B=!1;V=1},point:function(k,l){var n,q=[k,l],p=f(k,l),t=u?p?0:b(k,l):p?b(k+(0>k?F:-F),l):0;if(!d&&(g=B=p)&&a.lineStart(),p!==B&&(n=m(d,q),(Vb(d,n)||Vb(q,n))&&(q[0]+=C,q[1]+=C,p=f(q[0],q[1]))),p!==B)V=0,p?(a.lineStart(),n=m(q,d),a.point(n[0],n[1])):(n=m(d,q),a.point(n[0],
n[1]),a.lineEnd()),d=n;else if(e&&d&&u^p){var r;t&h||!(r=m(q,d,!0))||(V=0,u?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!p||d&&Vb(d,q)||a.point(q[0],q[1]);d=q;B=p;h=t},lineEnd:function(){B&&a.lineEnd();d=null},clean:function(){return V|(g&&B)<<1}}},h,u?[0,-a]:[-F,a-F])}function xe(a,f,m,b){return function(d){var u,e=d.a,h=d.b,g=e.x,e=e.y,k=0,l=1,n=h.x-g,h=h.y-e;if(u=a-g,n||!(0<u)){if(u/=
n,0>n){if(k>u)return;l>u&&(l=u)}else if(0<n){if(u>l)return;u>k&&(k=u)}if(u=m-g,n||!(0>u)){if(u/=n,0>n){if(u>l)return;u>k&&(k=u)}else if(0<n){if(k>u)return;l>u&&(l=u)}if(u=f-e,h||!(0<u)){if(u/=h,0>h){if(k>u)return;l>u&&(l=u)}else if(0<h){if(u>l)return;u>k&&(k=u)}if(u=b-e,h||!(0>u)){if(u/=h,0>h){if(u>l)return;u>k&&(k=u)}else if(0<h){if(k>u)return;l>u&&(l=u)}return 0<k&&(d.a={x:g+k*n,y:e+k*h}),1>l&&(d.b={x:g+l*n,y:e+l*h}),d}}}}}}function ye(a,f,m,b){function d(b,u){return I(b[0]-a)<C?0<u?0:3:I(b[0]-
m)<C?0<u?2:1:I(b[1]-f)<C?0<u?1:0:0<u?3:2}function u(a,f){return e(a.x,f.x)}function e(a,f){var m=d(a,1),b=d(f,1);return m!==b?m-b:0===m?f[1]-a[1]:1===m?a[0]-f[0]:2===m?a[1]-f[1]:f[0]-a[0]}return function(h){function g(u,h,k,V){var l=0,$a=0;if(null==u||(l=d(u,k))!==($a=d(h,k))||0>e(u,h)^0<k){do V.point(0===l||3===l?a:m,1<l?b:f);while((l=(l+k+4)%4)!==$a)}else V.point(h[0],h[1])}function k(d,u){d>=a&&m>=d&&u>=f&&b>=u&&h.point(d,u)}function l(d,u){d=Math.max(-Xb,Math.min(Xb,d));u=Math.max(-Xb,Math.min(Xb,
u));var e=d>=a&&m>=d&&u>=f&&b>=u;if(q&&p.push([d,u]),H)r=d,s=u,x=e,H=!1,e&&(h.lineStart(),h.point(d,u));else if(e&&K)h.point(d,u);else{var B={a:{x:R,y:G},b:{x:d,y:u}};y(B)?(K||(h.lineStart(),h.point(B.a.x,B.a.y)),h.point(B.b.x,B.b.y),e||h.lineEnd(),v=!1):e&&(h.lineStart(),h.point(d,u),v=!1)}R=d;G=u;K=e}var n,q,p,r,s,x,R,G,K,H,v,w=h,Ha=we(),y=xe(a,f,m,b),z={point:k,lineStart:function(){z.point=l;q&&q.push(p=[]);H=!0;K=!1;R=G=0/0},lineEnd:function(){n&&(l(r,s),x&&K&&Ha.rejoin(),n.push(Ha.buffer()));
z.point=k;K&&h.lineEnd()},polygonStart:function(){h=Ha;n=[];q=[];v=!0},polygonEnd:function(){h=w;n=t.merge(n);var f;f=[a,b];for(var m=0,d=q.length,e=f[1],B=0;d>B;++B)for(var k,U=1,l=q[B],da=l.length,Q=l[0];da>U;++U)k=l[U],Q[1]<=e?k[1]>e&&0<Fc(Q,k,f)&&++m:k[1]<=e&&0>Fc(Q,k,f)&&--m,Q=k;f=0!==m;m=v&&f;d=n.length;(m||d)&&(h.polygonStart(),m&&(h.lineStart(),g(null,null,1,h),h.lineEnd()),d&&te(n,u,f,g,h),h.polygonEnd());n=q=p=null}};return z}}function ze(a,f){function m(m,b){return m=a(m,b),f(m[0],m[1])}
return a.invert&&f.invert&&(m.invert=function(m,b){return m=f.invert(m,b),m&&a.invert(m[0],m[1])}),m}function Wc(a){var f=0,m=F/3,b=Xc(a);a=b(f,m);return a.parallels=function(a){return arguments.length?b(f=a[0]*F/180,m=a[1]*F/180):[f/F*180,m/F*180]},a}function Ae(a,f){function m(a,f){var m=Math.sqrt(u-2*d*Math.sin(f))/d;return[m*Math.sin(a*=d),e-m*Math.cos(a)]}var b=Math.sin(a),d=(b+Math.sin(f))/2,u=1+b*(2*d-b),e=Math.sqrt(u)/d;return m.invert=function(a,f){var m=e-f;return[Math.atan2(a,m)/d,ab((u-
(a*a+m*m)*d*d)/(2*d))]},m}function Vg(){function a(a,f){Yb+=d*a-b*f;b=a;d=f}var f,m,b,d;Ka.point=function(u,e){Ka.point=a;f=b=u;m=d=e};Ka.lineEnd=function(){a(f,m)}}function Wg(){function a(a,f){e.push("M",a,",",f,u)}function f(a,f){e.push("M",a,",",f);h.point=m}function m(a,f){e.push("L",a,",",f)}function b(){h.point=a}function d(){e.push("Z")}var u=Be(4.5),e=[],h={point:a,lineStart:function(){h.point=f},lineEnd:b,polygonStart:function(){h.lineEnd=d},polygonEnd:function(){h.lineEnd=b;h.point=a},
pointRadius:function(a){return u=Be(a),h},result:function(){if(e.length){var a=e.join("");return e=[],a}}};return h}function Be(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Ua(a,f){Ca+=a;Da+=f;++ua}function Ce(){function a(a,b){var d=a-f,e=b-m,d=Math.sqrt(d*d+e*e);ja+=d*(f+a)/2;ka+=d*(m+b)/2;ea+=d;Ua(f=a,m=b)}var f,m;qa.point=function(b,d){qa.point=a;Ua(f=b,m=d)}}function De(){qa.point=Ua}function Xg(){function a(a,f){var m=a-b,e=f-d,m=Math.sqrt(m*m+e*e);
ja+=m*(b+a)/2;ka+=m*(d+f)/2;ea+=m;m=d*a-b*f;Ia+=m*(b+a);Ja+=m*(d+f);va+=3*m;Ua(b=a,d=f)}var f,m,b,d;qa.point=function(u,e){qa.point=a;Ua(f=b=u,m=d=e)};qa.lineEnd=function(){a(f,m)}}function Yg(a){function f(f,m){a.moveTo(f,m);a.arc(f,m,e,0,ha)}function m(f,m){a.moveTo(f,m);h.point=b}function b(f,m){a.lineTo(f,m)}function d(){h.point=f}function u(){a.closePath()}var e=4.5,h={point:f,lineStart:function(){h.point=m},lineEnd:d,polygonStart:function(){h.lineEnd=u},polygonEnd:function(){h.lineEnd=d;h.point=
f},pointRadius:function(a){return e=a,h},result:v};return h}function Ee(a){function f(a){return(h?b:m)(a)}function m(f){return Fe(f,function(m,b){m=a(m,b);f.point(m[0],m[1])})}function b(f){function m(b,d){b=a(b,d);f.point(b[0],b[1])}function u(){x=0/0;N.point=e;f.lineStart()}function e(m,b){var u=Ta([m,b]),D=a(m,b);d(x,v,s,w,y,z,x=D[0],v=D[1],s=m,w=u[0],y=u[1],z=u[2],h,f);f.point(x,v)}function D(){N.point=m;f.lineEnd()}function g(){u();N.point=k;N.lineEnd=l}function k(a,f){e(U=a,f);n=x;q=v;p=w;t=
y;r=z;N.point=e}function l(){d(x,v,s,w,y,z,n,q,U,p,t,r,h,f);N.lineEnd=D;D()}var U,n,q,p,t,r,s,x,v,w,y,z,N={point:m,lineStart:u,lineEnd:D,polygonStart:function(){f.polygonStart();N.lineStart=g},polygonEnd:function(){f.polygonEnd();N.lineStart=u}};return N}function d(f,m,b,h,D,g,k,V,l,n,q,p,t,r){var s=k-f,x=V-m,v=s*s+x*x;if(v>4*u&&t--){var w=h+n,y=D+q,z=g+p,N=Math.sqrt(w*w+y*y+z*z),cb=Math.asin(z/=N),L=I(I(z)-1)<C||I(b-l)<C?(b+l)/2:Math.atan2(y,w),A=a(L,cb),cb=A[0],A=A[1],M=cb-f,E=A-m,F=x*M-s*E;(F*
F/v>u||.3<I((s*M+x*E)/v-.5)||e>h*n+D*q+g*p)&&(d(f,m,b,h,D,g,cb,A,L,w/=N,y/=N,z,t,r),r.point(cb,A),d(cb,A,L,w,y,z,k,V,l,n,q,p,t,r))}}var u=.5,e=Math.cos(30*E),h=16;return f.precision=function(a){return arguments.length?(h=0<(u=a*a)&&16,f):Math.sqrt(u)},f}function Zg(a){var f=Ee(function(f,b){return a([f*P,b*P])});return function(a){return Ge(f(a))}}function He(a){this.stream=a}function Fe(a,f){return{point:f,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},
polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function La(a){return Xc(function(){return a})()}function Xc(a){function f(a){return a=h(a[0]*E,a[1]*E),[a[0]*q+g,k-a[1]*q]}function m(a){return a=h.invert((a[0]-g)/q,(k-a[1])/q),a&&[a[0]*P,a[1]*P]}function b(){h=ze(e=Yc(R,G,K),u);var a=u(s,x);return g=p-a[0]*q,k=r+a[1]*q,d()}function d(){return l&&(l.valid=!1,l=null),f}var u,e,h,g,k,l,n=Ee(function(a,f){return a=u(a,f),[a[0]*q+g,k-a[1]*q]}),q=150,p=480,r=250,s=0,x=0,
R=0,G=0,K=0,v=Ie,w=X,ta=null,y=null;return f.stream=function(a){return l&&(l.valid=!1),l=Ge(v(e,n(w(a)))),l.valid=!0,l},f.clipAngle=function(a){return arguments.length?(v=null==a?(ta=a,Ie):Ug((ta=+a)*E),d()):ta},f.clipExtent=function(a){return arguments.length?(y=a,w=a?ye(a[0][0],a[0][1],a[1][0],a[1][1]):X,d()):y},f.scale=function(a){return arguments.length?(q=+a,b()):q},f.translate=function(a){return arguments.length?(p=+a[0],r=+a[1],b()):[p,r]},f.center=function(a){return arguments.length?(s=a[0]%
360*E,x=a[1]%360*E,b()):[s*P,x*P]},f.rotate=function(a){return arguments.length?(R=a[0]%360*E,G=a[1]%360*E,K=2<a.length?a[2]%360*E:0,b()):[R*P,G*P,K*P]},t.rebind(f,n,"precision"),function(){return u=a.apply(this,arguments),f.invert=u.invert&&m,b()}}function Ge(a){return Fe(a,function(f,m){a.point(f*E,m*E)})}function rb(a,f){return[a,f]}function Je(a,f){return[a>F?a-ha:-F>a?a+ha:a,f]}function Yc(a,f,m){return a?f||m?ze(Ke(a),Le(f,m)):Ke(a):f||m?Le(f,m):Je}function Me(a){return function(f,m){return f+=
a,[f>F?f-ha:-F>f?f+ha:f,m]}}function Ke(a){var f=Me(a);return f.invert=Me(-a),f}function Le(a,f){function m(a,f){var m=Math.cos(f),h=Math.cos(a)*m,m=Math.sin(a)*m,g=Math.sin(f),k=g*b+h*d;return[Math.atan2(m*u-k*e,h*b-g*d),ab(k*u+m*e)]}var b=Math.cos(a),d=Math.sin(a),u=Math.cos(f),e=Math.sin(f);return m.invert=function(a,f){var m=Math.cos(f),h=Math.cos(a)*m,m=Math.sin(a)*m,g=Math.sin(f),k=g*u-m*e;return[Math.atan2(m*u+g*e,h*b+k*d),ab(k*b-h*d)]},m}function Vc(a,f){var m=Math.cos(a),b=Math.sin(a);return function(d,
e,h,g){var k=h*f;null!=d?(d=Ne(m,d),e=Ne(m,e),(0<h?e>d:d>e)&&(d+=h*ha)):(d=a+h*ha,e=a-.5*k);for(var l;0<h?d>e:e>d;d-=k)g.point((l=Ub([m,-b*Math.cos(d),-b*Math.sin(d)]))[0],l[1])}}function Ne(a,f){var m=Ta(f);m[0]-=a;Tb(m);var b=Wd(-m[1]);return((0>-m[2]?-b:b)+2*Math.PI-C)%(2*Math.PI)}function Oe(a,f,m){var b=t.range(a,f-C,m).concat(f);return function(a){return b.map(function(f){return[a,f]})}}function Pe(a,f,m){var b=t.range(a,f-C,m).concat(f);return function(a){return b.map(function(f){return[f,
a]})}}function Zc(a){return a.source}function $c(a){return a.target}function $g(a,f,m,b){var d=Math.cos(f),e=Math.sin(f),h=Math.cos(b),g=Math.sin(b),k=d*Math.cos(a),l=d*Math.sin(a),n=h*Math.cos(m),q=h*Math.sin(m),p=2*Math.asin(Math.sqrt(Yd(b-f)+d*h*Yd(m-a))),r=1/Math.sin(p);m=p?function(a){var f=Math.sin(a*=p)*r,m=Math.sin(p-a)*r;a=m*k+f*n;var b=m*l+f*q,f=m*e+f*g;return[Math.atan2(b,a)*P,Math.atan2(f,Math.sqrt(a*a+b*b))*P]}:function(){return[a*P,f*P]};return m.distance=p,m}function sb(a,f){function m(f,
m){var b=Math.cos(f),d=Math.cos(m),b=a(b*d);return[b*d*Math.sin(f),b*Math.sin(m)]}return m.invert=function(a,m){var b=Math.sqrt(a*a+m*m),d=f(b),e=Math.sin(d),d=Math.cos(d);return[Math.atan2(a*e,b*d),Math.asin(b&&m*e/b)]},m}function Qe(a,f){function m(a,f){0<e?-Y+C>f&&(f=-Y+C):f>Y-C&&(f=Y-C);var m=e/Math.pow(Math.tan(F/4+f/2),d);return[m*Math.sin(d*a),e-m*Math.cos(d*a)]}var b=Math.cos(a),d=a===f?Math.sin(a):Math.log(b/Math.cos(f))/Math.log(Math.tan(F/4+f/2)/Math.tan(F/4+a/2)),e=b*Math.pow(Math.tan(F/
4+a/2),d)/d;return d?(m.invert=function(a,f){var m=e-f,b=(0<d?1:0>d?-1:0)*Math.sqrt(a*a+m*m);return[Math.atan2(a,m)/d,2*Math.atan(Math.pow(e/b,1/d))-Y]},m):Zb}function Re(a,f){function m(a,f){var m=e-f;return[m*Math.sin(d*a),e-m*Math.cos(d*a)]}var b=Math.cos(a),d=a===f?Math.sin(a):(b-Math.cos(f))/(f-a),e=b/d+a;return I(d)<C?rb:(m.invert=function(a,f){var m=e-f;return[Math.atan2(a,m)/d,e-(0<d?1:0>d?-1:0)*Math.sqrt(a*a+m*m)]},m)}function Zb(a,f){return[a,Math.log(Math.tan(F/4+f/2))]}function Se(a){var f,
m=La(a),b=m.scale,d=m.translate,e=m.clipExtent;return m.scale=function(){var a=b.apply(m,arguments);return a===m?f?m.clipExtent(null):m:a},m.translate=function(){var a=d.apply(m,arguments);return a===m?f?m.clipExtent(null):m:a},m.clipExtent=function(a){var h=e.apply(m,arguments);if(h===m){if(f=null==a){var g=F*b(),k=d();e([[k[0]-g,k[1]-g],[k[0]+g,k[1]+g]])}}else f&&(h=null);return h},m.clipExtent(null)}function ad(a,f){return[Math.log(Math.tan(F/4+f/2)),-a]}function gb(a){return a[0]}function tb(a){return a[1]}
function Te(a){for(var f=a.length,m=[0,1],b=2,d=2;f>d;d++){for(;1<b&&0>=Fc(a[m[b-2]],a[m[b-1]],a[d]);)--b;m[b++]=d}return m.slice(0,b)}function ah(a,f){return a[0]-f[0]||a[1]-f[1]}function bd(a,f,m){return(m[0]-f[0])*(a[1]-f[1])<(m[1]-f[1])*(a[0]-f[0])}function Ue(a,f,m,b){var d=a[0],e=m[0],h=f[0]-d,g=b[0]-e;a=a[1];m=m[1];f=f[1]-a;b=b[1]-m;e=(g*(a-m)-b*(d-e))/(b*h-g*f);return[d+e*h,a+e*f]}function Ve(a){var f=a[0];a=a[a.length-1];return!(f[0]-a[0]||f[1]-a[1])}function bh(){$b(this);this.edge=this.site=
this.circle=null}function We(a){var f=Xe.pop()||new bh;return f.site=a,f}function cd(a){hb(a);ib.remove(a);Xe.push(a);$b(a)}function Ye(a,f){var m=a.site,b=m.x,d=m.y,e=d-f;if(!e)return b;var h=a.P;if(!h)return-1/0;var m=h.site,h=m.x,m=m.y,g=m-f;if(!g)return h;var k=h-b,l=1/e-1/g,n=k/g;return l?(-n+Math.sqrt(n*n-2*l*(k*k/(-2*g)-m+g/2+d-e/2)))/l+b:(b+h)/2}function Ze(a){this.site=a;this.edges=[]}function $e(a,f){return f.angle-a.angle}function ch(){$b(this);this.x=this.y=this.arc=this.site=this.cy=
null}function jb(a){var f=a.P,m=a.N;if(f&&m){var b=f.site,f=a.site,d=m.site;if(b!==d){var m=f.x,e=f.y,h=b.x-m,g=b.y-e,b=d.x-m,d=d.y-e,k=2*(h*d-g*b);if(!(k>=-dd)){var l=h*h+g*g,n=b*b+d*d,g=(d*l-g*n)/k,h=(h*n-b*l)/k,d=h+e,e=af.pop()||new ch;e.arc=a;e.site=f;e.x=g+m;e.y=d+Math.sqrt(g*g+h*h);e.cy=d;a.circle=e;a=null;for(f=ub._;f;)if(e.y<f.y||e.y===f.y&&e.x<=f.x){if(!f.L){a=f.P;break}f=f.L}else{if(!f.R){a=f;break}f=f.R}ub.insert(a,e);a||(ed=e)}}}}function hb(a){var f=a.circle;f&&(f.P||(ed=f.N),ub.remove(f),
af.push(f),$b(f),a.circle=null)}function dh(a,f){var m=a.b;if(m)return!0;var b,d,e=a.a,m=f[0][0],h=f[1][0],g=f[0][1],k=f[1][1],l=a.l,n=a.r,q=l.x,l=l.y,p=n.x,n=n.y;d=(q+p)/2;if(n===l){if(m>d||d>=h)return;if(q>p){if(e){if(e.y>=k)return}else e={x:d,y:g};m={x:d,y:k}}else{if(e){if(e.y<g)return}else e={x:d,y:k};m={x:d,y:g}}}else if(b=(q-p)/(n-l),d=(l+n)/2-b*d,-1>b||1<b)if(q>p){if(e){if(e.y>=k)return}else e={x:(g-d)/b,y:g};m={x:(k-d)/b,y:k}}else{if(e){if(e.y<g)return}else e={x:(k-d)/b,y:k};m={x:(g-d)/b,
y:g}}else if(n>l){if(e){if(e.x>=h)return}else e={x:m,y:b*m+d};m={x:h,y:b*h+d}}else{if(e){if(e.x<m)return}else e={x:h,y:b*h+d};m={x:m,y:b*m+d}}return a.a=e,a.b=m,!0}function bf(a,f){this.l=a;this.r=f;this.a=this.b=null}function vb(a,f,m,b){var d=new bf(a,f);return kb.push(d),m&&ac(d,a,f,m),b&&ac(d,f,a,b),Va[a.i].edges.push(new bc(d,a,f)),Va[f.i].edges.push(new bc(d,f,a)),d}function eh(a,f,m){a=new bf(a,null);return a.a=f,a.b=m,kb.push(a),a}function ac(a,f,m,b){a.a||a.b?a.l===m?a.b=b:a.a=b:(a.a=b,a.l=
f,a.r=m)}function bc(a,f,m){var b=a.a,d=a.b;this.edge=a;this.site=f;this.angle=m?Math.atan2(m.y-f.y,m.x-f.x):a.l===f?Math.atan2(d.x-b.x,b.y-d.y):Math.atan2(b.x-d.x,d.y-b.y)}function fd(){this._=null}function $b(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function wb(a,f){var m=f.R,b=f.U;b?b.L===f?b.L=m:b.R=m:a._=m;m.U=b;f.U=m;f.R=m.L;f.R&&(f.R.U=f);m.L=f}function xb(a,f){var m=f.L,b=f.U;b?b.L===f?b.L=m:b.R=m:a._=m;m.U=b;f.U=m;f.L=m.R;f.L&&(f.L.U=f);m.R=f}function cf(a){for(;a.L;)a=a.L;return a}function gd(a,
f){var m,b,d,e=a.sort(fh).pop();kb=[];Va=Array(a.length);ib=new fd;for(ub=new fd;;)if(d=ed,e&&(!d||e.y<d.y||e.y===d.y&&e.x<d.x)){if(e.x!==m||e.y!==b){Va[e.i]=new Ze(e);m=e;for(var h=b=void 0,g=void 0,k=void 0,l=m.x,n=m.y,q=ib._;q;)if(g=Ye(q,n)-l,g>C)q=q.L;else{var p;var r=q;p=n;var t=r.N;t?p=Ye(t,p):(r=r.site,p=r.y===p?r.x:1/0);if(k=l-p,!(k>C)){g>-C?(b=q.P,h=q):k>-C?(b=q,h=q.N):b=h=q;break}if(!q.R){b=q;break}q=q.R}g=We(m);if(ib.insert(b,g),b||h)if(b===h)hb(b),h=We(b.site),ib.insert(g,h),g.edge=h.edge=
vb(b.site,g.site),jb(b),jb(h);else if(h){hb(b);hb(h);k=b.site;n=k.x;q=k.y;p=m.x-n;var r=m.y-q,l=h.site,t=l.x-n,s=l.y-q,x=2*(p*s-r*t),v=p*p+r*r,G=t*t+s*s,n={x:(s*v-r*G)/x+n,y:(p*G-t*v)/x+q};ac(h.edge,k,l,n);g.edge=vb(k,m,null,n);h.edge=vb(m,l,null,n);jb(b);jb(h)}else g.edge=vb(b.site,g.site);m=e.x;b=e.y}e=a.pop()}else{if(!d)break;l=d.arc;h=l.circle;k=h.x;n=h.cy;h={x:k,y:n};p=l.P;q=l.N;g=[l];cd(l);for(l=p;l.circle&&I(k-l.circle.x)<C&&I(n-l.circle.cy)<C;)p=l.P,g.unshift(l),cd(l),l=p;g.unshift(l);hb(l);
for(p=q;p.circle&&I(k-p.circle.x)<C&&I(n-p.circle.cy)<C;)q=p.N,g.push(p),cd(p),p=q;g.push(p);hb(p);k=void 0;n=g.length;for(k=1;n>k;++k)p=g[k],l=g[k-1],ac(p.edge,l.site,p.site,h);l=g[0];p=g[n-1];p.edge=vb(l.site,p.site,null,h);jb(l);jb(p)}if(f){e=kb;m=xe(f[0][0],f[0][1],f[1][0],f[1][1]);for(b=e.length;b--;)d=e[b],(!dh(d,f)||!m(d)||I(d.a.x-d.b.x)<C&&I(d.a.y-d.b.y)<C)&&(d.a=d.b=null,e.splice(b,1));var K,l=f[0][0],n=f[1][0],q=f[0][1];p=f[1][1];r=Va;for(t=r.length;t--;)if(K=r[t],K&&K.prepare())for(h=K.edges,
g=h.length,b=0;g>b;)k=h[b].end(),e=k.x,m=k.y,s=h[++b%g].start(),d=s.x,s=s.y,(I(e-d)>C||I(m-s)>C)&&(h.splice(b,0,new bc(eh(K.site,k,I(e-l)<C&&p-m>C?{x:l,y:I(d-l)<C?s:p}:I(m-p)<C&&n-e>C?{x:I(s-p)<C?d:n,y:p}:I(e-n)<C&&m-q>C?{x:n,y:I(d-n)<C?s:q}:I(m-q)<C&&e-l>C?{x:I(s-q)<C?d:l,y:q}:null),K.site,null)),++g)}K={cells:Va,edges:kb};return ib=ub=kb=Va=null,K}function fh(a,f){return f.y-a.y||f.x-a.x}function gh(a){return a.x}function hh(a){return a.y}function df(){return{leaf:!0,nodes:[],point:null,x:null,
y:null}}function yb(a,f,m,b,d,e){if(!a(f,m,b,d,e)){var h=.5*(m+d),g=.5*(b+e);f=f.nodes;f[0]&&yb(a,f[0],m,b,h,g);f[1]&&yb(a,f[1],h,b,d,g);f[2]&&yb(a,f[2],m,g,h,e);f[3]&&yb(a,f[3],h,g,d,e)}}function hd(a,f){a=t.rgb(a);f=t.rgb(f);var m=a.r,b=a.g,d=a.b,e=f.r-m,h=f.g-b,g=f.b-d;return function(a){return"#"+bb(Math.round(m+e*a))+bb(Math.round(b+h*a))+bb(Math.round(d+g*a))}}function ef(a,f){var m,b={},d={};for(m in a)m in f?b[m]=Wa(a[m],f[m]):d[m]=a[m];for(m in f)m in a||(d[m]=f[m]);return function(a){for(m in b)d[m]=
b[m](a);return d}}function Ea(a,f){return f-=a=+a,function(m){return a+f*m}}function ff(a,f){var m,b,d,e=id.lastIndex=jd.lastIndex=0,h=-1,g=[],k=[];a+="";for(f+="";(m=id.exec(a))&&(b=jd.exec(f));)(d=b.index)>e&&(d=f.slice(e,d),g[h]?g[h]+=d:g[++h]=d),(m=m[0])===(b=b[0])?g[h]?g[h]+=b:g[++h]=b:(g[++h]=null,k.push({i:h,x:Ea(m,b)})),e=jd.lastIndex;return e<f.length&&(d=f.slice(e),g[h]?g[h]+=d:g[++h]=d),2>g.length?k[0]?(f=k[0].x,function(a){return f(a)+""}):function(){return f}:(f=k.length,function(a){for(var m,
b=0;f>b;++b)g[(m=k[b]).i]=m.x(a);return g.join("")})}function Wa(a,f){for(var m,b=t.interpolators.length;0<=--b&&!(m=t.interpolators[b](a,f)););return m}function cc(a,f){var m,b=[],d=[],e=a.length,h=f.length,g=Math.min(a.length,f.length);for(m=0;g>m;++m)b.push(Wa(a[m],f[m]));for(;e>m;++m)d[m]=a[m];for(;h>m;++m)d[m]=f[m];return function(a){for(m=0;g>m;++m)d[m]=b[m](a);return d}}function ih(a){return function(f){return 0>=f?0:1<=f?1:a(f)}}function gf(a){return function(f){return 1-a(1-f)}}function hf(a){return function(f){return.5*
(.5>f?a(2*f):2-a(2-2*f))}}function jh(a){return a*a}function kh(a){return a*a*a}function lh(a){if(0>=a)return 0;if(1<=a)return 1;var f=a*a,m=f*a;return 4*(.5>a?m:3*(a-f)+m-.75)}function mh(a){return 1-Math.cos(a*Y)}function nh(a){return Math.pow(2,10*(a-1))}function oh(a){return 1-Math.sqrt(1-a*a)}function ph(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function jf(a,f){return f-=a,function(m){return Math.round(a+
f*m)}}function kf(a){var f=[a.a,a.b],m=[a.c,a.d],b=lf(f),d=f[0]*m[0]+f[1]*m[1],e;e=-d;e=(m[0]+=e*f[0],m[1]+=e*f[1],m);e=lf(e)||0;f[0]*m[1]<m[0]*f[1]&&(f[0]*=-1,f[1]*=-1,b*=-1,d*=-1);this.rotate=(b?Math.atan2(f[1],f[0]):Math.atan2(-m[0],m[1]))*P;this.translate=[a.e,a.f];this.scale=[b,e];this.skew=e?Math.atan2(d,e)*P:0}function lf(a){var f=Math.sqrt(a[0]*a[0]+a[1]*a[1]);return f&&(a[0]/=f,a[1]/=f),f}function mf(a,f){var m,b=[],d=[],e=t.transform(a),h=t.transform(f),g=e.translate,k=h.translate,l=e.rotate,
n=h.rotate,q=e.skew,p=h.skew,e=e.scale,h=h.scale;return g[0]!=k[0]||g[1]!=k[1]?(b.push("translate(",null,",",null,")"),d.push({i:1,x:Ea(g[0],k[0])},{i:3,x:Ea(g[1],k[1])})):k[0]||k[1]?b.push("translate("+k+")"):b.push(""),l!=n?(180<l-n?n+=360:180<n-l&&(l+=360),d.push({i:b.push(b.pop()+"rotate(",null,")")-2,x:Ea(l,n)})):n&&b.push(b.pop()+"rotate("+n+")"),q!=p?d.push({i:b.push(b.pop()+"skewX(",null,")")-2,x:Ea(q,p)}):p&&b.push(b.pop()+"skewX("+p+")"),e[0]!=h[0]||e[1]!=h[1]?(m=b.push(b.pop()+"scale(",
null,",",null,")"),d.push({i:m-4,x:Ea(e[0],h[0])},{i:m-2,x:Ea(e[1],h[1])})):(1!=h[0]||1!=h[1])&&b.push(b.pop()+"scale("+h+")"),m=d.length,function(a){for(var f,e=-1;++e<m;)b[(f=d[e]).i]=f.x(a);return b.join("")}}function qh(a,f){return f=f-(a=+a)?1/(f-a):0,function(b){return(b-a)*f}}function rh(a,f){return f=f-(a=+a)?1/(f-a):0,function(b){return Math.max(0,Math.min(1,(b-a)*f))}}function sh(a){var f=a.source;a=a.target;var b;var d=a;if(f===d)b=f;else{b=nf(f);for(var d=nf(d),e=b.pop(),h=d.pop(),g=null;e===
h;)g=e,e=b.pop(),h=d.pop();b=g}for(d=[f];f!==b;)f=f.parent,d.push(f);for(f=d.length;a!==b;)d.splice(f,0,a),a=a.parent;return d}function nf(a){for(var f=[],b=a.parent;null!=b;)f.push(a),a=b,b=b.parent;return f.push(a),f}function th(a){a.fixed|=2}function uh(a){a.fixed&=-7}function vh(a){a.fixed|=4;a.px=a.x;a.py=a.y}function wh(a){a.fixed&=-5}function of(a,f,b){var d=0,e=0;if(a.charge=0,!a.leaf)for(var h,g=a.nodes,k=g.length,l=-1;++l<k;)h=g[l],null!=h&&(of(h,f,b),a.charge+=h.charge,d+=h.charge*h.cx,
e+=h.charge*h.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5),f*=b[a.point.index],a.charge+=a.pointCharge=f,d+=f*a.point.x,e+=f*a.point.y);a.cx=d/a.charge;a.cy=e/a.charge}function zb(a,f){return t.rebind(a,f,"sort","children","value"),a.nodes=a,a.links=xh,a}function Ab(a,f){for(var b=[a];null!=(a=b.pop());)if(f(a),(e=a.children)&&(d=e.length))for(var d,e;0<=--d;)b.push(e[d])}function wa(a,f){for(var b=[a],d=[];null!=(a=b.pop());)if(d.push(a),(h=a.children)&&(e=h.length))for(var e,
h,g=-1;++g<e;)b.push(h[g]);for(;null!=(a=d.pop());)f(a)}function yh(a){return a.children}function zh(a){return a.value}function Ah(a,f){return f.value-a.value}function xh(a){return t.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function Bh(a){return a.x}function Ch(a){return a.y}function Dh(a,f,b){a.y0=f;a.y=b}function kd(a){return t.range(a.length)}function ld(a){var f=-1;a=a[0].length;for(var b=[];++f<a;)b[f]=0;return b}function Eh(a){for(var f,b=
1,d=0,e=a[0][1],h=a.length;h>b;++b)(f=a[b][1])>e&&(d=b,e=f);return d}function Fh(a){return a.reduce(Gh,0)}function Gh(a,f){return a+f[1]}function Hh(a,f){return pf(a,Math.ceil(Math.log(f.length)/Math.LN2+1))}function pf(a,f){for(var b=-1,d=+a[0],e=(a[1]-d)/f,h=[];++b<=f;)h[b]=e*b+d;return h}function Ih(a){return[t.min(a),t.max(a)]}function Jh(a,f){return a.value-f.value}function md(a,f){var b=a._pack_next;a._pack_next=f;f._pack_prev=a;f._pack_next=b;b._pack_prev=f}function qf(a,f){a._pack_next=f;
f._pack_prev=a}function rf(a,f){var b=f.x-a.x,d=f.y-a.y,e=a.r+f.r;return.999*e*e>b*b+d*d}function sf(a){function f(a){q=Math.min(a.x-a.r,q);p=Math.max(a.x+a.r,p);r=Math.min(a.y-a.r,r);t=Math.max(a.y+a.r,t)}if((b=a.children)&&(n=b.length)){var b,d,e,h,g,k,l,n,q=1/0,p=-1/0,r=1/0,t=-1/0;if(b.forEach(Kh),d=b[0],d.x=-d.r,d.y=0,f(d),1<n&&(e=b[1],e.x=e.r,e.y=0,f(e),2<n))for(h=b[2],tf(d,e,h),f(h),md(d,h),d._pack_prev=h,md(h,e),e=d._pack_next,g=3;n>g;g++){tf(d,e,h=b[g]);var s=0,x=1,v=1;for(k=e._pack_next;k!==
e;k=k._pack_next,x++)if(rf(k,h)){s=1;break}if(1==s)for(l=d._pack_prev;l!==k._pack_prev&&!rf(l,h);l=l._pack_prev,v++);s?(v>x||x==v&&e.r<d.r?qf(d,e=k):qf(d=l,e),g--):(md(d,h),e=h,f(h))}d=(q+p)/2;e=(r+t)/2;for(g=k=0;n>g;g++)h=b[g],h.x-=d,h.y-=e,k=Math.max(k,h.r+Math.sqrt(h.x*h.x+h.y*h.y));a.r=k;b.forEach(Lh)}}function Kh(a){a._pack_next=a._pack_prev=a}function Lh(a){delete a._pack_next;delete a._pack_prev}function uf(a,f,b,d){var e=a.children;if(a.x=f+=d*a.x,a.y=b+=d*a.y,a.r*=d,e){a=-1;for(var h=e.length;++a<
h;)uf(e[a],f,b,d)}}function tf(a,f,b){var d=a.r+b.r,e=f.x-a.x,h=f.y-a.y;if(d&&(e||h)){var g=f.r+b.r,k=e*e+h*h,g=g*g,d=d*d;f=.5+(d-g)/(2*k);g=Math.sqrt(Math.max(0,2*g*(d+k)-(d-=k)*d-g*g))/(2*k);b.x=a.x+f*e+g*h;b.y=a.y+f*h-g*e}else b.x=a.x+d,b.y=a.y}function vf(a,f){return a.parent==f.parent?1:2}function nd(a){var f=a.children;return f.length?f[0]:a.t}function od(a){var f,b=a.children;return(f=b.length)?b[f-1]:a.t}function Mh(a){return 1+t.max(a,function(a){return a.y})}function Nh(a){return a.reduce(function(a,
b){return a+b.x},0)/a.length}function wf(a){var f=a.children;return f&&f.length?wf(f[0]):a}function xf(a){var f,b=a.children;return b&&(f=b.length)?xf(b[f-1]):a}function pd(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function yf(a,f){var b=a.x+f[3],d=a.y+f[0],e=a.dx-f[1]-f[3],h=a.dy-f[0]-f[2];return 0>e&&(b+=e/2,e=0),0>h&&(d+=h/2,h=0),{x:b,y:d,dx:e,dy:h}}function lb(a){var f=a[0];a=a[a.length-1];return a>f?[f,a]:[a,f]}function dc(a){return a.rangeExtent?a.rangeExtent():lb(a.range())}function Oh(a,f,b,
d){var e=b(a[0],a[1]),h=d(f[0],f[1]);return function(a){return h(e(a))}}function ec(a,f){var b,d=0,e=a.length-1,h=a[d],g=a[e];return h>g&&(b=d,d=e,e=b,b=h,h=g,g=b),a[d]=f.floor(h),a[e]=f.ceil(g),a}function zf(a){return a?{floor:function(f){return Math.floor(f/a)*a},ceil:function(f){return Math.ceil(f/a)*a}}:Ph}function Qh(a,f,b,d){var e=[],h=[],g=0,k=Math.min(a.length,f.length)-1;for(a[k]<a[0]&&(a=a.slice().reverse(),f=f.slice().reverse());++g<=k;)e.push(b(a[g-1],a[g])),h.push(d(f[g-1],f[g]));return function(f){var b=
t.bisect(a,f,1,k)-1;return h[b](e[b](f))}}function Af(a,f,b,d){function e(){var l=2<Math.min(a.length,f.length)?Qh:Oh,B=d?rh:qh;return g=l(a,f,B,b),k=l(f,a,B,Wa),h}function h(a){return g(a)}var g,k;return h.invert=function(a){return k(a)},h.domain=function(f){return arguments.length?(a=f.map(Number),e()):a},h.range=function(a){return arguments.length?(f=a,e()):f},h.rangeRound=function(a){return h.range(a).interpolate(jf)},h.clamp=function(a){return arguments.length?(d=a,e()):d},h.interpolate=function(a){return arguments.length?
(b=a,e()):b},h.ticks=function(f){return t.range.apply(t,Ma(a,f))},h.tickFormat=function(f,b){return qd(a,f,b)},h.nice=function(f){return ec(a,zf(Ma(a,f)[2])),e()},h.copy=function(){return Af(a,f,b,d)},e()}function rd(a,f){return t.rebind(a,f,"range","rangeRound","interpolate","clamp")}function Ma(a,f){null==f&&(f=10);var b=lb(a),d=b[1]-b[0],e=Math.pow(10,Math.floor(Math.log(d/f)/Math.LN10)),d=f/d*e;return.15>=d?e*=10:.35>=d?e*=5:.75>=d&&(e*=2),b[0]=Math.ceil(b[0]/e)*e,b[1]=Math.floor(b[1]/e)*e+.5*
e,b[2]=e,b}function qd(a,f,b){a=Ma(a,f);if(b){f=je.exec(b);if(f.shift(),"s"===f[8]){var d=t.formatPrefix(Math.max(I(a[0]),I(a[1])));return f[7]||(f[7]="."+fc(d.scale(a[2]))),f[8]="f",b=t.format(f.join("")),function(a){return b(d.scale(a))+d.symbol}}f[7]||(f[7]="."+Rh(f[8],a));b=f.join("")}else b=",."+fc(a[2])+"f";return t.format(b)}function fc(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function Rh(a,f){var b=fc(f[2]);return a in Sh?Math.abs(b-fc(Math.max(I(f[0]),I(f[1]))))+ +("e"!==a):b-2*("%"===
a)}function Bf(a,f,b,d){function e(a){return(b?Math.log(0>a?0:a):-Math.log(0<a?0:-a))/Math.log(f)}function h(a){return b?Math.pow(f,a):-Math.pow(f,-a)}function g(f){return a(e(f))}return g.invert=function(f){return h(a.invert(f))},g.domain=function(f){return arguments.length?(b=0<=f[0],a.domain((d=f.map(Number)).map(e)),g):d},g.base=function(b){return arguments.length?(f=+b,a.domain(d.map(e)),g):f},g.nice=function(){var f=ec(d.map(e),b?Math:Th);return a.domain(f),d=f.map(h),g},g.ticks=function(){var a=
lb(d),g=[],k=a[0],a=a[1],l=Math.floor(e(k)),n=Math.ceil(e(a)),q=f%1?2:f;if(isFinite(n-l)){if(b){for(;n>l;l++)for(var p=1;q>p;p++)g.push(h(l)*p);g.push(h(l))}else for(g.push(h(l));l++<n;)for(p=q-1;0<p;p--)g.push(h(l)*p);for(l=0;g[l]<k;l++);for(n=g.length;g[n-1]>a;n--);g=g.slice(l,n)}return g},g.tickFormat=function(a,f){if(!arguments.length)return Cf;2>arguments.length?f=Cf:"function"!=typeof f&&(f=t.format(f));var d,k=Math.max(.1,a/g.ticks().length),l=b?(d=1E-12,Math.ceil):(d=-1E-12,Math.floor);return function(a){return a/
h(l(e(a)+d))<=k?f(a):""}},g.copy=function(){return Bf(a.copy(),f,b,d)},rd(g,a)}function Df(a,f,b){function d(f){return a(e(f))}var e=gc(f),h=gc(1/f);return d.invert=function(f){return h(a.invert(f))},d.domain=function(f){return arguments.length?(a.domain((b=f.map(Number)).map(e)),d):b},d.ticks=function(a){return t.range.apply(t,Ma(b,a))},d.tickFormat=function(a,f){return qd(b,a,f)},d.nice=function(a){return d.domain(ec(b,zf(Ma(b,a)[2])))},d.exponent=function(g){return arguments.length?(e=gc(f=g),
h=gc(1/f),a.domain(b.map(e)),d):f},d.copy=function(){return Df(a.copy(),f,b)},rd(d,a)}function gc(a){return function(f){return 0>f?-Math.pow(-f,a):Math.pow(f,a)}}function Ef(a,f){function b(d){return g[((e.get(d)||("range"===f.t?e.set(d,a.push(d)):0/0))-1)%g.length]}function d(f,b){return t.range(a.length).map(function(a){return f+b*a})}var e,g,k;return b.domain=function(d){if(!arguments.length)return a;a=[];e=new h;for(var g,u=-1,k=d.length;++u<k;)e.has(g=d[u])||e.set(g,a.push(g));return b[f.t].apply(b,
f.a)},b.range=function(a){return arguments.length?(g=a,k=0,f={t:"range",a:arguments},b):g},b.rangePoints=function(e,h){2>arguments.length&&(h=0);var l=e[0],B=e[1],n=(B-l)/(Math.max(1,a.length-1)+h);return g=d(2>a.length?(l+B)/2:l+n*h/2,n),k=0,f={t:"rangePoints",a:arguments},b},b.rangeBands=function(e,h,l){2>arguments.length&&(h=0);3>arguments.length&&(l=h);var B=e[1]<e[0],n=e[B-0],q=(e[1-B]-n)/(a.length-h+2*l);return g=d(n+q*l,q),B&&g.reverse(),k=q*(1-h),f={t:"rangeBands",a:arguments},b},b.rangeRoundBands=
function(e,h,l){2>arguments.length&&(h=0);3>arguments.length&&(l=h);var B=e[1]<e[0],n=e[B-0],q=e[1-B],p=Math.floor((q-n)/(a.length-h+2*l));return g=d(n+Math.round((q-n-(a.length-h)*p)/2),p),B&&g.reverse(),k=Math.round(p*(1-h)),f={t:"rangeRoundBands",a:arguments},b},b.rangeBand=function(){return k},b.rangeExtent=function(){return lb(f.a[0])},b.copy=function(){return Ef(a,f)},b.domain(a)}function Ff(a,f){function b(){var m=0,e=f.length;for(h=[];++m<e;)h[m-1]=t.quantile(a,m/e);return d}function d(a){return isNaN(a=
+a)?void 0:f[t.bisect(h,a)]}var h;return d.domain=function(f){return arguments.length?(a=f.filter(k).sort(e),b()):a},d.range=function(a){return arguments.length?(f=a,b()):f},d.quantiles=function(){return h},d.invertExtent=function(b){return b=f.indexOf(b),0>b?[0/0,0/0]:[0<b?h[b-1]:a[0],b<h.length?h[b]:a[a.length-1]]},d.copy=function(){return Ff(a,f)},b()}function Gf(a,f,b){function d(f){return b[Math.max(0,Math.min(g,Math.floor(h*(f-a))))]}function e(){return h=b.length/(f-a),g=b.length-1,d}var h,
g;return d.domain=function(b){return arguments.length?(a=+b[0],f=+b[b.length-1],e()):[a,f]},d.range=function(a){return arguments.length?(b=a,e()):b},d.invertExtent=function(f){return f=b.indexOf(f),f=0>f?0/0:f/h+a,[f,f+1/h]},d.copy=function(){return Gf(a,f,b)},e()}function Hf(a,f){function b(d){return d>=d?f[t.bisect(a,d)]:void 0}return b.domain=function(f){return arguments.length?(a=f,b):a},b.range=function(a){return arguments.length?(f=a,b):f},b.invertExtent=function(b){return b=f.indexOf(b),[a[b-
1],a[b]]},b.copy=function(){return Hf(a,f)},b}function If(a){function f(a){return+a}return f.invert=f,f.domain=f.range=function(b){return arguments.length?(a=b.map(f),f):a},f.ticks=function(f){return t.range.apply(t,Ma(a,f))},f.tickFormat=function(f,b){return qd(a,f,b)},f.copy=function(){return If(a)},f}function Uh(a){return a.innerRadius}function Vh(a){return a.outerRadius}function Jf(a){return a.startAngle}function Kf(a){return a.endAngle}function Lf(a){function f(f){function g(){n.push("M",h(a(q),
k))}for(var l,n=[],q=[],p=-1,r=f.length,U=J(b),t=J(d);++p<r;)e.call(this,l=f[p],p)?q.push([+U.call(this,l,p),+t.call(this,l,p)]):q.length&&(g(),q=[]);return q.length&&g(),n.length?n.join(""):null}var b=gb,d=tb,e=fb,h=ia,g=h.key,k=.7;return f.x=function(a){return arguments.length?(b=a,f):b},f.y=function(a){return arguments.length?(d=a,f):d},f.defined=function(a){return arguments.length?(e=a,f):e},f.interpolate=function(a){return arguments.length?(g="function"==typeof a?h=a:(h=sd.get(a)||ia).key,f):
g},f.tension=function(a){return arguments.length?(k=a,f):k},f}function ia(a){return a.join("L")}function td(a){for(var f=0,b=a.length,d=a[0],e=[d[0],",",d[1]];++f<b;)e.push("V",(d=a[f])[1],"H",d[0]);return e.join("")}function ud(a){for(var f=0,b=a.length,d=a[0],e=[d[0],",",d[1]];++f<b;)e.push("H",(d=a[f])[0],"V",d[1]);return e.join("")}function hc(a,f){if(1>f.length||a.length!=f.length&&a.length!=f.length+2)return ia(a);var b=a.length!=f.length,d="",e=a[0],h=a[1],g=f[0],k=g,l=1;if(b&&(d+="Q"+(h[0]-
2*g[0]/3)+","+(h[1]-2*g[1]/3)+","+h[0]+","+h[1],e=a[1],l=2),1<f.length)for(k=f[1],h=a[l],l++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(h[0]-k[0])+","+(h[1]-k[1])+","+h[0]+","+h[1],e=2;e<f.length;e++,l++)h=a[l],k=f[e],d+="S"+(h[0]-k[0])+","+(h[1]-k[1])+","+h[0]+","+h[1];b&&(b=a[l],d+="Q"+(h[0]+2*k[0]/3)+","+(h[1]+2*k[1]/3)+","+b[0]+","+b[1]);return d}function vd(a,f){for(var b,d=[],e=(1-f)/2,h=a[0],g=a[1],k=1,l=a.length;++k<l;)b=h,h=g,g=a[k],d.push([e*(g[0]-b[0]),e*(g[1]-b[1])]);return d}function Mf(a){if(3>
a.length)return ia(a);var f=1,b=a.length,d=a[0],e=d[0],h=d[1],g=[e,e,e,(d=a[1])[0]],k=[h,h,h,d[1]],e=[e,",",h,"L",la(Na,g),",",la(Na,k)];for(a.push(a[b-1]);++f<=b;)d=a[f],g.shift(),g.push(d[0]),k.shift(),k.push(d[1]),wd(e,g,k);return a.pop(),e.push("L",d),e.join("")}function la(a,f){return a[0]*f[0]+a[1]*f[1]+a[2]*f[2]+a[3]*f[3]}function wd(a,f,b){a.push("C",la(Nf,f),",",la(Nf,b),",",la(Of,f),",",la(Of,b),",",la(Na,f),",",la(Na,b))}function xd(a,f){return(f[1]-a[1])/(f[0]-a[0])}function Pf(a){for(var f,
b,d,e=-1,h=a.length;++e<h;)f=a[e],b=f[0],d=f[1]+Xa,f[0]=b*Math.cos(d),f[1]=b*Math.sin(d);return a}function Qf(a){function f(f){function l(){$a.push("M",k(a(K),p),q,n(a(x.reverse()),p),"Z")}for(var r,t,s,$a=[],x=[],K=[],v=-1,w=f.length,ta=J(b),y=J(e),z=b===d?function(){return t}:J(d),N=e===h?function(){return s}:J(h);++v<w;)g.call(this,r=f[v],v)?(x.push([t=+ta.call(this,r,v),s=+y.call(this,r,v)]),K.push([+z.call(this,r,v),+N.call(this,r,v)])):x.length&&(l(),x=[],K=[]);return x.length&&l(),$a.length?
$a.join(""):null}var b=gb,d=gb,e=0,h=tb,g=fb,k=ia,l=k.key,n=k,q="L",p=.7;return f.x=function(a){return arguments.length?(b=d=a,f):d},f.x0=function(a){return arguments.length?(b=a,f):b},f.x1=function(a){return arguments.length?(d=a,f):d},f.y=function(a){return arguments.length?(e=h=a,f):h},f.y0=function(a){return arguments.length?(e=a,f):e},f.y1=function(a){return arguments.length?(h=a,f):h},f.defined=function(a){return arguments.length?(g=a,f):g},f.interpolate=function(a){return arguments.length?
(l="function"==typeof a?k=a:(k=sd.get(a)||ia).key,n=k.reverse||k,q=k.closed?"M":"L",f):l},f.tension=function(a){return arguments.length?(p=a,f):p},f}function Wh(a){return a.radius}function Rf(a){return[a.x,a.y]}function Xh(a){return function(){var f=a.apply(this,arguments),b=f[0],f=f[1]+Xa;return[b*Math.cos(f),b*Math.sin(f)]}}function Yh(){return 64}function Zh(){return"circle"}function Sf(a){a=Math.sqrt(a/F);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function Bb(a,f){return Db(a,
W),a.id=f,a}function yd(a,f,b,d){var e=a.id;return xa(a,"function"==typeof b?function(a,h,g){a.__transition__[e].tween.set(f,d(b.call(a,a.__data__,h,g)))}:(b=d(b),function(a){a.__transition__[e].tween.set(f,b)}))}function $h(a){return null==a&&(a=""),function(){this.textContent=a}}function ic(a,f,b,d){var e=a.__transition__||(a.__transition__={active:0,count:0}),g=e[b];if(!g){var k=d.time,g=e[b]={tween:new h,time:k,ease:d.ease,delay:d.delay,duration:d.duration};++e.count;t.timer(function(d){function h(d){return e.active>
b?n():(e.active=b,g.event&&g.event.start.call(a,D,f),g.tween.forEach(function(b,d){(d=d.call(a,D,f))&&x.push(d)}),t.timer(function(){return s.c=l(d||1)?fb:l,1},0,k),void 0)}function l(d){if(e.active!==b)return n();d/=r;for(var h=q(d),k=x.length;0<k;)x[--k].call(a,h);return 1<=d?(g.event&&g.event.end.call(a,D,f),n()):void 0}function n(){return--e.count?delete e[b]:delete a.__transition__,1}var D=a.__data__,q=g.ease,p=g.delay,r=g.duration,s=Aa,x=[];return s.t=p+k,d>=p?h(d-p):(s.c=h,void 0)},0,k)}}function Tf(a,
f){a.attr("transform",function(a){return"translate("+f(a)+",0)"})}function Uf(a,f){a.attr("transform",function(a){return"translate(0,"+f(a)+")"})}function zd(a){return a.toISOString()}function Ad(a,f,b){function d(f){return a(f)}function e(a,b){var d=(a[1]-a[0])/b,m=t.bisect(jc,d);return m==jc.length?[f.year,Ma(a.map(function(a){return a/31536E6}),b)[2]]:m?f[d/jc[m-1]<jc[m]/d?m-1:m]:[ai,Ma(a,b)[2]]}return d.invert=function(f){return Ya(a.invert(f))},d.domain=function(f){return arguments.length?(a.domain(f),
d):a.domain().map(Ya)},d.nice=function(a,f){function b(d){return!isNaN(d)&&!a.range(d,Ya(+d+1),f).length}var m=d.domain(),h=lb(m),h=null==a?e(h,10):"number"==typeof a&&e(h,a);return h&&(a=h[0],f=h[1]),d.domain(ec(m,1<f?{floor:function(f){for(;b(f=a.floor(f));)f=Ya(f-1);return f},ceil:function(f){for(;b(f=a.ceil(f));)f=Ya(+f+1);return f}}:a))},d.ticks=function(a,f){var b=lb(d.domain()),m=null==a?e(b,10):"number"==typeof a?e(b,a):!a.range&&[{range:a},f];return m&&(a=m[0],f=m[1]),a.range(b[0],Ya(+b[1]+
1),1>f?1:f)},d.tickFormat=function(){return b},d.copy=function(){return Ad(a.copy(),f,b)},rd(d,a)}function Ya(a){return new Date(a)}function bi(a){return JSON.parse(a.responseText)}function ci(a){var f=ra.createRange();return f.selectNode(ra.body),f.createContextualFragment(a.responseText)}var t={version:"3.4.12"};Date.now||(Date.now=function(){return+new Date});var Vf=[].slice,Ga=function(a){return Vf.call(a)},ra=document,za=ra.documentElement,aa=window;try{Ga(za.childNodes)[0].nodeType}catch(Ci){Ga=
function(a){for(var f=a.length,b=Array(f);f--;)b[f]=a[f];return b}}try{ra.createElement("div").style.setProperty("opacity",0,"")}catch(Di){var kc=aa.Element.prototype,di=kc.setAttribute,ei=kc.setAttributeNS,Wf=aa.CSSStyleDeclaration.prototype,fi=Wf.setProperty;kc.setAttribute=function(a,f){di.call(this,a,f+"")};kc.setAttributeNS=function(a,f,b){ei.call(this,a,f,b+"")};Wf.setProperty=function(a,f,b){fi.call(this,a,f+"",b)}}t.ascending=e;t.descending=function(a,f){return a>f?-1:f>a?1:f>=a?0:0/0};t.min=
function(a,f){var b,d,e=-1,h=a.length;if(1===arguments.length){for(;++e<h&&!(null!=(b=a[e])&&b>=b);)b=void 0;for(;++e<h;)null!=(d=a[e])&&b>d&&(b=d)}else{for(;++e<h&&!(null!=(b=f.call(a,a[e],e))&&b>=b);)b=void 0;for(;++e<h;)null!=(d=f.call(a,a[e],e))&&b>d&&(b=d)}return b};t.max=function(a,f){var b,d,e=-1,h=a.length;if(1===arguments.length){for(;++e<h&&!(null!=(b=a[e])&&b>=b);)b=void 0;for(;++e<h;)null!=(d=a[e])&&d>b&&(b=d)}else{for(;++e<h&&!(null!=(b=f.call(a,a[e],e))&&b>=b);)b=void 0;for(;++e<h;)null!=
(d=f.call(a,a[e],e))&&d>b&&(b=d)}return b};t.extent=function(a,f){var b,d,e,h=-1,g=a.length;if(1===arguments.length){for(;++h<g&&!(null!=(b=e=a[h])&&b>=b);)b=e=void 0;for(;++h<g;)null!=(d=a[h])&&(b>d&&(b=d),d>e&&(e=d))}else{for(;++h<g&&!(null!=(b=e=f.call(a,a[h],h))&&b>=b);)b=void 0;for(;++h<g;)null!=(d=f.call(a,a[h],h))&&(b>d&&(b=d),d>e&&(e=d))}return[b,e]};t.sum=function(a,f){var b,d=0,e=a.length,h=-1;if(1===arguments.length)for(;++h<e;)isNaN(b=+a[h])||(d+=b);else for(;++h<e;)isNaN(b=+f.call(a,
a[h],h))||(d+=b);return d};t.mean=function(a,f){var b,d=0,e=a.length,h=-1,g=e;if(1===arguments.length)for(;++h<e;)k(b=a[h])?d+=b:--g;else for(;++h<e;)k(b=f.call(a,a[h],h))?d+=b:--g;return g?d/g:void 0};t.quantile=function(a,f){var b=(a.length-1)*f+1,d=Math.floor(b),e=+a[d-1];return(b-=d)?e+b*(a[d]-e):e};t.median=function(a,f){return 1<arguments.length&&(a=a.map(f)),a=a.filter(k),a.length?t.quantile(a.sort(e),.5):void 0};var Xf=d(e);t.bisectLeft=Xf.left;t.bisect=t.bisectRight=Xf.right;t.bisector=function(a){return d(1===
a.length?function(f,b){return e(a(f),b)}:a)};t.shuffle=function(a){for(var f,b,d=a.length;d;)b=0|Math.random()*d--,f=a[d],a[d]=a[b],a[b]=f;return a};t.permute=function(a,f){for(var b=f.length,d=Array(b);b--;)d[b]=a[f[b]];return d};t.pairs=function(a){for(var f=0,b=a.length-1,d=a[0],e=Array(0>b?0:b);b>f;)e[f]=[d,d=a[++f]];return e};t.zip=function(){if(!(d=arguments.length))return[];for(var a=-1,f=t.min(arguments,g),b=Array(f);++a<f;)for(var d,e=-1,h=b[a]=Array(d);++e<d;)h[e]=arguments[e][a];return b};
t.transpose=function(a){return t.zip.apply(t,a)};t.keys=function(a){var f=[],b;for(b in a)f.push(b);return f};t.values=function(a){var f=[],b;for(b in a)f.push(a[b]);return f};t.entries=function(a){var f=[],b;for(b in a)f.push({key:b,value:a[b]});return f};t.merge=function(a){var f,b,d,e=a.length;f=-1;for(var h=0;++f<e;)h+=a[f].length;for(b=Array(h);0<=--e;)for(d=a[e],f=d.length;0<=--f;)b[--h]=d[f];return b};var I=Math.abs;t.range=function(a,f,b){if(3>arguments.length&&(b=1,2>arguments.length&&(f=
a,a=0)),1/0===(f-a)/b)throw Error("infinite range");var d,e=[],h;d=I(b);for(h=1;d*h%1;)h*=10;var g=-1;if(a*=h,f*=h,b*=h,0>b)for(;(d=a+b*++g)>f;)e.push(d/h);else for(;(d=a+b*++g)<f;)e.push(d/h);return e};t.map=function(a){var f=new h;if(a instanceof h)a.forEach(function(a,b){f.set(a,b)});else for(var b in a)f.set(b,a[b]);return f};b(h,{has:l,get:function(a){return this[Oa+a]},set:function(a,f){return this[Oa+a]=f},remove:function(a){return a=Oa+a,a in this&&delete this[a]},keys:q,values:function(){var a=
[];return this.forEach(function(f,b){a.push(b)}),a},entries:function(){var a=[];return this.forEach(function(f,b){a.push({key:f,value:b})}),a},size:n,empty:p,forEach:function(a){for(var f in this)f.charCodeAt(0)===Cb&&a.call(this,f.slice(1),this[f])}});var Oa="\x00",Cb=Oa.charCodeAt(0);t.nest=function(){function a(f,k,l){if(l>=g.length)return d?d.call(e,k):b?k.sort(b):k;for(var n,q,p,r,t=-1,s=k.length,U=g[l++],x=new h;++t<s;)(r=x.get(n=U(q=k[t])))?r.push(q):x.set(n,[q]);return f?(q=f(),p=function(b,
d){q.set(b,a(f,d,l))}):(q={},p=function(b,d){q[b]=a(f,d,l)}),x.forEach(p),q}function f(a,b){if(b>=g.length)return a;var d=[],e=k[b++];return a.forEach(function(a,e){d.push({key:a,values:f(e,b)})}),e?d.sort(function(a,f){return e(a.key,f.key)}):d}var b,d,e={},g=[],k=[];return e.map=function(f,b){return a(b,f,0)},e.entries=function(b){return f(a(t.map,b,0),0)},e.key=function(a){return g.push(a),e},e.sortKeys=function(a){return k[g.length-1]=a,e},e.sortValues=function(a){return b=a,e},e.rollup=function(a){return d=
a,e},e};t.set=function(a){var f=new r;if(a)for(var b=0,d=a.length;d>b;++b)f.add(a[b]);return f};b(r,{has:l,add:function(a){return this[Oa+a]=!0,a},remove:function(a){return a=Oa+a,a in this&&delete this[a]},values:q,size:n,empty:p,forEach:function(a){for(var f in this)f.charCodeAt(0)===Cb&&a.call(this,f.slice(1))}});t.behavior={};t.rebind=function(a,f){for(var b,d=1,e=arguments.length;++d<e;)a[b=arguments[d]]=s(a,f,f[b]);return a};var Rd="webkit ms moz Moz o O".split(" ");t.dispatch=function(){for(var a=
new x,f=-1,b=arguments.length;++f<b;)a[arguments[f]]=y(a);return a};x.prototype.on=function(a,f){var b=a.indexOf("."),d="";if(0<=b&&(d=a.slice(b+1),a=a.slice(0,b)),a)return 2>arguments.length?this[a].on(d):this[a].on(d,f);if(2===arguments.length){if(null==f)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}};t.event=null;t.requote=function(a){return a.replace(gi,"\\$&")};var gi=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Db={}.__proto__?function(a,f){a.__proto__=f}:function(a,f){for(var b in f)a[b]=
f[b]},Ac=function(a,f){return f.querySelector(a)},Bc=function(a,f){return f.querySelectorAll(a)},hi=za.matches||za[w(za,"matchesSelector")],Sd=function(a,f){return hi.call(a,f)};"function"==typeof Sizzle&&(Ac=function(a,f){return Sizzle(a,f)[0]||null},Bc=Sizzle,Sd=Sizzle.matchesSelector);t.selection=function(){return Yf};var O=t.selection.prototype=[];O.select=function(a){var f,b,d,e,h=[];a=T(a);for(var g=-1,k=this.length;++g<k;){h.push(f=[]);f.parentNode=(d=this[g]).parentNode;for(var l=-1,n=d.length;++l<
n;)(e=d[l])?(f.push(b=a.call(e,e.__data__,l,g)),b&&"__data__"in e&&(b.__data__=e.__data__)):f.push(null)}return z(h)};O.selectAll=function(a){var f,b,d=[];a=Id(a);for(var e=-1,h=this.length;++e<h;)for(var g=this[e],k=-1,l=g.length;++k<l;)(b=g[k])&&(d.push(f=Ga(a.call(b,b.__data__,k,e))),f.parentNode=b);return z(d)};var Bd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};
t.ns={prefix:Bd,qualify:function(a){var f=a.indexOf(":"),b=a;return 0<=f&&(b=a.slice(0,f),a=a.slice(f+1)),Bd.hasOwnProperty(b)?{space:Bd[b],local:a}:a}};O.attr=function(a,f){if(2>arguments.length){if("string"==typeof a){var b=this.node();return a=t.ns.qualify(a),a.local?b.getAttributeNS(a.space,a.local):b.getAttribute(a)}for(f in a)this.each(Jd(f,a[f]));return this}return this.each(Jd(a,f))};O.classed=function(a,f){if(2>arguments.length){if("string"==typeof a){var b=this.node(),d=(a=(a+"").trim().split(/^|\s+/)).length,
e=-1;if(f=b.classList)for(;++e<d;){if(!f.contains(a[e]))return!1}else for(f=b.getAttribute("class");++e<d;)if(!Ld(a[e]).test(f))return!1;return!0}for(f in a)this.each(Md(f,a[f]));return this}return this.each(Md(a,f))};O.style=function(a,f,b){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(f="");for(b in a)this.each(Nd(b,a[b],f));return this}if(2>d)return aa.getComputedStyle(this.node(),null).getPropertyValue(a);b=""}return this.each(Nd(a,f,b))};O.property=function(a,f){if(2>arguments.length){if("string"==
typeof a)return this.node()[a];for(f in a)this.each(Od(f,a[f]));return this}return this.each(Od(a,f))};O.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var f=a.apply(this,arguments);this.textContent=null==f?"":f}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};O.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var f=a.apply(this,arguments);this.innerHTML=null==f?"":f}:null==a?function(){this.innerHTML=
""}:function(){this.innerHTML=a}):this.node().innerHTML};O.append=function(a){return a=Pd(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})};O.insert=function(a,f){return a=Pd(a),f=T(f),this.select(function(){return this.insertBefore(a.apply(this,arguments),f.apply(this,arguments)||null)})};O.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};O.data=function(a,f){function b(a,d){var e,m,g,k=a.length,u=d.length,D=Math.min(k,u),p=
Array(u),B=Array(u),r=Array(k);if(f){var t=new h,s=new h,U=[];for(e=-1;++e<k;)D=f.call(m=a[e],m.__data__,e),t.has(D)?r[e]=m:t.set(D,m),U.push(D);for(e=-1;++e<u;)D=f.call(d,g=d[e],e),(m=t.get(D))?(p[e]=m,m.__data__=g):s.has(D)||(B[e]={__data__:g}),s.set(D,g),t.remove(D);for(e=-1;++e<k;)t.has(U[e])&&(r[e]=a[e])}else{for(e=-1;++e<D;)m=a[e],g=d[e],m?(m.__data__=g,p[e]=m):B[e]={__data__:g};for(;u>e;++e)B[e]={__data__:d[e]};for(;k>e;++e)r[e]=a[e]}B.update=p;B.parentNode=p.parentNode=r.parentNode=a.parentNode;
l.push(B);n.push(p);q.push(r)}var d,e,g=-1,k=this.length;if(!arguments.length){for(a=Array(k=(d=this[0]).length);++g<k;)(e=d[g])&&(a[g]=e.__data__);return a}var l=Td([]),n=z([]),q=z([]);if("function"==typeof a)for(;++g<k;)b(d=this[g],a.call(d,d.parentNode.__data__,g));else for(;++g<k;)b(d=this[g],a);return n.enter=function(){return l},n.exit=function(){return q},n};O.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};O.filter=function(a){var f,b,d,e=[];
"function"!=typeof a&&(a=Qd(a));for(var h=0,g=this.length;g>h;h++){e.push(f=[]);f.parentNode=(b=this[h]).parentNode;for(var k=0,l=b.length;l>k;k++)(d=b[k])&&a.call(d,d.__data__,k,h)&&f.push(d)}return z(e)};O.order=function(){for(var a=-1,f=this.length;++a<f;)for(var b,d=this[a],e=d.length-1,h=d[e];0<=--e;)(b=d[e])&&(h&&h!==b.nextSibling&&h.parentNode.insertBefore(b,h),h=b);return this};O.sort=function(a){a=qg.apply(this,arguments);for(var f=-1,b=this.length;++f<b;)this[f].sort(a);return this.order()};
O.each=function(a){return xa(this,function(f,b,d){a.call(f,f.__data__,b,d)})};O.call=function(a){var f=Ga(arguments);return a.apply(f[0]=this,f),this};O.empty=function(){return!this.node()};O.node=function(){for(var a=0,f=this.length;f>a;a++)for(var b=this[a],d=0,e=b.length;e>d;d++){var h=b[d];if(h)return h}return null};O.size=function(){var a=0;return xa(this,function(){++a}),a};var ya=[];t.selection.enter=Td;t.selection.enter.prototype=ya;ya.append=O.append;ya.empty=O.empty;ya.node=O.node;ya.call=
O.call;ya.size=O.size;ya.select=function(a){for(var f,b,d,e,h,g=[],k=-1,l=this.length;++k<l;){d=(e=this[k]).update;g.push(f=[]);f.parentNode=e.parentNode;for(var n=-1,q=e.length;++n<q;)(h=e[n])?(f.push(d[n]=b=a.call(e.parentNode,h.__data__,n,k)),b.__data__=h.__data__):f.push(null)}return z(g)};ya.insert=function(a,f){return 2>arguments.length&&(f=rg(this)),O.insert.call(this,a,f)};O.transition=function(){for(var a,f,b=Za||++Zf,d=[],e=lc||{time:Date.now(),ease:lh,delay:0,duration:250},h=-1,g=this.length;++h<
g;){d.push(a=[]);for(var k=this[h],l=-1,n=k.length;++l<n;)(f=k[l])&&ic(f,l,b,e),a.push(f)}return Bb(d,b)};O.interrupt=function(){return this.each(Eb)};t.select=function(a){a=["string"==typeof a?Ac(a,ra):a];return a.parentNode=za,z([a])};t.selectAll=function(a){a=Ga("string"==typeof a?Bc(a,ra):a);return a.parentNode=za,z([a])};var Yf=t.select(za);O.on=function(a,f,b){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(f=!1);for(b in a)this.each(Ud(b,a[b],f));return this}if(2>d)return(d=this.node()["__on"+
a])&&d._;b=!1}return this.each(Ud(a,f,b))};var Cc=t.map({mouseenter:"mouseover",mouseleave:"mouseout"});Cc.forEach(function(a){"on"+a in ra&&Cc.remove(a)});var ob="onselectstart"in ra?null:w(za.style,"userSelect"),tg=0;t.mouse=function(a){return Dc(a,M())};var Ec=/WebKit/.test(aa.navigator.userAgent)?-1:0;t.touch=function(a,b,d){if(3>arguments.length&&(d=b,b=M().changedTouches),b)for(var e,h=0,g=b.length;g>h;++h)if((e=b[h]).identifier===d)return Dc(a,e)};t.behavior.drag=function(){function a(){this.on("mousedown.drag",
h).on("touchstart.drag",g)}function b(a,f,h,g,k){return function(){var b,l=t.event.target,u=this.parentNode,n=d.of(this,arguments),q=0,p=a(),B=".drag"+(null==p?"":"-"+p),r=t.select(h()).on(g+B,function(){var a,d,e=f(u,p);e&&(a=e[0]-x[0],d=e[1]-x[1],q=q|a|d,x=e,n({type:"drag",x:e[0]+b[0],y:e[1]+b[1],dx:a,dy:d}))}).on(k+B,function(){f(u,p)&&(r.on(g+B,null).on(k+B,null),s(q&&t.event.target===l),n({type:"dragend"}))}),s=Fb(),x=f(u,p);e?(b=e.apply(this,arguments),b=[b.x-x[0],b.y-x[1]]):b=[0,0];n({type:"dragstart"})}}
var d=N(a,"drag","dragstart","dragend"),e=null,h=b(v,t.mouse,wg,"mousemove","mouseup"),g=b(ug,t.touch,vg,"touchmove","touchend");return a.origin=function(b){return arguments.length?(e=b,a):e},t.rebind(a,d,"on")};t.touches=function(a,b){return 2>arguments.length&&(b=M().touches),b?Ga(b).map(function(b){var f=Dc(a,b);return f.identifier=b.identifier,f}):[]};var F=Math.PI,ha=2*F,Y=F/2,C=1E-6,dd=C*C,E=F/180,P=180/F,mc=Math.SQRT2;t.interpolateZoom=function(a,b){function d(a){var b=a*x;if(s){a=Xd(t);var f=
g/(2*p),m,k=mc*b+t;m=((k=Math.exp(2*k))-1)/(k+1);m*=a;var q=t,k=((q=Math.exp(q))-1/q)/2,f=f*(m-k);return[e+f*l,h+f*n,g*a/Xd(mc*b+t)]}return[e+a*l,h+a*n,g*Math.exp(mc*b)]}var e=a[0],h=a[1],g=a[2],k=b[2],l=b[0]-e,n=b[1]-h,q=l*l+n*n,p=Math.sqrt(q),r=(k*k-g*g+4*q)/(4*g*p),q=(k*k-g*g-4*q)/(4*k*p),t=Math.log(Math.sqrt(r*r+1)-r),s=Math.log(Math.sqrt(q*q+1)-q)-t,x=(s||Math.log(k/g))/mc;return d.duration=1E3*x,d};t.behavior.zoom=function(){function a(a){a.on(z,n).on(ii+".zoom",p).on("dblclick.zoom",r).on(M,
q)}function b(a){return[(a[0]-y.x)/y.k,(a[1]-y.y)/y.k]}function d(a){y.k=Math.max(Ha[0],Math.min(Ha[1],a))}function e(a,b){b=[b[0]*y.k+y.x,b[1]*y.k+y.y];y.x+=a[0]-b[0];y.y+=a[1]-b[1]}function h(){G&&G.domain(R.range().map(function(a){return(a-y.x)/y.k}).map(R.invert));H&&H.domain(K.range().map(function(a){return(a-y.y)/y.k}).map(K.invert))}function g(a){a({type:"zoomstart"})}function k(a){h();a({type:"zoom",scale:y.k,translate:[y.x,y.y]})}function l(a){a({type:"zoomend"})}function n(){var a=this,
d=t.event.target,h=E.of(a,arguments),m=0,q=t.select(aa).on(A,function(){m=1;e(t.mouse(a),p);k(h)}).on(C,function(){q.on(A,null).on(C,null);B(m&&t.event.target===d);l(h)}),p=b(t.mouse(a)),B=Fb();Eb.call(a);g(h)}function q(){function a(){var d=t.touches(s);return r=y.k,d.forEach(function(a){a.identifier in Q&&(Q[a.identifier]=b(a))}),d}function h(){var b=t.event.target;t.select(b).on(ma,p).on(Pa,B);w.push(b);for(var b=t.event.changedTouches,f=0,g=b.length;g>f;++f)Q[b[f].identifier]=null;g=a();f=Date.now();
1===g.length?(500>f-fa&&(b=g[0],g=Q[b.identifier],d(2*y.k),e(b,g),L(),k(x)),fa=f):1<g.length&&(b=g[0],g=g[1],f=b[0]-g[0],b=b[1]-g[1],K=f*f+b*b)}function p(){for(var a,b,f,h,g=t.touches(s),l=0,u=g.length;u>l;++l,h=null)if(f=g[l],h=Q[f.identifier]){if(b)break;a=f;b=h}if(h){var n=(n=f[0]-a[0])*n+(n=f[1]-a[1])*n,g=K&&Math.sqrt(n/K);a=[(a[0]+f[0])/2,(a[1]+f[1])/2];b=[(b[0]+h[0])/2,(b[1]+h[1])/2];d(g*r)}fa=null;e(a,b);k(x)}function B(){if(t.event.touches.length){for(var b=t.event.changedTouches,f=0,d=b.length;d>
f;++f)delete Q[b[f].identifier];for(var e in Q)return void a()}t.selectAll(w).on(v,null);G.on(z,n).on(M,q);H();l(x)}var r,s=this,x=E.of(s,arguments),Q={},K=0,v=".zoom-"+t.event.changedTouches[0].identifier,ma="touchmove"+v,Pa="touchend"+v,w=[],G=t.select(s),H=Fb();Eb.call(s);h();g(x);G.on(z,null).on(M,h)}function p(){var a=E.of(this,arguments);w?clearTimeout(w):(s=b(x=v||t.mouse(this)),Eb.call(this),g(a));w=setTimeout(function(){w=null;l(a)},50);L();d(Math.pow(2,.002*nc())*y.k);e(x,s);k(a)}function r(){var a=
E.of(this,arguments),h=t.mouse(this),n=b(h),q=Math.log(y.k)/Math.LN2;g(a);d(Math.pow(2,t.event.shiftKey?Math.ceil(q)-1:Math.floor(q)+1));e(h,n);k(a);l(a)}var s,x,v,w,fa,R,G,K,H,y={x:0,y:0,k:1},ta=[960,500],Ha=$f,z="mousedown.zoom",A="mousemove.zoom",C="mouseup.zoom",M="touchstart.zoom",E=N(a,"zoomstart","zoom","zoomend");return a.event=function(a){a.each(function(){var a=E.of(this,arguments),b=y;Za?t.select(this).transition().each("start.zoom",function(){y=this.__chart__||{x:0,y:0,k:1};g(a)}).tween("zoom:zoom",
function(){var f=ta[0],d=f/2,e=ta[1]/2,h=t.interpolateZoom([(d-y.x)/y.k,(e-y.y)/y.k,f/y.k],[(d-b.x)/b.k,(e-b.y)/b.k,f/b.k]);return function(b){b=h(b);var m=f/b[2];this.__chart__=y={x:d-b[0]*m,y:e-b[1]*m,k:m};k(a)}}).each("end.zoom",function(){l(a)}):(this.__chart__=y,g(a),k(a),l(a))})},a.translate=function(b){return arguments.length?(y={x:+b[0],y:+b[1],k:y.k},h(),a):[y.x,y.y]},a.scale=function(b){return arguments.length?(y={x:y.x,y:y.y,k:+b},h(),a):y.k},a.scaleExtent=function(b){return arguments.length?
(Ha=null==b?$f:[+b[0],+b[1]],a):Ha},a.center=function(b){return arguments.length?(v=b&&[+b[0],+b[1]],a):v},a.size=function(b){return arguments.length?(ta=b&&[+b[0],+b[1]],a):ta},a.x=function(b){return arguments.length?(G=b,R=b.copy(),y={x:0,y:0,k:1},a):G},a.y=function(b){return arguments.length?(H=b,K=b.copy(),y={x:0,y:0,k:1},a):H},t.rebind(a,E,"on")};var nc,$f=[0,1/0],ii="onwheel"in ra?(nc=function(){return-t.event.deltaY*(t.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ra?(nc=function(){return t.event.wheelDelta},
"mousewheel"):(nc=function(){return-t.event.detail},"MozMousePixelScroll");t.color=Qa;Qa.prototype.toString=function(){return this.rgb()+""};t.hsl=sa;var Cd=sa.prototype=new Qa;Cd.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),new sa(this.h,this.s,this.l/a)};Cd.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new sa(this.h,this.s,a*this.l)};Cd.rgb=function(){return Gc(this.h,this.s,this.l)};t.hcl=na;var Dd=na.prototype=new Qa;Dd.brighter=function(a){return new na(this.h,
this.c,Math.min(100,this.l+oc*(arguments.length?a:1)))};Dd.darker=function(a){return new na(this.h,this.c,Math.max(0,this.l-oc*(arguments.length?a:1)))};Dd.rgb=function(){return Hc(this.h,this.c,this.l).rgb()};t.lab=oa;var oc=18,de=.95047,ee=1,fe=1.08883,Ed=oa.prototype=new Qa;Ed.brighter=function(a){return new oa(Math.min(100,this.l+oc*(arguments.length?a:1)),this.a,this.b)};Ed.darker=function(a){return new oa(Math.max(0,this.l-oc*(arguments.length?a:1)),this.a,this.b)};Ed.rgb=function(){return ce(this.l,
this.a,this.b)};t.rgb=ba;var pc=ba.prototype=new Qa;pc.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,d=this.g,e=this.b;return b||d||e?(b&&30>b&&(b=30),d&&30>d&&(d=30),e&&30>e&&(e=30),new ba(Math.min(255,b/a),Math.min(255,d/a),Math.min(255,e/a))):new ba(30,30,30)};pc.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ba(a*this.r,a*this.g,a*this.b)};pc.hsl=function(){return $d(this.r,this.g,this.b)};pc.toString=function(){return"#"+bb(this.r)+bb(this.g)+bb(this.b)};
var Hb=t.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,
tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Hb.forEach(function(a,b){Hb.set(a,new ba(b>>16,255&b>>8,255&b))});t.functor=J;t.xhr=Nc(X);t.dsv=function(a,b){function d(a,m,g){3>arguments.length&&(g=m,m=null);var k=Ib(a,b,null==m?e:h(m),g);return k.row=function(a){return arguments.length?k.response(null==(m=a)?e:h(a)):m},k}function e(a){return d.parse(a.responseText)}function h(a){return function(b){return d.parse(b.responseText,
a)}}function g(b){return b.map(k).join(a)}function k(a){return l.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var l=new RegExp('["'+a+"\n]"),n=a.charCodeAt(0);return d.parse=function(a,b){var f;return d.parseRows(a,function(a,d){if(f)return f(a,d-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");f=b?function(a,f){return b(e(a),f)}:e})},d.parseRows=function(a,b){function f(){if(l>=k)return m;if(e)return e=!1,h;var b=l;if(34===a.charCodeAt(b)){for(var d=
b;d++<k;)if(34===a.charCodeAt(d)){if(34!==a.charCodeAt(d+1))break;++d}l=d+2;var g=a.charCodeAt(d+1);return 13===g?(e=!0,10===a.charCodeAt(d+2)&&++l):10===g&&(e=!0),a.slice(b+1,d).replace(/""/g,'"')}for(;k>l;){g=a.charCodeAt(l++);d=1;if(10===g)e=!0;else if(13===g)e=!0,10===a.charCodeAt(l)&&(++l,++d);else if(g!==n)continue;return a.slice(b,l-d)}return a.slice(b)}for(var d,e,h={},m={},g=[],k=a.length,l=0,u=0;(d=f())!==m;){for(var q=[];d!==h&&d!==m;)q.push(d),d=f();b&&!(q=b(q,u++))||g.push(q)}return g},
d.format=function(b){if(Array.isArray(b[0]))return d.formatRows(b);var f=new r,e=[];return b.forEach(function(a){for(var b in a)f.has(b)||e.push(f.add(b))}),[e.map(k).join(a)].concat(b.map(function(b){return e.map(function(a){return k(b[a])}).join(a)})).join("\n")},d.formatRows=function(a){return a.map(g).join("\n")},d};t.csv=t.dsv(",","text/csv");t.tsv=t.dsv("\t","text/tab-separated-values");var Lb,Mb,Kb,Jb,Aa,ie=aa[w(aa,"requestAnimationFrame")]||function(a){setTimeout(a,17)};t.timer=function(a,
b,d){var e=arguments.length;2>e&&(b=0);3>e&&(d=Date.now());e={c:a,t:d+b,f:!1,n:null};Mb?Mb.n=e:Lb=e;Mb=e;Kb||(Jb=clearTimeout(Jb),Kb=1,ie(Oc))};t.timer.flush=function(){ge();he()};t.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var ji="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,b){var d=Math.pow(10,3*I(8-b));return{scale:8<b?function(a){return a/d}:function(a){return a*d},symbol:a}});t.formatPrefix=function(a,b){var d=0;return a&&(0>a&&(a*=-1),
b&&(a=t.round(a,Pc(a,b))),d=1+Math.floor(1E-12+Math.log(a)/Math.LN10),d=Math.max(-24,Math.min(24,3*Math.floor((d-1)/3)))),ji[8+d/3]};var je=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,zg=t.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},
f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=t.round(a,Pc(a,b))).toFixed(Math.max(0,Math.min(20,Pc(a*(1+1E-15),b))))}}),A=t.time={},Z=Date;Ba.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},
getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Fa.setUTCDate.apply(this._,arguments)},setDay:function(){Fa.setUTCDay.apply(this._,arguments)},setFullYear:function(){Fa.setUTCFullYear.apply(this._,arguments)},setHours:function(){Fa.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Fa.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Fa.setUTCMinutes.apply(this._,
arguments)},setMonth:function(){Fa.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Fa.setUTCSeconds.apply(this._,arguments)},setTime:function(){Fa.setTime.apply(this._,arguments)}};var Fa=Date.prototype;A.year=Ra(function(a){return a=A.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()});A.years=A.year.range;A.years.utc=A.year.utc.range;A.day=Ra(function(a){var b=new Z(2E3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),
b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1});A.days=A.day.range;A.days.utc=A.day.utc.range;A.dayOfYear=function(a){var b=A.year(a);return Math.floor((a-b-6E4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(a,b){b=7-b;var d=A[a]=Ra(function(a){return(a=A.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var d=
A.year(a).getDay();return Math.floor((A.dayOfYear(a)+(d+b)%7)/7)-(d!==b)});A[a+"s"]=d.range;A[a+"s"].utc=d.utc.range;A[a+"OfYear"]=function(a){var d=A.year(a).getDay();return Math.floor((A.dayOfYear(a)+(d+b)%7)/7)}});A.week=A.sunday;A.weeks=A.sunday.range;A.weeks.utc=A.sunday.utc.range;A.weekOfYear=A.sundayOfYear;var ke={"-":"",_:" ",0:"0"},S=/^\s*\d+/,ne=/^%/;t.locale=function(a){return{numberFormat:yg(a),timeFormat:Bg(a)}};var ag=t.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],
dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});t.format=ag.numberFormat;t.geo={};Rc.prototype={s:0,t:0,add:function(a){oe(a,this.t,qc);oe(qc.s,this.s,this);this.s?
this.t+=qc.t:this.s=qc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var qc=new Rc;t.geo.stream=function(a,b){a&&bg.hasOwnProperty(a.type)?bg[a.type](a,b):Qb(a,b)};var bg={Feature:function(a,b){Qb(a.geometry,b)},FeatureCollection:function(a,b){for(var d=a.features,e=-1,h=d.length;++e<h;)Qb(d[e].geometry,b)}},pe={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates;b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var d=a.coordinates,e=-1,h=d.length;++e<
h;)a=d[e],b.point(a[0],a[1],a[2])},LineString:function(a,b){Sc(a.coordinates,b,0)},MultiLineString:function(a,b){for(var d=a.coordinates,e=-1,h=d.length;++e<h;)Sc(d[e],b,0)},Polygon:function(a,b){qe(a.coordinates,b)},MultiPolygon:function(a,b){for(var d=a.coordinates,e=-1,h=d.length;++e<h;)qe(d[e],b)},GeometryCollection:function(a,b){for(var d=a.geometries,e=-1,h=d.length;++e<h;)Qb(d[e],b)}};t.geo.area=function(a){return mb=0,t.geo.stream(a,ga),mb};var mb,Sa=new Rc,ga={sphere:function(){mb+=4*F},
point:v,lineStart:v,lineEnd:v,polygonStart:function(){Sa.reset();ga.lineStart=Qg},polygonEnd:function(){var a=2*Sa;mb+=0>a?4*F+a:a;ga.lineStart=ga.lineEnd=ga.point=v}};t.geo.bounds=function(){function a(a,b){K.push(H=[p=a,s=a]);r>b&&(r=b);b>x&&(x=b)}function b(f,d){var e=Ta([f*E,d*E]);if(R){var h=db(R,e),h=db([h[1],-h[0],0],h);Tb(h);var h=Ub(h),g=f-v,m=0<g?1:-1,k=h[0]*P*m,g=180<I(g);g^(k>m*v&&m*f>k)?(h=h[1]*P,h>x&&(x=h)):(k=(k+360)%360-180,g^(k>m*v&&m*f>k))?(h=-h[1]*P,r>h&&(r=h)):(r>d&&(r=d),d>x&&
(x=d));g?v>f?l(p,f)>l(p,s)&&(s=f):l(f,s)>l(p,s)&&(p=f):s>=p?(p>f&&(p=f),f>s&&(s=f)):f>v?l(p,f)>l(p,s)&&(s=f):l(f,s)>l(p,s)&&(p=f)}else a(f,d);R=e;v=f}function d(){z.point=b}function e(){H[0]=p;H[1]=s;z.point=a;R=null}function h(a,d){if(R){var e=a-v;G+=180<I(e)?e+(0<e?360:-360):e}else w=a,y=d;ga.point(a,d);b(a,d)}function g(){ga.lineStart()}function k(){h(w,y);ga.lineEnd();I(G)>C&&(p=-(s=180));H[0]=p;H[1]=s;R=null}function l(a,b){return 0>(b-=a)?b+360:b}function n(a,b){return a[0]-b[0]}function q(a,
b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var p,r,s,x,v,w,y,R,G,K,H,z={point:a,lineStart:d,lineEnd:e,polygonStart:function(){z.point=h;z.lineStart=g;z.lineEnd=k;G=0;ga.polygonStart()},polygonEnd:function(){ga.polygonEnd();z.point=a;z.lineStart=d;z.lineEnd=e;0>Sa?(p=-(s=180),r=-(x=90)):G>C?x=90:-C>G&&(r=-90);H[0]=p;H[1]=s}};return function(a){x=s=-(p=r=1/0);K=[];t.geo.stream(a,z);if(a=K.length){K.sort(n);for(var b,f=1,d=K[0],e=[d];a>f;++f)b=K[f],q(b[0],d)||q(b[1],d)?(l(d[0],b[1])>l(d[0],
d[1])&&(d[1]=b[1]),l(b[0],d[1])>l(d[0],d[1])&&(d[0]=b[0])):e.push(d=b);var h,g=-1/0;a=e.length-1;f=0;for(d=e[a];a>=f;d=b,++f)b=e[f],(h=l(d[1],b[0]))>g&&(g=h,p=b[0],s=d[1])}return K=H=null,1/0===p||1/0===r?[[0/0,0/0],[0/0,0/0]]:[[p,r],[s,x]]}}();t.geo.centroid=function(a){qb=eb=Ca=Da=ua=ja=ka=ea=Ia=Ja=va=0;t.geo.stream(a,pa);a=Ia;var b=Ja,d=va,e=a*a+b*b+d*d;return dd>e&&(a=ja,b=ka,d=ea,C>eb&&(a=Ca,b=Da,d=ua),e=a*a+b*b+d*d,dd>e)?[0/0,0/0]:[Math.atan2(b,a)*P,ab(d/Math.sqrt(e))*P]};var qb,eb,Ca,Da,ua,
ja,ka,ea,Ia,Ja,va,pa={sphere:v,point:Uc,lineStart:re,lineEnd:se,polygonStart:function(){pa.lineStart=Rg},polygonEnd:function(){pa.lineStart=re}},Ie=ve(fb,function(a){var b,d=0/0,e=0/0,h=0/0;return{lineStart:function(){a.lineStart();b=1},point:function(g,k){var l=0<g?F:-F,n=I(g-d);if(I(n-F)<C)a.point(d,e=0<(e+k)/2?Y:-Y),a.point(h,e),a.lineEnd(),a.lineStart(),a.point(l,e),a.point(g,e),b=0;else if(h!==l&&n>=F){I(d-h)<C&&(d-=h*C);I(g-l)<C&&(g-=l*C);var n=d,q=e,p=g,r,t,s=Math.sin(n-p);e=I(s)>C?Math.atan((Math.sin(q)*
(t=Math.cos(k))*Math.sin(p)-Math.sin(k)*(r=Math.cos(q))*Math.sin(n))/(r*t*s)):(q+k)/2;a.point(h,e);a.lineEnd();a.lineStart();a.point(l,e);b=0}a.point(d=g,e=k);h=l},lineEnd:function(){a.lineEnd();d=e=0/0},clean:function(){return 2-b}}},function(a,b,d,e){null==a?(d*=Y,e.point(-F,d),e.point(0,d),e.point(F,d),e.point(F,0),e.point(F,-d),e.point(0,-d),e.point(-F,-d),e.point(-F,0),e.point(-F,d)):I(a[0]-b[0])>C?(a=a[0]<b[0]?F:-F,d=d*a/2,e.point(-a,d),e.point(0,d),e.point(a,d)):e.point(b[0],b[1])},[-F,-F/
2]),Xb=1E9;t.geo.clipExtent=function(){var a,b,d,e,h,g,k={stream:function(a){return h&&(h.valid=!1),h=g(a),h.valid=!0,h},extent:function(l){return arguments.length?(g=ye(a=+l[0][0],b=+l[0][1],d=+l[1][0],e=+l[1][1]),h&&(h.valid=!1,h=null),k):[[a,b],[d,e]]}};return k.extent([[0,0],[960,500]])};(t.geo.conicEqualArea=function(){return Wc(Ae)}).raw=Ae;t.geo.albers=function(){return t.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};t.geo.albersUsa=function(){function a(a){var g=
a[0];a=a[1];return b=null,d(g,a),b||(e(g,a),b)||h(g,a),b}var b,d,e,h,g=t.geo.albers(),k=t.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=t.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),n={point:function(a,d){b=[a,d]}};return a.invert=function(a){var b=g.scale(),f=g.translate(),d=(a[0]-f[0])/b,b=(a[1]-f[1])/b;return(.12<=b&&.234>b&&-.425<=d&&-.214>d?k:.166<=b&&.234>b&&-.214<=d&&-.115>d?l:g).invert(a)},a.stream=function(a){var b=g.stream(a),f=
k.stream(a),d=l.stream(a);return{point:function(a,e){b.point(a,e);f.point(a,e);d.point(a,e)},sphere:function(){b.sphere();f.sphere();d.sphere()},lineStart:function(){b.lineStart();f.lineStart();d.lineStart()},lineEnd:function(){b.lineEnd();f.lineEnd();d.lineEnd()},polygonStart:function(){b.polygonStart();f.polygonStart();d.polygonStart()},polygonEnd:function(){b.polygonEnd();f.polygonEnd();d.polygonEnd()}}},a.precision=function(b){return arguments.length?(g.precision(b),k.precision(b),l.precision(b),
a):g.precision()},a.scale=function(b){return arguments.length?(g.scale(b),k.scale(.35*b),l.scale(b),a.translate(g.translate())):g.scale()},a.translate=function(b){if(!arguments.length)return g.translate();var f=g.scale(),q=+b[0],p=+b[1];return d=g.translate(b).clipExtent([[q-.455*f,p-.238*f],[q+.455*f,p+.238*f]]).stream(n).point,e=k.translate([q-.307*f,p+.201*f]).clipExtent([[q-.425*f+C,p+.12*f+C],[q-.214*f-C,p+.234*f-C]]).stream(n).point,h=l.translate([q-.205*f,p+.212*f]).clipExtent([[q-.214*f+C,
p+.166*f+C],[q-.115*f-C,p+.234*f-C]]).stream(n).point,a},a.scale(1070)};var rc,Yb,sc,tc,uc,vc,Ka={point:v,lineStart:v,lineEnd:v,polygonStart:function(){Yb=0;Ka.lineStart=Vg},polygonEnd:function(){Ka.lineStart=Ka.lineEnd=Ka.point=v;rc+=I(Yb/2)}},ki={point:function(a,b){sc>a&&(sc=a);a>uc&&(uc=a);tc>b&&(tc=b);b>vc&&(vc=b)},lineStart:v,lineEnd:v,polygonStart:v,polygonEnd:v},qa={point:Ua,lineStart:Ce,lineEnd:De,polygonStart:function(){qa.lineStart=Xg},polygonEnd:function(){qa.point=Ua;qa.lineStart=Ce;
qa.lineEnd=De}};t.geo.path=function(){function a(a){return a&&("function"==typeof k&&h.pointRadius(+k.apply(this,arguments)),g&&g.valid||(g=e(h)),t.geo.stream(a,g)),h.result()}var b,d,e,h,g,k=4.5;return a.area=function(a){return rc=0,t.geo.stream(a,e(Ka)),rc},a.centroid=function(a){return Ca=Da=ua=ja=ka=ea=Ia=Ja=va=0,t.geo.stream(a,e(qa)),va?[Ia/va,Ja/va]:ea?[ja/ea,ka/ea]:ua?[Ca/ua,Da/ua]:[0/0,0/0]},a.bounds=function(a){return uc=vc=-(sc=tc=1/0),t.geo.stream(a,e(ki)),[[sc,tc],[uc,vc]]},a.projection=
function(d){return arguments.length?(e=(b=d)?d.stream||Zg(d):X,g=null,a):b},a.context=function(b){return arguments.length?(h=null==(d=b)?new Wg:new Yg(b),"function"!=typeof k&&h.pointRadius(k),g=null,a):d},a.pointRadius=function(b){return arguments.length?(k="function"==typeof b?b:(h.pointRadius(+b),+b),a):k},a.projection(t.geo.albersUsa()).context(null)};t.geo.transform=function(a){return{stream:function(b){b=new He(b);for(var d in a)b[d]=a[d];return b}}};He.prototype={point:function(a,b){this.stream.point(a,
b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};t.geo.projection=La;t.geo.projectionMutator=Xc;(t.geo.equirectangular=function(){return La(rb)}).raw=rb.invert=rb;t.geo.rotation=function(a){function b(f){return f=a(f[0]*E,f[1]*E),f[0]*=P,f[1]*=P,f}return a=Yc(a[0]%360*E,a[1]*E,2<a.length?a[2]*E:0),b.invert=function(b){return b=
a.invert(b[0]*E,b[1]*E),b[0]*=P,b[1]*=P,b},b};Je.invert=rb;t.geo.circle=function(){function a(){var a="function"==typeof e?e.apply(this,arguments):e,b=Yc(-a[0]*E,-a[1]*E,0).invert,f=[];return d(null,null,1,{point:function(a,d){f.push(a=b(a,d));a[0]*=P;a[1]*=P}}),{type:"Polygon",coordinates:[f]}}var b,d,e=[0,0],h=6;return a.origin=function(b){return arguments.length?(e=b,a):e},a.angle=function(e){return arguments.length?(d=Vc((b=+e)*E,h*E),a):b},a.precision=function(e){return arguments.length?(d=Vc(b*
E,(h=+e)*E),a):h},a.angle(90)};t.geo.distance=function(a,b){var d,e=(b[0]-a[0])*E,h=a[1]*E,g=b[1]*E,k=Math.sin(e),e=Math.cos(e),l=Math.sin(h),h=Math.cos(h),n=Math.sin(g),g=Math.cos(g);return Math.atan2(Math.sqrt((d=g*k)*d+(d=h*n-l*g*e)*d),l*n+h*g*e)};t.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return t.range(Math.ceil(g/y)*y,h,y).map(s).concat(t.range(Math.ceil(q/R)*R,n,R).map(x)).concat(t.range(Math.ceil(e/v)*v,d,v).filter(function(a){return I(a%
y)>C}).map(p)).concat(t.range(Math.ceil(l/w)*w,k,w).filter(function(a){return I(a%R)>C}).map(r))}var d,e,h,g,k,l,n,q,p,r,s,x,v=10,w=v,y=90,R=360,G=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[s(g).concat(x(n).slice(1),s(h).reverse().slice(1),x(q).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?
(g=+b[0][0],h=+b[1][0],q=+b[0][1],n=+b[1][1],g>h&&(b=g,g=h,h=b),q>n&&(b=q,q=n,n=b),a.precision(G)):[[g,q],[h,n]]},a.minorExtent=function(b){return arguments.length?(e=+b[0][0],d=+b[1][0],l=+b[0][1],k=+b[1][1],e>d&&(b=e,e=d,d=b),l>k&&(b=l,l=k,k=b),a.precision(G)):[[e,l],[d,k]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(y=+b[0],R=+b[1],a):[y,R]},a.minorStep=function(b){return arguments.length?(v=+b[0],w=+b[1],
a):[v,w]},a.precision=function(b){return arguments.length?(G=+b,p=Oe(l,k,90),r=Pe(e,d,G),s=Oe(q,n,90),x=Pe(g,h,G),a):G},a.majorExtent([[-180,-90+C],[180,90-C]]).minorExtent([[-180,-80-C],[180,80+C]])};t.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||e.apply(this,arguments),d||h.apply(this,arguments)]}}var b,d,e=Zc,h=$c;return a.distance=function(){return t.geo.distance(b||e.apply(this,arguments),d||h.apply(this,arguments))},a.source=function(d){return arguments.length?
(e=d,b="function"==typeof d?null:d,a):e},a.target=function(b){return arguments.length?(h=b,d="function"==typeof b?null:b,a):h},a.precision=function(){return arguments.length?a:0},a};t.geo.interpolate=function(a,b){return $g(a[0]*E,a[1]*E,b[0]*E,b[1]*E)};t.geo.length=function(a){return wc=0,t.geo.stream(a,nb),wc};var wc,nb={sphere:v,point:v,lineStart:function(){function a(a,h){var g=Math.sin(h*=E),k=Math.cos(h),l=I((a*=E)-b),n=Math.cos(l);wc+=Math.atan2(Math.sqrt((l=k*Math.sin(l))*l+(l=e*g-d*k*n)*
l),d*g+e*k*n);b=a;d=g;e=k}var b,d,e;nb.point=function(h,g){b=h*E;d=Math.sin(g*=E);e=Math.cos(g);nb.point=a};nb.lineEnd=function(){nb.point=nb.lineEnd=v}},lineEnd:v,polygonStart:v,polygonEnd:v},cg=sb(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(t.geo.azimuthalEqualArea=function(){return La(cg)}).raw=cg;var dg=sb(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},X);(t.geo.azimuthalEquidistant=function(){return La(dg)}).raw=dg;(t.geo.conicConformal=function(){return Wc(Qe)}).raw=
Qe;(t.geo.conicEquidistant=function(){return Wc(Re)}).raw=Re;var eg=sb(function(a){return 1/a},Math.atan);(t.geo.gnomonic=function(){return La(eg)}).raw=eg;Zb.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-Y]};(t.geo.mercator=function(){return Se(Zb)}).raw=Zb;var fg=sb(function(){return 1},Math.asin);(t.geo.orthographic=function(){return La(fg)}).raw=fg;var gg=sb(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(t.geo.stereographic=function(){return La(gg)}).raw=gg;ad.invert=
function(a,b){return[-b,2*Math.atan(Math.exp(a))-Y]};(t.geo.transverseMercator=function(){var a=Se(ad),b=a.center,d=a.rotate;return a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])},a.rotate=function(a){return a?d([a[0],a[1],2<a.length?a[2]+90:90]):(a=d(),[a[0],a[1],a[2]-90])},d([0,0,90])}).raw=ad;t.geom={};t.geom.hull=function(a){function b(a){if(3>a.length)return[];var f,h=J(d),g=J(e),k=a.length,l=[],n=[];for(f=0;k>f;f++)l.push([+h.call(this,a[f],f),+g.call(this,a[f],f),f]);l.sort(ah);
for(f=0;k>f;f++)n.push([l[f][0],-l[f][1]]);var h=Te(l),n=Te(n),g=n[0]===h[0],k=n[n.length-1]===h[h.length-1],q=[];for(f=h.length-1;0<=f;--f)q.push(a[l[h[f]][2]]);for(f=+g;f<n.length-k;++f)q.push(a[l[n[f]][2]]);return q}var d=gb,e=tb;return arguments.length?b(a):(b.x=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=a,b):e},b)};t.geom.polygon=function(a){return Db(a,xc),a};var xc=t.geom.polygon.prototype=[];xc.area=function(){for(var a,b=-1,d=this.length,e=this[d-
1],h=0;++b<d;)a=e,e=this[b],h+=a[1]*e[0]-a[0]*e[1];return.5*h};xc.centroid=function(a){var b,d,e=-1,h=this.length,g=0,k=0,l=this[h-1];for(arguments.length||(a=-1/(6*this.area()));++e<h;)b=l,l=this[e],d=b[0]*l[1]-l[0]*b[1],g+=(b[0]+l[0])*d,k+=(b[1]+l[1])*d;return[g*a,k*a]};xc.clip=function(a){for(var b,d,e,h,g,k,l=Ve(a),n=-1,q=this.length-Ve(this),p=this[q-1];++n<q;){b=a.slice();a.length=0;h=this[n];g=b[(e=b.length-l)-1];for(d=-1;++d<e;)k=b[d],bd(k,p,h)?(bd(g,p,h)||a.push(Ue(g,k,p,h)),a.push(k)):bd(g,
p,h)&&a.push(Ue(g,k,p,h)),g=k;l&&a.push(a[0]);p=h}return a};var kb,Va,ib,ed,ub,Xe=[],af=[];Ze.prototype.prepare=function(){for(var a,b=this.edges,d=b.length;d--;)a=b[d].edge,a.b&&a.a||b.splice(d,1);return b.sort($e),b.length};bc.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};fd.prototype={insert:function(a,b){var d,e,h;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=
b}else a.R=b;d=a}else this._?(a=cf(this._),b.P=null,b.N=a,a.P=a.L=b,d=a):(b.P=b.N=null,this._=b,d=null);b.L=b.R=null;b.U=d;b.C=!0;for(a=b;d&&d.C;)e=d.U,d===e.L?(h=e.R,h&&h.C?(d.C=h.C=!1,e.C=!0,a=e):(a===d.R&&(wb(this,d),a=d,d=a.U),d.C=!1,e.C=!0,xb(this,e))):(h=e.L,h&&h.C?(d.C=h.C=!1,e.C=!0,a=e):(a===d.L&&(xb(this,d),a=d,d=a.U),d.C=!1,e.C=!0,wb(this,e))),d=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var b,d,e,h=a.U,g=a.L,k=a.R;if(d=g?k?cf(k):g:k,h?h.L===a?h.L=
d:h.R=d:this._=d,g&&k?(e=d.C,d.C=a.C,d.L=g,g.U=d,d!==k?(h=d.U,d.U=a.U,a=d.R,h.L=a,d.R=k,k.U=d):(d.U=h,h=d,a=d.R)):(e=a.C,a=d),a&&(a.U=h),!e){if(a&&a.C)return a.C=!1,void 0;do{if(a===this._)break;if(a===h.L){if(b=h.R,b.C&&(b.C=!1,h.C=!0,wb(this,h),b=h.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,xb(this,b),b=h.R);b.C=h.C;h.C=b.R.C=!1;wb(this,h);a=this._;break}}else if(b=h.L,b.C&&(b.C=!1,h.C=!0,xb(this,h),b=h.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,wb(this,b),b=h.L);b.C=h.C;
h.C=b.L.C=!1;xb(this,h);a=this._;break}b.C=!0;a=h;h=h.U}while(!a.C);a&&(a.C=!1)}}};t.geom.voronoi=function(a){function b(a){var f=Array(a.length),e=l[0][0],h=l[0][1],g=l[1][0],k=l[1][1];return gd(d(a),l).cells.forEach(function(b,d){var m=b.edges,l=b.site;(f[d]=m.length?m.map(function(a){a=a.start();return[a.x,a.y]}):l.x>=e&&l.x<=g&&l.y>=h&&l.y<=k?[[e,k],[g,k],[g,h],[e,h]]:[]).point=a[d]}),f}function d(a){return a.map(function(a,b){return{x:Math.round(g(a,b)/C)*C,y:Math.round(k(a,b)/C)*C,i:b}})}var e=
gb,h=tb,g=e,k=h,l=yc;return a?b(a):(b.links=function(a){return gd(d(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})},b.triangles=function(a){var b=[];return gd(d(a)).cells.forEach(function(d,f){for(var e,h=d.site,g=d.edges.sort($e),m=-1,k=g.length,l=g[k-1].edge,l=l.l===h?l.r:l.l;++m<k;)e=l,l=g[m].edge,l=l.l===h?l.r:l.l,f<e.i&&f<l.i&&0>(h.x-l.x)*(e.y-h.y)-(h.x-e.x)*(l.y-h.y)&&b.push([a[f],a[e.i],a[l.i]])}),b},b.x=function(a){return arguments.length?
(g=J(e=a),b):e},b.y=function(a){return arguments.length?(k=J(h=a),b):h},b.clipExtent=function(a){return arguments.length?(l=null==a?yc:a,b):l===yc?null:l},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):l===yc?null:l&&l[1]},b)};var yc=[[-1E6,-1E6],[1E6,1E6]];t.geom.delaunay=function(a){return t.geom.voronoi().triangles(a)};t.geom.quadtree=function(a,b,d,e,h){function g(a){function q(a,b,d,f,e,h,g,m){if(!isNaN(d)&&!isNaN(f))if(a.leaf){var k=a.x,l=a.y;if(null!=k){if(!(.01>I(k-
d)+I(l-f))){var n=a.point;a.x=a.y=a.point=null;u(a,n,k,l,e,h,g,m)}u(a,b,d,f,e,h,g,m)}else a.x=d,a.y=f,a.point=b}else u(a,b,d,f,e,h,g,m)}function u(a,b,d,f,e,h,g,m){var k=.5*(e+g),l=.5*(h+m),n=d>=k,p=f>=l,r=(p<<1)+n;a.leaf=!1;a=a.nodes[r]||(a.nodes[r]=df());n?e=k:g=k;p?h=l:m=l;q(a,b,d,f,e,h,g,m)}var p,r,t,s,x,v,w,y,H,z=J(l),N=J(n);if(null!=b)v=b,w=d,y=e,H=h;else if(y=H=-(v=w=1/0),r=[],t=[],x=a.length,k)for(s=0;x>s;++s)p=a[s],p.x<v&&(v=p.x),p.y<w&&(w=p.y),p.x>y&&(y=p.x),p.y>H&&(H=p.y),r.push(p.x),t.push(p.y);
else for(s=0;x>s;++s){var A=+z(p=a[s],s);p=+N(p,s);v>A&&(v=A);w>p&&(w=p);A>y&&(y=A);p>H&&(H=p);r.push(A);t.push(p)}A=y-v;p=H-w;A>p?H=w+A:y=v+p;var L=df();if(L.add=function(a){q(L,a,+z(a,++s),+N(a,s),v,w,y,H)},L.visit=function(a){yb(a,L,v,w,y,H)},s=-1,null==b){for(;++s<x;)q(L,a[s],r[s],t[s],v,w,y,H);--s}else a.forEach(L.add);return r=t=a=p=null,L}var k,l=gb,n=tb;return(k=arguments.length)?(l=gh,n=hh,3===k&&(h=d,e=b,d=b=0),g(a)):(g.x=function(a){return arguments.length?(l=a,g):l},g.y=function(a){return arguments.length?
(n=a,g):n},g.extent=function(a){return arguments.length?(null==a?b=d=e=h=null:(b=+a[0][0],d=+a[0][1],e=+a[1][0],h=+a[1][1]),g):null==b?null:[[b,d],[e,h]]},g.size=function(a){return arguments.length?(null==a?b=d=e=h=null:(b=d=0,e=+a[0],h=+a[1]),g):null==b?null:[e-b,h-d]},g)};t.interpolateRgb=hd;t.interpolateObject=ef;t.interpolateNumber=Ea;t.interpolateString=ff;var id=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jd=new RegExp(id.source,"g");t.interpolate=Wa;t.interpolators=[function(a,b){var d=typeof b;
return("string"===d?Hb.has(b)||/^(#|rgb\(|hsl\()/.test(b)?hd:ff:b instanceof Qa?hd:Array.isArray(b)?cc:"object"===d&&isNaN(b)?ef:Ea)(a,b)}];t.interpolateArray=cc;var hg=function(){return X},li=t.map({linear:hg,poly:function(a){return function(b){return Math.pow(b,a)}},quad:function(){return jh},cubic:function(){return kh},sin:function(){return mh},exp:function(){return nh},circle:function(){return oh},elastic:function(a,b){var d;return 2>arguments.length&&(b=.45),arguments.length?d=b/ha*Math.asin(1/
a):(a=1,d=b/4),function(e){return 1+a*Math.pow(2,-10*e)*Math.sin((e-d)*ha/b)}},back:function(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}},bounce:function(){return ph}}),mi=t.map({"in":X,out:gf,"in-out":hf,"out-in":function(a){return hf(gf(a))}});t.ease=function(a){var b=a.indexOf("-"),d=0<=b?a.slice(0,b):a,b=0<=b?a.slice(b+1):"in";return d=li.get(d)||hg,b=mi.get(b)||X,ih(b(d.apply(null,Vf.call(arguments,1))))};t.interpolateHcl=function(a,b){a=t.hcl(a);b=t.hcl(b);var d=a.h,e=a.c,h=
a.l,g=b.h-d,k=b.c-e,l=b.l-h;return isNaN(k)&&(k=0,e=isNaN(e)?b.c:e),isNaN(g)?(g=0,d=isNaN(d)?b.h:d):180<g?g-=360:-180>g&&(g+=360),function(a){return Hc(d+g*a,e+k*a,h+l*a)+""}};t.interpolateHsl=function(a,b){a=t.hsl(a);b=t.hsl(b);var d=a.h,e=a.s,h=a.l,g=b.h-d,k=b.s-e,l=b.l-h;return isNaN(k)&&(k=0,e=isNaN(e)?b.s:e),isNaN(g)?(g=0,d=isNaN(d)?b.h:d):180<g?g-=360:-180>g&&(g+=360),function(a){return Gc(d+g*a,e+k*a,h+l*a)+""}};t.interpolateLab=function(a,b){a=t.lab(a);b=t.lab(b);var d=a.l,e=a.a,h=a.b,g=b.l-
d,k=b.a-e,l=b.b-h;return function(a){return ce(d+g*a,e+k*a,h+l*a)+""}};t.interpolateRound=jf;t.transform=function(a){var b=ra.createElementNS(t.ns.prefix.svg,"g");return(t.transform=function(a){if(null!=a){b.setAttribute("transform",a);var d=b.transform.baseVal.consolidate()}return new kf(d?d.matrix:ni)})(a)};kf.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ni={a:1,b:0,c:0,d:1,e:0,f:0};t.interpolateTransform=
mf;t.layout={};t.layout.bundle=function(){return function(a){for(var b=[],d=-1,e=a.length;++d<e;)b.push(sh(a[d]));return b}};t.layout.chord=function(){function a(){var a,q,r,s,x,v={},w=[],y=t.range(g),da=[];d=[];e=[];a=0;for(s=-1;++s<g;){q=0;for(x=-1;++x<g;)q+=h[s][x];w.push(q);da.push(t.range(g));a+=q}k&&y.sort(function(a,b){return k(w[a],w[b])});l&&da.forEach(function(a,b){a.sort(function(a,d){return l(h[b][a],h[b][d])})});a=(ha-p*g)/a;q=0;for(s=-1;++s<g;){r=q;for(x=-1;++x<g;){var H=y[s],z=da[H][x],
N=h[H][z],A=q,L=q+=N*a;v[H+"-"+z]={index:H,subindex:z,startAngle:A,endAngle:L,value:N}}e[H]={index:H,startAngle:r,endAngle:q,value:(q-r)/a};q+=p}for(s=-1;++s<g;)for(x=s-1;++x<g;)a=v[s+"-"+x],q=v[x+"-"+s],(a.value||q.value)&&d.push(a.value<q.value?{source:q,target:a}:{source:a,target:q});n&&b()}function b(){d.sort(function(a,b){return n((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var d,e,h,g,k,l,n,q={},p=0;return q.matrix=function(a){return arguments.length?(g=(h=a)&&h.length,
d=e=null,q):h},q.padding=function(a){return arguments.length?(p=a,d=e=null,q):p},q.sortGroups=function(a){return arguments.length?(k=a,d=e=null,q):k},q.sortSubgroups=function(a){return arguments.length?(l=a,d=null,q):l},q.sortChords=function(a){return arguments.length?(n=a,d&&b(),q):n},q.chords=function(){return d||a(),d},q.groups=function(){return e||a(),e},q};t.layout.force=function(){function a(a){return function(b,d,f,e){if(b.point!==a){f=b.cx-a.x;var h=b.cy-a.y;d=e-d;e=f*f+h*h;if(e>d*d/y)return v>
e&&(d=b.charge/e,a.px-=f*d,a.py-=h*d),!0;b.point&&e&&v>e&&(d=b.pointCharge/e,a.px-=f*d,a.py-=h*d)}return!b.charge}}function b(a){a.px=t.event.x;a.py=t.event.y;l.resume()}var d,e,h,g,k,l={},n=t.dispatch("start","tick","end"),q=[1,1],p=.9,r=oi,s=pi,x=-30,v=qi,w=.1,y=.64,z=[],G=[];return l.tick=function(){if(.005>(e*=.99))return n.end({type:"end",alpha:e=0}),!0;var b,d,f,m,l,r,s,v,y=z.length,V=G.length;for(d=0;V>d;++d)f=G[d],b=f.source,m=f.target,s=m.x-b.x,v=m.y-b.y,(l=s*s+v*v)&&(l=e*g[d]*((l=Math.sqrt(l))-
h[d])/l,s*=l,v*=l,m.x-=s*(r=b.weight/(m.weight+b.weight)),m.y-=v*r,b.x+=s*(r=1-r),b.y+=v*r);if((r=e*w)&&(s=q[0]/2,v=q[1]/2,d=-1,r))for(;++d<y;)f=z[d],f.x+=(s-f.x)*r,f.y+=(v-f.y)*r;if(x)for(of(b=t.geom.quadtree(z),e,k),d=-1;++d<y;)(f=z[d]).fixed||b.visit(a(f));for(d=-1;++d<y;)f=z[d],f.fixed?(f.x=f.px,f.y=f.py):(f.x-=(f.px-(f.px=f.x))*p,f.y-=(f.py-(f.py=f.y))*p);n.tick({type:"tick",alpha:e})},l.nodes=function(a){return arguments.length?(z=a,l):z},l.links=function(a){return arguments.length?(G=a,l):
G},l.size=function(a){return arguments.length?(q=a,l):q},l.linkDistance=function(a){return arguments.length?(r="function"==typeof a?a:+a,l):r},l.distance=l.linkDistance,l.linkStrength=function(a){return arguments.length?(s="function"==typeof a?a:+a,l):s},l.friction=function(a){return arguments.length?(p=+a,l):p},l.charge=function(a){return arguments.length?(x="function"==typeof a?a:+a,l):x},l.chargeDistance=function(a){return arguments.length?(v=a*a,l):Math.sqrt(v)},l.gravity=function(a){return arguments.length?
(w=+a,l):w},l.theta=function(a){return arguments.length?(y=a*a,l):Math.sqrt(y)},l.alpha=function(a){return arguments.length?(a=+a,e?e=0<a?a:0:0<a&&(n.start({type:"start",alpha:e=a}),t.timer(l.tick)),l):e},l.start=function(){function a(f,h){if(!d){d=Array(e);for(m=0;e>m;++m)d[m]=[];for(m=0;l>m;++m){var g=G[m];d[g.source.index].push(g.target);d[g.target.index].push(g.source)}}for(var k=d[b],m=-1,l=k.length;++m<l;)if(!isNaN(g=k[m][f]))return g;return Math.random()*h}var b,d,f,e=z.length,m=G.length,n=
q[0],p=q[1];for(b=0;e>b;++b)(f=z[b]).index=b,f.weight=0;for(b=0;m>b;++b)f=G[b],"number"==typeof f.source&&(f.source=z[f.source]),"number"==typeof f.target&&(f.target=z[f.target]),++f.source.weight,++f.target.weight;for(b=0;e>b;++b)f=z[b],isNaN(f.x)&&(f.x=a("x",n)),isNaN(f.y)&&(f.y=a("y",p)),isNaN(f.px)&&(f.px=f.x),isNaN(f.py)&&(f.py=f.y);if(h=[],"function"==typeof r)for(b=0;m>b;++b)h[b]=+r.call(this,G[b],b);else for(b=0;m>b;++b)h[b]=r;if(g=[],"function"==typeof s)for(b=0;m>b;++b)g[b]=+s.call(this,
G[b],b);else for(b=0;m>b;++b)g[b]=s;if(k=[],"function"==typeof x)for(b=0;e>b;++b)k[b]=+x.call(this,z[b],b);else for(b=0;e>b;++b)k[b]=x;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){return d||(d=t.behavior.drag().origin(X).on("dragstart.force",th).on("drag.force",b).on("dragend.force",uh)),arguments.length?(this.on("mouseover.force",vh).on("mouseout.force",wh).call(d),void 0):d},t.rebind(l,n,"on")};var oi=20,pi=1,qi=1/0;t.layout.hierarchy=
function(){function a(h){var g,k=[h],l=[];for(h.depth=0;null!=(g=k.pop());)if(l.push(g),(q=d.call(a,g,g.depth))&&(n=q.length)){for(var n,q,p;0<=--n;)k.push(p=q[n]),p.parent=g,p.depth=g.depth+1;e&&(g.value=0);g.children=q}else e&&(g.value=+e.call(a,g,g.depth)||0),delete g.children;return wa(h,function(a){var d,h;b&&(d=a.children)&&d.sort(b);e&&(h=a.parent)&&(h.value+=a.value)}),l}var b=Ah,d=yh,e=zh;return a.sort=function(d){return arguments.length?(b=d,a):b},a.children=function(b){return arguments.length?
(d=b,a):d},a.value=function(b){return arguments.length?(e=b,a):e},a.revalue=function(b){return e&&(Ab(b,function(a){a.children&&(a.value=0)}),wa(b,function(b){var d;b.children||(b.value=+e.call(a,b,b.depth)||0);(d=b.parent)&&(d.value+=b.value)})),b},a};t.layout.partition=function(){function a(b,d,f,e){var h=b.children;if(b.x=d,b.y=b.depth*e,b.dx=f,b.dy=e,h&&(g=h.length)){var g,k,m=-1;for(f=b.value?f/b.value:0;++m<g;)a(k=h[m],d,b=k.value*f,e),d+=b}}function b(a){a=a.children;var d=0;if(a&&(e=a.length))for(var e,
h=-1;++h<e;)d=Math.max(d,b(a[h]));return 1+d}function d(g,k){var m=e.call(this,g,k);return a(m[0],0,h[0],h[1]/b(m[0])),m}var e=t.layout.hierarchy(),h=[1,1];return d.size=function(a){return arguments.length?(h=a,d):h},zb(d,e)};t.layout.pie=function(){function a(g){var k=g.map(function(d,e){return+b.call(a,d,e)}),l=+("function"==typeof e?e.apply(this,arguments):e),n=(("function"==typeof h?h.apply(this,arguments):h)-l)/t.sum(k),q=t.range(g.length);null!=d&&q.sort(d===ig?function(a,b){return k[b]-k[a]}:
function(a,b){return d(g[a],g[b])});var p=[];return q.forEach(function(a){var b;p[a]={data:g[a],value:b=k[a],startAngle:l,endAngle:l+=b*n}}),p}var b=Number,d=ig,e=0,h=ha;return a.value=function(d){return arguments.length?(b=d,a):b},a.sort=function(b){return arguments.length?(d=b,a):d},a.startAngle=function(b){return arguments.length?(e=b,a):e},a.endAngle=function(b){return arguments.length?(h=b,a):h},a};var ig={};t.layout.stack=function(){function a(l,n){var q=l.map(function(d,e){return b.call(a,
d,e)}),p=q.map(function(b){return b.map(function(b,d){return[g.call(a,b,d),k.call(a,b,d)]})}),r=d.call(a,p,n),q=t.permute(q,r),p=t.permute(p,r),s,x,v=e.call(a,p,n),w=q.length,y=q[0].length;for(s=0;y>s;++s)for(h.call(a,q[0][s],x=v[s],p[0][s][1]),r=1;w>r;++r)h.call(a,q[r][s],x+=p[r-1][s][1],p[r][s][1]);return l}var b=X,d=kd,e=ld,h=Dh,g=Bh,k=Ch;return a.values=function(d){return arguments.length?(b=d,a):b},a.order=function(b){return arguments.length?(d="function"==typeof b?b:ri.get(b)||kd,a):d},a.offset=
function(b){return arguments.length?(e="function"==typeof b?b:si.get(b)||ld,a):e},a.x=function(b){return arguments.length?(g=b,a):g},a.y=function(b){return arguments.length?(k=b,a):k},a.out=function(b){return arguments.length?(h=b,a):h},a};var ri=t.map({"inside-out":function(a){var b,d=a.length,e=a.map(Eh),h=a.map(Fh),g=t.range(d).sort(function(a,b){return e[a]-e[b]}),k=0,l=0,n=[],q=[];for(a=0;d>a;++a)b=g[a],l>k?(k+=h[b],n.push(b)):(l+=h[b],q.push(b));return q.reverse().concat(n)},reverse:function(a){return t.range(a.length).reverse()},
"default":kd}),si=t.map({silhouette:function(a){var b,d,e,h=a.length,g=a[0].length,k=[],l=0,n=[];for(d=0;g>d;++d){for(e=b=0;h>b;b++)e+=a[b][d][1];e>l&&(l=e);k.push(e)}for(d=0;g>d;++d)n[d]=(l-k[d])/2;return n},wiggle:function(a){var b,d,e,h,g,k,l,n,q,p=a.length,r=a[0],s=r.length,t=[];t[0]=n=q=0;for(d=1;s>d;++d){for(h=b=0;p>b;++b)h+=a[b][d][1];g=b=0;for(l=r[d][0]-r[d-1][0];p>b;++b){e=0;for(k=(a[b][d][1]-a[b][d-1][1])/(2*l);b>e;++e)k+=(a[e][d][1]-a[e][d-1][1])/l;g+=k*a[b][d][1]}t[d]=n-=h?g/h*l:0;q>n&&
(q=n)}for(d=0;s>d;++d)t[d]-=q;return t},expand:function(a){var b,d,e,h=a.length,g=a[0].length,k=1/h,l=[];for(d=0;g>d;++d){for(e=b=0;h>b;b++)e+=a[b][d][1];if(e)for(b=0;h>b;b++)a[b][d][1]/=e;else for(b=0;h>b;b++)a[b][d][1]=k}for(d=0;g>d;++d)l[d]=0;return l},zero:ld});t.layout.histogram=function(){function a(a,g){var k,l,n=[],q=a.map(d,this),p=e.call(this,q,g),r=h.call(this,p,q,g);g=-1;for(var s=q.length,x=r.length-1,v=b?1:1/s;++g<x;)k=n[g]=[],k.dx=r[g+1]-(k.x=r[g]),k.y=0;if(0<x)for(g=-1;++g<s;)l=q[g],
l>=p[0]&&l<=p[1]&&(k=n[t.bisect(r,l,1,x)-1],k.y+=v,k.push(a[g]));return n}var b=!0,d=Number,e=Ih,h=Hh;return a.value=function(b){return arguments.length?(d=b,a):d},a.range=function(b){return arguments.length?(e=J(b),a):e},a.bins=function(b){return arguments.length?(h="number"==typeof b?function(a){return pf(a,b)}:J(b),a):h},a.frequency=function(d){return arguments.length?(b=!!d,a):b},a};t.layout.pack=function(){function a(a,g){var k=d.call(this,a,g),l=k[0],n=h[0],q=h[1],p=null==b?Math.sqrt:"function"==
typeof b?b:function(){return b};if(l.x=l.y=0,wa(l,function(a){a.r=+p(a.value)}),wa(l,sf),e){var r=e*(b?1:Math.max(2*l.r/n,2*l.r/q))/2;wa(l,function(a){a.r+=r});wa(l,sf);wa(l,function(a){a.r-=r})}return uf(l,n/2,q/2,b?1:1/Math.max(2*l.r/n,2*l.r/q)),k}var b,d=t.layout.hierarchy().sort(Jh),e=0,h=[1,1];return a.size=function(b){return arguments.length?(h=b,a):h},a.radius=function(d){return arguments.length?(b=null==d||"function"==typeof d?d:+d,a):b},a.padding=function(b){return arguments.length?(e=+b,
a):e},zb(a,d)};t.layout.tree=function(){function a(a,q){var p=g.call(this,a,q),r=p[0],s=b(r);if(wa(s,d),s.parent.m=-s.z,Ab(s,e),n)Ab(r,h);else{var t=r,x=r,v=r;Ab(r,function(a){a.x<t.x&&(t=a);a.x>x.x&&(x=a);a.depth>v.depth&&(v=a)});var w=k(t,x)/2-t.x,y=l[0]/(x.x+k(x,t)/2+w),z=l[1]/(v.depth||1);Ab(r,function(a){a.x=(a.x+w)*y;a.y=a.depth*z})}return p}function b(a){for(var d={A:null,children:[a]},e=[d];null!=(a=e.pop());)for(var f,h=a.children,g=0,k=h.length;k>g;++g)e.push((h[g]=f={_:h[g],parent:a,children:(f=
h[g].children)&&f.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=f);return d.children[0]}function d(a){var b=a.children,e=a.parent.children,f=a.i?e[a.i-1]:null;if(b.length){for(var h,g=0,l=0,m=a.children,n=m.length;0<=--n;)h=m[n],h.z+=g,h.m+=g,g+=h.s+(l+=h.c);b=(b[0].z+b[b.length-1].z)/2;f?(a.z=f.z+k(a._,f._),a.m=a.z-b):a.z=b}else f&&(a.z=f.z+k(a._,f._));b=a.parent;e=a.parent.A||e[0];if(f){for(var g=h=a,l=f,m=h.parent.children[0],n=h.m,q=g.m,p=l.m,r=m.m;l=od(l),h=nd(h),l&&h;){m=nd(m);g=
od(g);g.a=a;f=l.z+p-h.z-n+k(l._,h._);if(0<f){var s=l.a.parent===a.parent?l.a:e,u=a,t=f,x=t/(u.i-s.i);u.c-=x;u.s+=t;s.c+=x;u.z+=t;u.m+=t;n+=f;q+=f}p+=l.m;n+=h.m;r+=m.m;q+=g.m}l&&!od(g)&&(g.t=l,g.m+=p-q);h&&!nd(m)&&(m.t=h,m.m+=n-r,e=a)}b.A=e}function e(a){a._.x=a.z+a.parent.m;a.m+=a.parent.m}function h(a){a.x*=l[0];a.y=a.depth*l[1]}var g=t.layout.hierarchy().sort(null).value(null),k=vf,l=[1,1],n=null;return a.separation=function(b){return arguments.length?(k=b,a):k},a.size=function(b){return arguments.length?
(n=null==(l=b)?h:null,a):n?null:l},a.nodeSize=function(b){return arguments.length?(n=null==(l=b)?null:h,a):n?l:null},zb(a,g)};t.layout.cluster=function(){function a(a,g){var k,l=b.call(this,a,g),n=l[0],q=0;wa(n,function(a){var b=a.children;b&&b.length?(a.x=Nh(b),a.y=Mh(b)):(a.x=k?q+=d(a,k):0,a.y=0,k=a)});var p=wf(n),r=xf(n),s=p.x-d(p,r)/2,t=r.x+d(r,p)/2;return wa(n,h?function(a){a.x=(a.x-n.x)*e[0];a.y=(n.y-a.y)*e[1]}:function(a){a.x=(a.x-s)/(t-s)*e[0];a.y=(1-(n.y?a.y/n.y:1))*e[1]}),l}var b=t.layout.hierarchy().sort(null).value(null),
d=vf,e=[1,1],h=!1;return a.separation=function(b){return arguments.length?(d=b,a):d},a.size=function(b){return arguments.length?(h=null==(e=b),a):h?null:e},a.nodeSize=function(b){return arguments.length?(h=null!=(e=b),a):h?e:null},zb(a,b)};t.layout.treemap=function(){function a(a,b){for(var d,e,f=-1,h=a.length;++f<h;)e=(d=a[f]).value*(0>b?0:b),d.area=isNaN(e)||0>=e?0:e}function b(d){var h=d.children;if(h&&h.length){var g,k=p(d),l=[],m=h.slice(),n=1/0,q="slice"===s?k.dx:"dice"===s?k.dy:"slice-dice"===
s?1&d.depth?k.dy:k.dx:Math.min(k.dx,k.dy);a(m,k.dx*k.dy/d.value);for(l.area=0;0<(d=m.length);){l.push(d=m[d-1]);l.area+=d.area;var r;if(!(r="squarify"!==s)){d=q;g=void 0;var t=l.area;r=0;for(var u=1/0,v=-1,w=l.length;++v<w;)(g=l[v].area)&&(u>g&&(u=g),g>r&&(r=g));r=(g=(t*=t,d*=d,t?Math.max(d*r*x/t,t/(d*u*x)):1/0))<=n}r?(m.pop(),n=g):(l.area-=l.pop().area,e(l,q,k,!1),q=Math.min(k.dx,k.dy),l.length=l.area=0,n=1/0)}l.length&&(e(l,q,k,!0),l.length=l.area=0);h.forEach(b)}}function d(b){var f=b.children;
if(f&&f.length){var h=p(b),g=f.slice(),k=[];a(g,h.dx*h.dy/b.value);for(k.area=0;b=g.pop();)k.push(b),k.area+=b.area,null!=b.z&&(e(k,b.z?h.dx:h.dy,h,!g.length),k.length=k.area=0);f.forEach(d)}}function e(a,b,d,f){var h,g=-1,k=a.length,m=d.x,n=d.y,q=b?l(a.area/b):0;if(b==d.dx){for((f||q>d.dy)&&(q=d.dy);++g<k;)h=a[g],h.x=m,h.y=n,h.dy=q,m+=h.dx=Math.min(d.x+d.dx-m,q?l(h.area/q):0);h.z=!0;h.dx+=d.x+d.dx-m;d.y+=q;d.dy-=q}else{for((f||q>d.dx)&&(q=d.dx);++g<k;)h=a[g],h.x=m,h.y=n,h.dx=q,n+=h.dy=Math.min(d.y+
d.dy-n,q?l(h.area/q):0);h.z=!1;h.dy+=d.y+d.dy-n;d.x+=q;d.dx-=q}}function h(e){e=g||k(e);var l=e[0];return l.x=0,l.y=0,l.dx=n[0],l.dy=n[1],g&&k.revalue(l),a([l],l.dx*l.dy/l.value),(g?d:b)(l),r&&(g=e),e}var g,k=t.layout.hierarchy(),l=Math.round,n=[1,1],q=null,p=pd,r=!1,s="squarify",x=.5*(1+Math.sqrt(5));return h.size=function(a){return arguments.length?(n=a,h):n},h.padding=function(a){function b(d){var e=a.call(h,d,d.depth);return null==e?pd(d):yf(d,"number"==typeof e?[e,e,e,e]:e)}function d(b){return yf(b,
a)}if(!arguments.length)return q;var e;return p=null==(q=a)?pd:"function"==(e=typeof a)?b:"number"===e?(a=[a,a,a,a],d):d,h},h.round=function(a){return arguments.length?(l=a?Math.round:Number,h):l!=Number},h.sticky=function(a){return arguments.length?(r=a,g=null,h):r},h.ratio=function(a){return arguments.length?(x=a,h):x},h.mode=function(a){return arguments.length?(s=a+"",h):s},zb(h,k)};t.random={normal:function(a,b){var d=arguments.length;return 2>d&&(b=1),1>d&&(a=0),function(){var d,e;do d=2*Math.random()-
1,e=2*Math.random()-1,e=d*d+e*e;while(!e||1<e);return a+b*d*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=t.random.normal.apply(t,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=t.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,d=0;a>d;d++)b+=Math.random();return b}}};t.scale={};var Ph={floor:X,ceil:X};t.scale.linear=function(){return Af([0,1],[0,1],Wa,!1)};var Sh={s:1,g:1,p:1,r:1,e:1};t.scale.log=function(){return Bf(t.scale.linear().domain([0,
1]),10,!0,[1,10])};var Cf=t.format(".0e"),Th={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};t.scale.pow=function(){return Df(t.scale.linear(),1,[0,1])};t.scale.sqrt=function(){return t.scale.pow().exponent(.5)};t.scale.ordinal=function(){return Ef([],{t:"range",a:[[]]})};t.scale.category10=function(){return t.scale.ordinal().range(ti)};t.scale.category20=function(){return t.scale.ordinal().range(ui)};t.scale.category20b=function(){return t.scale.ordinal().range(vi)};
t.scale.category20c=function(){return t.scale.ordinal().range(wi)};var ti=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Gb),ui=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Gb),vi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,
10834324,13528509,14589654].map(Gb),wi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Gb);t.scale.quantile=function(){return Ff([],[])};t.scale.quantize=function(){return Gf(0,1,[0,1])};t.scale.threshold=function(){return Hf([.5],[0,1])};t.scale.identity=function(){return If([0,1])};t.svg={};t.svg.arc=function(){function a(){var a=b.apply(this,arguments),g=d.apply(this,
arguments),k=e.apply(this,arguments)+Xa,l=h.apply(this,arguments)+Xa,n=(k>l&&(n=k,k=l,l=n),l-k),q=F>n?"0":"1",p=Math.cos(k),k=Math.sin(k),r=Math.cos(l),l=Math.sin(l);return n>=xi?a?"M0,"+g+"A"+g+","+g+" 0 1,1 0,"+-g+"A"+g+","+g+" 0 1,1 0,"+g+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+g+"A"+g+","+g+" 0 1,1 0,"+-g+"A"+g+","+g+" 0 1,1 0,"+g+"Z":a?"M"+g*p+","+g*k+"A"+g+","+g+" 0 "+q+",1 "+g*r+","+g*l+"L"+a*r+","+a*l+"A"+a+","+a+" 0 "+q+",0 "+a*p+","+a*k+"Z":"M"+g*p+","+g*k+
"A"+g+","+g+" 0 "+q+",1 "+g*r+","+g*l+"L0,0Z"}var b=Uh,d=Vh,e=Jf,h=Kf;return a.innerRadius=function(d){return arguments.length?(b=J(d),a):b},a.outerRadius=function(b){return arguments.length?(d=J(b),a):d},a.startAngle=function(b){return arguments.length?(e=J(b),a):e},a.endAngle=function(b){return arguments.length?(h=J(b),a):h},a.centroid=function(){var a=(b.apply(this,arguments)+d.apply(this,arguments))/2,g=(e.apply(this,arguments)+h.apply(this,arguments))/2+Xa;return[Math.cos(g)*a,Math.sin(g)*a]},
a};var Xa=-Y,xi=ha-C;t.svg.line=function(){return Lf(X)};var sd=t.map({linear:ia,"linear-closed":function(a){return ia(a)+"Z"},step:function(a){for(var b=0,d=a.length,e=a[0],h=[e[0],",",e[1]];++b<d;)h.push("H",(e[0]+(e=a[b])[0])/2,"V",e[1]);return 1<d&&h.push("H",e[0]),h.join("")},"step-before":td,"step-after":ud,basis:Mf,"basis-open":function(a){if(4>a.length)return ia(a);for(var b,d=[],e=-1,h=a.length,g=[0],k=[0];3>++e;)b=a[e],g.push(b[0]),k.push(b[1]);d.push(la(Na,g)+","+la(Na,k));for(--e;++e<
h;)b=a[e],g.shift(),g.push(b[0]),k.shift(),k.push(b[1]),wd(d,g,k);return d.join("")},"basis-closed":function(a){for(var b,d,e=-1,h=a.length,g=h+4,k=[],l=[];4>++e;)d=a[e%h],k.push(d[0]),l.push(d[1]);b=[la(Na,k),",",la(Na,l)];for(--e;++e<g;)d=a[e%h],k.shift(),k.push(d[0]),l.shift(),l.push(d[1]),wd(b,k,l);return b.join("")},bundle:function(a,b){var d=a.length-1;if(d)for(var e,h,g=a[0][0],k=a[0][1],l=a[d][0]-g,n=a[d][1]-k,q=-1;++q<=d;)e=a[q],h=q/d,e[0]=b*e[0]+(1-b)*(g+h*l),e[1]=b*e[1]+(1-b)*(k+h*n);return Mf(a)},
cardinal:function(a,b){return 3>a.length?ia(a):a[0]+hc(a,vd(a,b))},"cardinal-open":function(a,b){return 4>a.length?ia(a):a[1]+hc(a.slice(1,a.length-1),vd(a,b))},"cardinal-closed":function(a,b){return 3>a.length?ia(a):a[0]+hc((a.push(a[0]),a),vd([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=ia(a);else{var b=a[0],d,e,h,g,k=[],l;d=0;l=a.length-1;for(var n=[],q=a[1],p=n[0]=xd(a[0],q);++d<l;)n[d]=(p+(p=xd(q,q=a[d+1])))/2;l=(n[d]=p,n);n=-1;for(q=a.length-1;++n<q;)d=xd(a[n],
a[n+1]),I(d)<C?l[n]=l[n+1]=0:(e=l[n]/d,h=l[n+1]/d,g=e*e+h*h,9<g&&(g=3*d/Math.sqrt(g),l[n]=g*e,l[n+1]=g*h));for(n=-1;++n<=q;)g=(a[Math.min(q,n+1)][0]-a[Math.max(0,n-1)][0])/(6*(1+l[n]*l[n])),k.push([g||0,l[n]*g||0]);a=b+hc(a,k)}return a}});sd.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var Nf=[0,2/3,1/3,0],Of=[0,1/3,2/3,0],Na=[0,1/6,2/3,1/6];t.svg.line.radial=function(){var a=Lf(Pf);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a};td.reverse=ud;ud.reverse=td;t.svg.area=function(){return Qf(X)};
t.svg.area.radial=function(){var a=Qf(Pf);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a};t.svg.chord=function(){function a(a,g){var k=b(this,e,a,g),l=b(this,h,a,g);return"M"+k.p0+d(k.r,k.p1,k.a1-k.a0)+(k.a0==l.a0&&k.a1==l.a1?"Q 0,0 "+k.p0:"Q 0,0 "+l.p0+d(l.r,l.p1,l.a1-l.a0)+("Q 0,0 "+k.p0))+"Z"}function b(a,d,e,f){var h=d.call(a,e,f);d=g.call(a,h,f);e=k.call(a,h,f)+Xa;
a=l.call(a,h,f)+Xa;return{r:d,a0:e,a1:a,p0:[d*Math.cos(e),d*Math.sin(e)],p1:[d*Math.cos(a),d*Math.sin(a)]}}function d(a,b,e){return"A"+a+","+a+" 0 "+ +(e>F)+",1 "+b}var e=Zc,h=$c,g=Wh,k=Jf,l=Kf;return a.radius=function(b){return arguments.length?(g=J(b),a):g},a.source=function(b){return arguments.length?(e=J(b),a):e},a.target=function(b){return arguments.length?(h=J(b),a):h},a.startAngle=function(b){return arguments.length?(k=J(b),a):k},a.endAngle=function(b){return arguments.length?(l=J(b),a):l},
a};t.svg.diagonal=function(){function a(a,h){var g=b.call(this,a,h),k=d.call(this,a,h),l=(g.y+k.y)/2,g=[g,{x:g.x,y:l},{x:k.x,y:l},k];return g=g.map(e),"M"+g[0]+"C"+g[1]+" "+g[2]+" "+g[3]}var b=Zc,d=$c,e=Rf;return a.source=function(d){return arguments.length?(b=J(d),a):b},a.target=function(b){return arguments.length?(d=J(b),a):d},a.projection=function(b){return arguments.length?(e=b,a):e},a};t.svg.diagonal.radial=function(){var a=t.svg.diagonal(),b=Rf,d=a.projection;return a.projection=function(a){return arguments.length?
d(Xh(b=a)):b},a};t.svg.symbol=function(){function a(a,e){return(jg.get(b.call(this,a,e))||Sf)(d.call(this,a,e))}var b=Zh,d=Yh;return a.type=function(d){return arguments.length?(b=J(d),a):b},a.size=function(b){return arguments.length?(d=J(b),a):d},a};var jg=t.map({circle:Sf,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*kg));var b=a*kg;return"M0,"+-a+"L"+b+",0 0,"+a+
" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/zc);var b=a*zc/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/zc);var b=a*zc/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});t.svg.symbolTypes=jg.keys();var Za,lc,zc=Math.sqrt(3),kg=Math.tan(30*E),W=[],Zf=0;W.call=O.call;W.empty=O.empty;W.node=O.node;W.size=O.size;t.transition=function(a){return arguments.length?
Za?a.transition():a:Yf.transition()};t.transition.prototype=W;W.select=function(a){var b,d,e,h=this.id,g=[];a=T(a);for(var k=-1,l=this.length;++k<l;){g.push(b=[]);for(var n=this[k],q=-1,p=n.length;++q<p;)(e=n[q])&&(d=a.call(e,e.__data__,q,k))?("__data__"in e&&(d.__data__=e.__data__),ic(d,q,h,e.__transition__[h]),b.push(d)):b.push(null)}return Bb(g,h)};W.selectAll=function(a){var b,d,e,h,g=this.id,k=[];a=Id(a);for(var l=-1,n=this.length;++l<n;)for(var q=this[l],p=-1,r=q.length;++p<r;)if(b=q[p]){h=
b.__transition__[g];d=a.call(b,b.__data__,p,l);k.push(b=[]);for(var s=-1,t=d.length;++s<t;)(e=d[s])&&ic(e,s,g,h),b.push(e)}return Bb(k,g)};W.filter=function(a){var b,d,e,h=[];"function"!=typeof a&&(a=Qd(a));for(var g=0,k=this.length;k>g;g++){h.push(b=[]);d=this[g];for(var l=0,n=d.length;n>l;l++)(e=d[l])&&a.call(e,e.__data__,l,g)&&b.push(e)}return Bb(h,this.id)};W.tween=function(a,b){var d=this.id;return 2>arguments.length?this.node().__transition__[d].tween.get(a):xa(this,null==b?function(b){b.__transition__[d].tween.remove(a)}:
function(e){e.__transition__[d].tween.set(a,b)})};W.attr=function(a,b){function d(){this.removeAttribute(l)}function e(){this.removeAttributeNS(l.space,l.local)}function h(a){return null==a?d:(a+="",function(){var b,d=this.getAttribute(l);return d!==a&&(b=k(d,a),function(a){this.setAttribute(l,b(a))})})}function g(a){return null==a?e:(a+="",function(){var b,d=this.getAttributeNS(l.space,l.local);return d!==a&&(b=k(d,a),function(a){this.setAttributeNS(l.space,l.local,b(a))})})}if(2>arguments.length){for(b in a)this.attr(b,
a[b]);return this}var k="transform"==a?mf:Wa,l=t.ns.qualify(a);return yd(this,"attr."+a,b,l.local?g:h)};W.attrTween=function(a,b){function d(a,e){var g=b.call(this,a,e,this.getAttribute(h));return g&&function(a){this.setAttribute(h,g(a))}}function e(a,d){var g=b.call(this,a,d,this.getAttributeNS(h.space,h.local));return g&&function(a){this.setAttributeNS(h.space,h.local,g(a))}}var h=t.ns.qualify(a);return this.tween("attr."+a,h.local?e:d)};W.style=function(a,b,d){function e(){this.style.removeProperty(a)}
var h=arguments.length;if(3>h){if("string"!=typeof a){2>h&&(b="");for(d in a)this.style(d,a[d],b);return this}d=""}return yd(this,"style."+a,b,function(b){return null==b?e:(b+="",function(){var e,f=aa.getComputedStyle(this,null).getPropertyValue(a);return f!==b&&(e=Wa(f,b),function(b){this.style.setProperty(a,e(b),d)})})})};W.styleTween=function(a,b,d){return 3>arguments.length&&(d=""),this.tween("style."+a,function(e,h){var g=b.call(this,e,h,aa.getComputedStyle(this,null).getPropertyValue(a));return g&&
function(b){this.style.setProperty(a,g(b),d)}})};W.text=function(a){return yd(this,"text",a,$h)};W.remove=function(){return this.each("end.transition",function(){var a;2>this.__transition__.count&&(a=this.parentNode)&&a.removeChild(this)})};W.ease=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].ease:("function"!=typeof a&&(a=t.ease.apply(t,arguments)),xa(this,function(d){d.__transition__[b].ease=a}))};W.delay=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].delay:
xa(this,"function"==typeof a?function(d,e,h){d.__transition__[b].delay=+a.call(d,d.__data__,e,h)}:(a=+a,function(d){d.__transition__[b].delay=a}))};W.duration=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].duration:xa(this,"function"==typeof a?function(d,e,h){d.__transition__[b].duration=Math.max(1,a.call(d,d.__data__,e,h))}:(a=Math.max(1,a),function(d){d.__transition__[b].duration=a}))};W.each=function(a,b){var d=this.id;if(2>arguments.length){var e=lc,h=Za;Za=
d;xa(this,function(b,e,f){lc=b.__transition__[d];a.call(b,b.__data__,e,f)});lc=e;Za=h}else xa(this,function(e){e=e.__transition__[d];(e.event||(e.event=t.dispatch("start","end"))).on(a,b)});return this};W.transition=function(){for(var a,b,d,e,h=this.id,g=++Zf,k=[],l=0,n=this.length;n>l;l++){k.push(a=[]);b=this[l];for(var q=0,p=b.length;p>q;q++)(d=b[q])&&(e=Object.create(d.__transition__[h]),e.delay+=e.duration,ic(d,q,g,e)),a.push(d)}return Bb(k,g)};t.svg.axis=function(){function a(a){a.each(function(){var a,
q=t.select(this),p=this.__chart__||d,r=this.__chart__=d.copy(),s=null==n?r.ticks?r.ticks.apply(r,l):r.domain():n,x=null==b?r.tickFormat?r.tickFormat.apply(r,l):X:b,v=q.selectAll(".tick").data(s,r),s=v.enter().insert("g",".domain").attr("class","tick").style("opacity",C),w=t.transition(v.exit()).style("opacity",C).remove(),y=t.transition(v.order()).style("opacity",1),z=dc(r),q=q.selectAll(".domain").data([0]),q=(q.enter().append("path").attr("class","domain"),t.transition(q));s.append("line");s.append("text");
var N=s.select("line"),A=y.select("line"),x=v.select("text").text(x),v=s.select("text"),L=y.select("text");switch(e){case "bottom":a=Tf;N.attr("y2",h);v.attr("y",Math.max(h,0)+k);A.attr("x2",0).attr("y2",h);L.attr("x",0).attr("y",Math.max(h,0)+k);x.attr("dy",".71em").style("text-anchor","middle");q.attr("d","M"+z[0]+","+g+"V0H"+z[1]+"V"+g);break;case "top":a=Tf;N.attr("y2",-h);v.attr("y",-(Math.max(h,0)+k));A.attr("x2",0).attr("y2",-h);L.attr("x",0).attr("y",-(Math.max(h,0)+k));x.attr("dy","0em").style("text-anchor",
"middle");q.attr("d","M"+z[0]+","+-g+"V0H"+z[1]+"V"+-g);break;case "left":a=Uf;N.attr("x2",-h);v.attr("x",-(Math.max(h,0)+k));A.attr("x2",-h).attr("y2",0);L.attr("x",-(Math.max(h,0)+k)).attr("y",0);x.attr("dy",".32em").style("text-anchor","end");q.attr("d","M"+-g+","+z[0]+"H0V"+z[1]+"H"+-g);break;case "right":a=Uf,N.attr("x2",h),v.attr("x",Math.max(h,0)+k),A.attr("x2",h).attr("y2",0),L.attr("x",Math.max(h,0)+k).attr("y",0),x.attr("dy",".32em").style("text-anchor","start"),q.attr("d","M"+g+","+z[0]+
"H0V"+z[1]+"H"+g)}if(r.rangeBand)var M=r,E=M.rangeBand()/2,p=r=function(a){return M(a)+E};else p.rangeBand?p=r:w.call(a,r);s.call(a,p);y.call(a,r)})}var b,d=t.scale.linear(),e=lg,h=6,g=6,k=3,l=[10],n=null;return a.scale=function(b){return arguments.length?(d=b,a):d},a.orient=function(b){return arguments.length?(e=b in yi?b+"":lg,a):e},a.ticks=function(){return arguments.length?(l=arguments,a):l},a.tickValues=function(b){return arguments.length?(n=b,a):n},a.tickFormat=function(d){return arguments.length?
(b=d,a):b},a.tickSize=function(b){var d=arguments.length;return d?(h=+b,g=+arguments[d-1],a):h},a.innerTickSize=function(b){return arguments.length?(h=+b,a):h},a.outerTickSize=function(b){return arguments.length?(g=+b,a):g},a.tickPadding=function(b){return arguments.length?(k=+b,a):k},a.tickSubdivide=function(){return arguments.length&&a},a};var lg="bottom",yi={top:1,right:1,bottom:1,left:1};t.svg.brush=function(){function a(g){g.each(function(){var g=t.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color",
"rgba(0,0,0,0)").on("mousedown.brush",h).on("touchstart.brush",h),k=g.selectAll(".background").data([0]);k.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");g.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var l=g.selectAll(".resize").data(v,X);l.exit().remove();l.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return zi[a]}).append("rect").attr("x",
function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");l.style("display",a.empty()?"none":null);var p,g=t.transition(g),k=t.transition(k);n&&(p=dc(n),k.attr("x",p[0]).attr("width",p[1]-p[0]),d(g));q&&(p=dc(q),k.attr("y",p[0]).attr("height",p[1]-p[0]),e(g));b(g)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+p[+/e$/.test(a)]+","+r[+/^s/.test(a)]+")"})}function d(a){a.select(".extent").attr("x",
p[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",p[1]-p[0])}function e(a){a.select(".extent").attr("y",r[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",r[1]-r[0])}function h(){function v(){var a=t.mouse(A),h=!1;N&&(a[0]+=N[0],a[1]+=N[1]);T||(t.event.altKey?(z||(z=[(p[0]+p[1])/2,(r[0]+r[1])/2]),J[0]=p[+(a[0]<z[0])],J[1]=r[+(a[1]<z[1])]):z=null);F&&w(a,n,0)&&(d(M),h=!0);I&&w(a,q,1)&&(e(M),h=!0);h&&(b(M),C({type:"brush",mode:T?"move":"resize"}))}function w(a,b,d){var e,h,f=dc(b);b=
f[0];var f=f[1],l=J[d],m=d?r:p,n=m[1]-m[0];return T&&(b-=l,f-=n+l),e=(d?x:s)?Math.max(b,Math.min(f,a[d])):a[d],T?h=(e+=l)+n:(z&&(l=Math.max(b,Math.min(f,2*z[d]-e))),e>l?(h=e,e=l):h=l),m[0]!=e||m[1]!=h?(d?k=null:g=null,m[0]=e,m[1]=h,!0):void 0}function y(){v();M.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);t.select("body").style("cursor",null);P.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",
null).on("keyup.brush",null);O();C({type:"brushend"})}var z,N,A=this,B=t.select(t.event.target),C=l.of(A,arguments),M=t.select(A),E=B.datum(),F=!/^(n|s)$/.test(E)&&n,I=!/^(e|w)$/.test(E)&&q,T=B.classed("extent"),O=Fb(),J=t.mouse(A),P=t.select(aa).on("keydown.brush",function(){32==t.event.keyCode&&(T||(z=null,J[0]-=p[1],J[1]-=r[1],T=2),L())}).on("keyup.brush",function(){32==t.event.keyCode&&2==T&&(J[0]+=p[1],J[1]+=r[1],T=0,L())});if(t.event.changedTouches?P.on("touchmove.brush",v).on("touchend.brush",
y):P.on("mousemove.brush",v).on("mouseup.brush",y),M.interrupt().selectAll("*").interrupt(),T)J[0]=p[0]-J[0],J[1]=r[0]-J[1];else if(E){var S=+/w$/.test(E),E=+/^n/.test(E);N=[p[1-S]-J[0],r[1-E]-J[1]];J[0]=p[S];J[1]=r[E]}else t.event.altKey&&(z=J.slice());M.style("pointer-events","none").selectAll(".resize").style("display",null);t.select("body").style("cursor",B.style("cursor"));C({type:"brushstart"});v()}var g,k,l=N(a,"brushstart","brush","brushend"),n=null,q=null,p=[0,0],r=[0,0],s=!0,x=!0,v=Fd[0];
return a.event=function(a){a.each(function(){var a=l.of(this,arguments),b={x:p,y:r,i:g,j:k},d=this.__chart__||b;this.__chart__=b;Za?t.select(this).transition().each("start.brush",function(){g=d.i;k=d.j;p=d.x;r=d.y;a({type:"brushstart"})}).tween("brush:brush",function(){var d=cc(p,b.x),e=cc(r,b.y);return g=k=null,function(h){p=b.x=d(h);r=b.y=e(h);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){g=b.i;k=b.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),
a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(n=b,v=Fd[!n<<1|!q],a):n},a.y=function(b){return arguments.length?(q=b,v=Fd[!n<<1|!q],a):q},a.clamp=function(b){return arguments.length?(n&&q?(s=!!b[0],x=!!b[1]):n?s=!!b:q&&(x=!!b),a):n&&q?[s,x]:n?s:q?x:null},a.extent=function(b){var d,e,h,f,l;return arguments.length?(n&&(d=b[0],e=b[1],q&&(d=d[0],e=e[0]),g=[d,e],n.invert&&(d=n(d),e=n(e)),d>e&&(l=d,d=e,e=l),(d!=p[0]||e!=p[1])&&(p=[d,e])),q&&(h=b[0],f=b[1],
n&&(h=h[1],f=f[1]),k=[h,f],q.invert&&(h=q(h),f=q(f)),h>f&&(l=h,h=f,f=l),(h!=r[0]||f!=r[1])&&(r=[h,f])),a):(n&&(g?(d=g[0],e=g[1]):(d=p[0],e=p[1],n.invert&&(d=n.invert(d),e=n.invert(e)),d>e&&(l=d,d=e,e=l))),q&&(k?(h=k[0],f=k[1]):(h=r[0],f=r[1],q.invert&&(h=q.invert(h),f=q.invert(f)),h>f&&(l=h,h=f,f=l))),n&&q?[[d,h],[e,f]]:n?[d,e]:q&&[h,f])},a.clear=function(){return a.empty()||(p=[0,0],r=[0,0],g=k=null),a},a.empty=function(){return!!n&&p[0]==p[1]||!!q&&r[0]==r[1]},t.rebind(a,l,"on")};var zi={n:"ns-resize",
e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Fd=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Gd=A.format=ag.timeFormat,mg=Gd.utc,ng=mg("%Y-%m-%dT%H:%M:%S.%LZ");Gd.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?zd:ng;zd.parse=function(a){a=new Date(a);return isNaN(a)?null:a};zd.toString=ng.toString;A.second=Ra(function(a){return new Z(1E3*Math.floor(a/1E3))},function(a,b){a.setTime(a.getTime()+1E3*
Math.floor(b))},function(a){return a.getSeconds()});A.seconds=A.second.range;A.seconds.utc=A.second.utc.range;A.minute=Ra(function(a){return new Z(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});A.minutes=A.minute.range;A.minutes.utc=A.minute.utc.range;A.hour=Ra(function(a){var b=a.getTimezoneOffset()/60;return new Z(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},function(a){return a.getHours()});
A.hours=A.hour.range;A.hours.utc=A.hour.utc.range;A.month=Ra(function(a){return a=A.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});A.months=A.month.range;A.months.utc=A.month.utc.range;var jc=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Hd=[[A.second,1],[A.second,5],[A.second,15],[A.second,30],[A.minute,1],[A.minute,5],[A.minute,15],[A.minute,30],[A.hour,1],[A.hour,3],[A.hour,6],[A.hour,12],
[A.day,1],[A.day,2],[A.week,1],[A.month,1],[A.month,3],[A.year,1]],Ai=Gd.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",fb]]),ai={range:function(a,b,d){return t.range(Math.ceil(a/d)*d,+b,d).map(Ya)},floor:X,ceil:X};
Hd.year=A.year;A.scale=function(){return Ad(t.scale.linear(),Hd,Ai)};var og=Hd.map(function(a){return[a[0].utc,a[1]]}),Bi=mg.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",fb]]);og.year=A.year.utc;
A.scale.utc=function(){return Ad(t.scale.linear(),og,Bi)};t.text=Nc(function(a){return a.responseText});t.json=function(a,b){return Ib(a,"application/json",bi,b)};t.html=function(a,b){return Ib(a,"text/html",ci,b)};t.xml=Nc(function(a){return a.responseXML});"function"==typeof define&&define.amd?define(t):"object"==typeof module&&module.exports&&(module.exports=t);this.d3=t}();this.j$=this.jStat=function(e,k){function d(b,d){var h=b>d?b:d;return e.pow(10,17-~~(e.log(0<h?h:-h)*e.LOG10E))}function g(b){return"[object Function]"===s.call(b)}function b(b){return"number"==typeof b&&b===b}function h(){return new h._init(arguments)}function l(){return 0}function q(){return 1}function n(b,d){return b===d?1:0}var p=Array.prototype.concat,r=Array.prototype.slice,s=Object.prototype.toString,w=Array.isArray||function(b){return"[object Array]"===s.call(b)};h.fn=h.prototype;h._init=
function(d){var e;if(w(d[0]))if(w(d[0][0])){g(d[1])&&(d[0]=h.map(d[0],d[1]));for(e=0;e<d[0].length;e++)this[e]=d[0][e];this.length=d[0].length}else this[0]=g(d[1])?h.map(d[0],d[1]):d[0],this.length=1;else{if(b(d[0]))this[0]=h.seq.apply(null,d);else{if(d[0]instanceof h)return h(d[0].toArray());this[0]=[]}this.length=1}return this};h._init.prototype=h.prototype;h._init.constructor=h;h.utils={calcRdx:d,isArray:w,isFunction:g,isNumber:b,toVector:function(b){return p.apply([],b)}};h.extend=function(b){var d,
e;if(1===arguments.length){for(e in b)h[e]=b[e];return this}for(d=1;d<arguments.length;d++)for(e in arguments[d])b[e]=arguments[d][e];return b};h.rows=function(b){return b.length||1};h.cols=function(b){return b[0].length||1};h.dimensions=function(b){return{rows:h.rows(b),cols:h.cols(b)}};h.row=function(b,d){return b[d]};h.col=function(b,d){for(var e=Array(b.length),h=0;h<b.length;h++)e[h]=[b[h][d]];return e};h.diag=function(b){for(var d=h.rows(b),e=Array(d),g=0;g<d;g++)e[g]=[b[g][g]];return e};h.antidiag=
function(b){for(var d=h.rows(b)-1,e=Array(d),g=0;0<=d;d--,g++)e[g]=[b[g][d]];return e};h.transpose=function(b){var d=[],e,h,g,k,l;w(b[0])||(b=[b]);h=b.length;g=b[0].length;for(l=0;l<g;l++){e=Array(h);for(k=0;k<h;k++)e[k]=b[k][l];d.push(e)}return 1===d.length?d[0]:d};h.map=function(b,d,e){var h,g,k,l;w(b[0])||(b=[b]);h=b.length;g=b[0].length;k=e?b:Array(h);for(e=0;e<h;e++)for(k[e]||(k[e]=Array(g)),l=0;l<g;l++)k[e][l]=d(b[e][l],e,l);return 1===k.length?k[0]:k};h.alter=function(b,d){return h.map(b,d,
!0)};h.create=function(b,d,e){var h=Array(b),k,l;g(d)&&(e=d,d=b);for(k=0;k<b;k++)for(h[k]=Array(d),l=0;l<d;l++)h[k][l]=e(k,l);return h};h.zeros=function(d,e){return b(e)||(e=d),h.create(d,e,l)};h.ones=function(d,e){return b(e)||(e=d),h.create(d,e,q)};h.rand=function(d,g){return b(g)||(g=d),h.create(d,g,e.random)};h.identity=function(d,e){return b(e)||(e=d),h.create(d,e,n)};h.symmetric=function(b){var d=b.length,e,h;if(b.length!==b[0].length)return!1;for(e=0;e<d;e++)for(h=0;h<d;h++)if(b[h][e]!==b[e][h])return!1;
return!0};h.clear=function(b){return h.alter(b,l)};h.seq=function(b,e,h,k){g(k)||(k=!1);var l=[],n=d(b,e);h=(e*n-b*n)/((h-1)*n);var q=b,p;for(p=0;q<=e;p++,q=(b*n+h*n*p)/n)l.push(k?k(q,p):q);return l};var v=h.prototype;return v.length=0,v.push=Array.prototype.push,v.sort=Array.prototype.sort,v.splice=Array.prototype.splice,v.slice=Array.prototype.slice,v.toArray=function(){return 1<this.length?r.call(this):r.call(this)[0]},v.map=function(b,d){return h(h.map(this,b,d))},v.alter=function(b){return h.alter(this,
b),this},function(b){for(var d=0;d<b.length;d++)(function(b){v[b]=function(d){var e=this,g;return d?(setTimeout(function(){d.call(e,v[b].call(e))}),this):(g=h[b](this),w(g)?h(g):g)}})(b[d])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(b){for(var d=0;d<b.length;d++)(function(b){v[b]=function(d,e){var g=this;return e?(setTimeout(function(){e.call(g,v[b].call(g,d))}),this):h(h[b](this,d))}})(b[d])}(["row","col"]),function(b){for(var d=0;d<b.length;d++){var e=b[d];
v[e]=new Function("return jStat(jStat."+e+".apply(null, arguments));")}}(["create","zeros","ones","rand","identity"]),h}(Math);
(function(e,k){function d(b,d){return b-d}var g=e.utils.isFunction;e.sum=function(b){for(var d=0,e=b.length;0<=--e;)d+=b[e];return d};e.sumsqrd=function(b){for(var d=0,e=b.length;0<=--e;)d+=b[e]*b[e];return d};e.sumsqerr=function(b){for(var d=e.mean(b),g=0,k=b.length,p;0<=--k;)p=b[k]-d,g+=p*p;return g};e.product=function(b){for(var d=1,e=b.length;0<=--e;)d*=b[e];return d};e.min=function(b){for(var d=b[0],e=0;++e<b.length;)b[e]<d&&(d=b[e]);return d};e.max=function(b){for(var d=b[0],e=0;++e<b.length;)b[e]>
d&&(d=b[e]);return d};e.mean=function(b){return e.sum(b)/b.length};e.meansqerr=function(b){return e.sumsqerr(b)/b.length};e.geomean=function(b){return k.pow(e.product(b),1/b.length)};e.median=function(b){var e=b.length;b=b.slice().sort(d);return e&1?b[e/2|0]:(b[e/2-1]+b[e/2])/2};e.cumsum=function(b){var d=b.length,e=Array(d),g;e[0]=b[0];for(g=1;g<d;g++)e[g]=e[g-1]+b[g];return e};e.diff=function(b){var d=[],e=b.length,g;for(g=1;g<e;g++)d.push(b[g]-b[g-1]);return d};e.mode=function(b){var e=b.length;
b=b.slice().sort(d);var g=1,k=0,p=0,r=[],s;for(s=0;s<e;s++)b[s]===b[s+1]?g++:(g>k?(r=[b[s]],k=g,p=0):g===k&&(r.push(b[s]),p++),g=1);return 0===p?r[0]:r};e.range=function(b){return e.max(b)-e.min(b)};e.variance=function(b,d){return e.sumsqerr(b)/(b.length-(d?1:0))};e.stdev=function(b,d){return k.sqrt(e.variance(b,d))};e.meandev=function(b){var d=0,g=e.mean(b),n;for(n=b.length-1;0<=n;n--)d+=k.abs(b[n]-g);return d/b.length};e.meddev=function(b){var d=0,g=e.median(b),n;for(n=b.length-1;0<=n;n--)d+=k.abs(b[n]-
g);return d/b.length};e.coeffvar=function(b){return e.stdev(b)/e.mean(b)};e.quartiles=function(b){var e=b.length;b=b.slice().sort(d);return[b[k.round(e/4)-1],b[k.round(e/2)-1],b[k.round(3*e/4)-1]]};e.quantiles=function(b,e,g,n){var p=b.slice().sort(d),r=[e.length];b=b.length;var s,w,v;"undefined"==typeof g&&(g=.375);"undefined"==typeof n&&(n=.375);for(s=0;s<e.length;s++)w=e[s],v=g+w*(1-g-n),v=b*w+v,w=k.floor(k.max(1,k.min(v,b-1))),v=k.max(0,k.min(v-w,1)),r[s]=(1-v)*p[w-1]+v*p[w];return r};e.percentileOfScore=
function(b,d,e){var g=0,k=b.length,r=!1,s;"strict"===e&&(r=!0);for(s=0;s<k;s++)e=b[s],(r&&e<d||!r&&e<=d)&&g++;return g/k};e.covariance=function(b,d){var g=e.mean(b),k=e.mean(d),p=b.length,r=Array(p),s;for(s=0;s<p;s++)r[s]=(b[s]-g)*(d[s]-k);return e.sum(r)/(p-1)};e.corrcoeff=function(b,d){return e.covariance(b,d)/e.stdev(b,1)/e.stdev(d,1)};var b=e.prototype;b.cumsum=function(d,k){var q=[],n=0,p=this;g(d)&&(k=d,d=!1);if(k)return setTimeout(function(){k.call(p,b.cumsum.call(p,d))}),this;if(1<this.length){for(p=
!0===d?this:this.transpose();n<p.length;n++)q[n]=e.cumsum(p[n]);return q}return e.cumsum(this[0],d)};(function(d){for(var k=0;k<d.length;k++)(function(d){b[d]=function(h,k){var l=[],s=0,w=this;g(h)&&(k=h,h=!1);if(k)return setTimeout(function(){k.call(w,b[d].call(w,h))}),this;if(1<this.length){for(w=!0===h?this:this.transpose();s<w.length;s++)l[s]=e[d](w[s]);return!0===h?e[d](e.utils.toVector(l)):l}return e[d](this[0],h)}})(d[k])})("sum sumsqrd sumsqerr product min max mean meansqerr geomean median diff mode range variance stdev meandev meddev coeffvar quartiles".split(" "));
(function(d){for(var k=0;k<d.length;k++)(function(d){b[d]=function(){var h=[],k=0,l=this,s=Array.prototype.slice.call(arguments);if(g(s[s.length-1])){var w=s[s.length-1],v=s.slice(0,s.length-1);return setTimeout(function(){w.call(l,b[d].apply(l,v))}),this}w=void 0;if(1<this.length){for(l=l.transpose();k<l.length;k++)h[k]=e[d].apply(l,[l[k]].concat(s));return h}return e[d].apply(l,[this[0]].concat(s))}})(d[k])})(["quantiles","percentileOfScore"])})(this.jStat,Math);
(function(e,k){e.gammaln=function(d){var e=0,b=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5.395239384953E-6],h=1.000000000190015,l,q;q=(l=d)+5.5;for(q-=(d+.5)*k.log(q);6>e;e++)h+=b[e]/++l;return k.log(2.5066282746310007*h/d)-q};e.gammafn=function(d){var e=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],b=[-30.8402300119739,315.35062697960416,
-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],h=!1,l=0,q=0,n=0,p,r,s,w;if(0>=d)if(w=d%1+3.6E-16)h=(d&1?-1:1)*k.PI/k.sin(k.PI*w),d=1-d;else return Infinity;s=d;1>d?r=d++:r=(d-=l=(d|0)-1)-1;for(p=0;8>p;++p)n=(n+e[p])*r,q=q*r+b[p];w=n/q+1;if(s<d)w/=s;else if(s>d)for(p=0;p<l;++p)w*=d,d++;return h&&(w=h/w),w};e.gammap=function(d,g){var b=e.gammaln(d),h=d,l=1/d,q=l,n=g+1-d,p=1/1E-30,r=1/n,s=r,w=1,v=-~(8.5*k.log(1<=d?d:1/d)+.4*d+17);if(0>
g||0>=d)return NaN;if(g<d+1){for(;w<=v;w++)l+=q*=g/++h;return l*k.exp(-g+d*k.log(g)-b)}for(;w<=v;w++)h=-w*(w-d),n+=2,r=h*r+n,p=n+h/p,r=1/r,s=s*r*p;return 1-s*k.exp(-g+d*k.log(g)-b)};e.factorialln=function(d){return 0>d?NaN:e.gammaln(d+1)};e.factorial=function(d){return 0>d?NaN:e.gammafn(d+1)};e.combination=function(d,g){return 170<d||170<g?k.exp(e.combinationln(d,g)):e.factorial(d)/e.factorial(g)/e.factorial(d-g)};e.combinationln=function(d,g){return e.factorialln(d)-e.factorialln(g)-e.factorialln(d-
g)};e.permutation=function(d,g){return e.factorial(d)/e.factorial(d-g)};e.betafn=function(d,g){return 0>=d||0>=g?void 0:170<d+g?k.exp(e.betaln(d,g)):e.gammafn(d)*e.gammafn(g)/e.gammafn(d+g)};e.betaln=function(d,g){return e.gammaln(d)+e.gammaln(g)-e.gammaln(d+g)};e.betacf=function(d,e,b){var h=1,l=e+b,q=e+1,n=e-1,p=1,r=1-l*d/q,s,w,v;1E-30>k.abs(r)&&(r=1E-30);for(v=r=1/r;100>=h&&!(s=2*h,w=h*(b-h)*d/((n+s)*(e+s)),r=1+w*r,1E-30>k.abs(r)&&(r=1E-30),p=1+w/p,1E-30>k.abs(p)&&(p=1E-30),r=1/r,v=v*r*p,w=-(e+
h)*(l+h)*d/((e+s)*(q+s)),r=1+w*r,1E-30>k.abs(r)&&(r=1E-30),p=1+w/p,1E-30>k.abs(p)&&(p=1E-30),r=1/r,s=r*p,v*=s,3E-7>k.abs(s-1));h++);return v};e.gammapinv=function(d,g){var b=0,h=g-1,l=e.gammaln(g),q,n,p,r,s;if(1<=d)return k.max(100,g+100*k.sqrt(g));if(0>=d)return 0;for(1<g?(r=k.log(h),s=k.exp(h*(r-1)-l),n=.5>d?d:1-d,p=k.sqrt(-2*k.log(n)),q=(2.30753+.27061*p)/(1+p*(.99229+.04481*p))-p,.5>d&&(q=-q),q=k.max(.001,g*k.pow(1-1/(9*g)-q/(3*k.sqrt(g)),3))):(p=1-g*(.253+.12*g),d<p?q=k.pow(d/p,1/g):q=1-k.log(1-
(d-p)/(1-p)));12>b;b++){if(0>=q)return 0;n=e.gammap(g,q)-d;1<g?p=s*k.exp(-(q-h)+h*(k.log(q)-r)):p=k.exp(-q+h*k.log(q)-l);p=n/p;q-=p/=1-.5*k.min(1,p*((g-1)/q-1));0>=q&&(q=.5*(q+p));if(k.abs(p)<1E-8*q)break}return q};e.erf=function(d){var e=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-9.46595344482036E-4,3.66839497852761E-4,4.2523324806907E-5,-2.0278578112534E-5,-1.624290004647E-6,1.30365583558E-6,1.5626441722E-8,-8.5238095915E-8,6.529054439E-9,5.059343495E-9,-9.91364156E-10,
-2.27365122E-10,9.6467911E-11,2.394038E-12,-6.886027E-12,8.94487E-13,3.13092E-13,-1.12708E-13,3.81E-16,7.106E-15,-1.523E-15,-9.4E-17,1.21E-16,-2.8E-17],b=e.length-1,h=!1,l=0,q=0,n,p,r,s;0>d&&(d=-d,h=!0);n=2/(2+d);for(p=4*n-2;0<b;b--)r=l,l=p*l-q+e[b],q=r;return s=n*k.exp(-d*d+.5*(e[0]+p*l)-q),h?s-1:1-s};e.erfc=function(d){return 1-e.erf(d)};e.erfcinv=function(d){var g=0,b,h,l;if(2<=d)return-100;if(0>=d)return 100;l=1>d?d:2-d;b=k.sqrt(-2*k.log(l/2));for(b=-.70711*((2.30753+.27061*b)/(1+b*(.99229+.04481*
b))-b);2>g;g++)h=e.erfc(b)-l,b+=h/(1.1283791670955126*k.exp(-b*b)-b*h);return 1>d?b:-b};e.ibetainv=function(d,g,b){var h=g-1,l=b-1,q=0,n,p,r,s,w,v,x,y,L;if(0>=d)return 0;if(1<=d)return 1;1<=g&&1<=b?(r=.5>d?d:1-d,s=k.sqrt(-2*k.log(r)),v=(2.30753+.27061*s)/(1+s*(.99229+.04481*s))-s,.5>d&&(v=-v),x=(v*v-3)/6,y=2/(1/(2*g-1)+1/(2*b-1)),L=v*k.sqrt(x+y)/y-(1/(2*b-1)-1/(2*g-1))*(x+5/6-2/(3*y)),v=g/(g+b*k.exp(2*L))):(n=k.log(g/(g+b)),p=k.log(b/(g+b)),s=k.exp(g*n)/g,w=k.exp(b*p)/b,L=s+w,d<s/L?v=k.pow(g*L*d,
1/g):v=1-k.pow(b*L*(1-d),1/b));for(n=-e.gammaln(g)-e.gammaln(b)+e.gammaln(g+b);10>q&&0!==v&&1!==v&&!(w=e.ibeta(v,g,b)-d,s=k.exp(h*k.log(v)+l*k.log(1-v)+n),w/=s,v-=s=w/(1-.5*k.min(1,w*(h/v-l/(1-v)))),0>=v&&(v=.5*(v+s)),1<=v&&(v=.5*(v+s+1)),k.abs(s)<1E-8*v&&0<q);q++);return v};e.ibeta=function(d,g,b){var h=0===d||1===d?0:k.exp(e.gammaln(g+b)-e.gammaln(g)-e.gammaln(b)+g*k.log(d)+b*k.log(1-d));return 0>d||1<d?!1:d<(g+1)/(g+b+2)?h*e.betacf(d,g,b)/g:1-h*e.betacf(1-d,b,g)/b};e.randn=function(d,g){var b,
h,l,q;g||(g=d);if(d)return e.create(d,g,function(){return e.randn()});do b=k.random(),h=1.7156*(k.random()-.5),l=b-.449871,q=k.abs(h)+.386595,l=l*l+q*(.196*q-.25472*l);while(.27597<l&&(.27846<l||h*h>-4*k.log(b)*b*b));return h/b};e.randg=function(d,g,b){var h=d,l,q,n;b||(b=g);d||(d=1);if(g)return l=e.zeros(g,b),l.alter(function(){return e.randg(d)}),l;1>d&&(d+=1);g=d-1/3;b=1/k.sqrt(9*g);do{do n=e.randn(),q=1+b*n;while(0>=q);q*=q*q;l=k.random()}while(l>1-.331*k.pow(n,4)&&k.log(l)>.5*n*n+g*(1-q+k.log(q)));
if(d==h)return g*q;do l=k.random();while(0===l);return k.pow(l,1/h)*g*q};(function(d){for(var g=0;g<d.length;g++)(function(b){e.fn[b]=function(){return e(e.map(this,function(d){return e[b](d)}))}})(d[g])})(["gammaln","gammafn","factorial","factorialln"]);(function(d){for(var g=0;g<d.length;g++)(function(b){e.fn[b]=function(){return e(e[b].apply(null,arguments))}})(d[g])})(["randn"])})(this.jStat,Math);
(function(e,k){(function(d){for(var g=0;g<d.length;g++)(function(b){e[b]=function(b,d,e){return this instanceof arguments.callee?(this._a=b,this._b=d,this._c=e,this):new arguments.callee(b,d,e)};e.fn[b]=function(d,g,k){d=e[b](d,g,k);return d.data=this,d};e[b].prototype.sample=function(d){var g=this._a,k=this._b,n=this._c;return d?e.alter(d,function(){return e[b].sample(g,k,n)}):e[b].sample(g,k,n)};(function(d){for(var g=0;g<d.length;g++)(function(d){e[b].prototype[d]=function(h){var g=this._a,k=this._b,
l=this._c;return!h&&0!==h&&(h=this.data),"number"!=typeof h?e.fn.map.call(h,function(h){return e[b][d](h,g,k,l)}):e[b][d](h,g,k,l)}})(d[g])})(["pdf","cdf","inv"]);(function(d){for(var g=0;g<d.length;g++)(function(d){e[b].prototype[d]=function(){return e[b][d](this._a,this._b,this._c)}})(d[g])})(["mean","median","mode","variance"])})(d[g])})("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy lognormal normal pareto studentt weibull uniform  binomial negbin hypgeom poisson triangular".split(" "));
e.extend(e.beta,{pdf:function(d,g,b){return 1<d||0>d?0:1==g&&1==b?1:512>g||512>b?k.pow(d,g-1)*k.pow(1-d,b-1)/e.betafn(g,b):k.exp((g-1)*k.log(d)+(b-1)*k.log(1-d)-e.betaln(g,b))},cdf:function(d,g,b){return 1<d||0>d?1*(1<d):e.ibeta(d,g,b)},inv:function(d,g,b){return e.ibetainv(d,g,b)},mean:function(d,e){return d/(d+e)},median:function(d,e){throw Error("median not yet implemented");},mode:function(d,e){return d*e/(k.pow(d+e,2)*(d+e+1))},sample:function(d,g){var b=e.randg(d);return b/(b+e.randg(g))},variance:function(d,
e){return d*e/(k.pow(d+e,2)*(d+e+1))}});e.extend(e.centralF,{pdf:function(d,g,b){return 0>d?void 0:k.sqrt(k.pow(g*d,g)*k.pow(b,b)/k.pow(g*d+b,g+b))/(d*e.betafn(g/2,b/2))},cdf:function(d,g,b){return e.ibeta(g*d/(g*d+b),g/2,b/2)},inv:function(d,g,b){return b/(g*(1/e.ibetainv(d,g/2,b/2)-1))},mean:function(d,e){return 2<e?e/(e-2):void 0},mode:function(d,e){return 2<d?e*(d-2)/(d*(e+2)):void 0},sample:function(d,g){var b=2*e.randg(d/2),h=2*e.randg(g/2);return b/d/(h/g)},variance:function(d,e){return 4>=
e?void 0:2*e*e*(d+e-2)/(d*(e-2)*(e-2)*(e-4))}});e.extend(e.cauchy,{pdf:function(d,e,b){return b/(k.pow(d-e,2)+k.pow(b,2))/k.PI},cdf:function(d,e,b){return k.atan((d-e)/b)/k.PI+.5},inv:function(d,e,b){return e+b*k.tan(k.PI*(d-.5))},median:function(d,e){return d},mode:function(d,e){return d},sample:function(d,g){return e.randn()*k.sqrt(1/(2*e.randg(.5)))*g+d}});e.extend(e.chisquare,{pdf:function(d,g){return k.exp((g/2-1)*k.log(d)-d/2-g/2*k.log(2)-e.gammaln(g/2))},cdf:function(d,g){return e.gammap(g/
2,d/2)},inv:function(d,g){return 2*e.gammapinv(d,.5*g)},mean:function(d){return d},median:function(d){return d*k.pow(1-2/(9*d),3)},mode:function(d){return 0<d-2?d-2:0},sample:function(d){return 2*e.randg(d/2)},variance:function(d){return 2*d}});e.extend(e.exponential,{pdf:function(d,e){return 0>d?0:e*k.exp(-e*d)},cdf:function(d,e){return 0>d?0:1-k.exp(-e*d)},inv:function(d,e){return-k.log(1-d)/e},mean:function(d){return 1/d},median:function(d){return 1/d*k.log(2)},mode:function(d){return 0},sample:function(d){return-1/
d*k.log(k.random())},variance:function(d){return k.pow(d,-2)}});e.extend(e.gamma,{pdf:function(d,g,b){return k.exp((g-1)*k.log(d)-d/b-e.gammaln(g)-g*k.log(b))},cdf:function(d,g,b){return e.gammap(g,d/b)},inv:function(d,g,b){return e.gammapinv(d,g)*b},mean:function(d,e){return d*e},mode:function(d,e){return 1<d?(d-1)*e:void 0},sample:function(d,g){return e.randg(d)*g},variance:function(d,e){return d*e*e}});e.extend(e.invgamma,{pdf:function(d,g,b){return k.exp(-(g+1)*k.log(d)-b/d-e.gammaln(g)+g*k.log(b))},
cdf:function(d,g,b){return 1-e.gammap(g,b/d)},inv:function(d,g,b){return b/e.gammapinv(1-d,g)},mean:function(d,e){return 1<d?e/(d-1):void 0},mode:function(d,e){return e/(d+1)},sample:function(d,g){return g/e.randg(d)},variance:function(d,e){return 2>=d?void 0:e*e/((d-1)*(d-1)*(d-2))}});e.extend(e.kumaraswamy,{pdf:function(d,e,b){return k.exp(k.log(e)+k.log(b)+(e-1)*k.log(d)+(b-1)*k.log(1-k.pow(d,e)))},cdf:function(d,e,b){return 1-k.pow(1-k.pow(d,e),b)},mean:function(d,g){return g*e.gammafn(1+1/d)*
e.gammafn(g)/e.gammafn(1+1/d+g)},median:function(d,e){return k.pow(1-k.pow(2,-1/e),1/d)},mode:function(d,e){return 1<=d&&1<=e&&1!==d&&1!==e?k.pow((d-1)/(d*e-1),1/d):void 0},variance:function(d,e){throw Error("variance not yet implemented");}});e.extend(e.lognormal,{pdf:function(d,e,b){return k.exp(-k.log(d)-.5*k.log(2*k.PI)-k.log(b)-k.pow(k.log(d)-e,2)/(2*b*b))},cdf:function(d,g,b){return.5+.5*e.erf((k.log(d)-g)/k.sqrt(2*b*b))},inv:function(d,g,b){return k.exp(-1.4142135623730951*b*e.erfcinv(2*d)+
g)},mean:function(d,e){return k.exp(d+e*e/2)},median:function(d,e){return k.exp(d)},mode:function(d,e){return k.exp(d-e*e)},sample:function(d,g){return k.exp(e.randn()*g+d)},variance:function(d,e){return(k.exp(e*e)-1)*k.exp(2*d+e*e)}});e.extend(e.normal,{pdf:function(d,e,b){return k.exp(-.5*k.log(2*k.PI)-k.log(b)-k.pow(d-e,2)/(2*b*b))},cdf:function(d,g,b){return.5*(1+e.erf((d-g)/k.sqrt(2*b*b)))},inv:function(d,g,b){return-1.4142135623730951*b*e.erfcinv(2*d)+g},mean:function(d,e){return d},median:function(d,
e){return d},mode:function(d,e){return d},sample:function(d,g){return e.randn()*g+d},variance:function(d,e){return e*e}});e.extend(e.pareto,{pdf:function(d,e,b){return d<=e?void 0:b*k.pow(e,b)/k.pow(d,b+1)},cdf:function(d,e,b){return 1-k.pow(e/d,b)},mean:function(d,e){return 1>=e?void 0:e*k.pow(d,e)/(e-1)},median:function(d,e){return d*e*k.SQRT2},mode:function(d,e){return d},variance:function(d,e){return 2>=e?void 0:d*d*e/(k.pow(e-1,2)*(e-2))}});e.extend(e.studentt,{pdf:function(d,g){return e.gammafn((g+
1)/2)/(k.sqrt(g*k.PI)*e.gammafn(g/2))*k.pow(1+d*d/g,-((g+1)/2))},cdf:function(d,g){var b=g/2;return e.ibeta((d+k.sqrt(d*d+g))/(2*k.sqrt(d*d+g)),b,b)},inv:function(d,g){var b=e.ibetainv(2*k.min(d,1-d),.5*g,.5);return b=k.sqrt(g*(1-b)/b),.5<d?b:-b},mean:function(d){return 1<d?0:void 0},median:function(d){return 0},mode:function(d){return 0},sample:function(d){return e.randn()*k.sqrt(d/(2*e.randg(d/2)))},variance:function(d){return 2<d?d/(d-2):1<d?Infinity:void 0}});e.extend(e.weibull,{pdf:function(d,
e,b){return 0>d?0:b/e*k.pow(d/e,b-1)*k.exp(-k.pow(d/e,b))},cdf:function(d,e,b){return 0>d?0:1-k.exp(-k.pow(d/e,b))},inv:function(d,e,b){return e*k.pow(-k.log(1-d),1/b)},mean:function(d,g){return d*e.gammafn(1+1/g)},median:function(d,e){return d*k.pow(k.log(2),1/e)},mode:function(d,e){return 1>=e?void 0:d*k.pow((e-1)/e,1/e)},sample:function(d,e){return d*k.pow(-k.log(k.random()),1/e)},variance:function(d,g){return d*d*e.gammafn(1+2/g)-k.pow(this.mean(d,g),2)}});e.extend(e.uniform,{pdf:function(d,e,
b){return d<e||d>b?0:1/(b-e)},cdf:function(d,e,b){return d<e?0:d<b?(d-e)/(b-e):1},mean:function(d,e){return.5*(d+e)},median:function(d,g){return e.mean(d,g)},mode:function(d,e){throw Error("mode is not yet implemented");},sample:function(d,e){return d/2+e/2+(e/2-d/2)*(2*k.random()-1)},variance:function(d,e){return k.pow(e-d,2)/12}});e.extend(e.binomial,{pdf:function(d,g,b){return 0===b||1===b?g*b===d?1:0:e.combination(g,d)*k.pow(b,d)*k.pow(1-b,g-d)},cdf:function(d,g,b){var h=[],k=0;if(0>d)return 0;
if(d<g){for(;k<=d;k++)h[k]=e.binomial.pdf(k,g,b);return e.sum(h)}return 1}});e.extend(e.negbin,{pdf:function(d,g,b){return d!==d|0?!1:0>d?0:e.combination(d+g-1,g-1)*k.pow(1-b,d)*k.pow(b,g)},cdf:function(d,g,b){var h=0,k=0;if(0>d)return 0;for(;k<=d;k++)h+=e.negbin.pdf(k,g,b);return h}});e.extend(e.hypgeom,{pdf:function(d,g,b,h){if(d!==d|0)return!1;if(0>d||d<b-(g-h)||d>h||d>b)return 0;if(2*b>g)return 2*h>g?e.hypgeom.pdf(g-b-h+d,g,g-b,g-h):e.hypgeom.pdf(h-d,g,g-b,h);if(2*h>g)return e.hypgeom.pdf(b-d,
g,b,g-h);if(b<h)return e.hypgeom.pdf(d,g,h,b);for(var l=1,q=0,n=0;n<d;n++){for(;1<l&&q<h;)l*=1-b/(g-q),q++;l*=(h-n)*(b-n)/((n+1)*(g-b-h+n+1))}for(;q<h;q++)l*=1-b/(g-q);return k.min(1,k.max(0,l))},cdf:function(d,g,b,h){if(0>d||d<b-(g-h))return 0;if(d>=h||d>=b)return 1;if(2*b>g)return 2*h>g?e.hypgeom.cdf(g-b-h+d,g,g-b,g-h):1-e.hypgeom.cdf(h-d-1,g,g-b,h);if(2*h>g)return 1-e.hypgeom.cdf(b-d-1,g,b,g-h);if(b<h)return e.hypgeom.cdf(d,g,h,b);for(var l=1,q=1,n=0,p=0;p<d;p++){for(;1<l&&n<h;){var r=1-b/(g-n),
q=q*r,l=l*r;n++}q*=(h-p)*(b-p)/((p+1)*(g-b-h+p+1));l+=q}for(;n<h;n++)l*=1-b/(g-n);return k.min(1,k.max(0,l))}});e.extend(e.poisson,{pdf:function(d,g){return k.pow(g,d)*k.exp(-g)/e.factorial(d)},cdf:function(d,g){var b=[],h=0;if(0>d)return 0;for(;h<=d;h++)b.push(e.poisson.pdf(h,g));return e.sum(b)},mean:function(d){return d},variance:function(d){return d},sample:function(d){var e=1,b=0;d=k.exp(-d);do b++,e*=k.random();while(e>d);return b-1}});e.extend(e.triangular,{pdf:function(d,e,b,h){return b<=
e||h<e||h>b?void 0:d<e||d>b?0:d<=h?2*(d-e)/((b-e)*(h-e)):2*(b-d)/((b-e)*(b-h))},cdf:function(d,e,b,h){return b<=e||h<e||h>b?void 0:d<e?0:d<=h?k.pow(d-e,2)/((b-e)*(h-e)):1-k.pow(b-d,2)/((b-e)*(b-h))},mean:function(d,e,b){return(d+e+b)/3},median:function(d,e,b){if(b<=(d+e)/2)return e-k.sqrt((e-d)*(e-b))/k.sqrt(2);if(b>(d+e)/2)return d+k.sqrt((e-d)*(b-d))/k.sqrt(2)},mode:function(d,e,b){return b},sample:function(d,e,b){var h=k.random();return h<(b-d)/(e-d)?d+k.sqrt(h*(e-d)*(b-d)):e-k.sqrt((1-h)*(e-d)*
(e-b))},variance:function(d,e,b){return(d*d+e*e+b*b-d*e-d*b-e*b)/18}})})(this.jStat,Math);
(function(e,k){var d=Array.prototype.push,g=e.utils.isArray;e.extend({add:function(b,d){return g(d)?(g(d[0])||(d=[d]),e.map(b,function(b,e,g){return b+d[e][g]})):e.map(b,function(b){return b+d})},subtract:function(b,d){return g(d)?(g(d[0])||(d=[d]),e.map(b,function(b,e,g){return b-d[e][g]||0})):e.map(b,function(b){return b-d})},divide:function(b,d){return g(d)?(g(d[0])||(d=[d]),e.multiply(b,e.inv(d))):e.map(b,function(b){return b/d})},multiply:function(b,d){var k,q,n,p,r=b.length,s=b[0].length,w=
e.zeros(r,n=g(d)?d[0].length:s),v=0;if(g(d)){for(;v<n;v++)for(k=0;k<r;k++){for(q=p=0;q<s;q++)p+=b[k][q]*d[q][v];w[k][v]=p}return 1===r&&1===v?w[0][0]:w}return e.map(b,function(b){return b*d})},dot:function(b,d){g(b[0])||(b=[b]);g(d[0])||(d=[d]);for(var k=1===b[0].length&&1!==b.length?e.transpose(b):b,q=1===d[0].length&&1!==d.length?e.transpose(d):d,n=[],p=0,r=k.length,s=k[0].length,w,v;p<r;p++){n[p]=[];for(v=w=0;v<s;v++)w+=k[p][v]*q[p][v];n[p]=w}return 1===n.length?n[0]:n},pow:function(b,d){return e.map(b,
function(b){return k.pow(b,d)})},abs:function(b){return e.map(b,function(b){return k.abs(b)})},norm:function(b,d){var e=0,q=0;isNaN(d)&&(d=2);for(g(b[0])&&(b=b[0]);q<b.length;q++)e+=k.pow(k.abs(b[q]),d);return k.pow(e,1/d)},angle:function(b,d){return k.acos(e.dot(b,d)/(e.norm(b)*e.norm(d)))},aug:function(b,e){for(var g=b.slice(),k=0;k<g.length;k++)d.apply(g[k],e[k]);return g},inv:function(b){var d=b.length,g=b[0].length,k=e.identity(d,g);b=e.gauss_jordan(b,k);for(var k=[],n=0,p;n<d;n++)for(k[n]=[],
p=g-1;p<b[0].length;p++)k[n][p-g]=b[n][p];return k},det:function(b){var d=b.length,e=2*d,g=Array(e),k=d-1,p=e-1,r=k-d+1,s=p,w=0,v=0,x;if(2===d)return b[0][0]*b[1][1]-b[0][1]*b[1][0];for(;w<e;w++)g[w]=1;for(w=0;w<d;w++){for(x=0;x<d;x++)g[0>r?r+d:r]*=b[w][x],g[s<d?s+d:s]*=b[w][x],r++,s--;r=--k-d+1;s=--p}for(w=0;w<d;w++)v+=g[w];for(;w<e;w++)v-=g[w];return v},gauss_elimination:function(b,d){var g=0,q=0,n=b.length,p=b[0].length,r=1,s=0,w=[],v;b=e.aug(b,d);for(v=b[0].length;g<n;g++){r=b[g][g];q=g;for(s=
g+1;s<p;s++)r<k.abs(b[s][g])&&(r=b[s][g],q=s);if(q!=g)for(s=0;s<v;s++)r=b[g][s],b[g][s]=b[q][s],b[q][s]=r;for(q=g+1;q<n;q++)for(r=b[q][g]/b[g][g],s=g;s<v;s++)b[q][s]-=r*b[g][s]}for(g=n-1;0<=g;g--){s=0;for(q=g+1;q<=n-1;q++)s=w[q]*b[g][q];w[g]=(b[g][v-1]-s)/b[g][g]}return w},gauss_jordan:function(b,d){for(var g=e.aug(b,d),q=g.length,n=g[0].length,p=0;p<q;p++){for(var r=p,s=p+1;s<q;s++)k.abs(g[s][p])>k.abs(g[r][p])&&(r=s);s=g[p];g[p]=g[r];g[r]=s;for(s=p+1;s<q;s++)for(c=g[s][p]/g[p][p],r=p;r<n;r++)g[s][r]-=
g[p][r]*c}for(p=q-1;0<=p;p--){c=g[p][p];for(s=0;s<p;s++)for(r=n-1;r>p-1;r--)g[s][r]-=g[p][r]*g[s][p]/c;g[p][p]/=c;for(r=q;r<n;r++)g[p][r]/=c}return g},lu:function(b,d){throw Error("lu not yet implemented");},cholesky:function(b,d){throw Error("cholesky not yet implemented");},gauss_jacobi:function(b,d,g,q){for(var n=0,p=0,r=b.length,s=[],w=[],v=[];n<r;n++)for(s[n]=[],w[n]=[],v[n]=[],p=0;p<r;p++)n>p?(s[n][p]=b[n][p],w[n][p]=v[n][p]=0):n<p?(w[n][p]=b[n][p],s[n][p]=v[n][p]=0):(v[n][p]=b[n][p],s[n][p]=
w[n][p]=0);b=e.multiply(e.multiply(e.inv(v),e.add(s,w)),-1);v=e.multiply(e.inv(v),d);d=g;g=e.add(e.multiply(b,g),v);for(n=2;k.abs(e.norm(e.subtract(g,d)))>q;)d=g,g=e.add(e.multiply(b,d),v),n++;return g},gauss_seidel:function(b,d,g,q){for(var n=0,p=b.length,r=[],s=[],w=[],v;n<p;n++)for(r[n]=[],s[n]=[],w[n]=[],v=0;v<p;v++)n>v?(r[n][v]=b[n][v],s[n][v]=w[n][v]=0):n<v?(s[n][v]=b[n][v],r[n][v]=w[n][v]=0):(w[n][v]=b[n][v],r[n][v]=s[n][v]=0);b=e.multiply(e.multiply(e.inv(e.add(w,r)),s),-1);r=e.multiply(e.inv(e.add(w,
r)),d);d=g;g=e.add(e.multiply(b,g),r);for(n=2;k.abs(e.norm(e.subtract(g,d)))>q;)d=g,g=e.add(e.multiply(b,d),r),n+=1;return g},SOR:function(b,d,g,q,n){for(var p=0,r=b.length,s=[],w=[],v=[],x;p<r;p++)for(s[p]=[],w[p]=[],v[p]=[],x=0;x<r;x++)p>x?(s[p][x]=b[p][x],w[p][x]=v[p][x]=0):p<x?(w[p][x]=b[p][x],s[p][x]=v[p][x]=0):(v[p][x]=b[p][x],s[p][x]=w[p][x]=0);b=e.multiply(e.inv(e.add(v,e.multiply(s,n))),e.subtract(e.multiply(v,1-n),e.multiply(w,n)));n=e.multiply(e.multiply(e.inv(e.add(v,e.multiply(s,n))),
d),n);d=g;g=e.add(e.multiply(b,g),n);for(p=2;k.abs(e.norm(e.subtract(g,d)))>q;)d=g,g=e.add(e.multiply(b,d),n),p++;return g},householder:function(b){for(var d=b.length,g=b[0].length,q=0,n=[],p=[],r;q<d-1;q++){p=0;for(n=q+1;n<g;n++)p+=b[n][q]*b[n][q];n=0<b[q+1][q]?-1:1;p=n*k.sqrt(p);r=k.sqrt((p*p-b[q+1][q]*p)/2);n=e.zeros(d,1);n[q+1][0]=(b[q+1][q]-p)/(2*r);for(p=q+2;p<d;p++)n[p][0]=b[p][q]/(2*r);p=e.subtract(e.identity(d,g),e.multiply(e.multiply(n,e.transpose(n)),2));b=e.multiply(p,e.multiply(b,p))}return b},
QR:function(b,d){for(var g=b.length,q=b[0].length,n=0,p=[],r=[],s=[],w;n<g-1;n++){r=0;for(p=n+1;p<q;p++)r+=b[p][n]*b[p][n];p=0<b[n+1][n]?-1:1;r=p*k.sqrt(r);w=k.sqrt((r*r-b[n+1][n]*r)/2);p=e.zeros(g,1);p[n+1][0]=(b[n+1][n]-r)/(2*w);for(r=n+2;r<g;r++)p[r][0]=b[r][n]/(2*w);r=e.subtract(e.identity(g,q),e.multiply(e.multiply(p,e.transpose(p)),2));b=e.multiply(r,b);d=e.multiply(r,d)}for(n=g-1;0<=n;n--){for(p=n+1;p<=q-1;p++);s[n]=d[n][0]/b[n][n]}return s},jacobi:function(b){for(var d=1,g=0,q=b.length,n=
e.identity(q,q),p=[],r,s,w,v,x;1===d;){g++;v=b[0][1];d=0;w=1;for(r=0;r<q;r++)for(s=0;s<q;s++)r!=s&&v<k.abs(b[r][s])&&(v=k.abs(b[r][s]),d=r,w=s);b[d][d]===b[w][w]?x=0<b[d][w]?k.PI/4:-k.PI/4:x=k.atan(2*b[d][w]/(b[d][d]-b[w][w]))/2;r=e.identity(q,q);r[d][d]=k.cos(x);r[d][w]=-k.sin(x);r[w][d]=k.sin(x);r[w][w]=k.cos(x);n=e.multiply(n,r);b=e.multiply(e.multiply(e.inv(r),b),r);d=0;for(r=1;r<q;r++)for(s=1;s<q;s++)r!=s&&.001<k.abs(b[r][s])&&(d=1)}for(r=0;r<q;r++)p.push(b[r][r]);return[n,p]},rungekutta:function(b,
d,e,g,k,p){var r,s,w;if(2===p)for(;g<=e;)r=d*b(g,k),s=d*b(g+d,k+r),k+=(r+s)/2,g+=d;if(4===p)for(;g<=e;)r=d*b(g,k),s=d*b(g+d/2,k+r/2),p=d*b(g+d/2,k+s/2),w=d*b(g+d,k+p),k+=(r+2*s+2*p+w)/6,g+=d;return k},romberg:function(b,d,e,g){for(var n=0,p=(e-d)/2,r=[],s=[],w=[],v,x,y;n<g/2;){y=b(d);x=d;for(v=0;x<=e;x+=p,v++)r[v]=x;v=r.length;for(x=1;x<v-1;x++)y+=(0!==x%2?4:2)*b(r[x]);y=p/3*(y+b(e));w[n]=y;p/=2;n++}b=w.length;for(v=1;1!==b;){for(x=0;x<b-1;x++)s[x]=(k.pow(4,v)*w[x+1]-w[x])/(k.pow(4,v)-1);b=s.length;
w=s;s=[];v++}return w},richardson:function(b,d,e,g){function n(b,d){for(var e=0,h=b.length,g;e<h;e++)b[e]===d&&(g=e);return g}for(var p=k.abs(e-b[n(b,e)+1]),r=0,s=[],w=[],v,x;g>=p;)v=n(b,e+g),x=n(b,e),s[r]=(d[v]-2*d[x]+d[2*x-v])/(g*g),g/=2,r++;d=s.length;for(b=1;1!=d;){for(e=0;e<d-1;e++)w[e]=(k.pow(4,b)*s[e+1]-s[e])/(k.pow(4,b)-1);d=w.length;s=w;w=[];b++}return s},simpson:function(b,d,e,g){g=(e-d)/g;var k=b(d),p=[],r=d,s=0;for(d=1;r<=e;r+=g,s++)p[s]=r;for(r=p.length;d<r-1;d++)k+=(0!==d%2?4:2)*b(p[d]);
return g/3*(k+b(e))},hermite:function(b,d,e,g){for(var k=b.length,p=0,r=0,s=[],w=[],v=[],x=[],y;r<k;r++){s[r]=1;for(y=0;y<k;y++)r!=y&&(s[r]*=(g-b[y])/(b[r]-b[y]));for(y=w[r]=0;y<k;y++)r!=y&&(w[r]+=1/(b[r]-b[y]));v[r]=(1-2*(g-b[r])*w[r])*s[r]*s[r];x[r]=(g-b[r])*s[r]*s[r];p+=v[r]*d[r]+x[r]*e[r]}return p},lagrange:function(b,d,e){for(var g=0,k=0,p,r,s=b.length;k<s;k++){r=d[k];for(p=0;p<s;p++)k!=p&&(r*=(e-b[p])/(b[k]-b[p]));g+=r}return g},cubic_spline:function(b,d,g){for(var k=b.length,n=0,p=[],r=[],
s=[],w=[],v=[],x=[],y=[];n<k-1;n++)v[n]=b[n+1]-b[n];s[0]=0;for(n=1;n<k-1;n++)s[n]=3/v[n]*(d[n+1]-d[n])-3/v[n-1]*(d[n]-d[n-1]);for(n=1;n<k-1;n++)p[n]=[],r[n]=[],p[n][n-1]=v[n-1],p[n][n]=2*(v[n-1]+v[n]),p[n][n+1]=v[n],r[n][0]=s[n];w=e.multiply(e.inv(p),r);for(n=0;n<k-1;n++)x[n]=(d[n+1]-d[n])/v[n]-v[n]*(w[n+1][0]+2*w[n][0])/3,y[n]=(w[n+1][0]-w[n][0])/(3*v[n]);for(n=0;n<k&&!(b[n]>g);n++);return n-=1,d[n]+(g-b[n])*x[n]+e.sq(g-b[n])*w[n]+(g-b[n])*e.sq(g-b[n])*y[n]},gauss_quadrature:function(){throw Error("gauss_quadrature not yet implemented");
},PCA:function(b){var d=b.length,g=b[0].length,k=0,n,p,r=[],s=[];n=[];for(var w=[],v=[],x=[],x=[],s=[],k=[],y=[],k=0;k<d;k++)r[k]=e.sum(b[k])/g;for(k=0;k<g;k++)for(x[k]=[],n=0;n<d;n++)x[k][n]=b[n][k]-r[n];x=e.transpose(x);for(k=0;k<d;k++)for(s[k]=[],n=0;n<d;n++)s[k][n]=e.dot([x[k]],[x[n]])/(g-1);n=e.jacobi(s);k=n[0];s=n[1];y=e.transpose(k);for(k=0;k<s.length;k++)for(n=k;n<s.length;n++)s[k]<s[n]&&(p=s[k],s[k]=s[n],s[n]=p,w=y[k],y[k]=y[n],y[n]=w);x=e.transpose(x);for(k=0;k<d;k++)for(v[k]=[],n=0;n<x.length;n++)v[k][n]=
e.dot([y[k]],[x[n]]);return[b,s,y,v]}});(function(b){for(var d=0;d<b.length;d++)(function(b){e.fn[b]=function(d,g){var h=this;return g?(setTimeout(function(){g.call(h,e.fn[b].call(h,d))},15),this):"number"==typeof e[b](this,d)?e[b](this,d):e(e[b](this,d))}})(b[d])})("add divide multiply subtract dot pow abs norm angle".split(" "))})(this.jStat,Math);
(function(e,k){var d=[].slice,g=e.utils.isNumber;e.extend({zscore:function(){var b=d.call(arguments);return g(b[1])?(b[0]-b[1])/b[2]:(b[0]-e.mean(b[1]))/e.stdev(b[1],b[2])},ztest:function(){var b=d.call(arguments);if(4===b.length){if(g(b[1])){var h=e.zscore(b[0],b[1],b[2]);return 1===b[3]?e.normal.cdf(-k.abs(h),0,1):2*e.normal.cdf(-k.abs(h),0,1)}h=b[0];return 1===b[2]?e.normal.cdf(-k.abs(h),0,1):2*e.normal.cdf(-k.abs(h),0,1)}h=e.zscore(b[0],b[1],b[3]);return 1===b[1]?e.normal.cdf(-k.abs(h),0,1):2*
e.normal.cdf(-k.abs(h),0,1)}});e.extend(e.fn,{zscore:function(b,d){return(b-this.mean())/this.stdev(d)},ztest:function(b,d,g){b=k.abs(this.zscore(b,g));return 1===d?e.normal.cdf(-b,0,1):2*e.normal.cdf(-b,0,1)}});e.extend({tscore:function(){var b=d.call(arguments);return 4===b.length?(b[0]-b[1])/(b[2]/k.sqrt(b[3])):(b[0]-e.mean(b[1]))/(e.stdev(b[1],!0)/k.sqrt(b[1].length))},ttest:function(){var b=d.call(arguments),h;return 5===b.length?(h=k.abs(e.tscore(b[0],b[1],b[2],b[3])),1===b[4]?e.studentt.cdf(-h,
b[3]-1):2*e.studentt.cdf(-h,b[3]-1)):g(b[1])?(h=k.abs(b[0]),1==b[2]?e.studentt.cdf(-h,b[1]-1):2*e.studentt.cdf(-h,b[1]-1)):(h=k.abs(e.tscore(b[0],b[1])),1==b[2]?e.studentt.cdf(-h,b[1].length-1):2*e.studentt.cdf(-h,b[1].length-1))}});e.extend(e.fn,{tscore:function(b){return(b-this.mean())/(this.stdev(!0)/k.sqrt(this.cols()))},ttest:function(b,d){return 1===d?1-e.studentt.cdf(k.abs(this.tscore(b)),this.cols()-1):2*e.studentt.cdf(-k.abs(this.tscore(b)),this.cols()-1)}});e.extend({anovafscore:function(){var b=
d.call(arguments),g,l,q,n,p,r;if(1===b.length){g=Array(b[0].length);for(p=0;p<b[0].length;p++)g[p]=b[0][p];b=g}if(2===b.length)return e.variance(b[0])/e.variance(b[1]);l=[];for(p=0;p<b.length;p++)l=l.concat(b[p]);q=e.mean(l);for(p=g=0;p<b.length;p++)g+=b[p].length*k.pow(e.mean(b[p])-q,2);g/=b.length-1;for(p=n=0;p<b.length;p++)for(q=e.mean(b[p]),r=0;r<b[p].length;r++)n+=k.pow(b[p][r]-q,2);return n/=l.length-b.length,g/n},anovaftest:function(){var b=d.call(arguments),h,k,q,n;if(g(b[0]))return 1-e.centralF.cdf(b[0],
b[1],b[2]);anovafscore=e.anovafscore(b);h=b.length-1;for(n=q=0;n<b.length;n++)q+=b[n].length;return k=q-h-1,1-e.centralF.cdf(anovafscore,h,k)},ftest:function(b,d,g){return 1-e.centralF.cdf(b,d,g)}});e.extend(e.fn,{anovafscore:function(){return e.anovafscore(this.toArray())},anovaftes:function(){var b=0,d;for(d=0;d<this.length;d++)b+=this[d].length;return e.ftest(this.anovafscore(),this.length-1,b-this.length)}});e.extend({normalci:function(){var b=d.call(arguments),g=Array(2),l;return 4===b.length?
l=k.abs(e.normal.inv(b[1]/2,0,1)*b[2]/k.sqrt(b[3])):l=k.abs(e.normal.inv(b[1]/2,0,1)*e.stdev(b[2])/k.sqrt(b[2].length)),g[0]=b[0]-l,g[1]=b[0]+l,g},tci:function(){var b=d.call(arguments),g=Array(2),l;return 4===b.length?l=k.abs(e.studentt.inv(b[1]/2,b[3]-1)*b[2]/k.sqrt(b[3])):l=k.abs(e.studentt.inv(b[1]/2,b[2].length-1)*e.stdev(b[2],!0)/k.sqrt(b[2].length)),g[0]=b[0]-l,g[1]=b[0]+l,g},significant:function(b,d){return b<d}});e.extend(e.fn,{normalci:function(b,d){return e.normalci(b,d,this.toArray())},
tci:function(b,d){return e.tci(b,d,this.toArray())}})})(this.jStat,Math);svgNamespaceUri="http://www.w3.org/2000/svg";xlinkUri="http://www.w3.org/1999/xlink";hasOwnProperty=function(e,k){var d=e.__proto__||e.constructor.prototype;return k in e&&(!(k in d)||d[k]!==e[k])};isObjInArray=function(e,k){var d=!1;0<=e.indexOf(k)&&(d=!0);return d};getKeys=function(e){var k=[],d;for(d in e)k.push(d);return k};eliminateDuplicates=function(e){var k,d=e.length,g=[],b={};for(k=0;k<d;k++)b[e[k]]=0;for(k in b)g.push(k);return g};
keepReplicates=function(e,k,d){for(var g={},b=0;b<e.length;b++){var h=e[b];h in g||(g[h]=0);g[h]++}k=null==k?2:k;e=[];for(h in g)null!=d&&d?g[h]<k&&e.push(h):g[h]>=k&&e.push(h);return e};beginsWith=function(e,k){return 0===e.indexOf(k)};endsWith=function(e,k){return-1!==e.indexOf(k,e.length-k.length)};lengthOfLongestString=function(e){var k=[],d;for(d in e)k.push(e[d].length);return Math.max.apply(null,k)};isNumerical=function(e){return null==e||""===e||isNaN(e)?!1:!0};
getListBoxSelectedValues=function(e){for(var k=[],d=0;d<e.length;d++){var g=e[d];g.selected&&k.push(g.value)}return k};compareAsNumeric=function(e,k){var d=parseFloat(e),g=parseFloat(k);if(isNumerical(d)&&isNumerical(g)){if(d<g)return-1;if(d>g)return 1}else if(d==d||g==g){if(d!=d)return-1;if(g!=g)return 1}return 0};compareAsString=function(e,k){var d=new String(e),g=new String(k);return"null"==d&&"null"!=g?-1:"null"!=d&&"null"==g?1:d.localeCompare(g)};
compareAsDate=function(e,k){var d=e,g=k;null==d?d="1000":""==d&&(d="1001");null==g?g="1000":""==g&&(g="1001");return new Date(d)-new Date(g)};
centeredRgbaColorMapper=function(e,k,d,g){var b=null,h=null==k?0:k,l=null==d?-1.96:d,q=null==g?1.96:g;return b=function(b){var d=1,g=169,k=169,w=169;b=parseFloat(b);null!=b&&b==b&&(b>h?(g=255,w=k=0,b>q?d=1:(d=(b-h)/(q-h),d=Math.abs(d),e&&(d=Math.log(d)))):b<h?(k=g=0,w=255,b<l?d=1:(d=(b-h)/(l-h),d=Math.abs(d),e&&(d=Math.log(d)))):(w=k=g=255,d=1));return"rgba("+g+","+k+","+w+","+d+")"}};
setupQuantileColorMapper=function(e,k){var d=k;null==d&&(d="rgb(255,255,217) rgb(237,248,177) rgb(199,233,180) rgb(127,205,187) rgb(65,182,196) rgb(29,145,192) rgb(34,94,168) rgb(37,52,148) rgb(8,29,88)".split(" "));var g=d.length;return d3.scale.quantile().domain([0,g-1,d3.max(e,function(b){return parseFloat(b)})]).range(d)};getXmlDom_url=function(e){xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");xmlhttp.open("GET",e,!1);xmlhttp.send();return xmlDoc=xmlhttp.responseXML};
getXmlDom_string=function(e){window.DOMParser?(parser=new DOMParser,xmlDoc=parser.parseFromString(e,"text/xml")):(xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),xmlDoc.async=!1,xmlDoc.loadXML(e));return xmlDoc};
getDateTime=function(){var e=new Date,k=e.getFullYear(),d=e.getMonth()+1,g=e.getDate(),b=e.getHours(),h=e.getMinutes(),e=e.getSeconds();1==d.toString().length&&(d="0"+d);1==g.toString().length&&(g="0"+g);1==b.toString().length&&(b="0"+b);1==h.toString().length&&(h="0"+h);1==e.toString().length&&(e="0"+e);return k+"/"+d+"/"+g+" "+b+":"+h+":"+e};
todaysDate=function(){var e=new Date,k=e.getDate();e.getDay();var d=e.getMonth()+1,e=e.getYear();return[,"January","February","March","April","May","June","July","August","September","October","November","December"][d]+" "+k+", "+(1E3>e?e+1900:e)};removeChildElems=function(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e};createDivElement=function(e,k){var d=document.createElement("div");null!=e&&(d.id=e);null!=k&&(d.className=k);return d};
swapContainingDivs=function(e,k){var d=k.parentNode;document.getElementById(e.parentNode.id).appendChild(k);document.getElementById(d.id).appendChild(e)};simpleAsyncGet=function(e,k){var d=new XMLHttpRequest;d.onreadystatechange=function(){this.readyState===(this.DONE||4)&&k(d.responseText)};d.open("GET",e,!0);d.setRequestHeader("X-Requested-With","XMLHttpRequest");d.send(null)};
getResponse=function(e){var k=null,d=null,d=new XMLHttpRequest;d.open("GET",e,!1);d.onload=function(){k=d.status;200!=k&&console.log("xhr status: "+k+" for "+e)};d.send(null);var g=null;200==k&&(g=d.responseText);return g};loadNewSettings=function(e){e=window.location.pathname+"?query="+JSON.stringify(e);window.open(e,"_self")};getQueryObj=function(){var e={};location.search.slice(1).split("&").forEach(function(k){k=k.split("=");e[k[0]]=decodeURIComponent(k[1])||""});return e};
getQueryStringParameterByName=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");e=(new RegExp("[\\?&]"+e+"=([^&#]*)")).exec(location.search);return null==e?"":decodeURIComponent(e[1].replace(/\+/g," "))};parseJson=function(e){return JSON.parse(e)};serializeJson=function(e,k){return k?JSON.stringify(e,null,"\t"):JSON.stringify(e)};prettyJson=function(e){return serializeJson(e,!0)};
bottomRoundedRectSvgPath=function(e,k,d,g,b){e=""+("M"+e+","+k)+("h"+d);e+="v"+(g-b);e+="a"+b+","+b+" 0 0 1 "+-1*b+","+b;e+="h"+-1*(d-2*b);e+="a"+b+","+b+" 0 0 1 "+-1*b+","+-1*b;e+="v"+-1*(g-b);return e+="z"};allRoundedRectSvgPath=function(e,k,d,g,b){e=""+("M"+e+","+(k+b))+("a"+b+","+b+" 0 0 1 "+b+","+-1*b);e+="h"+(d-2*b);e+="a"+b+","+b+" 0 0 1 "+b+","+b;e+="v"+(g-2*b);e+="a"+b+","+b+" 0 0 1 "+-1*b+","+b;e+="h"+-1*(d-2*b);e+="a"+b+","+b+" 0 0 1 "+-1*b+","+-1*b;e+="v"+-1*(g-2*b);return e+="z"};
allAngledRectSvgPath=function(e,k,d,g){var b=d>g?d/8:g/8;e=""+("M"+(e+b)+","+k)+("h"+(d-2*b));e+="l"+b+","+b;e+="v"+(g-2*b);e+="l"+-1*b+","+b;e+="h"+-1*(d-2*b);e+="l"+-1*b+","+-1*b;e+="v"+-1*(g-2*b);return e+="z"};
createSvgRingElement=function(e,k,d,g){function b(b,d,e,g){g=(g-90)*Math.PI/180;return{x:b+e*Math.cos(g),y:d+e*Math.sin(g)}}e=function(d,e,g,h,k){var s=b(d,e,g,k);d=b(d,e,g,h);return["M",s.x,s.y,"A",g,g,0,180>=k-h?"0":"1",0,d.x,d.y].join(" ")}(e,k,d,0,359.9);k=document.createElementNS(svgNamespaceUri,"path");k.setAttributeNS(null,"d",e);if(null!=g)for(var h in g)k.setAttributeNS(null,h,g[h]);return k};
createSvgCircleElement=function(e,k,d,g){var b=document.createElementNS(svgNamespaceUri,"circle");b.setAttributeNS(null,"cx",e);b.setAttributeNS(null,"cy",k);b.setAttributeNS(null,"r",d);if(null!=g)for(var h in g)b.setAttributeNS(null,h,g[h]);return b};
createSvgRectElement=function(e,k,d,g,b,h,l){var q=document.createElementNS(svgNamespaceUri,"rect");q.setAttributeNS(null,"x",e);q.setAttributeNS(null,"y",k);q.setAttributeNS(null,"rx",d);q.setAttributeNS(null,"ry",g);q.setAttributeNS(null,"width",b);q.setAttributeNS(null,"height",h);if(null!=l)for(var n in l)q.setAttributeNS(null,n,l[n]);return q};
createSvgImageElement=function(e,k,d,g,b,h){var l=document.createElementNS(svgNamespaceUri,"image");l.setAttributeNS(xlinkUri,"href",e);l.setAttributeNS(null,"x",k);l.setAttributeNS(null,"y",d);l.setAttributeNS(null,"width",g);l.setAttributeNS(null,"height",b);if(null!=h)for(var q in h)l.setAttributeNS(null,q,h[q]);return l};setCookie=function(e,k,d){if(d){var g=new Date;g.setTime(g.getTime()+864E5*d);d="; expires="+g.toGMTString()}else d="";document.cookie=e+"="+k+d+"; path=/"};
getCookie=function(e){e+="=";for(var k=document.cookie.split(";"),d=0;d<k.length;d++){for(var g=k[d];" "==g.charAt(0);)g=g.substring(1,g.length);if(0==g.indexOf(e))return g.substring(e.length,g.length)}return null};deleteCookie=function(e){setCookie(e,"",-1)};var eventHierarchyUrl="observation_deck/data/eventHierarchy.xml";function getEventElems(e,k){var d=[];e.find("event").each(function(e,b){var h=b.getAttribute("type");void 0===k||null===k?d.push(b):h===k&&d.push(b)});return d}
function getEventParentChildren(e,k){var d={parent:null,children:[]},g=getEventElems(e,k);$(g).each(function(b,e){if("event"!==e.tagName)return"continue";d.parent=e.parentNode.getAttribute("type");$(e.children).each(function(b,e){"event"===e.tagName&&d.children.push(e.getAttribute("type"))})});return d}
function tracebackToRoot(e,k){for(var d=[],g=getEventElems(e,k),b=0;b<g.length;b++){var h=g[b],l=[];d.push(l);h=h.getAttribute("type");for(h=getEventParentChildren(e,h).parent;void 0!==h&&null!==h;)l.push(h),h=getEventParentChildren(e,h).parent}return d}
function OD_eventMetadataAlbum(){this.album={};this.addEvent=function(e,k){var d=new OD_event(e);this.album[e.id]=d;d.data.setData(k,"numeric"==e.allowedValues||"expression"==e.allowedValues);return this};this.getEventIdsByType=function(){for(var e={},k=getKeys(this.album),d=0;d<k.length;d++){var g=k[d],b=this.getEvent(g).metadata.datatype;hasOwnProperty(e,b)||(e[b]=[]);e[b].push(g)}return e};this.getEventData=function(e){for(var k={},d=getKeys(this.album),g=0;g<d.length;g++){var b=d[g],h=this.getEvent(b).data.getData(e);
k[b]=h}return k};this.getAllDataAsList=function(){for(var e=[],k=this.getEventData(),d=getKeys(k),g=0;g<d.length;g++){for(var b=d[g],h=k[b].slice(),l=0;l<h.length;l++)h[l].eventId=b;e=e.concat(h)}return e};this.getAllSampleIds=function(){for(var e=[],k=getKeys(this.album),d=0;d<k.length;d++)var g=this.getEvent(k[d]).data.getAllSampleIds(),e=e.concat(g);return eliminateDuplicates(e)};this.selectSamples=function(e){var k=this.getAllSampleIds();if(0==e.length)return k;for(var d in e)var g=e[d].value,
k=this.getEvent(e[d].eventId).data.selectIds(g,k);return k};this.getEvent=function(e){return this.album[e]};this.getAllChildren=function(e,k){for(var d="undefined"===typeof k?[]:k,g=[],b=0;b<e.length;b++)var h=this.getEvent(e[b]).metadata,g=g.concat(getKeys(h.children));if(0==g.length)return d;d=d.concat(g);return this.getAllChildren(g,d)};this.multisortSamples=function(e){var k=this.getAllSampleIds();if(null==e)return k;var d=e.getSteps().slice();d.reverse();var g=this;k.sort(function(b,e){for(var k=
0,q=0;q<d.length;q++){var n=d[q].name,p=d[q].reverse,r=g.getEvent(n);if(void 0==r||null==r)console.log("no event found for sorting: "+n);else{var k=r.metadata.allowedValues,n=r.data.getData([b,e]),r=n[0].val,n=n[1].val,s=null,s="numeric"==k?compareAsNumeric:"categoric"==k?compareAsString:"expression"==k?compareAsNumeric:"date"==k?compareAsDate:compareAsString,k=s(r,n);p&&(k*=-1);if(0!=k)break}}return k});return k};this.scaledExpressionRescaling=function(){};this.zScoreExpressionRescaling=function(){console.log("zScoreExpressionRescaling");
var e=this.getEventIdsByType();if(!hasOwnProperty(e,"expression data"))return console.log("no expression"),null;for(var e=e["expression data"],k={},d={stats:k},g=[],b=0;b<e.length;b++){var h=e[b],l=this.getEvent(h).data.getStats();k[h]={};k[h]=l;for(var l=this.getEvent(h).data.getData(),q=0;q<l.length;q++){var n=l[q],p=n.val;n.val_orig=p;isNumerical(p)&&(n.val=(p-k[h].mean)/k[h].sd,g.push(n.val))}}d.maxVal=jStat.max(g);d.minVal=jStat.min(g);return d};this.betweenMeansExpressionRescaling=function(e,
k,d){console.log("betweenMeansExpressionRescaling",e,k,d);k=this.getEvent(e).data.selectIds(k);var g=null;null==d?(g=this.getEvent(e).data.selectIds(d),g=g.concat(k),g=eliminateDuplicates(g)):g=this.getEvent(e).data.selectIds(d);e=this.getEventIdsByType();if(!hasOwnProperty(e,"expression data"))return console.log("no expression"),null;e=e["expression data"];d={};for(var b={meanVals:d},h=[],l=0;l<e.length;l++){var q=e[l];d[q]={};d[q].group1=this.getEvent(q).data.getStats(k).mean;d[q].group2=this.getEvent(q).data.getStats(g).mean;
for(var n=(d[q].group2-d[q].group1)/2,q=this.getEvent(q).data.getData(),p=0;p<q.length;p++){var r=q[p],s=r.val;r.val_orig=s;isNumerical(s)&&(r.val=s-n,h.push(r.val))}}b.maxVal=jStat.max(h);b.minVal=jStat.min(h);return b};this.yuliaExpressionRescaling=function(e,k){console.log("yuliaExpressionRescaling",e,k);var d=this.getEvent(e).data.selectIds(k),g=this.getEventIdsByType();if(!hasOwnProperty(g,"expression data"))return console.log("no expression"),null;for(var g=g["expression data"],b={},h={meanVals:b},
l=[],q=0;q<g.length;q++){var n=g[q];b[n]=this.getEvent(n).data.getStats(d).mean;for(var p=this.getEvent(n).data.getData(),r=0;r<p.length;r++){var s=p[r],w=s.val;s.val_orig=w;isNumerical(w)&&(s.val=w-b[n],l.push(s.val))}}h.maxVal=jStat.max(l);h.minVal=jStat.min(l);return h};this.eventwiseMedianRescaling=function(){console.log("eventwiseMedianRescaling");var e=this.getEventIdsByType();if(!hasOwnProperty(e,"expression data"))return console.log("no expression"),null;for(var e=e["expression data"],k={},
d={stats:k},g=[],b=0;b<e.length;b++){var h=e[b],l=this.getEvent(h).data.getStats();k[h]={};k[h]=l;for(var l=this.getEvent(h).data.getData(),q=0;q<l.length;q++){var n=l[q],p=n.val;n.val_orig=p;isNumerical(p)&&(n.val=p-k[h].median,g.push(n.val))}}d.maxVal=jStat.max(g);d.minVal=jStat.min(g);return d};this.samplewiseMedianRescaling=function(){};this.bivariateNormalization=function(){};this.fillInMissingSamples=function(e){for(var k=this.getAllSampleIds(),d=this.getEventIdsByType(),g=0;g<getKeys(d).length;g++)for(var b=
getKeys(d)[g],h=0;h<d[b].length;h++){var l=d[b][h],q=this.getEvent(l).data.getAllSampleIds();if(0!=k.length-q.length){for(var q=keepReplicates(k.concat(q),2,!0),n={},p=0;p<q.length;p++)n[q[p]]=e;this.getEvent(l).data.setData(n)}}}}function OD_event(e){this.metadata=new OD_eventMetadata(e);this.data=new OD_eventDataCollection}
function OD_eventMetadata(e){this.id=e.id;this.name=e.name;this.displayName=e.displayName;this.description=e.description;this.datatype=e.datatype;this.allowedValues=e.allowedValues;this.parents={};this.children={};this.addParent=function(e){this.parents[e]=e;return this};this.addChild=function(e){this.children[e]=e;return this};this.computeCompositeScore=function(e){return null}}
function OD_eventDataCollection(){function e(e,d){this.id=e;this.val=d}this.dataCollection=[];this.getValueCounts=function(e){var d={};e=this.getData(e);for(var g=0;g<e.length;g++){var b=e[g].val;hasOwnProperty(d,b)||(d[b]=0);d[b]+=1}return d};this.getValues=function(e){var d=this.getValueCounts(),d=getKeys(d);null!=e&&1==e&&(d=eliminateDuplicates(d));return d};this.setData=function(k,d){for(var g in k){var b=k[g];"NaN"!=b&&"null"!=b&&""!=b&&"N/A"!=b&&(null!=d&&1==d&&(b=parseFloat(b)),this.dataCollection.push(new e(g,
b)))}return this};this.getData=function(k){var d=this.getAllSampleIds(!0);null==k&&(k=getKeys(d));for(var g=[],b=0;b<k.length;b++){var h=k[b];h in d?g.push(this.dataCollection[d[h]]):g.push(new e(h,null))}return g};this.getAllSampleIds=function(e){for(var d={},g=0;g<this.dataCollection.length;g++)d[this.dataCollection[g].id]=g;return e?d:getKeys(d)};this.sortSamples=function(e,d){var g=this.getData(e),b=compareSamplesAsStrings;d=null==d?"categoric":d.toLowerCase();"numeric"==d||"expression"==d?b=
compareSamplesAsNumeric:"date"==d&&(b=compareSamplesAsDate);g.sort(b);for(var b=[],h=0;h<g.length;h++)b.push(g[h].id);return b};this.selectIds=function(e,d){for(var g=[],b=null==d?this.getData():this.getData(d),h=0;h<b.length;h++){var l=b[h];l.val==e&&g.push(l.id)}return g};this.getStats=function(e){var d={min:0,max:0,mean:0,median:0,sd:0,meddev:0,meandev:0},g=this.getAllSampleIds(!0);null==e&&(e=getKeys(g));for(var b=[],h=0;h<e.length;h++){var l=e[h];l in g&&(l=this.dataCollection[g[l]].val,isNumerical(l)&&
b.push(l))}d.mean=jStat.mean(b);d.sd=jStat.stdev(b);d.median=jStat.median(b);d.meddev=jStat.meddev(b);d.meandev=jStat.meandev(b);d.min=jStat.min(b);d.max=jStat.max(b);return d}}
function sortingSteps(e){this.steps=[];null!=e&&(this.steps=e);this.getSteps=function(){return this.steps};this.getIndex=function(e){for(var d=0;d<this.steps.length;d++)if(this.steps[d].name==e)return d;return-1};this.addStep=function(e){var d=this.getIndex(e);0<=d?(e=this.steps.splice(d,1)[0],e.reverse=!e.reverse,this.steps.push(e)):this.steps.push({name:e,reverse:!1})};this.removeStep=function(e){e=this.getIndex(e);0<=e&&this.steps.splice(e,1)};this.clearSteps=function(){this.steps.splice(0,this.steps.length)}}
function sampleSelectionCriteria(){this.criteria=[];this.getCriteria=function(){return this.criteria};this.addCriteria=function(e,k){var d={eventId:e,value:k},g;for(g in this.criteria)if(JSON.stringify(this.criteria[g])==JSON.stringify(d))return;this.criteria.push(d)};this.removeCriteria=function(e,k){for(var d=0;d<this.criteria.length;d++)if(this.criteria[d].eventId==e&&this.criteria[d].value==k){this.criteria.splice(d,1);break}};this.clearCriteria=function(){this.criteria.splice(0,this.criteria.length)}}
;function transposeClinicalData(e,k){for(var d={},g=0;g<e.length;g++){var b=e[g],h=b[k],l;for(l in b)l in d||(d[l]={}),d[l][h]=b[l]}return d}
function getClinicalData(e,k){for(var d=getResponse(e).split("\n"),g=[],b=[],h=[],l=0;l<d.length;l++){var q=d[l];beginsWith(q,"#")?b.push(q):beginsWith(q,"STRING")?h=q.split("\t"):g.push(q)}d=d3.tsv.parse(g.join("\n"));g=transposeClinicalData(d,"SAMPLE_ID");delete g.SAMPLE_ID;b=getKeys(g);for(l=0;l<b.length;l++){var q=b[l],n=g[q],p=h[l+1],r="categoric";"number"==p.toLowerCase()?r="numeric":"date"==p.toLowerCase()&&(r="date");k.addEvent({id:q,name:null,displayName:null,description:null,datatype:"clinical data",
allowedValues:r},n)}return d}function getClinicalData_old(e,k){var d=getResponse(e),d=d3.tsv.parse(d),d=transposeClinicalData(d,"CASE_ID"),g;for(g in d){var b=d[g],h=g,l=endsWith(h.toLowerCase(),"_score")?"numeric":"categoric";k.addEvent({id:h,name:null,displayName:null,description:null,datatype:"clinical data",allowedValues:l},b)}}
function getMutationData(e,k){for(var d=getResponse(e),g=d3.tsv.parse(d),d={},b=0;b<g.length;b++){var h=g[b],l=h.Hugo_Symbol,h=h.Tumor_Sample_Barcode,h=h.replace(/_/g,"-"),h=h.replace(/[A-Z]$/,"");hasOwnProperty(d,l)||(d[l]={},d[l].metadata={id:l+"_mut",name:null,displayName:null,description:null,datatype:"mutation data",allowedValues:"categoric"},d[l].data={});d[l].data[h]=!0}g=getKeys(d);for(b=0;b<g.length;b++)l=d[g[b]],k.addEvent(l.metadata,l.data);return d}
function getMutationData_old(e){var k=getResponse(e).split("\n"),d=[],g=[];for(e=0;e<k.length;e++){var b=k[e];beginsWith(b,"#")?g.push(b):d.push(b)}k=d3.tsv.parse(d.join("\n"));for(e=0;e<k.length;e++)d=k[e],g=d.COMMON,delete d.GENE_ID,delete d.COMMON,OD_eventAlbum.addEvent({id:g+"_mutation",name:null,displayName:null,description:null,datatype:"mutation",allowedValues:"numeric"},d);return k}
function getExpressionData(e,k){var d=getResponse(e),d=d3.tsv.parse(d),g;for(g in d){var b=d[g],h=b[""];delete b[""];k.addEvent({id:h+"_mRNA",name:null,displayName:null,description:null,datatype:"expression data",allowedValues:"expression"},b)}}
mongoClinicalData=function(e,k){for(var d=0;d<e.length;d++){var g=e[d],b=null;if(hasOwnProperty(g,"sample"))b=g.sample;else if(hasOwnProperty(g,"Sample"))b=g.Sample;else{console.log("no sample ID found in clinical doc: "+prettyJson(g));continue}b=b.trim();if("Patient ID"!=b)for(var h=getKeys(g),l=0;l<h.length;l++){var q=h[l];if(!isObjInArray(["_id","sample","Sample"],q)){var n=k.getEvent(q);null==n&&(k.addEvent({id:q,name:null,displayName:null,description:null,datatype:"clinical data",allowedValues:"categoric"},
[]),n=k.getEvent(q));var p={};p[b]=g[q];n.data.setData(p)}}}return null};
mongoExpressionData=function(e,k){for(var d=0;d<e.length;d++){var g=e[d],b=null;if(hasOwnProperty(g,"gene"))b=g.gene;else if(hasOwnProperty(g,"id"))b=g.id;else{console.log("no gene identifier found in expression doc: "+prettyJson(g));continue}for(var b=b.trim(),b=b+"_mRNA",h=getKeys(g),l=0;l<h.length;l++){var q=h[l];if(!isObjInArray(["_id","gene","id"],q)){var n=k.getEvent(b);null==n&&(k.addEvent({id:b,name:null,displayName:null,description:null,datatype:"expression data",allowedValues:"numeric"},
[]),n=k.getEvent(b));var p={};p[q]=parseFloat(g[q]);n.data.setData(p)}}}return null};buildObservationDeck=function(e,k){k=getConfiguration(k);k.containerDivId=e.id;drawMatrix(e,k);setupContextMenus(k)};
getConfiguration=function(e){var k=parseJson(getCookie("od_config"))||{};e.querySettings=k;k=null;"eventAlbum"in e?k=e.eventAlbum:(k=new OD_eventMetadataAlbum,e.eventAlbum=k);"clinicalUrl"in e&&getClinicalData(e.clinicalUrl,k);"expressionUrl"in e&&getExpressionData(e.expressionUrl,k);"mutationUrl"in e&&getMutationData(e.mutationUrl,k);if("mongoData"in e){var d=e.mongoData;"clinical"in d&&mongoClinicalData(d.clinical,k);"expression"in d&&mongoExpressionData(d.expression,k)}return e};
setupContextMenus=function(e){setupColLabelContextMenu(e);setupRowLabelContextMenu(e);setupCategoricCellContextMenu(e);setupExpressionCellContextMenu(e)};resetConfig=function(e){deleteCookie("od_config");for(var k=getKeys(e),d=0;d<k.length;d++){var g=k[d];isObjInArray(["mongoData","containerDivId"],g)||delete e[g]}};
setupColLabelContextMenu=function(e){$.contextMenu({selector:".colLabel",callback:function(e,d){var g=this[0].__data__,b=0<=this[0].getAttribute("class").indexOf("axis")?!0:!1;b&&(b=0<=this[0].getAttribute("class").indexOf("rowLabel")?"row":"column");console.log(e,g,b)},items:{reset:{name:"reset",icon:null,disabled:!1,callback:function(k,d){resetConfig(e);var g=document.getElementById(e.containerDivId);buildObservationDeck(g,e)}}}})};
setupRowLabelContextMenu=function(e){$.contextMenu({selector:".rowLabel",callback:function(e,d){var g=this[0].__data__,b=0<=this[0].getAttribute("class").indexOf("axis")?!0:!1;b&&(b=0<=this[0].getAttribute("class").indexOf("rowLabel")?"row":"column");console.log(e,g,b)},items:{sort:{name:"sort",icon:null,disabled:!1,callback:function(k,d){var g=this[0].__data__,b=0<=this[0].getAttribute("class").indexOf("axis")?!0:!1;if(b){var b=0<=this[0].getAttribute("class").indexOf("rowLabel")?"row":"column",
h="colSort";"row"!=b&&(h="rowSort");var b=null,l=e.querySettings,b=h in l?new sortingSteps(l[h].steps):new sortingSteps;b.addStep(g);l[h]=b;setCookie("od_config",JSON.stringify(l));g=document.getElementById(e.containerDivId);buildObservationDeck(g,e)}else console.log("exit out because not a row or a column")}},sep1:"---------",expand:{name:"expand",icon:null,disabled:!0},collapse:{name:"collapse",icon:null,disabled:!0},reset:{name:"reset",icon:null,disabled:!1,callback:function(k,d){resetConfig(e);
var g=document.getElementById(e.containerDivId);buildObservationDeck(g,e)}}}})};
setupExpressionCellContextMenu=function(e){$.contextMenu({selector:".mrna_exp",callback:function(e,d){},items:{"eventwise median rescaling":{name:"eventwise median rescaling",icon:null,disabled:!1,callback:function(k,d){var g=e.querySettings;g["expression rescaling"]={method:"eventwiseMedianRescaling"};setCookie("od_config",JSON.stringify(g));g=document.getElementById(e.containerDivId);buildObservationDeck(g,e)}},"eventwise z-score rescaling":{name:"eventwise z-score rescaling",icon:null,disabled:!1,
callback:function(k,d){var g=e.querySettings;g["expression rescaling"]={method:"zScoreExpressionRescaling"};setCookie("od_config",JSON.stringify(g));g=document.getElementById(e.containerDivId);buildObservationDeck(g,e)}},sep1:"---------",reset:{name:"reset",icon:null,disabled:!1,callback:function(k,d){resetConfig(e);var g=document.getElementById(e.containerDivId);buildObservationDeck(g,e)}}}})};
setupCategoricCellContextMenu=function(e){$.contextMenu({selector:".categoric",callback:function(e,d){},items:{"yulia expression rescaling":{name:"yulia expression rescaling",icon:null,disabled:!1,callback:function(k,d){var g=this[0],b=g.getAttribute("eventId");g.getAttribute("sampleId");g=g.getAttribute("val");console.log("key:",k,"eventId:",b,"val:",g);console.log("href",window.location.href);console.log("host",window.location.host);console.log("pathname",window.location.pathname);console.log("search",
window.location.search);var h=e.querySettings;h["expression rescaling"]={method:"yulia_rescaling",eventId:b,val:g};setCookie("od_config",JSON.stringify(h));b=document.getElementById(e.containerDivId);buildObservationDeck(b,e)}},sep1:"---------",reset:{name:"reset",icon:null,disabled:!1,callback:function(k,d){resetConfig(e);var g=document.getElementById(e.containerDivId);buildObservationDeck(g,e)}}}})};
drawMatrix=function(e,k){k.rowClickback=function(b,d){var e=k.eventAlbum.getEvent(b).metadata.datatype;"expression data"===e?(e="/wb/gene/"+b.replace("_mRNA",""),window.open(e,"_self")):alert("open page for event: "+b+" of datatype: "+e)};k.columnClickback=function(b,d){window.open("/wb/patient/"+b,"_self")};k.cellClickback=function(b,d){console.log("cellClickback: r"+b.eventId+" c"+b.id+" val:"+b.val)};k.rowRightClickback=function(b,d){console.log("rowRightClickback: "+b);d3.event.preventDefault()};
k.columnRightClickback=function(b,d){console.log("columnRightClickback: "+b);d3.event.preventDefault()};k.cellRightClickback=function(b,d){console.log("cellRightClickback: r"+b.eventId+" c"+b.id+" val:"+b.val);d3.event.preventDefault()};var d=removeChildElems(e),g=k.eventAlbum;g.fillInMissingSamples(null);var b=g.getEventIdsByType(),h=[],l;for(l in b){var q=b[l];console.log("datatype",l,"has",q.length,"events");h=h.concat(q)}var q=k.querySettings,n=null;hasOwnProperty(b,"expression data")&&hasOwnProperty(q,
"expression rescaling")?(b=q["expression rescaling"],"yulia_rescaling"===b.method?n=g.yuliaExpressionRescaling(b.eventId,b.val):"eventwiseMedianRescaling"===b.method?n=g.eventwiseMedianRescaling():"zScoreExpressionRescaling"===b.method&&(n=g.zScoreExpressionRescaling())):console.log("no expression data rescaling");b=centeredRgbaColorMapper(!1);null!=n&&(b=centeredRgbaColorMapper(!1,0,n.minVal,n.maxVal));var p={};for(l=0;l<h.length;l++){var r=h[l],s=g.getEvent(r).metadata.allowedValues;if("categoric"==
s)p[r]=d3.scale.category10();else if("numeric"==s){for(var w=g.getEvent(r).data.getValues(),s=[],v=0;v<w.length;v++){var x=w[v];isNumerical(x)&&s.push(x)}w=Math.min.apply(null,s);s=Math.max.apply(null,s);p[r]=centeredRgbaColorMapper(!1,0,w,s)}else p[r]="expression"==s?b:d3.scale.category10()}r=b=null;if("colSort"in q)for(r=new sortingSteps(q.colSort.steps),l=r.getSteps().length-1;0<=l;l--)s=r.steps[l],s=s.name,g.getEvent(s)||(console.log(s,"not found, skip sorting by that event"),r.removeStep(s));
var b=g.multisortSamples(r),y={};for(l in b)s=b[l],y[s]=l;q=[];if(null!=r){w=r.getSteps();for(v=0;v<w.length;v++)s=w[v],r=s.name,q.push(r);q.reverse()}for(s=0;s<h.length;s++)r=h[s],isObjInArray(q,r)||q.push(r);var L={};for(l in q)s=q[l],L[s]=l;h=lengthOfLongestString(b);l=lengthOfLongestString(q);h=3<h?9*h:30;l=1<l?8*l:15;var r=document.documentElement.clientWidth,M=Math.floor((r-l-0)/(b.length>q.length?b.length:q.length)),s=h+0+M*q.length,d=d3.select(d).append("svg").attr({width:r,height:s,viewBox:"0 0 "+
r+" "+s,perserveAspectRatio:"xMinYMin meet"}).append("g").attr({transform:"translate("+l+","+h+")"}),h=-6;l=M/1.5;h=d.selectAll(".rowLabel").data(q).enter().append("text").text(function(b){return b}).attr({x:0,y:function(b,d){return d*M},transform:"translate("+h+", "+l+")","class":function(b,d){return"rowLabel mono axis unselectable"}}).style("text-anchor","end");h.on("click",k.rowClickback);h.on("contextmenu",k.rowRightClickback);h.append("title").text(function(b){var d=g.getEvent(b).metadata.datatype,
e="event: "+b+"\ndatatype: "+d;"expression data"===d&&null!=n&&(e=e+"\nraw data stats: "+prettyJson(n.stats[b]));return e});h=Math.floor(M/5);l=-1*Math.floor(M/3);h=d.selectAll(".colLabel").data(b).enter().append("text").text(function(b){return b}).attr({y:function(b,d){return(d+1)*M},x:0,transform:"rotate(-90) translate("+h+", "+l+")","class":function(b,d){return"colLabel mono axis unselectable"}}).style("text-anchor","start");h.on("click",k.columnClickback);h.on("contextmenu",k.columnRightClickback);
h.append("title").text(function(b){return"sample: "+b});h=g.getAllDataAsList();d=d.selectAll(".cell").data(h).enter().append(function(b){var d=document.createElementNS(svgNamespaceUri,"g");d.setAttributeNS(null,"class","cell");var e=y[b.id]*M,h=L[b.eventId]*M,k,l,n=M,q=M,r={"class":"bordered"};k=b.eventId;r.fill=null==k||null==b.val?"lightgrey":"white";d.appendChild(createSvgRectElement(e,h,4,4,n,q,r));if(null==k||null==b.val)return d;r=b.val;e=y[b.id]*M;h=L[b.eventId]*M;l=k=4;q=n=M;r={stroke:"#E6E6E6",
"stroke-width":"2px",fill:(0,p[b.eventId])(r)};"categoric"===g.getEvent(b.eventId).metadata.allowedValues?(r["class"]="categoric",r.eventId=b.eventId,r.sampleId=b.id,r.val=b.val):"expression data"===g.getEvent(b.eventId).metadata.datatype&&(r["class"]="mrna_exp",r.eventId=b.eventId,r.sampleId=b.id,r.val=b.val);d.appendChild(createSvgRectElement(e,h,k,l,n,q,r));return d});d.on("click",k.cellClickback).on("contextmenu",k.cellRightClickback);d.append("title").text(function(b){return"event: "+b.eventId+
"\nsample: "+b.id+"\nvalue: "+b.val});return k};
