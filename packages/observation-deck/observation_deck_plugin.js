(function(e,k){function d(e){e=e.split(/\s+/);for(var b=[],d=0,g;g=e[d];d++)g=g[0].toUpperCase(),b.push(g);return b}function g(b){return b.id&&e('label[for="'+b.id+'"]').val()||b.name}function b(d,h,l){l||(l=0);h.each(function(){var h=e(this),n=this,p=this.nodeName.toLowerCase(),q,r;"label"==p&&h.find("input, textarea, select").length&&(q=h.text(),h=h.children().first(),n=h.get(0),p=n.nodeName.toLowerCase());switch(p){case "menu":r={name:h.attr("label"),items:{}};l=b(r.items,h.children(),l);break;
case "a":case "button":r={name:h.text(),disabled:!!h.attr("disabled"),callback:function(){return function(){h.click()}}()};break;case "menuitem":case "command":switch(h.attr("type")){case k:case "command":case "menuitem":r={name:h.attr("label"),disabled:!!h.attr("disabled"),callback:function(){return function(){h.click()}}()};break;case "checkbox":r={type:"checkbox",disabled:!!h.attr("disabled"),name:h.attr("label"),selected:!!h.attr("checked")};break;case "radio":r={type:"radio",disabled:!!h.attr("disabled"),
name:h.attr("label"),radio:h.attr("radiogroup"),value:h.attr("id"),selected:!!h.attr("checked")};break;default:r=k}break;case "hr":r="-------";break;case "input":switch(h.attr("type")){case "text":r={type:"text",name:q||g(n),disabled:!!h.attr("disabled"),value:h.val()};break;case "checkbox":r={type:"checkbox",name:q||g(n),disabled:!!h.attr("disabled"),selected:!!h.attr("checked")};break;case "radio":r={type:"radio",name:q||g(n),disabled:!!h.attr("disabled"),radio:!!h.attr("name"),value:h.val(),selected:!!h.attr("checked")};
break;default:r=k}break;case "select":r={type:"select",name:q||g(n),disabled:!!h.attr("disabled"),selected:h.val(),options:{}};h.children().each(function(){r.options[this.value]=e(this).text()});break;case "textarea":r={type:"textarea",name:q||g(n),disabled:!!h.attr("disabled"),value:h.val()};break;case "label":break;default:r={type:"html",html:h.clone(!0)}}r&&(l++,d["key"+l]=r)});return l}e.support.htmlMenuitem="HTMLMenuItemElement"in window;e.support.htmlCommand="HTMLCommandElement"in window;e.support.eventSelectstart=
"onselectstart"in document.documentElement;if(!e.ui||!e.ui.widget){var h=e.cleanData;e.cleanData=function(b){for(var d=0,g;null!=(g=b[d]);d++)try{e(g).triggerHandler("remove")}catch(k){}h(b)}}var l=null,p=!1,n=e(window),q=0,r={},s={},w={},u={selector:null,appendTo:null,trigger:"right",autoHide:!1,delay:200,reposition:!0,determinePosition:function(b){if(e.ui&&e.ui.position)b.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none");
else{var d=this.offset();d.top+=this.outerHeight();d.left+=this.outerWidth()/2-b.outerWidth()/2;b.css(d)}},position:function(e,b,d){if(b||d){b="maintain"===b&&"maintain"===d?e.$menu.position():{top:d,left:b};d=n.scrollTop()+n.height();var g=n.scrollLeft()+n.width(),h=e.$menu.height(),k=e.$menu.width();b.top+h>d&&(b.top-=h);b.left+k>g&&(b.left-=k);e.$menu.css(b)}else e.determinePosition.call(this,e.$menu)},positionSubmenu:function(b){if(e.ui&&e.ui.position)b.css("display","block").position({my:"left top",
at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var d={top:0,left:this.outerWidth()};b.css(d)}},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{show:e.noop,hide:e.noop},callback:null,items:{}},x=null,y=null,L=null,M,N=function(e){for(var b=0;b=Math.max(b,parseInt(e.css("z-index"),10)||0),e=e.parent(),e&&e.length&&!(-1<"html body".indexOf(e.prop("nodeName").toLowerCase())););return b},z={abortevent:function(e){e.preventDefault();e.stopImmediatePropagation()},
contextmenu:function(b){var d=e(this);b.preventDefault();b.stopImmediatePropagation();if(!("right"!=b.data.trigger&&b.originalEvent||d.hasClass("context-menu-active")||d.hasClass("context-menu-disabled"))){l=d;if(b.data.build){var g=b.data.build(l,b);if(!1===g)return;b.data=e.extend(!0,{},u,b.data,g||{});if(!b.data.items||e.isEmptyObject(b.data.items))throw window.console&&(console.error||console.log)("No items specified to show in contextMenu"),Error("No Items specified");b.data.$trigger=l;Q.create(b.data)}Q.show.call(d,
b.data,b.pageX,b.pageY)}},click:function(b){b.preventDefault();b.stopImmediatePropagation();e(this).trigger(e.Event("contextmenu",{data:b.data,pageX:b.pageX,pageY:b.pageY}))},mousedown:function(b){var d=e(this);l&&l.length&&!l.is(d)&&l.data("contextMenu").$menu.trigger("contextmenu:hide");2==b.button&&(l=d.data("contextMenuActive",!0))},mouseup:function(b){var d=e(this);d.data("contextMenuActive")&&l&&l.length&&l.is(d)&&!d.hasClass("context-menu-disabled")&&(b.preventDefault(),b.stopImmediatePropagation(),
l=d,d.trigger(e.Event("contextmenu",{data:b.data,pageX:b.pageX,pageY:b.pageY})));d.removeData("contextMenuActive")},mouseenter:function(b){var d=e(this),g=e(b.relatedTarget),h=e(document);g.is(".context-menu-list")||g.closest(".context-menu-list").length||l&&l.length||(y=b.pageX,L=b.pageY,M=b.data,h.on("mousemove.contextMenuShow",z.mousemove),x=setTimeout(function(){x=null;h.off("mousemove.contextMenuShow");l=d;d.trigger(e.Event("contextmenu",{data:M,pageX:y,pageY:L}))},b.data.delay))},mousemove:function(b){y=
b.pageX;L=b.pageY},mouseleave:function(b){b=e(b.relatedTarget);if(!b.is(".context-menu-list")&&!b.closest(".context-menu-list").length){try{clearTimeout(x)}catch(d){}x=null}},layerClick:function(b){var d=e(this).data("contextMenuRoot"),g=b.button,h=b.pageX,k=b.pageY,l,p;b.preventDefault();b.stopImmediatePropagation();setTimeout(function(){var q,r="left"==d.trigger&&0===g||"right"==d.trigger&&2===g;document.elementFromPoint&&(d.$layer.hide(),l=document.elementFromPoint(h-n.scrollLeft(),k-n.scrollTop()),
d.$layer.show());if(d.reposition&&r)if(document.elementFromPoint){if(d.$trigger.is(l)||d.$trigger.has(l).length){d.position.call(d.$trigger,d,h,k);return}}else if(p=d.$trigger.offset(),q=e(window),p.top+=q.scrollTop(),p.top<=b.pageY&&(p.left+=q.scrollLeft(),p.left<=b.pageX&&(p.bottom=p.top+d.$trigger.outerHeight(),p.bottom>=b.pageY&&(p.right=p.left+d.$trigger.outerWidth(),p.right>=b.pageX)))){d.position.call(d.$trigger,d,h,k);return}if(l&&r)d.$trigger.one("contextmenu:hidden",function(){e(l).contextMenu({x:h,
y:k})});d.$menu.trigger("contextmenu:hide")},50)},keyStop:function(b,e){e.isInput||b.preventDefault();b.stopPropagation()},key:function(b){var e=l.data("contextMenu")||{};switch(b.keyCode){case 9:case 38:if(z.keyStop(b,e),e.isInput){if(9==b.keyCode&&b.shiftKey){b.preventDefault();e.$selected&&e.$selected.find("input, textarea, select").blur();e.$menu.trigger("prevcommand");return}if(38==b.keyCode&&"checkbox"==e.$selected.find("input, textarea, select").prop("type")){b.preventDefault();return}}else if(9!=
b.keyCode||b.shiftKey){e.$menu.trigger("prevcommand");return}case 40:z.keyStop(b,e);if(e.isInput){if(9==b.keyCode){b.preventDefault();e.$selected&&e.$selected.find("input, textarea, select").blur();e.$menu.trigger("nextcommand");return}if(40==b.keyCode&&"checkbox"==e.$selected.find("input, textarea, select").prop("type")){b.preventDefault();return}}else{e.$menu.trigger("nextcommand");return}break;case 37:z.keyStop(b,e);if(e.isInput||!e.$selected||!e.$selected.length)break;if(!e.$selected.parent().hasClass("context-menu-root")){b=
e.$selected.parent().parent();e.$selected.trigger("contextmenu:blur");e.$selected=b;return}break;case 39:z.keyStop(b,e);if(e.isInput||!e.$selected||!e.$selected.length)break;var d=e.$selected.data("contextMenu")||{};if(d.$menu&&e.$selected.hasClass("context-menu-submenu")){e.$selected=null;d.$selected=null;d.$menu.trigger("nextcommand");return}break;case 35:case 36:e.$selected&&e.$selected.find("input, textarea, select").length||((e.$selected&&e.$selected.parent()||e.$menu).children(":not(.disabled, .not-selectable)")[36==
b.keyCode?"first":"last"]().trigger("contextmenu:focus"),b.preventDefault());return;case 13:z.keyStop(b,e);if(e.isInput){if(e.$selected&&!e.$selected.is("textarea, select")){b.preventDefault();return}break}e.$selected&&e.$selected.trigger("mouseup");return;case 32:case 33:case 34:z.keyStop(b,e);return;case 27:z.keyStop(b,e);e.$menu.trigger("contextmenu:hide");return;default:if(d=String.fromCharCode(b.keyCode).toUpperCase(),e.accesskeys[d]){e.accesskeys[d].$node.trigger(e.accesskeys[d].$menu?"contextmenu:focus":
"mouseup");return}}b.stopPropagation();e.$selected&&e.$selected.trigger(b)},prevItem:function(b){b.stopPropagation();var d=e(this).data("contextMenu")||{};if(d.$selected){var g=d.$selected,d=d.$selected.parent().data("contextMenu")||{};d.$selected=g}for(var g=d.$menu.children(),h=d.$selected&&d.$selected.prev().length?d.$selected.prev():g.last(),k=h;h.hasClass("disabled")||h.hasClass("not-selectable");)if(h=h.prev().length?h.prev():g.last(),h.is(k))return;d.$selected&&z.itemMouseleave.call(d.$selected.get(0),
b);z.itemMouseenter.call(h.get(0),b);b=h.find("input, textarea, select");b.length&&b.focus()},nextItem:function(b){b.stopPropagation();var d=e(this).data("contextMenu")||{};if(d.$selected){var g=d.$selected,d=d.$selected.parent().data("contextMenu")||{};d.$selected=g}for(var g=d.$menu.children(),h=d.$selected&&d.$selected.next().length?d.$selected.next():g.first(),k=h;h.hasClass("disabled")||h.hasClass("not-selectable");)if(h=h.next().length?h.next():g.first(),h.is(k))return;d.$selected&&z.itemMouseleave.call(d.$selected.get(0),
b);z.itemMouseenter.call(h.get(0),b);b=h.find("input, textarea, select");b.length&&b.focus()},focusInput:function(b){b=e(this).closest(".context-menu-item");var d=b.data(),h=d.contextMenu,d=d.contextMenuRoot;d.$selected=h.$selected=b;d.isInput=h.isInput=!0},blurInput:function(b){b=e(this).closest(".context-menu-item").data();b.contextMenuRoot.isInput=b.contextMenu.isInput=!1},menuMouseenter:function(b){e(this).data().contextMenuRoot.hovering=!0},menuMouseleave:function(b){var d=e(this).data().contextMenuRoot;
d.$layer&&d.$layer.is(b.relatedTarget)&&(d.hovering=!1)},itemMouseenter:function(b){var d=e(this),h=d.data(),g=h.contextMenu,h=h.contextMenuRoot;h.hovering=!0;b&&h.$layer&&h.$layer.is(b.relatedTarget)&&(b.preventDefault(),b.stopImmediatePropagation());(g.$menu?g:h).$menu.children(".hover").trigger("contextmenu:blur");d.hasClass("disabled")||d.hasClass("not-selectable")?g.$selected=null:d.trigger("contextmenu:focus")},itemMouseleave:function(b){var d=e(this),h=d.data(),g=h.contextMenu,h=h.contextMenuRoot;
h!==g&&h.$layer&&h.$layer.is(b.relatedTarget)?(h.$selected&&h.$selected.trigger("contextmenu:blur"),b.preventDefault(),b.stopImmediatePropagation(),h.$selected=g.$selected=g.$node):d.trigger("contextmenu:blur")},itemClick:function(b){var d=e(this),h=d.data(),g=h.contextMenuRoot,k=h.contextMenuKey;if(h.contextMenu.items[k]&&!d.is(".disabled, .context-menu-submenu, .context-menu-separator, .not-selectable")){b.preventDefault();b.stopImmediatePropagation();if(e.isFunction(g.callbacks[k])&&Object.prototype.hasOwnProperty.call(g.callbacks,
k))b=g.callbacks[k];else if(e.isFunction(g.callback))b=g.callback;else return;!1!==b.call(g.$trigger,k,g)?g.$menu.trigger("contextmenu:hide"):g.$menu.parent().length&&Q.update.call(g.$trigger,g)}},inputClick:function(b){b.stopImmediatePropagation()},hideMenu:function(b,d){var h=e(this).data("contextMenuRoot");Q.hide.call(h.$trigger,h,d&&d.force)},focusItem:function(b){b.stopPropagation();b=e(this);var d=b.data(),h=d.contextMenu,d=d.contextMenuRoot;b.addClass("hover").siblings(".hover").trigger("contextmenu:blur");
h.$selected=d.$selected=b;h.$node&&d.positionSubmenu.call(h.$node,h.$menu)},blurItem:function(b){b.stopPropagation();b=e(this);var d=b.data().contextMenu;b.removeClass("hover");d.$selected=null}},Q={show:function(b,d,h){var g=e(this),k={};e("#context-menu-layer").trigger("mousedown");b.$trigger=g;if(!1===b.events.show.call(g,b))l=null;else if(Q.update.call(g,b),b.position.call(g,b,d,h),b.zIndex&&(k.zIndex=N(g)+b.zIndex),Q.layer.call(b.$menu,b,k.zIndex),b.$menu.find("ul").css("zIndex",k.zIndex+1),
b.$menu.css(k)[b.animation.show](b.animation.duration,function(){g.trigger("contextmenu:visible")}),g.data("contextMenu",b).addClass("context-menu-active"),e(document).off("keydown.contextMenu").on("keydown.contextMenu",z.key),b.autoHide)e(document).on("mousemove.contextMenuAutoHide",function(e){var d=g.offset();d.right=d.left+g.outerWidth();d.bottom=d.top+g.outerHeight();!b.$layer||b.hovering||e.pageX>=d.left&&e.pageX<=d.right&&e.pageY>=d.top&&e.pageY<=d.bottom||b.$menu.trigger("contextmenu:hide")})},
hide:function(b,d){var h=e(this);b||(b=h.data("contextMenu")||{});if(d||!b.events||!1!==b.events.hide.call(h,b)){h.removeData("contextMenu").removeClass("context-menu-active");if(b.$layer){setTimeout(function(b){return function(){b.remove()}}(b.$layer),10);try{delete b.$layer}catch(g){b.$layer=null}}l=null;b.$menu.find(".hover").trigger("contextmenu:blur");b.$selected=null;e(document).off(".contextMenuAutoHide").off("keydown.contextMenu");b.$menu&&b.$menu[b.animation.hide](b.animation.duration,function(){b.build&&
(b.$menu.remove(),e.each(b,function(d,e){switch(d){case "ns":case "selector":case "build":case "trigger":return!0;default:b[d]=k;try{delete b[d]}catch(h){}return!0}}));setTimeout(function(){h.trigger("contextmenu:hidden")},10)})}},create:function(b,h){h===k&&(h=b);b.$menu=e('<ul class="context-menu-list"></ul>').addClass(b.className||"").data({contextMenu:b,contextMenuRoot:h});e.each(["callbacks","commands","inputs"],function(d,e){b[e]={};h[e]||(h[e]={})});h.accesskeys||(h.accesskeys={});e.each(b.items,
function(g,k){var l=e('<li class="context-menu-item"></li>').addClass(k.className||""),n=null,p=null;l.on("click",e.noop);k.$node=l.data({contextMenu:b,contextMenuRoot:h,contextMenuKey:g});if(k.accesskey)for(var q=d(k.accesskey),r=0,s;s=q[r];r++)if(!h.accesskeys[s]){h.accesskeys[s]=k;k._name=k.name.replace(new RegExp("("+s+")","i"),'<span class="context-menu-accesskey">$1</span>');break}if("string"==typeof k)l.addClass("context-menu-separator not-selectable");else if(k.type&&w[k.type])w[k.type].call(l,
k,b,h),e.each([b,h],function(b,d){d.commands[g]=k;e.isFunction(k.callback)&&(d.callbacks[g]=k.callback)});else{"html"==k.type?l.addClass("context-menu-html not-selectable"):k.type?(n=e("<label></label>").appendTo(l),e("<span></span>").html(k._name||k.name).appendTo(n),l.addClass("context-menu-input"),b.hasTypes=!0,e.each([b,h],function(b,d){d.commands[g]=k;d.inputs[g]=k})):k.items&&(k.type="sub");switch(k.type){case "text":p=e('<input type="text" value="1" name="" value="">').attr("name","context-menu-input-"+
g).val(k.value||"").appendTo(n);break;case "textarea":p=e('<textarea name=""></textarea>').attr("name","context-menu-input-"+g).val(k.value||"").appendTo(n);k.height&&p.height(k.height);break;case "checkbox":p=e('<input type="checkbox" value="1" name="" value="">').attr("name","context-menu-input-"+g).val(k.value||"").prop("checked",!!k.selected).prependTo(n);break;case "radio":p=e('<input type="radio" value="1" name="" value="">').attr("name","context-menu-input-"+k.radio).val(k.value||"").prop("checked",
!!k.selected).prependTo(n);break;case "select":p=e('<select name="">').attr("name","context-menu-input-"+g).appendTo(n);k.options&&(e.each(k.options,function(b,d){e("<option></option>").val(b).text(d).appendTo(p)}),p.val(k.selected));break;case "sub":e("<span></span>").html(k._name||k.name).appendTo(l);k.appendTo=k.$node;Q.create(k,h);l.data("contextMenu",k).addClass("context-menu-submenu");k.callback=null;break;case "html":e(k.html).appendTo(l);break;default:e.each([b,h],function(b,d){d.commands[g]=
k;e.isFunction(k.callback)&&(d.callbacks[g]=k.callback)}),e("<span></span>").html(k._name||k.name||"").appendTo(l)}if(k.type&&"sub"!=k.type&&"html"!=k.type&&(p.on("focus",z.focusInput).on("blur",z.blurInput),k.events))p.on(k.events,b);k.icon&&l.addClass("icon icon-"+k.icon)}k.$input=p;k.$label=n;l.appendTo(b.$menu);if(!b.hasTypes&&e.support.eventSelectstart)l.on("selectstart.disableTextSelect",z.abortevent)});b.$node||b.$menu.css("display","none").addClass("context-menu-root");b.$menu.appendTo(b.appendTo||
document.body)},resize:function(b,d){b.css({position:"absolute",display:"block"});b.data("width",Math.ceil(b.width())+1);b.css({position:"static",minWidth:"0px",maxWidth:"100000px"});b.find("> li > ul").each(function(){Q.resize(e(this),!0)});d||b.find("ul").andSelf().css({position:"",display:"",minWidth:"",maxWidth:""}).width(function(){return e(this).data("width")})},update:function(b,d){var h=this;d===k&&(d=b,Q.resize(b.$menu));b.$menu.children().each(function(){var g=e(this),k=g.data("contextMenuKey"),
l=b.items[k],k=e.isFunction(l.disabled)&&l.disabled.call(h,k,d)||!0===l.disabled;g[k?"addClass":"removeClass"]("disabled");if(l.type)switch(g.find("input, select, textarea").prop("disabled",k),l.type){case "text":case "textarea":l.$input.val(l.value||"");break;case "checkbox":case "radio":l.$input.val(l.value||"").prop("checked",!!l.selected);break;case "select":l.$input.val(l.selected||"")}l.$menu&&Q.update.call(h,l,d)})},layer:function(b,d){var h=b.$layer=e('<div id="context-menu-layer" style="position:fixed; z-index:'+
d+'; top:0; left:0; opacity: 0; filter: alpha(opacity=0); background-color: #000;"></div>').css({height:n.height(),width:n.width(),display:"block"}).data("contextMenuRoot",b).insertBefore(this).on("contextmenu",z.abortevent).on("mousedown",z.layerClick);e.support.fixedPosition||h.css({position:"absolute",height:e(document).height()});return h}};e.fn.contextMenu=function(b){b===k?this.first().trigger("contextmenu"):b.x&&b.y?this.first().trigger(e.Event("contextmenu",{pageX:b.x,pageY:b.y})):"hide"===
b?(b=this.data("contextMenu").$menu)&&b.trigger("contextmenu:hide"):"destroy"===b?e.contextMenu("destroy",{context:this}):e.isPlainObject(b)?(b.context=this,e.contextMenu("create",b)):b?this.removeClass("context-menu-disabled"):b||this.addClass("context-menu-disabled");return this};e.contextMenu=function(b,d){"string"!=typeof b&&(d=b,b="create");"string"==typeof d?d={selector:d}:d===k&&(d={});var h=e.extend(!0,{},u,d||{}),g=e(document),l=g,n=!1;h.context&&h.context.length?(l=e(h.context).first(),
h.context=l.get(0),n=h.context!==document):h.context=document;switch(b){case "create":if(!h.selector)throw Error("No selector specified");if(h.selector.match(/.context-menu-(list|item|input)($|\s)/))throw Error('Cannot bind to selector "'+h.selector+'" as it contains a reserved className');if(!h.build&&(!h.items||e.isEmptyObject(h.items)))throw Error("No Items specified");q++;h.ns=".contextMenu"+q;n||(r[h.selector]=h.ns);s[h.ns]=h;h.trigger||(h.trigger="right");p||(g.on({"contextmenu:hide.contextMenu":z.hideMenu,
"prevcommand.contextMenu":z.prevItem,"nextcommand.contextMenu":z.nextItem,"contextmenu.contextMenu":z.abortevent,"mouseenter.contextMenu":z.menuMouseenter,"mouseleave.contextMenu":z.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",z.inputClick).on({"mouseup.contextMenu":z.itemClick,"contextmenu:focus.contextMenu":z.focusItem,"contextmenu:blur.contextMenu":z.blurItem,"contextmenu.contextMenu":z.abortevent,"mouseenter.contextMenu":z.itemMouseenter,"mouseleave.contextMenu":z.itemMouseleave},
".context-menu-item"),p=!0);l.on("contextmenu"+h.ns,h.selector,h,z.contextmenu);if(n)l.on("remove"+h.ns,function(){e(this).contextMenu("destroy")});switch(h.trigger){case "hover":l.on("mouseenter"+h.ns,h.selector,h,z.mouseenter).on("mouseleave"+h.ns,h.selector,h,z.mouseleave);break;case "left":l.on("click"+h.ns,h.selector,h,z.click)}h.build||Q.create(h);break;case "destroy":var x;if(n){var w=h.context;e.each(s,function(b,d){if(d.context!==w)return!0;x=e(".context-menu-list").filter(":visible");x.length&&
x.data().contextMenuRoot.$trigger.is(e(d.context).find(d.selector))&&x.trigger("contextmenu:hide",{force:!0});try{s[d.ns].$menu&&s[d.ns].$menu.remove(),delete s[d.ns]}catch(h){s[d.ns]=null}e(d.context).off(d.ns);return!0})}else if(!h.selector)g.off(".contextMenu .contextMenuAutoHide"),e.each(s,function(b,d){e(d.context).off(d.ns)}),r={},s={},q=0,p=!1,e("#context-menu-layer, .context-menu-list").remove();else if(r[h.selector]){x=e(".context-menu-list").filter(":visible");x.length&&x.data().contextMenuRoot.$trigger.is(h.selector)&&
x.trigger("contextmenu:hide",{force:!0});try{s[r[h.selector]].$menu&&s[r[h.selector]].$menu.remove(),delete s[r[h.selector]]}catch(y){s[r[h.selector]]=null}g.off(r[h.selector])}break;case "html5":(!e.support.htmlCommand&&!e.support.htmlMenuitem||"boolean"==typeof d&&d)&&e('menu[type="context"]').each(function(){this.id&&e.contextMenu({selector:"[contextmenu="+this.id+"]",items:e.contextMenu.fromMenu(this)})}).css("display","none");break;default:throw Error('Unknown operation "'+b+'"');}return this};
e.contextMenu.setInputValues=function(b,d){d===k&&(d={});e.each(b.inputs,function(b,e){switch(e.type){case "text":case "textarea":e.value=d[b]||"";break;case "checkbox":e.selected=d[b]?!0:!1;break;case "radio":e.selected=(d[e.radio]||"")==e.value?!0:!1;break;case "select":e.selected=d[b]||""}})};e.contextMenu.getInputValues=function(b,d){d===k&&(d={});e.each(b.inputs,function(b,e){switch(e.type){case "text":case "textarea":case "select":d[b]=e.$input.val();break;case "checkbox":d[b]=e.$input.prop("checked");
break;case "radio":e.$input.prop("checked")&&(d[e.radio]=e.value)}});return d};e.contextMenu.fromMenu=function(d){d=e(d);var h={};b(h,d.children());return h};e.contextMenu.defaults=u;e.contextMenu.types=w;e.contextMenu.handle=z;e.contextMenu.op=Q;e.contextMenu.menus=s})(jQuery);!function(){function e(a,f){return f>a?-1:a>f?1:a>=f?0:0/0}function k(a){return null!=a&&!isNaN(a)}function d(a){return{left:function(f,m,C,b){3>arguments.length&&(C=0);for(4>arguments.length&&(b=f.length);b>C;){var v=C+b>>>1;0>a(f[v],m)?C=v+1:b=v}return C},right:function(f,m,C,b){3>arguments.length&&(C=0);for(4>arguments.length&&(b=f.length);b>C;){var v=C+b>>>1;0<a(f[v],m)?b=v:C=v+1}return C}}}function g(a){return a.length}function b(a,f){try{for(var m in f)Object.defineProperty(a.prototype,m,{value:f[m],
enumerable:!1})}catch(b){a.prototype=f}}function h(){}function l(a){return Oa+a in this}function p(){var a=[];return this.forEach(function(f){a.push(f)}),a}function n(){var a=0,f;for(f in this)f.charCodeAt(0)===Cb&&++a;return a}function q(){for(var a in this)if(a.charCodeAt(0)===Cb)return!1;return!0}function r(){}function s(a,f,m){return function(){var b=m.apply(f,arguments);return b===f?a:b}}function w(a,f){if(f in a)return f;f=f.charAt(0).toUpperCase()+f.slice(1);for(var m=0,b=Rd.length;b>m;++m){var E=
Rd[m]+f;if(E in a)return E}}function u(){}function x(){}function y(a){function f(){for(var f,b=m,C=-1,d=b.length;++C<d;)(f=b[C].on)&&f.apply(this,arguments);return a}var m=[],b=new h;return f.on=function(f,v){var d,e=b.get(f);return 2>arguments.length?e&&e.on:(e&&(e.on=null,m=m.slice(0,d=m.indexOf(e)).concat(m.slice(d+1)),b.remove(f)),v&&m.push(b.set(f,{on:v})),a)},f}function L(){t.event.preventDefault()}function M(){for(var a,f=t.event;a=f.sourceEvent;)f=a;return f}function N(a){for(var f=new x,
m=0,b=arguments.length;++m<b;)f[arguments[m]]=y(f);return f.of=function(m,b){return function(C){try{var d=C.sourceEvent=t.event;C.target=a;t.event=C;f[C.type].apply(m,b)}finally{t.event=d}}},f}function z(a){return Db(a,O),a}function Q(a){return"function"==typeof a?a:function(){return Ac(a,this)}}function Id(a){return"function"==typeof a?a:function(){return Bc(a,this)}}function Jd(a,f){function m(){this.removeAttribute(a)}function b(){this.removeAttributeNS(a.space,a.local)}function d(){this.setAttribute(a,
f)}function v(){this.setAttributeNS(a.space,a.local,f)}function e(){var m=f.apply(this,arguments);null==m?this.removeAttribute(a):this.setAttribute(a,m)}function h(){var m=f.apply(this,arguments);null==m?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,m)}return a=t.ns.qualify(a),null==f?a.local?b:m:"function"==typeof f?a.local?h:e:a.local?v:d}function Kd(a){return a.trim().replace(/\s+/g," ")}function Ld(a){return new RegExp("(?:^|\\s+)"+t.requote(a)+"(?:\\s+|$)","g")}
function Md(a,f){function m(){for(var m=-1;++m<d;)a[m](this,f)}function b(){for(var m=-1,C=f.apply(this,arguments);++m<d;)a[m](this,C)}a=(a+"").trim().split(/^|\s+/).map(qg);var d=a.length;return"function"==typeof f?b:m}function qg(a){var f=Ld(a);return function(m,b){if(d=m.classList)return b?d.add(a):d.remove(a);var d=m.getAttribute("class")||"";b?(f.lastIndex=0,f.test(d)||m.setAttribute("class",Kd(d+" "+a))):m.setAttribute("class",Kd(d.replace(f," ")))}}function Nd(a,f,m){function b(){this.style.removeProperty(a)}
function d(){this.style.setProperty(a,f,m)}function v(){var b=f.apply(this,arguments);null==b?this.style.removeProperty(a):this.style.setProperty(a,b,m)}return null==f?b:"function"==typeof f?v:d}function Od(a,f){function m(){delete this[a]}function b(){this[a]=f}function d(){var m=f.apply(this,arguments);null==m?delete this[a]:this[a]=m}return null==f?m:"function"==typeof f?d:b}function Pd(a){return"function"==typeof a?a:(a=t.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,
a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,a)}}function Qd(a){return function(){return Sd(this,a)}}function rg(a){return arguments.length||(a=e),function(f,m){return f&&m?a(f.__data__,m.__data__):!f-!m}}function xa(a,f){for(var m=0,b=a.length;b>m;m++)for(var d,v=a[m],e=0,h=v.length;h>e;e++)(d=v[e])&&f(d,e,m);return a}function Td(a){return Db(a,ya),a}function sg(a){var f,m;return function(b,d,v){b=a[v].update;var e=b.length;v!=m&&(m=v,f=0);for(d>=f&&(f=d+1);!(d=
b[f])&&++f<e;);return d}}function Eb(){var a=this.__transition__;a&&++a.active}function Ud(a,f,m){function b(){var f=this[e];f&&(this.removeEventListener(a,f,f.$),delete this[e])}function d(){var v=g(f,Ga(arguments));b.call(this);this.addEventListener(a,this[e]=v,v.$=m);v._=f}function v(){var f,m=new RegExp("^__on([^.]+)"+t.requote(a)+"$"),b;for(b in this)if(f=b.match(m)){var C=this[b];this.removeEventListener(f[1],C,C.$);delete this[b]}}var e="__on"+a,h=a.indexOf("."),g=Vd;0<h&&(a=a.slice(0,h));
var ba=Cc.get(a);return ba&&(a=ba,g=tg),h?f?d:b:f?u:v}function Vd(a,f){return function(m){var b=t.event;t.event=m;f[0]=this.__data__;try{a.apply(this,f)}finally{t.event=b}}}function tg(a,f){var m=Vd(a,f);return function(a){var f=a.relatedTarget;f&&(f===this||8&f.compareDocumentPosition(this))||m.call(this,a)}}function Fb(){var a=".dragsuppress-"+ ++ug,f="click"+a,m=t.select(da).on("touchmove"+a,L).on("dragstart"+a,L).on("selectstart"+a,L);if(ob){var b=za.style,d=b[ob];b[ob]="none"}return function(v){function e(){m.on(f,
null)}m.on(a,null);ob&&(b[ob]=d);v&&(m.on(f,function(){L();e()},!0),setTimeout(e,0))}}function Dc(a,f){f.changedTouches&&(f=f.changedTouches[0]);var m=a.ownerSVGElement||a;if(m.createSVGPoint){var b=m.createSVGPoint();if(0>Ec&&(da.scrollX||da.scrollY)){var m=t.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),d=m[0][0].getScreenCTM();Ec=!(d.f||d.e);m.remove()}return Ec?(b.x=f.pageX,b.y=f.pageY):(b.x=f.clientX,b.y=f.clientY),b=b.matrixTransform(a.getScreenCTM().inverse()),
[b.x,b.y]}m=a.getBoundingClientRect();return[f.clientX-m.left-a.clientLeft,f.clientY-m.top-a.clientTop]}function vg(){return t.event.changedTouches[0].identifier}function wg(){return t.event.target}function xg(){return da}function Fc(a,f,m){return(f[0]-a[0])*(m[1]-a[1])-(f[1]-a[1])*(m[0]-a[0])}function Wd(a){return 1<a?0:-1>a?F:Math.acos(a)}function ab(a){return 1<a?aa:-1>a?-aa:Math.asin(a)}function Xd(a){return((a=Math.exp(a))+1/a)/2}function Yd(a){return(a=Math.sin(a/2))*a}function Qa(){}function sa(a,
f,m){return this instanceof sa?(this.h=+a,this.s=+f,void(this.l=+m)):2>arguments.length?a instanceof sa?new sa(a.h,a.s,a.l):Zd(""+a,$d,sa):new sa(a,f,m)}function Gc(a,f,m){function b(a){return 360<a?a-=360:0>a&&(a+=360),60>a?d+(v-d)*a/60:180>a?v:240>a?d+(v-d)*(240-a)/60:d}var d,v;return a=isNaN(a)?0:0>(a%=360)?a+360:a,f=isNaN(f)?0:0>f?0:1<f?1:f,m=0>m?0:1<m?1:m,v=.5>=m?m*(1+f):m+f-m*f,d=2*m-v,new ea(Math.round(255*b(a+120)),Math.round(255*b(a)),Math.round(255*b(a-120)))}function na(a,f,m){return this instanceof
na?(this.h=+a,this.c=+f,void(this.l=+m)):2>arguments.length?a instanceof na?new na(a.h,a.c,a.l):a instanceof oa?ae(a.l,a.a,a.b):ae((a=be((a=t.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new na(a,f,m)}function Hc(a,f,m){return isNaN(a)&&(a=0),isNaN(f)&&(f=0),new oa(m,Math.cos(a*=D)*f,Math.sin(a)*f)}function oa(a,f,m){return this instanceof oa?(this.l=+a,this.a=+f,void(this.b=+m)):2>arguments.length?a instanceof oa?new oa(a.l,a.a,a.b):a instanceof na?Hc(a.l,a.c,a.h):be((a=ea(a)).r,a.g,a.b):new oa(a,f,m)}function ce(a,
f,m){a=(a+16)/116;f=a+f/500;m=a-m/200;return f=Ic(f)*de,a=Ic(a)*ee,m=Ic(m)*fe,new ea(Jc(3.2404542*f-1.5371385*a-.4985314*m),Jc(-.969266*f+1.8760108*a+.041556*m),Jc(.0556434*f-.2040259*a+1.0572252*m))}function ae(a,f,m){return 0<a?new na(Math.atan2(m,f)*P,Math.sqrt(f*f+m*m),a):new na(0/0,0/0,a)}function Ic(a){return.206893034<a?a*a*a:(a-4/29)/7.787037}function Kc(a){return.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function Jc(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}
function ea(a,f,m){return this instanceof ea?(this.r=~~a,this.g=~~f,void(this.b=~~m)):2>arguments.length?a instanceof ea?new ea(a.r,a.g,a.b):Zd(""+a,ea,Gc):new ea(a,f,m)}function Gb(a){return new ea(a>>16,255&a>>8,255&a)+""}function bb(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function Zd(a,f,m){var b,d,v,e=0,h=0,g=0;if(b=/([a-z]+)\((.*)\)/i.exec(a))switch(d=b[2].split(","),b[1]){case "hsl":return m(parseFloat(d[0]),parseFloat(d[1])/100,parseFloat(d[2])/100);case "rgb":return f(Lc(d[0]),
Lc(d[1]),Lc(d[2]))}return(v=Hb.get(a))?f(v.r,v.g,v.b):(null==a||"#"!==a.charAt(0)||isNaN(v=parseInt(a.slice(1),16))||(4===a.length?(e=(3840&v)>>4,e|=e>>4,h=240&v,h|=h>>4,g=15&v,g|=g<<4):7===a.length&&(e=(16711680&v)>>16,h=(65280&v)>>8,g=255&v)),f(e,h,g))}function $d(a,f,m){var b,d,v=Math.min(a/=255,f/=255,m/=255),e=Math.max(a,f,m),h=e-v,g=(e+v)/2;return h?(d=.5>g?h/(e+v):h/(2-e-v),b=a==e?(f-m)/h+(m>f?6:0):f==e?(m-a)/h+2:(a-f)/h+4,b*=60):(b=0/0,d=0<g&&1>g?0:b),new sa(b,d,g)}function be(a,f,m){a=Mc(a);
f=Mc(f);m=Mc(m);var b=Kc((.4124564*a+.3575761*f+.1804375*m)/de),d=Kc((.2126729*a+.7151522*f+.072175*m)/ee);a=Kc((.0193339*a+.119192*f+.9503041*m)/fe);return oa(116*d-16,500*(b-d),200*(d-a))}function Mc(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Lc(a){var f=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*f):f}function J(a){return"function"==typeof a?a:function(){return a}}function Z(a){return a}function Nc(a){return function(f,m,b){return 2===arguments.length&&
"function"==typeof m&&(b=m,m=null),Ib(f,m,a,b)}}function Ib(a,f,m,b){function d(){var a,f=g.status,b;if(b=!f)b=(b=g.responseType)&&"text"!==b?g.response:g.responseText;if(b||200<=f&&300>f||304===f){try{a=m.call(v,g)}catch(C){return e.error.call(v,C),void 0}e.load.call(v,a)}else e.error.call(v,g)}var v={},e=t.dispatch("beforesend","progress","load","error"),h={},g=new XMLHttpRequest,ba=null;return!da.XDomainRequest||"withCredentials"in g||!/^(http(s)?:)?\/\//.test(a)||(g=new XDomainRequest),"onload"in
g?g.onload=g.onerror=d:g.onreadystatechange=function(){3<g.readyState&&d()},g.onprogress=function(a){var f=t.event;t.event=a;try{e.progress.call(v,g)}finally{t.event=f}},v.header=function(a,f){return a=(a+"").toLowerCase(),2>arguments.length?h[a]:(null==f?delete h[a]:h[a]=f+"",v)},v.mimeType=function(a){return arguments.length?(f=null==a?null:a+"",v):f},v.responseType=function(a){return arguments.length?(ba=a,v):ba},v.response=function(a){return m=a,v},["get","post"].forEach(function(a){v[a]=function(){return v.send.apply(v,
[a].concat(Ga(arguments)))}}),v.send=function(m,b,C){if(2===arguments.length&&"function"==typeof b&&(C=b,b=null),g.open(m,a,!0),null==f||"accept"in h||(h.accept=f+",*/*"),g.setRequestHeader)for(var d in h)g.setRequestHeader(d,h[d]);return null!=f&&g.overrideMimeType&&g.overrideMimeType(f),null!=ba&&(g.responseType=ba),null!=C&&v.on("error",C).on("load",function(a){C(null,a)}),e.beforesend.call(v,g),g.send(null==b?null:b),v},v.abort=function(){return g.abort(),v},t.rebind(v,e,"on"),null==b?v:v.get(yg(b))}
function yg(a){return 1===a.length?function(f,m){a(null==f?m:null)}:a}function Oc(){var a=ge(),a=he()-a;24<a?(isFinite(a)&&(clearTimeout(Jb),Jb=setTimeout(Oc,a)),Kb=0):(Kb=1,ie(Oc))}function ge(){var a=Date.now();for(Aa=Lb;Aa;)a>=Aa.t&&(Aa.f=Aa.c(a-Aa.t)),Aa=Aa.n;return a}function he(){for(var a,f=Lb,m=1/0;f;)f.f?f=a?a.n=f.n:Lb=f.n:(f.t<m&&(m=f.t),f=(a=f).n);return Mb=a,m}function Pc(a,f){return f-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function zg(a){var f=a.decimal,m=a.thousands,b=a.grouping,d=a.currency,
v=b?function(a){for(var f=a.length,v=[],d=0,e=b[0];0<e&&0<f;)v.push(a.substring(f-=e,f+e)),e=b[d=(d+1)%b.length];return v.reverse().join(m)}:Z;return function(a){a=je.exec(a);var m=a[1]||" ",b=a[2]||">",C=a[3]||"",e=a[4]||"",h=a[5],g=+a[6],k=a[7],l=a[8],n=a[9],p=1,q="",r="",s=!1;switch(l&&(l=+l.substring(1)),(h||"0"===m&&"="===b)&&(h=m="0",b="=",k&&(g-=Math.floor((g-1)/4))),n){case "n":k=!0;n="g";break;case "%":p=100;r="%";n="f";break;case "p":p=100;r="%";n="r";break;case "b":case "o":case "x":case "X":"#"===
e&&(q="0"+n.toLowerCase());case "c":case "d":s=!0;l=0;break;case "s":p=-1,n="r"}"$"===e&&(q=d[0],r=d[1]);"r"!=n||l||(n="g");null!=l&&("g"==n?l=Math.max(1,Math.min(21,l)):("e"==n||"f"==n)&&(l=Math.max(0,Math.min(20,l))));var n=Ag.get(n)||Bg,H=h&&k;return function(a){var d=r;if(s&&a%1)return"";var e=0>a||0===a&&0>1/a?(a=-a,"-"):C;0>p?(d=t.formatPrefix(a,l),a=d.scale(a),d=d.symbol+r):a*=p;a=n(a,l);var E=a.lastIndexOf("."),U=0>E?a:a.substring(0,E),E=0>E?"":f+a.substring(E+1);!h&&k&&(U=v(U));var R=q.length+
U.length+E.length+(H?0:e.length),x=g>R?Array(R=g-R+1).join(m):"";return H&&(U=v(x+U)),e+=q,a=U+E,("<"===b?e+a+x:">"===b?x+e+a:"^"===b?x.substring(0,R>>=1)+e+a+x.substring(R):e+(H?a:x+a))+d}}}function Bg(a){return a+""}function Ba(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Ra(a,f,m){function b(f){var m=a(f),d=v(m,1);return d-f>f-m?m:d}function d(m){return f(m=a(new ca(m-1)),1),m}function v(a,m){return f(a=new ca(+a),m),a}function e(a,b,v){a=d(a);var C=
[];if(1<v)for(;b>a;)m(a)%v||C.push(new Date(+a)),f(a,1);else for(;b>a;)C.push(new Date(+a)),f(a,1);return C}a.floor=a;a.round=b;a.ceil=d;a.offset=v;a.range=e;var h=a.utc=Nb(a);return h.floor=h,h.round=Nb(b),h.ceil=Nb(d),h.offset=Nb(v),h.range=function(a,f,m){try{ca=Ba;var b=new Ba;return b._=a,e(b,f,m)}finally{ca=Date}},a}function Nb(a){return function(f,m){try{ca=Ba;var b=new Ba;return b._=f,a(b,m)._}finally{ca=Date}}}function Cg(a){function f(a){function f(m){for(var d,v,C,e=[],E=-1,h=0;++E<b;)37===
a.charCodeAt(E)&&(e.push(a.slice(h,E)),null!=(v=le[d=a.charAt(++E)])&&(d=a.charAt(++E)),(C=H[d])&&(d=C(m,null==v?"e"===d?" ":"0":v)),e.push(d),h=E+1);return e.push(a.slice(h,E)),e.join("")}var b=a.length;return f.parse=function(f){var b={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(m(b,a,f,0)!=f.length)return null;"p"in b&&(b.H=b.H%12+12*b.p);f=null!=b.Z&&ca!==Ba;var d=new (f?Ba:ca);return"j"in b?d.setFullYear(b.y,0,b.j):"w"in b&&("W"in b||"U"in b)?(d.setFullYear(b.y,0,1),d.setFullYear(b.y,0,"W"in b?
(b.w+6)%7+7*b.W-(d.getDay()+5)%7:b.w+7*b.U-(d.getDay()+6)%7)):d.setFullYear(b.y,b.m,b.d),d.setHours(b.H+(0|b.Z/100),b.M+b.Z%100,b.S,b.L),f?d._:d},f.toString=function(){return a},f}function m(a,f,m,b){for(var d,v,C,e=0,E=f.length,h=m.length;E>e;){if(b>=h)return-1;if(d=f.charCodeAt(e++),37===d){if(C=f.charAt(e++),v=x[C in le?f.charAt(e++):C],!v||0>(b=v(a,m,b)))return-1}else if(d!=m.charCodeAt(b++))return-1}return b}var b=a.dateTime,d=a.date,v=a.time,e=a.periods,h=a.days,g=a.shortDays,k=a.months,l=a.shortMonths;
f.utc=function(a){function m(a){try{ca=Ba;var f=new ca;return f._=a,b(f)}finally{ca=Date}}var b=f(a);return m.parse=function(a){try{ca=Ba;var f=b.parse(a);return f&&f._}finally{ca=Date}},m.toString=b.toString,m};f.multi=f.utc.multi=Dg;var n=t.map(),p=Ob(h),q=Pb(h),r=Ob(g),s=Pb(g),Y=Ob(k),S=Pb(k),G=Ob(l),K=Pb(l);e.forEach(function(a,f){n.set(a.toLowerCase(),f)});var H={a:function(a){return g[a.getDay()]},A:function(a){return h[a.getDay()]},b:function(a){return l[a.getMonth()]},B:function(a){return k[a.getMonth()]},
c:f(b),d:function(a,f){return fa(a.getDate(),f,2)},e:function(a,f){return fa(a.getDate(),f,2)},H:function(a,f){return fa(a.getHours(),f,2)},I:function(a,f){return fa(a.getHours()%12||12,f,2)},j:function(a,f){return fa(1+B.dayOfYear(a),f,3)},L:function(a,f){return fa(a.getMilliseconds(),f,3)},m:function(a,f){return fa(a.getMonth()+1,f,2)},M:function(a,f){return fa(a.getMinutes(),f,2)},p:function(a){return e[+(12<=a.getHours())]},S:function(a,f){return fa(a.getSeconds(),f,2)},U:function(a,f){return fa(B.sundayOfYear(a),
f,2)},w:function(a){return a.getDay()},W:function(a,f){return fa(B.mondayOfYear(a),f,2)},x:f(d),X:f(v),y:function(a,f){return fa(a.getFullYear()%100,f,2)},Y:function(a,f){return fa(a.getFullYear()%1E4,f,4)},Z:Eg,"%":function(){return"%"}},x={a:function(a,f,m){r.lastIndex=0;return(f=r.exec(f.slice(m)))?(a.w=s.get(f[0].toLowerCase()),m+f[0].length):-1},A:function(a,f,m){p.lastIndex=0;return(f=p.exec(f.slice(m)))?(a.w=q.get(f[0].toLowerCase()),m+f[0].length):-1},b:function(a,f,m){G.lastIndex=0;return(f=
G.exec(f.slice(m)))?(a.m=K.get(f[0].toLowerCase()),m+f[0].length):-1},B:function(a,f,m){Y.lastIndex=0;return(f=Y.exec(f.slice(m)))?(a.m=S.get(f[0].toLowerCase()),m+f[0].length):-1},c:function(a,f,b){return m(a,H.c.toString(),f,b)},d:me,e:me,H:ne,I:ne,j:Fg,L:Gg,m:Hg,M:Ig,p:function(a,f,m){f=n.get(f.slice(m,m+=2).toLowerCase());return null==f?-1:(a.p=f,m)},S:Jg,U:Kg,w:Lg,W:Mg,x:function(a,f,b){return m(a,H.x.toString(),f,b)},X:function(a,f,b){return m(a,H.X.toString(),f,b)},y:Ng,Y:Og,Z:Pg,"%":Qg};return f}
function fa(a,f,m){var b=0>a?"-":"";a=(b?-a:a)+"";var d=a.length;return b+(m>d?Array(m-d+1).join(f)+a:a)}function Ob(a){return new RegExp("^(?:"+a.map(t.requote).join("|")+")","i")}function Pb(a){for(var f=new h,m=-1,b=a.length;++m<b;)f.set(a[m].toLowerCase(),m);return f}function Lg(a,f,m){T.lastIndex=0;return(f=T.exec(f.slice(m,m+1)))?(a.w=+f[0],m+f[0].length):-1}function Kg(a,f,m){T.lastIndex=0;return(f=T.exec(f.slice(m)))?(a.U=+f[0],m+f[0].length):-1}function Mg(a,f,m){T.lastIndex=0;return(f=T.exec(f.slice(m)))?
(a.W=+f[0],m+f[0].length):-1}function Og(a,f,m){T.lastIndex=0;return(f=T.exec(f.slice(m,m+4)))?(a.y=+f[0],m+f[0].length):-1}function Ng(a,f,m){T.lastIndex=0;if(f=T.exec(f.slice(m,m+2))){var b=+f[0];a=(a.y=b+(68<b?1900:2E3),m+f[0].length)}else a=-1;return a}function Pg(a,f,m){return/^[+-]\d{4}$/.test(f=f.slice(m,m+5))?(a.Z=-f,m+5):-1}function Hg(a,f,m){T.lastIndex=0;return(f=T.exec(f.slice(m,m+2)))?(a.m=f[0]-1,m+f[0].length):-1}function me(a,f,m){T.lastIndex=0;return(f=T.exec(f.slice(m,m+2)))?(a.d=
+f[0],m+f[0].length):-1}function Fg(a,f,m){T.lastIndex=0;return(f=T.exec(f.slice(m,m+3)))?(a.j=+f[0],m+f[0].length):-1}function ne(a,f,m){T.lastIndex=0;return(f=T.exec(f.slice(m,m+2)))?(a.H=+f[0],m+f[0].length):-1}function Ig(a,f,m){T.lastIndex=0;return(f=T.exec(f.slice(m,m+2)))?(a.M=+f[0],m+f[0].length):-1}function Jg(a,f,m){T.lastIndex=0;return(f=T.exec(f.slice(m,m+2)))?(a.S=+f[0],m+f[0].length):-1}function Gg(a,f,m){T.lastIndex=0;return(f=T.exec(f.slice(m,m+3)))?(a.L=+f[0],m+f[0].length):-1}function Eg(a){var f=
a.getTimezoneOffset();a=0<f?"-":"+";var m=0|I(f)/60,f=I(f)%60;return a+fa(m,"0",2)+fa(f,"0",2)}function Qg(a,f,m){oe.lastIndex=0;return(a=oe.exec(f.slice(m,m+1)))?m+a[0].length:-1}function Dg(a){for(var f=a.length,m=-1;++m<f;)a[m][0]=this(a[m][0]);return function(f){for(var m=0,b=a[m];!b[1](f);)b=a[++m];return b[0](f)}}function Rc(){}function pe(a,f,m){var b=m.s=a+f,d=b-a;m.t=a-(b-d)+(f-d)}function Qb(a,f){a&&qe.hasOwnProperty(a.type)&&qe[a.type](a,f)}function Sc(a,f,m){var b=-1,d=a.length-m;for(f.lineStart();++b<
d;)m=a[b],f.point(m[0],m[1],m[2]);f.lineEnd()}function re(a,f){var m=-1,b=a.length;for(f.polygonStart();++m<b;)Sc(a[m],f,1);f.polygonEnd()}function Rg(){function a(a,f){a*=D;f=f*D/2+F/4;var m=a-b,e=0<=m?1:-1,h=e*m,m=Math.cos(f),g=Math.sin(f),k=v*g,l=d*m+k*Math.cos(h),e=k*e*Math.sin(h);Sa.add(Math.atan2(e,l));b=a;d=m;v=g}var f,m,b,d,v;ha.point=function(e,h){ha.point=a;b=(f=e)*D;d=Math.cos(h=(m=h)*D/2+F/4);v=Math.sin(h)};ha.lineEnd=function(){a(f,m)}}function Ta(a){var f=a[0];a=a[1];var m=Math.cos(a);
return[m*Math.cos(f),m*Math.sin(f),Math.sin(a)]}function Rb(a,f){return a[0]*f[0]+a[1]*f[1]+a[2]*f[2]}function db(a,f){return[a[1]*f[2]-a[2]*f[1],a[2]*f[0]-a[0]*f[2],a[0]*f[1]-a[1]*f[0]]}function Tc(a,f){a[0]+=f[0];a[1]+=f[1];a[2]+=f[2]}function Sb(a,f){return[a[0]*f,a[1]*f,a[2]*f]}function Tb(a){var f=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=f;a[1]/=f;a[2]/=f}function Ub(a){return[Math.atan2(a[1],a[0]),ab(a[2])]}function Vb(a,f){return I(a[0]-f[0])<A&&I(a[1]-f[1])<A}function Uc(a,f){a*=D;var m=
Math.cos(f*=D);pb(m*Math.cos(a),m*Math.sin(a),Math.sin(f))}function pb(a,f,m){++qb;Ca+=(a-Ca)/qb;Da+=(f-Da)/qb;ua+=(m-ua)/qb}function se(){function a(a,d){a*=D;var e=Math.cos(d*=D),h=e*Math.cos(a),e=e*Math.sin(a),g=Math.sin(d),k=Math.atan2(Math.sqrt((k=m*g-b*e)*k+(k=b*h-f*g)*k+(k=f*e-m*h)*k),f*h+m*e+b*g);eb+=k;ka+=k*(f+(f=h));la+=k*(m+(m=e));ga+=k*(b+(b=g));pb(f,m,b)}var f,m,b;pa.point=function(d,v){d*=D;var e=Math.cos(v*=D);f=e*Math.cos(d);m=e*Math.sin(d);b=Math.sin(v);pa.point=a;pb(f,m,b)}}function te(){pa.point=
Uc}function Sg(){function a(a,f){a*=D;var m=Math.cos(f*=D),e=m*Math.cos(a),m=m*Math.sin(a),h=Math.sin(f),g=d*h-v*m,k=v*e-b*h,l=b*m-d*e,n=Math.sqrt(g*g+k*k+l*l),p=b*e+d*m+v*h,q=n&&-Wd(p)/n,n=Math.atan2(n,p);Ia+=q*g;Ja+=q*k;va+=q*l;eb+=n;ka+=n*(b+(b=e));la+=n*(d+(d=m));ga+=n*(v+(v=h));pb(b,d,v)}var f,m,b,d,v;pa.point=function(e,h){f=e;m=h;pa.point=a;e*=D;var g=Math.cos(h*=D);b=g*Math.cos(e);d=g*Math.sin(e);v=Math.sin(h);pb(b,d,v)};pa.lineEnd=function(){a(f,m);pa.lineEnd=te;pa.point=Uc}}function fb(){return!0}
function ue(a,f,m,b,d){var v=[],e=[];if(a.forEach(function(a){if(!(0>=(f=a.length-1))){var f,m=a[0],b=a[f];if(Vb(m,b)){d.lineStart();for(b=0;f>b;++b)d.point((m=a[b])[0],m[1]);return d.lineEnd(),void 0}f=new Wb(m,a,null,!0);m=new Wb(m,null,f,!1);f.o=m;v.push(f);e.push(m);f=new Wb(b,a,null,!1);m=new Wb(b,null,f,!0);f.o=m;v.push(f);e.push(m)}}),e.sort(f),ve(v),ve(e),v.length){a=0;f=m;for(m=e.length;m>a;++a)e[a].e=f=!f;for(var h,g=v[0];;){for(var k=g,l=!0;k.v;)if((k=k.n)===g)return;f=k.z;d.lineStart();
do{if(k.v=k.o.v=!0,k.e){if(l)for(a=0,m=f.length;m>a;++a)d.point((h=f[a])[0],h[1]);else b(k.x,k.n.x,1,d);k=k.n}else{if(l)for(f=k.p.z,a=f.length-1;0<=a;--a)d.point((h=f[a])[0],h[1]);else b(k.x,k.p.x,-1,d);k=k.p}k=k.o;f=k.z;l=!l}while(!k.v);d.lineEnd()}}}function ve(a){if(f=a.length){for(var f,m,b=0,d=a[0];++b<f;)d.n=m=a[b],m.p=d,d=m;d.n=m=a[0];m.p=d}}function Wb(a,f,m,b){this.x=a;this.z=f;this.o=m;this.e=b;this.v=!1;this.n=this.p=null}function we(a,f,m,b){return function(d,v){function e(f,m){var b=
d(f,m);a(f=b[0],m=b[1])&&v.point(f,m)}function h(a,f){var m=d(a,f);Y.point(m[0],m[1])}function g(){G.point=h;Y.lineStart()}function k(){G.point=e;Y.lineEnd()}function l(a,f){s.push([a,f]);var m=d(a,f);H.point(m[0],m[1])}function n(){H.lineStart();s=[]}function p(){l(s[0][0],s[0][1]);H.lineEnd();var a;a=H.clean();var f=K.buffer(),m=f.length;if(s.pop(),r.push(s),s=null,m)if(1&a){a=f[0];var b,m=a.length-1,f=-1;if(0<m){x||(v.polygonStart(),x=!0);for(v.lineStart();++f<m;)v.point((b=a[f])[0],b[1]);v.lineEnd()}}else 1<
m&&2&a&&f.push(f.pop().concat(f.shift())),q.push(f.filter(Tg))}var q,r,s,Y=f(v),S=d.invert(b[0],b[1]),G={point:e,lineStart:g,lineEnd:k,polygonStart:function(){G.point=l;G.lineStart=n;G.lineEnd=p;q=[];r=[]},polygonEnd:function(){G.point=e;G.lineStart=g;G.lineEnd=k;q=t.merge(q);var a,f=S;a=r;var b=f[0],d=f[1],C=[Math.sin(b),-Math.cos(b),0],h=0,E=0;Sa.reset();for(var V=0,l=a.length;l>V;++V){var n=a[V],p=n.length;if(p)for(var R=n[0],W=R[0],f=R[1]/2+F/4,Pa=Math.sin(f),s=Math.cos(f),K=1;;){K===p&&(K=0);
var f=n[K],Qc=f[0],Y=f[1]/2+F/4,H=Math.sin(Y),Y=Math.cos(Y),u=Qc-W,w=0<=u?1:-1,y=w*u,z=y>F,Pa=Pa*H;if(Sa.add(Math.atan2(Pa*w*Math.sin(y),s*Y+Pa*Math.cos(y))),h+=z?u+w*ia:u,z^W>=b^Qc>=b)R=db(Ta(R),Ta(f)),Tb(R),W=db(C,R),Tb(W),W=(z^0<=u?-1:1)*ab(W[2]),(d>W||d===W&&(R[0]||R[1]))&&(E+=z^0<=u?1:-1);if(!K++)break;W=Qc;Pa=H;s=Y;R=f}}a=(-A>h||A>h&&0>Sa)^1&E;q.length?(x||(v.polygonStart(),x=!0),ue(q,Ug,a,m,v)):a&&(x||(v.polygonStart(),x=!0),v.lineStart(),m(null,null,1,v),v.lineEnd());x&&(v.polygonEnd(),x=
!1);q=r=null},sphere:function(){v.polygonStart();v.lineStart();m(null,null,1,v);v.lineEnd();v.polygonEnd()}},K=xe(),H=f(K),x=!1;return G}}function Tg(a){return 1<a.length}function xe(){var a,f=[];return{lineStart:function(){f.push(a=[])},point:function(f,b){a.push([f,b])},lineEnd:u,buffer:function(){var m=f;return f=[],a=null,m},rejoin:function(){1<f.length&&f.push(f.pop().concat(f.shift()))}}}function Ug(a,f){return(0>(a=a.x)[0]?a[1]-aa-A:aa-a[1])-(0>(f=f.x)[0]?f[1]-aa-A:aa-f[1])}function Vg(a){function f(a,
f){return Math.cos(a)*Math.cos(f)>d}function m(a,f,m){var b=Ta(a),v=Ta(f),e=[1,0,0],v=db(b,v),C=Rb(v,v),b=v[0],h=C-b*b;if(!h)return!m&&a;C=d*C/h;h=-d*b/h;b=db(e,v);e=Sb(e,C);v=Sb(v,h);Tc(e,v);v=Rb(e,b);C=Rb(b,b);h=v*v-C*(Rb(e,e)-1);if(!(0>h)){var g=Math.sqrt(h),h=Sb(b,(-v-g)/C);if(Tc(h,e),h=Ub(h),!m)return h;var V;m=a[0];var k=f[0];a=a[1];f=f[1];m>k&&(V=m,m=k,k=V);var U=k-m,l=I(U-F)<A,n=l||A>U;if(!l&&a>f&&(V=a,a=f,f=V),n?l?0<a+f^h[1]<(I(h[0]-m)<A?a:f):a<=h[1]&&h[1]<=f:U>F^(m<=h[0]&&h[0]<=k))return V=
Sb(b,(-v+g)/C),Tc(V,e),[h,Ub(V)]}}function b(f,m){var d=v?a:F-a,e=0;return-d>f?e|=1:f>d&&(e|=2),-d>m?e|=4:m>d&&(e|=8),e}var d=Math.cos(a),v=0<d,e=I(d)>A,h=Vc(a,6*D);return we(f,function(a){var d,h,E,g,V;return{lineStart:function(){g=E=!1;V=1},point:function(k,l){var n,p=[k,l],q=f(k,l),r=v?q?0:b(k,l):q?b(k+(0>k?F:-F),l):0;if(!d&&(g=E=q)&&a.lineStart(),q!==E&&(n=m(d,p),(Vb(d,n)||Vb(p,n))&&(p[0]+=A,p[1]+=A,q=f(p[0],p[1]))),q!==E)V=0,q?(a.lineStart(),n=m(p,d),a.point(n[0],n[1])):(n=m(d,p),a.point(n[0],
n[1]),a.lineEnd()),d=n;else if(e&&d&&v^q){var t;r&h||!(t=m(p,d,!0))||(V=0,v?(a.lineStart(),a.point(t[0][0],t[0][1]),a.point(t[1][0],t[1][1]),a.lineEnd()):(a.point(t[1][0],t[1][1]),a.lineEnd(),a.lineStart(),a.point(t[0][0],t[0][1])))}!q||d&&Vb(d,p)||a.point(p[0],p[1]);d=p;E=q;h=r},lineEnd:function(){E&&a.lineEnd();d=null},clean:function(){return V|(g&&E)<<1}}},h,v?[0,-a]:[-F,a-F])}function ye(a,f,m,b){return function(d){var v,e=d.a,h=d.b,g=e.x,e=e.y,k=0,l=1,n=h.x-g,h=h.y-e;if(v=a-g,n||!(0<v)){if(v/=
n,0>n){if(k>v)return;l>v&&(l=v)}else if(0<n){if(v>l)return;v>k&&(k=v)}if(v=m-g,n||!(0>v)){if(v/=n,0>n){if(v>l)return;v>k&&(k=v)}else if(0<n){if(k>v)return;l>v&&(l=v)}if(v=f-e,h||!(0<v)){if(v/=h,0>h){if(k>v)return;l>v&&(l=v)}else if(0<h){if(v>l)return;v>k&&(k=v)}if(v=b-e,h||!(0>v)){if(v/=h,0>h){if(v>l)return;v>k&&(k=v)}else if(0<h){if(k>v)return;l>v&&(l=v)}return 0<k&&(d.a={x:g+k*n,y:e+k*h}),1>l&&(d.b={x:g+l*n,y:e+l*h}),d}}}}}}function ze(a,f,m,b){function d(b,e){return I(b[0]-a)<A?0<e?0:3:I(b[0]-
m)<A?0<e?2:1:I(b[1]-f)<A?0<e?1:0:0<e?3:2}function e(a,f){return h(a.x,f.x)}function h(a,f){var m=d(a,1),b=d(f,1);return m!==b?m-b:0===m?f[1]-a[1]:1===m?a[0]-f[0]:2===m?a[1]-f[1]:f[0]-a[0]}return function(g){function k(e,v,g,V){var l=0,$a=0;if(null==e||(l=d(e,g))!==($a=d(v,g))||0>h(e,v)^0<g){do V.point(0===l||3===l?a:m,1<l?b:f);while((l=(l+g+4)%4)!==$a)}else V.point(v[0],v[1])}function l(d,e){d>=a&&m>=d&&e>=f&&b>=e&&g.point(d,e)}function n(d,e){d=Math.max(-Xb,Math.min(Xb,d));e=Math.max(-Xb,Math.min(Xb,
e));var v=d>=a&&m>=d&&e>=f&&b>=e;if(W&&q.push([d,e]),H)r=d,s=e,x=v,H=!1,v&&(g.lineStart(),g.point(d,e));else if(v&&K)g.point(d,e);else{var h={a:{x:S,y:G},b:{x:d,y:e}};y(h)?(K||(g.lineStart(),g.point(h.a.x,h.a.y)),g.point(h.b.x,h.b.y),v||g.lineEnd(),u=!1):v&&(g.lineStart(),g.point(d,e),u=!1)}S=d;G=e;K=v}var p,W,q,r,s,x,S,G,K,H,u,w=g,Ha=xe(),y=ye(a,f,m,b),z={point:l,lineStart:function(){z.point=n;W&&W.push(q=[]);H=!0;K=!1;S=G=0/0},lineEnd:function(){p&&(n(r,s),x&&K&&Ha.rejoin(),p.push(Ha.buffer()));
z.point=l;K&&g.lineEnd()},polygonStart:function(){g=Ha;p=[];W=[];u=!0},polygonEnd:function(){g=w;p=t.merge(p);var f;f=[a,b];for(var m=0,d=W.length,h=f[1],E=0;d>E;++E)for(var l,U=1,ba=W[E],n=ba.length,R=ba[0];n>U;++U)l=ba[U],R[1]<=h?l[1]>h&&0<Fc(R,l,f)&&++m:l[1]<=h&&0>Fc(R,l,f)&&--m,R=l;f=0!==m;m=u&&f;d=p.length;(m||d)&&(g.polygonStart(),m&&(g.lineStart(),k(null,null,1,g),g.lineEnd()),d&&ue(p,e,f,k,g),g.polygonEnd());p=W=q=null}};return z}}function Ae(a,f){function m(m,b){return m=a(m,b),f(m[0],m[1])}
return a.invert&&f.invert&&(m.invert=function(m,b){return m=f.invert(m,b),m&&a.invert(m[0],m[1])}),m}function Wc(a){var f=0,m=F/3,b=Xc(a);a=b(f,m);return a.parallels=function(a){return arguments.length?b(f=a[0]*F/180,m=a[1]*F/180):[f/F*180,m/F*180]},a}function Be(a,f){function m(a,f){var m=Math.sqrt(e-2*d*Math.sin(f))/d;return[m*Math.sin(a*=d),h-m*Math.cos(a)]}var b=Math.sin(a),d=(b+Math.sin(f))/2,e=1+b*(2*d-b),h=Math.sqrt(e)/d;return m.invert=function(a,f){var m=h-f;return[Math.atan2(a,m)/d,ab((e-
(a*a+m*m)*d*d)/(2*d))]},m}function Wg(){function a(a,f){Yb+=d*a-b*f;b=a;d=f}var f,m,b,d;Ka.point=function(e,h){Ka.point=a;f=b=e;m=d=h};Ka.lineEnd=function(){a(f,m)}}function Xg(){function a(a,f){h.push("M",a,",",f,e)}function f(a,f){h.push("M",a,",",f);g.point=m}function m(a,f){h.push("L",a,",",f)}function b(){g.point=a}function d(){h.push("Z")}var e=Ce(4.5),h=[],g={point:a,lineStart:function(){g.point=f},lineEnd:b,polygonStart:function(){g.lineEnd=d},polygonEnd:function(){g.lineEnd=b;g.point=a},
pointRadius:function(a){return e=Ce(a),g},result:function(){if(h.length){var a=h.join("");return h=[],a}}};return g}function Ce(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Ua(a,f){Ca+=a;Da+=f;++ua}function De(){function a(a,b){var d=a-f,e=b-m,d=Math.sqrt(d*d+e*e);ka+=d*(f+a)/2;la+=d*(m+b)/2;ga+=d;Ua(f=a,m=b)}var f,m;qa.point=function(b,d){qa.point=a;Ua(f=b,m=d)}}function Ee(){qa.point=Ua}function Yg(){function a(a,f){var m=a-b,e=f-d,m=Math.sqrt(m*m+e*e);
ka+=m*(b+a)/2;la+=m*(d+f)/2;ga+=m;m=d*a-b*f;Ia+=m*(b+a);Ja+=m*(d+f);va+=3*m;Ua(b=a,d=f)}var f,m,b,d;qa.point=function(e,h){qa.point=a;Ua(f=b=e,m=d=h)};qa.lineEnd=function(){a(f,m)}}function Zg(a){function f(f,m){a.moveTo(f,m);a.arc(f,m,h,0,ia)}function m(f,m){a.moveTo(f,m);g.point=b}function b(f,m){a.lineTo(f,m)}function d(){g.point=f}function e(){a.closePath()}var h=4.5,g={point:f,lineStart:function(){g.point=m},lineEnd:d,polygonStart:function(){g.lineEnd=e},polygonEnd:function(){g.lineEnd=d;g.point=
f},pointRadius:function(a){return h=a,g},result:u};return g}function Fe(a){function f(a){return(g?b:m)(a)}function m(f){return Ge(f,function(m,b){m=a(m,b);f.point(m[0],m[1])})}function b(f){function m(b,d){b=a(b,d);f.point(b[0],b[1])}function e(){x=0/0;N.point=v;f.lineStart()}function v(m,b){var e=Ta([m,b]),h=a(m,b);d(x,u,s,w,y,z,x=h[0],u=h[1],s=m,w=e[0],y=e[1],z=e[2],g,f);f.point(x,u)}function h(){N.point=m;f.lineEnd()}function C(){e();N.point=k;N.lineEnd=l}function k(a,f){v(U=a,f);n=x;p=u;q=w;r=
y;t=z;N.point=v}function l(){d(x,u,s,w,y,z,n,p,U,q,r,t,g,f);N.lineEnd=h;h()}var U,n,p,q,r,t,s,x,u,w,y,z,N={point:m,lineStart:e,lineEnd:h,polygonStart:function(){f.polygonStart();N.lineStart=C},polygonEnd:function(){f.polygonEnd();N.lineStart=e}};return N}function d(f,m,b,C,g,k,V,l,n,p,q,r,t,s){var x=V-f,u=l-m,w=x*x+u*u;if(w>4*e&&t--){var y=C+p,z=g+q,N=k+r,L=Math.sqrt(y*y+z*z+N*N),cb=Math.asin(N/=L),B=I(I(N)-1)<A||I(b-n)<A?(b+n)/2:Math.atan2(z,y),M=a(B,cb),cb=M[0],M=M[1],D=cb-f,F=M-m,Q=u*D-x*F;(Q*
Q/w>e||.3<I((x*D+u*F)/w-.5)||h>C*p+g*q+k*r)&&(d(f,m,b,C,g,k,cb,M,B,y/=L,z/=L,N,t,s),s.point(cb,M),d(cb,M,B,y,z,N,V,l,n,p,q,r,t,s))}}var e=.5,h=Math.cos(30*D),g=16;return f.precision=function(a){return arguments.length?(g=0<(e=a*a)&&16,f):Math.sqrt(e)},f}function $g(a){var f=Fe(function(f,b){return a([f*P,b*P])});return function(a){return He(f(a))}}function Ie(a){this.stream=a}function Ge(a,f){return{point:f,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},
polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function La(a){return Xc(function(){return a})()}function Xc(a){function f(a){return a=g(a[0]*D,a[1]*D),[a[0]*q+k,l-a[1]*q]}function m(a){return a=g.invert((a[0]-k)/q,(l-a[1])/q),a&&[a[0]*P,a[1]*P]}function b(){g=Ae(h=Yc(S,G,K),e);var a=e(x,Y);return k=r-a[0]*q,l=s+a[1]*q,d()}function d(){return n&&(n.valid=!1,n=null),f}var e,h,g,k,l,n,p=Fe(function(a,f){return a=e(a,f),[a[0]*q+k,l-a[1]*q]}),q=150,r=480,s=250,x=0,Y=0,
S=0,G=0,K=0,u=Je,w=Z,ta=null,y=null;return f.stream=function(a){return n&&(n.valid=!1),n=He(u(h,p(w(a)))),n.valid=!0,n},f.clipAngle=function(a){return arguments.length?(u=null==a?(ta=a,Je):Vg((ta=+a)*D),d()):ta},f.clipExtent=function(a){return arguments.length?(y=a,w=a?ze(a[0][0],a[0][1],a[1][0],a[1][1]):Z,d()):y},f.scale=function(a){return arguments.length?(q=+a,b()):q},f.translate=function(a){return arguments.length?(r=+a[0],s=+a[1],b()):[r,s]},f.center=function(a){return arguments.length?(x=a[0]%
360*D,Y=a[1]%360*D,b()):[x*P,Y*P]},f.rotate=function(a){return arguments.length?(S=a[0]%360*D,G=a[1]%360*D,K=2<a.length?a[2]%360*D:0,b()):[S*P,G*P,K*P]},t.rebind(f,p,"precision"),function(){return e=a.apply(this,arguments),f.invert=e.invert&&m,b()}}function He(a){return Ge(a,function(f,m){a.point(f*D,m*D)})}function rb(a,f){return[a,f]}function Ke(a,f){return[a>F?a-ia:-F>a?a+ia:a,f]}function Yc(a,f,m){return a?f||m?Ae(Le(a),Me(f,m)):Le(a):f||m?Me(f,m):Ke}function Ne(a){return function(f,m){return f+=
a,[f>F?f-ia:-F>f?f+ia:f,m]}}function Le(a){var f=Ne(a);return f.invert=Ne(-a),f}function Me(a,f){function m(a,f){var m=Math.cos(f),g=Math.cos(a)*m,m=Math.sin(a)*m,k=Math.sin(f),l=k*b+g*d;return[Math.atan2(m*e-l*h,g*b-k*d),ab(l*e+m*h)]}var b=Math.cos(a),d=Math.sin(a),e=Math.cos(f),h=Math.sin(f);return m.invert=function(a,f){var m=Math.cos(f),g=Math.cos(a)*m,m=Math.sin(a)*m,k=Math.sin(f),l=k*e-m*h;return[Math.atan2(m*e+k*h,g*b+l*d),ab(l*b-g*d)]},m}function Vc(a,f){var m=Math.cos(a),b=Math.sin(a);return function(d,
e,h,g){var k=h*f;null!=d?(d=Oe(m,d),e=Oe(m,e),(0<h?e>d:d>e)&&(d+=h*ia)):(d=a+h*ia,e=a-.5*k);for(var l;0<h?d>e:e>d;d-=k)g.point((l=Ub([m,-b*Math.cos(d),-b*Math.sin(d)]))[0],l[1])}}function Oe(a,f){var m=Ta(f);m[0]-=a;Tb(m);var b=Wd(-m[1]);return((0>-m[2]?-b:b)+2*Math.PI-A)%(2*Math.PI)}function Pe(a,f,m){var b=t.range(a,f-A,m).concat(f);return function(a){return b.map(function(f){return[a,f]})}}function Qe(a,f,m){var b=t.range(a,f-A,m).concat(f);return function(a){return b.map(function(f){return[f,
a]})}}function Zc(a){return a.source}function $c(a){return a.target}function ah(a,f,m,b){var d=Math.cos(f),e=Math.sin(f),h=Math.cos(b),g=Math.sin(b),k=d*Math.cos(a),l=d*Math.sin(a),n=h*Math.cos(m),p=h*Math.sin(m),q=2*Math.asin(Math.sqrt(Yd(b-f)+d*h*Yd(m-a))),r=1/Math.sin(q);m=q?function(a){var f=Math.sin(a*=q)*r,m=Math.sin(q-a)*r;a=m*k+f*n;var b=m*l+f*p,f=m*e+f*g;return[Math.atan2(b,a)*P,Math.atan2(f,Math.sqrt(a*a+b*b))*P]}:function(){return[a*P,f*P]};return m.distance=q,m}function sb(a,f){function m(f,
m){var b=Math.cos(f),d=Math.cos(m),b=a(b*d);return[b*d*Math.sin(f),b*Math.sin(m)]}return m.invert=function(a,m){var b=Math.sqrt(a*a+m*m),d=f(b),e=Math.sin(d),d=Math.cos(d);return[Math.atan2(a*e,b*d),Math.asin(b&&m*e/b)]},m}function Re(a,f){function m(a,f){0<e?-aa+A>f&&(f=-aa+A):f>aa-A&&(f=aa-A);var m=e/Math.pow(Math.tan(F/4+f/2),d);return[m*Math.sin(d*a),e-m*Math.cos(d*a)]}var b=Math.cos(a),d=a===f?Math.sin(a):Math.log(b/Math.cos(f))/Math.log(Math.tan(F/4+f/2)/Math.tan(F/4+a/2)),e=b*Math.pow(Math.tan(F/
4+a/2),d)/d;return d?(m.invert=function(a,f){var m=e-f,b=(0<d?1:0>d?-1:0)*Math.sqrt(a*a+m*m);return[Math.atan2(a,m)/d,2*Math.atan(Math.pow(e/b,1/d))-aa]},m):Zb}function Se(a,f){function m(a,f){var m=e-f;return[m*Math.sin(d*a),e-m*Math.cos(d*a)]}var b=Math.cos(a),d=a===f?Math.sin(a):(b-Math.cos(f))/(f-a),e=b/d+a;return I(d)<A?rb:(m.invert=function(a,f){var m=e-f;return[Math.atan2(a,m)/d,e-(0<d?1:0>d?-1:0)*Math.sqrt(a*a+m*m)]},m)}function Zb(a,f){return[a,Math.log(Math.tan(F/4+f/2))]}function Te(a){var f,
m=La(a),b=m.scale,d=m.translate,e=m.clipExtent;return m.scale=function(){var a=b.apply(m,arguments);return a===m?f?m.clipExtent(null):m:a},m.translate=function(){var a=d.apply(m,arguments);return a===m?f?m.clipExtent(null):m:a},m.clipExtent=function(a){var h=e.apply(m,arguments);if(h===m){if(f=null==a){var g=F*b(),k=d();e([[k[0]-g,k[1]-g],[k[0]+g,k[1]+g]])}}else f&&(h=null);return h},m.clipExtent(null)}function ad(a,f){return[Math.log(Math.tan(F/4+f/2)),-a]}function gb(a){return a[0]}function tb(a){return a[1]}
function Ue(a){for(var f=a.length,m=[0,1],b=2,d=2;f>d;d++){for(;1<b&&0>=Fc(a[m[b-2]],a[m[b-1]],a[d]);)--b;m[b++]=d}return m.slice(0,b)}function bh(a,f){return a[0]-f[0]||a[1]-f[1]}function bd(a,f,m){return(m[0]-f[0])*(a[1]-f[1])<(m[1]-f[1])*(a[0]-f[0])}function Ve(a,f,m,b){var d=a[0],e=m[0],h=f[0]-d,g=b[0]-e;a=a[1];m=m[1];f=f[1]-a;b=b[1]-m;e=(g*(a-m)-b*(d-e))/(b*h-g*f);return[d+e*h,a+e*f]}function We(a){var f=a[0];a=a[a.length-1];return!(f[0]-a[0]||f[1]-a[1])}function ch(){$b(this);this.edge=this.site=
this.circle=null}function Xe(a){var f=Ye.pop()||new ch;return f.site=a,f}function cd(a){hb(a);ib.remove(a);Ye.push(a);$b(a)}function Ze(a,f){var m=a.site,b=m.x,d=m.y,e=d-f;if(!e)return b;var h=a.P;if(!h)return-1/0;var m=h.site,h=m.x,m=m.y,g=m-f;if(!g)return h;var k=h-b,l=1/e-1/g,n=k/g;return l?(-n+Math.sqrt(n*n-2*l*(k*k/(-2*g)-m+g/2+d-e/2)))/l+b:(b+h)/2}function $e(a){this.site=a;this.edges=[]}function af(a,f){return f.angle-a.angle}function dh(){$b(this);this.x=this.y=this.arc=this.site=this.cy=
null}function jb(a){var f=a.P,m=a.N;if(f&&m){var b=f.site,f=a.site,d=m.site;if(b!==d){var m=f.x,e=f.y,h=b.x-m,g=b.y-e,b=d.x-m,d=d.y-e,k=2*(h*d-g*b);if(!(k>=-dd)){var l=h*h+g*g,n=b*b+d*d,g=(d*l-g*n)/k,h=(h*n-b*l)/k,d=h+e,e=bf.pop()||new dh;e.arc=a;e.site=f;e.x=g+m;e.y=d+Math.sqrt(g*g+h*h);e.cy=d;a.circle=e;a=null;for(f=ub._;f;)if(e.y<f.y||e.y===f.y&&e.x<=f.x){if(!f.L){a=f.P;break}f=f.L}else{if(!f.R){a=f;break}f=f.R}ub.insert(a,e);a||(ed=e)}}}}function hb(a){var f=a.circle;f&&(f.P||(ed=f.N),ub.remove(f),
bf.push(f),$b(f),a.circle=null)}function eh(a,f){var m=a.b;if(m)return!0;var b,d,e=a.a,m=f[0][0],h=f[1][0],g=f[0][1],k=f[1][1],l=a.l,n=a.r,p=l.x,l=l.y,q=n.x,n=n.y;d=(p+q)/2;if(n===l){if(m>d||d>=h)return;if(p>q){if(e){if(e.y>=k)return}else e={x:d,y:g};m={x:d,y:k}}else{if(e){if(e.y<g)return}else e={x:d,y:k};m={x:d,y:g}}}else if(b=(p-q)/(n-l),d=(l+n)/2-b*d,-1>b||1<b)if(p>q){if(e){if(e.y>=k)return}else e={x:(g-d)/b,y:g};m={x:(k-d)/b,y:k}}else{if(e){if(e.y<g)return}else e={x:(k-d)/b,y:k};m={x:(g-d)/b,
y:g}}else if(n>l){if(e){if(e.x>=h)return}else e={x:m,y:b*m+d};m={x:h,y:b*h+d}}else{if(e){if(e.x<m)return}else e={x:h,y:b*h+d};m={x:m,y:b*m+d}}return a.a=e,a.b=m,!0}function cf(a,f){this.l=a;this.r=f;this.a=this.b=null}function vb(a,f,m,b){var d=new cf(a,f);return kb.push(d),m&&ac(d,a,f,m),b&&ac(d,f,a,b),Va[a.i].edges.push(new bc(d,a,f)),Va[f.i].edges.push(new bc(d,f,a)),d}function fh(a,f,m){a=new cf(a,null);return a.a=f,a.b=m,kb.push(a),a}function ac(a,f,m,b){a.a||a.b?a.l===m?a.b=b:a.a=b:(a.a=b,a.l=
f,a.r=m)}function bc(a,f,m){var b=a.a,d=a.b;this.edge=a;this.site=f;this.angle=m?Math.atan2(m.y-f.y,m.x-f.x):a.l===f?Math.atan2(d.x-b.x,b.y-d.y):Math.atan2(b.x-d.x,d.y-b.y)}function fd(){this._=null}function $b(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function wb(a,f){var m=f.R,b=f.U;b?b.L===f?b.L=m:b.R=m:a._=m;m.U=b;f.U=m;f.R=m.L;f.R&&(f.R.U=f);m.L=f}function xb(a,f){var m=f.L,b=f.U;b?b.L===f?b.L=m:b.R=m:a._=m;m.U=b;f.U=m;f.L=m.R;f.L&&(f.L.U=f);m.R=f}function df(a){for(;a.L;)a=a.L;return a}function gd(a,
f){var m,b,d,e=a.sort(gh).pop();kb=[];Va=Array(a.length);ib=new fd;for(ub=new fd;;)if(d=ed,e&&(!d||e.y<d.y||e.y===d.y&&e.x<d.x)){if(e.x!==m||e.y!==b){Va[e.i]=new $e(e);m=e;for(var h=b=void 0,g=void 0,k=void 0,l=m.x,n=m.y,p=ib._;p;)if(g=Ze(p,n)-l,g>A)p=p.L;else{var q;var r=p;q=n;var t=r.N;t?q=Ze(t,q):(r=r.site,q=r.y===q?r.x:1/0);if(k=l-q,!(k>A)){g>-A?(b=p.P,h=p):k>-A?(b=p,h=p.N):b=h=p;break}if(!p.R){b=p;break}p=p.R}g=Xe(m);if(ib.insert(b,g),b||h)if(b===h)hb(b),h=Xe(b.site),ib.insert(g,h),g.edge=h.edge=
vb(b.site,g.site),jb(b),jb(h);else if(h){hb(b);hb(h);k=b.site;n=k.x;p=k.y;q=m.x-n;var r=m.y-p,l=h.site,t=l.x-n,s=l.y-p,x=2*(q*s-r*t),u=q*q+r*r,G=t*t+s*s,n={x:(s*u-r*G)/x+n,y:(q*G-t*u)/x+p};ac(h.edge,k,l,n);g.edge=vb(k,m,null,n);h.edge=vb(m,l,null,n);jb(b);jb(h)}else g.edge=vb(b.site,g.site);m=e.x;b=e.y}e=a.pop()}else{if(!d)break;l=d.arc;h=l.circle;k=h.x;n=h.cy;h={x:k,y:n};q=l.P;p=l.N;g=[l];cd(l);for(l=q;l.circle&&I(k-l.circle.x)<A&&I(n-l.circle.cy)<A;)q=l.P,g.unshift(l),cd(l),l=q;g.unshift(l);hb(l);
for(q=p;q.circle&&I(k-q.circle.x)<A&&I(n-q.circle.cy)<A;)p=q.N,g.push(q),cd(q),q=p;g.push(q);hb(q);k=void 0;n=g.length;for(k=1;n>k;++k)q=g[k],l=g[k-1],ac(q.edge,l.site,q.site,h);l=g[0];q=g[n-1];q.edge=vb(l.site,q.site,null,h);jb(l);jb(q)}if(f){e=kb;m=ye(f[0][0],f[0][1],f[1][0],f[1][1]);for(b=e.length;b--;)d=e[b],(!eh(d,f)||!m(d)||I(d.a.x-d.b.x)<A&&I(d.a.y-d.b.y)<A)&&(d.a=d.b=null,e.splice(b,1));var K,l=f[0][0],n=f[1][0],p=f[0][1];q=f[1][1];r=Va;for(t=r.length;t--;)if(K=r[t],K&&K.prepare())for(h=K.edges,
g=h.length,b=0;g>b;)k=h[b].end(),e=k.x,m=k.y,s=h[++b%g].start(),d=s.x,s=s.y,(I(e-d)>A||I(m-s)>A)&&(h.splice(b,0,new bc(fh(K.site,k,I(e-l)<A&&q-m>A?{x:l,y:I(d-l)<A?s:q}:I(m-q)<A&&n-e>A?{x:I(s-q)<A?d:n,y:q}:I(e-n)<A&&m-p>A?{x:n,y:I(d-n)<A?s:p}:I(m-p)<A&&e-l>A?{x:I(s-p)<A?d:l,y:p}:null),K.site,null)),++g)}K={cells:Va,edges:kb};return ib=ub=kb=Va=null,K}function gh(a,f){return f.y-a.y||f.x-a.x}function hh(a){return a.x}function ih(a){return a.y}function ef(){return{leaf:!0,nodes:[],point:null,x:null,
y:null}}function yb(a,f,m,b,d,e){if(!a(f,m,b,d,e)){var h=.5*(m+d),g=.5*(b+e);f=f.nodes;f[0]&&yb(a,f[0],m,b,h,g);f[1]&&yb(a,f[1],h,b,d,g);f[2]&&yb(a,f[2],m,g,h,e);f[3]&&yb(a,f[3],h,g,d,e)}}function hd(a,f){a=t.rgb(a);f=t.rgb(f);var m=a.r,b=a.g,d=a.b,e=f.r-m,h=f.g-b,g=f.b-d;return function(a){return"#"+bb(Math.round(m+e*a))+bb(Math.round(b+h*a))+bb(Math.round(d+g*a))}}function ff(a,f){var m,b={},d={};for(m in a)m in f?b[m]=Wa(a[m],f[m]):d[m]=a[m];for(m in f)m in a||(d[m]=f[m]);return function(a){for(m in b)d[m]=
b[m](a);return d}}function Ea(a,f){return f-=a=+a,function(m){return a+f*m}}function gf(a,f){var m,b,d,e=id.lastIndex=jd.lastIndex=0,h=-1,g=[],k=[];a+="";for(f+="";(m=id.exec(a))&&(b=jd.exec(f));)(d=b.index)>e&&(d=f.slice(e,d),g[h]?g[h]+=d:g[++h]=d),(m=m[0])===(b=b[0])?g[h]?g[h]+=b:g[++h]=b:(g[++h]=null,k.push({i:h,x:Ea(m,b)})),e=jd.lastIndex;return e<f.length&&(d=f.slice(e),g[h]?g[h]+=d:g[++h]=d),2>g.length?k[0]?(f=k[0].x,function(a){return f(a)+""}):function(){return f}:(f=k.length,function(a){for(var m,
b=0;f>b;++b)g[(m=k[b]).i]=m.x(a);return g.join("")})}function Wa(a,f){for(var m,b=t.interpolators.length;0<=--b&&!(m=t.interpolators[b](a,f)););return m}function cc(a,f){var m,b=[],d=[],e=a.length,h=f.length,g=Math.min(a.length,f.length);for(m=0;g>m;++m)b.push(Wa(a[m],f[m]));for(;e>m;++m)d[m]=a[m];for(;h>m;++m)d[m]=f[m];return function(a){for(m=0;g>m;++m)d[m]=b[m](a);return d}}function jh(a){return function(f){return 0>=f?0:1<=f?1:a(f)}}function hf(a){return function(f){return 1-a(1-f)}}function jf(a){return function(f){return.5*
(.5>f?a(2*f):2-a(2-2*f))}}function kh(a){return a*a}function lh(a){return a*a*a}function mh(a){if(0>=a)return 0;if(1<=a)return 1;var f=a*a,m=f*a;return 4*(.5>a?m:3*(a-f)+m-.75)}function nh(a){return 1-Math.cos(a*aa)}function oh(a){return Math.pow(2,10*(a-1))}function ph(a){return 1-Math.sqrt(1-a*a)}function qh(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function kf(a,f){return f-=a,function(m){return Math.round(a+
f*m)}}function lf(a){var f=[a.a,a.b],m=[a.c,a.d],b=mf(f),d=f[0]*m[0]+f[1]*m[1],e;e=-d;e=(m[0]+=e*f[0],m[1]+=e*f[1],m);e=mf(e)||0;f[0]*m[1]<m[0]*f[1]&&(f[0]*=-1,f[1]*=-1,b*=-1,d*=-1);this.rotate=(b?Math.atan2(f[1],f[0]):Math.atan2(-m[0],m[1]))*P;this.translate=[a.e,a.f];this.scale=[b,e];this.skew=e?Math.atan2(d,e)*P:0}function mf(a){var f=Math.sqrt(a[0]*a[0]+a[1]*a[1]);return f&&(a[0]/=f,a[1]/=f),f}function nf(a,f){var m,b=[],d=[],e=t.transform(a),h=t.transform(f),g=e.translate,k=h.translate,l=e.rotate,
n=h.rotate,p=e.skew,q=h.skew,e=e.scale,h=h.scale;return g[0]!=k[0]||g[1]!=k[1]?(b.push("translate(",null,",",null,")"),d.push({i:1,x:Ea(g[0],k[0])},{i:3,x:Ea(g[1],k[1])})):k[0]||k[1]?b.push("translate("+k+")"):b.push(""),l!=n?(180<l-n?n+=360:180<n-l&&(l+=360),d.push({i:b.push(b.pop()+"rotate(",null,")")-2,x:Ea(l,n)})):n&&b.push(b.pop()+"rotate("+n+")"),p!=q?d.push({i:b.push(b.pop()+"skewX(",null,")")-2,x:Ea(p,q)}):q&&b.push(b.pop()+"skewX("+q+")"),e[0]!=h[0]||e[1]!=h[1]?(m=b.push(b.pop()+"scale(",
null,",",null,")"),d.push({i:m-4,x:Ea(e[0],h[0])},{i:m-2,x:Ea(e[1],h[1])})):(1!=h[0]||1!=h[1])&&b.push(b.pop()+"scale("+h+")"),m=d.length,function(a){for(var f,e=-1;++e<m;)b[(f=d[e]).i]=f.x(a);return b.join("")}}function rh(a,f){return f=f-(a=+a)?1/(f-a):0,function(b){return(b-a)*f}}function sh(a,f){return f=f-(a=+a)?1/(f-a):0,function(b){return Math.max(0,Math.min(1,(b-a)*f))}}function th(a){var f=a.source;a=a.target;var b;var d=a;if(f===d)b=f;else{b=of(f);for(var d=of(d),e=b.pop(),h=d.pop(),g=null;e===
h;)g=e,e=b.pop(),h=d.pop();b=g}for(d=[f];f!==b;)f=f.parent,d.push(f);for(f=d.length;a!==b;)d.splice(f,0,a),a=a.parent;return d}function of(a){for(var f=[],b=a.parent;null!=b;)f.push(a),a=b,b=b.parent;return f.push(a),f}function uh(a){a.fixed|=2}function vh(a){a.fixed&=-7}function wh(a){a.fixed|=4;a.px=a.x;a.py=a.y}function xh(a){a.fixed&=-5}function pf(a,f,b){var d=0,e=0;if(a.charge=0,!a.leaf)for(var h,g=a.nodes,k=g.length,l=-1;++l<k;)h=g[l],null!=h&&(pf(h,f,b),a.charge+=h.charge,d+=h.charge*h.cx,
e+=h.charge*h.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5),f*=b[a.point.index],a.charge+=a.pointCharge=f,d+=f*a.point.x,e+=f*a.point.y);a.cx=d/a.charge;a.cy=e/a.charge}function zb(a,f){return t.rebind(a,f,"sort","children","value"),a.nodes=a,a.links=yh,a}function Ab(a,f){for(var b=[a];null!=(a=b.pop());)if(f(a),(e=a.children)&&(d=e.length))for(var d,e;0<=--d;)b.push(e[d])}function wa(a,f){for(var b=[a],d=[];null!=(a=b.pop());)if(d.push(a),(h=a.children)&&(e=h.length))for(var e,
h,g=-1;++g<e;)b.push(h[g]);for(;null!=(a=d.pop());)f(a)}function zh(a){return a.children}function Ah(a){return a.value}function Bh(a,f){return f.value-a.value}function yh(a){return t.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function Ch(a){return a.x}function Dh(a){return a.y}function Eh(a,f,b){a.y0=f;a.y=b}function kd(a){return t.range(a.length)}function ld(a){var f=-1;a=a[0].length;for(var b=[];++f<a;)b[f]=0;return b}function Fh(a){for(var f,b=
1,d=0,e=a[0][1],h=a.length;h>b;++b)(f=a[b][1])>e&&(d=b,e=f);return d}function Gh(a){return a.reduce(Hh,0)}function Hh(a,f){return a+f[1]}function Ih(a,f){return qf(a,Math.ceil(Math.log(f.length)/Math.LN2+1))}function qf(a,f){for(var b=-1,d=+a[0],e=(a[1]-d)/f,h=[];++b<=f;)h[b]=e*b+d;return h}function Jh(a){return[t.min(a),t.max(a)]}function Kh(a,f){return a.value-f.value}function md(a,f){var b=a._pack_next;a._pack_next=f;f._pack_prev=a;f._pack_next=b;b._pack_prev=f}function rf(a,f){a._pack_next=f;
f._pack_prev=a}function sf(a,f){var b=f.x-a.x,d=f.y-a.y,e=a.r+f.r;return.999*e*e>b*b+d*d}function tf(a){function f(a){p=Math.min(a.x-a.r,p);q=Math.max(a.x+a.r,q);r=Math.min(a.y-a.r,r);t=Math.max(a.y+a.r,t)}if((b=a.children)&&(n=b.length)){var b,d,e,h,g,k,l,n,p=1/0,q=-1/0,r=1/0,t=-1/0;if(b.forEach(Lh),d=b[0],d.x=-d.r,d.y=0,f(d),1<n&&(e=b[1],e.x=e.r,e.y=0,f(e),2<n))for(h=b[2],uf(d,e,h),f(h),md(d,h),d._pack_prev=h,md(h,e),e=d._pack_next,g=3;n>g;g++){uf(d,e,h=b[g]);var s=0,x=1,u=1;for(k=e._pack_next;k!==
e;k=k._pack_next,x++)if(sf(k,h)){s=1;break}if(1==s)for(l=d._pack_prev;l!==k._pack_prev&&!sf(l,h);l=l._pack_prev,u++);s?(u>x||x==u&&e.r<d.r?rf(d,e=k):rf(d=l,e),g--):(md(d,h),e=h,f(h))}d=(p+q)/2;e=(r+t)/2;for(g=k=0;n>g;g++)h=b[g],h.x-=d,h.y-=e,k=Math.max(k,h.r+Math.sqrt(h.x*h.x+h.y*h.y));a.r=k;b.forEach(Mh)}}function Lh(a){a._pack_next=a._pack_prev=a}function Mh(a){delete a._pack_next;delete a._pack_prev}function vf(a,f,b,d){var e=a.children;if(a.x=f+=d*a.x,a.y=b+=d*a.y,a.r*=d,e){a=-1;for(var h=e.length;++a<
h;)vf(e[a],f,b,d)}}function uf(a,f,b){var d=a.r+b.r,e=f.x-a.x,h=f.y-a.y;if(d&&(e||h)){var g=f.r+b.r,k=e*e+h*h,g=g*g,d=d*d;f=.5+(d-g)/(2*k);g=Math.sqrt(Math.max(0,2*g*(d+k)-(d-=k)*d-g*g))/(2*k);b.x=a.x+f*e+g*h;b.y=a.y+f*h-g*e}else b.x=a.x+d,b.y=a.y}function wf(a,f){return a.parent==f.parent?1:2}function nd(a){var f=a.children;return f.length?f[0]:a.t}function od(a){var f,b=a.children;return(f=b.length)?b[f-1]:a.t}function Nh(a){return 1+t.max(a,function(a){return a.y})}function Oh(a){return a.reduce(function(a,
b){return a+b.x},0)/a.length}function xf(a){var f=a.children;return f&&f.length?xf(f[0]):a}function yf(a){var f,b=a.children;return b&&(f=b.length)?yf(b[f-1]):a}function pd(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function zf(a,f){var b=a.x+f[3],d=a.y+f[0],e=a.dx-f[1]-f[3],h=a.dy-f[0]-f[2];return 0>e&&(b+=e/2,e=0),0>h&&(d+=h/2,h=0),{x:b,y:d,dx:e,dy:h}}function lb(a){var f=a[0];a=a[a.length-1];return a>f?[f,a]:[a,f]}function dc(a){return a.rangeExtent?a.rangeExtent():lb(a.range())}function Ph(a,f,b,
d){var e=b(a[0],a[1]),h=d(f[0],f[1]);return function(a){return h(e(a))}}function ec(a,f){var b,d=0,e=a.length-1,h=a[d],g=a[e];return h>g&&(b=d,d=e,e=b,b=h,h=g,g=b),a[d]=f.floor(h),a[e]=f.ceil(g),a}function Af(a){return a?{floor:function(f){return Math.floor(f/a)*a},ceil:function(f){return Math.ceil(f/a)*a}}:Qh}function Rh(a,f,b,d){var e=[],h=[],g=0,k=Math.min(a.length,f.length)-1;for(a[k]<a[0]&&(a=a.slice().reverse(),f=f.slice().reverse());++g<=k;)e.push(b(a[g-1],a[g])),h.push(d(f[g-1],f[g]));return function(f){var b=
t.bisect(a,f,1,k)-1;return h[b](e[b](f))}}function Bf(a,f,b,d){function e(){var l=2<Math.min(a.length,f.length)?Rh:Ph,n=d?sh:rh;return g=l(a,f,n,b),k=l(f,a,n,Wa),h}function h(a){return g(a)}var g,k;return h.invert=function(a){return k(a)},h.domain=function(f){return arguments.length?(a=f.map(Number),e()):a},h.range=function(a){return arguments.length?(f=a,e()):f},h.rangeRound=function(a){return h.range(a).interpolate(kf)},h.clamp=function(a){return arguments.length?(d=a,e()):d},h.interpolate=function(a){return arguments.length?
(b=a,e()):b},h.ticks=function(f){return t.range.apply(t,Ma(a,f))},h.tickFormat=function(f,b){return qd(a,f,b)},h.nice=function(f){return ec(a,Af(Ma(a,f)[2])),e()},h.copy=function(){return Bf(a,f,b,d)},e()}function rd(a,f){return t.rebind(a,f,"range","rangeRound","interpolate","clamp")}function Ma(a,f){null==f&&(f=10);var b=lb(a),d=b[1]-b[0],e=Math.pow(10,Math.floor(Math.log(d/f)/Math.LN10)),d=f/d*e;return.15>=d?e*=10:.35>=d?e*=5:.75>=d&&(e*=2),b[0]=Math.ceil(b[0]/e)*e,b[1]=Math.floor(b[1]/e)*e+.5*
e,b[2]=e,b}function qd(a,f,b){a=Ma(a,f);if(b){f=je.exec(b);if(f.shift(),"s"===f[8]){var d=t.formatPrefix(Math.max(I(a[0]),I(a[1])));return f[7]||(f[7]="."+fc(d.scale(a[2]))),f[8]="f",b=t.format(f.join("")),function(a){return b(d.scale(a))+d.symbol}}f[7]||(f[7]="."+Sh(f[8],a));b=f.join("")}else b=",."+fc(a[2])+"f";return t.format(b)}function fc(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function Sh(a,f){var b=fc(f[2]);return a in Th?Math.abs(b-fc(Math.max(I(f[0]),I(f[1]))))+ +("e"!==a):b-2*("%"===
a)}function Cf(a,f,b,d){function e(a){return(b?Math.log(0>a?0:a):-Math.log(0<a?0:-a))/Math.log(f)}function h(a){return b?Math.pow(f,a):-Math.pow(f,-a)}function g(f){return a(e(f))}return g.invert=function(f){return h(a.invert(f))},g.domain=function(f){return arguments.length?(b=0<=f[0],a.domain((d=f.map(Number)).map(e)),g):d},g.base=function(b){return arguments.length?(f=+b,a.domain(d.map(e)),g):f},g.nice=function(){var f=ec(d.map(e),b?Math:Uh);return a.domain(f),d=f.map(h),g},g.ticks=function(){var a=
lb(d),g=[],k=a[0],a=a[1],l=Math.floor(e(k)),n=Math.ceil(e(a)),p=f%1?2:f;if(isFinite(n-l)){if(b){for(;n>l;l++)for(var q=1;p>q;q++)g.push(h(l)*q);g.push(h(l))}else for(g.push(h(l));l++<n;)for(q=p-1;0<q;q--)g.push(h(l)*q);for(l=0;g[l]<k;l++);for(n=g.length;g[n-1]>a;n--);g=g.slice(l,n)}return g},g.tickFormat=function(a,f){if(!arguments.length)return Df;2>arguments.length?f=Df:"function"!=typeof f&&(f=t.format(f));var d,k=Math.max(.1,a/g.ticks().length),l=b?(d=1E-12,Math.ceil):(d=-1E-12,Math.floor);return function(a){return a/
h(l(e(a)+d))<=k?f(a):""}},g.copy=function(){return Cf(a.copy(),f,b,d)},rd(g,a)}function Ef(a,f,b){function d(f){return a(e(f))}var e=gc(f),h=gc(1/f);return d.invert=function(f){return h(a.invert(f))},d.domain=function(f){return arguments.length?(a.domain((b=f.map(Number)).map(e)),d):b},d.ticks=function(a){return t.range.apply(t,Ma(b,a))},d.tickFormat=function(a,f){return qd(b,a,f)},d.nice=function(a){return d.domain(ec(b,Af(Ma(b,a)[2])))},d.exponent=function(g){return arguments.length?(e=gc(f=g),
h=gc(1/f),a.domain(b.map(e)),d):f},d.copy=function(){return Ef(a.copy(),f,b)},rd(d,a)}function gc(a){return function(f){return 0>f?-Math.pow(-f,a):Math.pow(f,a)}}function Ff(a,f){function b(d){return g[((e.get(d)||("range"===f.t?e.set(d,a.push(d)):0/0))-1)%g.length]}function d(f,b){return t.range(a.length).map(function(a){return f+b*a})}var e,g,k;return b.domain=function(d){if(!arguments.length)return a;a=[];e=new h;for(var g,k=-1,v=d.length;++k<v;)e.has(g=d[k])||e.set(g,a.push(g));return b[f.t].apply(b,
f.a)},b.range=function(a){return arguments.length?(g=a,k=0,f={t:"range",a:arguments},b):g},b.rangePoints=function(e,h){2>arguments.length&&(h=0);var l=e[0],n=e[1],E=(n-l)/(Math.max(1,a.length-1)+h);return g=d(2>a.length?(l+n)/2:l+E*h/2,E),k=0,f={t:"rangePoints",a:arguments},b},b.rangeBands=function(e,h,l){2>arguments.length&&(h=0);3>arguments.length&&(l=h);var n=e[1]<e[0],E=e[n-0],p=(e[1-n]-E)/(a.length-h+2*l);return g=d(E+p*l,p),n&&g.reverse(),k=p*(1-h),f={t:"rangeBands",a:arguments},b},b.rangeRoundBands=
function(e,h,l){2>arguments.length&&(h=0);3>arguments.length&&(l=h);var n=e[1]<e[0],E=e[n-0],p=e[1-n],q=Math.floor((p-E)/(a.length-h+2*l));return g=d(E+Math.round((p-E-(a.length-h)*q)/2),q),n&&g.reverse(),k=Math.round(q*(1-h)),f={t:"rangeRoundBands",a:arguments},b},b.rangeBand=function(){return k},b.rangeExtent=function(){return lb(f.a[0])},b.copy=function(){return Ff(a,f)},b.domain(a)}function Gf(a,f){function b(){var m=0,e=f.length;for(h=[];++m<e;)h[m-1]=t.quantile(a,m/e);return d}function d(a){return isNaN(a=
+a)?void 0:f[t.bisect(h,a)]}var h;return d.domain=function(f){return arguments.length?(a=f.filter(k).sort(e),b()):a},d.range=function(a){return arguments.length?(f=a,b()):f},d.quantiles=function(){return h},d.invertExtent=function(b){return b=f.indexOf(b),0>b?[0/0,0/0]:[0<b?h[b-1]:a[0],b<h.length?h[b]:a[a.length-1]]},d.copy=function(){return Gf(a,f)},b()}function Hf(a,f,b){function d(f){return b[Math.max(0,Math.min(g,Math.floor(h*(f-a))))]}function e(){return h=b.length/(f-a),g=b.length-1,d}var h,
g;return d.domain=function(b){return arguments.length?(a=+b[0],f=+b[b.length-1],e()):[a,f]},d.range=function(a){return arguments.length?(b=a,e()):b},d.invertExtent=function(f){return f=b.indexOf(f),f=0>f?0/0:f/h+a,[f,f+1/h]},d.copy=function(){return Hf(a,f,b)},e()}function If(a,f){function b(d){return d>=d?f[t.bisect(a,d)]:void 0}return b.domain=function(f){return arguments.length?(a=f,b):a},b.range=function(a){return arguments.length?(f=a,b):f},b.invertExtent=function(b){return b=f.indexOf(b),[a[b-
1],a[b]]},b.copy=function(){return If(a,f)},b}function Jf(a){function f(a){return+a}return f.invert=f,f.domain=f.range=function(b){return arguments.length?(a=b.map(f),f):a},f.ticks=function(f){return t.range.apply(t,Ma(a,f))},f.tickFormat=function(f,b){return qd(a,f,b)},f.copy=function(){return Jf(a)},f}function Vh(a){return a.innerRadius}function Wh(a){return a.outerRadius}function Kf(a){return a.startAngle}function Lf(a){return a.endAngle}function Mf(a){function f(f){function g(){n.push("M",h(a(p),
k))}for(var l,n=[],p=[],q=-1,r=f.length,t=J(b),U=J(d);++q<r;)e.call(this,l=f[q],q)?p.push([+t.call(this,l,q),+U.call(this,l,q)]):p.length&&(g(),p=[]);return p.length&&g(),n.length?n.join(""):null}var b=gb,d=tb,e=fb,h=ja,g=h.key,k=.7;return f.x=function(a){return arguments.length?(b=a,f):b},f.y=function(a){return arguments.length?(d=a,f):d},f.defined=function(a){return arguments.length?(e=a,f):e},f.interpolate=function(a){return arguments.length?(g="function"==typeof a?h=a:(h=sd.get(a)||ja).key,f):
g},f.tension=function(a){return arguments.length?(k=a,f):k},f}function ja(a){return a.join("L")}function td(a){for(var f=0,b=a.length,d=a[0],e=[d[0],",",d[1]];++f<b;)e.push("V",(d=a[f])[1],"H",d[0]);return e.join("")}function ud(a){for(var f=0,b=a.length,d=a[0],e=[d[0],",",d[1]];++f<b;)e.push("H",(d=a[f])[0],"V",d[1]);return e.join("")}function hc(a,f){if(1>f.length||a.length!=f.length&&a.length!=f.length+2)return ja(a);var b=a.length!=f.length,d="",e=a[0],h=a[1],g=f[0],k=g,l=1;if(b&&(d+="Q"+(h[0]-
2*g[0]/3)+","+(h[1]-2*g[1]/3)+","+h[0]+","+h[1],e=a[1],l=2),1<f.length)for(k=f[1],h=a[l],l++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(h[0]-k[0])+","+(h[1]-k[1])+","+h[0]+","+h[1],e=2;e<f.length;e++,l++)h=a[l],k=f[e],d+="S"+(h[0]-k[0])+","+(h[1]-k[1])+","+h[0]+","+h[1];b&&(b=a[l],d+="Q"+(h[0]+2*k[0]/3)+","+(h[1]+2*k[1]/3)+","+b[0]+","+b[1]);return d}function vd(a,f){for(var b,d=[],e=(1-f)/2,h=a[0],g=a[1],k=1,l=a.length;++k<l;)b=h,h=g,g=a[k],d.push([e*(g[0]-b[0]),e*(g[1]-b[1])]);return d}function Nf(a){if(3>
a.length)return ja(a);var f=1,b=a.length,d=a[0],e=d[0],h=d[1],g=[e,e,e,(d=a[1])[0]],k=[h,h,h,d[1]],e=[e,",",h,"L",ma(Na,g),",",ma(Na,k)];for(a.push(a[b-1]);++f<=b;)d=a[f],g.shift(),g.push(d[0]),k.shift(),k.push(d[1]),wd(e,g,k);return a.pop(),e.push("L",d),e.join("")}function ma(a,f){return a[0]*f[0]+a[1]*f[1]+a[2]*f[2]+a[3]*f[3]}function wd(a,f,b){a.push("C",ma(Of,f),",",ma(Of,b),",",ma(Pf,f),",",ma(Pf,b),",",ma(Na,f),",",ma(Na,b))}function xd(a,f){return(f[1]-a[1])/(f[0]-a[0])}function Qf(a){for(var f,
b,d,e=-1,h=a.length;++e<h;)f=a[e],b=f[0],d=f[1]+Xa,f[0]=b*Math.cos(d),f[1]=b*Math.sin(d);return a}function Rf(a){function f(f){function l(){$a.push("M",k(a(K),q),p,n(a(x.reverse()),q),"Z")}for(var r,t,s,$a=[],x=[],K=[],u=-1,w=f.length,ta=J(b),y=J(e),z=b===d?function(){return t}:J(d),N=e===h?function(){return s}:J(h);++u<w;)g.call(this,r=f[u],u)?(x.push([t=+ta.call(this,r,u),s=+y.call(this,r,u)]),K.push([+z.call(this,r,u),+N.call(this,r,u)])):x.length&&(l(),x=[],K=[]);return x.length&&l(),$a.length?
$a.join(""):null}var b=gb,d=gb,e=0,h=tb,g=fb,k=ja,l=k.key,n=k,p="L",q=.7;return f.x=function(a){return arguments.length?(b=d=a,f):d},f.x0=function(a){return arguments.length?(b=a,f):b},f.x1=function(a){return arguments.length?(d=a,f):d},f.y=function(a){return arguments.length?(e=h=a,f):h},f.y0=function(a){return arguments.length?(e=a,f):e},f.y1=function(a){return arguments.length?(h=a,f):h},f.defined=function(a){return arguments.length?(g=a,f):g},f.interpolate=function(a){return arguments.length?
(l="function"==typeof a?k=a:(k=sd.get(a)||ja).key,n=k.reverse||k,p=k.closed?"M":"L",f):l},f.tension=function(a){return arguments.length?(q=a,f):q},f}function Xh(a){return a.radius}function Sf(a){return[a.x,a.y]}function Yh(a){return function(){var f=a.apply(this,arguments),b=f[0],f=f[1]+Xa;return[b*Math.cos(f),b*Math.sin(f)]}}function Zh(){return 64}function $h(){return"circle"}function Tf(a){a=Math.sqrt(a/F);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function Bb(a,f){return Db(a,
X),a.id=f,a}function yd(a,f,b,d){var e=a.id;return xa(a,"function"==typeof b?function(a,h,g){a.__transition__[e].tween.set(f,d(b.call(a,a.__data__,h,g)))}:(b=d(b),function(a){a.__transition__[e].tween.set(f,b)}))}function ai(a){return null==a&&(a=""),function(){this.textContent=a}}function ic(a,f,b,d){var e=a.__transition__||(a.__transition__={active:0,count:0}),g=e[b];if(!g){var k=d.time,g=e[b]={tween:new h,time:k,ease:d.ease,delay:d.delay,duration:d.duration};++e.count;t.timer(function(d){function h(d){return e.active>
b?n():(e.active=b,g.event&&g.event.start.call(a,C,f),g.tween.forEach(function(b,d){(d=d.call(a,C,f))&&x.push(d)}),t.timer(function(){return s.c=l(d||1)?fb:l,1},0,k),void 0)}function l(d){if(e.active!==b)return n();d/=r;for(var h=p(d),k=x.length;0<k;)x[--k].call(a,h);return 1<=d?(g.event&&g.event.end.call(a,C,f),n()):void 0}function n(){return--e.count?delete e[b]:delete a.__transition__,1}var C=a.__data__,p=g.ease,q=g.delay,r=g.duration,s=Aa,x=[];return s.t=q+k,d>=q?h(d-q):(s.c=h,void 0)},0,k)}}function Uf(a,
f){a.attr("transform",function(a){return"translate("+f(a)+",0)"})}function Vf(a,f){a.attr("transform",function(a){return"translate(0,"+f(a)+")"})}function zd(a){return a.toISOString()}function Ad(a,f,b){function d(f){return a(f)}function e(a,b){var d=(a[1]-a[0])/b,m=t.bisect(jc,d);return m==jc.length?[f.year,Ma(a.map(function(a){return a/31536E6}),b)[2]]:m?f[d/jc[m-1]<jc[m]/d?m-1:m]:[bi,Ma(a,b)[2]]}return d.invert=function(f){return Ya(a.invert(f))},d.domain=function(f){return arguments.length?(a.domain(f),
d):a.domain().map(Ya)},d.nice=function(a,f){function b(d){return!isNaN(d)&&!a.range(d,Ya(+d+1),f).length}var m=d.domain(),h=lb(m),h=null==a?e(h,10):"number"==typeof a&&e(h,a);return h&&(a=h[0],f=h[1]),d.domain(ec(m,1<f?{floor:function(f){for(;b(f=a.floor(f));)f=Ya(f-1);return f},ceil:function(f){for(;b(f=a.ceil(f));)f=Ya(+f+1);return f}}:a))},d.ticks=function(a,f){var b=lb(d.domain()),m=null==a?e(b,10):"number"==typeof a?e(b,a):!a.range&&[{range:a},f];return m&&(a=m[0],f=m[1]),a.range(b[0],Ya(+b[1]+
1),1>f?1:f)},d.tickFormat=function(){return b},d.copy=function(){return Ad(a.copy(),f,b)},rd(d,a)}function Ya(a){return new Date(a)}function ci(a){return JSON.parse(a.responseText)}function di(a){var f=ra.createRange();return f.selectNode(ra.body),f.createContextualFragment(a.responseText)}var t={version:"3.4.12"};Date.now||(Date.now=function(){return+new Date});var Wf=[].slice,Ga=function(a){return Wf.call(a)},ra=document,za=ra.documentElement,da=window;try{Ga(za.childNodes)[0].nodeType}catch(Di){Ga=
function(a){for(var f=a.length,b=Array(f);f--;)b[f]=a[f];return b}}try{ra.createElement("div").style.setProperty("opacity",0,"")}catch(Ei){var kc=da.Element.prototype,ei=kc.setAttribute,fi=kc.setAttributeNS,Xf=da.CSSStyleDeclaration.prototype,gi=Xf.setProperty;kc.setAttribute=function(a,f){ei.call(this,a,f+"")};kc.setAttributeNS=function(a,f,b){fi.call(this,a,f,b+"")};Xf.setProperty=function(a,f,b){gi.call(this,a,f+"",b)}}t.ascending=e;t.descending=function(a,f){return a>f?-1:f>a?1:f>=a?0:0/0};t.min=
function(a,f){var b,d,e=-1,h=a.length;if(1===arguments.length){for(;++e<h&&!(null!=(b=a[e])&&b>=b);)b=void 0;for(;++e<h;)null!=(d=a[e])&&b>d&&(b=d)}else{for(;++e<h&&!(null!=(b=f.call(a,a[e],e))&&b>=b);)b=void 0;for(;++e<h;)null!=(d=f.call(a,a[e],e))&&b>d&&(b=d)}return b};t.max=function(a,f){var b,d,e=-1,h=a.length;if(1===arguments.length){for(;++e<h&&!(null!=(b=a[e])&&b>=b);)b=void 0;for(;++e<h;)null!=(d=a[e])&&d>b&&(b=d)}else{for(;++e<h&&!(null!=(b=f.call(a,a[e],e))&&b>=b);)b=void 0;for(;++e<h;)null!=
(d=f.call(a,a[e],e))&&d>b&&(b=d)}return b};t.extent=function(a,f){var b,d,e,h=-1,g=a.length;if(1===arguments.length){for(;++h<g&&!(null!=(b=e=a[h])&&b>=b);)b=e=void 0;for(;++h<g;)null!=(d=a[h])&&(b>d&&(b=d),d>e&&(e=d))}else{for(;++h<g&&!(null!=(b=e=f.call(a,a[h],h))&&b>=b);)b=void 0;for(;++h<g;)null!=(d=f.call(a,a[h],h))&&(b>d&&(b=d),d>e&&(e=d))}return[b,e]};t.sum=function(a,f){var b,d=0,e=a.length,h=-1;if(1===arguments.length)for(;++h<e;)isNaN(b=+a[h])||(d+=b);else for(;++h<e;)isNaN(b=+f.call(a,
a[h],h))||(d+=b);return d};t.mean=function(a,f){var b,d=0,e=a.length,h=-1,g=e;if(1===arguments.length)for(;++h<e;)k(b=a[h])?d+=b:--g;else for(;++h<e;)k(b=f.call(a,a[h],h))?d+=b:--g;return g?d/g:void 0};t.quantile=function(a,f){var b=(a.length-1)*f+1,d=Math.floor(b),e=+a[d-1];return(b-=d)?e+b*(a[d]-e):e};t.median=function(a,f){return 1<arguments.length&&(a=a.map(f)),a=a.filter(k),a.length?t.quantile(a.sort(e),.5):void 0};var Yf=d(e);t.bisectLeft=Yf.left;t.bisect=t.bisectRight=Yf.right;t.bisector=function(a){return d(1===
a.length?function(f,b){return e(a(f),b)}:a)};t.shuffle=function(a){for(var f,b,d=a.length;d;)b=0|Math.random()*d--,f=a[d],a[d]=a[b],a[b]=f;return a};t.permute=function(a,f){for(var b=f.length,d=Array(b);b--;)d[b]=a[f[b]];return d};t.pairs=function(a){for(var f=0,b=a.length-1,d=a[0],e=Array(0>b?0:b);b>f;)e[f]=[d,d=a[++f]];return e};t.zip=function(){if(!(d=arguments.length))return[];for(var a=-1,f=t.min(arguments,g),b=Array(f);++a<f;)for(var d,e=-1,h=b[a]=Array(d);++e<d;)h[e]=arguments[e][a];return b};
t.transpose=function(a){return t.zip.apply(t,a)};t.keys=function(a){var f=[],b;for(b in a)f.push(b);return f};t.values=function(a){var f=[],b;for(b in a)f.push(a[b]);return f};t.entries=function(a){var f=[],b;for(b in a)f.push({key:b,value:a[b]});return f};t.merge=function(a){var f,b,d,e=a.length;f=-1;for(var h=0;++f<e;)h+=a[f].length;for(b=Array(h);0<=--e;)for(d=a[e],f=d.length;0<=--f;)b[--h]=d[f];return b};var I=Math.abs;t.range=function(a,f,b){if(3>arguments.length&&(b=1,2>arguments.length&&(f=
a,a=0)),1/0===(f-a)/b)throw Error("infinite range");var d,e=[],h;d=I(b);for(h=1;d*h%1;)h*=10;var g=-1;if(a*=h,f*=h,b*=h,0>b)for(;(d=a+b*++g)>f;)e.push(d/h);else for(;(d=a+b*++g)<f;)e.push(d/h);return e};t.map=function(a){var f=new h;if(a instanceof h)a.forEach(function(a,b){f.set(a,b)});else for(var b in a)f.set(b,a[b]);return f};b(h,{has:l,get:function(a){return this[Oa+a]},set:function(a,f){return this[Oa+a]=f},remove:function(a){return a=Oa+a,a in this&&delete this[a]},keys:p,values:function(){var a=
[];return this.forEach(function(f,b){a.push(b)}),a},entries:function(){var a=[];return this.forEach(function(f,b){a.push({key:f,value:b})}),a},size:n,empty:q,forEach:function(a){for(var f in this)f.charCodeAt(0)===Cb&&a.call(this,f.slice(1),this[f])}});var Oa="\x00",Cb=Oa.charCodeAt(0);t.nest=function(){function a(f,k,l){if(l>=g.length)return d?d.call(e,k):b?k.sort(b):k;for(var n,p,q,r,t=-1,s=k.length,U=g[l++],x=new h;++t<s;)(r=x.get(n=U(p=k[t])))?r.push(p):x.set(n,[p]);return f?(p=f(),q=function(b,
d){p.set(b,a(f,d,l))}):(p={},q=function(b,d){p[b]=a(f,d,l)}),x.forEach(q),p}function f(a,b){if(b>=g.length)return a;var d=[],e=k[b++];return a.forEach(function(a,e){d.push({key:a,values:f(e,b)})}),e?d.sort(function(a,f){return e(a.key,f.key)}):d}var b,d,e={},g=[],k=[];return e.map=function(f,b){return a(b,f,0)},e.entries=function(b){return f(a(t.map,b,0),0)},e.key=function(a){return g.push(a),e},e.sortKeys=function(a){return k[g.length-1]=a,e},e.sortValues=function(a){return b=a,e},e.rollup=function(a){return d=
a,e},e};t.set=function(a){var f=new r;if(a)for(var b=0,d=a.length;d>b;++b)f.add(a[b]);return f};b(r,{has:l,add:function(a){return this[Oa+a]=!0,a},remove:function(a){return a=Oa+a,a in this&&delete this[a]},values:p,size:n,empty:q,forEach:function(a){for(var f in this)f.charCodeAt(0)===Cb&&a.call(this,f.slice(1))}});t.behavior={};t.rebind=function(a,f){for(var b,d=1,e=arguments.length;++d<e;)a[b=arguments[d]]=s(a,f,f[b]);return a};var Rd="webkit ms moz Moz o O".split(" ");t.dispatch=function(){for(var a=
new x,f=-1,b=arguments.length;++f<b;)a[arguments[f]]=y(a);return a};x.prototype.on=function(a,f){var b=a.indexOf("."),d="";if(0<=b&&(d=a.slice(b+1),a=a.slice(0,b)),a)return 2>arguments.length?this[a].on(d):this[a].on(d,f);if(2===arguments.length){if(null==f)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}};t.event=null;t.requote=function(a){return a.replace(hi,"\\$&")};var hi=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Db={}.__proto__?function(a,f){a.__proto__=f}:function(a,f){for(var b in f)a[b]=
f[b]},Ac=function(a,f){return f.querySelector(a)},Bc=function(a,f){return f.querySelectorAll(a)},ii=za.matches||za[w(za,"matchesSelector")],Sd=function(a,f){return ii.call(a,f)};"function"==typeof Sizzle&&(Ac=function(a,f){return Sizzle(a,f)[0]||null},Bc=Sizzle,Sd=Sizzle.matchesSelector);t.selection=function(){return Zf};var O=t.selection.prototype=[];O.select=function(a){var f,b,d,e,h=[];a=Q(a);for(var g=-1,k=this.length;++g<k;){h.push(f=[]);f.parentNode=(d=this[g]).parentNode;for(var l=-1,n=d.length;++l<
n;)(e=d[l])?(f.push(b=a.call(e,e.__data__,l,g)),b&&"__data__"in e&&(b.__data__=e.__data__)):f.push(null)}return z(h)};O.selectAll=function(a){var f,b,d=[];a=Id(a);for(var e=-1,h=this.length;++e<h;)for(var g=this[e],k=-1,l=g.length;++k<l;)(b=g[k])&&(d.push(f=Ga(a.call(b,b.__data__,k,e))),f.parentNode=b);return z(d)};var Bd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};
t.ns={prefix:Bd,qualify:function(a){var f=a.indexOf(":"),b=a;return 0<=f&&(b=a.slice(0,f),a=a.slice(f+1)),Bd.hasOwnProperty(b)?{space:Bd[b],local:a}:a}};O.attr=function(a,f){if(2>arguments.length){if("string"==typeof a){var b=this.node();return a=t.ns.qualify(a),a.local?b.getAttributeNS(a.space,a.local):b.getAttribute(a)}for(f in a)this.each(Jd(f,a[f]));return this}return this.each(Jd(a,f))};O.classed=function(a,f){if(2>arguments.length){if("string"==typeof a){var b=this.node(),d=(a=(a+"").trim().split(/^|\s+/)).length,
e=-1;if(f=b.classList)for(;++e<d;){if(!f.contains(a[e]))return!1}else for(f=b.getAttribute("class");++e<d;)if(!Ld(a[e]).test(f))return!1;return!0}for(f in a)this.each(Md(f,a[f]));return this}return this.each(Md(a,f))};O.style=function(a,f,b){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(f="");for(b in a)this.each(Nd(b,a[b],f));return this}if(2>d)return da.getComputedStyle(this.node(),null).getPropertyValue(a);b=""}return this.each(Nd(a,f,b))};O.property=function(a,f){if(2>arguments.length){if("string"==
typeof a)return this.node()[a];for(f in a)this.each(Od(f,a[f]));return this}return this.each(Od(a,f))};O.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var f=a.apply(this,arguments);this.textContent=null==f?"":f}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};O.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var f=a.apply(this,arguments);this.innerHTML=null==f?"":f}:null==a?function(){this.innerHTML=
""}:function(){this.innerHTML=a}):this.node().innerHTML};O.append=function(a){return a=Pd(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})};O.insert=function(a,f){return a=Pd(a),f=Q(f),this.select(function(){return this.insertBefore(a.apply(this,arguments),f.apply(this,arguments)||null)})};O.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};O.data=function(a,f){function b(a,d){var e,m,g,k=a.length,v=d.length,q=Math.min(k,v),C=
Array(v),E=Array(v),r=Array(k);if(f){var t=new h,s=new h,U=[];for(e=-1;++e<k;)q=f.call(m=a[e],m.__data__,e),t.has(q)?r[e]=m:t.set(q,m),U.push(q);for(e=-1;++e<v;)q=f.call(d,g=d[e],e),(m=t.get(q))?(C[e]=m,m.__data__=g):s.has(q)||(E[e]={__data__:g}),s.set(q,g),t.remove(q);for(e=-1;++e<k;)t.has(U[e])&&(r[e]=a[e])}else{for(e=-1;++e<q;)m=a[e],g=d[e],m?(m.__data__=g,C[e]=m):E[e]={__data__:g};for(;v>e;++e)E[e]={__data__:d[e]};for(;k>e;++e)r[e]=a[e]}E.update=C;E.parentNode=C.parentNode=r.parentNode=a.parentNode;
l.push(E);n.push(C);p.push(r)}var d,e,g=-1,k=this.length;if(!arguments.length){for(a=Array(k=(d=this[0]).length);++g<k;)(e=d[g])&&(a[g]=e.__data__);return a}var l=Td([]),n=z([]),p=z([]);if("function"==typeof a)for(;++g<k;)b(d=this[g],a.call(d,d.parentNode.__data__,g));else for(;++g<k;)b(d=this[g],a);return n.enter=function(){return l},n.exit=function(){return p},n};O.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};O.filter=function(a){var f,b,d,e=[];
"function"!=typeof a&&(a=Qd(a));for(var h=0,g=this.length;g>h;h++){e.push(f=[]);f.parentNode=(b=this[h]).parentNode;for(var k=0,l=b.length;l>k;k++)(d=b[k])&&a.call(d,d.__data__,k,h)&&f.push(d)}return z(e)};O.order=function(){for(var a=-1,f=this.length;++a<f;)for(var b,d=this[a],e=d.length-1,h=d[e];0<=--e;)(b=d[e])&&(h&&h!==b.nextSibling&&h.parentNode.insertBefore(b,h),h=b);return this};O.sort=function(a){a=rg.apply(this,arguments);for(var f=-1,b=this.length;++f<b;)this[f].sort(a);return this.order()};
O.each=function(a){return xa(this,function(f,b,d){a.call(f,f.__data__,b,d)})};O.call=function(a){var f=Ga(arguments);return a.apply(f[0]=this,f),this};O.empty=function(){return!this.node()};O.node=function(){for(var a=0,f=this.length;f>a;a++)for(var b=this[a],d=0,e=b.length;e>d;d++){var h=b[d];if(h)return h}return null};O.size=function(){var a=0;return xa(this,function(){++a}),a};var ya=[];t.selection.enter=Td;t.selection.enter.prototype=ya;ya.append=O.append;ya.empty=O.empty;ya.node=O.node;ya.call=
O.call;ya.size=O.size;ya.select=function(a){for(var f,b,d,e,h,g=[],k=-1,l=this.length;++k<l;){d=(e=this[k]).update;g.push(f=[]);f.parentNode=e.parentNode;for(var n=-1,p=e.length;++n<p;)(h=e[n])?(f.push(d[n]=b=a.call(e.parentNode,h.__data__,n,k)),b.__data__=h.__data__):f.push(null)}return z(g)};ya.insert=function(a,f){return 2>arguments.length&&(f=sg(this)),O.insert.call(this,a,f)};O.transition=function(){for(var a,f,b=Za||++$f,d=[],e=lc||{time:Date.now(),ease:mh,delay:0,duration:250},h=-1,g=this.length;++h<
g;){d.push(a=[]);for(var k=this[h],l=-1,n=k.length;++l<n;)(f=k[l])&&ic(f,l,b,e),a.push(f)}return Bb(d,b)};O.interrupt=function(){return this.each(Eb)};t.select=function(a){a=["string"==typeof a?Ac(a,ra):a];return a.parentNode=za,z([a])};t.selectAll=function(a){a=Ga("string"==typeof a?Bc(a,ra):a);return a.parentNode=za,z([a])};var Zf=t.select(za);O.on=function(a,f,b){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(f=!1);for(b in a)this.each(Ud(b,a[b],f));return this}if(2>d)return(d=this.node()["__on"+
a])&&d._;b=!1}return this.each(Ud(a,f,b))};var Cc=t.map({mouseenter:"mouseover",mouseleave:"mouseout"});Cc.forEach(function(a){"on"+a in ra&&Cc.remove(a)});var ob="onselectstart"in ra?null:w(za.style,"userSelect"),ug=0;t.mouse=function(a){return Dc(a,M())};var Ec=/WebKit/.test(da.navigator.userAgent)?-1:0;t.touch=function(a,b,d){if(3>arguments.length&&(d=b,b=M().changedTouches),b)for(var e,h=0,g=b.length;g>h;++h)if((e=b[h]).identifier===d)return Dc(a,e)};t.behavior.drag=function(){function a(){this.on("mousedown.drag",
h).on("touchstart.drag",g)}function b(a,f,h,g,k){return function(){var b,l=t.event.target,n=this.parentNode,v=d.of(this,arguments),p=0,q=a(),r=".drag"+(null==q?"":"-"+q),E=t.select(h()).on(g+r,function(){var a,d,e=f(n,q);e&&(a=e[0]-x[0],d=e[1]-x[1],p=p|a|d,x=e,v({type:"drag",x:e[0]+b[0],y:e[1]+b[1],dx:a,dy:d}))}).on(k+r,function(){f(n,q)&&(E.on(g+r,null).on(k+r,null),s(p&&t.event.target===l),v({type:"dragend"}))}),s=Fb(),x=f(n,q);e?(b=e.apply(this,arguments),b=[b.x-x[0],b.y-x[1]]):b=[0,0];v({type:"dragstart"})}}
var d=N(a,"drag","dragstart","dragend"),e=null,h=b(u,t.mouse,xg,"mousemove","mouseup"),g=b(vg,t.touch,wg,"touchmove","touchend");return a.origin=function(b){return arguments.length?(e=b,a):e},t.rebind(a,d,"on")};t.touches=function(a,b){return 2>arguments.length&&(b=M().touches),b?Ga(b).map(function(b){var f=Dc(a,b);return f.identifier=b.identifier,f}):[]};var F=Math.PI,ia=2*F,aa=F/2,A=1E-6,dd=A*A,D=F/180,P=180/F,mc=Math.SQRT2;t.interpolateZoom=function(a,b){function d(a){var b=a*x;if(s){a=Xd(t);var f=
g/(2*q),m,k=mc*b+t;m=((k=Math.exp(2*k))-1)/(k+1);m*=a;var p=t,k=((p=Math.exp(p))-1/p)/2,f=f*(m-k);return[e+f*l,h+f*n,g*a/Xd(mc*b+t)]}return[e+a*l,h+a*n,g*Math.exp(mc*b)]}var e=a[0],h=a[1],g=a[2],k=b[2],l=b[0]-e,n=b[1]-h,p=l*l+n*n,q=Math.sqrt(p),r=(k*k-g*g+4*p)/(4*g*q),p=(k*k-g*g-4*p)/(4*k*q),t=Math.log(Math.sqrt(r*r+1)-r),s=Math.log(Math.sqrt(p*p+1)-p)-t,x=(s||Math.log(k/g))/mc;return d.duration=1E3*x,d};t.behavior.zoom=function(){function a(a){a.on(z,n).on(ji+".zoom",q).on("dblclick.zoom",r).on(B,
p)}function b(a){return[(a[0]-y.x)/y.k,(a[1]-y.y)/y.k]}function d(a){y.k=Math.max(Ha[0],Math.min(Ha[1],a))}function e(a,b){b=[b[0]*y.k+y.x,b[1]*y.k+y.y];y.x+=a[0]-b[0];y.y+=a[1]-b[1]}function h(){G&&G.domain(S.range().map(function(a){return(a-y.x)/y.k}).map(S.invert));H&&H.domain(K.range().map(function(a){return(a-y.y)/y.k}).map(K.invert))}function g(a){a({type:"zoomstart"})}function k(a){h();a({type:"zoom",scale:y.k,translate:[y.x,y.y]})}function l(a){a({type:"zoomend"})}function n(){var a=this,
d=t.event.target,h=M.of(a,arguments),m=0,p=t.select(da).on(ke,function(){m=1;e(t.mouse(a),q);k(h)}).on(A,function(){p.on(ke,null).on(A,null);r(m&&t.event.target===d);l(h)}),q=b(t.mouse(a)),r=Fb();Eb.call(a);g(h)}function p(){function a(){var d=t.touches(s);return E=y.k,d.forEach(function(a){a.identifier in R&&(R[a.identifier]=b(a))}),d}function h(){var b=t.event.target;t.select(b).on(u,q).on(Pa,r);w.push(b);for(var b=t.event.changedTouches,f=0,g=b.length;g>f;++f)R[b[f].identifier]=null;g=a();f=Date.now();
1===g.length?(500>f-Y&&(b=g[0],g=R[b.identifier],d(2*y.k),e(b,g),L(),k(x)),Y=f):1<g.length&&(b=g[0],g=g[1],f=b[0]-g[0],b=b[1]-g[1],W=f*f+b*b)}function q(){for(var a,b,f,h,g=t.touches(s),l=0,n=g.length;n>l;++l,h=null)if(f=g[l],h=R[f.identifier]){if(b)break;a=f;b=h}if(h){var v=(v=f[0]-a[0])*v+(v=f[1]-a[1])*v,g=W&&Math.sqrt(v/W);a=[(a[0]+f[0])/2,(a[1]+f[1])/2];b=[(b[0]+h[0])/2,(b[1]+h[1])/2];d(g*E)}Y=null;e(a,b);k(x)}function r(){if(t.event.touches.length){for(var b=t.event.changedTouches,f=0,d=b.length;d>
f;++f)delete R[b[f].identifier];for(var e in R)return void a()}t.selectAll(w).on(K,null);G.on(z,n).on(B,p);H();l(x)}var E,s=this,x=M.of(s,arguments),R={},W=0,K=".zoom-"+t.event.changedTouches[0].identifier,u="touchmove"+K,Pa="touchend"+K,w=[],G=t.select(s),H=Fb();Eb.call(s);h();g(x);G.on(z,null).on(B,h)}function q(){var a=M.of(this,arguments);w?clearTimeout(w):(s=b(x=u||t.mouse(this)),Eb.call(this),g(a));w=setTimeout(function(){w=null;l(a)},50);L();d(Math.pow(2,.002*nc())*y.k);e(x,s);k(a)}function r(){var a=
M.of(this,arguments),h=t.mouse(this),n=b(h),p=Math.log(y.k)/Math.LN2;g(a);d(Math.pow(2,t.event.shiftKey?Math.ceil(p)-1:Math.floor(p)+1));e(h,n);k(a);l(a)}var s,x,u,w,Y,S,G,K,H,y={x:0,y:0,k:1},ta=[960,500],Ha=ag,z="mousedown.zoom",ke="mousemove.zoom",A="mouseup.zoom",B="touchstart.zoom",M=N(a,"zoomstart","zoom","zoomend");return a.event=function(a){a.each(function(){var a=M.of(this,arguments),b=y;Za?t.select(this).transition().each("start.zoom",function(){y=this.__chart__||{x:0,y:0,k:1};g(a)}).tween("zoom:zoom",
function(){var f=ta[0],d=f/2,e=ta[1]/2,h=t.interpolateZoom([(d-y.x)/y.k,(e-y.y)/y.k,f/y.k],[(d-b.x)/b.k,(e-b.y)/b.k,f/b.k]);return function(b){b=h(b);var g=f/b[2];this.__chart__=y={x:d-b[0]*g,y:e-b[1]*g,k:g};k(a)}}).each("end.zoom",function(){l(a)}):(this.__chart__=y,g(a),k(a),l(a))})},a.translate=function(b){return arguments.length?(y={x:+b[0],y:+b[1],k:y.k},h(),a):[y.x,y.y]},a.scale=function(b){return arguments.length?(y={x:y.x,y:y.y,k:+b},h(),a):y.k},a.scaleExtent=function(b){return arguments.length?
(Ha=null==b?ag:[+b[0],+b[1]],a):Ha},a.center=function(b){return arguments.length?(u=b&&[+b[0],+b[1]],a):u},a.size=function(b){return arguments.length?(ta=b&&[+b[0],+b[1]],a):ta},a.x=function(b){return arguments.length?(G=b,S=b.copy(),y={x:0,y:0,k:1},a):G},a.y=function(b){return arguments.length?(H=b,K=b.copy(),y={x:0,y:0,k:1},a):H},t.rebind(a,M,"on")};var nc,ag=[0,1/0],ji="onwheel"in ra?(nc=function(){return-t.event.deltaY*(t.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ra?(nc=function(){return t.event.wheelDelta},
"mousewheel"):(nc=function(){return-t.event.detail},"MozMousePixelScroll");t.color=Qa;Qa.prototype.toString=function(){return this.rgb()+""};t.hsl=sa;var Cd=sa.prototype=new Qa;Cd.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),new sa(this.h,this.s,this.l/a)};Cd.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new sa(this.h,this.s,a*this.l)};Cd.rgb=function(){return Gc(this.h,this.s,this.l)};t.hcl=na;var Dd=na.prototype=new Qa;Dd.brighter=function(a){return new na(this.h,
this.c,Math.min(100,this.l+oc*(arguments.length?a:1)))};Dd.darker=function(a){return new na(this.h,this.c,Math.max(0,this.l-oc*(arguments.length?a:1)))};Dd.rgb=function(){return Hc(this.h,this.c,this.l).rgb()};t.lab=oa;var oc=18,de=.95047,ee=1,fe=1.08883,Ed=oa.prototype=new Qa;Ed.brighter=function(a){return new oa(Math.min(100,this.l+oc*(arguments.length?a:1)),this.a,this.b)};Ed.darker=function(a){return new oa(Math.max(0,this.l-oc*(arguments.length?a:1)),this.a,this.b)};Ed.rgb=function(){return ce(this.l,
this.a,this.b)};t.rgb=ea;var pc=ea.prototype=new Qa;pc.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,d=this.g,e=this.b;return b||d||e?(b&&30>b&&(b=30),d&&30>d&&(d=30),e&&30>e&&(e=30),new ea(Math.min(255,b/a),Math.min(255,d/a),Math.min(255,e/a))):new ea(30,30,30)};pc.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ea(a*this.r,a*this.g,a*this.b)};pc.hsl=function(){return $d(this.r,this.g,this.b)};pc.toString=function(){return"#"+bb(this.r)+bb(this.g)+bb(this.b)};
var Hb=t.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,
tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Hb.forEach(function(a,b){Hb.set(a,new ea(b>>16,255&b>>8,255&b))});t.functor=J;t.xhr=Nc(Z);t.dsv=function(a,b){function d(a,g,m){3>arguments.length&&(m=g,g=null);var k=Ib(a,b,null==g?e:h(g),m);return k.row=function(a){return arguments.length?k.response(null==(g=a)?e:h(a)):g},k}function e(a){return d.parse(a.responseText)}function h(a){return function(b){return d.parse(b.responseText,
a)}}function g(b){return b.map(k).join(a)}function k(a){return l.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var l=new RegExp('["'+a+"\n]"),n=a.charCodeAt(0);return d.parse=function(a,b){var f;return d.parseRows(a,function(a,d){if(f)return f(a,d-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");f=b?function(a,f){return b(e(a),f)}:e})},d.parseRows=function(a,b){function f(){if(l>=k)return g;if(e)return e=!1,h;var b=l;if(34===a.charCodeAt(b)){for(var d=
b;d++<k;)if(34===a.charCodeAt(d)){if(34!==a.charCodeAt(d+1))break;++d}l=d+2;var m=a.charCodeAt(d+1);return 13===m?(e=!0,10===a.charCodeAt(d+2)&&++l):10===m&&(e=!0),a.slice(b+1,d).replace(/""/g,'"')}for(;k>l;){m=a.charCodeAt(l++);d=1;if(10===m)e=!0;else if(13===m)e=!0,10===a.charCodeAt(l)&&(++l,++d);else if(m!==n)continue;return a.slice(b,l-d)}return a.slice(b)}for(var d,e,h={},g={},m=[],k=a.length,l=0,v=0;(d=f())!==g;){for(var p=[];d!==h&&d!==g;)p.push(d),d=f();b&&!(p=b(p,v++))||m.push(p)}return m},
d.format=function(b){if(Array.isArray(b[0]))return d.formatRows(b);var f=new r,e=[];return b.forEach(function(a){for(var b in a)f.has(b)||e.push(f.add(b))}),[e.map(k).join(a)].concat(b.map(function(b){return e.map(function(a){return k(b[a])}).join(a)})).join("\n")},d.formatRows=function(a){return a.map(g).join("\n")},d};t.csv=t.dsv(",","text/csv");t.tsv=t.dsv("\t","text/tab-separated-values");var Lb,Mb,Kb,Jb,Aa,ie=da[w(da,"requestAnimationFrame")]||function(a){setTimeout(a,17)};t.timer=function(a,
b,d){var e=arguments.length;2>e&&(b=0);3>e&&(d=Date.now());e={c:a,t:d+b,f:!1,n:null};Mb?Mb.n=e:Lb=e;Mb=e;Kb||(Jb=clearTimeout(Jb),Kb=1,ie(Oc))};t.timer.flush=function(){ge();he()};t.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var ki="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,b){var d=Math.pow(10,3*I(8-b));return{scale:8<b?function(a){return a/d}:function(a){return a*d},symbol:a}});t.formatPrefix=function(a,b){var d=0;return a&&(0>a&&(a*=-1),
b&&(a=t.round(a,Pc(a,b))),d=1+Math.floor(1E-12+Math.log(a)/Math.LN10),d=Math.max(-24,Math.min(24,3*Math.floor((d-1)/3)))),ki[8+d/3]};var je=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ag=t.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},
f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=t.round(a,Pc(a,b))).toFixed(Math.max(0,Math.min(20,Pc(a*(1+1E-15),b))))}}),B=t.time={},ca=Date;Ba.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},
getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Fa.setUTCDate.apply(this._,arguments)},setDay:function(){Fa.setUTCDay.apply(this._,arguments)},setFullYear:function(){Fa.setUTCFullYear.apply(this._,arguments)},setHours:function(){Fa.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Fa.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Fa.setUTCMinutes.apply(this._,
arguments)},setMonth:function(){Fa.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Fa.setUTCSeconds.apply(this._,arguments)},setTime:function(){Fa.setTime.apply(this._,arguments)}};var Fa=Date.prototype;B.year=Ra(function(a){return a=B.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()});B.years=B.year.range;B.years.utc=B.year.utc.range;B.day=Ra(function(a){var b=new ca(2E3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),
b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1});B.days=B.day.range;B.days.utc=B.day.utc.range;B.dayOfYear=function(a){var b=B.year(a);return Math.floor((a-b-6E4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(a,b){b=7-b;var d=B[a]=Ra(function(a){return(a=B.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var d=
B.year(a).getDay();return Math.floor((B.dayOfYear(a)+(d+b)%7)/7)-(d!==b)});B[a+"s"]=d.range;B[a+"s"].utc=d.utc.range;B[a+"OfYear"]=function(a){var d=B.year(a).getDay();return Math.floor((B.dayOfYear(a)+(d+b)%7)/7)}});B.week=B.sunday;B.weeks=B.sunday.range;B.weeks.utc=B.sunday.utc.range;B.weekOfYear=B.sundayOfYear;var le={"-":"",_:" ",0:"0"},T=/^\s*\d+/,oe=/^%/;t.locale=function(a){return{numberFormat:zg(a),timeFormat:Cg(a)}};var bg=t.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],
dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});t.format=bg.numberFormat;t.geo={};Rc.prototype={s:0,t:0,add:function(a){pe(a,this.t,qc);pe(qc.s,this.s,this);this.s?
this.t+=qc.t:this.s=qc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var qc=new Rc;t.geo.stream=function(a,b){a&&cg.hasOwnProperty(a.type)?cg[a.type](a,b):Qb(a,b)};var cg={Feature:function(a,b){Qb(a.geometry,b)},FeatureCollection:function(a,b){for(var d=a.features,e=-1,h=d.length;++e<h;)Qb(d[e].geometry,b)}},qe={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates;b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var d=a.coordinates,e=-1,h=d.length;++e<
h;)a=d[e],b.point(a[0],a[1],a[2])},LineString:function(a,b){Sc(a.coordinates,b,0)},MultiLineString:function(a,b){for(var d=a.coordinates,e=-1,h=d.length;++e<h;)Sc(d[e],b,0)},Polygon:function(a,b){re(a.coordinates,b)},MultiPolygon:function(a,b){for(var d=a.coordinates,e=-1,h=d.length;++e<h;)re(d[e],b)},GeometryCollection:function(a,b){for(var d=a.geometries,e=-1,h=d.length;++e<h;)Qb(d[e],b)}};t.geo.area=function(a){return mb=0,t.geo.stream(a,ha),mb};var mb,Sa=new Rc,ha={sphere:function(){mb+=4*F},
point:u,lineStart:u,lineEnd:u,polygonStart:function(){Sa.reset();ha.lineStart=Rg},polygonEnd:function(){var a=2*Sa;mb+=0>a?4*F+a:a;ha.lineStart=ha.lineEnd=ha.point=u}};t.geo.bounds=function(){function a(a,b){K.push(H=[q=a,s=a]);r>b&&(r=b);b>x&&(x=b)}function b(f,d){var e=Ta([f*D,d*D]);if(S){var h=db(S,e),h=db([h[1],-h[0],0],h);Tb(h);var h=Ub(h),g=f-u,m=0<g?1:-1,k=h[0]*P*m,g=180<I(g);g^(k>m*u&&m*f>k)?(h=h[1]*P,h>x&&(x=h)):(k=(k+360)%360-180,g^(k>m*u&&m*f>k))?(h=-h[1]*P,r>h&&(r=h)):(r>d&&(r=d),d>x&&
(x=d));g?u>f?l(q,f)>l(q,s)&&(s=f):l(f,s)>l(q,s)&&(q=f):s>=q?(q>f&&(q=f),f>s&&(s=f)):f>u?l(q,f)>l(q,s)&&(s=f):l(f,s)>l(q,s)&&(q=f)}else a(f,d);S=e;u=f}function d(){z.point=b}function e(){H[0]=q;H[1]=s;z.point=a;S=null}function h(a,d){if(S){var e=a-u;G+=180<I(e)?e+(0<e?360:-360):e}else w=a,y=d;ha.point(a,d);b(a,d)}function g(){ha.lineStart()}function k(){h(w,y);ha.lineEnd();I(G)>A&&(q=-(s=180));H[0]=q;H[1]=s;S=null}function l(a,b){return 0>(b-=a)?b+360:b}function n(a,b){return a[0]-b[0]}function p(a,
b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var q,r,s,x,u,w,y,S,G,K,H,z={point:a,lineStart:d,lineEnd:e,polygonStart:function(){z.point=h;z.lineStart=g;z.lineEnd=k;G=0;ha.polygonStart()},polygonEnd:function(){ha.polygonEnd();z.point=a;z.lineStart=d;z.lineEnd=e;0>Sa?(q=-(s=180),r=-(x=90)):G>A?x=90:-A>G&&(r=-90);H[0]=q;H[1]=s}};return function(a){x=s=-(q=r=1/0);K=[];t.geo.stream(a,z);if(a=K.length){K.sort(n);for(var b,f=1,d=K[0],e=[d];a>f;++f)b=K[f],p(b[0],d)||p(b[1],d)?(l(d[0],b[1])>l(d[0],
d[1])&&(d[1]=b[1]),l(b[0],d[1])>l(d[0],d[1])&&(d[0]=b[0])):e.push(d=b);var h,g=-1/0;a=e.length-1;f=0;for(d=e[a];a>=f;d=b,++f)b=e[f],(h=l(d[1],b[0]))>g&&(g=h,q=b[0],s=d[1])}return K=H=null,1/0===q||1/0===r?[[0/0,0/0],[0/0,0/0]]:[[q,r],[s,x]]}}();t.geo.centroid=function(a){qb=eb=Ca=Da=ua=ka=la=ga=Ia=Ja=va=0;t.geo.stream(a,pa);a=Ia;var b=Ja,d=va,e=a*a+b*b+d*d;return dd>e&&(a=ka,b=la,d=ga,A>eb&&(a=Ca,b=Da,d=ua),e=a*a+b*b+d*d,dd>e)?[0/0,0/0]:[Math.atan2(b,a)*P,ab(d/Math.sqrt(e))*P]};var qb,eb,Ca,Da,ua,
ka,la,ga,Ia,Ja,va,pa={sphere:u,point:Uc,lineStart:se,lineEnd:te,polygonStart:function(){pa.lineStart=Sg},polygonEnd:function(){pa.lineStart=se}},Je=we(fb,function(a){var b,d=0/0,e=0/0,h=0/0;return{lineStart:function(){a.lineStart();b=1},point:function(g,k){var l=0<g?F:-F,n=I(g-d);if(I(n-F)<A)a.point(d,e=0<(e+k)/2?aa:-aa),a.point(h,e),a.lineEnd(),a.lineStart(),a.point(l,e),a.point(g,e),b=0;else if(h!==l&&n>=F){I(d-h)<A&&(d-=h*A);I(g-l)<A&&(g-=l*A);var n=d,p=e,q=g,r,t,s=Math.sin(n-q);e=I(s)>A?Math.atan((Math.sin(p)*
(t=Math.cos(k))*Math.sin(q)-Math.sin(k)*(r=Math.cos(p))*Math.sin(n))/(r*t*s)):(p+k)/2;a.point(h,e);a.lineEnd();a.lineStart();a.point(l,e);b=0}a.point(d=g,e=k);h=l},lineEnd:function(){a.lineEnd();d=e=0/0},clean:function(){return 2-b}}},function(a,b,d,e){null==a?(d*=aa,e.point(-F,d),e.point(0,d),e.point(F,d),e.point(F,0),e.point(F,-d),e.point(0,-d),e.point(-F,-d),e.point(-F,0),e.point(-F,d)):I(a[0]-b[0])>A?(a=a[0]<b[0]?F:-F,d=d*a/2,e.point(-a,d),e.point(0,d),e.point(a,d)):e.point(b[0],b[1])},[-F,-F/
2]),Xb=1E9;t.geo.clipExtent=function(){var a,b,d,e,h,g,k={stream:function(a){return h&&(h.valid=!1),h=g(a),h.valid=!0,h},extent:function(l){return arguments.length?(g=ze(a=+l[0][0],b=+l[0][1],d=+l[1][0],e=+l[1][1]),h&&(h.valid=!1,h=null),k):[[a,b],[d,e]]}};return k.extent([[0,0],[960,500]])};(t.geo.conicEqualArea=function(){return Wc(Be)}).raw=Be;t.geo.albers=function(){return t.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};t.geo.albersUsa=function(){function a(a){var g=
a[0];a=a[1];return b=null,d(g,a),b||(e(g,a),b)||h(g,a),b}var b,d,e,h,g=t.geo.albers(),k=t.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=t.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),n={point:function(a,d){b=[a,d]}};return a.invert=function(a){var b=g.scale(),f=g.translate(),d=(a[0]-f[0])/b,b=(a[1]-f[1])/b;return(.12<=b&&.234>b&&-.425<=d&&-.214>d?k:.166<=b&&.234>b&&-.214<=d&&-.115>d?l:g).invert(a)},a.stream=function(a){var b=g.stream(a),f=
k.stream(a),d=l.stream(a);return{point:function(a,e){b.point(a,e);f.point(a,e);d.point(a,e)},sphere:function(){b.sphere();f.sphere();d.sphere()},lineStart:function(){b.lineStart();f.lineStart();d.lineStart()},lineEnd:function(){b.lineEnd();f.lineEnd();d.lineEnd()},polygonStart:function(){b.polygonStart();f.polygonStart();d.polygonStart()},polygonEnd:function(){b.polygonEnd();f.polygonEnd();d.polygonEnd()}}},a.precision=function(b){return arguments.length?(g.precision(b),k.precision(b),l.precision(b),
a):g.precision()},a.scale=function(b){return arguments.length?(g.scale(b),k.scale(.35*b),l.scale(b),a.translate(g.translate())):g.scale()},a.translate=function(b){if(!arguments.length)return g.translate();var f=g.scale(),p=+b[0],q=+b[1];return d=g.translate(b).clipExtent([[p-.455*f,q-.238*f],[p+.455*f,q+.238*f]]).stream(n).point,e=k.translate([p-.307*f,q+.201*f]).clipExtent([[p-.425*f+A,q+.12*f+A],[p-.214*f-A,q+.234*f-A]]).stream(n).point,h=l.translate([p-.205*f,q+.212*f]).clipExtent([[p-.214*f+A,
q+.166*f+A],[p-.115*f-A,q+.234*f-A]]).stream(n).point,a},a.scale(1070)};var rc,Yb,sc,tc,uc,vc,Ka={point:u,lineStart:u,lineEnd:u,polygonStart:function(){Yb=0;Ka.lineStart=Wg},polygonEnd:function(){Ka.lineStart=Ka.lineEnd=Ka.point=u;rc+=I(Yb/2)}},li={point:function(a,b){sc>a&&(sc=a);a>uc&&(uc=a);tc>b&&(tc=b);b>vc&&(vc=b)},lineStart:u,lineEnd:u,polygonStart:u,polygonEnd:u},qa={point:Ua,lineStart:De,lineEnd:Ee,polygonStart:function(){qa.lineStart=Yg},polygonEnd:function(){qa.point=Ua;qa.lineStart=De;
qa.lineEnd=Ee}};t.geo.path=function(){function a(a){return a&&("function"==typeof k&&h.pointRadius(+k.apply(this,arguments)),g&&g.valid||(g=e(h)),t.geo.stream(a,g)),h.result()}var b,d,e,h,g,k=4.5;return a.area=function(a){return rc=0,t.geo.stream(a,e(Ka)),rc},a.centroid=function(a){return Ca=Da=ua=ka=la=ga=Ia=Ja=va=0,t.geo.stream(a,e(qa)),va?[Ia/va,Ja/va]:ga?[ka/ga,la/ga]:ua?[Ca/ua,Da/ua]:[0/0,0/0]},a.bounds=function(a){return uc=vc=-(sc=tc=1/0),t.geo.stream(a,e(li)),[[sc,tc],[uc,vc]]},a.projection=
function(d){return arguments.length?(e=(b=d)?d.stream||$g(d):Z,g=null,a):b},a.context=function(b){return arguments.length?(h=null==(d=b)?new Xg:new Zg(b),"function"!=typeof k&&h.pointRadius(k),g=null,a):d},a.pointRadius=function(b){return arguments.length?(k="function"==typeof b?b:(h.pointRadius(+b),+b),a):k},a.projection(t.geo.albersUsa()).context(null)};t.geo.transform=function(a){return{stream:function(b){b=new Ie(b);for(var d in a)b[d]=a[d];return b}}};Ie.prototype={point:function(a,b){this.stream.point(a,
b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};t.geo.projection=La;t.geo.projectionMutator=Xc;(t.geo.equirectangular=function(){return La(rb)}).raw=rb.invert=rb;t.geo.rotation=function(a){function b(f){return f=a(f[0]*D,f[1]*D),f[0]*=P,f[1]*=P,f}return a=Yc(a[0]%360*D,a[1]*D,2<a.length?a[2]*D:0),b.invert=function(b){return b=
a.invert(b[0]*D,b[1]*D),b[0]*=P,b[1]*=P,b},b};Ke.invert=rb;t.geo.circle=function(){function a(){var a="function"==typeof e?e.apply(this,arguments):e,b=Yc(-a[0]*D,-a[1]*D,0).invert,f=[];return d(null,null,1,{point:function(a,d){f.push(a=b(a,d));a[0]*=P;a[1]*=P}}),{type:"Polygon",coordinates:[f]}}var b,d,e=[0,0],h=6;return a.origin=function(b){return arguments.length?(e=b,a):e},a.angle=function(e){return arguments.length?(d=Vc((b=+e)*D,h*D),a):b},a.precision=function(e){return arguments.length?(d=Vc(b*
D,(h=+e)*D),a):h},a.angle(90)};t.geo.distance=function(a,b){var d,e=(b[0]-a[0])*D,h=a[1]*D,g=b[1]*D,k=Math.sin(e),e=Math.cos(e),l=Math.sin(h),h=Math.cos(h),n=Math.sin(g),g=Math.cos(g);return Math.atan2(Math.sqrt((d=g*k)*d+(d=h*n-l*g*e)*d),l*n+h*g*e)};t.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return t.range(Math.ceil(g/y)*y,h,y).map(s).concat(t.range(Math.ceil(p/S)*S,n,S).map(x)).concat(t.range(Math.ceil(e/u)*u,d,u).filter(function(a){return I(a%
y)>A}).map(q)).concat(t.range(Math.ceil(l/w)*w,k,w).filter(function(a){return I(a%S)>A}).map(r))}var d,e,h,g,k,l,n,p,q,r,s,x,u=10,w=u,y=90,S=360,G=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[s(g).concat(x(n).slice(1),s(h).reverse().slice(1),x(p).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?
(g=+b[0][0],h=+b[1][0],p=+b[0][1],n=+b[1][1],g>h&&(b=g,g=h,h=b),p>n&&(b=p,p=n,n=b),a.precision(G)):[[g,p],[h,n]]},a.minorExtent=function(b){return arguments.length?(e=+b[0][0],d=+b[1][0],l=+b[0][1],k=+b[1][1],e>d&&(b=e,e=d,d=b),l>k&&(b=l,l=k,k=b),a.precision(G)):[[e,l],[d,k]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(y=+b[0],S=+b[1],a):[y,S]},a.minorStep=function(b){return arguments.length?(u=+b[0],w=+b[1],
a):[u,w]},a.precision=function(b){return arguments.length?(G=+b,q=Pe(l,k,90),r=Qe(e,d,G),s=Pe(p,n,90),x=Qe(g,h,G),a):G},a.majorExtent([[-180,-90+A],[180,90-A]]).minorExtent([[-180,-80-A],[180,80+A]])};t.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||e.apply(this,arguments),d||h.apply(this,arguments)]}}var b,d,e=Zc,h=$c;return a.distance=function(){return t.geo.distance(b||e.apply(this,arguments),d||h.apply(this,arguments))},a.source=function(d){return arguments.length?
(e=d,b="function"==typeof d?null:d,a):e},a.target=function(b){return arguments.length?(h=b,d="function"==typeof b?null:b,a):h},a.precision=function(){return arguments.length?a:0},a};t.geo.interpolate=function(a,b){return ah(a[0]*D,a[1]*D,b[0]*D,b[1]*D)};t.geo.length=function(a){return wc=0,t.geo.stream(a,nb),wc};var wc,nb={sphere:u,point:u,lineStart:function(){function a(a,h){var g=Math.sin(h*=D),k=Math.cos(h),l=I((a*=D)-b),n=Math.cos(l);wc+=Math.atan2(Math.sqrt((l=k*Math.sin(l))*l+(l=e*g-d*k*n)*
l),d*g+e*k*n);b=a;d=g;e=k}var b,d,e;nb.point=function(h,g){b=h*D;d=Math.sin(g*=D);e=Math.cos(g);nb.point=a};nb.lineEnd=function(){nb.point=nb.lineEnd=u}},lineEnd:u,polygonStart:u,polygonEnd:u},dg=sb(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(t.geo.azimuthalEqualArea=function(){return La(dg)}).raw=dg;var eg=sb(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},Z);(t.geo.azimuthalEquidistant=function(){return La(eg)}).raw=eg;(t.geo.conicConformal=function(){return Wc(Re)}).raw=
Re;(t.geo.conicEquidistant=function(){return Wc(Se)}).raw=Se;var fg=sb(function(a){return 1/a},Math.atan);(t.geo.gnomonic=function(){return La(fg)}).raw=fg;Zb.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-aa]};(t.geo.mercator=function(){return Te(Zb)}).raw=Zb;var gg=sb(function(){return 1},Math.asin);(t.geo.orthographic=function(){return La(gg)}).raw=gg;var hg=sb(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(t.geo.stereographic=function(){return La(hg)}).raw=hg;ad.invert=
function(a,b){return[-b,2*Math.atan(Math.exp(a))-aa]};(t.geo.transverseMercator=function(){var a=Te(ad),b=a.center,d=a.rotate;return a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])},a.rotate=function(a){return a?d([a[0],a[1],2<a.length?a[2]+90:90]):(a=d(),[a[0],a[1],a[2]-90])},d([0,0,90])}).raw=ad;t.geom={};t.geom.hull=function(a){function b(a){if(3>a.length)return[];var f,h=J(d),g=J(e),k=a.length,l=[],n=[];for(f=0;k>f;f++)l.push([+h.call(this,a[f],f),+g.call(this,a[f],f),f]);l.sort(bh);
for(f=0;k>f;f++)n.push([l[f][0],-l[f][1]]);var h=Ue(l),n=Ue(n),g=n[0]===h[0],k=n[n.length-1]===h[h.length-1],p=[];for(f=h.length-1;0<=f;--f)p.push(a[l[h[f]][2]]);for(f=+g;f<n.length-k;++f)p.push(a[l[n[f]][2]]);return p}var d=gb,e=tb;return arguments.length?b(a):(b.x=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=a,b):e},b)};t.geom.polygon=function(a){return Db(a,xc),a};var xc=t.geom.polygon.prototype=[];xc.area=function(){for(var a,b=-1,d=this.length,e=this[d-
1],h=0;++b<d;)a=e,e=this[b],h+=a[1]*e[0]-a[0]*e[1];return.5*h};xc.centroid=function(a){var b,d,e=-1,h=this.length,g=0,k=0,l=this[h-1];for(arguments.length||(a=-1/(6*this.area()));++e<h;)b=l,l=this[e],d=b[0]*l[1]-l[0]*b[1],g+=(b[0]+l[0])*d,k+=(b[1]+l[1])*d;return[g*a,k*a]};xc.clip=function(a){for(var b,d,e,h,g,k,l=We(a),n=-1,p=this.length-We(this),q=this[p-1];++n<p;){b=a.slice();a.length=0;h=this[n];g=b[(e=b.length-l)-1];for(d=-1;++d<e;)k=b[d],bd(k,q,h)?(bd(g,q,h)||a.push(Ve(g,k,q,h)),a.push(k)):bd(g,
q,h)&&a.push(Ve(g,k,q,h)),g=k;l&&a.push(a[0]);q=h}return a};var kb,Va,ib,ed,ub,Ye=[],bf=[];$e.prototype.prepare=function(){for(var a,b=this.edges,d=b.length;d--;)a=b[d].edge,a.b&&a.a||b.splice(d,1);return b.sort(af),b.length};bc.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};fd.prototype={insert:function(a,b){var d,e,h;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=
b}else a.R=b;d=a}else this._?(a=df(this._),b.P=null,b.N=a,a.P=a.L=b,d=a):(b.P=b.N=null,this._=b,d=null);b.L=b.R=null;b.U=d;b.C=!0;for(a=b;d&&d.C;)e=d.U,d===e.L?(h=e.R,h&&h.C?(d.C=h.C=!1,e.C=!0,a=e):(a===d.R&&(wb(this,d),a=d,d=a.U),d.C=!1,e.C=!0,xb(this,e))):(h=e.L,h&&h.C?(d.C=h.C=!1,e.C=!0,a=e):(a===d.L&&(xb(this,d),a=d,d=a.U),d.C=!1,e.C=!0,wb(this,e))),d=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var b,d,e,h=a.U,g=a.L,k=a.R;if(d=g?k?df(k):g:k,h?h.L===a?h.L=
d:h.R=d:this._=d,g&&k?(e=d.C,d.C=a.C,d.L=g,g.U=d,d!==k?(h=d.U,d.U=a.U,a=d.R,h.L=a,d.R=k,k.U=d):(d.U=h,h=d,a=d.R)):(e=a.C,a=d),a&&(a.U=h),!e){if(a&&a.C)return a.C=!1,void 0;do{if(a===this._)break;if(a===h.L){if(b=h.R,b.C&&(b.C=!1,h.C=!0,wb(this,h),b=h.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,xb(this,b),b=h.R);b.C=h.C;h.C=b.R.C=!1;wb(this,h);a=this._;break}}else if(b=h.L,b.C&&(b.C=!1,h.C=!0,xb(this,h),b=h.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,wb(this,b),b=h.L);b.C=h.C;
h.C=b.L.C=!1;xb(this,h);a=this._;break}b.C=!0;a=h;h=h.U}while(!a.C);a&&(a.C=!1)}}};t.geom.voronoi=function(a){function b(a){var f=Array(a.length),e=l[0][0],h=l[0][1],g=l[1][0],k=l[1][1];return gd(d(a),l).cells.forEach(function(b,d){var m=b.edges,l=b.site;(f[d]=m.length?m.map(function(a){a=a.start();return[a.x,a.y]}):l.x>=e&&l.x<=g&&l.y>=h&&l.y<=k?[[e,k],[g,k],[g,h],[e,h]]:[]).point=a[d]}),f}function d(a){return a.map(function(a,b){return{x:Math.round(g(a,b)/A)*A,y:Math.round(k(a,b)/A)*A,i:b}})}var e=
gb,h=tb,g=e,k=h,l=yc;return a?b(a):(b.links=function(a){return gd(d(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})},b.triangles=function(a){var b=[];return gd(d(a)).cells.forEach(function(d,f){for(var e,h=d.site,g=d.edges.sort(af),m=-1,k=g.length,l=g[k-1].edge,l=l.l===h?l.r:l.l;++m<k;)e=l,l=g[m].edge,l=l.l===h?l.r:l.l,f<e.i&&f<l.i&&0>(h.x-l.x)*(e.y-h.y)-(h.x-e.x)*(l.y-h.y)&&b.push([a[f],a[e.i],a[l.i]])}),b},b.x=function(a){return arguments.length?
(g=J(e=a),b):e},b.y=function(a){return arguments.length?(k=J(h=a),b):h},b.clipExtent=function(a){return arguments.length?(l=null==a?yc:a,b):l===yc?null:l},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):l===yc?null:l&&l[1]},b)};var yc=[[-1E6,-1E6],[1E6,1E6]];t.geom.delaunay=function(a){return t.geom.voronoi().triangles(a)};t.geom.quadtree=function(a,b,d,e,h){function g(a){function p(a,b,d,f,e,h,g,m){if(!isNaN(d)&&!isNaN(f))if(a.leaf){var k=a.x,l=a.y;if(null!=k){if(!(.01>I(k-
d)+I(l-f))){var n=a.point;a.x=a.y=a.point=null;q(a,n,k,l,e,h,g,m)}q(a,b,d,f,e,h,g,m)}else a.x=d,a.y=f,a.point=b}else q(a,b,d,f,e,h,g,m)}function q(a,b,d,f,e,h,g,m){var k=.5*(e+g),l=.5*(h+m),n=d>=k,v=f>=l,r=(v<<1)+n;a.leaf=!1;a=a.nodes[r]||(a.nodes[r]=ef());n?e=k:g=k;v?h=l:m=l;p(a,b,d,f,e,h,g,m)}var v,r,t,s,x,u,w,y,H,z=J(l),N=J(n);if(null!=b)u=b,w=d,y=e,H=h;else if(y=H=-(u=w=1/0),r=[],t=[],x=a.length,k)for(s=0;x>s;++s)v=a[s],v.x<u&&(u=v.x),v.y<w&&(w=v.y),v.x>y&&(y=v.x),v.y>H&&(H=v.y),r.push(v.x),t.push(v.y);
else for(s=0;x>s;++s){var L=+z(v=a[s],s);v=+N(v,s);u>L&&(u=L);w>v&&(w=v);L>y&&(y=L);v>H&&(H=v);r.push(L);t.push(v)}L=y-u;v=H-w;L>v?H=w+L:y=u+v;var A=ef();if(A.add=function(a){p(A,a,+z(a,++s),+N(a,s),u,w,y,H)},A.visit=function(a){yb(a,A,u,w,y,H)},s=-1,null==b){for(;++s<x;)p(A,a[s],r[s],t[s],u,w,y,H);--s}else a.forEach(A.add);return r=t=a=v=null,A}var k,l=gb,n=tb;return(k=arguments.length)?(l=hh,n=ih,3===k&&(h=d,e=b,d=b=0),g(a)):(g.x=function(a){return arguments.length?(l=a,g):l},g.y=function(a){return arguments.length?
(n=a,g):n},g.extent=function(a){return arguments.length?(null==a?b=d=e=h=null:(b=+a[0][0],d=+a[0][1],e=+a[1][0],h=+a[1][1]),g):null==b?null:[[b,d],[e,h]]},g.size=function(a){return arguments.length?(null==a?b=d=e=h=null:(b=d=0,e=+a[0],h=+a[1]),g):null==b?null:[e-b,h-d]},g)};t.interpolateRgb=hd;t.interpolateObject=ff;t.interpolateNumber=Ea;t.interpolateString=gf;var id=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jd=new RegExp(id.source,"g");t.interpolate=Wa;t.interpolators=[function(a,b){var d=typeof b;
return("string"===d?Hb.has(b)||/^(#|rgb\(|hsl\()/.test(b)?hd:gf:b instanceof Qa?hd:Array.isArray(b)?cc:"object"===d&&isNaN(b)?ff:Ea)(a,b)}];t.interpolateArray=cc;var ig=function(){return Z},mi=t.map({linear:ig,poly:function(a){return function(b){return Math.pow(b,a)}},quad:function(){return kh},cubic:function(){return lh},sin:function(){return nh},exp:function(){return oh},circle:function(){return ph},elastic:function(a,b){var d;return 2>arguments.length&&(b=.45),arguments.length?d=b/ia*Math.asin(1/
a):(a=1,d=b/4),function(e){return 1+a*Math.pow(2,-10*e)*Math.sin((e-d)*ia/b)}},back:function(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}},bounce:function(){return qh}}),ni=t.map({"in":Z,out:hf,"in-out":jf,"out-in":function(a){return jf(hf(a))}});t.ease=function(a){var b=a.indexOf("-"),d=0<=b?a.slice(0,b):a,b=0<=b?a.slice(b+1):"in";return d=mi.get(d)||ig,b=ni.get(b)||Z,jh(b(d.apply(null,Wf.call(arguments,1))))};t.interpolateHcl=function(a,b){a=t.hcl(a);b=t.hcl(b);var d=a.h,e=a.c,h=
a.l,g=b.h-d,k=b.c-e,l=b.l-h;return isNaN(k)&&(k=0,e=isNaN(e)?b.c:e),isNaN(g)?(g=0,d=isNaN(d)?b.h:d):180<g?g-=360:-180>g&&(g+=360),function(a){return Hc(d+g*a,e+k*a,h+l*a)+""}};t.interpolateHsl=function(a,b){a=t.hsl(a);b=t.hsl(b);var d=a.h,e=a.s,h=a.l,g=b.h-d,k=b.s-e,l=b.l-h;return isNaN(k)&&(k=0,e=isNaN(e)?b.s:e),isNaN(g)?(g=0,d=isNaN(d)?b.h:d):180<g?g-=360:-180>g&&(g+=360),function(a){return Gc(d+g*a,e+k*a,h+l*a)+""}};t.interpolateLab=function(a,b){a=t.lab(a);b=t.lab(b);var d=a.l,e=a.a,h=a.b,g=b.l-
d,k=b.a-e,l=b.b-h;return function(a){return ce(d+g*a,e+k*a,h+l*a)+""}};t.interpolateRound=kf;t.transform=function(a){var b=ra.createElementNS(t.ns.prefix.svg,"g");return(t.transform=function(a){if(null!=a){b.setAttribute("transform",a);var d=b.transform.baseVal.consolidate()}return new lf(d?d.matrix:oi)})(a)};lf.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var oi={a:1,b:0,c:0,d:1,e:0,f:0};t.interpolateTransform=
nf;t.layout={};t.layout.bundle=function(){return function(a){for(var b=[],d=-1,e=a.length;++d<e;)b.push(th(a[d]));return b}};t.layout.chord=function(){function a(){var a,p,r,s,x,u={},w=[],y=t.range(g),ba=[];d=[];e=[];a=0;for(s=-1;++s<g;){p=0;for(x=-1;++x<g;)p+=h[s][x];w.push(p);ba.push(t.range(g));a+=p}k&&y.sort(function(a,b){return k(w[a],w[b])});l&&ba.forEach(function(a,b){a.sort(function(a,d){return l(h[b][a],h[b][d])})});a=(ia-q*g)/a;p=0;for(s=-1;++s<g;){r=p;for(x=-1;++x<g;){var H=y[s],z=ba[H][x],
N=h[H][z],L=p,A=p+=N*a;u[H+"-"+z]={index:H,subindex:z,startAngle:L,endAngle:A,value:N}}e[H]={index:H,startAngle:r,endAngle:p,value:(p-r)/a};p+=q}for(s=-1;++s<g;)for(x=s-1;++x<g;)a=u[s+"-"+x],p=u[x+"-"+s],(a.value||p.value)&&d.push(a.value<p.value?{source:p,target:a}:{source:a,target:p});n&&b()}function b(){d.sort(function(a,b){return n((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var d,e,h,g,k,l,n,p={},q=0;return p.matrix=function(a){return arguments.length?(g=(h=a)&&h.length,
d=e=null,p):h},p.padding=function(a){return arguments.length?(q=a,d=e=null,p):q},p.sortGroups=function(a){return arguments.length?(k=a,d=e=null,p):k},p.sortSubgroups=function(a){return arguments.length?(l=a,d=null,p):l},p.sortChords=function(a){return arguments.length?(n=a,d&&b(),p):n},p.chords=function(){return d||a(),d},p.groups=function(){return e||a(),e},p};t.layout.force=function(){function a(a){return function(b,d,f,e){if(b.point!==a){f=b.cx-a.x;var h=b.cy-a.y;d=e-d;e=f*f+h*h;if(e>d*d/y)return u>
e&&(d=b.charge/e,a.px-=f*d,a.py-=h*d),!0;b.point&&e&&u>e&&(d=b.pointCharge/e,a.px-=f*d,a.py-=h*d)}return!b.charge}}function b(a){a.px=t.event.x;a.py=t.event.y;l.resume()}var d,e,h,g,k,l={},n=t.dispatch("start","tick","end"),p=[1,1],q=.9,r=pi,s=qi,x=-30,u=ri,w=.1,y=.64,z=[],G=[];return l.tick=function(){if(.005>(e*=.99))return n.end({type:"end",alpha:e=0}),!0;var b,d,f,m,l,r,s,u,y=z.length,V=G.length;for(d=0;V>d;++d)f=G[d],b=f.source,m=f.target,s=m.x-b.x,u=m.y-b.y,(l=s*s+u*u)&&(l=e*g[d]*((l=Math.sqrt(l))-
h[d])/l,s*=l,u*=l,m.x-=s*(r=b.weight/(m.weight+b.weight)),m.y-=u*r,b.x+=s*(r=1-r),b.y+=u*r);if((r=e*w)&&(s=p[0]/2,u=p[1]/2,d=-1,r))for(;++d<y;)f=z[d],f.x+=(s-f.x)*r,f.y+=(u-f.y)*r;if(x)for(pf(b=t.geom.quadtree(z),e,k),d=-1;++d<y;)(f=z[d]).fixed||b.visit(a(f));for(d=-1;++d<y;)f=z[d],f.fixed?(f.x=f.px,f.y=f.py):(f.x-=(f.px-(f.px=f.x))*q,f.y-=(f.py-(f.py=f.y))*q);n.tick({type:"tick",alpha:e})},l.nodes=function(a){return arguments.length?(z=a,l):z},l.links=function(a){return arguments.length?(G=a,l):
G},l.size=function(a){return arguments.length?(p=a,l):p},l.linkDistance=function(a){return arguments.length?(r="function"==typeof a?a:+a,l):r},l.distance=l.linkDistance,l.linkStrength=function(a){return arguments.length?(s="function"==typeof a?a:+a,l):s},l.friction=function(a){return arguments.length?(q=+a,l):q},l.charge=function(a){return arguments.length?(x="function"==typeof a?a:+a,l):x},l.chargeDistance=function(a){return arguments.length?(u=a*a,l):Math.sqrt(u)},l.gravity=function(a){return arguments.length?
(w=+a,l):w},l.theta=function(a){return arguments.length?(y=a*a,l):Math.sqrt(y)},l.alpha=function(a){return arguments.length?(a=+a,e?e=0<a?a:0:0<a&&(n.start({type:"start",alpha:e=a}),t.timer(l.tick)),l):e},l.start=function(){function a(f,h){if(!d){d=Array(e);for(m=0;e>m;++m)d[m]=[];for(m=0;l>m;++m){var g=G[m];d[g.source.index].push(g.target);d[g.target.index].push(g.source)}}for(var k=d[b],m=-1,l=k.length;++m<l;)if(!isNaN(g=k[m][f]))return g;return Math.random()*h}var b,d,f,e=z.length,m=G.length,n=
p[0],q=p[1];for(b=0;e>b;++b)(f=z[b]).index=b,f.weight=0;for(b=0;m>b;++b)f=G[b],"number"==typeof f.source&&(f.source=z[f.source]),"number"==typeof f.target&&(f.target=z[f.target]),++f.source.weight,++f.target.weight;for(b=0;e>b;++b)f=z[b],isNaN(f.x)&&(f.x=a("x",n)),isNaN(f.y)&&(f.y=a("y",q)),isNaN(f.px)&&(f.px=f.x),isNaN(f.py)&&(f.py=f.y);if(h=[],"function"==typeof r)for(b=0;m>b;++b)h[b]=+r.call(this,G[b],b);else for(b=0;m>b;++b)h[b]=r;if(g=[],"function"==typeof s)for(b=0;m>b;++b)g[b]=+s.call(this,
G[b],b);else for(b=0;m>b;++b)g[b]=s;if(k=[],"function"==typeof x)for(b=0;e>b;++b)k[b]=+x.call(this,z[b],b);else for(b=0;e>b;++b)k[b]=x;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){return d||(d=t.behavior.drag().origin(Z).on("dragstart.force",uh).on("drag.force",b).on("dragend.force",vh)),arguments.length?(this.on("mouseover.force",wh).on("mouseout.force",xh).call(d),void 0):d},t.rebind(l,n,"on")};var pi=20,qi=1,ri=1/0;t.layout.hierarchy=
function(){function a(h){var g,k=[h],l=[];for(h.depth=0;null!=(g=k.pop());)if(l.push(g),(p=d.call(a,g,g.depth))&&(n=p.length)){for(var n,p,q;0<=--n;)k.push(q=p[n]),q.parent=g,q.depth=g.depth+1;e&&(g.value=0);g.children=p}else e&&(g.value=+e.call(a,g,g.depth)||0),delete g.children;return wa(h,function(a){var d,h;b&&(d=a.children)&&d.sort(b);e&&(h=a.parent)&&(h.value+=a.value)}),l}var b=Bh,d=zh,e=Ah;return a.sort=function(d){return arguments.length?(b=d,a):b},a.children=function(b){return arguments.length?
(d=b,a):d},a.value=function(b){return arguments.length?(e=b,a):e},a.revalue=function(b){return e&&(Ab(b,function(a){a.children&&(a.value=0)}),wa(b,function(b){var d;b.children||(b.value=+e.call(a,b,b.depth)||0);(d=b.parent)&&(d.value+=b.value)})),b},a};t.layout.partition=function(){function a(b,d,f,e){var h=b.children;if(b.x=d,b.y=b.depth*e,b.dx=f,b.dy=e,h&&(g=h.length)){var g,k,m=-1;for(f=b.value?f/b.value:0;++m<g;)a(k=h[m],d,b=k.value*f,e),d+=b}}function b(a){a=a.children;var d=0;if(a&&(e=a.length))for(var e,
h=-1;++h<e;)d=Math.max(d,b(a[h]));return 1+d}function d(g,k){var m=e.call(this,g,k);return a(m[0],0,h[0],h[1]/b(m[0])),m}var e=t.layout.hierarchy(),h=[1,1];return d.size=function(a){return arguments.length?(h=a,d):h},zb(d,e)};t.layout.pie=function(){function a(g){var k=g.map(function(d,e){return+b.call(a,d,e)}),l=+("function"==typeof e?e.apply(this,arguments):e),n=(("function"==typeof h?h.apply(this,arguments):h)-l)/t.sum(k),p=t.range(g.length);null!=d&&p.sort(d===jg?function(a,b){return k[b]-k[a]}:
function(a,b){return d(g[a],g[b])});var q=[];return p.forEach(function(a){var b;q[a]={data:g[a],value:b=k[a],startAngle:l,endAngle:l+=b*n}}),q}var b=Number,d=jg,e=0,h=ia;return a.value=function(d){return arguments.length?(b=d,a):b},a.sort=function(b){return arguments.length?(d=b,a):d},a.startAngle=function(b){return arguments.length?(e=b,a):e},a.endAngle=function(b){return arguments.length?(h=b,a):h},a};var jg={};t.layout.stack=function(){function a(l,n){var p=l.map(function(d,e){return b.call(a,
d,e)}),q=p.map(function(b){return b.map(function(b,d){return[g.call(a,b,d),k.call(a,b,d)]})}),r=d.call(a,q,n),p=t.permute(p,r),q=t.permute(q,r),s,x,u=e.call(a,q,n),w=p.length,y=p[0].length;for(s=0;y>s;++s)for(h.call(a,p[0][s],x=u[s],q[0][s][1]),r=1;w>r;++r)h.call(a,p[r][s],x+=q[r-1][s][1],q[r][s][1]);return l}var b=Z,d=kd,e=ld,h=Eh,g=Ch,k=Dh;return a.values=function(d){return arguments.length?(b=d,a):b},a.order=function(b){return arguments.length?(d="function"==typeof b?b:si.get(b)||kd,a):d},a.offset=
function(b){return arguments.length?(e="function"==typeof b?b:ti.get(b)||ld,a):e},a.x=function(b){return arguments.length?(g=b,a):g},a.y=function(b){return arguments.length?(k=b,a):k},a.out=function(b){return arguments.length?(h=b,a):h},a};var si=t.map({"inside-out":function(a){var b,d=a.length,e=a.map(Fh),h=a.map(Gh),g=t.range(d).sort(function(a,b){return e[a]-e[b]}),k=0,l=0,n=[],p=[];for(a=0;d>a;++a)b=g[a],l>k?(k+=h[b],n.push(b)):(l+=h[b],p.push(b));return p.reverse().concat(n)},reverse:function(a){return t.range(a.length).reverse()},
"default":kd}),ti=t.map({silhouette:function(a){var b,d,e,h=a.length,g=a[0].length,k=[],l=0,n=[];for(d=0;g>d;++d){for(e=b=0;h>b;b++)e+=a[b][d][1];e>l&&(l=e);k.push(e)}for(d=0;g>d;++d)n[d]=(l-k[d])/2;return n},wiggle:function(a){var b,d,e,h,g,k,l,n,p,q=a.length,r=a[0],s=r.length,t=[];t[0]=n=p=0;for(d=1;s>d;++d){for(h=b=0;q>b;++b)h+=a[b][d][1];g=b=0;for(l=r[d][0]-r[d-1][0];q>b;++b){e=0;for(k=(a[b][d][1]-a[b][d-1][1])/(2*l);b>e;++e)k+=(a[e][d][1]-a[e][d-1][1])/l;g+=k*a[b][d][1]}t[d]=n-=h?g/h*l:0;p>n&&
(p=n)}for(d=0;s>d;++d)t[d]-=p;return t},expand:function(a){var b,d,e,h=a.length,g=a[0].length,k=1/h,l=[];for(d=0;g>d;++d){for(e=b=0;h>b;b++)e+=a[b][d][1];if(e)for(b=0;h>b;b++)a[b][d][1]/=e;else for(b=0;h>b;b++)a[b][d][1]=k}for(d=0;g>d;++d)l[d]=0;return l},zero:ld});t.layout.histogram=function(){function a(a,g){var k,l,n=[],p=a.map(d,this),q=e.call(this,p,g),r=h.call(this,q,p,g);g=-1;for(var s=p.length,x=r.length-1,u=b?1:1/s;++g<x;)k=n[g]=[],k.dx=r[g+1]-(k.x=r[g]),k.y=0;if(0<x)for(g=-1;++g<s;)l=p[g],
l>=q[0]&&l<=q[1]&&(k=n[t.bisect(r,l,1,x)-1],k.y+=u,k.push(a[g]));return n}var b=!0,d=Number,e=Jh,h=Ih;return a.value=function(b){return arguments.length?(d=b,a):d},a.range=function(b){return arguments.length?(e=J(b),a):e},a.bins=function(b){return arguments.length?(h="number"==typeof b?function(a){return qf(a,b)}:J(b),a):h},a.frequency=function(d){return arguments.length?(b=!!d,a):b},a};t.layout.pack=function(){function a(a,g){var k=d.call(this,a,g),l=k[0],n=h[0],p=h[1],q=null==b?Math.sqrt:"function"==
typeof b?b:function(){return b};if(l.x=l.y=0,wa(l,function(a){a.r=+q(a.value)}),wa(l,tf),e){var r=e*(b?1:Math.max(2*l.r/n,2*l.r/p))/2;wa(l,function(a){a.r+=r});wa(l,tf);wa(l,function(a){a.r-=r})}return vf(l,n/2,p/2,b?1:1/Math.max(2*l.r/n,2*l.r/p)),k}var b,d=t.layout.hierarchy().sort(Kh),e=0,h=[1,1];return a.size=function(b){return arguments.length?(h=b,a):h},a.radius=function(d){return arguments.length?(b=null==d||"function"==typeof d?d:+d,a):b},a.padding=function(b){return arguments.length?(e=+b,
a):e},zb(a,d)};t.layout.tree=function(){function a(a,p){var q=g.call(this,a,p),r=q[0],s=b(r);if(wa(s,d),s.parent.m=-s.z,Ab(s,e),n)Ab(r,h);else{var t=r,x=r,u=r;Ab(r,function(a){a.x<t.x&&(t=a);a.x>x.x&&(x=a);a.depth>u.depth&&(u=a)});var w=k(t,x)/2-t.x,y=l[0]/(x.x+k(x,t)/2+w),z=l[1]/(u.depth||1);Ab(r,function(a){a.x=(a.x+w)*y;a.y=a.depth*z})}return q}function b(a){for(var d={A:null,children:[a]},e=[d];null!=(a=e.pop());)for(var f,h=a.children,g=0,k=h.length;k>g;++g)e.push((h[g]=f={_:h[g],parent:a,children:(f=
h[g].children)&&f.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=f);return d.children[0]}function d(a){var b=a.children,e=a.parent.children,f=a.i?e[a.i-1]:null;if(b.length){for(var h,g=0,l=0,m=a.children,n=m.length;0<=--n;)h=m[n],h.z+=g,h.m+=g,g+=h.s+(l+=h.c);b=(b[0].z+b[b.length-1].z)/2;f?(a.z=f.z+k(a._,f._),a.m=a.z-b):a.z=b}else f&&(a.z=f.z+k(a._,f._));b=a.parent;e=a.parent.A||e[0];if(f){for(var g=h=a,l=f,m=h.parent.children[0],n=h.m,p=g.m,q=l.m,r=m.m;l=od(l),h=nd(h),l&&h;){m=nd(m);g=
od(g);g.a=a;f=l.z+q-h.z-n+k(l._,h._);if(0<f){var s=l.a.parent===a.parent?l.a:e,t=a,v=f,x=v/(t.i-s.i);t.c-=x;t.s+=v;s.c+=x;t.z+=v;t.m+=v;n+=f;p+=f}q+=l.m;n+=h.m;r+=m.m;p+=g.m}l&&!od(g)&&(g.t=l,g.m+=q-p);h&&!nd(m)&&(m.t=h,m.m+=n-r,e=a)}b.A=e}function e(a){a._.x=a.z+a.parent.m;a.m+=a.parent.m}function h(a){a.x*=l[0];a.y=a.depth*l[1]}var g=t.layout.hierarchy().sort(null).value(null),k=wf,l=[1,1],n=null;return a.separation=function(b){return arguments.length?(k=b,a):k},a.size=function(b){return arguments.length?
(n=null==(l=b)?h:null,a):n?null:l},a.nodeSize=function(b){return arguments.length?(n=null==(l=b)?null:h,a):n?l:null},zb(a,g)};t.layout.cluster=function(){function a(a,g){var k,l=b.call(this,a,g),n=l[0],p=0;wa(n,function(a){var b=a.children;b&&b.length?(a.x=Oh(b),a.y=Nh(b)):(a.x=k?p+=d(a,k):0,a.y=0,k=a)});var q=xf(n),r=yf(n),s=q.x-d(q,r)/2,t=r.x+d(r,q)/2;return wa(n,h?function(a){a.x=(a.x-n.x)*e[0];a.y=(n.y-a.y)*e[1]}:function(a){a.x=(a.x-s)/(t-s)*e[0];a.y=(1-(n.y?a.y/n.y:1))*e[1]}),l}var b=t.layout.hierarchy().sort(null).value(null),
d=wf,e=[1,1],h=!1;return a.separation=function(b){return arguments.length?(d=b,a):d},a.size=function(b){return arguments.length?(h=null==(e=b),a):h?null:e},a.nodeSize=function(b){return arguments.length?(h=null!=(e=b),a):h?e:null},zb(a,b)};t.layout.treemap=function(){function a(a,b){for(var d,e,f=-1,h=a.length;++f<h;)e=(d=a[f]).value*(0>b?0:b),d.area=isNaN(e)||0>=e?0:e}function b(d){var h=d.children;if(h&&h.length){var g,k=q(d),l=[],m=h.slice(),n=1/0,p="slice"===s?k.dx:"dice"===s?k.dy:"slice-dice"===
s?1&d.depth?k.dy:k.dx:Math.min(k.dx,k.dy);a(m,k.dx*k.dy/d.value);for(l.area=0;0<(d=m.length);){l.push(d=m[d-1]);l.area+=d.area;var r;if(!(r="squarify"!==s)){d=p;g=void 0;var t=l.area;r=0;for(var v=1/0,u=-1,w=l.length;++u<w;)(g=l[u].area)&&(v>g&&(v=g),g>r&&(r=g));r=(g=(t*=t,d*=d,t?Math.max(d*r*x/t,t/(d*v*x)):1/0))<=n}r?(m.pop(),n=g):(l.area-=l.pop().area,e(l,p,k,!1),p=Math.min(k.dx,k.dy),l.length=l.area=0,n=1/0)}l.length&&(e(l,p,k,!0),l.length=l.area=0);h.forEach(b)}}function d(b){var f=b.children;
if(f&&f.length){var h=q(b),g=f.slice(),k=[];a(g,h.dx*h.dy/b.value);for(k.area=0;b=g.pop();)k.push(b),k.area+=b.area,null!=b.z&&(e(k,b.z?h.dx:h.dy,h,!g.length),k.length=k.area=0);f.forEach(d)}}function e(a,b,d,f){var h,g=-1,k=a.length,m=d.x,n=d.y,p=b?l(a.area/b):0;if(b==d.dx){for((f||p>d.dy)&&(p=d.dy);++g<k;)h=a[g],h.x=m,h.y=n,h.dy=p,m+=h.dx=Math.min(d.x+d.dx-m,p?l(h.area/p):0);h.z=!0;h.dx+=d.x+d.dx-m;d.y+=p;d.dy-=p}else{for((f||p>d.dx)&&(p=d.dx);++g<k;)h=a[g],h.x=m,h.y=n,h.dx=p,n+=h.dy=Math.min(d.y+
d.dy-n,p?l(h.area/p):0);h.z=!1;h.dy+=d.y+d.dy-n;d.x+=p;d.dx-=p}}function h(e){e=g||k(e);var l=e[0];return l.x=0,l.y=0,l.dx=n[0],l.dy=n[1],g&&k.revalue(l),a([l],l.dx*l.dy/l.value),(g?d:b)(l),r&&(g=e),e}var g,k=t.layout.hierarchy(),l=Math.round,n=[1,1],p=null,q=pd,r=!1,s="squarify",x=.5*(1+Math.sqrt(5));return h.size=function(a){return arguments.length?(n=a,h):n},h.padding=function(a){function b(d){var e=a.call(h,d,d.depth);return null==e?pd(d):zf(d,"number"==typeof e?[e,e,e,e]:e)}function d(b){return zf(b,
a)}if(!arguments.length)return p;var e;return q=null==(p=a)?pd:"function"==(e=typeof a)?b:"number"===e?(a=[a,a,a,a],d):d,h},h.round=function(a){return arguments.length?(l=a?Math.round:Number,h):l!=Number},h.sticky=function(a){return arguments.length?(r=a,g=null,h):r},h.ratio=function(a){return arguments.length?(x=a,h):x},h.mode=function(a){return arguments.length?(s=a+"",h):s},zb(h,k)};t.random={normal:function(a,b){var d=arguments.length;return 2>d&&(b=1),1>d&&(a=0),function(){var d,e;do d=2*Math.random()-
1,e=2*Math.random()-1,e=d*d+e*e;while(!e||1<e);return a+b*d*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=t.random.normal.apply(t,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=t.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,d=0;a>d;d++)b+=Math.random();return b}}};t.scale={};var Qh={floor:Z,ceil:Z};t.scale.linear=function(){return Bf([0,1],[0,1],Wa,!1)};var Th={s:1,g:1,p:1,r:1,e:1};t.scale.log=function(){return Cf(t.scale.linear().domain([0,
1]),10,!0,[1,10])};var Df=t.format(".0e"),Uh={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};t.scale.pow=function(){return Ef(t.scale.linear(),1,[0,1])};t.scale.sqrt=function(){return t.scale.pow().exponent(.5)};t.scale.ordinal=function(){return Ff([],{t:"range",a:[[]]})};t.scale.category10=function(){return t.scale.ordinal().range(ui)};t.scale.category20=function(){return t.scale.ordinal().range(vi)};t.scale.category20b=function(){return t.scale.ordinal().range(wi)};
t.scale.category20c=function(){return t.scale.ordinal().range(xi)};var ui=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Gb),vi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Gb),wi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,
10834324,13528509,14589654].map(Gb),xi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Gb);t.scale.quantile=function(){return Gf([],[])};t.scale.quantize=function(){return Hf(0,1,[0,1])};t.scale.threshold=function(){return If([.5],[0,1])};t.scale.identity=function(){return Jf([0,1])};t.svg={};t.svg.arc=function(){function a(){var a=b.apply(this,arguments),g=d.apply(this,
arguments),k=e.apply(this,arguments)+Xa,l=h.apply(this,arguments)+Xa,n=(k>l&&(n=k,k=l,l=n),l-k),p=F>n?"0":"1",q=Math.cos(k),k=Math.sin(k),r=Math.cos(l),l=Math.sin(l);return n>=yi?a?"M0,"+g+"A"+g+","+g+" 0 1,1 0,"+-g+"A"+g+","+g+" 0 1,1 0,"+g+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+g+"A"+g+","+g+" 0 1,1 0,"+-g+"A"+g+","+g+" 0 1,1 0,"+g+"Z":a?"M"+g*q+","+g*k+"A"+g+","+g+" 0 "+p+",1 "+g*r+","+g*l+"L"+a*r+","+a*l+"A"+a+","+a+" 0 "+p+",0 "+a*q+","+a*k+"Z":"M"+g*q+","+g*k+
"A"+g+","+g+" 0 "+p+",1 "+g*r+","+g*l+"L0,0Z"}var b=Vh,d=Wh,e=Kf,h=Lf;return a.innerRadius=function(d){return arguments.length?(b=J(d),a):b},a.outerRadius=function(b){return arguments.length?(d=J(b),a):d},a.startAngle=function(b){return arguments.length?(e=J(b),a):e},a.endAngle=function(b){return arguments.length?(h=J(b),a):h},a.centroid=function(){var a=(b.apply(this,arguments)+d.apply(this,arguments))/2,g=(e.apply(this,arguments)+h.apply(this,arguments))/2+Xa;return[Math.cos(g)*a,Math.sin(g)*a]},
a};var Xa=-aa,yi=ia-A;t.svg.line=function(){return Mf(Z)};var sd=t.map({linear:ja,"linear-closed":function(a){return ja(a)+"Z"},step:function(a){for(var b=0,d=a.length,e=a[0],h=[e[0],",",e[1]];++b<d;)h.push("H",(e[0]+(e=a[b])[0])/2,"V",e[1]);return 1<d&&h.push("H",e[0]),h.join("")},"step-before":td,"step-after":ud,basis:Nf,"basis-open":function(a){if(4>a.length)return ja(a);for(var b,d=[],e=-1,h=a.length,g=[0],k=[0];3>++e;)b=a[e],g.push(b[0]),k.push(b[1]);d.push(ma(Na,g)+","+ma(Na,k));for(--e;++e<
h;)b=a[e],g.shift(),g.push(b[0]),k.shift(),k.push(b[1]),wd(d,g,k);return d.join("")},"basis-closed":function(a){for(var b,d,e=-1,h=a.length,g=h+4,k=[],l=[];4>++e;)d=a[e%h],k.push(d[0]),l.push(d[1]);b=[ma(Na,k),",",ma(Na,l)];for(--e;++e<g;)d=a[e%h],k.shift(),k.push(d[0]),l.shift(),l.push(d[1]),wd(b,k,l);return b.join("")},bundle:function(a,b){var d=a.length-1;if(d)for(var e,h,g=a[0][0],k=a[0][1],l=a[d][0]-g,n=a[d][1]-k,p=-1;++p<=d;)e=a[p],h=p/d,e[0]=b*e[0]+(1-b)*(g+h*l),e[1]=b*e[1]+(1-b)*(k+h*n);return Nf(a)},
cardinal:function(a,b){return 3>a.length?ja(a):a[0]+hc(a,vd(a,b))},"cardinal-open":function(a,b){return 4>a.length?ja(a):a[1]+hc(a.slice(1,a.length-1),vd(a,b))},"cardinal-closed":function(a,b){return 3>a.length?ja(a):a[0]+hc((a.push(a[0]),a),vd([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=ja(a);else{var b=a[0],d,e,h,g,k=[],l;d=0;l=a.length-1;for(var n=[],p=a[1],q=n[0]=xd(a[0],p);++d<l;)n[d]=(q+(q=xd(p,p=a[d+1])))/2;l=(n[d]=q,n);n=-1;for(p=a.length-1;++n<p;)d=xd(a[n],
a[n+1]),I(d)<A?l[n]=l[n+1]=0:(e=l[n]/d,h=l[n+1]/d,g=e*e+h*h,9<g&&(g=3*d/Math.sqrt(g),l[n]=g*e,l[n+1]=g*h));for(n=-1;++n<=p;)g=(a[Math.min(p,n+1)][0]-a[Math.max(0,n-1)][0])/(6*(1+l[n]*l[n])),k.push([g||0,l[n]*g||0]);a=b+hc(a,k)}return a}});sd.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var Of=[0,2/3,1/3,0],Pf=[0,1/3,2/3,0],Na=[0,1/6,2/3,1/6];t.svg.line.radial=function(){var a=Mf(Qf);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a};td.reverse=ud;ud.reverse=td;t.svg.area=function(){return Rf(Z)};
t.svg.area.radial=function(){var a=Rf(Qf);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a};t.svg.chord=function(){function a(a,g){var k=b(this,e,a,g),l=b(this,h,a,g);return"M"+k.p0+d(k.r,k.p1,k.a1-k.a0)+(k.a0==l.a0&&k.a1==l.a1?"Q 0,0 "+k.p0:"Q 0,0 "+l.p0+d(l.r,l.p1,l.a1-l.a0)+("Q 0,0 "+k.p0))+"Z"}function b(a,d,e,f){var h=d.call(a,e,f);d=g.call(a,h,f);e=k.call(a,h,f)+Xa;
a=l.call(a,h,f)+Xa;return{r:d,a0:e,a1:a,p0:[d*Math.cos(e),d*Math.sin(e)],p1:[d*Math.cos(a),d*Math.sin(a)]}}function d(a,b,e){return"A"+a+","+a+" 0 "+ +(e>F)+",1 "+b}var e=Zc,h=$c,g=Xh,k=Kf,l=Lf;return a.radius=function(b){return arguments.length?(g=J(b),a):g},a.source=function(b){return arguments.length?(e=J(b),a):e},a.target=function(b){return arguments.length?(h=J(b),a):h},a.startAngle=function(b){return arguments.length?(k=J(b),a):k},a.endAngle=function(b){return arguments.length?(l=J(b),a):l},
a};t.svg.diagonal=function(){function a(a,h){var g=b.call(this,a,h),k=d.call(this,a,h),l=(g.y+k.y)/2,g=[g,{x:g.x,y:l},{x:k.x,y:l},k];return g=g.map(e),"M"+g[0]+"C"+g[1]+" "+g[2]+" "+g[3]}var b=Zc,d=$c,e=Sf;return a.source=function(d){return arguments.length?(b=J(d),a):b},a.target=function(b){return arguments.length?(d=J(b),a):d},a.projection=function(b){return arguments.length?(e=b,a):e},a};t.svg.diagonal.radial=function(){var a=t.svg.diagonal(),b=Sf,d=a.projection;return a.projection=function(a){return arguments.length?
d(Yh(b=a)):b},a};t.svg.symbol=function(){function a(a,e){return(kg.get(b.call(this,a,e))||Tf)(d.call(this,a,e))}var b=$h,d=Zh;return a.type=function(d){return arguments.length?(b=J(d),a):b},a.size=function(b){return arguments.length?(d=J(b),a):d},a};var kg=t.map({circle:Tf,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*lg));var b=a*lg;return"M0,"+-a+"L"+b+",0 0,"+a+
" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/zc);var b=a*zc/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/zc);var b=a*zc/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});t.svg.symbolTypes=kg.keys();var Za,lc,zc=Math.sqrt(3),lg=Math.tan(30*D),X=[],$f=0;X.call=O.call;X.empty=O.empty;X.node=O.node;X.size=O.size;t.transition=function(a){return arguments.length?
Za?a.transition():a:Zf.transition()};t.transition.prototype=X;X.select=function(a){var b,d,e,h=this.id,g=[];a=Q(a);for(var k=-1,l=this.length;++k<l;){g.push(b=[]);for(var n=this[k],p=-1,q=n.length;++p<q;)(e=n[p])&&(d=a.call(e,e.__data__,p,k))?("__data__"in e&&(d.__data__=e.__data__),ic(d,p,h,e.__transition__[h]),b.push(d)):b.push(null)}return Bb(g,h)};X.selectAll=function(a){var b,d,e,h,g=this.id,k=[];a=Id(a);for(var l=-1,n=this.length;++l<n;)for(var p=this[l],q=-1,r=p.length;++q<r;)if(b=p[q]){h=
b.__transition__[g];d=a.call(b,b.__data__,q,l);k.push(b=[]);for(var s=-1,t=d.length;++s<t;)(e=d[s])&&ic(e,s,g,h),b.push(e)}return Bb(k,g)};X.filter=function(a){var b,d,e,h=[];"function"!=typeof a&&(a=Qd(a));for(var g=0,k=this.length;k>g;g++){h.push(b=[]);d=this[g];for(var l=0,n=d.length;n>l;l++)(e=d[l])&&a.call(e,e.__data__,l,g)&&b.push(e)}return Bb(h,this.id)};X.tween=function(a,b){var d=this.id;return 2>arguments.length?this.node().__transition__[d].tween.get(a):xa(this,null==b?function(b){b.__transition__[d].tween.remove(a)}:
function(e){e.__transition__[d].tween.set(a,b)})};X.attr=function(a,b){function d(){this.removeAttribute(l)}function e(){this.removeAttributeNS(l.space,l.local)}function h(a){return null==a?d:(a+="",function(){var b,d=this.getAttribute(l);return d!==a&&(b=k(d,a),function(a){this.setAttribute(l,b(a))})})}function g(a){return null==a?e:(a+="",function(){var b,d=this.getAttributeNS(l.space,l.local);return d!==a&&(b=k(d,a),function(a){this.setAttributeNS(l.space,l.local,b(a))})})}if(2>arguments.length){for(b in a)this.attr(b,
a[b]);return this}var k="transform"==a?nf:Wa,l=t.ns.qualify(a);return yd(this,"attr."+a,b,l.local?g:h)};X.attrTween=function(a,b){function d(a,e){var g=b.call(this,a,e,this.getAttribute(h));return g&&function(a){this.setAttribute(h,g(a))}}function e(a,d){var g=b.call(this,a,d,this.getAttributeNS(h.space,h.local));return g&&function(a){this.setAttributeNS(h.space,h.local,g(a))}}var h=t.ns.qualify(a);return this.tween("attr."+a,h.local?e:d)};X.style=function(a,b,d){function e(){this.style.removeProperty(a)}
var h=arguments.length;if(3>h){if("string"!=typeof a){2>h&&(b="");for(d in a)this.style(d,a[d],b);return this}d=""}return yd(this,"style."+a,b,function(b){return null==b?e:(b+="",function(){var e,f=da.getComputedStyle(this,null).getPropertyValue(a);return f!==b&&(e=Wa(f,b),function(b){this.style.setProperty(a,e(b),d)})})})};X.styleTween=function(a,b,d){return 3>arguments.length&&(d=""),this.tween("style."+a,function(e,h){var g=b.call(this,e,h,da.getComputedStyle(this,null).getPropertyValue(a));return g&&
function(b){this.style.setProperty(a,g(b),d)}})};X.text=function(a){return yd(this,"text",a,ai)};X.remove=function(){return this.each("end.transition",function(){var a;2>this.__transition__.count&&(a=this.parentNode)&&a.removeChild(this)})};X.ease=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].ease:("function"!=typeof a&&(a=t.ease.apply(t,arguments)),xa(this,function(d){d.__transition__[b].ease=a}))};X.delay=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].delay:
xa(this,"function"==typeof a?function(d,e,h){d.__transition__[b].delay=+a.call(d,d.__data__,e,h)}:(a=+a,function(d){d.__transition__[b].delay=a}))};X.duration=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].duration:xa(this,"function"==typeof a?function(d,e,h){d.__transition__[b].duration=Math.max(1,a.call(d,d.__data__,e,h))}:(a=Math.max(1,a),function(d){d.__transition__[b].duration=a}))};X.each=function(a,b){var d=this.id;if(2>arguments.length){var e=lc,h=Za;Za=
d;xa(this,function(b,e,f){lc=b.__transition__[d];a.call(b,b.__data__,e,f)});lc=e;Za=h}else xa(this,function(e){e=e.__transition__[d];(e.event||(e.event=t.dispatch("start","end"))).on(a,b)});return this};X.transition=function(){for(var a,b,d,e,h=this.id,g=++$f,k=[],l=0,n=this.length;n>l;l++){k.push(a=[]);b=this[l];for(var p=0,q=b.length;q>p;p++)(d=b[p])&&(e=Object.create(d.__transition__[h]),e.delay+=e.duration,ic(d,p,g,e)),a.push(d)}return Bb(k,g)};t.svg.axis=function(){function a(a){a.each(function(){var a,
p=t.select(this),q=this.__chart__||d,r=this.__chart__=d.copy(),s=null==n?r.ticks?r.ticks.apply(r,l):r.domain():n,x=null==b?r.tickFormat?r.tickFormat.apply(r,l):Z:b,u=p.selectAll(".tick").data(s,r),s=u.enter().insert("g",".domain").attr("class","tick").style("opacity",A),w=t.transition(u.exit()).style("opacity",A).remove(),y=t.transition(u.order()).style("opacity",1),z=dc(r),p=p.selectAll(".domain").data([0]),p=(p.enter().append("path").attr("class","domain"),t.transition(p));s.append("line");s.append("text");
var N=s.select("line"),L=y.select("line"),x=u.select("text").text(x),u=s.select("text"),B=y.select("text");switch(e){case "bottom":a=Uf;N.attr("y2",h);u.attr("y",Math.max(h,0)+k);L.attr("x2",0).attr("y2",h);B.attr("x",0).attr("y",Math.max(h,0)+k);x.attr("dy",".71em").style("text-anchor","middle");p.attr("d","M"+z[0]+","+g+"V0H"+z[1]+"V"+g);break;case "top":a=Uf;N.attr("y2",-h);u.attr("y",-(Math.max(h,0)+k));L.attr("x2",0).attr("y2",-h);B.attr("x",0).attr("y",-(Math.max(h,0)+k));x.attr("dy","0em").style("text-anchor",
"middle");p.attr("d","M"+z[0]+","+-g+"V0H"+z[1]+"V"+-g);break;case "left":a=Vf;N.attr("x2",-h);u.attr("x",-(Math.max(h,0)+k));L.attr("x2",-h).attr("y2",0);B.attr("x",-(Math.max(h,0)+k)).attr("y",0);x.attr("dy",".32em").style("text-anchor","end");p.attr("d","M"+-g+","+z[0]+"H0V"+z[1]+"H"+-g);break;case "right":a=Vf,N.attr("x2",h),u.attr("x",Math.max(h,0)+k),L.attr("x2",h).attr("y2",0),B.attr("x",Math.max(h,0)+k).attr("y",0),x.attr("dy",".32em").style("text-anchor","start"),p.attr("d","M"+g+","+z[0]+
"H0V"+z[1]+"H"+g)}if(r.rangeBand)var M=r,ba=M.rangeBand()/2,q=r=function(a){return M(a)+ba};else q.rangeBand?q=r:w.call(a,r);s.call(a,q);y.call(a,r)})}var b,d=t.scale.linear(),e=mg,h=6,g=6,k=3,l=[10],n=null;return a.scale=function(b){return arguments.length?(d=b,a):d},a.orient=function(b){return arguments.length?(e=b in zi?b+"":mg,a):e},a.ticks=function(){return arguments.length?(l=arguments,a):l},a.tickValues=function(b){return arguments.length?(n=b,a):n},a.tickFormat=function(d){return arguments.length?
(b=d,a):b},a.tickSize=function(b){var d=arguments.length;return d?(h=+b,g=+arguments[d-1],a):h},a.innerTickSize=function(b){return arguments.length?(h=+b,a):h},a.outerTickSize=function(b){return arguments.length?(g=+b,a):g},a.tickPadding=function(b){return arguments.length?(k=+b,a):k},a.tickSubdivide=function(){return arguments.length&&a},a};var mg="bottom",zi={top:1,right:1,bottom:1,left:1};t.svg.brush=function(){function a(g){g.each(function(){var g=t.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color",
"rgba(0,0,0,0)").on("mousedown.brush",h).on("touchstart.brush",h),k=g.selectAll(".background").data([0]);k.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");g.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var l=g.selectAll(".resize").data(u,Z);l.exit().remove();l.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Ai[a]}).append("rect").attr("x",
function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");l.style("display",a.empty()?"none":null);var q,g=t.transition(g),k=t.transition(k);n&&(q=dc(n),k.attr("x",q[0]).attr("width",q[1]-q[0]),d(g));p&&(q=dc(p),k.attr("y",q[0]).attr("height",q[1]-q[0]),e(g));b(g)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+q[+/e$/.test(a)]+","+r[+/^s/.test(a)]+")"})}function d(a){a.select(".extent").attr("x",
q[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",q[1]-q[0])}function e(a){a.select(".extent").attr("y",r[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",r[1]-r[0])}function h(){function u(){var a=t.mouse(A),h=!1;N&&(a[0]+=N[0],a[1]+=N[1]);Q||(t.event.altKey?(z||(z=[(q[0]+q[1])/2,(r[0]+r[1])/2]),J[0]=q[+(a[0]<z[0])],J[1]=r[+(a[1]<z[1])]):z=null);F&&w(a,n,0)&&(d(E),h=!0);I&&w(a,p,1)&&(e(E),h=!0);h&&(b(E),M({type:"brush",mode:Q?"move":"resize"}))}function w(a,b,d){var e,h,f=dc(b);b=
f[0];var f=f[1],l=J[d],m=d?r:q,n=m[1]-m[0];return Q&&(b-=l,f-=n+l),e=(d?x:s)?Math.max(b,Math.min(f,a[d])):a[d],Q?h=(e+=l)+n:(z&&(l=Math.max(b,Math.min(f,2*z[d]-e))),e>l?(h=e,e=l):h=l),m[0]!=e||m[1]!=h?(d?k=null:g=null,m[0]=e,m[1]=h,!0):void 0}function y(){u();E.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);t.select("body").style("cursor",null);P.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",
null).on("keyup.brush",null);O();M({type:"brushend"})}var z,N,A=this,B=t.select(t.event.target),M=l.of(A,arguments),E=t.select(A),D=B.datum(),F=!/^(n|s)$/.test(D)&&n,I=!/^(e|w)$/.test(D)&&p,Q=B.classed("extent"),O=Fb(),J=t.mouse(A),P=t.select(da).on("keydown.brush",function(){32==t.event.keyCode&&(Q||(z=null,J[0]-=q[1],J[1]-=r[1],Q=2),L())}).on("keyup.brush",function(){32==t.event.keyCode&&2==Q&&(J[0]+=q[1],J[1]+=r[1],Q=0,L())});if(t.event.changedTouches?P.on("touchmove.brush",u).on("touchend.brush",
y):P.on("mousemove.brush",u).on("mouseup.brush",y),E.interrupt().selectAll("*").interrupt(),Q)J[0]=q[0]-J[0],J[1]=r[0]-J[1];else if(D){var T=+/w$/.test(D),D=+/^n/.test(D);N=[q[1-T]-J[0],r[1-D]-J[1]];J[0]=q[T];J[1]=r[D]}else t.event.altKey&&(z=J.slice());E.style("pointer-events","none").selectAll(".resize").style("display",null);t.select("body").style("cursor",B.style("cursor"));M({type:"brushstart"});u()}var g,k,l=N(a,"brushstart","brush","brushend"),n=null,p=null,q=[0,0],r=[0,0],s=!0,x=!0,u=Fd[0];
return a.event=function(a){a.each(function(){var a=l.of(this,arguments),b={x:q,y:r,i:g,j:k},d=this.__chart__||b;this.__chart__=b;Za?t.select(this).transition().each("start.brush",function(){g=d.i;k=d.j;q=d.x;r=d.y;a({type:"brushstart"})}).tween("brush:brush",function(){var d=cc(q,b.x),e=cc(r,b.y);return g=k=null,function(h){q=b.x=d(h);r=b.y=e(h);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){g=b.i;k=b.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),
a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(n=b,u=Fd[!n<<1|!p],a):n},a.y=function(b){return arguments.length?(p=b,u=Fd[!n<<1|!p],a):p},a.clamp=function(b){return arguments.length?(n&&p?(s=!!b[0],x=!!b[1]):n?s=!!b:p&&(x=!!b),a):n&&p?[s,x]:n?s:p?x:null},a.extent=function(b){var d,e,h,f,l;return arguments.length?(n&&(d=b[0],e=b[1],p&&(d=d[0],e=e[0]),g=[d,e],n.invert&&(d=n(d),e=n(e)),d>e&&(l=d,d=e,e=l),(d!=q[0]||e!=q[1])&&(q=[d,e])),p&&(h=b[0],f=b[1],
n&&(h=h[1],f=f[1]),k=[h,f],p.invert&&(h=p(h),f=p(f)),h>f&&(l=h,h=f,f=l),(h!=r[0]||f!=r[1])&&(r=[h,f])),a):(n&&(g?(d=g[0],e=g[1]):(d=q[0],e=q[1],n.invert&&(d=n.invert(d),e=n.invert(e)),d>e&&(l=d,d=e,e=l))),p&&(k?(h=k[0],f=k[1]):(h=r[0],f=r[1],p.invert&&(h=p.invert(h),f=p.invert(f)),h>f&&(l=h,h=f,f=l))),n&&p?[[d,h],[e,f]]:n?[d,e]:p&&[h,f])},a.clear=function(){return a.empty()||(q=[0,0],r=[0,0],g=k=null),a},a.empty=function(){return!!n&&q[0]==q[1]||!!p&&r[0]==r[1]},t.rebind(a,l,"on")};var Ai={n:"ns-resize",
e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Fd=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Gd=B.format=bg.timeFormat,ng=Gd.utc,og=ng("%Y-%m-%dT%H:%M:%S.%LZ");Gd.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?zd:og;zd.parse=function(a){a=new Date(a);return isNaN(a)?null:a};zd.toString=og.toString;B.second=Ra(function(a){return new ca(1E3*Math.floor(a/1E3))},function(a,b){a.setTime(a.getTime()+1E3*
Math.floor(b))},function(a){return a.getSeconds()});B.seconds=B.second.range;B.seconds.utc=B.second.utc.range;B.minute=Ra(function(a){return new ca(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});B.minutes=B.minute.range;B.minutes.utc=B.minute.utc.range;B.hour=Ra(function(a){var b=a.getTimezoneOffset()/60;return new ca(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},function(a){return a.getHours()});
B.hours=B.hour.range;B.hours.utc=B.hour.utc.range;B.month=Ra(function(a){return a=B.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});B.months=B.month.range;B.months.utc=B.month.utc.range;var jc=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Hd=[[B.second,1],[B.second,5],[B.second,15],[B.second,30],[B.minute,1],[B.minute,5],[B.minute,15],[B.minute,30],[B.hour,1],[B.hour,3],[B.hour,6],[B.hour,12],
[B.day,1],[B.day,2],[B.week,1],[B.month,1],[B.month,3],[B.year,1]],Bi=Gd.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",fb]]),bi={range:function(a,b,d){return t.range(Math.ceil(a/d)*d,+b,d).map(Ya)},floor:Z,ceil:Z};
Hd.year=B.year;B.scale=function(){return Ad(t.scale.linear(),Hd,Bi)};var pg=Hd.map(function(a){return[a[0].utc,a[1]]}),Ci=ng.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",fb]]);pg.year=B.year.utc;
B.scale.utc=function(){return Ad(t.scale.linear(),pg,Ci)};t.text=Nc(function(a){return a.responseText});t.json=function(a,b){return Ib(a,"application/json",ci,b)};t.html=function(a,b){return Ib(a,"text/html",di,b)};t.xml=Nc(function(a){return a.responseXML});"function"==typeof define&&define.amd?define(t):"object"==typeof module&&module.exports&&(module.exports=t);this.d3=t}();this.j$=this.jStat=function(e,k){function d(b,d){var h=b>d?b:d;return e.pow(10,17-~~(e.log(0<h?h:-h)*e.LOG10E))}function g(b){return"[object Function]"===s.call(b)}function b(b){return"number"==typeof b&&b===b}function h(){return new h._init(arguments)}function l(){return 0}function p(){return 1}function n(b,d){return b===d?1:0}var q=Array.prototype.concat,r=Array.prototype.slice,s=Object.prototype.toString,w=Array.isArray||function(b){return"[object Array]"===s.call(b)};h.fn=h.prototype;h._init=
function(d){var e;if(w(d[0]))if(w(d[0][0])){g(d[1])&&(d[0]=h.map(d[0],d[1]));for(e=0;e<d[0].length;e++)this[e]=d[0][e];this.length=d[0].length}else this[0]=g(d[1])?h.map(d[0],d[1]):d[0],this.length=1;else{if(b(d[0]))this[0]=h.seq.apply(null,d);else{if(d[0]instanceof h)return h(d[0].toArray());this[0]=[]}this.length=1}return this};h._init.prototype=h.prototype;h._init.constructor=h;h.utils={calcRdx:d,isArray:w,isFunction:g,isNumber:b,toVector:function(b){return q.apply([],b)}};h.extend=function(b){var d,
e;if(1===arguments.length){for(e in b)h[e]=b[e];return this}for(d=1;d<arguments.length;d++)for(e in arguments[d])b[e]=arguments[d][e];return b};h.rows=function(b){return b.length||1};h.cols=function(b){return b[0].length||1};h.dimensions=function(b){return{rows:h.rows(b),cols:h.cols(b)}};h.row=function(b,d){return b[d]};h.col=function(b,d){for(var e=Array(b.length),h=0;h<b.length;h++)e[h]=[b[h][d]];return e};h.diag=function(b){for(var d=h.rows(b),e=Array(d),g=0;g<d;g++)e[g]=[b[g][g]];return e};h.antidiag=
function(b){for(var d=h.rows(b)-1,e=Array(d),g=0;0<=d;d--,g++)e[g]=[b[g][d]];return e};h.transpose=function(b){var d=[],e,h,g,k,l;w(b[0])||(b=[b]);h=b.length;g=b[0].length;for(l=0;l<g;l++){e=Array(h);for(k=0;k<h;k++)e[k]=b[k][l];d.push(e)}return 1===d.length?d[0]:d};h.map=function(b,d,e){var h,g,k,l;w(b[0])||(b=[b]);h=b.length;g=b[0].length;k=e?b:Array(h);for(e=0;e<h;e++)for(k[e]||(k[e]=Array(g)),l=0;l<g;l++)k[e][l]=d(b[e][l],e,l);return 1===k.length?k[0]:k};h.alter=function(b,d){return h.map(b,d,
!0)};h.create=function(b,d,e){var h=Array(b),k,l;g(d)&&(e=d,d=b);for(k=0;k<b;k++)for(h[k]=Array(d),l=0;l<d;l++)h[k][l]=e(k,l);return h};h.zeros=function(d,e){return b(e)||(e=d),h.create(d,e,l)};h.ones=function(d,e){return b(e)||(e=d),h.create(d,e,p)};h.rand=function(d,g){return b(g)||(g=d),h.create(d,g,e.random)};h.identity=function(d,e){return b(e)||(e=d),h.create(d,e,n)};h.symmetric=function(b){var d=b.length,e,h;if(b.length!==b[0].length)return!1;for(e=0;e<d;e++)for(h=0;h<d;h++)if(b[h][e]!==b[e][h])return!1;
return!0};h.clear=function(b){return h.alter(b,l)};h.seq=function(b,e,h,k){g(k)||(k=!1);var l=[],n=d(b,e);h=(e*n-b*n)/((h-1)*n);var p=b,q;for(q=0;p<=e;q++,p=(b*n+h*n*q)/n)l.push(k?k(p,q):p);return l};var u=h.prototype;return u.length=0,u.push=Array.prototype.push,u.sort=Array.prototype.sort,u.splice=Array.prototype.splice,u.slice=Array.prototype.slice,u.toArray=function(){return 1<this.length?r.call(this):r.call(this)[0]},u.map=function(b,d){return h(h.map(this,b,d))},u.alter=function(b){return h.alter(this,
b),this},function(b){for(var d=0;d<b.length;d++)(function(b){u[b]=function(d){var e=this,g;return d?(setTimeout(function(){d.call(e,u[b].call(e))}),this):(g=h[b](this),w(g)?h(g):g)}})(b[d])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(b){for(var d=0;d<b.length;d++)(function(b){u[b]=function(d,e){var g=this;return e?(setTimeout(function(){e.call(g,u[b].call(g,d))}),this):h(h[b](this,d))}})(b[d])}(["row","col"]),function(b){for(var d=0;d<b.length;d++){var e=b[d];
u[e]=new Function("return jStat(jStat."+e+".apply(null, arguments));")}}(["create","zeros","ones","rand","identity"]),h}(Math);
(function(e,k){function d(b,d){return b-d}var g=e.utils.isFunction;e.sum=function(b){for(var d=0,e=b.length;0<=--e;)d+=b[e];return d};e.sumsqrd=function(b){for(var d=0,e=b.length;0<=--e;)d+=b[e]*b[e];return d};e.sumsqerr=function(b){for(var d=e.mean(b),g=0,k=b.length,q;0<=--k;)q=b[k]-d,g+=q*q;return g};e.product=function(b){for(var d=1,e=b.length;0<=--e;)d*=b[e];return d};e.min=function(b){for(var d=b[0],e=0;++e<b.length;)b[e]<d&&(d=b[e]);return d};e.max=function(b){for(var d=b[0],e=0;++e<b.length;)b[e]>
d&&(d=b[e]);return d};e.mean=function(b){return e.sum(b)/b.length};e.meansqerr=function(b){return e.sumsqerr(b)/b.length};e.geomean=function(b){return k.pow(e.product(b),1/b.length)};e.median=function(b){var e=b.length;b=b.slice().sort(d);return e&1?b[e/2|0]:(b[e/2-1]+b[e/2])/2};e.cumsum=function(b){var d=b.length,e=Array(d),g;e[0]=b[0];for(g=1;g<d;g++)e[g]=e[g-1]+b[g];return e};e.diff=function(b){var d=[],e=b.length,g;for(g=1;g<e;g++)d.push(b[g]-b[g-1]);return d};e.mode=function(b){var e=b.length;
b=b.slice().sort(d);var g=1,k=0,q=0,r=[],s;for(s=0;s<e;s++)b[s]===b[s+1]?g++:(g>k?(r=[b[s]],k=g,q=0):g===k&&(r.push(b[s]),q++),g=1);return 0===q?r[0]:r};e.range=function(b){return e.max(b)-e.min(b)};e.variance=function(b,d){return e.sumsqerr(b)/(b.length-(d?1:0))};e.stdev=function(b,d){return k.sqrt(e.variance(b,d))};e.meandev=function(b){var d=0,g=e.mean(b),n;for(n=b.length-1;0<=n;n--)d+=k.abs(b[n]-g);return d/b.length};e.meddev=function(b){var d=0,g=e.median(b),n;for(n=b.length-1;0<=n;n--)d+=k.abs(b[n]-
g);return d/b.length};e.coeffvar=function(b){return e.stdev(b)/e.mean(b)};e.quartiles=function(b){var e=b.length;b=b.slice().sort(d);return[b[k.round(e/4)-1],b[k.round(e/2)-1],b[k.round(3*e/4)-1]]};e.quantiles=function(b,e,g,n){var q=b.slice().sort(d),r=[e.length];b=b.length;var s,w,u;"undefined"==typeof g&&(g=.375);"undefined"==typeof n&&(n=.375);for(s=0;s<e.length;s++)w=e[s],u=g+w*(1-g-n),u=b*w+u,w=k.floor(k.max(1,k.min(u,b-1))),u=k.max(0,k.min(u-w,1)),r[s]=(1-u)*q[w-1]+u*q[w];return r};e.percentileOfScore=
function(b,d,e){var g=0,k=b.length,r=!1,s;"strict"===e&&(r=!0);for(s=0;s<k;s++)e=b[s],(r&&e<d||!r&&e<=d)&&g++;return g/k};e.covariance=function(b,d){var g=e.mean(b),k=e.mean(d),q=b.length,r=Array(q),s;for(s=0;s<q;s++)r[s]=(b[s]-g)*(d[s]-k);return e.sum(r)/(q-1)};e.corrcoeff=function(b,d){return e.covariance(b,d)/e.stdev(b,1)/e.stdev(d,1)};var b=e.prototype;b.cumsum=function(d,k){var p=[],n=0,q=this;g(d)&&(k=d,d=!1);if(k)return setTimeout(function(){k.call(q,b.cumsum.call(q,d))}),this;if(1<this.length){for(q=
!0===d?this:this.transpose();n<q.length;n++)p[n]=e.cumsum(q[n]);return p}return e.cumsum(this[0],d)};(function(d){for(var k=0;k<d.length;k++)(function(d){b[d]=function(h,k){var l=[],s=0,w=this;g(h)&&(k=h,h=!1);if(k)return setTimeout(function(){k.call(w,b[d].call(w,h))}),this;if(1<this.length){for(w=!0===h?this:this.transpose();s<w.length;s++)l[s]=e[d](w[s]);return!0===h?e[d](e.utils.toVector(l)):l}return e[d](this[0],h)}})(d[k])})("sum sumsqrd sumsqerr product min max mean meansqerr geomean median diff mode range variance stdev meandev meddev coeffvar quartiles".split(" "));
(function(d){for(var k=0;k<d.length;k++)(function(d){b[d]=function(){var h=[],k=0,l=this,s=Array.prototype.slice.call(arguments);if(g(s[s.length-1])){var w=s[s.length-1],u=s.slice(0,s.length-1);return setTimeout(function(){w.call(l,b[d].apply(l,u))}),this}w=void 0;if(1<this.length){for(l=l.transpose();k<l.length;k++)h[k]=e[d].apply(l,[l[k]].concat(s));return h}return e[d].apply(l,[this[0]].concat(s))}})(d[k])})(["quantiles","percentileOfScore"])})(this.jStat,Math);
(function(e,k){e.gammaln=function(d){var e=0,b=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5.395239384953E-6],h=1.000000000190015,l,p;p=(l=d)+5.5;for(p-=(d+.5)*k.log(p);6>e;e++)h+=b[e]/++l;return k.log(2.5066282746310007*h/d)-p};e.gammafn=function(d){var e=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],b=[-30.8402300119739,315.35062697960416,
-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],h=!1,l=0,p=0,n=0,q,r,s,w;if(0>=d)if(w=d%1+3.6E-16)h=(d&1?-1:1)*k.PI/k.sin(k.PI*w),d=1-d;else return Infinity;s=d;1>d?r=d++:r=(d-=l=(d|0)-1)-1;for(q=0;8>q;++q)n=(n+e[q])*r,p=p*r+b[q];w=n/p+1;if(s<d)w/=s;else if(s>d)for(q=0;q<l;++q)w*=d,d++;return h&&(w=h/w),w};e.gammap=function(d,g){var b=e.gammaln(d),h=d,l=1/d,p=l,n=g+1-d,q=1/1E-30,r=1/n,s=r,w=1,u=-~(8.5*k.log(1<=d?d:1/d)+.4*d+17);if(0>
g||0>=d)return NaN;if(g<d+1){for(;w<=u;w++)l+=p*=g/++h;return l*k.exp(-g+d*k.log(g)-b)}for(;w<=u;w++)h=-w*(w-d),n+=2,r=h*r+n,q=n+h/q,r=1/r,s=s*r*q;return 1-s*k.exp(-g+d*k.log(g)-b)};e.factorialln=function(d){return 0>d?NaN:e.gammaln(d+1)};e.factorial=function(d){return 0>d?NaN:e.gammafn(d+1)};e.combination=function(d,g){return 170<d||170<g?k.exp(e.combinationln(d,g)):e.factorial(d)/e.factorial(g)/e.factorial(d-g)};e.combinationln=function(d,g){return e.factorialln(d)-e.factorialln(g)-e.factorialln(d-
g)};e.permutation=function(d,g){return e.factorial(d)/e.factorial(d-g)};e.betafn=function(d,g){return 0>=d||0>=g?void 0:170<d+g?k.exp(e.betaln(d,g)):e.gammafn(d)*e.gammafn(g)/e.gammafn(d+g)};e.betaln=function(d,g){return e.gammaln(d)+e.gammaln(g)-e.gammaln(d+g)};e.betacf=function(d,e,b){var h=1,l=e+b,p=e+1,n=e-1,q=1,r=1-l*d/p,s,w,u;1E-30>k.abs(r)&&(r=1E-30);for(u=r=1/r;100>=h&&!(s=2*h,w=h*(b-h)*d/((n+s)*(e+s)),r=1+w*r,1E-30>k.abs(r)&&(r=1E-30),q=1+w/q,1E-30>k.abs(q)&&(q=1E-30),r=1/r,u=u*r*q,w=-(e+
h)*(l+h)*d/((e+s)*(p+s)),r=1+w*r,1E-30>k.abs(r)&&(r=1E-30),q=1+w/q,1E-30>k.abs(q)&&(q=1E-30),r=1/r,s=r*q,u*=s,3E-7>k.abs(s-1));h++);return u};e.gammapinv=function(d,g){var b=0,h=g-1,l=e.gammaln(g),p,n,q,r,s;if(1<=d)return k.max(100,g+100*k.sqrt(g));if(0>=d)return 0;for(1<g?(r=k.log(h),s=k.exp(h*(r-1)-l),n=.5>d?d:1-d,q=k.sqrt(-2*k.log(n)),p=(2.30753+.27061*q)/(1+q*(.99229+.04481*q))-q,.5>d&&(p=-p),p=k.max(.001,g*k.pow(1-1/(9*g)-p/(3*k.sqrt(g)),3))):(q=1-g*(.253+.12*g),d<q?p=k.pow(d/q,1/g):p=1-k.log(1-
(d-q)/(1-q)));12>b;b++){if(0>=p)return 0;n=e.gammap(g,p)-d;1<g?q=s*k.exp(-(p-h)+h*(k.log(p)-r)):q=k.exp(-p+h*k.log(p)-l);q=n/q;p-=q/=1-.5*k.min(1,q*((g-1)/p-1));0>=p&&(p=.5*(p+q));if(k.abs(q)<1E-8*p)break}return p};e.erf=function(d){var e=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-9.46595344482036E-4,3.66839497852761E-4,4.2523324806907E-5,-2.0278578112534E-5,-1.624290004647E-6,1.30365583558E-6,1.5626441722E-8,-8.5238095915E-8,6.529054439E-9,5.059343495E-9,-9.91364156E-10,
-2.27365122E-10,9.6467911E-11,2.394038E-12,-6.886027E-12,8.94487E-13,3.13092E-13,-1.12708E-13,3.81E-16,7.106E-15,-1.523E-15,-9.4E-17,1.21E-16,-2.8E-17],b=e.length-1,h=!1,l=0,p=0,n,q,r,s;0>d&&(d=-d,h=!0);n=2/(2+d);for(q=4*n-2;0<b;b--)r=l,l=q*l-p+e[b],p=r;return s=n*k.exp(-d*d+.5*(e[0]+q*l)-p),h?s-1:1-s};e.erfc=function(d){return 1-e.erf(d)};e.erfcinv=function(d){var g=0,b,h,l;if(2<=d)return-100;if(0>=d)return 100;l=1>d?d:2-d;b=k.sqrt(-2*k.log(l/2));for(b=-.70711*((2.30753+.27061*b)/(1+b*(.99229+.04481*
b))-b);2>g;g++)h=e.erfc(b)-l,b+=h/(1.1283791670955126*k.exp(-b*b)-b*h);return 1>d?b:-b};e.ibetainv=function(d,g,b){var h=g-1,l=b-1,p=0,n,q,r,s,w,u,x,y,L;if(0>=d)return 0;if(1<=d)return 1;1<=g&&1<=b?(r=.5>d?d:1-d,s=k.sqrt(-2*k.log(r)),u=(2.30753+.27061*s)/(1+s*(.99229+.04481*s))-s,.5>d&&(u=-u),x=(u*u-3)/6,y=2/(1/(2*g-1)+1/(2*b-1)),L=u*k.sqrt(x+y)/y-(1/(2*b-1)-1/(2*g-1))*(x+5/6-2/(3*y)),u=g/(g+b*k.exp(2*L))):(n=k.log(g/(g+b)),q=k.log(b/(g+b)),s=k.exp(g*n)/g,w=k.exp(b*q)/b,L=s+w,d<s/L?u=k.pow(g*L*d,
1/g):u=1-k.pow(b*L*(1-d),1/b));for(n=-e.gammaln(g)-e.gammaln(b)+e.gammaln(g+b);10>p&&0!==u&&1!==u&&!(w=e.ibeta(u,g,b)-d,s=k.exp(h*k.log(u)+l*k.log(1-u)+n),w/=s,u-=s=w/(1-.5*k.min(1,w*(h/u-l/(1-u)))),0>=u&&(u=.5*(u+s)),1<=u&&(u=.5*(u+s+1)),k.abs(s)<1E-8*u&&0<p);p++);return u};e.ibeta=function(d,g,b){var h=0===d||1===d?0:k.exp(e.gammaln(g+b)-e.gammaln(g)-e.gammaln(b)+g*k.log(d)+b*k.log(1-d));return 0>d||1<d?!1:d<(g+1)/(g+b+2)?h*e.betacf(d,g,b)/g:1-h*e.betacf(1-d,b,g)/b};e.randn=function(d,g){var b,
h,l,p;g||(g=d);if(d)return e.create(d,g,function(){return e.randn()});do b=k.random(),h=1.7156*(k.random()-.5),l=b-.449871,p=k.abs(h)+.386595,l=l*l+p*(.196*p-.25472*l);while(.27597<l&&(.27846<l||h*h>-4*k.log(b)*b*b));return h/b};e.randg=function(d,g,b){var h=d,l,p,n;b||(b=g);d||(d=1);if(g)return l=e.zeros(g,b),l.alter(function(){return e.randg(d)}),l;1>d&&(d+=1);g=d-1/3;b=1/k.sqrt(9*g);do{do n=e.randn(),p=1+b*n;while(0>=p);p*=p*p;l=k.random()}while(l>1-.331*k.pow(n,4)&&k.log(l)>.5*n*n+g*(1-p+k.log(p)));
if(d==h)return g*p;do l=k.random();while(0===l);return k.pow(l,1/h)*g*p};(function(d){for(var g=0;g<d.length;g++)(function(b){e.fn[b]=function(){return e(e.map(this,function(d){return e[b](d)}))}})(d[g])})(["gammaln","gammafn","factorial","factorialln"]);(function(d){for(var g=0;g<d.length;g++)(function(b){e.fn[b]=function(){return e(e[b].apply(null,arguments))}})(d[g])})(["randn"])})(this.jStat,Math);
(function(e,k){(function(d){for(var g=0;g<d.length;g++)(function(b){e[b]=function(b,d,e){return this instanceof arguments.callee?(this._a=b,this._b=d,this._c=e,this):new arguments.callee(b,d,e)};e.fn[b]=function(d,g,k){d=e[b](d,g,k);return d.data=this,d};e[b].prototype.sample=function(d){var g=this._a,k=this._b,n=this._c;return d?e.alter(d,function(){return e[b].sample(g,k,n)}):e[b].sample(g,k,n)};(function(d){for(var g=0;g<d.length;g++)(function(d){e[b].prototype[d]=function(h){var g=this._a,k=this._b,
l=this._c;return!h&&0!==h&&(h=this.data),"number"!=typeof h?e.fn.map.call(h,function(h){return e[b][d](h,g,k,l)}):e[b][d](h,g,k,l)}})(d[g])})(["pdf","cdf","inv"]);(function(d){for(var g=0;g<d.length;g++)(function(d){e[b].prototype[d]=function(){return e[b][d](this._a,this._b,this._c)}})(d[g])})(["mean","median","mode","variance"])})(d[g])})("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy lognormal normal pareto studentt weibull uniform  binomial negbin hypgeom poisson triangular".split(" "));
e.extend(e.beta,{pdf:function(d,g,b){return 1<d||0>d?0:1==g&&1==b?1:512>g||512>b?k.pow(d,g-1)*k.pow(1-d,b-1)/e.betafn(g,b):k.exp((g-1)*k.log(d)+(b-1)*k.log(1-d)-e.betaln(g,b))},cdf:function(d,g,b){return 1<d||0>d?1*(1<d):e.ibeta(d,g,b)},inv:function(d,g,b){return e.ibetainv(d,g,b)},mean:function(d,e){return d/(d+e)},median:function(d,e){throw Error("median not yet implemented");},mode:function(d,e){return d*e/(k.pow(d+e,2)*(d+e+1))},sample:function(d,g){var b=e.randg(d);return b/(b+e.randg(g))},variance:function(d,
e){return d*e/(k.pow(d+e,2)*(d+e+1))}});e.extend(e.centralF,{pdf:function(d,g,b){return 0>d?void 0:k.sqrt(k.pow(g*d,g)*k.pow(b,b)/k.pow(g*d+b,g+b))/(d*e.betafn(g/2,b/2))},cdf:function(d,g,b){return e.ibeta(g*d/(g*d+b),g/2,b/2)},inv:function(d,g,b){return b/(g*(1/e.ibetainv(d,g/2,b/2)-1))},mean:function(d,e){return 2<e?e/(e-2):void 0},mode:function(d,e){return 2<d?e*(d-2)/(d*(e+2)):void 0},sample:function(d,g){var b=2*e.randg(d/2),h=2*e.randg(g/2);return b/d/(h/g)},variance:function(d,e){return 4>=
e?void 0:2*e*e*(d+e-2)/(d*(e-2)*(e-2)*(e-4))}});e.extend(e.cauchy,{pdf:function(d,e,b){return b/(k.pow(d-e,2)+k.pow(b,2))/k.PI},cdf:function(d,e,b){return k.atan((d-e)/b)/k.PI+.5},inv:function(d,e,b){return e+b*k.tan(k.PI*(d-.5))},median:function(d,e){return d},mode:function(d,e){return d},sample:function(d,g){return e.randn()*k.sqrt(1/(2*e.randg(.5)))*g+d}});e.extend(e.chisquare,{pdf:function(d,g){return k.exp((g/2-1)*k.log(d)-d/2-g/2*k.log(2)-e.gammaln(g/2))},cdf:function(d,g){return e.gammap(g/
2,d/2)},inv:function(d,g){return 2*e.gammapinv(d,.5*g)},mean:function(d){return d},median:function(d){return d*k.pow(1-2/(9*d),3)},mode:function(d){return 0<d-2?d-2:0},sample:function(d){return 2*e.randg(d/2)},variance:function(d){return 2*d}});e.extend(e.exponential,{pdf:function(d,e){return 0>d?0:e*k.exp(-e*d)},cdf:function(d,e){return 0>d?0:1-k.exp(-e*d)},inv:function(d,e){return-k.log(1-d)/e},mean:function(d){return 1/d},median:function(d){return 1/d*k.log(2)},mode:function(d){return 0},sample:function(d){return-1/
d*k.log(k.random())},variance:function(d){return k.pow(d,-2)}});e.extend(e.gamma,{pdf:function(d,g,b){return k.exp((g-1)*k.log(d)-d/b-e.gammaln(g)-g*k.log(b))},cdf:function(d,g,b){return e.gammap(g,d/b)},inv:function(d,g,b){return e.gammapinv(d,g)*b},mean:function(d,e){return d*e},mode:function(d,e){return 1<d?(d-1)*e:void 0},sample:function(d,g){return e.randg(d)*g},variance:function(d,e){return d*e*e}});e.extend(e.invgamma,{pdf:function(d,g,b){return k.exp(-(g+1)*k.log(d)-b/d-e.gammaln(g)+g*k.log(b))},
cdf:function(d,g,b){return 1-e.gammap(g,b/d)},inv:function(d,g,b){return b/e.gammapinv(1-d,g)},mean:function(d,e){return 1<d?e/(d-1):void 0},mode:function(d,e){return e/(d+1)},sample:function(d,g){return g/e.randg(d)},variance:function(d,e){return 2>=d?void 0:e*e/((d-1)*(d-1)*(d-2))}});e.extend(e.kumaraswamy,{pdf:function(d,e,b){return k.exp(k.log(e)+k.log(b)+(e-1)*k.log(d)+(b-1)*k.log(1-k.pow(d,e)))},cdf:function(d,e,b){return 1-k.pow(1-k.pow(d,e),b)},mean:function(d,g){return g*e.gammafn(1+1/d)*
e.gammafn(g)/e.gammafn(1+1/d+g)},median:function(d,e){return k.pow(1-k.pow(2,-1/e),1/d)},mode:function(d,e){return 1<=d&&1<=e&&1!==d&&1!==e?k.pow((d-1)/(d*e-1),1/d):void 0},variance:function(d,e){throw Error("variance not yet implemented");}});e.extend(e.lognormal,{pdf:function(d,e,b){return k.exp(-k.log(d)-.5*k.log(2*k.PI)-k.log(b)-k.pow(k.log(d)-e,2)/(2*b*b))},cdf:function(d,g,b){return.5+.5*e.erf((k.log(d)-g)/k.sqrt(2*b*b))},inv:function(d,g,b){return k.exp(-1.4142135623730951*b*e.erfcinv(2*d)+
g)},mean:function(d,e){return k.exp(d+e*e/2)},median:function(d,e){return k.exp(d)},mode:function(d,e){return k.exp(d-e*e)},sample:function(d,g){return k.exp(e.randn()*g+d)},variance:function(d,e){return(k.exp(e*e)-1)*k.exp(2*d+e*e)}});e.extend(e.normal,{pdf:function(d,e,b){return k.exp(-.5*k.log(2*k.PI)-k.log(b)-k.pow(d-e,2)/(2*b*b))},cdf:function(d,g,b){return.5*(1+e.erf((d-g)/k.sqrt(2*b*b)))},inv:function(d,g,b){return-1.4142135623730951*b*e.erfcinv(2*d)+g},mean:function(d,e){return d},median:function(d,
e){return d},mode:function(d,e){return d},sample:function(d,g){return e.randn()*g+d},variance:function(d,e){return e*e}});e.extend(e.pareto,{pdf:function(d,e,b){return d<=e?void 0:b*k.pow(e,b)/k.pow(d,b+1)},cdf:function(d,e,b){return 1-k.pow(e/d,b)},mean:function(d,e){return 1>=e?void 0:e*k.pow(d,e)/(e-1)},median:function(d,e){return d*e*k.SQRT2},mode:function(d,e){return d},variance:function(d,e){return 2>=e?void 0:d*d*e/(k.pow(e-1,2)*(e-2))}});e.extend(e.studentt,{pdf:function(d,g){return e.gammafn((g+
1)/2)/(k.sqrt(g*k.PI)*e.gammafn(g/2))*k.pow(1+d*d/g,-((g+1)/2))},cdf:function(d,g){var b=g/2;return e.ibeta((d+k.sqrt(d*d+g))/(2*k.sqrt(d*d+g)),b,b)},inv:function(d,g){var b=e.ibetainv(2*k.min(d,1-d),.5*g,.5);return b=k.sqrt(g*(1-b)/b),.5<d?b:-b},mean:function(d){return 1<d?0:void 0},median:function(d){return 0},mode:function(d){return 0},sample:function(d){return e.randn()*k.sqrt(d/(2*e.randg(d/2)))},variance:function(d){return 2<d?d/(d-2):1<d?Infinity:void 0}});e.extend(e.weibull,{pdf:function(d,
e,b){return 0>d?0:b/e*k.pow(d/e,b-1)*k.exp(-k.pow(d/e,b))},cdf:function(d,e,b){return 0>d?0:1-k.exp(-k.pow(d/e,b))},inv:function(d,e,b){return e*k.pow(-k.log(1-d),1/b)},mean:function(d,g){return d*e.gammafn(1+1/g)},median:function(d,e){return d*k.pow(k.log(2),1/e)},mode:function(d,e){return 1>=e?void 0:d*k.pow((e-1)/e,1/e)},sample:function(d,e){return d*k.pow(-k.log(k.random()),1/e)},variance:function(d,g){return d*d*e.gammafn(1+2/g)-k.pow(this.mean(d,g),2)}});e.extend(e.uniform,{pdf:function(d,e,
b){return d<e||d>b?0:1/(b-e)},cdf:function(d,e,b){return d<e?0:d<b?(d-e)/(b-e):1},mean:function(d,e){return.5*(d+e)},median:function(d,g){return e.mean(d,g)},mode:function(d,e){throw Error("mode is not yet implemented");},sample:function(d,e){return d/2+e/2+(e/2-d/2)*(2*k.random()-1)},variance:function(d,e){return k.pow(e-d,2)/12}});e.extend(e.binomial,{pdf:function(d,g,b){return 0===b||1===b?g*b===d?1:0:e.combination(g,d)*k.pow(b,d)*k.pow(1-b,g-d)},cdf:function(d,g,b){var h=[],k=0;if(0>d)return 0;
if(d<g){for(;k<=d;k++)h[k]=e.binomial.pdf(k,g,b);return e.sum(h)}return 1}});e.extend(e.negbin,{pdf:function(d,g,b){return d!==d|0?!1:0>d?0:e.combination(d+g-1,g-1)*k.pow(1-b,d)*k.pow(b,g)},cdf:function(d,g,b){var h=0,k=0;if(0>d)return 0;for(;k<=d;k++)h+=e.negbin.pdf(k,g,b);return h}});e.extend(e.hypgeom,{pdf:function(d,g,b,h){if(d!==d|0)return!1;if(0>d||d<b-(g-h)||d>h||d>b)return 0;if(2*b>g)return 2*h>g?e.hypgeom.pdf(g-b-h+d,g,g-b,g-h):e.hypgeom.pdf(h-d,g,g-b,h);if(2*h>g)return e.hypgeom.pdf(b-d,
g,b,g-h);if(b<h)return e.hypgeom.pdf(d,g,h,b);for(var l=1,p=0,n=0;n<d;n++){for(;1<l&&p<h;)l*=1-b/(g-p),p++;l*=(h-n)*(b-n)/((n+1)*(g-b-h+n+1))}for(;p<h;p++)l*=1-b/(g-p);return k.min(1,k.max(0,l))},cdf:function(d,g,b,h){if(0>d||d<b-(g-h))return 0;if(d>=h||d>=b)return 1;if(2*b>g)return 2*h>g?e.hypgeom.cdf(g-b-h+d,g,g-b,g-h):1-e.hypgeom.cdf(h-d-1,g,g-b,h);if(2*h>g)return 1-e.hypgeom.cdf(b-d-1,g,b,g-h);if(b<h)return e.hypgeom.cdf(d,g,h,b);for(var l=1,p=1,n=0,q=0;q<d;q++){for(;1<l&&n<h;){var r=1-b/(g-n),
p=p*r,l=l*r;n++}p*=(h-q)*(b-q)/((q+1)*(g-b-h+q+1));l+=p}for(;n<h;n++)l*=1-b/(g-n);return k.min(1,k.max(0,l))}});e.extend(e.poisson,{pdf:function(d,g){return k.pow(g,d)*k.exp(-g)/e.factorial(d)},cdf:function(d,g){var b=[],h=0;if(0>d)return 0;for(;h<=d;h++)b.push(e.poisson.pdf(h,g));return e.sum(b)},mean:function(d){return d},variance:function(d){return d},sample:function(d){var e=1,b=0;d=k.exp(-d);do b++,e*=k.random();while(e>d);return b-1}});e.extend(e.triangular,{pdf:function(d,e,b,h){return b<=
e||h<e||h>b?void 0:d<e||d>b?0:d<=h?2*(d-e)/((b-e)*(h-e)):2*(b-d)/((b-e)*(b-h))},cdf:function(d,e,b,h){return b<=e||h<e||h>b?void 0:d<e?0:d<=h?k.pow(d-e,2)/((b-e)*(h-e)):1-k.pow(b-d,2)/((b-e)*(b-h))},mean:function(d,e,b){return(d+e+b)/3},median:function(d,e,b){if(b<=(d+e)/2)return e-k.sqrt((e-d)*(e-b))/k.sqrt(2);if(b>(d+e)/2)return d+k.sqrt((e-d)*(b-d))/k.sqrt(2)},mode:function(d,e,b){return b},sample:function(d,e,b){var h=k.random();return h<(b-d)/(e-d)?d+k.sqrt(h*(e-d)*(b-d)):e-k.sqrt((1-h)*(e-d)*
(e-b))},variance:function(d,e,b){return(d*d+e*e+b*b-d*e-d*b-e*b)/18}})})(this.jStat,Math);
(function(e,k){var d=Array.prototype.push,g=e.utils.isArray;e.extend({add:function(b,d){return g(d)?(g(d[0])||(d=[d]),e.map(b,function(b,e,g){return b+d[e][g]})):e.map(b,function(b){return b+d})},subtract:function(b,d){return g(d)?(g(d[0])||(d=[d]),e.map(b,function(b,e,g){return b-d[e][g]||0})):e.map(b,function(b){return b-d})},divide:function(b,d){return g(d)?(g(d[0])||(d=[d]),e.multiply(b,e.inv(d))):e.map(b,function(b){return b/d})},multiply:function(b,d){var k,p,n,q,r=b.length,s=b[0].length,w=
e.zeros(r,n=g(d)?d[0].length:s),u=0;if(g(d)){for(;u<n;u++)for(k=0;k<r;k++){for(p=q=0;p<s;p++)q+=b[k][p]*d[p][u];w[k][u]=q}return 1===r&&1===u?w[0][0]:w}return e.map(b,function(b){return b*d})},dot:function(b,d){g(b[0])||(b=[b]);g(d[0])||(d=[d]);for(var k=1===b[0].length&&1!==b.length?e.transpose(b):b,p=1===d[0].length&&1!==d.length?e.transpose(d):d,n=[],q=0,r=k.length,s=k[0].length,w,u;q<r;q++){n[q]=[];for(u=w=0;u<s;u++)w+=k[q][u]*p[q][u];n[q]=w}return 1===n.length?n[0]:n},pow:function(b,d){return e.map(b,
function(b){return k.pow(b,d)})},abs:function(b){return e.map(b,function(b){return k.abs(b)})},norm:function(b,d){var e=0,p=0;isNaN(d)&&(d=2);for(g(b[0])&&(b=b[0]);p<b.length;p++)e+=k.pow(k.abs(b[p]),d);return k.pow(e,1/d)},angle:function(b,d){return k.acos(e.dot(b,d)/(e.norm(b)*e.norm(d)))},aug:function(b,e){for(var g=b.slice(),k=0;k<g.length;k++)d.apply(g[k],e[k]);return g},inv:function(b){var d=b.length,g=b[0].length,k=e.identity(d,g);b=e.gauss_jordan(b,k);for(var k=[],n=0,q;n<d;n++)for(k[n]=[],
q=g-1;q<b[0].length;q++)k[n][q-g]=b[n][q];return k},det:function(b){var d=b.length,e=2*d,g=Array(e),k=d-1,q=e-1,r=k-d+1,s=q,w=0,u=0,x;if(2===d)return b[0][0]*b[1][1]-b[0][1]*b[1][0];for(;w<e;w++)g[w]=1;for(w=0;w<d;w++){for(x=0;x<d;x++)g[0>r?r+d:r]*=b[w][x],g[s<d?s+d:s]*=b[w][x],r++,s--;r=--k-d+1;s=--q}for(w=0;w<d;w++)u+=g[w];for(;w<e;w++)u-=g[w];return u},gauss_elimination:function(b,d){var g=0,p=0,n=b.length,q=b[0].length,r=1,s=0,w=[],u;b=e.aug(b,d);for(u=b[0].length;g<n;g++){r=b[g][g];p=g;for(s=
g+1;s<q;s++)r<k.abs(b[s][g])&&(r=b[s][g],p=s);if(p!=g)for(s=0;s<u;s++)r=b[g][s],b[g][s]=b[p][s],b[p][s]=r;for(p=g+1;p<n;p++)for(r=b[p][g]/b[g][g],s=g;s<u;s++)b[p][s]-=r*b[g][s]}for(g=n-1;0<=g;g--){s=0;for(p=g+1;p<=n-1;p++)s=w[p]*b[g][p];w[g]=(b[g][u-1]-s)/b[g][g]}return w},gauss_jordan:function(b,d){for(var g=e.aug(b,d),p=g.length,n=g[0].length,q=0;q<p;q++){for(var r=q,s=q+1;s<p;s++)k.abs(g[s][q])>k.abs(g[r][q])&&(r=s);s=g[q];g[q]=g[r];g[r]=s;for(s=q+1;s<p;s++)for(c=g[s][q]/g[q][q],r=q;r<n;r++)g[s][r]-=
g[q][r]*c}for(q=p-1;0<=q;q--){c=g[q][q];for(s=0;s<q;s++)for(r=n-1;r>q-1;r--)g[s][r]-=g[q][r]*g[s][q]/c;g[q][q]/=c;for(r=p;r<n;r++)g[q][r]/=c}return g},lu:function(b,d){throw Error("lu not yet implemented");},cholesky:function(b,d){throw Error("cholesky not yet implemented");},gauss_jacobi:function(b,d,g,p){for(var n=0,q=0,r=b.length,s=[],w=[],u=[];n<r;n++)for(s[n]=[],w[n]=[],u[n]=[],q=0;q<r;q++)n>q?(s[n][q]=b[n][q],w[n][q]=u[n][q]=0):n<q?(w[n][q]=b[n][q],s[n][q]=u[n][q]=0):(u[n][q]=b[n][q],s[n][q]=
w[n][q]=0);b=e.multiply(e.multiply(e.inv(u),e.add(s,w)),-1);u=e.multiply(e.inv(u),d);d=g;g=e.add(e.multiply(b,g),u);for(n=2;k.abs(e.norm(e.subtract(g,d)))>p;)d=g,g=e.add(e.multiply(b,d),u),n++;return g},gauss_seidel:function(b,d,g,p){for(var n=0,q=b.length,r=[],s=[],w=[],u;n<q;n++)for(r[n]=[],s[n]=[],w[n]=[],u=0;u<q;u++)n>u?(r[n][u]=b[n][u],s[n][u]=w[n][u]=0):n<u?(s[n][u]=b[n][u],r[n][u]=w[n][u]=0):(w[n][u]=b[n][u],r[n][u]=s[n][u]=0);b=e.multiply(e.multiply(e.inv(e.add(w,r)),s),-1);r=e.multiply(e.inv(e.add(w,
r)),d);d=g;g=e.add(e.multiply(b,g),r);for(n=2;k.abs(e.norm(e.subtract(g,d)))>p;)d=g,g=e.add(e.multiply(b,d),r),n+=1;return g},SOR:function(b,d,g,p,n){for(var q=0,r=b.length,s=[],w=[],u=[],x;q<r;q++)for(s[q]=[],w[q]=[],u[q]=[],x=0;x<r;x++)q>x?(s[q][x]=b[q][x],w[q][x]=u[q][x]=0):q<x?(w[q][x]=b[q][x],s[q][x]=u[q][x]=0):(u[q][x]=b[q][x],s[q][x]=w[q][x]=0);b=e.multiply(e.inv(e.add(u,e.multiply(s,n))),e.subtract(e.multiply(u,1-n),e.multiply(w,n)));n=e.multiply(e.multiply(e.inv(e.add(u,e.multiply(s,n))),
d),n);d=g;g=e.add(e.multiply(b,g),n);for(q=2;k.abs(e.norm(e.subtract(g,d)))>p;)d=g,g=e.add(e.multiply(b,d),n),q++;return g},householder:function(b){for(var d=b.length,g=b[0].length,p=0,n=[],q=[],r;p<d-1;p++){q=0;for(n=p+1;n<g;n++)q+=b[n][p]*b[n][p];n=0<b[p+1][p]?-1:1;q=n*k.sqrt(q);r=k.sqrt((q*q-b[p+1][p]*q)/2);n=e.zeros(d,1);n[p+1][0]=(b[p+1][p]-q)/(2*r);for(q=p+2;q<d;q++)n[q][0]=b[q][p]/(2*r);q=e.subtract(e.identity(d,g),e.multiply(e.multiply(n,e.transpose(n)),2));b=e.multiply(q,e.multiply(b,q))}return b},
QR:function(b,d){for(var g=b.length,p=b[0].length,n=0,q=[],r=[],s=[],w;n<g-1;n++){r=0;for(q=n+1;q<p;q++)r+=b[q][n]*b[q][n];q=0<b[n+1][n]?-1:1;r=q*k.sqrt(r);w=k.sqrt((r*r-b[n+1][n]*r)/2);q=e.zeros(g,1);q[n+1][0]=(b[n+1][n]-r)/(2*w);for(r=n+2;r<g;r++)q[r][0]=b[r][n]/(2*w);r=e.subtract(e.identity(g,p),e.multiply(e.multiply(q,e.transpose(q)),2));b=e.multiply(r,b);d=e.multiply(r,d)}for(n=g-1;0<=n;n--){for(q=n+1;q<=p-1;q++);s[n]=d[n][0]/b[n][n]}return s},jacobi:function(b){for(var d=1,g=0,p=b.length,n=
e.identity(p,p),q=[],r,s,w,u,x;1===d;){g++;u=b[0][1];d=0;w=1;for(r=0;r<p;r++)for(s=0;s<p;s++)r!=s&&u<k.abs(b[r][s])&&(u=k.abs(b[r][s]),d=r,w=s);b[d][d]===b[w][w]?x=0<b[d][w]?k.PI/4:-k.PI/4:x=k.atan(2*b[d][w]/(b[d][d]-b[w][w]))/2;r=e.identity(p,p);r[d][d]=k.cos(x);r[d][w]=-k.sin(x);r[w][d]=k.sin(x);r[w][w]=k.cos(x);n=e.multiply(n,r);b=e.multiply(e.multiply(e.inv(r),b),r);d=0;for(r=1;r<p;r++)for(s=1;s<p;s++)r!=s&&.001<k.abs(b[r][s])&&(d=1)}for(r=0;r<p;r++)q.push(b[r][r]);return[n,q]},rungekutta:function(b,
d,e,g,k,q){var r,s,w;if(2===q)for(;g<=e;)r=d*b(g,k),s=d*b(g+d,k+r),k+=(r+s)/2,g+=d;if(4===q)for(;g<=e;)r=d*b(g,k),s=d*b(g+d/2,k+r/2),q=d*b(g+d/2,k+s/2),w=d*b(g+d,k+q),k+=(r+2*s+2*q+w)/6,g+=d;return k},romberg:function(b,d,e,g){for(var n=0,q=(e-d)/2,r=[],s=[],w=[],u,x,y;n<g/2;){y=b(d);x=d;for(u=0;x<=e;x+=q,u++)r[u]=x;u=r.length;for(x=1;x<u-1;x++)y+=(0!==x%2?4:2)*b(r[x]);y=q/3*(y+b(e));w[n]=y;q/=2;n++}b=w.length;for(u=1;1!==b;){for(x=0;x<b-1;x++)s[x]=(k.pow(4,u)*w[x+1]-w[x])/(k.pow(4,u)-1);b=s.length;
w=s;s=[];u++}return w},richardson:function(b,d,e,g){function n(b,d){for(var e=0,g=b.length,h;e<g;e++)b[e]===d&&(h=e);return h}for(var q=k.abs(e-b[n(b,e)+1]),r=0,s=[],w=[],u,x;g>=q;)u=n(b,e+g),x=n(b,e),s[r]=(d[u]-2*d[x]+d[2*x-u])/(g*g),g/=2,r++;d=s.length;for(b=1;1!=d;){for(e=0;e<d-1;e++)w[e]=(k.pow(4,b)*s[e+1]-s[e])/(k.pow(4,b)-1);d=w.length;s=w;w=[];b++}return s},simpson:function(b,d,e,g){g=(e-d)/g;var k=b(d),q=[],r=d,s=0;for(d=1;r<=e;r+=g,s++)q[s]=r;for(r=q.length;d<r-1;d++)k+=(0!==d%2?4:2)*b(q[d]);
return g/3*(k+b(e))},hermite:function(b,d,e,g){for(var k=b.length,q=0,r=0,s=[],w=[],u=[],x=[],y;r<k;r++){s[r]=1;for(y=0;y<k;y++)r!=y&&(s[r]*=(g-b[y])/(b[r]-b[y]));for(y=w[r]=0;y<k;y++)r!=y&&(w[r]+=1/(b[r]-b[y]));u[r]=(1-2*(g-b[r])*w[r])*s[r]*s[r];x[r]=(g-b[r])*s[r]*s[r];q+=u[r]*d[r]+x[r]*e[r]}return q},lagrange:function(b,d,e){for(var g=0,k=0,q,r,s=b.length;k<s;k++){r=d[k];for(q=0;q<s;q++)k!=q&&(r*=(e-b[q])/(b[k]-b[q]));g+=r}return g},cubic_spline:function(b,d,g){for(var k=b.length,n=0,q=[],r=[],
s=[],w=[],u=[],x=[],y=[];n<k-1;n++)u[n]=b[n+1]-b[n];s[0]=0;for(n=1;n<k-1;n++)s[n]=3/u[n]*(d[n+1]-d[n])-3/u[n-1]*(d[n]-d[n-1]);for(n=1;n<k-1;n++)q[n]=[],r[n]=[],q[n][n-1]=u[n-1],q[n][n]=2*(u[n-1]+u[n]),q[n][n+1]=u[n],r[n][0]=s[n];w=e.multiply(e.inv(q),r);for(n=0;n<k-1;n++)x[n]=(d[n+1]-d[n])/u[n]-u[n]*(w[n+1][0]+2*w[n][0])/3,y[n]=(w[n+1][0]-w[n][0])/(3*u[n]);for(n=0;n<k&&!(b[n]>g);n++);return n-=1,d[n]+(g-b[n])*x[n]+e.sq(g-b[n])*w[n]+(g-b[n])*e.sq(g-b[n])*y[n]},gauss_quadrature:function(){throw Error("gauss_quadrature not yet implemented");
},PCA:function(b){var d=b.length,g=b[0].length,k=0,n,q,r=[],s=[];n=[];for(var w=[],u=[],x=[],x=[],s=[],k=[],y=[],k=0;k<d;k++)r[k]=e.sum(b[k])/g;for(k=0;k<g;k++)for(x[k]=[],n=0;n<d;n++)x[k][n]=b[n][k]-r[n];x=e.transpose(x);for(k=0;k<d;k++)for(s[k]=[],n=0;n<d;n++)s[k][n]=e.dot([x[k]],[x[n]])/(g-1);n=e.jacobi(s);k=n[0];s=n[1];y=e.transpose(k);for(k=0;k<s.length;k++)for(n=k;n<s.length;n++)s[k]<s[n]&&(q=s[k],s[k]=s[n],s[n]=q,w=y[k],y[k]=y[n],y[n]=w);x=e.transpose(x);for(k=0;k<d;k++)for(u[k]=[],n=0;n<x.length;n++)u[k][n]=
e.dot([y[k]],[x[n]]);return[b,s,y,u]}});(function(b){for(var d=0;d<b.length;d++)(function(b){e.fn[b]=function(d,g){var h=this;return g?(setTimeout(function(){g.call(h,e.fn[b].call(h,d))},15),this):"number"==typeof e[b](this,d)?e[b](this,d):e(e[b](this,d))}})(b[d])})("add divide multiply subtract dot pow abs norm angle".split(" "))})(this.jStat,Math);
(function(e,k){var d=[].slice,g=e.utils.isNumber;e.extend({zscore:function(){var b=d.call(arguments);return g(b[1])?(b[0]-b[1])/b[2]:(b[0]-e.mean(b[1]))/e.stdev(b[1],b[2])},ztest:function(){var b=d.call(arguments);if(4===b.length){if(g(b[1])){var h=e.zscore(b[0],b[1],b[2]);return 1===b[3]?e.normal.cdf(-k.abs(h),0,1):2*e.normal.cdf(-k.abs(h),0,1)}h=b[0];return 1===b[2]?e.normal.cdf(-k.abs(h),0,1):2*e.normal.cdf(-k.abs(h),0,1)}h=e.zscore(b[0],b[1],b[3]);return 1===b[1]?e.normal.cdf(-k.abs(h),0,1):2*
e.normal.cdf(-k.abs(h),0,1)}});e.extend(e.fn,{zscore:function(b,d){return(b-this.mean())/this.stdev(d)},ztest:function(b,d,g){b=k.abs(this.zscore(b,g));return 1===d?e.normal.cdf(-b,0,1):2*e.normal.cdf(-b,0,1)}});e.extend({tscore:function(){var b=d.call(arguments);return 4===b.length?(b[0]-b[1])/(b[2]/k.sqrt(b[3])):(b[0]-e.mean(b[1]))/(e.stdev(b[1],!0)/k.sqrt(b[1].length))},ttest:function(){var b=d.call(arguments),h;return 5===b.length?(h=k.abs(e.tscore(b[0],b[1],b[2],b[3])),1===b[4]?e.studentt.cdf(-h,
b[3]-1):2*e.studentt.cdf(-h,b[3]-1)):g(b[1])?(h=k.abs(b[0]),1==b[2]?e.studentt.cdf(-h,b[1]-1):2*e.studentt.cdf(-h,b[1]-1)):(h=k.abs(e.tscore(b[0],b[1])),1==b[2]?e.studentt.cdf(-h,b[1].length-1):2*e.studentt.cdf(-h,b[1].length-1))}});e.extend(e.fn,{tscore:function(b){return(b-this.mean())/(this.stdev(!0)/k.sqrt(this.cols()))},ttest:function(b,d){return 1===d?1-e.studentt.cdf(k.abs(this.tscore(b)),this.cols()-1):2*e.studentt.cdf(-k.abs(this.tscore(b)),this.cols()-1)}});e.extend({anovafscore:function(){var b=
d.call(arguments),g,l,p,n,q,r;if(1===b.length){g=Array(b[0].length);for(q=0;q<b[0].length;q++)g[q]=b[0][q];b=g}if(2===b.length)return e.variance(b[0])/e.variance(b[1]);l=[];for(q=0;q<b.length;q++)l=l.concat(b[q]);p=e.mean(l);for(q=g=0;q<b.length;q++)g+=b[q].length*k.pow(e.mean(b[q])-p,2);g/=b.length-1;for(q=n=0;q<b.length;q++)for(p=e.mean(b[q]),r=0;r<b[q].length;r++)n+=k.pow(b[q][r]-p,2);return n/=l.length-b.length,g/n},anovaftest:function(){var b=d.call(arguments),h,k,p,n;if(g(b[0]))return 1-e.centralF.cdf(b[0],
b[1],b[2]);anovafscore=e.anovafscore(b);h=b.length-1;for(n=p=0;n<b.length;n++)p+=b[n].length;return k=p-h-1,1-e.centralF.cdf(anovafscore,h,k)},ftest:function(b,d,g){return 1-e.centralF.cdf(b,d,g)}});e.extend(e.fn,{anovafscore:function(){return e.anovafscore(this.toArray())},anovaftes:function(){var b=0,d;for(d=0;d<this.length;d++)b+=this[d].length;return e.ftest(this.anovafscore(),this.length-1,b-this.length)}});e.extend({normalci:function(){var b=d.call(arguments),g=Array(2),l;return 4===b.length?
l=k.abs(e.normal.inv(b[1]/2,0,1)*b[2]/k.sqrt(b[3])):l=k.abs(e.normal.inv(b[1]/2,0,1)*e.stdev(b[2])/k.sqrt(b[2].length)),g[0]=b[0]-l,g[1]=b[0]+l,g},tci:function(){var b=d.call(arguments),g=Array(2),l;return 4===b.length?l=k.abs(e.studentt.inv(b[1]/2,b[3]-1)*b[2]/k.sqrt(b[3])):l=k.abs(e.studentt.inv(b[1]/2,b[2].length-1)*e.stdev(b[2],!0)/k.sqrt(b[2].length)),g[0]=b[0]-l,g[1]=b[0]+l,g},significant:function(b,d){return b<d}});e.extend(e.fn,{normalci:function(b,d){return e.normalci(b,d,this.toArray())},
tci:function(b,d){return e.tci(b,d,this.toArray())}})})(this.jStat,Math);svgNamespaceUri="http://www.w3.org/2000/svg";xlinkUri="http://www.w3.org/1999/xlink";hasOwnProperty=function(e,k){var d=e.__proto__||e.constructor.prototype;return k in e&&(!(k in d)||d[k]!==e[k])};isObjInArray=function(e,k){var d=!1;0<=e.indexOf(k)&&(d=!0);return d};getKeys=function(e){var k=[],d;for(d in e)k.push(d);return k};eliminateDuplicates=function(e){var k,d=e.length,g=[],b={};for(k=0;k<d;k++)b[e[k]]=0;for(k in b)g.push(k);return g};
keepReplicates=function(e,k,d){for(var g={},b=0;b<e.length;b++){var h=e[b];h in g||(g[h]=0);g[h]++}k=null==k?2:k;e=[];for(h in g)null!=d&&d?g[h]<k&&e.push(h):g[h]>=k&&e.push(h);return e};beginsWith=function(e,k){return 0===e.indexOf(k)};endsWith=function(e,k){return-1!==e.indexOf(k,e.length-k.length)};lengthOfLongestString=function(e){var k=[],d;for(d in e)k.push(e[d].length);return Math.max.apply(null,k)};isNumerical=function(e){return null==e||""===e||isNaN(e)?!1:!0};
getListBoxSelectedValues=function(e){for(var k=[],d=0;d<e.length;d++){var g=e[d];g.selected&&k.push(g.value)}return k};compareAsNumeric=function(e,k){var d=parseFloat(e),g=parseFloat(k);if(isNumerical(d)&&isNumerical(g)){if(d<g)return-1;if(d>g)return 1}else if(d==d||g==g){if(d!=d)return-1;if(g!=g)return 1}return 0};compareAsString=function(e,k){var d=new String(e),g=new String(k);return"null"==d&&"null"!=g?-1:"null"!=d&&"null"==g?1:d.localeCompare(g)};
compareAsDate=function(e,k){var d=e,g=k;null==d?d="1000":""==d&&(d="1001");null==g?g="1000":""==g&&(g="1001");return new Date(d)-new Date(g)};
centeredRgbaColorMapper=function(e,k,d,g){var b=null,h=null==k?0:k,l=null==d?-1.96:d,p=null==g?1.96:g;return b=function(b){var d=1,g=169,k=169,w=169;b=parseFloat(b);null!=b&&b==b&&(b>h?(g=255,w=k=0,b>p?d=1:(d=(b-h)/(p-h),d=Math.abs(d),e&&(d=Math.log(d)))):b<h?(k=g=0,w=255,b<l?d=1:(d=(b-h)/(l-h),d=Math.abs(d),e&&(d=Math.log(d)))):(w=k=g=255,d=1));return"rgba("+g+","+k+","+w+","+d+")"}};
setupQuantileColorMapper=function(e,k){var d=k;null==d&&(d="rgb(255,255,217) rgb(237,248,177) rgb(199,233,180) rgb(127,205,187) rgb(65,182,196) rgb(29,145,192) rgb(34,94,168) rgb(37,52,148) rgb(8,29,88)".split(" "));var g=d.length;return d3.scale.quantile().domain([0,g-1,d3.max(e,function(b){return parseFloat(b)})]).range(d)};getXmlDom_url=function(e){xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");xmlhttp.open("GET",e,!1);xmlhttp.send();return xmlDoc=xmlhttp.responseXML};
getXmlDom_string=function(e){window.DOMParser?(parser=new DOMParser,xmlDoc=parser.parseFromString(e,"text/xml")):(xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),xmlDoc.async=!1,xmlDoc.loadXML(e));return xmlDoc};
getDateTime=function(){var e=new Date,k=e.getFullYear(),d=e.getMonth()+1,g=e.getDate(),b=e.getHours(),h=e.getMinutes(),e=e.getSeconds();1==d.toString().length&&(d="0"+d);1==g.toString().length&&(g="0"+g);1==b.toString().length&&(b="0"+b);1==h.toString().length&&(h="0"+h);1==e.toString().length&&(e="0"+e);return k+"/"+d+"/"+g+" "+b+":"+h+":"+e};
todaysDate=function(){var e=new Date,k=e.getDate();e.getDay();var d=e.getMonth()+1,e=e.getYear();return[,"January","February","March","April","May","June","July","August","September","October","November","December"][d]+" "+k+", "+(1E3>e?e+1900:e)};removeChildElems=function(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e};createDivElement=function(e,k){var d=document.createElement("div");null!=e&&(d.id=e);null!=k&&(d.className=k);return d};
swapContainingDivs=function(e,k){var d=k.parentNode;document.getElementById(e.parentNode.id).appendChild(k);document.getElementById(d.id).appendChild(e)};simpleAsyncGet=function(e,k){var d=new XMLHttpRequest;d.onreadystatechange=function(){this.readyState===(this.DONE||4)&&k(d.responseText)};d.open("GET",e,!0);d.setRequestHeader("X-Requested-With","XMLHttpRequest");d.send(null)};
getResponse=function(e){var k=null,d=null,d=new XMLHttpRequest;d.open("GET",e,!1);d.onload=function(){k=d.status;200!=k&&console.log("xhr status: "+k+" for "+e)};d.send(null);var g=null;200==k&&(g=d.responseText);return g};loadNewSettings=function(e){e=window.location.pathname+"?query="+JSON.stringify(e);window.open(e,"_self")};getQueryObj=function(){var e={};location.search.slice(1).split("&").forEach(function(k){k=k.split("=");e[k[0]]=decodeURIComponent(k[1])||""});return e};
getQueryStringParameterByName=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");e=(new RegExp("[\\?&]"+e+"=([^&#]*)")).exec(location.search);return null==e?"":decodeURIComponent(e[1].replace(/\+/g," "))};parseJson=function(e){return JSON.parse(e)};serializeJson=function(e,k){return k?JSON.stringify(e,null,"\t"):JSON.stringify(e)};prettyJson=function(e){return serializeJson(e,!0)};
bottomRoundedRectSvgPath=function(e,k,d,g,b){e=""+("M"+e+","+k)+("h"+d);e+="v"+(g-b);e+="a"+b+","+b+" 0 0 1 "+-1*b+","+b;e+="h"+-1*(d-2*b);e+="a"+b+","+b+" 0 0 1 "+-1*b+","+-1*b;e+="v"+-1*(g-b);return e+="z"};allRoundedRectSvgPath=function(e,k,d,g,b){e=""+("M"+e+","+(k+b))+("a"+b+","+b+" 0 0 1 "+b+","+-1*b);e+="h"+(d-2*b);e+="a"+b+","+b+" 0 0 1 "+b+","+b;e+="v"+(g-2*b);e+="a"+b+","+b+" 0 0 1 "+-1*b+","+b;e+="h"+-1*(d-2*b);e+="a"+b+","+b+" 0 0 1 "+-1*b+","+-1*b;e+="v"+-1*(g-2*b);return e+="z"};
allAngledRectSvgPath=function(e,k,d,g){var b=d>g?d/8:g/8;e=""+("M"+(e+b)+","+k)+("h"+(d-2*b));e+="l"+b+","+b;e+="v"+(g-2*b);e+="l"+-1*b+","+b;e+="h"+-1*(d-2*b);e+="l"+-1*b+","+-1*b;e+="v"+-1*(g-2*b);return e+="z"};
createSvgRingElement=function(e,k,d,g){function b(b,d,e,g){g=(g-90)*Math.PI/180;return{x:b+e*Math.cos(g),y:d+e*Math.sin(g)}}e=function(d,e,g,h,k){var s=b(d,e,g,k);d=b(d,e,g,h);return["M",s.x,s.y,"A",g,g,0,180>=k-h?"0":"1",0,d.x,d.y].join(" ")}(e,k,d,0,359.9);k=document.createElementNS(svgNamespaceUri,"path");k.setAttributeNS(null,"d",e);if(null!=g)for(var h in g)k.setAttributeNS(null,h,g[h]);return k};
createSvgCircleElement=function(e,k,d,g){var b=document.createElementNS(svgNamespaceUri,"circle");b.setAttributeNS(null,"cx",e);b.setAttributeNS(null,"cy",k);b.setAttributeNS(null,"r",d);if(null!=g)for(var h in g)b.setAttributeNS(null,h,g[h]);return b};
createSvgRectElement=function(e,k,d,g,b,h,l){var p=document.createElementNS(svgNamespaceUri,"rect");p.setAttributeNS(null,"x",e);p.setAttributeNS(null,"y",k);p.setAttributeNS(null,"rx",d);p.setAttributeNS(null,"ry",g);p.setAttributeNS(null,"width",b);p.setAttributeNS(null,"height",h);if(null!=l)for(var n in l)p.setAttributeNS(null,n,l[n]);return p};
createSvgImageElement=function(e,k,d,g,b,h){var l=document.createElementNS(svgNamespaceUri,"image");l.setAttributeNS(xlinkUri,"href",e);l.setAttributeNS(null,"x",k);l.setAttributeNS(null,"y",d);l.setAttributeNS(null,"width",g);l.setAttributeNS(null,"height",b);if(null!=h)for(var p in h)l.setAttributeNS(null,p,h[p]);return l};setCookie=function(e,k,d){if(d){var g=new Date;g.setTime(g.getTime()+864E5*d);d="; expires="+g.toGMTString()}else d="";document.cookie=e+"="+k+d+"; path=/"};
getCookie=function(e){e+="=";for(var k=document.cookie.split(";"),d=0;d<k.length;d++){for(var g=k[d];" "==g.charAt(0);)g=g.substring(1,g.length);if(0==g.indexOf(e))return g.substring(e.length,g.length)}return null};deleteCookie=function(e){setCookie(e,"",-1)};var eventHierarchyUrl="observation_deck/data/eventHierarchy.xml";function getEventElems(e,k){var d=[];e.find("event").each(function(e,b){var h=b.getAttribute("type");void 0===k||null===k?d.push(b):h===k&&d.push(b)});return d}
function getEventParentChildren(e,k){var d={parent:null,children:[]},g=getEventElems(e,k);$(g).each(function(b,e){if("event"!==e.tagName)return"continue";d.parent=e.parentNode.getAttribute("type");$(e.children).each(function(b,e){"event"===e.tagName&&d.children.push(e.getAttribute("type"))})});return d}
function tracebackToRoot(e,k){for(var d=[],g=getEventElems(e,k),b=0;b<g.length;b++){var h=g[b],l=[];d.push(l);h=h.getAttribute("type");for(h=getEventParentChildren(e,h).parent;void 0!==h&&null!==h;)l.push(h),h=getEventParentChildren(e,h).parent}return d}
function OD_eventAlbum(){this.album={};this.addEvent=function(e,k){var d=new OD_event(e);this.album[e.id]=d;d.data.setData(k,"numeric"==e.allowedValues||"expression"==e.allowedValues);return this};this.getEventIdsByType=function(){for(var e={},k=getKeys(this.album),d=0;d<k.length;d++){var g=k[d],b=this.getEvent(g).metadata.datatype;hasOwnProperty(e,b)||(e[b]=[]);e[b].push(g)}return e};this.getEventData=function(e){for(var k={},d=getKeys(this.album),g=0;g<d.length;g++){var b=d[g],h=this.getEvent(b).data.getData(e);
k[b]=h}return k};this.getAllDataAsList=function(){for(var e=[],k=this.getEventData(),d=getKeys(k),g=0;g<d.length;g++){for(var b=d[g],h=k[b].slice(),l=0;l<h.length;l++)h[l].eventId=b;e=e.concat(h)}return e};this.getAllSampleIds=function(){for(var e=[],k=getKeys(this.album),d=0;d<k.length;d++)var g=this.getEvent(k[d]).data.getAllSampleIds(),e=e.concat(g);return eliminateDuplicates(e)};this.selectSamples=function(e){var k=this.getAllSampleIds();if(0==e.length)return k;for(var d in e)var g=e[d].value,
k=this.getEvent(e[d].eventId).data.selectIds(g,k);return k};this.getEvent=function(e){return this.album[e]};this.getAllChildren=function(e,k){for(var d="undefined"===typeof k?[]:k,g=[],b=0;b<e.length;b++)var h=this.getEvent(e[b]).metadata,g=g.concat(getKeys(h.children));if(0==g.length)return d;d=d.concat(g);return this.getAllChildren(g,d)};this.multisortSamples=function(e){var k=this.getAllSampleIds();if(null==e)return k;var d=e.getSteps().slice();d.reverse();var g=this;k.sort(function(b,e){for(var k=
0,p=0;p<d.length;p++){var n=d[p].name,q=d[p].reverse,r=g.getEvent(n);if(void 0==r||null==r)console.log("no event found for sorting: "+n);else{var k=r.metadata.allowedValues,n=r.data.getData([b,e]),r=n[0].val,n=n[1].val,s=null,s="numeric"==k?compareAsNumeric:"categoric"==k?compareAsString:"expression"==k?compareAsNumeric:"date"==k?compareAsDate:compareAsString,k=s(r,n);q&&(k*=-1);if(0!=k)break}}return k});return k};this.scaledExpressionRescaling=function(){};this.zScoreExpressionRescaling=function(){console.log("zScoreExpressionRescaling");
var e=this.getEventIdsByType();if(!hasOwnProperty(e,"expression data"))return console.log("no expression"),null;for(var e=e["expression data"],k={},d={stats:k},g=[],b=0;b<e.length;b++){var h=e[b],l=this.getEvent(h).data.getStats();k[h]={};k[h]=l;for(var l=this.getEvent(h).data.getData(),p=0;p<l.length;p++){var n=l[p];hasOwnProperty(n,"val_orig")&&(n.val=n.val_orig);var q=n.val;n.val_orig=q;isNumerical(q)&&(n.val=(q-k[h].mean)/k[h].sd,g.push(n.val))}}d.maxVal=jStat.max(g);d.minVal=jStat.min(g);return d};
this.betweenMeansExpressionRescaling=function(e,k,d){console.log("betweenMeansExpressionRescaling",e,k,d);k=this.getEvent(e).data.selectIds(k);var g=null;null==d?(g=this.getEvent(e).data.selectIds(d),g=g.concat(k),g=eliminateDuplicates(g)):g=this.getEvent(e).data.selectIds(d);e=this.getEventIdsByType();if(!hasOwnProperty(e,"expression data"))return console.log("no expression"),null;e=e["expression data"];d={};for(var b={meanVals:d},h=[],l=0;l<e.length;l++){var p=e[l];d[p]={};d[p].group1=this.getEvent(p).data.getStats(k).mean;
d[p].group2=this.getEvent(p).data.getStats(g).mean;for(var n=(d[p].group2-d[p].group1)/2,p=this.getEvent(p).data.getData(),q=0;q<p.length;q++){var r=p[q];hasOwnProperty(r,"val_orig")&&(r.val=r.val_orig);var s=r.val;r.val_orig=s;isNumerical(s)&&(r.val=s-n,h.push(r.val))}}b.maxVal=jStat.max(h);b.minVal=jStat.min(h);return b};this.yuliaExpressionRescaling=function(e,k){console.log("yuliaExpressionRescaling",e,k);var d=this.getEvent(e).data.selectIds(k),g=this.getEventIdsByType();if(!hasOwnProperty(g,
"expression data"))return console.log("no expression"),null;for(var g=g["expression data"],b={},h={meanVals:b},l=[],p=0;p<g.length;p++){var n=g[p];b[n]=this.getEvent(n).data.getStats(d).mean;for(var q=this.getEvent(n).data.getData(),r=0;r<q.length;r++){var s=q[r];hasOwnProperty(s,"val_orig")&&(s.val=s.val_orig);var w=s.val;s.val_orig=w;isNumerical(w)&&(s.val=w-b[n],l.push(s.val))}}h.maxVal=jStat.max(l);h.minVal=jStat.min(l);return h};this.eventwiseMedianRescaling=function(){console.log("eventwiseMedianRescaling");
var e=this.getEventIdsByType();if(!hasOwnProperty(e,"expression data"))return console.log("no expression"),null;for(var e=e["expression data"],k={},d={stats:k},g=[],b=0;b<e.length;b++){var h=e[b],l=this.getEvent(h).data.getStats();k[h]={};k[h]=l;for(var l=this.getEvent(h).data.getData(),p=0;p<l.length;p++){var n=l[p];hasOwnProperty(n,"val_orig")&&(n.val=n.val_orig);var q=n.val;n.val_orig=q;isNumerical(q)&&(n.val=q-k[h].median,g.push(n.val))}}d.maxVal=jStat.max(g);d.minVal=jStat.min(g);return d};this.samplewiseMedianRescaling=
function(){console.log("samplewiseMedianRescaling");var e=this.getEventIdsByType();if(!hasOwnProperty(e,"expression data"))return console.log("no expression"),null;for(var e=e["expression data"],k={},d={stats:k},g=[],b=this.getAllSampleIds(),h=0;h<b.length;h++){var l=b[h];k[l]={};for(var p=this.getEventData([l]),n=[],q=0;q<e.length;q++){var r=e[q];if(hasOwnProperty(p,r)){if(r=p[r][0],r.id===l){hasOwnProperty(r,"val_orig")&&(r.val=r.val_orig);var s=r.val;r.val_orig=s;isNumerical(s)&&n.push(s)}}else console.log(r+
" was not found for "+l)}n=jStat.median(n);k[l]["samplewise median"]=n;if(NaN==n)console.log("sample median for "+l+" is NaN.");else for(q=0;q<e.length;q++)r=e[q],hasOwnProperty(p,r)?(r=p[r][0],r.id===l&&(hasOwnProperty(r,"val_orig")&&(r.val=r.val_orig),s=r.val,r.val_orig=s,isNumerical(s)&&(r.val=s-k[l]["samplewise median"],g.push(s)))):console.log(r+" was not found for "+l)}d.maxVal=jStat.max(g);d.minVal=jStat.min(g);return d};this.bivariateNormalization=function(){};this.fillInMissingSamples=function(e){for(var k=
this.getAllSampleIds(),d=this.getEventIdsByType(),g=0;g<getKeys(d).length;g++)for(var b=getKeys(d)[g],h=0;h<d[b].length;h++){var l=d[b][h],p=this.getEvent(l).data.getAllSampleIds();if(0!=k.length-p.length){for(var p=keepReplicates(k.concat(p),2,!0),n={},q=0;q<p.length;q++)n[p[q]]=e;this.getEvent(l).data.setData(n)}}}}function OD_event(e){this.metadata=new OD_eventMetadata(e);this.data=new OD_eventDataCollection}
function OD_eventMetadata(e){this.id=e.id;this.name=e.name;this.displayName=e.displayName;this.description=e.description;this.datatype=e.datatype;this.allowedValues=e.allowedValues;this.parents={};this.children={};this.addParent=function(e){this.parents[e]=e;return this};this.addChild=function(e){this.children[e]=e;return this};this.computeCompositeScore=function(e){return null}}
function OD_eventDataCollection(){function e(e,d){this.id=e;this.val=d}this.dataCollection=[];this.getValueCounts=function(e){var d={};e=this.getData(e);for(var g=0;g<e.length;g++){var b=e[g].val;hasOwnProperty(d,b)||(d[b]=0);d[b]+=1}return d};this.getValues=function(e){var d=this.getValueCounts(),d=getKeys(d);null!=e&&1==e&&(d=eliminateDuplicates(d));return d};this.setData=function(k,d){for(var g in k){var b=k[g];"NaN"!=b&&"null"!=b&&""!=b&&"N/A"!=b&&(null!=d&&1==d&&(b=parseFloat(b)),this.dataCollection.push(new e(g,
b)))}return this};this.getData=function(k){var d=this.getAllSampleIds(!0);null==k&&(k=getKeys(d));for(var g=[],b=0;b<k.length;b++){var h=k[b];h in d?g.push(this.dataCollection[d[h]]):g.push(new e(h,null))}return g};this.getAllSampleIds=function(e){for(var d={},g=0;g<this.dataCollection.length;g++)d[this.dataCollection[g].id]=g;return e?d:getKeys(d)};this.sortSamples=function(e,d){var g=this.getData(e),b=compareSamplesAsStrings;d=null==d?"categoric":d.toLowerCase();"numeric"==d||"expression"==d?b=
compareSamplesAsNumeric:"date"==d&&(b=compareSamplesAsDate);g.sort(b);for(var b=[],h=0;h<g.length;h++)b.push(g[h].id);return b};this.selectIds=function(e,d){for(var g=[],b=null==d?this.getData():this.getData(d),h=0;h<b.length;h++){var l=b[h];l.val==e&&g.push(l.id)}return g};this.getStats=function(e){var d={min:0,max:0,mean:0,median:0,sd:0,meddev:0,meandev:0},g=this.getAllSampleIds(!0);null==e&&(e=getKeys(g));for(var b=[],h=0;h<e.length;h++){var l=e[h];if(l in g){var l=this.dataCollection[g[l]],p=
null,p=hasOwnProperty(l,"val_orig")?l.val_orig:l.val;isNumerical(p)&&b.push(p)}}d.mean=jStat.mean(b);d.sd=jStat.stdev(b);d.median=jStat.median(b);d.meddev=jStat.meddev(b);d.meandev=jStat.meandev(b);d.min=jStat.min(b);d.max=jStat.max(b);return d}}
function sortingSteps(e){this.steps=[];null!=e&&(this.steps=e);this.getSteps=function(){return this.steps};this.getIndex=function(e){for(var d=0;d<this.steps.length;d++)if(this.steps[d].name==e)return d;return-1};this.addStep=function(e){var d=this.getIndex(e);0<=d?(e=this.steps.splice(d,1)[0],e.reverse=!e.reverse,this.steps.push(e)):this.steps.push({name:e,reverse:!1})};this.removeStep=function(e){e=this.getIndex(e);0<=e&&this.steps.splice(e,1)};this.clearSteps=function(){this.steps.splice(0,this.steps.length)}}
function sampleSelectionCriteria(){this.criteria=[];this.getCriteria=function(){return this.criteria};this.addCriteria=function(e,k){var d={eventId:e,value:k},g;for(g in this.criteria)if(JSON.stringify(this.criteria[g])==JSON.stringify(d))return;this.criteria.push(d)};this.removeCriteria=function(e,k){for(var d=0;d<this.criteria.length;d++)if(this.criteria[d].eventId==e&&this.criteria[d].value==k){this.criteria.splice(d,1);break}};this.clearCriteria=function(){this.criteria.splice(0,this.criteria.length)}}
;function transposeClinicalData(e,k){for(var d={},g=0;g<e.length;g++){var b=e[g],h=b[k],l;for(l in b)l in d||(d[l]={}),d[l][h]=b[l]}return d}
function getClinicalData(e,k){for(var d=getResponse(e).split("\n"),g=[],b=[],h=[],l=0;l<d.length;l++){var p=d[l];beginsWith(p,"#")?b.push(p):beginsWith(p,"STRING")?h=p.split("\t"):g.push(p)}d=d3.tsv.parse(g.join("\n"));g=transposeClinicalData(d,"SAMPLE_ID");delete g.SAMPLE_ID;b=getKeys(g);for(l=0;l<b.length;l++){var p=b[l],n=g[p],q=h[l+1],r="categoric";"number"==q.toLowerCase()?r="numeric":"date"==q.toLowerCase()&&(r="date");k.addEvent({id:p,name:null,displayName:null,description:null,datatype:"clinical data",
allowedValues:r},n)}return d}function getClinicalData_old(e,k){var d=getResponse(e),d=d3.tsv.parse(d),d=transposeClinicalData(d,"CASE_ID"),g;for(g in d){var b=d[g],h=g,l=endsWith(h.toLowerCase(),"_score")?"numeric":"categoric";k.addEvent({id:h,name:null,displayName:null,description:null,datatype:"clinical data",allowedValues:l},b)}}
function getMutationData(e,k){for(var d=getResponse(e),g=d3.tsv.parse(d),d={},b=0;b<g.length;b++){var h=g[b],l=h.Hugo_Symbol,h=h.Tumor_Sample_Barcode,h=h.replace(/_/g,"-"),h=h.replace(/[A-Z]$/,"");hasOwnProperty(d,l)||(d[l]={},d[l].metadata={id:l+"_mut",name:null,displayName:null,description:null,datatype:"mutation data",allowedValues:"categoric"},d[l].data={});d[l].data[h]=!0}g=getKeys(d);for(b=0;b<g.length;b++)l=d[g[b]],k.addEvent(l.metadata,l.data);return d}
function getMutationData_old(e){var k=getResponse(e).split("\n"),d=[],g=[];for(e=0;e<k.length;e++){var b=k[e];beginsWith(b,"#")?g.push(b):d.push(b)}k=d3.tsv.parse(d.join("\n"));for(e=0;e<k.length;e++)d=k[e],g=d.COMMON,delete d.GENE_ID,delete d.COMMON,OD_eventAlbum.addEvent({id:g+"_mutation",name:null,displayName:null,description:null,datatype:"mutation",allowedValues:"numeric"},d);return k}
function getExpressionData(e,k){var d=getResponse(e),d=d3.tsv.parse(d),g;for(g in d){var b=d[g],h=b[""];delete b[""];k.addEvent({id:h+"_mRNA",name:null,displayName:null,description:null,datatype:"expression data",allowedValues:"expression"},b)}}
mongoClinicalData=function(e,k){for(var d=0;d<e.length;d++){var g=e[d],b=null;if(hasOwnProperty(g,"sample"))b=g.sample;else if(hasOwnProperty(g,"Sample"))b=g.Sample;else{console.log("no sample ID found in clinical doc: "+prettyJson(g));continue}b=b.trim();if("Patient ID"!=b)for(var h=getKeys(g),l=0;l<h.length;l++){var p=h[l];if(!isObjInArray(["_id","sample","Sample"],p)){var n=k.getEvent(p);null==n&&(k.addEvent({id:p,name:null,displayName:null,description:null,datatype:"clinical data",allowedValues:"categoric"},
[]),n=k.getEvent(p));var q={};q[b]=g[p];n.data.setData(q)}}}return null};
mongoExpressionData=function(e,k){for(var d=0;d<e.length;d++){var g=e[d],b=null;if(hasOwnProperty(g,"gene"))b=g.gene;else if(hasOwnProperty(g,"id"))b=g.id;else{console.log("no gene identifier found in expression doc: "+prettyJson(g));continue}for(var b=b.trim(),b=b+"_mRNA",h=getKeys(g),l=0;l<h.length;l++){var p=h[l];if(!isObjInArray(["_id","gene","id"],p)){var n=k.getEvent(b);null==n&&(k.addEvent({id:b,name:null,displayName:null,description:null,datatype:"expression data",allowedValues:"numeric"},
[]),n=k.getEvent(b));var q={};q[p]=parseFloat(g[p]);n.data.setData(q)}}}return null};buildObservationDeck=function(e,k){k=getConfiguration(k);k.containerDivId=e.id;drawMatrix(e,k);setupContextMenus(k)};
getConfiguration=function(e){var k=parseJson(getCookie("od_config"))||{};e.querySettings=k;k=null;"eventAlbum"in e?k=e.eventAlbum:(k=new OD_eventAlbum,e.eventAlbum=k);"clinicalUrl"in e&&getClinicalData(e.clinicalUrl,k);"expressionUrl"in e&&getExpressionData(e.expressionUrl,k);"mutationUrl"in e&&getMutationData(e.mutationUrl,k);if("mongoData"in e){var d=e.mongoData;"clinical"in d&&mongoClinicalData(d.clinical,k);"expression"in d&&mongoExpressionData(d.expression,k)}var k=e.eventAlbum.getEventIdsByType(),
g;for(g in k);return e};setupContextMenus=function(e){for(var k=[".colLabel",".rowLabel",".mrna_exp",".categoric"],d=0;d<k.length;d++)$.contextMenu("destroy",k[d]);setupColLabelContextMenu(e);setupRowLabelContextMenu(e);setupCategoricCellContextMenu(e);setupExpressionCellContextMenu(e)};resetConfig=function(e){deleteCookie("od_config");for(var k=getKeys(e),d=0;d<k.length;d++){var g=k[d];isObjInArray(["mongoData","containerDivId"],g)||delete e[g]}};
setupColLabelContextMenu=function(e){$.contextMenu({selector:".colLabel",callback:function(e,d){var g=this[0].__data__,b=0<=this[0].getAttribute("class").indexOf("axis")?!0:!1;b&&(b=0<=this[0].getAttribute("class").indexOf("rowLabel")?"row":"column");console.log(e,g,b)},items:{reset:{name:"reset",icon:null,disabled:!1,callback:function(k,d){resetConfig(e);var g=document.getElementById(e.containerDivId);buildObservationDeck(g,e)}}}})};
setupRowLabelContextMenu=function(e){$.contextMenu({selector:".rowLabel",callback:function(e,d){var g=this[0].__data__,b=0<=this[0].getAttribute("class").indexOf("axis")?!0:!1;b&&(b=0<=this[0].getAttribute("class").indexOf("rowLabel")?"row":"column");console.log(e,g,b)},items:{sort:{name:"sort",icon:null,disabled:!1,callback:function(k,d){var g=this[0].__data__,b=0<=this[0].getAttribute("class").indexOf("axis")?!0:!1;if(b){var b=0<=this[0].getAttribute("class").indexOf("rowLabel")?"row":"column",
h="colSort";"row"!=b&&(h="rowSort");var b=null,l=e.querySettings,b=h in l?new sortingSteps(l[h].steps):new sortingSteps;b.addStep(g);l[h]=b;setCookie("od_config",JSON.stringify(l));g=document.getElementById(e.containerDivId);buildObservationDeck(g,e)}else console.log("exit out because not a row or a column")}},sep1:"---------",expand:{name:"expand",icon:null,disabled:!0},collapse:{name:"collapse",icon:null,disabled:!0},reset:{name:"reset",icon:null,disabled:!1,callback:function(k,d){resetConfig(e);
var g=document.getElementById(e.containerDivId);buildObservationDeck(g,e)}}}})};
setupExpressionCellContextMenu=function(e){$.contextMenu({selector:".mrna_exp",callback:function(e,d){},items:{"samplewise median rescaling":{name:"samplewise median rescaling",icon:null,disabled:!1,callback:function(k,d){var g=e.querySettings;g["expression rescaling"]={method:"samplewiseMedianRescaling"};setCookie("od_config",JSON.stringify(g));g=document.getElementById(e.containerDivId);buildObservationDeck(g,e)}},"eventwise median rescaling":{name:"eventwise median rescaling",icon:null,disabled:!1,
callback:function(k,d){var g=e.querySettings;g["expression rescaling"]={method:"eventwiseMedianRescaling"};setCookie("od_config",JSON.stringify(g));g=document.getElementById(e.containerDivId);buildObservationDeck(g,e)}},"eventwise z-score rescaling":{name:"eventwise z-score rescaling",icon:null,disabled:!1,callback:function(k,d){var g=e.querySettings;g["expression rescaling"]={method:"zScoreExpressionRescaling"};setCookie("od_config",JSON.stringify(g));g=document.getElementById(e.containerDivId);
buildObservationDeck(g,e)}},sep1:"---------",reset:{name:"reset",icon:null,disabled:!1,callback:function(k,d){resetConfig(e);var g=document.getElementById(e.containerDivId);buildObservationDeck(g,e)}}}})};
setupCategoricCellContextMenu=function(e){$.contextMenu({selector:".categoric",callback:function(e,d){},items:{"yulia expression rescaling":{name:"yulia expression rescaling",icon:null,disabled:!1,callback:function(k,d){var g=this[0],b=g.getAttribute("eventId");g.getAttribute("sampleId");g=g.getAttribute("val");console.log("key:",k,"eventId:",b,"val:",g);console.log("href",window.location.href);console.log("host",window.location.host);console.log("pathname",window.location.pathname);console.log("search",
window.location.search);var h=e.querySettings;h["expression rescaling"]={method:"yulia_rescaling",eventId:b,val:g};setCookie("od_config",JSON.stringify(h));b=document.getElementById(e.containerDivId);buildObservationDeck(b,e)}},sep1:"---------",reset:{name:"reset",icon:null,disabled:!1,callback:function(k,d){resetConfig(e);var g=document.getElementById(e.containerDivId);buildObservationDeck(g,e)}}}})};
drawMatrix=function(e,k){k.rowClickback=function(b,d){var e=k.eventAlbum.getEvent(b).metadata.datatype;"expression data"===e?(e="/wb/gene/"+b.replace("_mRNA",""),window.open(e,"_self")):"clinical data"===e?window.open("/wb/clinical/"+b,"_self"):alert("open page for event: "+b+" of datatype: "+e)};k.columnClickback=function(b,d){window.open("/wb/patient/"+b,"_self")};k.cellClickback=function(b,d){console.log("cellClickback: r"+b.eventId+" c"+b.id+" val:"+b.val)};k.rowRightClickback=function(b,d){console.log("rowRightClickback: "+
b);d3.event.preventDefault()};k.columnRightClickback=function(b,d){console.log("columnRightClickback: "+b);d3.event.preventDefault()};k.cellRightClickback=function(b,d){console.log("cellRightClickback: r"+b.eventId+" c"+b.id+" val:"+b.val);d3.event.preventDefault()};var d=removeChildElems(e),g=k.eventAlbum;g.fillInMissingSamples(null);var b=g.getEventIdsByType(),h=[],l;for(l in b)h=h.concat(b[l]);var p=k.querySettings,n=null;hasOwnProperty(b,"expression data")&&hasOwnProperty(p,"expression rescaling")?
(b=p["expression rescaling"],"yulia_rescaling"===b.method?n=g.yuliaExpressionRescaling(b.eventId,b.val):"eventwiseMedianRescaling"===b.method?n=g.eventwiseMedianRescaling():"zScoreExpressionRescaling"===b.method?n=g.zScoreExpressionRescaling():"samplewiseMedianRescaling"===b.method&&(n=g.samplewiseMedianRescaling())):console.log("no expression data rescaling");b=centeredRgbaColorMapper(!1);null!=n&&(b=centeredRgbaColorMapper(!1,0,n.minVal,n.maxVal));var q={};for(l=0;l<h.length;l++){var r=h[l],s=g.getEvent(r).metadata.allowedValues;
if("categoric"==s)q[r]=d3.scale.category10();else if("numeric"==s){for(var w=g.getEvent(r).data.getValues(),s=[],u=0;u<w.length;u++){var x=w[u];isNumerical(x)&&s.push(x)}w=Math.min.apply(null,s);s=Math.max.apply(null,s);q[r]=centeredRgbaColorMapper(!1,0,w,s)}else q[r]="expression"==s?b:d3.scale.category10()}r=b=null;if("colSort"in p)for(r=new sortingSteps(p.colSort.steps),l=r.getSteps().length-1;0<=l;l--)s=r.steps[l],s=s.name,g.getEvent(s)||(console.log(s,"not found, skip sorting by that event"),
r.removeStep(s));var b=g.multisortSamples(r),y={};for(l in b)s=b[l],y[s]=l;p=[];if(null!=r){w=r.getSteps();for(u=0;u<w.length;u++)s=w[u],r=s.name,p.push(r);p.reverse()}for(s=0;s<h.length;s++)r=h[s],isObjInArray(p,r)||p.push(r);var L={};for(l in p)s=p[l],L[s]=l;h=lengthOfLongestString(b);l=lengthOfLongestString(p);h=3<h?9*h:30;l=1<l?8*l:15;var r=document.documentElement.clientWidth,M=Math.floor((r-l-0)/(b.length>p.length?b.length:p.length)),s=h+0+M*p.length,d=d3.select(d).append("svg").attr({width:r,
height:s,viewBox:"0 0 "+r+" "+s,perserveAspectRatio:"xMinYMin meet"}).append("g").attr({transform:"translate("+l+","+h+")"}),h=-6;l=M/1.5;h=d.selectAll(".rowLabel").data(p).enter().append("text").text(function(b){return b}).attr({x:0,y:function(b,d){return d*M},transform:"translate("+h+", "+l+")","class":function(b,d){return"rowLabel mono axis unselectable"}}).style("text-anchor","end");h.on("click",k.rowClickback);h.on("contextmenu",k.rowRightClickback);h.append("title").text(function(b){var d=g.getEvent(b).metadata.datatype,
e="event: "+b+"\ndatatype: "+d;"expression data"===d&&null!=n&&hasOwnProperty(n,"stats")&&(e=e+"\nraw data stats: "+prettyJson(n.stats[b]));return e});h=Math.floor(M/5);l=-1*Math.floor(M/3);h=d.selectAll(".colLabel").data(b).enter().append("text").text(function(b){return b}).attr({y:function(b,d){return(d+1)*M},x:0,transform:"rotate(-90) translate("+h+", "+l+")","class":function(b,d){return"colLabel mono axis unselectable"}}).style("text-anchor","start");h.on("click",k.columnClickback);h.on("contextmenu",
k.columnRightClickback);h.append("title").text(function(b){return"sample: "+b});h=g.getAllDataAsList();d=d.selectAll(".cell").data(h).enter().append(function(b){var d=document.createElementNS(svgNamespaceUri,"g");d.setAttributeNS(null,"class","cell");var e=y[b.id]*M,h=L[b.eventId]*M,k,l,n=M,p=M,r={"class":"bordered"};k=b.eventId;r.fill=null==k||null==b.val?"lightgrey":"white";d.appendChild(createSvgRectElement(e,h,4,4,n,p,r));if(null==k||null==b.val)return d;r=b.val;e=y[b.id]*M;h=L[b.eventId]*M;l=
k=4;p=n=M;r={stroke:"#E6E6E6","stroke-width":"2px",fill:(0,q[b.eventId])(r)};"categoric"===g.getEvent(b.eventId).metadata.allowedValues?(r["class"]="categoric",r.eventId=b.eventId,r.sampleId=b.id,r.val=b.val):"expression data"===g.getEvent(b.eventId).metadata.datatype&&(r["class"]="mrna_exp",r.eventId=b.eventId,r.sampleId=b.id,r.val=b.val);d.appendChild(createSvgRectElement(e,h,k,l,n,p,r));return d});d.on("click",k.cellClickback).on("contextmenu",k.cellRightClickback);d.append("title").text(function(b){return"event: "+
b.eventId+"\nsample: "+b.id+"\nvalue: "+b.val});return k};
