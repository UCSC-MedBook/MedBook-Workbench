(function(e,k){function d(b){b=b.split(/\s+/);for(var e=[],d=0,g;g=b[d];d++)g=g[0].toUpperCase(),e.push(g);return e}function h(b){return b.id&&e('label[for="'+b.id+'"]').val()||b.name}function b(d,g,m){m||(m=0);g.each(function(){var g=e(this),n=this,p=this.nodeName.toLowerCase(),q,r;"label"==p&&g.find("input, textarea, select").length&&(q=g.text(),g=g.children().first(),n=g.get(0),p=n.nodeName.toLowerCase());switch(p){case "menu":r={name:g.attr("label"),items:{}};m=b(r.items,g.children(),m);break;
case "a":case "button":r={name:g.text(),disabled:!!g.attr("disabled"),callback:function(){return function(){g.click()}}()};break;case "menuitem":case "command":switch(g.attr("type")){case k:case "command":case "menuitem":r={name:g.attr("label"),disabled:!!g.attr("disabled"),callback:function(){return function(){g.click()}}()};break;case "checkbox":r={type:"checkbox",disabled:!!g.attr("disabled"),name:g.attr("label"),selected:!!g.attr("checked")};break;case "radio":r={type:"radio",disabled:!!g.attr("disabled"),
name:g.attr("label"),radio:g.attr("radiogroup"),value:g.attr("id"),selected:!!g.attr("checked")};break;default:r=k}break;case "hr":r="-------";break;case "input":switch(g.attr("type")){case "text":r={type:"text",name:q||h(n),disabled:!!g.attr("disabled"),value:g.val()};break;case "checkbox":r={type:"checkbox",name:q||h(n),disabled:!!g.attr("disabled"),selected:!!g.attr("checked")};break;case "radio":r={type:"radio",name:q||h(n),disabled:!!g.attr("disabled"),radio:!!g.attr("name"),value:g.val(),selected:!!g.attr("checked")};
break;default:r=k}break;case "select":r={type:"select",name:q||h(n),disabled:!!g.attr("disabled"),selected:g.val(),options:{}};g.children().each(function(){r.options[this.value]=e(this).text()});break;case "textarea":r={type:"textarea",name:q||h(n),disabled:!!g.attr("disabled"),value:g.val()};break;case "label":break;default:r={type:"html",html:g.clone(!0)}}r&&(m++,d["key"+m]=r)});return m}e.support.htmlMenuitem="HTMLMenuItemElement"in window;e.support.htmlCommand="HTMLCommandElement"in window;e.support.eventSelectstart=
"onselectstart"in document.documentElement;if(!e.ui||!e.ui.widget){var g=e.cleanData;e.cleanData=function(b){for(var d=0,h;null!=(h=b[d]);d++)try{e(h).triggerHandler("remove")}catch(k){}g(b)}}var m=null,p=!1,n=e(window),q=0,r={},t={},x={},v={selector:null,appendTo:null,trigger:"right",autoHide:!1,delay:200,reposition:!0,determinePosition:function(b){if(e.ui&&e.ui.position)b.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none");
else{var d=this.offset();d.top+=this.outerHeight();d.left+=this.outerWidth()/2-b.outerWidth()/2;b.css(d)}},position:function(b,e,d){if(e||d){e="maintain"===e&&"maintain"===d?b.$menu.position():{top:d,left:e};d=n.scrollTop()+n.height();var g=n.scrollLeft()+n.width(),h=b.$menu.height(),k=b.$menu.width();e.top+h>d&&(e.top-=h);e.left+k>g&&(e.left-=k);b.$menu.css(e)}else b.determinePosition.call(this,b.$menu)},positionSubmenu:function(b){if(e.ui&&e.ui.position)b.css("display","block").position({my:"left top",
at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var d={top:0,left:this.outerWidth()};b.css(d)}},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{show:e.noop,hide:e.noop},callback:null,items:{}},w=null,y=null,E=null,O,Ma=function(b){for(var e=0;e=Math.max(e,parseInt(b.css("z-index"),10)||0),b=b.parent(),b&&b.length&&!(-1<"html body".indexOf(b.prop("nodeName").toLowerCase())););return e},D={abortevent:function(b){b.preventDefault();b.stopImmediatePropagation()},
contextmenu:function(b){var d=e(this);b.preventDefault();b.stopImmediatePropagation();if(!("right"!=b.data.trigger&&b.originalEvent||d.hasClass("context-menu-active")||d.hasClass("context-menu-disabled"))){m=d;if(b.data.build){var g=b.data.build(m,b);if(!1===g)return;b.data=e.extend(!0,{},v,b.data,g||{});if(!b.data.items||e.isEmptyObject(b.data.items))throw window.console&&(console.error||console.log)("No items specified to show in contextMenu"),Error("No Items specified");b.data.$trigger=m;T.create(b.data)}T.show.call(d,
b.data,b.pageX,b.pageY)}},click:function(b){b.preventDefault();b.stopImmediatePropagation();e(this).trigger(e.Event("contextmenu",{data:b.data,pageX:b.pageX,pageY:b.pageY}))},mousedown:function(b){var d=e(this);m&&m.length&&!m.is(d)&&m.data("contextMenu").$menu.trigger("contextmenu:hide");2==b.button&&(m=d.data("contextMenuActive",!0))},mouseup:function(b){var d=e(this);d.data("contextMenuActive")&&m&&m.length&&m.is(d)&&!d.hasClass("context-menu-disabled")&&(b.preventDefault(),b.stopImmediatePropagation(),
m=d,d.trigger(e.Event("contextmenu",{data:b.data,pageX:b.pageX,pageY:b.pageY})));d.removeData("contextMenuActive")},mouseenter:function(b){var d=e(this),g=e(b.relatedTarget),h=e(document);g.is(".context-menu-list")||g.closest(".context-menu-list").length||m&&m.length||(y=b.pageX,E=b.pageY,O=b.data,h.on("mousemove.contextMenuShow",D.mousemove),w=setTimeout(function(){w=null;h.off("mousemove.contextMenuShow");m=d;d.trigger(e.Event("contextmenu",{data:O,pageX:y,pageY:E}))},b.data.delay))},mousemove:function(b){y=
b.pageX;E=b.pageY},mouseleave:function(b){b=e(b.relatedTarget);if(!b.is(".context-menu-list")&&!b.closest(".context-menu-list").length){try{clearTimeout(w)}catch(d){}w=null}},layerClick:function(b){var d=e(this).data("contextMenuRoot"),g=b.button,h=b.pageX,k=b.pageY,m,p;b.preventDefault();b.stopImmediatePropagation();setTimeout(function(){var q,r="left"==d.trigger&&0===g||"right"==d.trigger&&2===g;document.elementFromPoint&&(d.$layer.hide(),m=document.elementFromPoint(h-n.scrollLeft(),k-n.scrollTop()),
d.$layer.show());if(d.reposition&&r)if(document.elementFromPoint){if(d.$trigger.is(m)||d.$trigger.has(m).length){d.position.call(d.$trigger,d,h,k);return}}else if(p=d.$trigger.offset(),q=e(window),p.top+=q.scrollTop(),p.top<=b.pageY&&(p.left+=q.scrollLeft(),p.left<=b.pageX&&(p.bottom=p.top+d.$trigger.outerHeight(),p.bottom>=b.pageY&&(p.right=p.left+d.$trigger.outerWidth(),p.right>=b.pageX)))){d.position.call(d.$trigger,d,h,k);return}if(m&&r)d.$trigger.one("contextmenu:hidden",function(){e(m).contextMenu({x:h,
y:k})});d.$menu.trigger("contextmenu:hide")},50)},keyStop:function(b,e){e.isInput||b.preventDefault();b.stopPropagation()},key:function(b){var e=m.data("contextMenu")||{};switch(b.keyCode){case 9:case 38:if(D.keyStop(b,e),e.isInput){if(9==b.keyCode&&b.shiftKey){b.preventDefault();e.$selected&&e.$selected.find("input, textarea, select").blur();e.$menu.trigger("prevcommand");return}if(38==b.keyCode&&"checkbox"==e.$selected.find("input, textarea, select").prop("type")){b.preventDefault();return}}else if(9!=
b.keyCode||b.shiftKey){e.$menu.trigger("prevcommand");return}case 40:D.keyStop(b,e);if(e.isInput){if(9==b.keyCode){b.preventDefault();e.$selected&&e.$selected.find("input, textarea, select").blur();e.$menu.trigger("nextcommand");return}if(40==b.keyCode&&"checkbox"==e.$selected.find("input, textarea, select").prop("type")){b.preventDefault();return}}else{e.$menu.trigger("nextcommand");return}break;case 37:D.keyStop(b,e);if(e.isInput||!e.$selected||!e.$selected.length)break;if(!e.$selected.parent().hasClass("context-menu-root")){b=
e.$selected.parent().parent();e.$selected.trigger("contextmenu:blur");e.$selected=b;return}break;case 39:D.keyStop(b,e);if(e.isInput||!e.$selected||!e.$selected.length)break;var d=e.$selected.data("contextMenu")||{};if(d.$menu&&e.$selected.hasClass("context-menu-submenu")){e.$selected=null;d.$selected=null;d.$menu.trigger("nextcommand");return}break;case 35:case 36:e.$selected&&e.$selected.find("input, textarea, select").length||((e.$selected&&e.$selected.parent()||e.$menu).children(":not(.disabled, .not-selectable)")[36==
b.keyCode?"first":"last"]().trigger("contextmenu:focus"),b.preventDefault());return;case 13:D.keyStop(b,e);if(e.isInput){if(e.$selected&&!e.$selected.is("textarea, select")){b.preventDefault();return}break}e.$selected&&e.$selected.trigger("mouseup");return;case 32:case 33:case 34:D.keyStop(b,e);return;case 27:D.keyStop(b,e);e.$menu.trigger("contextmenu:hide");return;default:if(d=String.fromCharCode(b.keyCode).toUpperCase(),e.accesskeys[d]){e.accesskeys[d].$node.trigger(e.accesskeys[d].$menu?"contextmenu:focus":
"mouseup");return}}b.stopPropagation();e.$selected&&e.$selected.trigger(b)},prevItem:function(b){b.stopPropagation();var d=e(this).data("contextMenu")||{};if(d.$selected){var g=d.$selected,d=d.$selected.parent().data("contextMenu")||{};d.$selected=g}for(var g=d.$menu.children(),h=d.$selected&&d.$selected.prev().length?d.$selected.prev():g.last(),k=h;h.hasClass("disabled")||h.hasClass("not-selectable");)if(h=h.prev().length?h.prev():g.last(),h.is(k))return;d.$selected&&D.itemMouseleave.call(d.$selected.get(0),
b);D.itemMouseenter.call(h.get(0),b);b=h.find("input, textarea, select");b.length&&b.focus()},nextItem:function(b){b.stopPropagation();var d=e(this).data("contextMenu")||{};if(d.$selected){var g=d.$selected,d=d.$selected.parent().data("contextMenu")||{};d.$selected=g}for(var g=d.$menu.children(),h=d.$selected&&d.$selected.next().length?d.$selected.next():g.first(),k=h;h.hasClass("disabled")||h.hasClass("not-selectable");)if(h=h.next().length?h.next():g.first(),h.is(k))return;d.$selected&&D.itemMouseleave.call(d.$selected.get(0),
b);D.itemMouseenter.call(h.get(0),b);b=h.find("input, textarea, select");b.length&&b.focus()},focusInput:function(b){b=e(this).closest(".context-menu-item");var d=b.data(),g=d.contextMenu,d=d.contextMenuRoot;d.$selected=g.$selected=b;d.isInput=g.isInput=!0},blurInput:function(b){b=e(this).closest(".context-menu-item").data();b.contextMenuRoot.isInput=b.contextMenu.isInput=!1},menuMouseenter:function(b){e(this).data().contextMenuRoot.hovering=!0},menuMouseleave:function(b){var d=e(this).data().contextMenuRoot;
d.$layer&&d.$layer.is(b.relatedTarget)&&(d.hovering=!1)},itemMouseenter:function(b){var d=e(this),g=d.data(),h=g.contextMenu,g=g.contextMenuRoot;g.hovering=!0;b&&g.$layer&&g.$layer.is(b.relatedTarget)&&(b.preventDefault(),b.stopImmediatePropagation());(h.$menu?h:g).$menu.children(".hover").trigger("contextmenu:blur");d.hasClass("disabled")||d.hasClass("not-selectable")?h.$selected=null:d.trigger("contextmenu:focus")},itemMouseleave:function(b){var d=e(this),g=d.data(),h=g.contextMenu,g=g.contextMenuRoot;
g!==h&&g.$layer&&g.$layer.is(b.relatedTarget)?(g.$selected&&g.$selected.trigger("contextmenu:blur"),b.preventDefault(),b.stopImmediatePropagation(),g.$selected=h.$selected=h.$node):d.trigger("contextmenu:blur")},itemClick:function(b){var d=e(this),g=d.data(),h=g.contextMenuRoot,k=g.contextMenuKey;if(g.contextMenu.items[k]&&!d.is(".disabled, .context-menu-submenu, .context-menu-separator, .not-selectable")){b.preventDefault();b.stopImmediatePropagation();if(e.isFunction(h.callbacks[k])&&Object.prototype.hasOwnProperty.call(h.callbacks,
k))b=h.callbacks[k];else if(e.isFunction(h.callback))b=h.callback;else return;!1!==b.call(h.$trigger,k,h)?h.$menu.trigger("contextmenu:hide"):h.$menu.parent().length&&T.update.call(h.$trigger,h)}},inputClick:function(b){b.stopImmediatePropagation()},hideMenu:function(b,d){var g=e(this).data("contextMenuRoot");T.hide.call(g.$trigger,g,d&&d.force)},focusItem:function(b){b.stopPropagation();b=e(this);var d=b.data(),g=d.contextMenu,d=d.contextMenuRoot;b.addClass("hover").siblings(".hover").trigger("contextmenu:blur");
g.$selected=d.$selected=b;g.$node&&d.positionSubmenu.call(g.$node,g.$menu)},blurItem:function(b){b.stopPropagation();b=e(this);var d=b.data().contextMenu;b.removeClass("hover");d.$selected=null}},T={show:function(b,d,g){var h=e(this),k={};e("#context-menu-layer").trigger("mousedown");b.$trigger=h;if(!1===b.events.show.call(h,b))m=null;else if(T.update.call(h,b),b.position.call(h,b,d,g),b.zIndex&&(k.zIndex=Ma(h)+b.zIndex),T.layer.call(b.$menu,b,k.zIndex),b.$menu.find("ul").css("zIndex",k.zIndex+1),
b.$menu.css(k)[b.animation.show](b.animation.duration,function(){h.trigger("contextmenu:visible")}),h.data("contextMenu",b).addClass("context-menu-active"),e(document).off("keydown.contextMenu").on("keydown.contextMenu",D.key),b.autoHide)e(document).on("mousemove.contextMenuAutoHide",function(e){var d=h.offset();d.right=d.left+h.outerWidth();d.bottom=d.top+h.outerHeight();!b.$layer||b.hovering||e.pageX>=d.left&&e.pageX<=d.right&&e.pageY>=d.top&&e.pageY<=d.bottom||b.$menu.trigger("contextmenu:hide")})},
hide:function(b,d){var g=e(this);b||(b=g.data("contextMenu")||{});if(d||!b.events||!1!==b.events.hide.call(g,b)){g.removeData("contextMenu").removeClass("context-menu-active");if(b.$layer){setTimeout(function(b){return function(){b.remove()}}(b.$layer),10);try{delete b.$layer}catch(h){b.$layer=null}}m=null;b.$menu.find(".hover").trigger("contextmenu:blur");b.$selected=null;e(document).off(".contextMenuAutoHide").off("keydown.contextMenu");b.$menu&&b.$menu[b.animation.hide](b.animation.duration,function(){b.build&&
(b.$menu.remove(),e.each(b,function(d,e){switch(d){case "ns":case "selector":case "build":case "trigger":return!0;default:b[d]=k;try{delete b[d]}catch(g){}return!0}}));setTimeout(function(){g.trigger("contextmenu:hidden")},10)})}},create:function(b,g){g===k&&(g=b);b.$menu=e('<ul class="context-menu-list"></ul>').addClass(b.className||"").data({contextMenu:b,contextMenuRoot:g});e.each(["callbacks","commands","inputs"],function(d,e){b[e]={};g[e]||(g[e]={})});g.accesskeys||(g.accesskeys={});e.each(b.items,
function(h,k){var m=e('<li class="context-menu-item"></li>').addClass(k.className||""),n=null,p=null;m.on("click",e.noop);k.$node=m.data({contextMenu:b,contextMenuRoot:g,contextMenuKey:h});if(k.accesskey)for(var q=d(k.accesskey),r=0,t;t=q[r];r++)if(!g.accesskeys[t]){g.accesskeys[t]=k;k._name=k.name.replace(new RegExp("("+t+")","i"),'<span class="context-menu-accesskey">$1</span>');break}if("string"==typeof k)m.addClass("context-menu-separator not-selectable");else if(k.type&&x[k.type])x[k.type].call(m,
k,b,g),e.each([b,g],function(b,d){d.commands[h]=k;e.isFunction(k.callback)&&(d.callbacks[h]=k.callback)});else{"html"==k.type?m.addClass("context-menu-html not-selectable"):k.type?(n=e("<label></label>").appendTo(m),e("<span></span>").html(k._name||k.name).appendTo(n),m.addClass("context-menu-input"),b.hasTypes=!0,e.each([b,g],function(b,d){d.commands[h]=k;d.inputs[h]=k})):k.items&&(k.type="sub");switch(k.type){case "text":p=e('<input type="text" value="1" name="" value="">').attr("name","context-menu-input-"+
h).val(k.value||"").appendTo(n);break;case "textarea":p=e('<textarea name=""></textarea>').attr("name","context-menu-input-"+h).val(k.value||"").appendTo(n);k.height&&p.height(k.height);break;case "checkbox":p=e('<input type="checkbox" value="1" name="" value="">').attr("name","context-menu-input-"+h).val(k.value||"").prop("checked",!!k.selected).prependTo(n);break;case "radio":p=e('<input type="radio" value="1" name="" value="">').attr("name","context-menu-input-"+k.radio).val(k.value||"").prop("checked",
!!k.selected).prependTo(n);break;case "select":p=e('<select name="">').attr("name","context-menu-input-"+h).appendTo(n);k.options&&(e.each(k.options,function(b,d){e("<option></option>").val(b).text(d).appendTo(p)}),p.val(k.selected));break;case "sub":e("<span></span>").html(k._name||k.name).appendTo(m);k.appendTo=k.$node;T.create(k,g);m.data("contextMenu",k).addClass("context-menu-submenu");k.callback=null;break;case "html":e(k.html).appendTo(m);break;default:e.each([b,g],function(b,d){d.commands[h]=
k;e.isFunction(k.callback)&&(d.callbacks[h]=k.callback)}),e("<span></span>").html(k._name||k.name||"").appendTo(m)}if(k.type&&"sub"!=k.type&&"html"!=k.type&&(p.on("focus",D.focusInput).on("blur",D.blurInput),k.events))p.on(k.events,b);k.icon&&m.addClass("icon icon-"+k.icon)}k.$input=p;k.$label=n;m.appendTo(b.$menu);if(!b.hasTypes&&e.support.eventSelectstart)m.on("selectstart.disableTextSelect",D.abortevent)});b.$node||b.$menu.css("display","none").addClass("context-menu-root");b.$menu.appendTo(b.appendTo||
document.body)},resize:function(b,d){b.css({position:"absolute",display:"block"});b.data("width",Math.ceil(b.width())+1);b.css({position:"static",minWidth:"0px",maxWidth:"100000px"});b.find("> li > ul").each(function(){T.resize(e(this),!0)});d||b.find("ul").andSelf().css({position:"",display:"",minWidth:"",maxWidth:""}).width(function(){return e(this).data("width")})},update:function(b,d){var g=this;d===k&&(d=b,T.resize(b.$menu));b.$menu.children().each(function(){var h=e(this),k=h.data("contextMenuKey"),
m=b.items[k],k=e.isFunction(m.disabled)&&m.disabled.call(g,k,d)||!0===m.disabled;h[k?"addClass":"removeClass"]("disabled");if(m.type)switch(h.find("input, select, textarea").prop("disabled",k),m.type){case "text":case "textarea":m.$input.val(m.value||"");break;case "checkbox":case "radio":m.$input.val(m.value||"").prop("checked",!!m.selected);break;case "select":m.$input.val(m.selected||"")}m.$menu&&T.update.call(g,m,d)})},layer:function(b,d){var g=b.$layer=e('<div id="context-menu-layer" style="position:fixed; z-index:'+
d+'; top:0; left:0; opacity: 0; filter: alpha(opacity=0); background-color: #000;"></div>').css({height:n.height(),width:n.width(),display:"block"}).data("contextMenuRoot",b).insertBefore(this).on("contextmenu",D.abortevent).on("mousedown",D.layerClick);e.support.fixedPosition||g.css({position:"absolute",height:e(document).height()});return g}};e.fn.contextMenu=function(b){b===k?this.first().trigger("contextmenu"):b.x&&b.y?this.first().trigger(e.Event("contextmenu",{pageX:b.x,pageY:b.y})):"hide"===
b?(b=this.data("contextMenu").$menu)&&b.trigger("contextmenu:hide"):"destroy"===b?e.contextMenu("destroy",{context:this}):e.isPlainObject(b)?(b.context=this,e.contextMenu("create",b)):b?this.removeClass("context-menu-disabled"):b||this.addClass("context-menu-disabled");return this};e.contextMenu=function(b,d){"string"!=typeof b&&(d=b,b="create");"string"==typeof d?d={selector:d}:d===k&&(d={});var g=e.extend(!0,{},v,d||{}),h=e(document),m=h,n=!1;g.context&&g.context.length?(m=e(g.context).first(),
g.context=m.get(0),n=g.context!==document):g.context=document;switch(b){case "create":if(!g.selector)throw Error("No selector specified");if(g.selector.match(/.context-menu-(list|item|input)($|\s)/))throw Error('Cannot bind to selector "'+g.selector+'" as it contains a reserved className');if(!g.build&&(!g.items||e.isEmptyObject(g.items)))throw Error("No Items specified");q++;g.ns=".contextMenu"+q;n||(r[g.selector]=g.ns);t[g.ns]=g;g.trigger||(g.trigger="right");p||(h.on({"contextmenu:hide.contextMenu":D.hideMenu,
"prevcommand.contextMenu":D.prevItem,"nextcommand.contextMenu":D.nextItem,"contextmenu.contextMenu":D.abortevent,"mouseenter.contextMenu":D.menuMouseenter,"mouseleave.contextMenu":D.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",D.inputClick).on({"mouseup.contextMenu":D.itemClick,"contextmenu:focus.contextMenu":D.focusItem,"contextmenu:blur.contextMenu":D.blurItem,"contextmenu.contextMenu":D.abortevent,"mouseenter.contextMenu":D.itemMouseenter,"mouseleave.contextMenu":D.itemMouseleave},
".context-menu-item"),p=!0);m.on("contextmenu"+g.ns,g.selector,g,D.contextmenu);if(n)m.on("remove"+g.ns,function(){e(this).contextMenu("destroy")});switch(g.trigger){case "hover":m.on("mouseenter"+g.ns,g.selector,g,D.mouseenter).on("mouseleave"+g.ns,g.selector,g,D.mouseleave);break;case "left":m.on("click"+g.ns,g.selector,g,D.click)}g.build||T.create(g);break;case "destroy":var w;if(n){var x=g.context;e.each(t,function(b,d){if(d.context!==x)return!0;w=e(".context-menu-list").filter(":visible");w.length&&
w.data().contextMenuRoot.$trigger.is(e(d.context).find(d.selector))&&w.trigger("contextmenu:hide",{force:!0});try{t[d.ns].$menu&&t[d.ns].$menu.remove(),delete t[d.ns]}catch(g){t[d.ns]=null}e(d.context).off(d.ns);return!0})}else if(!g.selector)h.off(".contextMenu .contextMenuAutoHide"),e.each(t,function(b,d){e(d.context).off(d.ns)}),r={},t={},q=0,p=!1,e("#context-menu-layer, .context-menu-list").remove();else if(r[g.selector]){w=e(".context-menu-list").filter(":visible");w.length&&w.data().contextMenuRoot.$trigger.is(g.selector)&&
w.trigger("contextmenu:hide",{force:!0});try{t[r[g.selector]].$menu&&t[r[g.selector]].$menu.remove(),delete t[r[g.selector]]}catch(y){t[r[g.selector]]=null}h.off(r[g.selector])}break;case "html5":(!e.support.htmlCommand&&!e.support.htmlMenuitem||"boolean"==typeof d&&d)&&e('menu[type="context"]').each(function(){this.id&&e.contextMenu({selector:"[contextmenu="+this.id+"]",items:e.contextMenu.fromMenu(this)})}).css("display","none");break;default:throw Error('Unknown operation "'+b+'"');}return this};
e.contextMenu.setInputValues=function(b,d){d===k&&(d={});e.each(b.inputs,function(b,e){switch(e.type){case "text":case "textarea":e.value=d[b]||"";break;case "checkbox":e.selected=d[b]?!0:!1;break;case "radio":e.selected=(d[e.radio]||"")==e.value?!0:!1;break;case "select":e.selected=d[b]||""}})};e.contextMenu.getInputValues=function(b,d){d===k&&(d={});e.each(b.inputs,function(b,e){switch(e.type){case "text":case "textarea":case "select":d[b]=e.$input.val();break;case "checkbox":d[b]=e.$input.prop("checked");
break;case "radio":e.$input.prop("checked")&&(d[e.radio]=e.value)}});return d};e.contextMenu.fromMenu=function(d){d=e(d);var g={};b(g,d.children());return g};e.contextMenu.defaults=v;e.contextMenu.types=x;e.contextMenu.handle=D;e.contextMenu.op=T;e.contextMenu.menus=t})(jQuery);!function(){function e(a,f){return f>a?-1:a>f?1:a>=f?0:0/0}function k(a){return null!=a&&!isNaN(a)}function d(a){return{left:function(f,l,z,b){3>arguments.length&&(z=0);for(4>arguments.length&&(b=f.length);b>z;){var u=z+b>>>1;0>a(f[u],l)?z=u+1:b=u}return z},right:function(f,l,z,b){3>arguments.length&&(z=0);for(4>arguments.length&&(b=f.length);b>z;){var u=z+b>>>1;0<a(f[u],l)?b=u:z=u+1}return z}}}function h(a){return a.length}function b(a,f){try{for(var l in f)Object.defineProperty(a.prototype,l,{value:f[l],
enumerable:!1})}catch(z){a.prototype=f}}function g(){}function m(a){return Na+a in this}function p(){var a=[];return this.forEach(function(f){a.push(f)}),a}function n(){var a=0,f;for(f in this)f.charCodeAt(0)===Bb&&++a;return a}function q(){for(var a in this)if(a.charCodeAt(0)===Bb)return!1;return!0}function r(){}function t(a,f,l){return function(){var z=l.apply(f,arguments);return z===f?a:z}}function x(a,f){if(f in a)return f;f=f.charAt(0).toUpperCase()+f.slice(1);for(var l=0,z=Qd.length;z>l;++l){var b=
Qd[l]+f;if(b in a)return b}}function v(){}function w(){}function y(a){function f(){for(var f,z=l,b=-1,d=z.length;++b<d;)(f=z[b].on)&&f.apply(this,arguments);return a}var l=[],z=new g;return f.on=function(f,b){var d,e=z.get(f);return 2>arguments.length?e&&e.on:(e&&(e.on=null,l=l.slice(0,d=l.indexOf(e)).concat(l.slice(d+1)),z.remove(f)),b&&l.push(z.set(f,{on:b})),a)},f}function E(){s.event.preventDefault()}function O(){for(var a,f=s.event;a=f.sourceEvent;)f=a;return f}function Ma(a){for(var f=new w,
l=0,z=arguments.length;++l<z;)f[arguments[l]]=y(f);return f.of=function(l,z){return function(b){try{var d=b.sourceEvent=s.event;b.target=a;s.event=b;f[b.type].apply(l,z)}finally{s.event=d}}},f}function D(a){return Cb(a,L),a}function T(a){return"function"==typeof a?a:function(){return Ac(a,this)}}function Hd(a){return"function"==typeof a?a:function(){return Bc(a,this)}}function Id(a,f){function l(){this.removeAttribute(a)}function z(){this.removeAttributeNS(a.space,a.local)}function b(){this.setAttribute(a,
f)}function u(){this.setAttributeNS(a.space,a.local,f)}function d(){var l=f.apply(this,arguments);null==l?this.removeAttribute(a):this.setAttribute(a,l)}function e(){var l=f.apply(this,arguments);null==l?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,l)}return a=s.ns.qualify(a),null==f?a.local?z:l:"function"==typeof f?a.local?e:d:a.local?u:b}function Jd(a){return a.trim().replace(/\s+/g," ")}function Kd(a){return new RegExp("(?:^|\\s+)"+s.requote(a)+"(?:\\s+|$)","g")}
function Ld(a,f){function l(){for(var l=-1;++l<b;)a[l](this,f)}function z(){for(var l=-1,z=f.apply(this,arguments);++l<b;)a[l](this,z)}a=(a+"").trim().split(/^|\s+/).map(qg);var b=a.length;return"function"==typeof f?z:l}function qg(a){var f=Kd(a);return function(l,z){if(b=l.classList)return z?b.add(a):b.remove(a);var b=l.getAttribute("class")||"";z?(f.lastIndex=0,f.test(b)||l.setAttribute("class",Jd(b+" "+a))):l.setAttribute("class",Jd(b.replace(f," ")))}}function Md(a,f,l){function z(){this.style.removeProperty(a)}
function b(){this.style.setProperty(a,f,l)}function u(){var b=f.apply(this,arguments);null==b?this.style.removeProperty(a):this.style.setProperty(a,b,l)}return null==f?z:"function"==typeof f?u:b}function Nd(a,f){function l(){delete this[a]}function b(){this[a]=f}function A(){var l=f.apply(this,arguments);null==l?delete this[a]:this[a]=l}return null==f?l:"function"==typeof f?A:b}function Od(a){return"function"==typeof a?a:(a=s.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,
a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,a)}}function Pd(a){return function(){return Sd(this,a)}}function rg(a){return arguments.length||(a=e),function(f,l){return f&&l?a(f.__data__,l.__data__):!f-!l}}function va(a,f){for(var l=0,b=a.length;b>l;l++)for(var A,u=a[l],d=0,e=u.length;e>d;d++)(A=u[d])&&f(A,d,l);return a}function Td(a){return Cb(a,wa),a}function sg(a){var f,l;return function(b,A,u){b=a[u].update;var d=b.length;u!=l&&(l=u,f=0);for(A>=f&&(f=A+1);!(A=
b[f])&&++f<d;);return A}}function Db(){var a=this.__transition__;a&&++a.active}function Ud(a,f,l){function b(){var f=this[d];f&&(this.removeEventListener(a,f,f.$),delete this[d])}function A(){var u=g(f,Ea(arguments));b.call(this);this.addEventListener(a,this[d]=u,u.$=l);u._=f}function u(){var f,l=new RegExp("^__on([^.]+)"+s.requote(a)+"$"),b;for(b in this)if(f=b.match(l)){var z=this[b];this.removeEventListener(f[1],z,z.$);delete this[b]}}var d="__on"+a,e=a.indexOf("."),g=Vd;0<e&&(a=a.slice(0,e));
var h=Cc.get(a);return h&&(a=h,g=tg),e?f?A:b:f?v:u}function Vd(a,f){return function(l){var b=s.event;s.event=l;f[0]=this.__data__;try{a.apply(this,f)}finally{s.event=b}}}function tg(a,f){var l=Vd(a,f);return function(a){var f=a.relatedTarget;f&&(f===this||8&f.compareDocumentPosition(this))||l.call(this,a)}}function Eb(){var a=".dragsuppress-"+ ++ug,f="click"+a,l=s.select(Z).on("touchmove"+a,E).on("dragstart"+a,E).on("selectstart"+a,E);if(nb){var b=xa.style,A=b[nb];b[nb]="none"}return function(u){function d(){l.on(f,
null)}l.on(a,null);nb&&(b[nb]=A);u&&(l.on(f,function(){E();d()},!0),setTimeout(d,0))}}function Dc(a,f){f.changedTouches&&(f=f.changedTouches[0]);var l=a.ownerSVGElement||a;if(l.createSVGPoint){var b=l.createSVGPoint();if(0>Ec&&(Z.scrollX||Z.scrollY)){var l=s.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),A=l[0][0].getScreenCTM();Ec=!(A.f||A.e);l.remove()}return Ec?(b.x=f.pageX,b.y=f.pageY):(b.x=f.clientX,b.y=f.clientY),b=b.matrixTransform(a.getScreenCTM().inverse()),
[b.x,b.y]}l=a.getBoundingClientRect();return[f.clientX-l.left-a.clientLeft,f.clientY-l.top-a.clientTop]}function vg(){return s.event.changedTouches[0].identifier}function wg(){return s.event.target}function xg(){return Z}function Fc(a,f,l){return(f[0]-a[0])*(l[1]-a[1])-(f[1]-a[1])*(l[0]-a[0])}function Wd(a){return 1<a?0:-1>a?G:Math.acos(a)}function Za(a){return 1<a?X:-1>a?-X:Math.asin(a)}function Xd(a){return((a=Math.exp(a))+1/a)/2}function Yd(a){return(a=Math.sin(a/2))*a}function Oa(){}function ra(a,
f,l){return this instanceof ra?(this.h=+a,this.s=+f,void(this.l=+l)):2>arguments.length?a instanceof ra?new ra(a.h,a.s,a.l):Zd(""+a,$d,ra):new ra(a,f,l)}function Gc(a,f,l){function b(a){return 360<a?a-=360:0>a&&(a+=360),60>a?A+(u-A)*a/60:180>a?u:240>a?A+(u-A)*(240-a)/60:A}var A,u;return a=isNaN(a)?0:0>(a%=360)?a+360:a,f=isNaN(f)?0:0>f?0:1<f?1:f,l=0>l?0:1<l?1:l,u=.5>=l?l*(1+f):l+f-l*f,A=2*l-u,new aa(Math.round(255*b(a+120)),Math.round(255*b(a)),Math.round(255*b(a-120)))}function ma(a,f,l){return this instanceof
ma?(this.h=+a,this.c=+f,void(this.l=+l)):2>arguments.length?a instanceof ma?new ma(a.h,a.c,a.l):a instanceof na?ae(a.l,a.a,a.b):ae((a=be((a=s.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new ma(a,f,l)}function Hc(a,f,l){return isNaN(a)&&(a=0),isNaN(f)&&(f=0),new na(l,Math.cos(a*=F)*f,Math.sin(a)*f)}function na(a,f,l){return this instanceof na?(this.l=+a,this.a=+f,void(this.b=+l)):2>arguments.length?a instanceof na?new na(a.l,a.a,a.b):a instanceof ma?Hc(a.l,a.c,a.h):be((a=aa(a)).r,a.g,a.b):new na(a,f,l)}function ce(a,
f,l){a=(a+16)/116;f=a+f/500;l=a-l/200;return f=Ic(f)*de,a=Ic(a)*ee,l=Ic(l)*fe,new aa(Jc(3.2404542*f-1.5371385*a-.4985314*l),Jc(-.969266*f+1.8760108*a+.041556*l),Jc(.0556434*f-.2040259*a+1.0572252*l))}function ae(a,f,l){return 0<a?new ma(Math.atan2(l,f)*N,Math.sqrt(f*f+l*l),a):new ma(0/0,0/0,a)}function Ic(a){return.206893034<a?a*a*a:(a-4/29)/7.787037}function Kc(a){return.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function Jc(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}
function aa(a,f,l){return this instanceof aa?(this.r=~~a,this.g=~~f,void(this.b=~~l)):2>arguments.length?a instanceof aa?new aa(a.r,a.g,a.b):Zd(""+a,aa,Gc):new aa(a,f,l)}function Fb(a){return new aa(a>>16,255&a>>8,255&a)+""}function $a(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function Zd(a,f,l){var b,A,u,d=0,e=0,g=0;if(b=/([a-z]+)\((.*)\)/i.exec(a))switch(A=b[2].split(","),b[1]){case "hsl":return l(parseFloat(A[0]),parseFloat(A[1])/100,parseFloat(A[2])/100);case "rgb":return f(Lc(A[0]),
Lc(A[1]),Lc(A[2]))}return(u=Gb.get(a))?f(u.r,u.g,u.b):(null==a||"#"!==a.charAt(0)||isNaN(u=parseInt(a.slice(1),16))||(4===a.length?(d=(3840&u)>>4,d|=d>>4,e=240&u,e|=e>>4,g=15&u,g|=g<<4):7===a.length&&(d=(16711680&u)>>16,e=(65280&u)>>8,g=255&u)),f(d,e,g))}function $d(a,f,l){var b,A,u=Math.min(a/=255,f/=255,l/=255),d=Math.max(a,f,l),e=d-u,g=(d+u)/2;return e?(A=.5>g?e/(d+u):e/(2-d-u),b=a==d?(f-l)/e+(l>f?6:0):f==d?(l-a)/e+2:(a-f)/e+4,b*=60):(b=0/0,A=0<g&&1>g?0:b),new ra(b,A,g)}function be(a,f,l){a=Mc(a);
f=Mc(f);l=Mc(l);var b=Kc((.4124564*a+.3575761*f+.1804375*l)/de),d=Kc((.2126729*a+.7151522*f+.072175*l)/ee);a=Kc((.0193339*a+.119192*f+.9503041*l)/fe);return na(116*d-16,500*(b-d),200*(d-a))}function Mc(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Lc(a){var f=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*f):f}function K(a){return"function"==typeof a?a:function(){return a}}function W(a){return a}function Nc(a){return function(f,l,b){return 2===arguments.length&&
"function"==typeof l&&(b=l,l=null),Hb(f,l,a,b)}}function Hb(a,f,l,b){function d(){var a,f=h.status,b;if(b=!f)b=(b=h.responseType)&&"text"!==b?h.response:h.responseText;if(b||200<=f&&300>f||304===f){try{a=l.call(u,h)}catch(z){return e.error.call(u,z),void 0}e.load.call(u,a)}else e.error.call(u,h)}var u={},e=s.dispatch("beforesend","progress","load","error"),g={},h=new XMLHttpRequest,M=null;return!Z.XDomainRequest||"withCredentials"in h||!/^(http(s)?:)?\/\//.test(a)||(h=new XDomainRequest),"onload"in
h?h.onload=h.onerror=d:h.onreadystatechange=function(){3<h.readyState&&d()},h.onprogress=function(a){var f=s.event;s.event=a;try{e.progress.call(u,h)}finally{s.event=f}},u.header=function(a,f){return a=(a+"").toLowerCase(),2>arguments.length?g[a]:(null==f?delete g[a]:g[a]=f+"",u)},u.mimeType=function(a){return arguments.length?(f=null==a?null:a+"",u):f},u.responseType=function(a){return arguments.length?(M=a,u):M},u.response=function(a){return l=a,u},["get","post"].forEach(function(a){u[a]=function(){return u.send.apply(u,
[a].concat(Ea(arguments)))}}),u.send=function(l,b,z){if(2===arguments.length&&"function"==typeof b&&(z=b,b=null),h.open(l,a,!0),null==f||"accept"in g||(g.accept=f+",*/*"),h.setRequestHeader)for(var d in g)h.setRequestHeader(d,g[d]);return null!=f&&h.overrideMimeType&&h.overrideMimeType(f),null!=M&&(h.responseType=M),null!=z&&u.on("error",z).on("load",function(a){z(null,a)}),e.beforesend.call(u,h),h.send(null==b?null:b),u},u.abort=function(){return h.abort(),u},s.rebind(u,e,"on"),null==b?u:u.get(yg(b))}
function yg(a){return 1===a.length?function(f,l){a(null==f?l:null)}:a}function Oc(){var a=ge(),a=he()-a;24<a?(isFinite(a)&&(clearTimeout(Ib),Ib=setTimeout(Oc,a)),Jb=0):(Jb=1,ie(Oc))}function ge(){var a=Date.now();for(ya=Kb;ya;)a>=ya.t&&(ya.f=ya.c(a-ya.t)),ya=ya.n;return a}function he(){for(var a,f=Kb,l=1/0;f;)f.f?f=a?a.n=f.n:Kb=f.n:(f.t<l&&(l=f.t),f=(a=f).n);return Lb=a,l}function Pc(a,f){return f-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function zg(a){var f=a.decimal,l=a.thousands,b=a.grouping,d=a.currency,
u=b?function(a){for(var f=a.length,u=[],d=0,A=b[0];0<A&&0<f;)u.push(a.substring(f-=A,f+A)),A=b[d=(d+1)%b.length];return u.reverse().join(l)}:W;return function(a){a=je.exec(a);var l=a[1]||" ",b=a[2]||">",z=a[3]||"",e=a[4]||"",g=a[5],h=+a[6],k=a[7],m=a[8],n=a[9],p=1,q="",r="",J=!1;switch(m&&(m=+m.substring(1)),(g||"0"===l&&"="===b)&&(g=l="0",b="=",k&&(h-=Math.floor((h-1)/4))),n){case "n":k=!0;n="g";break;case "%":p=100;r="%";n="f";break;case "p":p=100;r="%";n="r";break;case "b":case "o":case "x":case "X":"#"===
e&&(q="0"+n.toLowerCase());case "c":case "d":J=!0;m=0;break;case "s":p=-1,n="r"}"$"===e&&(q=d[0],r=d[1]);"r"!=n||m||(n="g");null!=m&&("g"==n?m=Math.max(1,Math.min(21,m)):("e"==n||"f"==n)&&(m=Math.max(0,Math.min(20,m))));var n=Ag.get(n)||Bg,t=g&&k;return function(a){var d=r;if(J&&a%1)return"";var A=0>a||0===a&&0>1/a?(a=-a,"-"):z;0>p?(d=s.formatPrefix(a,m),a=d.scale(a),d=d.symbol+r):a*=p;a=n(a,m);var e=a.lastIndexOf("."),R=0>e?a:a.substring(0,e),e=0>e?"":f+a.substring(e+1);!g&&k&&(R=u(R));var S=q.length+
R.length+e.length+(t?0:A.length),w=h>S?Array(S=h-S+1).join(l):"";return t&&(R=u(w+R)),A+=q,a=R+e,("<"===b?A+a+w:">"===b?w+A+a:"^"===b?w.substring(0,S>>=1)+A+a+w.substring(S):A+(t?a:w+a))+d}}}function Bg(a){return a+""}function za(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Qa(a,f,l){function b(f){var l=a(f),z=u(l,1);return z-f>f-l?l:z}function d(l){return f(l=a(new Y(l-1)),1),l}function u(a,l){return f(a=new Y(+a),l),a}function e(a,b,z){a=d(a);var u=
[];if(1<z)for(;b>a;)l(a)%z||u.push(new Date(+a)),f(a,1);else for(;b>a;)u.push(new Date(+a)),f(a,1);return u}a.floor=a;a.round=b;a.ceil=d;a.offset=u;a.range=e;var g=a.utc=Nb(a);return g.floor=g,g.round=Nb(b),g.ceil=Nb(d),g.offset=Nb(u),g.range=function(a,f,l){try{Y=za;var b=new za;return b._=a,e(b,f,l)}finally{Y=Date}},a}function Nb(a){return function(f,l){try{Y=za;var b=new za;return b._=f,a(b,l)._}finally{Y=Date}}}function Cg(a){function f(a){function f(l){for(var z,u,d,A=[],e=-1,g=0;++e<b;)37===
a.charCodeAt(e)&&(A.push(a.slice(g,e)),null!=(u=le[z=a.charAt(++e)])&&(z=a.charAt(++e)),(d=w[z])&&(z=d(l,null==u?"e"===z?" ":"0":u)),A.push(z),g=e+1);return A.push(a.slice(g,e)),A.join("")}var b=a.length;return f.parse=function(f){var b={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(l(b,a,f,0)!=f.length)return null;"p"in b&&(b.H=b.H%12+12*b.p);f=null!=b.Z&&Y!==za;var z=new (f?za:Y);return"j"in b?z.setFullYear(b.y,0,b.j):"w"in b&&("W"in b||"U"in b)?(z.setFullYear(b.y,0,1),z.setFullYear(b.y,0,"W"in b?(b.w+
6)%7+7*b.W-(z.getDay()+5)%7:b.w+7*b.U-(z.getDay()+6)%7)):z.setFullYear(b.y,b.m,b.d),z.setHours(b.H+(0|b.Z/100),b.M+b.Z%100,b.S,b.L),f?z._:z},f.toString=function(){return a},f}function l(a,f,l,b){for(var z,u,d,A=0,e=f.length,g=l.length;e>A;){if(b>=g)return-1;if(z=f.charCodeAt(A++),37===z){if(d=f.charAt(A++),u=v[d in le?f.charAt(A++):d],!u||0>(b=u(a,l,b)))return-1}else if(z!=l.charCodeAt(b++))return-1}return b}var b=a.dateTime,d=a.date,u=a.time,e=a.periods,g=a.days,h=a.shortDays,M=a.months,k=a.shortMonths;
f.utc=function(a){function l(a){try{Y=za;var f=new Y;return f._=a,b(f)}finally{Y=Date}}var b=f(a);return l.parse=function(a){try{Y=za;var f=b.parse(a);return f&&f._}finally{Y=Date}},l.toString=b.toString,l};f.multi=f.utc.multi=Dg;var m=s.map(),n=Ob(g),p=Pb(g),q=Ob(h),r=Pb(h),t=Ob(M),ba=Pb(M),H=Ob(k),J=Pb(k);e.forEach(function(a,f){m.set(a.toLowerCase(),f)});var w={a:function(a){return h[a.getDay()]},A:function(a){return g[a.getDay()]},b:function(a){return k[a.getMonth()]},B:function(a){return M[a.getMonth()]},
c:f(b),d:function(a,f){return ca(a.getDate(),f,2)},e:function(a,f){return ca(a.getDate(),f,2)},H:function(a,f){return ca(a.getHours(),f,2)},I:function(a,f){return ca(a.getHours()%12||12,f,2)},j:function(a,f){return ca(1+B.dayOfYear(a),f,3)},L:function(a,f){return ca(a.getMilliseconds(),f,3)},m:function(a,f){return ca(a.getMonth()+1,f,2)},M:function(a,f){return ca(a.getMinutes(),f,2)},p:function(a){return e[+(12<=a.getHours())]},S:function(a,f){return ca(a.getSeconds(),f,2)},U:function(a,f){return ca(B.sundayOfYear(a),
f,2)},w:function(a){return a.getDay()},W:function(a,f){return ca(B.mondayOfYear(a),f,2)},x:f(d),X:f(u),y:function(a,f){return ca(a.getFullYear()%100,f,2)},Y:function(a,f){return ca(a.getFullYear()%1E4,f,4)},Z:Eg,"%":function(){return"%"}},v={a:function(a,f,l){q.lastIndex=0;return(f=q.exec(f.slice(l)))?(a.w=r.get(f[0].toLowerCase()),l+f[0].length):-1},A:function(a,f,l){n.lastIndex=0;return(f=n.exec(f.slice(l)))?(a.w=p.get(f[0].toLowerCase()),l+f[0].length):-1},b:function(a,f,l){H.lastIndex=0;return(f=
H.exec(f.slice(l)))?(a.m=J.get(f[0].toLowerCase()),l+f[0].length):-1},B:function(a,f,l){t.lastIndex=0;return(f=t.exec(f.slice(l)))?(a.m=ba.get(f[0].toLowerCase()),l+f[0].length):-1},c:function(a,f,b){return l(a,w.c.toString(),f,b)},d:me,e:me,H:ne,I:ne,j:Fg,L:Gg,m:Hg,M:Ig,p:function(a,f,l){f=m.get(f.slice(l,l+=2).toLowerCase());return null==f?-1:(a.p=f,l)},S:Jg,U:Kg,w:Lg,W:Mg,x:function(a,f,b){return l(a,w.x.toString(),f,b)},X:function(a,f,b){return l(a,w.X.toString(),f,b)},y:Ng,Y:Og,Z:Pg,"%":Qg};
return f}function ca(a,f,l){var b=0>a?"-":"";a=(b?-a:a)+"";var d=a.length;return b+(l>d?Array(l-d+1).join(f)+a:a)}function Ob(a){return new RegExp("^(?:"+a.map(s.requote).join("|")+")","i")}function Pb(a){for(var f=new g,l=-1,b=a.length;++l<b;)f.set(a[l].toLowerCase(),l);return f}function Lg(a,f,l){P.lastIndex=0;return(f=P.exec(f.slice(l,l+1)))?(a.w=+f[0],l+f[0].length):-1}function Kg(a,f,l){P.lastIndex=0;return(f=P.exec(f.slice(l)))?(a.U=+f[0],l+f[0].length):-1}function Mg(a,f,l){P.lastIndex=0;return(f=
P.exec(f.slice(l)))?(a.W=+f[0],l+f[0].length):-1}function Og(a,f,l){P.lastIndex=0;return(f=P.exec(f.slice(l,l+4)))?(a.y=+f[0],l+f[0].length):-1}function Ng(a,f,l){P.lastIndex=0;if(f=P.exec(f.slice(l,l+2))){var b=+f[0];a=(a.y=b+(68<b?1900:2E3),l+f[0].length)}else a=-1;return a}function Pg(a,f,l){return/^[+-]\d{4}$/.test(f=f.slice(l,l+5))?(a.Z=-f,l+5):-1}function Hg(a,f,l){P.lastIndex=0;return(f=P.exec(f.slice(l,l+2)))?(a.m=f[0]-1,l+f[0].length):-1}function me(a,f,l){P.lastIndex=0;return(f=P.exec(f.slice(l,
l+2)))?(a.d=+f[0],l+f[0].length):-1}function Fg(a,f,l){P.lastIndex=0;return(f=P.exec(f.slice(l,l+3)))?(a.j=+f[0],l+f[0].length):-1}function ne(a,f,l){P.lastIndex=0;return(f=P.exec(f.slice(l,l+2)))?(a.H=+f[0],l+f[0].length):-1}function Ig(a,f,l){P.lastIndex=0;return(f=P.exec(f.slice(l,l+2)))?(a.M=+f[0],l+f[0].length):-1}function Jg(a,f,l){P.lastIndex=0;return(f=P.exec(f.slice(l,l+2)))?(a.S=+f[0],l+f[0].length):-1}function Gg(a,f,l){P.lastIndex=0;return(f=P.exec(f.slice(l,l+3)))?(a.L=+f[0],l+f[0].length):
-1}function Eg(a){var f=a.getTimezoneOffset();a=0<f?"-":"+";var l=0|I(f)/60,f=I(f)%60;return a+ca(l,"0",2)+ca(f,"0",2)}function Qg(a,f,l){oe.lastIndex=0;return(a=oe.exec(f.slice(l,l+1)))?l+a[0].length:-1}function Dg(a){for(var f=a.length,l=-1;++l<f;)a[l][0]=this(a[l][0]);return function(f){for(var l=0,b=a[l];!b[1](f);)b=a[++l];return b[0](f)}}function Qc(){}function pe(a,f,l){var b=l.s=a+f,d=b-a;l.t=a-(b-d)+(f-d)}function Qb(a,f){a&&qe.hasOwnProperty(a.type)&&qe[a.type](a,f)}function Rc(a,f,l){var b=
-1,d=a.length-l;for(f.lineStart();++b<d;)l=a[b],f.point(l[0],l[1],l[2]);f.lineEnd()}function re(a,f){var l=-1,b=a.length;for(f.polygonStart();++l<b;)Rc(a[l],f,1);f.polygonEnd()}function Rg(){function a(a,f){a*=F;f=f*F/2+G/4;var l=a-b,e=0<=l?1:-1,g=e*l,l=Math.cos(f),h=Math.sin(f),k=u*h,m=d*l+k*Math.cos(g),e=k*e*Math.sin(g);Ra.add(Math.atan2(e,m));b=a;d=l;u=h}var f,l,b,d,u;fa.point=function(e,g){fa.point=a;b=(f=e)*F;d=Math.cos(g=(l=g)*F/2+G/4);u=Math.sin(g)};fa.lineEnd=function(){a(f,l)}}function Sa(a){var f=
a[0];a=a[1];var l=Math.cos(a);return[l*Math.cos(f),l*Math.sin(f),Math.sin(a)]}function Rb(a,f){return a[0]*f[0]+a[1]*f[1]+a[2]*f[2]}function cb(a,f){return[a[1]*f[2]-a[2]*f[1],a[2]*f[0]-a[0]*f[2],a[0]*f[1]-a[1]*f[0]]}function Sc(a,f){a[0]+=f[0];a[1]+=f[1];a[2]+=f[2]}function Sb(a,f){return[a[0]*f,a[1]*f,a[2]*f]}function Tb(a){var f=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=f;a[1]/=f;a[2]/=f}function Ub(a){return[Math.atan2(a[1],a[0]),Za(a[2])]}function Vb(a,f){return I(a[0]-f[0])<C&&I(a[1]-f[1])<
C}function Tc(a,f){a*=F;var l=Math.cos(f*=F);ob(l*Math.cos(a),l*Math.sin(a),Math.sin(f))}function ob(a,f,l){++pb;Aa+=(a-Aa)/pb;Ba+=(f-Ba)/pb;sa+=(l-sa)/pb}function se(){function a(a,u){a*=F;var d=Math.cos(u*=F),e=d*Math.cos(a),d=d*Math.sin(a),g=Math.sin(u),h=Math.atan2(Math.sqrt((h=l*g-b*d)*h+(h=b*e-f*g)*h+(h=f*d-l*e)*h),f*e+l*d+b*g);db+=h;ia+=h*(f+(f=e));ja+=h*(l+(l=d));da+=h*(b+(b=g));ob(f,l,b)}var f,l,b;oa.point=function(d,u){d*=F;var e=Math.cos(u*=F);f=e*Math.cos(d);l=e*Math.sin(d);b=Math.sin(u);
oa.point=a;ob(f,l,b)}}function te(){oa.point=Tc}function Sg(){function a(a,f){a*=F;var l=Math.cos(f*=F),e=l*Math.cos(a),l=l*Math.sin(a),g=Math.sin(f),h=d*g-u*l,k=u*e-b*g,m=b*l-d*e,n=Math.sqrt(h*h+k*k+m*m),p=b*e+d*l+u*g,q=n&&-Wd(p)/n,n=Math.atan2(n,p);Ga+=q*h;Ha+=q*k;ta+=q*m;db+=n;ia+=n*(b+(b=e));ja+=n*(d+(d=l));da+=n*(u+(u=g));ob(b,d,u)}var f,l,b,d,u;oa.point=function(e,g){f=e;l=g;oa.point=a;e*=F;var h=Math.cos(g*=F);b=h*Math.cos(e);d=h*Math.sin(e);u=Math.sin(g);ob(b,d,u)};oa.lineEnd=function(){a(f,
l);oa.lineEnd=te;oa.point=Tc}}function eb(){return!0}function ue(a,f,l,b,d){var u=[],e=[];if(a.forEach(function(a){if(!(0>=(f=a.length-1))){var f,l=a[0],b=a[f];if(Vb(l,b)){d.lineStart();for(b=0;f>b;++b)d.point((l=a[b])[0],l[1]);return d.lineEnd(),void 0}f=new Wb(l,a,null,!0);l=new Wb(l,null,f,!1);f.o=l;u.push(f);e.push(l);f=new Wb(b,a,null,!1);l=new Wb(b,null,f,!0);f.o=l;u.push(f);e.push(l)}}),e.sort(f),ve(u),ve(e),u.length){a=0;f=l;for(l=e.length;l>a;++a)e[a].e=f=!f;for(var g,h=u[0];;){for(var M=
h,k=!0;M.v;)if((M=M.n)===h)return;f=M.z;d.lineStart();do{if(M.v=M.o.v=!0,M.e){if(k)for(a=0,l=f.length;l>a;++a)d.point((g=f[a])[0],g[1]);else b(M.x,M.n.x,1,d);M=M.n}else{if(k)for(f=M.p.z,a=f.length-1;0<=a;--a)d.point((g=f[a])[0],g[1]);else b(M.x,M.p.x,-1,d);M=M.p}M=M.o;f=M.z;k=!k}while(!M.v);d.lineEnd()}}}function ve(a){if(f=a.length){for(var f,l,b=0,d=a[0];++b<f;)d.n=l=a[b],l.p=d,d=l;d.n=l=a[0];l.p=d}}function Wb(a,f,l,b){this.x=a;this.z=f;this.o=l;this.e=b;this.v=!1;this.n=this.p=null}function we(a,
f,l,b){return function(d,u){function e(f,l){var b=d(f,l);a(f=b[0],l=b[1])&&u.point(f,l)}function g(a,f){var l=d(a,f);t.point(l[0],l[1])}function h(){H.point=g;t.lineStart()}function M(){H.point=e;t.lineEnd()}function k(a,f){r.push([a,f]);var l=d(a,f);w.point(l[0],l[1])}function m(){w.lineStart();r=[]}function n(){k(r[0][0],r[0][1]);w.lineEnd();var a;a=w.clean();var f=J.buffer(),l=f.length;if(r.pop(),q.push(r),r=null,l)if(1&a){a=f[0];var b,l=a.length-1,f=-1;if(0<l){v||(u.polygonStart(),v=!0);for(u.lineStart();++f<
l;)u.point((b=a[f])[0],b[1]);u.lineEnd()}}else 1<l&&2&a&&f.push(f.pop().concat(f.shift())),p.push(f.filter(Tg))}var p,q,r,t=f(u),ba=d.invert(b[0],b[1]),H={point:e,lineStart:h,lineEnd:M,polygonStart:function(){H.point=k;H.lineStart=m;H.lineEnd=n;p=[];q=[]},polygonEnd:function(){H.point=e;H.lineStart=h;H.lineEnd=M;p=s.merge(p);var a,f=ba;a=q;var b=f[0],d=f[1],z=[Math.sin(b),-Math.cos(b),0],A=0,g=0;Ra.reset();for(var Q=0,k=a.length;k>Q;++Q){var m=a[Q],n=m.length;if(n)for(var S=m[0],la=S[0],f=S[1]/2+
G/4,Fa=Math.sin(f),r=Math.cos(f),t=1;;){t===n&&(t=0);var f=m[t],J=f[0],Pa=f[1]/2+G/4,w=Math.sin(Pa),Pa=Math.cos(Pa),ab=J-la,U=0<=ab?1:-1,x=U*ab,y=x>G,Fa=Fa*w;if(Ra.add(Math.atan2(Fa*U*Math.sin(x),r*Pa+Fa*Math.cos(x))),A+=y?ab+U*ga:ab,y^la>=b^J>=b)S=cb(Sa(S),Sa(f)),Tb(S),la=cb(z,S),Tb(la),la=(y^0<=ab?-1:1)*Za(la[2]),(d>la||d===la&&(S[0]||S[1]))&&(g+=y^0<=ab?1:-1);if(!t++)break;la=J;Fa=w;r=Pa;S=f}}a=(-C>A||C>A&&0>Ra)^1&g;p.length?(v||(u.polygonStart(),v=!0),ue(p,Ug,a,l,u)):a&&(v||(u.polygonStart(),
v=!0),u.lineStart(),l(null,null,1,u),u.lineEnd());v&&(u.polygonEnd(),v=!1);p=q=null},sphere:function(){u.polygonStart();u.lineStart();l(null,null,1,u);u.lineEnd();u.polygonEnd()}},J=xe(),w=f(J),v=!1;return H}}function Tg(a){return 1<a.length}function xe(){var a,f=[];return{lineStart:function(){f.push(a=[])},point:function(f,b){a.push([f,b])},lineEnd:v,buffer:function(){var l=f;return f=[],a=null,l},rejoin:function(){1<f.length&&f.push(f.pop().concat(f.shift()))}}}function Ug(a,f){return(0>(a=a.x)[0]?
a[1]-X-C:X-a[1])-(0>(f=f.x)[0]?f[1]-X-C:X-f[1])}function Vg(a){function f(a,f){return Math.cos(a)*Math.cos(f)>d}function l(a,f,l){var b=Sa(a),u=Sa(f),z=[1,0,0],u=cb(b,u),e=Rb(u,u),b=u[0],g=e-b*b;if(!g)return!l&&a;e=d*e/g;g=-d*b/g;b=cb(z,u);z=Sb(z,e);u=Sb(u,g);Sc(z,u);u=Rb(z,b);e=Rb(b,b);g=u*u-e*(Rb(z,z)-1);if(!(0>g)){var h=Math.sqrt(g),g=Sb(b,(-u-h)/e);if(Sc(g,z),g=Ub(g),!l)return g;var Q;l=a[0];var R=f[0];a=a[1];f=f[1];l>R&&(Q=l,l=R,R=Q);var k=R-l,m=I(k-G)<C,n=m||C>k;if(!m&&a>f&&(Q=a,a=f,f=Q),n?
m?0<a+f^g[1]<(I(g[0]-l)<C?a:f):a<=g[1]&&g[1]<=f:k>G^(l<=g[0]&&g[0]<=R))return Q=Sb(b,(-u+h)/e),Sc(Q,z),[g,Ub(Q)]}}function b(f,l){var d=u?a:G-a,z=0;return-d>f?z|=1:f>d&&(z|=2),-d>l?z|=4:l>d&&(z|=8),z}var d=Math.cos(a),u=0<d,e=I(d)>C,g=Uc(a,6*F);return we(f,function(a){var d,g,A,h,Q;return{lineStart:function(){h=A=!1;Q=1},point:function(k,m){var n,p=[k,m],q=f(k,m),s=u?q?0:b(k,m):q?b(k+(0>k?G:-G),m):0;if(!d&&(h=A=q)&&a.lineStart(),q!==A&&(n=l(d,p),(Vb(d,n)||Vb(p,n))&&(p[0]+=C,p[1]+=C,q=f(p[0],p[1]))),
q!==A)Q=0,q?(a.lineStart(),n=l(p,d),a.point(n[0],n[1])):(n=l(d,p),a.point(n[0],n[1]),a.lineEnd()),d=n;else if(e&&d&&u^q){var r;s&g||!(r=l(p,d,!0))||(Q=0,u?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!q||d&&Vb(d,p)||a.point(p[0],p[1]);d=p;A=q;g=s},lineEnd:function(){A&&a.lineEnd();d=null},clean:function(){return Q|(h&&A)<<1}}},g,u?[0,-a]:[-G,a-G])}function ye(a,f,l,b){return function(d){var u,
e=d.a,g=d.b,h=e.x,e=e.y,k=0,m=1,n=g.x-h,g=g.y-e;if(u=a-h,n||!(0<u)){if(u/=n,0>n){if(k>u)return;m>u&&(m=u)}else if(0<n){if(u>m)return;u>k&&(k=u)}if(u=l-h,n||!(0>u)){if(u/=n,0>n){if(u>m)return;u>k&&(k=u)}else if(0<n){if(k>u)return;m>u&&(m=u)}if(u=f-e,g||!(0<u)){if(u/=g,0>g){if(k>u)return;m>u&&(m=u)}else if(0<g){if(u>m)return;u>k&&(k=u)}if(u=b-e,g||!(0>u)){if(u/=g,0>g){if(u>m)return;u>k&&(k=u)}else if(0<g){if(k>u)return;m>u&&(m=u)}return 0<k&&(d.a={x:h+k*n,y:e+k*g}),1>m&&(d.b={x:h+m*n,y:e+m*g}),d}}}}}}
function ze(a,f,l,b){function d(b,u){return I(b[0]-a)<C?0<u?0:3:I(b[0]-l)<C?0<u?2:1:I(b[1]-f)<C?0<u?1:0:0<u?3:2}function u(a,f){return e(a.x,f.x)}function e(a,f){var l=d(a,1),b=d(f,1);return l!==b?l-b:0===l?f[1]-a[1]:1===l?a[0]-f[0]:2===l?a[1]-f[1]:f[0]-a[0]}return function(g){function h(u,g,Q,k){var m=0,M=0;if(null==u||(m=d(u,Q))!==(M=d(g,Q))||0>e(u,g)^0<Q){do k.point(0===m||3===m?a:l,1<m?b:f);while((m=(m+Q+4)%4)!==M)}else k.point(g[0],g[1])}function k(d,u){d>=a&&l>=d&&u>=f&&b>=u&&g.point(d,u)}function m(d,
u){d=Math.max(-Xb,Math.min(Xb,d));u=Math.max(-Xb,Math.min(Xb,u));var e=d>=a&&l>=d&&u>=f&&b>=u;if(p&&q.push([d,u]),U)r=d,t=u,w=e,U=!1,e&&(g.lineStart(),g.point(d,u));else if(e&&J)g.point(d,u);else{var A={a:{x:ba,y:H},b:{x:d,y:u}};y(A)?(J||(g.lineStart(),g.point(A.a.x,A.a.y)),g.point(A.b.x,A.b.y),e||g.lineEnd(),v=!1):e&&(g.lineStart(),g.point(d,u),v=!1)}ba=d;H=u;J=e}var n,p,q,r,t,w,ba,H,J,U,v,x=g,ea=xe(),y=ye(a,f,l,b),E={point:k,lineStart:function(){E.point=m;p&&p.push(q=[]);U=!0;J=!1;ba=H=0/0},lineEnd:function(){n&&
(m(r,t),w&&J&&ea.rejoin(),n.push(ea.buffer()));E.point=k;J&&g.lineEnd()},polygonStart:function(){g=ea;n=[];p=[];v=!0},polygonEnd:function(){g=x;n=s.merge(n);var f;f=[a,b];for(var l=0,d=p.length,e=f[1],A=0;d>A;++A)for(var k,R=1,m=p[A],M=m.length,S=m[0];M>R;++R)k=m[R],S[1]<=e?k[1]>e&&0<Fc(S,k,f)&&++l:k[1]<=e&&0>Fc(S,k,f)&&--l,S=k;f=0!==l;l=v&&f;d=n.length;(l||d)&&(g.polygonStart(),l&&(g.lineStart(),h(null,null,1,g),g.lineEnd()),d&&ue(n,u,f,h,g),g.polygonEnd());n=p=q=null}};return E}}function Ae(a,f){function l(l,
b){return l=a(l,b),f(l[0],l[1])}return a.invert&&f.invert&&(l.invert=function(l,b){return l=f.invert(l,b),l&&a.invert(l[0],l[1])}),l}function Vc(a){var f=0,l=G/3,b=Wc(a);a=b(f,l);return a.parallels=function(a){return arguments.length?b(f=a[0]*G/180,l=a[1]*G/180):[f/G*180,l/G*180]},a}function Be(a,f){function l(a,f){var l=Math.sqrt(u-2*d*Math.sin(f))/d;return[l*Math.sin(a*=d),e-l*Math.cos(a)]}var b=Math.sin(a),d=(b+Math.sin(f))/2,u=1+b*(2*d-b),e=Math.sqrt(u)/d;return l.invert=function(a,f){var l=e-
f;return[Math.atan2(a,l)/d,Za((u-(a*a+l*l)*d*d)/(2*d))]},l}function Wg(){function a(a,f){Yb+=d*a-b*f;b=a;d=f}var f,l,b,d;Ia.point=function(u,e){Ia.point=a;f=b=u;l=d=e};Ia.lineEnd=function(){a(f,l)}}function Xg(){function a(a,f){e.push("M",a,",",f,u)}function f(a,f){e.push("M",a,",",f);g.point=l}function l(a,f){e.push("L",a,",",f)}function b(){g.point=a}function d(){e.push("Z")}var u=Ce(4.5),e=[],g={point:a,lineStart:function(){g.point=f},lineEnd:b,polygonStart:function(){g.lineEnd=d},polygonEnd:function(){g.lineEnd=
b;g.point=a},pointRadius:function(a){return u=Ce(a),g},result:function(){if(e.length){var a=e.join("");return e=[],a}}};return g}function Ce(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Ta(a,f){Aa+=a;Ba+=f;++sa}function De(){function a(a,b){var d=a-f,e=b-l,d=Math.sqrt(d*d+e*e);ia+=d*(f+a)/2;ja+=d*(l+b)/2;da+=d;Ta(f=a,l=b)}var f,l;pa.point=function(b,d){pa.point=a;Ta(f=b,l=d)}}function Ee(){pa.point=Ta}function Yg(){function a(a,f){var l=a-b,e=f-d,l=Math.sqrt(l*
l+e*e);ia+=l*(b+a)/2;ja+=l*(d+f)/2;da+=l;l=d*a-b*f;Ga+=l*(b+a);Ha+=l*(d+f);ta+=3*l;Ta(b=a,d=f)}var f,l,b,d;pa.point=function(u,e){pa.point=a;Ta(f=b=u,l=d=e)};pa.lineEnd=function(){a(f,l)}}function Zg(a){function f(f,l){a.moveTo(f,l);a.arc(f,l,e,0,ga)}function l(f,l){a.moveTo(f,l);g.point=b}function b(f,l){a.lineTo(f,l)}function d(){g.point=f}function u(){a.closePath()}var e=4.5,g={point:f,lineStart:function(){g.point=l},lineEnd:d,polygonStart:function(){g.lineEnd=u},polygonEnd:function(){g.lineEnd=
d;g.point=f},pointRadius:function(a){return e=a,g},result:v};return g}function Fe(a){function f(a){return(g?b:l)(a)}function l(f){return Ge(f,function(l,b){l=a(l,b);f.point(l[0],l[1])})}function b(f){function l(b,d){b=a(b,d);f.point(b[0],b[1])}function u(){w=0/0;D.point=e;f.lineStart()}function e(l,b){var u=Sa([l,b]),z=a(l,b);d(w,v,t,x,y,E,w=z[0],v=z[1],t=l,x=u[0],y=u[1],E=u[2],g,f);f.point(w,v)}function z(){D.point=l;f.lineEnd()}function h(){u();D.point=k;D.lineEnd=R}function k(a,f){e(m=a,f);n=w;
p=v;q=x;s=y;r=E;D.point=e}function R(){d(w,v,t,x,y,E,n,p,m,q,s,r,g,f);D.lineEnd=z;z()}var m,n,p,q,s,r,t,w,v,x,y,E,D={point:l,lineStart:u,lineEnd:z,polygonStart:function(){f.polygonStart();D.lineStart=h},polygonEnd:function(){f.polygonEnd();D.lineStart=u}};return D}function d(f,l,b,z,g,h,k,Q,m,n,p,q,s,r){var t=k-f,w=Q-l,v=t*t+w*w;if(v>4*u&&s--){var x=z+n,y=g+p,E=h+q,D=Math.sqrt(x*x+y*y+E*E),bb=Math.asin(E/=D),B=I(I(E)-1)<C||I(b-m)<C?(b+m)/2:Math.atan2(y,x),O=a(B,bb),bb=O[0],O=O[1],F=bb-f,G=O-l,T=w*
F-t*G;(T*T/v>u||.3<I((t*F+w*G)/v-.5)||e>z*n+g*p+h*q)&&(d(f,l,b,z,g,h,bb,O,B,x/=D,y/=D,E,s,r),r.point(bb,O),d(bb,O,B,x,y,E,k,Q,m,n,p,q,s,r))}}var u=.5,e=Math.cos(30*F),g=16;return f.precision=function(a){return arguments.length?(g=0<(u=a*a)&&16,f):Math.sqrt(u)},f}function $g(a){var f=Fe(function(f,b){return a([f*N,b*N])});return function(a){return He(f(a))}}function Ie(a){this.stream=a}function Ge(a,f){return{point:f,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},
polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function Ja(a){return Wc(function(){return a})()}function Wc(a){function f(a){return a=g(a[0]*F,a[1]*F),[a[0]*p+h,k-a[1]*p]}function l(a){return a=g.invert((a[0]-h)/p,(k-a[1])/p),a&&[a[0]*N,a[1]*N]}function b(){g=Ae(e=Xc(ba,H,J),u);var a=u(t,w);return h=q-a[0]*p,k=r+a[1]*p,d()}function d(){return m&&(m.valid=!1,m=null),f}var u,e,g,h,k,m,n=Fe(function(a,f){return a=u(a,f),[a[0]*p+h,k-a[1]*p]}),p=150,q=480,r=250,t=0,w=
0,ba=0,H=0,J=0,v=Je,x=W,y=null,ea=null;return f.stream=function(a){return m&&(m.valid=!1),m=He(v(e,n(x(a)))),m.valid=!0,m},f.clipAngle=function(a){return arguments.length?(v=null==a?(y=a,Je):Vg((y=+a)*F),d()):y},f.clipExtent=function(a){return arguments.length?(ea=a,x=a?ze(a[0][0],a[0][1],a[1][0],a[1][1]):W,d()):ea},f.scale=function(a){return arguments.length?(p=+a,b()):p},f.translate=function(a){return arguments.length?(q=+a[0],r=+a[1],b()):[q,r]},f.center=function(a){return arguments.length?(t=
a[0]%360*F,w=a[1]%360*F,b()):[t*N,w*N]},f.rotate=function(a){return arguments.length?(ba=a[0]%360*F,H=a[1]%360*F,J=2<a.length?a[2]%360*F:0,b()):[ba*N,H*N,J*N]},s.rebind(f,n,"precision"),function(){return u=a.apply(this,arguments),f.invert=u.invert&&l,b()}}function He(a){return Ge(a,function(f,l){a.point(f*F,l*F)})}function qb(a,f){return[a,f]}function Ke(a,f){return[a>G?a-ga:-G>a?a+ga:a,f]}function Xc(a,f,l){return a?f||l?Ae(Le(a),Me(f,l)):Le(a):f||l?Me(f,l):Ke}function Ne(a){return function(f,l){return f+=
a,[f>G?f-ga:-G>f?f+ga:f,l]}}function Le(a){var f=Ne(a);return f.invert=Ne(-a),f}function Me(a,f){function l(a,f){var l=Math.cos(f),g=Math.cos(a)*l,l=Math.sin(a)*l,h=Math.sin(f),k=h*b+g*d;return[Math.atan2(l*u-k*e,g*b-h*d),Za(k*u+l*e)]}var b=Math.cos(a),d=Math.sin(a),u=Math.cos(f),e=Math.sin(f);return l.invert=function(a,f){var l=Math.cos(f),g=Math.cos(a)*l,l=Math.sin(a)*l,h=Math.sin(f),k=h*u-l*e;return[Math.atan2(l*u+h*e,g*b+k*d),Za(k*b-g*d)]},l}function Uc(a,f){var l=Math.cos(a),b=Math.sin(a);return function(d,
u,e,g){var h=e*f;null!=d?(d=Oe(l,d),u=Oe(l,u),(0<e?u>d:d>u)&&(d+=e*ga)):(d=a+e*ga,u=a-.5*h);for(var k;0<e?d>u:u>d;d-=h)g.point((k=Ub([l,-b*Math.cos(d),-b*Math.sin(d)]))[0],k[1])}}function Oe(a,f){var l=Sa(f);l[0]-=a;Tb(l);var b=Wd(-l[1]);return((0>-l[2]?-b:b)+2*Math.PI-C)%(2*Math.PI)}function Pe(a,f,l){var b=s.range(a,f-C,l).concat(f);return function(a){return b.map(function(f){return[a,f]})}}function Qe(a,f,l){var b=s.range(a,f-C,l).concat(f);return function(a){return b.map(function(f){return[f,
a]})}}function Yc(a){return a.source}function Zc(a){return a.target}function ah(a,f,l,b){var d=Math.cos(f),u=Math.sin(f),e=Math.cos(b),g=Math.sin(b),h=d*Math.cos(a),k=d*Math.sin(a),m=e*Math.cos(l),n=e*Math.sin(l),p=2*Math.asin(Math.sqrt(Yd(b-f)+d*e*Yd(l-a))),q=1/Math.sin(p);l=p?function(a){var f=Math.sin(a*=p)*q,l=Math.sin(p-a)*q;a=l*h+f*m;var b=l*k+f*n,f=l*u+f*g;return[Math.atan2(b,a)*N,Math.atan2(f,Math.sqrt(a*a+b*b))*N]}:function(){return[a*N,f*N]};return l.distance=p,l}function rb(a,f){function l(f,
l){var b=Math.cos(f),d=Math.cos(l),b=a(b*d);return[b*d*Math.sin(f),b*Math.sin(l)]}return l.invert=function(a,l){var b=Math.sqrt(a*a+l*l),d=f(b),e=Math.sin(d),d=Math.cos(d);return[Math.atan2(a*e,b*d),Math.asin(b&&l*e/b)]},l}function Re(a,f){function l(a,f){0<u?-X+C>f&&(f=-X+C):f>X-C&&(f=X-C);var l=u/Math.pow(Math.tan(G/4+f/2),d);return[l*Math.sin(d*a),u-l*Math.cos(d*a)]}var b=Math.cos(a),d=a===f?Math.sin(a):Math.log(b/Math.cos(f))/Math.log(Math.tan(G/4+f/2)/Math.tan(G/4+a/2)),u=b*Math.pow(Math.tan(G/
4+a/2),d)/d;return d?(l.invert=function(a,f){var l=u-f,b=(0<d?1:0>d?-1:0)*Math.sqrt(a*a+l*l);return[Math.atan2(a,l)/d,2*Math.atan(Math.pow(u/b,1/d))-X]},l):Zb}function Se(a,f){function l(a,f){var l=u-f;return[l*Math.sin(d*a),u-l*Math.cos(d*a)]}var b=Math.cos(a),d=a===f?Math.sin(a):(b-Math.cos(f))/(f-a),u=b/d+a;return I(d)<C?qb:(l.invert=function(a,f){var l=u-f;return[Math.atan2(a,l)/d,u-(0<d?1:0>d?-1:0)*Math.sqrt(a*a+l*l)]},l)}function Zb(a,f){return[a,Math.log(Math.tan(G/4+f/2))]}function Te(a){var f,
l=Ja(a),b=l.scale,d=l.translate,u=l.clipExtent;return l.scale=function(){var a=b.apply(l,arguments);return a===l?f?l.clipExtent(null):l:a},l.translate=function(){var a=d.apply(l,arguments);return a===l?f?l.clipExtent(null):l:a},l.clipExtent=function(a){var e=u.apply(l,arguments);if(e===l){if(f=null==a){var g=G*b(),h=d();u([[h[0]-g,h[1]-g],[h[0]+g,h[1]+g]])}}else f&&(e=null);return e},l.clipExtent(null)}function $c(a,f){return[Math.log(Math.tan(G/4+f/2)),-a]}function fb(a){return a[0]}function sb(a){return a[1]}
function Ue(a){for(var f=a.length,l=[0,1],b=2,d=2;f>d;d++){for(;1<b&&0>=Fc(a[l[b-2]],a[l[b-1]],a[d]);)--b;l[b++]=d}return l.slice(0,b)}function bh(a,f){return a[0]-f[0]||a[1]-f[1]}function ad(a,f,l){return(l[0]-f[0])*(a[1]-f[1])<(l[1]-f[1])*(a[0]-f[0])}function Ve(a,f,l,b){var d=a[0],u=l[0],e=f[0]-d,g=b[0]-u;a=a[1];l=l[1];f=f[1]-a;b=b[1]-l;u=(g*(a-l)-b*(d-u))/(b*e-g*f);return[d+u*e,a+u*f]}function We(a){var f=a[0];a=a[a.length-1];return!(f[0]-a[0]||f[1]-a[1])}function ch(){$b(this);this.edge=this.site=
this.circle=null}function Xe(a){var f=Ye.pop()||new ch;return f.site=a,f}function bd(a){gb(a);hb.remove(a);Ye.push(a);$b(a)}function Ze(a,f){var l=a.site,b=l.x,d=l.y,u=d-f;if(!u)return b;var e=a.P;if(!e)return-1/0;var l=e.site,e=l.x,l=l.y,g=l-f;if(!g)return e;var h=e-b,k=1/u-1/g,m=h/g;return k?(-m+Math.sqrt(m*m-2*k*(h*h/(-2*g)-l+g/2+d-u/2)))/k+b:(b+e)/2}function $e(a){this.site=a;this.edges=[]}function af(a,f){return f.angle-a.angle}function dh(){$b(this);this.x=this.y=this.arc=this.site=this.cy=
null}function ib(a){var f=a.P,l=a.N;if(f&&l){var b=f.site,f=a.site,d=l.site;if(b!==d){var l=f.x,u=f.y,e=b.x-l,g=b.y-u,b=d.x-l,d=d.y-u,h=2*(e*d-g*b);if(!(h>=-cd)){var k=e*e+g*g,m=b*b+d*d,g=(d*k-g*m)/h,e=(e*m-b*k)/h,d=e+u,u=bf.pop()||new dh;u.arc=a;u.site=f;u.x=g+l;u.y=d+Math.sqrt(g*g+e*e);u.cy=d;a.circle=u;a=null;for(f=tb._;f;)if(u.y<f.y||u.y===f.y&&u.x<=f.x){if(!f.L){a=f.P;break}f=f.L}else{if(!f.R){a=f;break}f=f.R}tb.insert(a,u);a||(dd=u)}}}}function gb(a){var f=a.circle;f&&(f.P||(dd=f.N),tb.remove(f),
bf.push(f),$b(f),a.circle=null)}function eh(a,f){var l=a.b;if(l)return!0;var b,d,e=a.a,l=f[0][0],g=f[1][0],h=f[0][1],k=f[1][1],m=a.l,n=a.r,p=m.x,m=m.y,q=n.x,n=n.y;d=(p+q)/2;if(n===m){if(l>d||d>=g)return;if(p>q){if(e){if(e.y>=k)return}else e={x:d,y:h};l={x:d,y:k}}else{if(e){if(e.y<h)return}else e={x:d,y:k};l={x:d,y:h}}}else if(b=(p-q)/(n-m),d=(m+n)/2-b*d,-1>b||1<b)if(p>q){if(e){if(e.y>=k)return}else e={x:(h-d)/b,y:h};l={x:(k-d)/b,y:k}}else{if(e){if(e.y<h)return}else e={x:(k-d)/b,y:k};l={x:(h-d)/b,
y:h}}else if(n>m){if(e){if(e.x>=g)return}else e={x:l,y:b*l+d};l={x:g,y:b*g+d}}else{if(e){if(e.x<l)return}else e={x:g,y:b*g+d};l={x:l,y:b*l+d}}return a.a=e,a.b=l,!0}function cf(a,f){this.l=a;this.r=f;this.a=this.b=null}function ub(a,f,l,b){var d=new cf(a,f);return jb.push(d),l&&ac(d,a,f,l),b&&ac(d,f,a,b),Ua[a.i].edges.push(new bc(d,a,f)),Ua[f.i].edges.push(new bc(d,f,a)),d}function fh(a,f,l){a=new cf(a,null);return a.a=f,a.b=l,jb.push(a),a}function ac(a,f,l,b){a.a||a.b?a.l===l?a.b=b:a.a=b:(a.a=b,a.l=
f,a.r=l)}function bc(a,f,l){var b=a.a,d=a.b;this.edge=a;this.site=f;this.angle=l?Math.atan2(l.y-f.y,l.x-f.x):a.l===f?Math.atan2(d.x-b.x,b.y-d.y):Math.atan2(b.x-d.x,d.y-b.y)}function ed(){this._=null}function $b(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function vb(a,f){var l=f.R,b=f.U;b?b.L===f?b.L=l:b.R=l:a._=l;l.U=b;f.U=l;f.R=l.L;f.R&&(f.R.U=f);l.L=f}function wb(a,f){var l=f.L,b=f.U;b?b.L===f?b.L=l:b.R=l:a._=l;l.U=b;f.U=l;f.L=l.R;f.L&&(f.L.U=f);l.R=f}function df(a){for(;a.L;)a=a.L;return a}function fd(a,
f){var l,b,d,e=a.sort(gh).pop();jb=[];Ua=Array(a.length);hb=new ed;for(tb=new ed;;)if(d=dd,e&&(!d||e.y<d.y||e.y===d.y&&e.x<d.x)){if(e.x!==l||e.y!==b){Ua[e.i]=new $e(e);l=e;for(var g=b=void 0,h=void 0,k=void 0,m=l.x,n=l.y,p=hb._;p;)if(h=Ze(p,n)-m,h>C)p=p.L;else{var q;var s=p;q=n;var r=s.N;r?q=Ze(r,q):(s=s.site,q=s.y===q?s.x:1/0);if(k=m-q,!(k>C)){h>-C?(b=p.P,g=p):k>-C?(b=p,g=p.N):b=g=p;break}if(!p.R){b=p;break}p=p.R}h=Xe(l);if(hb.insert(b,h),b||g)if(b===g)gb(b),g=Xe(b.site),hb.insert(h,g),h.edge=g.edge=
ub(b.site,h.site),ib(b),ib(g);else if(g){gb(b);gb(g);k=b.site;n=k.x;p=k.y;q=l.x-n;var s=l.y-p,m=g.site,r=m.x-n,t=m.y-p,w=2*(q*t-s*r),v=q*q+s*s,H=r*r+t*t,n={x:(t*v-s*H)/w+n,y:(q*H-r*v)/w+p};ac(g.edge,k,m,n);h.edge=ub(k,l,null,n);g.edge=ub(l,m,null,n);ib(b);ib(g)}else h.edge=ub(b.site,h.site);l=e.x;b=e.y}e=a.pop()}else{if(!d)break;m=d.arc;g=m.circle;k=g.x;n=g.cy;g={x:k,y:n};q=m.P;p=m.N;h=[m];bd(m);for(m=q;m.circle&&I(k-m.circle.x)<C&&I(n-m.circle.cy)<C;)q=m.P,h.unshift(m),bd(m),m=q;h.unshift(m);gb(m);
for(q=p;q.circle&&I(k-q.circle.x)<C&&I(n-q.circle.cy)<C;)p=q.N,h.push(q),bd(q),q=p;h.push(q);gb(q);k=void 0;n=h.length;for(k=1;n>k;++k)q=h[k],m=h[k-1],ac(q.edge,m.site,q.site,g);m=h[0];q=h[n-1];q.edge=ub(m.site,q.site,null,g);ib(m);ib(q)}if(f){e=jb;l=ye(f[0][0],f[0][1],f[1][0],f[1][1]);for(b=e.length;b--;)d=e[b],(!eh(d,f)||!l(d)||I(d.a.x-d.b.x)<C&&I(d.a.y-d.b.y)<C)&&(d.a=d.b=null,e.splice(b,1));var J,m=f[0][0],n=f[1][0],p=f[0][1];q=f[1][1];s=Ua;for(r=s.length;r--;)if(J=s[r],J&&J.prepare())for(g=J.edges,
h=g.length,b=0;h>b;)k=g[b].end(),e=k.x,l=k.y,t=g[++b%h].start(),d=t.x,t=t.y,(I(e-d)>C||I(l-t)>C)&&(g.splice(b,0,new bc(fh(J.site,k,I(e-m)<C&&q-l>C?{x:m,y:I(d-m)<C?t:q}:I(l-q)<C&&n-e>C?{x:I(t-q)<C?d:n,y:q}:I(e-n)<C&&l-p>C?{x:n,y:I(d-n)<C?t:p}:I(l-p)<C&&e-m>C?{x:I(t-p)<C?d:m,y:p}:null),J.site,null)),++h)}J={cells:Ua,edges:jb};return hb=tb=jb=Ua=null,J}function gh(a,f){return f.y-a.y||f.x-a.x}function hh(a){return a.x}function ih(a){return a.y}function ef(){return{leaf:!0,nodes:[],point:null,x:null,
y:null}}function xb(a,f,l,b,d,e){if(!a(f,l,b,d,e)){var g=.5*(l+d),h=.5*(b+e);f=f.nodes;f[0]&&xb(a,f[0],l,b,g,h);f[1]&&xb(a,f[1],g,b,d,h);f[2]&&xb(a,f[2],l,h,g,e);f[3]&&xb(a,f[3],g,h,d,e)}}function gd(a,f){a=s.rgb(a);f=s.rgb(f);var l=a.r,b=a.g,d=a.b,e=f.r-l,g=f.g-b,h=f.b-d;return function(a){return"#"+$a(Math.round(l+e*a))+$a(Math.round(b+g*a))+$a(Math.round(d+h*a))}}function ff(a,f){var l,b={},d={};for(l in a)l in f?b[l]=Va(a[l],f[l]):d[l]=a[l];for(l in f)l in a||(d[l]=f[l]);return function(a){for(l in b)d[l]=
b[l](a);return d}}function Ca(a,f){return f-=a=+a,function(l){return a+f*l}}function gf(a,f){var l,b,d,e=hd.lastIndex=id.lastIndex=0,g=-1,h=[],k=[];a+="";for(f+="";(l=hd.exec(a))&&(b=id.exec(f));)(d=b.index)>e&&(d=f.slice(e,d),h[g]?h[g]+=d:h[++g]=d),(l=l[0])===(b=b[0])?h[g]?h[g]+=b:h[++g]=b:(h[++g]=null,k.push({i:g,x:Ca(l,b)})),e=id.lastIndex;return e<f.length&&(d=f.slice(e),h[g]?h[g]+=d:h[++g]=d),2>h.length?k[0]?(f=k[0].x,function(a){return f(a)+""}):function(){return f}:(f=k.length,function(a){for(var l,
b=0;f>b;++b)h[(l=k[b]).i]=l.x(a);return h.join("")})}function Va(a,f){for(var l,b=s.interpolators.length;0<=--b&&!(l=s.interpolators[b](a,f)););return l}function cc(a,f){var l,b=[],d=[],e=a.length,g=f.length,h=Math.min(a.length,f.length);for(l=0;h>l;++l)b.push(Va(a[l],f[l]));for(;e>l;++l)d[l]=a[l];for(;g>l;++l)d[l]=f[l];return function(a){for(l=0;h>l;++l)d[l]=b[l](a);return d}}function jh(a){return function(f){return 0>=f?0:1<=f?1:a(f)}}function hf(a){return function(f){return 1-a(1-f)}}function jf(a){return function(f){return.5*
(.5>f?a(2*f):2-a(2-2*f))}}function kh(a){return a*a}function lh(a){return a*a*a}function mh(a){if(0>=a)return 0;if(1<=a)return 1;var f=a*a,l=f*a;return 4*(.5>a?l:3*(a-f)+l-.75)}function nh(a){return 1-Math.cos(a*X)}function oh(a){return Math.pow(2,10*(a-1))}function ph(a){return 1-Math.sqrt(1-a*a)}function qh(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function kf(a,f){return f-=a,function(l){return Math.round(a+
f*l)}}function lf(a){var f=[a.a,a.b],l=[a.c,a.d],b=mf(f),d=f[0]*l[0]+f[1]*l[1],e;e=-d;e=(l[0]+=e*f[0],l[1]+=e*f[1],l);e=mf(e)||0;f[0]*l[1]<l[0]*f[1]&&(f[0]*=-1,f[1]*=-1,b*=-1,d*=-1);this.rotate=(b?Math.atan2(f[1],f[0]):Math.atan2(-l[0],l[1]))*N;this.translate=[a.e,a.f];this.scale=[b,e];this.skew=e?Math.atan2(d,e)*N:0}function mf(a){var f=Math.sqrt(a[0]*a[0]+a[1]*a[1]);return f&&(a[0]/=f,a[1]/=f),f}function nf(a,f){var l,b=[],d=[],e=s.transform(a),g=s.transform(f),h=e.translate,k=g.translate,m=e.rotate,
n=g.rotate,p=e.skew,q=g.skew,e=e.scale,g=g.scale;return h[0]!=k[0]||h[1]!=k[1]?(b.push("translate(",null,",",null,")"),d.push({i:1,x:Ca(h[0],k[0])},{i:3,x:Ca(h[1],k[1])})):k[0]||k[1]?b.push("translate("+k+")"):b.push(""),m!=n?(180<m-n?n+=360:180<n-m&&(m+=360),d.push({i:b.push(b.pop()+"rotate(",null,")")-2,x:Ca(m,n)})):n&&b.push(b.pop()+"rotate("+n+")"),p!=q?d.push({i:b.push(b.pop()+"skewX(",null,")")-2,x:Ca(p,q)}):q&&b.push(b.pop()+"skewX("+q+")"),e[0]!=g[0]||e[1]!=g[1]?(l=b.push(b.pop()+"scale(",
null,",",null,")"),d.push({i:l-4,x:Ca(e[0],g[0])},{i:l-2,x:Ca(e[1],g[1])})):(1!=g[0]||1!=g[1])&&b.push(b.pop()+"scale("+g+")"),l=d.length,function(a){for(var f,e=-1;++e<l;)b[(f=d[e]).i]=f.x(a);return b.join("")}}function rh(a,f){return f=f-(a=+a)?1/(f-a):0,function(l){return(l-a)*f}}function sh(a,f){return f=f-(a=+a)?1/(f-a):0,function(l){return Math.max(0,Math.min(1,(l-a)*f))}}function th(a){var f=a.source;a=a.target;var l;var b=a;if(f===b)l=f;else{l=of(f);for(var b=of(b),d=l.pop(),e=b.pop(),g=null;d===
e;)g=d,d=l.pop(),e=b.pop();l=g}for(b=[f];f!==l;)f=f.parent,b.push(f);for(f=b.length;a!==l;)b.splice(f,0,a),a=a.parent;return b}function of(a){for(var f=[],b=a.parent;null!=b;)f.push(a),a=b,b=b.parent;return f.push(a),f}function uh(a){a.fixed|=2}function vh(a){a.fixed&=-7}function wh(a){a.fixed|=4;a.px=a.x;a.py=a.y}function xh(a){a.fixed&=-5}function pf(a,f,b){var d=0,e=0;if(a.charge=0,!a.leaf)for(var g,h=a.nodes,k=h.length,m=-1;++m<k;)g=h[m],null!=g&&(pf(g,f,b),a.charge+=g.charge,d+=g.charge*g.cx,
e+=g.charge*g.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5),f*=b[a.point.index],a.charge+=a.pointCharge=f,d+=f*a.point.x,e+=f*a.point.y);a.cx=d/a.charge;a.cy=e/a.charge}function yb(a,f){return s.rebind(a,f,"sort","children","value"),a.nodes=a,a.links=yh,a}function zb(a,f){for(var b=[a];null!=(a=b.pop());)if(f(a),(e=a.children)&&(d=e.length))for(var d,e;0<=--d;)b.push(e[d])}function ua(a,f){for(var b=[a],d=[];null!=(a=b.pop());)if(d.push(a),(g=a.children)&&(e=g.length))for(var e,
g,h=-1;++h<e;)b.push(g[h]);for(;null!=(a=d.pop());)f(a)}function zh(a){return a.children}function Ah(a){return a.value}function Bh(a,f){return f.value-a.value}function yh(a){return s.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function Ch(a){return a.x}function Dh(a){return a.y}function Eh(a,f,b){a.y0=f;a.y=b}function jd(a){return s.range(a.length)}function kd(a){var f=-1;a=a[0].length;for(var b=[];++f<a;)b[f]=0;return b}function Fh(a){for(var f,b=
1,d=0,e=a[0][1],g=a.length;g>b;++b)(f=a[b][1])>e&&(d=b,e=f);return d}function Gh(a){return a.reduce(Hh,0)}function Hh(a,f){return a+f[1]}function Ih(a,f){return qf(a,Math.ceil(Math.log(f.length)/Math.LN2+1))}function qf(a,f){for(var b=-1,d=+a[0],e=(a[1]-d)/f,g=[];++b<=f;)g[b]=e*b+d;return g}function Jh(a){return[s.min(a),s.max(a)]}function Kh(a,f){return a.value-f.value}function ld(a,f){var b=a._pack_next;a._pack_next=f;f._pack_prev=a;f._pack_next=b;b._pack_prev=f}function rf(a,f){a._pack_next=f;
f._pack_prev=a}function sf(a,f){var b=f.x-a.x,d=f.y-a.y,e=a.r+f.r;return.999*e*e>b*b+d*d}function tf(a){function f(a){p=Math.min(a.x-a.r,p);q=Math.max(a.x+a.r,q);s=Math.min(a.y-a.r,s);r=Math.max(a.y+a.r,r)}if((b=a.children)&&(n=b.length)){var b,d,e,g,h,k,m,n,p=1/0,q=-1/0,s=1/0,r=-1/0;if(b.forEach(Lh),d=b[0],d.x=-d.r,d.y=0,f(d),1<n&&(e=b[1],e.x=e.r,e.y=0,f(e),2<n))for(g=b[2],uf(d,e,g),f(g),ld(d,g),d._pack_prev=g,ld(g,e),e=d._pack_next,h=3;n>h;h++){uf(d,e,g=b[h]);var t=0,w=1,v=1;for(k=e._pack_next;k!==
e;k=k._pack_next,w++)if(sf(k,g)){t=1;break}if(1==t)for(m=d._pack_prev;m!==k._pack_prev&&!sf(m,g);m=m._pack_prev,v++);t?(v>w||w==v&&e.r<d.r?rf(d,e=k):rf(d=m,e),h--):(ld(d,g),e=g,f(g))}d=(p+q)/2;e=(s+r)/2;for(h=k=0;n>h;h++)g=b[h],g.x-=d,g.y-=e,k=Math.max(k,g.r+Math.sqrt(g.x*g.x+g.y*g.y));a.r=k;b.forEach(Mh)}}function Lh(a){a._pack_next=a._pack_prev=a}function Mh(a){delete a._pack_next;delete a._pack_prev}function vf(a,f,b,d){var e=a.children;if(a.x=f+=d*a.x,a.y=b+=d*a.y,a.r*=d,e){a=-1;for(var g=e.length;++a<
g;)vf(e[a],f,b,d)}}function uf(a,f,b){var d=a.r+b.r,e=f.x-a.x,g=f.y-a.y;if(d&&(e||g)){var h=f.r+b.r,k=e*e+g*g,h=h*h,d=d*d;f=.5+(d-h)/(2*k);h=Math.sqrt(Math.max(0,2*h*(d+k)-(d-=k)*d-h*h))/(2*k);b.x=a.x+f*e+h*g;b.y=a.y+f*g-h*e}else b.x=a.x+d,b.y=a.y}function wf(a,f){return a.parent==f.parent?1:2}function md(a){var f=a.children;return f.length?f[0]:a.t}function nd(a){var f,b=a.children;return(f=b.length)?b[f-1]:a.t}function Nh(a){return 1+s.max(a,function(a){return a.y})}function Oh(a){return a.reduce(function(a,
b){return a+b.x},0)/a.length}function xf(a){var f=a.children;return f&&f.length?xf(f[0]):a}function yf(a){var f,b=a.children;return b&&(f=b.length)?yf(b[f-1]):a}function od(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function zf(a,f){var b=a.x+f[3],d=a.y+f[0],e=a.dx-f[1]-f[3],g=a.dy-f[0]-f[2];return 0>e&&(b+=e/2,e=0),0>g&&(d+=g/2,g=0),{x:b,y:d,dx:e,dy:g}}function kb(a){var f=a[0];a=a[a.length-1];return a>f?[f,a]:[a,f]}function dc(a){return a.rangeExtent?a.rangeExtent():kb(a.range())}function Ph(a,f,b,
d){var e=b(a[0],a[1]),g=d(f[0],f[1]);return function(a){return g(e(a))}}function ec(a,f){var b,d=0,e=a.length-1,g=a[d],h=a[e];return g>h&&(b=d,d=e,e=b,b=g,g=h,h=b),a[d]=f.floor(g),a[e]=f.ceil(h),a}function Af(a){return a?{floor:function(f){return Math.floor(f/a)*a},ceil:function(f){return Math.ceil(f/a)*a}}:Qh}function Rh(a,f,b,d){var e=[],g=[],h=0,k=Math.min(a.length,f.length)-1;for(a[k]<a[0]&&(a=a.slice().reverse(),f=f.slice().reverse());++h<=k;)e.push(b(a[h-1],a[h])),g.push(d(f[h-1],f[h]));return function(f){var b=
s.bisect(a,f,1,k)-1;return g[b](e[b](f))}}function Bf(a,f,b,d){function e(){var m=2<Math.min(a.length,f.length)?Rh:Ph,A=d?sh:rh;return h=m(a,f,A,b),k=m(f,a,A,Va),g}function g(a){return h(a)}var h,k;return g.invert=function(a){return k(a)},g.domain=function(f){return arguments.length?(a=f.map(Number),e()):a},g.range=function(a){return arguments.length?(f=a,e()):f},g.rangeRound=function(a){return g.range(a).interpolate(kf)},g.clamp=function(a){return arguments.length?(d=a,e()):d},g.interpolate=function(a){return arguments.length?
(b=a,e()):b},g.ticks=function(f){return s.range.apply(s,Ka(a,f))},g.tickFormat=function(f,b){return pd(a,f,b)},g.nice=function(f){return ec(a,Af(Ka(a,f)[2])),e()},g.copy=function(){return Bf(a,f,b,d)},e()}function qd(a,f){return s.rebind(a,f,"range","rangeRound","interpolate","clamp")}function Ka(a,f){null==f&&(f=10);var b=kb(a),d=b[1]-b[0],e=Math.pow(10,Math.floor(Math.log(d/f)/Math.LN10)),d=f/d*e;return.15>=d?e*=10:.35>=d?e*=5:.75>=d&&(e*=2),b[0]=Math.ceil(b[0]/e)*e,b[1]=Math.floor(b[1]/e)*e+.5*
e,b[2]=e,b}function pd(a,f,b){a=Ka(a,f);if(b){f=je.exec(b);if(f.shift(),"s"===f[8]){var d=s.formatPrefix(Math.max(I(a[0]),I(a[1])));return f[7]||(f[7]="."+fc(d.scale(a[2]))),f[8]="f",b=s.format(f.join("")),function(a){return b(d.scale(a))+d.symbol}}f[7]||(f[7]="."+Sh(f[8],a));b=f.join("")}else b=",."+fc(a[2])+"f";return s.format(b)}function fc(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function Sh(a,f){var b=fc(f[2]);return a in Th?Math.abs(b-fc(Math.max(I(f[0]),I(f[1]))))+ +("e"!==a):b-2*("%"===
a)}function Cf(a,f,b,d){function e(a){return(b?Math.log(0>a?0:a):-Math.log(0<a?0:-a))/Math.log(f)}function g(a){return b?Math.pow(f,a):-Math.pow(f,-a)}function h(f){return a(e(f))}return h.invert=function(f){return g(a.invert(f))},h.domain=function(f){return arguments.length?(b=0<=f[0],a.domain((d=f.map(Number)).map(e)),h):d},h.base=function(b){return arguments.length?(f=+b,a.domain(d.map(e)),h):f},h.nice=function(){var f=ec(d.map(e),b?Math:Uh);return a.domain(f),d=f.map(g),h},h.ticks=function(){var a=
kb(d),h=[],k=a[0],a=a[1],m=Math.floor(e(k)),n=Math.ceil(e(a)),p=f%1?2:f;if(isFinite(n-m)){if(b){for(;n>m;m++)for(var q=1;p>q;q++)h.push(g(m)*q);h.push(g(m))}else for(h.push(g(m));m++<n;)for(q=p-1;0<q;q--)h.push(g(m)*q);for(m=0;h[m]<k;m++);for(n=h.length;h[n-1]>a;n--);h=h.slice(m,n)}return h},h.tickFormat=function(a,f){if(!arguments.length)return Df;2>arguments.length?f=Df:"function"!=typeof f&&(f=s.format(f));var d,k=Math.max(.1,a/h.ticks().length),z=b?(d=1E-12,Math.ceil):(d=-1E-12,Math.floor);return function(a){return a/
g(z(e(a)+d))<=k?f(a):""}},h.copy=function(){return Cf(a.copy(),f,b,d)},qd(h,a)}function Ef(a,f,b){function d(f){return a(e(f))}var e=gc(f),g=gc(1/f);return d.invert=function(f){return g(a.invert(f))},d.domain=function(f){return arguments.length?(a.domain((b=f.map(Number)).map(e)),d):b},d.ticks=function(a){return s.range.apply(s,Ka(b,a))},d.tickFormat=function(a,f){return pd(b,a,f)},d.nice=function(a){return d.domain(ec(b,Af(Ka(b,a)[2])))},d.exponent=function(h){return arguments.length?(e=gc(f=h),
g=gc(1/f),a.domain(b.map(e)),d):f},d.copy=function(){return Ef(a.copy(),f,b)},qd(d,a)}function gc(a){return function(f){return 0>f?-Math.pow(-f,a):Math.pow(f,a)}}function Ff(a,f){function b(l){return h[((e.get(l)||("range"===f.t?e.set(l,a.push(l)):0/0))-1)%h.length]}function d(f,b){return s.range(a.length).map(function(a){return f+b*a})}var e,h,k;return b.domain=function(d){if(!arguments.length)return a;a=[];e=new g;for(var h,u=-1,k=d.length;++u<k;)e.has(h=d[u])||e.set(h,a.push(h));return b[f.t].apply(b,
f.a)},b.range=function(a){return arguments.length?(h=a,k=0,f={t:"range",a:arguments},b):h},b.rangePoints=function(e,g){2>arguments.length&&(g=0);var m=e[0],A=e[1],n=(A-m)/(Math.max(1,a.length-1)+g);return h=d(2>a.length?(m+A)/2:m+n*g/2,n),k=0,f={t:"rangePoints",a:arguments},b},b.rangeBands=function(e,g,m){2>arguments.length&&(g=0);3>arguments.length&&(m=g);var A=e[1]<e[0],n=e[A-0],p=(e[1-A]-n)/(a.length-g+2*m);return h=d(n+p*m,p),A&&h.reverse(),k=p*(1-g),f={t:"rangeBands",a:arguments},b},b.rangeRoundBands=
function(e,g,m){2>arguments.length&&(g=0);3>arguments.length&&(m=g);var A=e[1]<e[0],n=e[A-0],p=e[1-A],q=Math.floor((p-n)/(a.length-g+2*m));return h=d(n+Math.round((p-n-(a.length-g)*q)/2),q),A&&h.reverse(),k=Math.round(q*(1-g)),f={t:"rangeRoundBands",a:arguments},b},b.rangeBand=function(){return k},b.rangeExtent=function(){return kb(f.a[0])},b.copy=function(){return Ff(a,f)},b.domain(a)}function Gf(a,f){function b(){var l=0,e=f.length;for(g=[];++l<e;)g[l-1]=s.quantile(a,l/e);return d}function d(a){return isNaN(a=
+a)?void 0:f[s.bisect(g,a)]}var g;return d.domain=function(f){return arguments.length?(a=f.filter(k).sort(e),b()):a},d.range=function(a){return arguments.length?(f=a,b()):f},d.quantiles=function(){return g},d.invertExtent=function(b){return b=f.indexOf(b),0>b?[0/0,0/0]:[0<b?g[b-1]:a[0],b<g.length?g[b]:a[a.length-1]]},d.copy=function(){return Gf(a,f)},b()}function Hf(a,f,b){function d(f){return b[Math.max(0,Math.min(h,Math.floor(g*(f-a))))]}function e(){return g=b.length/(f-a),h=b.length-1,d}var g,
h;return d.domain=function(b){return arguments.length?(a=+b[0],f=+b[b.length-1],e()):[a,f]},d.range=function(a){return arguments.length?(b=a,e()):b},d.invertExtent=function(f){return f=b.indexOf(f),f=0>f?0/0:f/g+a,[f,f+1/g]},d.copy=function(){return Hf(a,f,b)},e()}function If(a,f){function b(l){return l>=l?f[s.bisect(a,l)]:void 0}return b.domain=function(f){return arguments.length?(a=f,b):a},b.range=function(a){return arguments.length?(f=a,b):f},b.invertExtent=function(b){return b=f.indexOf(b),[a[b-
1],a[b]]},b.copy=function(){return If(a,f)},b}function Jf(a){function f(a){return+a}return f.invert=f,f.domain=f.range=function(b){return arguments.length?(a=b.map(f),f):a},f.ticks=function(f){return s.range.apply(s,Ka(a,f))},f.tickFormat=function(f,b){return pd(a,f,b)},f.copy=function(){return Jf(a)},f}function Vh(a){return a.innerRadius}function Wh(a){return a.outerRadius}function Kf(a){return a.startAngle}function Lf(a){return a.endAngle}function Mf(a){function f(f){function h(){n.push("M",g(a(p),
k))}for(var m,n=[],p=[],q=-1,s=f.length,R=K(b),r=K(d);++q<s;)e.call(this,m=f[q],q)?p.push([+R.call(this,m,q),+r.call(this,m,q)]):p.length&&(h(),p=[]);return p.length&&h(),n.length?n.join(""):null}var b=fb,d=sb,e=eb,g=ha,h=g.key,k=.7;return f.x=function(a){return arguments.length?(b=a,f):b},f.y=function(a){return arguments.length?(d=a,f):d},f.defined=function(a){return arguments.length?(e=a,f):e},f.interpolate=function(a){return arguments.length?(h="function"==typeof a?g=a:(g=rd.get(a)||ha).key,f):
h},f.tension=function(a){return arguments.length?(k=a,f):k},f}function ha(a){return a.join("L")}function sd(a){for(var f=0,b=a.length,d=a[0],e=[d[0],",",d[1]];++f<b;)e.push("V",(d=a[f])[1],"H",d[0]);return e.join("")}function td(a){for(var f=0,b=a.length,d=a[0],e=[d[0],",",d[1]];++f<b;)e.push("H",(d=a[f])[0],"V",d[1]);return e.join("")}function hc(a,f){if(1>f.length||a.length!=f.length&&a.length!=f.length+2)return ha(a);var b=a.length!=f.length,d="",e=a[0],g=a[1],h=f[0],k=h,m=1;if(b&&(d+="Q"+(g[0]-
2*h[0]/3)+","+(g[1]-2*h[1]/3)+","+g[0]+","+g[1],e=a[1],m=2),1<f.length)for(k=f[1],g=a[m],m++,d+="C"+(e[0]+h[0])+","+(e[1]+h[1])+","+(g[0]-k[0])+","+(g[1]-k[1])+","+g[0]+","+g[1],e=2;e<f.length;e++,m++)g=a[m],k=f[e],d+="S"+(g[0]-k[0])+","+(g[1]-k[1])+","+g[0]+","+g[1];b&&(b=a[m],d+="Q"+(g[0]+2*k[0]/3)+","+(g[1]+2*k[1]/3)+","+b[0]+","+b[1]);return d}function ud(a,f){for(var b,d=[],e=(1-f)/2,g=a[0],h=a[1],k=1,m=a.length;++k<m;)b=g,g=h,h=a[k],d.push([e*(h[0]-b[0]),e*(h[1]-b[1])]);return d}function Nf(a){if(3>
a.length)return ha(a);var f=1,b=a.length,d=a[0],e=d[0],g=d[1],h=[e,e,e,(d=a[1])[0]],k=[g,g,g,d[1]],e=[e,",",g,"L",ka(La,h),",",ka(La,k)];for(a.push(a[b-1]);++f<=b;)d=a[f],h.shift(),h.push(d[0]),k.shift(),k.push(d[1]),vd(e,h,k);return a.pop(),e.push("L",d),e.join("")}function ka(a,f){return a[0]*f[0]+a[1]*f[1]+a[2]*f[2]+a[3]*f[3]}function vd(a,f,b){a.push("C",ka(Of,f),",",ka(Of,b),",",ka(Pf,f),",",ka(Pf,b),",",ka(La,f),",",ka(La,b))}function wd(a,f){return(f[1]-a[1])/(f[0]-a[0])}function Qf(a){for(var f,
b,d,e=-1,g=a.length;++e<g;)f=a[e],b=f[0],d=f[1]+Wa,f[0]=b*Math.cos(d),f[1]=b*Math.sin(d);return a}function Rf(a){function f(f){function m(){t.push("M",k(a(J),q),p,n(a(w.reverse()),q),"Z")}for(var s,r,Rd,t=[],w=[],J=[],v=-1,x=f.length,y=K(b),ea=K(e),E=b===d?function(){return r}:K(d),D=e===g?function(){return Rd}:K(g);++v<x;)h.call(this,s=f[v],v)?(w.push([r=+y.call(this,s,v),Rd=+ea.call(this,s,v)]),J.push([+E.call(this,s,v),+D.call(this,s,v)])):w.length&&(m(),w=[],J=[]);return w.length&&m(),t.length?
t.join(""):null}var b=fb,d=fb,e=0,g=sb,h=eb,k=ha,m=k.key,n=k,p="L",q=.7;return f.x=function(a){return arguments.length?(b=d=a,f):d},f.x0=function(a){return arguments.length?(b=a,f):b},f.x1=function(a){return arguments.length?(d=a,f):d},f.y=function(a){return arguments.length?(e=g=a,f):g},f.y0=function(a){return arguments.length?(e=a,f):e},f.y1=function(a){return arguments.length?(g=a,f):g},f.defined=function(a){return arguments.length?(h=a,f):h},f.interpolate=function(a){return arguments.length?(m=
"function"==typeof a?k=a:(k=rd.get(a)||ha).key,n=k.reverse||k,p=k.closed?"M":"L",f):m},f.tension=function(a){return arguments.length?(q=a,f):q},f}function Xh(a){return a.radius}function Sf(a){return[a.x,a.y]}function Yh(a){return function(){var f=a.apply(this,arguments),b=f[0],f=f[1]+Wa;return[b*Math.cos(f),b*Math.sin(f)]}}function Zh(){return 64}function $h(){return"circle"}function Tf(a){a=Math.sqrt(a/G);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function Ab(a,f){return Cb(a,
V),a.id=f,a}function xd(a,f,b,d){var e=a.id;return va(a,"function"==typeof b?function(a,g,h){a.__transition__[e].tween.set(f,d(b.call(a,a.__data__,g,h)))}:(b=d(b),function(a){a.__transition__[e].tween.set(f,b)}))}function ai(a){return null==a&&(a=""),function(){this.textContent=a}}function ic(a,f,b,d){var e=a.__transition__||(a.__transition__={active:0,count:0}),h=e[b];if(!h){var k=d.time,h=e[b]={tween:new g,time:k,ease:d.ease,delay:d.delay,duration:d.duration};++e.count;s.timer(function(d){function g(d){return e.active>
b?z():(e.active=b,h.event&&h.event.start.call(a,n,f),h.tween.forEach(function(b,d){(d=d.call(a,n,f))&&w.push(d)}),s.timer(function(){return t.c=m(d||1)?eb:m,1},0,k),void 0)}function m(d){if(e.active!==b)return z();d/=r;for(var g=p(d),k=w.length;0<k;)w[--k].call(a,g);return 1<=d?(h.event&&h.event.end.call(a,n,f),z()):void 0}function z(){return--e.count?delete e[b]:delete a.__transition__,1}var n=a.__data__,p=h.ease,q=h.delay,r=h.duration,t=ya,w=[];return t.t=q+k,d>=q?g(d-q):(t.c=g,void 0)},0,k)}}function Uf(a,
f){a.attr("transform",function(a){return"translate("+f(a)+",0)"})}function Vf(a,f){a.attr("transform",function(a){return"translate(0,"+f(a)+")"})}function yd(a){return a.toISOString()}function zd(a,f,b){function d(f){return a(f)}function e(a,b){var d=(a[1]-a[0])/b,l=s.bisect(jc,d);return l==jc.length?[f.year,Ka(a.map(function(a){return a/31536E6}),b)[2]]:l?f[d/jc[l-1]<jc[l]/d?l-1:l]:[bi,Ka(a,b)[2]]}return d.invert=function(f){return Xa(a.invert(f))},d.domain=function(f){return arguments.length?(a.domain(f),
d):a.domain().map(Xa)},d.nice=function(a,f){function b(d){return!isNaN(d)&&!a.range(d,Xa(+d+1),f).length}var l=d.domain(),g=kb(l),g=null==a?e(g,10):"number"==typeof a&&e(g,a);return g&&(a=g[0],f=g[1]),d.domain(ec(l,1<f?{floor:function(f){for(;b(f=a.floor(f));)f=Xa(f-1);return f},ceil:function(f){for(;b(f=a.ceil(f));)f=Xa(+f+1);return f}}:a))},d.ticks=function(a,f){var b=kb(d.domain()),l=null==a?e(b,10):"number"==typeof a?e(b,a):!a.range&&[{range:a},f];return l&&(a=l[0],f=l[1]),a.range(b[0],Xa(+b[1]+
1),1>f?1:f)},d.tickFormat=function(){return b},d.copy=function(){return zd(a.copy(),f,b)},qd(d,a)}function Xa(a){return new Date(a)}function ci(a){return JSON.parse(a.responseText)}function di(a){var f=qa.createRange();return f.selectNode(qa.body),f.createContextualFragment(a.responseText)}var s={version:"3.4.12"};Date.now||(Date.now=function(){return+new Date});var Wf=[].slice,Ea=function(a){return Wf.call(a)},qa=document,xa=qa.documentElement,Z=window;try{Ea(xa.childNodes)[0].nodeType}catch(Di){Ea=
function(a){for(var f=a.length,b=Array(f);f--;)b[f]=a[f];return b}}try{qa.createElement("div").style.setProperty("opacity",0,"")}catch(Ei){var kc=Z.Element.prototype,ei=kc.setAttribute,fi=kc.setAttributeNS,Xf=Z.CSSStyleDeclaration.prototype,gi=Xf.setProperty;kc.setAttribute=function(a,f){ei.call(this,a,f+"")};kc.setAttributeNS=function(a,f,b){fi.call(this,a,f,b+"")};Xf.setProperty=function(a,f,b){gi.call(this,a,f+"",b)}}s.ascending=e;s.descending=function(a,f){return a>f?-1:f>a?1:f>=a?0:0/0};s.min=
function(a,f){var b,d,e=-1,g=a.length;if(1===arguments.length){for(;++e<g&&!(null!=(b=a[e])&&b>=b);)b=void 0;for(;++e<g;)null!=(d=a[e])&&b>d&&(b=d)}else{for(;++e<g&&!(null!=(b=f.call(a,a[e],e))&&b>=b);)b=void 0;for(;++e<g;)null!=(d=f.call(a,a[e],e))&&b>d&&(b=d)}return b};s.max=function(a,f){var b,d,e=-1,g=a.length;if(1===arguments.length){for(;++e<g&&!(null!=(b=a[e])&&b>=b);)b=void 0;for(;++e<g;)null!=(d=a[e])&&d>b&&(b=d)}else{for(;++e<g&&!(null!=(b=f.call(a,a[e],e))&&b>=b);)b=void 0;for(;++e<g;)null!=
(d=f.call(a,a[e],e))&&d>b&&(b=d)}return b};s.extent=function(a,f){var b,d,e,g=-1,h=a.length;if(1===arguments.length){for(;++g<h&&!(null!=(b=e=a[g])&&b>=b);)b=e=void 0;for(;++g<h;)null!=(d=a[g])&&(b>d&&(b=d),d>e&&(e=d))}else{for(;++g<h&&!(null!=(b=e=f.call(a,a[g],g))&&b>=b);)b=void 0;for(;++g<h;)null!=(d=f.call(a,a[g],g))&&(b>d&&(b=d),d>e&&(e=d))}return[b,e]};s.sum=function(a,f){var b,d=0,e=a.length,g=-1;if(1===arguments.length)for(;++g<e;)isNaN(b=+a[g])||(d+=b);else for(;++g<e;)isNaN(b=+f.call(a,
a[g],g))||(d+=b);return d};s.mean=function(a,f){var b,d=0,e=a.length,g=-1,h=e;if(1===arguments.length)for(;++g<e;)k(b=a[g])?d+=b:--h;else for(;++g<e;)k(b=f.call(a,a[g],g))?d+=b:--h;return h?d/h:void 0};s.quantile=function(a,f){var b=(a.length-1)*f+1,d=Math.floor(b),e=+a[d-1];return(b-=d)?e+b*(a[d]-e):e};s.median=function(a,f){return 1<arguments.length&&(a=a.map(f)),a=a.filter(k),a.length?s.quantile(a.sort(e),.5):void 0};var Yf=d(e);s.bisectLeft=Yf.left;s.bisect=s.bisectRight=Yf.right;s.bisector=function(a){return d(1===
a.length?function(f,b){return e(a(f),b)}:a)};s.shuffle=function(a){for(var f,b,d=a.length;d;)b=0|Math.random()*d--,f=a[d],a[d]=a[b],a[b]=f;return a};s.permute=function(a,f){for(var b=f.length,d=Array(b);b--;)d[b]=a[f[b]];return d};s.pairs=function(a){for(var f=0,b=a.length-1,d=a[0],e=Array(0>b?0:b);b>f;)e[f]=[d,d=a[++f]];return e};s.zip=function(){if(!(d=arguments.length))return[];for(var a=-1,f=s.min(arguments,h),b=Array(f);++a<f;)for(var d,e=-1,g=b[a]=Array(d);++e<d;)g[e]=arguments[e][a];return b};
s.transpose=function(a){return s.zip.apply(s,a)};s.keys=function(a){var f=[],b;for(b in a)f.push(b);return f};s.values=function(a){var f=[],b;for(b in a)f.push(a[b]);return f};s.entries=function(a){var f=[],b;for(b in a)f.push({key:b,value:a[b]});return f};s.merge=function(a){var f,b,d,e=a.length;f=-1;for(var g=0;++f<e;)g+=a[f].length;for(b=Array(g);0<=--e;)for(d=a[e],f=d.length;0<=--f;)b[--g]=d[f];return b};var I=Math.abs;s.range=function(a,f,b){if(3>arguments.length&&(b=1,2>arguments.length&&(f=
a,a=0)),1/0===(f-a)/b)throw Error("infinite range");var d,e=[],g;d=I(b);for(g=1;d*g%1;)g*=10;var h=-1;if(a*=g,f*=g,b*=g,0>b)for(;(d=a+b*++h)>f;)e.push(d/g);else for(;(d=a+b*++h)<f;)e.push(d/g);return e};s.map=function(a){var f=new g;if(a instanceof g)a.forEach(function(a,b){f.set(a,b)});else for(var b in a)f.set(b,a[b]);return f};b(g,{has:m,get:function(a){return this[Na+a]},set:function(a,f){return this[Na+a]=f},remove:function(a){return a=Na+a,a in this&&delete this[a]},keys:p,values:function(){var a=
[];return this.forEach(function(f,b){a.push(b)}),a},entries:function(){var a=[];return this.forEach(function(f,b){a.push({key:f,value:b})}),a},size:n,empty:q,forEach:function(a){for(var f in this)f.charCodeAt(0)===Bb&&a.call(this,f.slice(1),this[f])}});var Na="\x00",Bb=Na.charCodeAt(0);s.nest=function(){function a(f,k,m){if(m>=h.length)return d?d.call(e,k):b?k.sort(b):k;for(var n,p,q,s,r=-1,R=k.length,t=h[m++],w=new g;++r<R;)(s=w.get(n=t(p=k[r])))?s.push(p):w.set(n,[p]);return f?(p=f(),q=function(b,
d){p.set(b,a(f,d,m))}):(p={},q=function(b,d){p[b]=a(f,d,m)}),w.forEach(q),p}function f(a,b){if(b>=h.length)return a;var d=[],e=k[b++];return a.forEach(function(a,e){d.push({key:a,values:f(e,b)})}),e?d.sort(function(a,f){return e(a.key,f.key)}):d}var b,d,e={},h=[],k=[];return e.map=function(f,b){return a(b,f,0)},e.entries=function(b){return f(a(s.map,b,0),0)},e.key=function(a){return h.push(a),e},e.sortKeys=function(a){return k[h.length-1]=a,e},e.sortValues=function(a){return b=a,e},e.rollup=function(a){return d=
a,e},e};s.set=function(a){var f=new r;if(a)for(var b=0,d=a.length;d>b;++b)f.add(a[b]);return f};b(r,{has:m,add:function(a){return this[Na+a]=!0,a},remove:function(a){return a=Na+a,a in this&&delete this[a]},values:p,size:n,empty:q,forEach:function(a){for(var f in this)f.charCodeAt(0)===Bb&&a.call(this,f.slice(1))}});s.behavior={};s.rebind=function(a,f){for(var b,d=1,e=arguments.length;++d<e;)a[b=arguments[d]]=t(a,f,f[b]);return a};var Qd="webkit ms moz Moz o O".split(" ");s.dispatch=function(){for(var a=
new w,f=-1,b=arguments.length;++f<b;)a[arguments[f]]=y(a);return a};w.prototype.on=function(a,f){var b=a.indexOf("."),d="";if(0<=b&&(d=a.slice(b+1),a=a.slice(0,b)),a)return 2>arguments.length?this[a].on(d):this[a].on(d,f);if(2===arguments.length){if(null==f)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}};s.event=null;s.requote=function(a){return a.replace(hi,"\\$&")};var hi=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Cb={}.__proto__?function(a,f){a.__proto__=f}:function(a,f){for(var b in f)a[b]=
f[b]},Ac=function(a,f){return f.querySelector(a)},Bc=function(a,f){return f.querySelectorAll(a)},ii=xa.matches||xa[x(xa,"matchesSelector")],Sd=function(a,f){return ii.call(a,f)};"function"==typeof Sizzle&&(Ac=function(a,f){return Sizzle(a,f)[0]||null},Bc=Sizzle,Sd=Sizzle.matchesSelector);s.selection=function(){return Zf};var L=s.selection.prototype=[];L.select=function(a){var f,b,d,e,g=[];a=T(a);for(var h=-1,k=this.length;++h<k;){g.push(f=[]);f.parentNode=(d=this[h]).parentNode;for(var m=-1,n=d.length;++m<
n;)(e=d[m])?(f.push(b=a.call(e,e.__data__,m,h)),b&&"__data__"in e&&(b.__data__=e.__data__)):f.push(null)}return D(g)};L.selectAll=function(a){var f,b,d=[];a=Hd(a);for(var e=-1,g=this.length;++e<g;)for(var h=this[e],k=-1,m=h.length;++k<m;)(b=h[k])&&(d.push(f=Ea(a.call(b,b.__data__,k,e))),f.parentNode=b);return D(d)};var Ad={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};
s.ns={prefix:Ad,qualify:function(a){var f=a.indexOf(":"),b=a;return 0<=f&&(b=a.slice(0,f),a=a.slice(f+1)),Ad.hasOwnProperty(b)?{space:Ad[b],local:a}:a}};L.attr=function(a,f){if(2>arguments.length){if("string"==typeof a){var b=this.node();return a=s.ns.qualify(a),a.local?b.getAttributeNS(a.space,a.local):b.getAttribute(a)}for(f in a)this.each(Id(f,a[f]));return this}return this.each(Id(a,f))};L.classed=function(a,f){if(2>arguments.length){if("string"==typeof a){var b=this.node(),d=(a=(a+"").trim().split(/^|\s+/)).length,
e=-1;if(f=b.classList)for(;++e<d;){if(!f.contains(a[e]))return!1}else for(f=b.getAttribute("class");++e<d;)if(!Kd(a[e]).test(f))return!1;return!0}for(f in a)this.each(Ld(f,a[f]));return this}return this.each(Ld(a,f))};L.style=function(a,f,b){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(f="");for(b in a)this.each(Md(b,a[b],f));return this}if(2>d)return Z.getComputedStyle(this.node(),null).getPropertyValue(a);b=""}return this.each(Md(a,f,b))};L.property=function(a,f){if(2>arguments.length){if("string"==
typeof a)return this.node()[a];for(f in a)this.each(Nd(f,a[f]));return this}return this.each(Nd(a,f))};L.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var f=a.apply(this,arguments);this.textContent=null==f?"":f}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};L.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var f=a.apply(this,arguments);this.innerHTML=null==f?"":f}:null==a?function(){this.innerHTML=
""}:function(){this.innerHTML=a}):this.node().innerHTML};L.append=function(a){return a=Od(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})};L.insert=function(a,f){return a=Od(a),f=T(f),this.select(function(){return this.insertBefore(a.apply(this,arguments),f.apply(this,arguments)||null)})};L.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};L.data=function(a,f){function b(a,d){var e,l,h,k=a.length,u=d.length,z=Math.min(k,u),q=
Array(u),A=Array(u),s=Array(k);if(f){var r=new g,t=new g,R=[];for(e=-1;++e<k;)z=f.call(l=a[e],l.__data__,e),r.has(z)?s[e]=l:r.set(z,l),R.push(z);for(e=-1;++e<u;)z=f.call(d,h=d[e],e),(l=r.get(z))?(q[e]=l,l.__data__=h):t.has(z)||(A[e]={__data__:h}),t.set(z,h),r.remove(z);for(e=-1;++e<k;)r.has(R[e])&&(s[e]=a[e])}else{for(e=-1;++e<z;)l=a[e],h=d[e],l?(l.__data__=h,q[e]=l):A[e]={__data__:h};for(;u>e;++e)A[e]={__data__:d[e]};for(;k>e;++e)s[e]=a[e]}A.update=q;A.parentNode=q.parentNode=s.parentNode=a.parentNode;
m.push(A);n.push(q);p.push(s)}var d,e,h=-1,k=this.length;if(!arguments.length){for(a=Array(k=(d=this[0]).length);++h<k;)(e=d[h])&&(a[h]=e.__data__);return a}var m=Td([]),n=D([]),p=D([]);if("function"==typeof a)for(;++h<k;)b(d=this[h],a.call(d,d.parentNode.__data__,h));else for(;++h<k;)b(d=this[h],a);return n.enter=function(){return m},n.exit=function(){return p},n};L.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};L.filter=function(a){var f,b,d,e=[];
"function"!=typeof a&&(a=Pd(a));for(var g=0,h=this.length;h>g;g++){e.push(f=[]);f.parentNode=(b=this[g]).parentNode;for(var k=0,m=b.length;m>k;k++)(d=b[k])&&a.call(d,d.__data__,k,g)&&f.push(d)}return D(e)};L.order=function(){for(var a=-1,f=this.length;++a<f;)for(var b,d=this[a],e=d.length-1,g=d[e];0<=--e;)(b=d[e])&&(g&&g!==b.nextSibling&&g.parentNode.insertBefore(b,g),g=b);return this};L.sort=function(a){a=rg.apply(this,arguments);for(var f=-1,b=this.length;++f<b;)this[f].sort(a);return this.order()};
L.each=function(a){return va(this,function(f,b,d){a.call(f,f.__data__,b,d)})};L.call=function(a){var f=Ea(arguments);return a.apply(f[0]=this,f),this};L.empty=function(){return!this.node()};L.node=function(){for(var a=0,f=this.length;f>a;a++)for(var b=this[a],d=0,e=b.length;e>d;d++){var g=b[d];if(g)return g}return null};L.size=function(){var a=0;return va(this,function(){++a}),a};var wa=[];s.selection.enter=Td;s.selection.enter.prototype=wa;wa.append=L.append;wa.empty=L.empty;wa.node=L.node;wa.call=
L.call;wa.size=L.size;wa.select=function(a){for(var f,b,d,e,g,h=[],k=-1,m=this.length;++k<m;){d=(e=this[k]).update;h.push(f=[]);f.parentNode=e.parentNode;for(var n=-1,p=e.length;++n<p;)(g=e[n])?(f.push(d[n]=b=a.call(e.parentNode,g.__data__,n,k)),b.__data__=g.__data__):f.push(null)}return D(h)};wa.insert=function(a,f){return 2>arguments.length&&(f=sg(this)),L.insert.call(this,a,f)};L.transition=function(){for(var a,f,b=Ya||++$f,d=[],e=lc||{time:Date.now(),ease:mh,delay:0,duration:250},g=-1,h=this.length;++g<
h;){d.push(a=[]);for(var k=this[g],m=-1,n=k.length;++m<n;)(f=k[m])&&ic(f,m,b,e),a.push(f)}return Ab(d,b)};L.interrupt=function(){return this.each(Db)};s.select=function(a){a=["string"==typeof a?Ac(a,qa):a];return a.parentNode=xa,D([a])};s.selectAll=function(a){a=Ea("string"==typeof a?Bc(a,qa):a);return a.parentNode=xa,D([a])};var Zf=s.select(xa);L.on=function(a,f,b){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(f=!1);for(b in a)this.each(Ud(b,a[b],f));return this}if(2>d)return(d=this.node()["__on"+
a])&&d._;b=!1}return this.each(Ud(a,f,b))};var Cc=s.map({mouseenter:"mouseover",mouseleave:"mouseout"});Cc.forEach(function(a){"on"+a in qa&&Cc.remove(a)});var nb="onselectstart"in qa?null:x(xa.style,"userSelect"),ug=0;s.mouse=function(a){return Dc(a,O())};var Ec=/WebKit/.test(Z.navigator.userAgent)?-1:0;s.touch=function(a,f,b){if(3>arguments.length&&(b=f,f=O().changedTouches),f)for(var d,e=0,g=f.length;g>e;++e)if((d=f[e]).identifier===b)return Dc(a,d)};s.behavior.drag=function(){function a(){this.on("mousedown.drag",
e).on("touchstart.drag",g)}function f(a,f,e,g,h){return function(){var k,m=s.event.target,u=this.parentNode,n=b.of(this,arguments),p=0,q=a(),A=".drag"+(null==q?"":"-"+q),r=s.select(e()).on(g+A,function(){var a,b,d=f(u,q);d&&(a=d[0]-w[0],b=d[1]-w[1],p=p|a|b,w=d,n({type:"drag",x:d[0]+k[0],y:d[1]+k[1],dx:a,dy:b}))}).on(h+A,function(){f(u,q)&&(r.on(g+A,null).on(h+A,null),t(p&&s.event.target===m),n({type:"dragend"}))}),t=Eb(),w=f(u,q);d?(k=d.apply(this,arguments),k=[k.x-w[0],k.y-w[1]]):k=[0,0];n({type:"dragstart"})}}
var b=Ma(a,"drag","dragstart","dragend"),d=null,e=f(v,s.mouse,xg,"mousemove","mouseup"),g=f(vg,s.touch,wg,"touchmove","touchend");return a.origin=function(f){return arguments.length?(d=f,a):d},s.rebind(a,b,"on")};s.touches=function(a,f){return 2>arguments.length&&(f=O().touches),f?Ea(f).map(function(f){var b=Dc(a,f);return b.identifier=f.identifier,b}):[]};var G=Math.PI,ga=2*G,X=G/2,C=1E-6,cd=C*C,F=G/180,N=180/G,mc=Math.SQRT2;s.interpolateZoom=function(a,f){function b(a){var f=a*t;if(r){a=Xd(s);var l=
g/(2*p),h,n=mc*f+s;h=((n=Math.exp(2*n))-1)/(n+1);h*=a;var q=s,n=((q=Math.exp(q))-1/q)/2,l=l*(h-n);return[d+l*k,e+l*m,g*a/Xd(mc*f+s)]}return[d+a*k,e+a*m,g*Math.exp(mc*f)]}var d=a[0],e=a[1],g=a[2],h=f[2],k=f[0]-d,m=f[1]-e,n=k*k+m*m,p=Math.sqrt(n),q=(h*h-g*g+4*n)/(4*g*p),n=(h*h-g*g-4*n)/(4*h*p),s=Math.log(Math.sqrt(q*q+1)-q),r=Math.log(Math.sqrt(n*n+1)-n)-s,t=(r||Math.log(h/g))/mc;return b.duration=1E3*t,b};s.behavior.zoom=function(){function a(a){a.on(D,m).on(ji+".zoom",p).on("dblclick.zoom",q).on(O,
n)}function f(a){return[(a[0]-y.x)/y.k,(a[1]-y.y)/y.k]}function b(a){y.k=Math.max(ea[0],Math.min(ea[1],a))}function d(a,f){f=[f[0]*y.k+y.x,f[1]*y.k+y.y];y.x+=a[0]-f[0];y.y+=a[1]-f[1]}function e(){H&&H.domain(ba.range().map(function(a){return(a-y.x)/y.k}).map(ba.invert));U&&U.domain(J.range().map(function(a){return(a-y.y)/y.k}).map(J.invert))}function g(a){a({type:"zoomstart"})}function h(a){e();a({type:"zoom",scale:y.k,translate:[y.x,y.y]})}function k(a){a({type:"zoomend"})}function m(){var a=this,
b=s.event.target,e=B.of(a,arguments),l=0,n=s.select(Z).on(ke,function(){l=1;d(s.mouse(a),p);h(e)}).on(C,function(){n.on(ke,null).on(C,null);q(l&&s.event.target===b);k(e)}),p=f(s.mouse(a)),q=Eb();Db.call(a);g(e)}function n(){function a(){var b=s.touches(r);return A=y.k,b.forEach(function(a){a.identifier in w&&(w[a.identifier]=f(a))}),b}function e(){var f=s.event.target;s.select(f).on(v,p).on(la,q);Fa.push(f);for(var f=s.event.changedTouches,g=0,k=f.length;k>g;++g)w[f[g].identifier]=null;k=a();g=Date.now();
1===k.length?(500>g-x&&(f=k[0],k=w[f.identifier],b(2*y.k),d(f,k),E(),h(t)),x=g):1<k.length&&(f=k[0],k=k[1],g=f[0]-k[0],f=f[1]-k[1],S=g*g+f*f)}function p(){for(var a,f,e,g,k=s.touches(r),m=0,u=k.length;u>m;++m,g=null)if(e=k[m],g=w[e.identifier]){if(f)break;a=e;f=g}if(g){var n=(n=e[0]-a[0])*n+(n=e[1]-a[1])*n,k=S&&Math.sqrt(n/S);a=[(a[0]+e[0])/2,(a[1]+e[1])/2];f=[(f[0]+g[0])/2,(f[1]+g[1])/2];b(k*A)}x=null;d(a,f);h(t)}function q(){if(s.event.touches.length){for(var f=s.event.changedTouches,b=0,d=f.length;d>
b;++b)delete w[f[b].identifier];for(var e in w)return void a()}s.selectAll(Fa).on(J,null);H.on(D,m).on(O,n);Pa();k(t)}var A,r=this,t=B.of(r,arguments),w={},S=0,J=".zoom-"+s.event.changedTouches[0].identifier,v="touchmove"+J,la="touchend"+J,Fa=[],H=s.select(r),Pa=Eb();Db.call(r);e();g(t);H.on(D,null).on(O,e)}function p(){var a=B.of(this,arguments);v?clearTimeout(v):(r=f(t=w||s.mouse(this)),Db.call(this),g(a));v=setTimeout(function(){v=null;k(a)},50);E();b(Math.pow(2,.002*nc())*y.k);d(t,r);h(a)}function q(){var a=
B.of(this,arguments),e=s.mouse(this),m=f(e),n=Math.log(y.k)/Math.LN2;g(a);b(Math.pow(2,s.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1));d(e,m);h(a);k(a)}var r,t,w,v,x,ba,H,J,U,y={x:0,y:0,k:1},Mb=[960,500],ea=ag,D="mousedown.zoom",ke="mousemove.zoom",C="mouseup.zoom",O="touchstart.zoom",B=Ma(a,"zoomstart","zoom","zoomend");return a.event=function(a){a.each(function(){var a=B.of(this,arguments),f=y;Ya?s.select(this).transition().each("start.zoom",function(){y=this.__chart__||{x:0,y:0,k:1};g(a)}).tween("zoom:zoom",
function(){var b=Mb[0],d=b/2,e=Mb[1]/2,g=s.interpolateZoom([(d-y.x)/y.k,(e-y.y)/y.k,b/y.k],[(d-f.x)/f.k,(e-f.y)/f.k,b/f.k]);return function(f){f=g(f);var l=b/f[2];this.__chart__=y={x:d-f[0]*l,y:e-f[1]*l,k:l};h(a)}}).each("end.zoom",function(){k(a)}):(this.__chart__=y,g(a),h(a),k(a))})},a.translate=function(f){return arguments.length?(y={x:+f[0],y:+f[1],k:y.k},e(),a):[y.x,y.y]},a.scale=function(f){return arguments.length?(y={x:y.x,y:y.y,k:+f},e(),a):y.k},a.scaleExtent=function(f){return arguments.length?
(ea=null==f?ag:[+f[0],+f[1]],a):ea},a.center=function(f){return arguments.length?(w=f&&[+f[0],+f[1]],a):w},a.size=function(f){return arguments.length?(Mb=f&&[+f[0],+f[1]],a):Mb},a.x=function(f){return arguments.length?(H=f,ba=f.copy(),y={x:0,y:0,k:1},a):H},a.y=function(f){return arguments.length?(U=f,J=f.copy(),y={x:0,y:0,k:1},a):U},s.rebind(a,B,"on")};var nc,ag=[0,1/0],ji="onwheel"in qa?(nc=function(){return-s.event.deltaY*(s.event.deltaMode?120:1)},"wheel"):"onmousewheel"in qa?(nc=function(){return s.event.wheelDelta},
"mousewheel"):(nc=function(){return-s.event.detail},"MozMousePixelScroll");s.color=Oa;Oa.prototype.toString=function(){return this.rgb()+""};s.hsl=ra;var Bd=ra.prototype=new Oa;Bd.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),new ra(this.h,this.s,this.l/a)};Bd.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ra(this.h,this.s,a*this.l)};Bd.rgb=function(){return Gc(this.h,this.s,this.l)};s.hcl=ma;var Cd=ma.prototype=new Oa;Cd.brighter=function(a){return new ma(this.h,
this.c,Math.min(100,this.l+oc*(arguments.length?a:1)))};Cd.darker=function(a){return new ma(this.h,this.c,Math.max(0,this.l-oc*(arguments.length?a:1)))};Cd.rgb=function(){return Hc(this.h,this.c,this.l).rgb()};s.lab=na;var oc=18,de=.95047,ee=1,fe=1.08883,Dd=na.prototype=new Oa;Dd.brighter=function(a){return new na(Math.min(100,this.l+oc*(arguments.length?a:1)),this.a,this.b)};Dd.darker=function(a){return new na(Math.max(0,this.l-oc*(arguments.length?a:1)),this.a,this.b)};Dd.rgb=function(){return ce(this.l,
this.a,this.b)};s.rgb=aa;var pc=aa.prototype=new Oa;pc.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var f=this.r,b=this.g,d=this.b;return f||b||d?(f&&30>f&&(f=30),b&&30>b&&(b=30),d&&30>d&&(d=30),new aa(Math.min(255,f/a),Math.min(255,b/a),Math.min(255,d/a))):new aa(30,30,30)};pc.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new aa(a*this.r,a*this.g,a*this.b)};pc.hsl=function(){return $d(this.r,this.g,this.b)};pc.toString=function(){return"#"+$a(this.r)+$a(this.g)+$a(this.b)};
var Gb=s.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,
tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Gb.forEach(function(a,f){Gb.set(a,new aa(f>>16,255&f>>8,255&f))});s.functor=K;s.xhr=Nc(W);s.dsv=function(a,f){function b(a,g,l){3>arguments.length&&(l=g,g=null);var h=Hb(a,f,null==g?d:e(g),l);return h.row=function(a){return arguments.length?h.response(null==(g=a)?d:e(a)):g},h}function d(a){return b.parse(a.responseText)}function e(a){return function(f){return b.parse(f.responseText,
a)}}function g(f){return f.map(h).join(a)}function h(a){return k.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var k=new RegExp('["'+a+"\n]"),m=a.charCodeAt(0);return b.parse=function(a,f){var d;return b.parseRows(a,function(a,b){if(d)return d(a,b-1);var e=new Function("d","return {"+a.map(function(a,f){return JSON.stringify(a)+": d["+f+"]"}).join(",")+"}");d=f?function(a,b){return f(e(a),b)}:e})},b.parseRows=function(a,f){function b(){if(u>=k)return l;if(e)return e=!1,g;var f=u;if(34===a.charCodeAt(f)){for(var d=
f;d++<k;)if(34===a.charCodeAt(d)){if(34!==a.charCodeAt(d+1))break;++d}u=d+2;var h=a.charCodeAt(d+1);return 13===h?(e=!0,10===a.charCodeAt(d+2)&&++u):10===h&&(e=!0),a.slice(f+1,d).replace(/""/g,'"')}for(;k>u;){h=a.charCodeAt(u++);d=1;if(10===h)e=!0;else if(13===h)e=!0,10===a.charCodeAt(u)&&(++u,++d);else if(h!==m)continue;return a.slice(f,u-d)}return a.slice(f)}for(var d,e,g={},l={},h=[],k=a.length,u=0,n=0;(d=b())!==l;){for(var p=[];d!==g&&d!==l;)p.push(d),d=b();f&&!(p=f(p,n++))||h.push(p)}return h},
b.format=function(f){if(Array.isArray(f[0]))return b.formatRows(f);var d=new r,e=[];return f.forEach(function(a){for(var f in a)d.has(f)||e.push(d.add(f))}),[e.map(h).join(a)].concat(f.map(function(f){return e.map(function(a){return h(f[a])}).join(a)})).join("\n")},b.formatRows=function(a){return a.map(g).join("\n")},b};s.csv=s.dsv(",","text/csv");s.tsv=s.dsv("\t","text/tab-separated-values");var Kb,Lb,Jb,Ib,ya,ie=Z[x(Z,"requestAnimationFrame")]||function(a){setTimeout(a,17)};s.timer=function(a,f,
b){var d=arguments.length;2>d&&(f=0);3>d&&(b=Date.now());d={c:a,t:b+f,f:!1,n:null};Lb?Lb.n=d:Kb=d;Lb=d;Jb||(Ib=clearTimeout(Ib),Jb=1,ie(Oc))};s.timer.flush=function(){ge();he()};s.round=function(a,f){return f?Math.round(a*(f=Math.pow(10,f)))/f:Math.round(a)};var ki="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,f){var b=Math.pow(10,3*I(8-f));return{scale:8<f?function(a){return a/b}:function(a){return a*b},symbol:a}});s.formatPrefix=function(a,f){var b=0;return a&&(0>a&&(a*=-1),
f&&(a=s.round(a,Pc(a,f))),b=1+Math.floor(1E-12+Math.log(a)/Math.LN10),b=Math.max(-24,Math.min(24,3*Math.floor((b-1)/3)))),ki[8+b/3]};var je=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ag=s.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,f){return a.toPrecision(f)},e:function(a,f){return a.toExponential(f)},
f:function(a,f){return a.toFixed(f)},r:function(a,f){return(a=s.round(a,Pc(a,f))).toFixed(Math.max(0,Math.min(20,Pc(a*(1+1E-15),f))))}}),B=s.time={},Y=Date;za.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},
getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Da.setUTCDate.apply(this._,arguments)},setDay:function(){Da.setUTCDay.apply(this._,arguments)},setFullYear:function(){Da.setUTCFullYear.apply(this._,arguments)},setHours:function(){Da.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Da.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Da.setUTCMinutes.apply(this._,
arguments)},setMonth:function(){Da.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Da.setUTCSeconds.apply(this._,arguments)},setTime:function(){Da.setTime.apply(this._,arguments)}};var Da=Date.prototype;B.year=Qa(function(a){return a=B.day(a),a.setMonth(0,1),a},function(a,f){a.setFullYear(a.getFullYear()+f)},function(a){return a.getFullYear()});B.years=B.year.range;B.years.utc=B.year.utc.range;B.day=Qa(function(a){var f=new Y(2E3,0);return f.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),
f},function(a,f){a.setDate(a.getDate()+f)},function(a){return a.getDate()-1});B.days=B.day.range;B.days.utc=B.day.utc.range;B.dayOfYear=function(a){var f=B.year(a);return Math.floor((a-f-6E4*(a.getTimezoneOffset()-f.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(a,f){f=7-f;var b=B[a]=Qa(function(a){return(a=B.day(a)).setDate(a.getDate()-(a.getDay()+f)%7),a},function(a,f){a.setDate(a.getDate()+7*Math.floor(f))},function(a){var b=
B.year(a).getDay();return Math.floor((B.dayOfYear(a)+(b+f)%7)/7)-(b!==f)});B[a+"s"]=b.range;B[a+"s"].utc=b.utc.range;B[a+"OfYear"]=function(a){var b=B.year(a).getDay();return Math.floor((B.dayOfYear(a)+(b+f)%7)/7)}});B.week=B.sunday;B.weeks=B.sunday.range;B.weeks.utc=B.sunday.utc.range;B.weekOfYear=B.sundayOfYear;var le={"-":"",_:" ",0:"0"},P=/^\s*\d+/,oe=/^%/;s.locale=function(a){return{numberFormat:zg(a),timeFormat:Cg(a)}};var bg=s.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],
dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});s.format=bg.numberFormat;s.geo={};Qc.prototype={s:0,t:0,add:function(a){pe(a,this.t,qc);pe(qc.s,this.s,this);this.s?
this.t+=qc.t:this.s=qc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var qc=new Qc;s.geo.stream=function(a,f){a&&cg.hasOwnProperty(a.type)?cg[a.type](a,f):Qb(a,f)};var cg={Feature:function(a,f){Qb(a.geometry,f)},FeatureCollection:function(a,f){for(var b=a.features,d=-1,e=b.length;++d<e;)Qb(b[d].geometry,f)}},qe={Sphere:function(a,f){f.sphere()},Point:function(a,f){a=a.coordinates;f.point(a[0],a[1],a[2])},MultiPoint:function(a,f){for(var b=a.coordinates,d=-1,e=b.length;++d<
e;)a=b[d],f.point(a[0],a[1],a[2])},LineString:function(a,f){Rc(a.coordinates,f,0)},MultiLineString:function(a,f){for(var b=a.coordinates,d=-1,e=b.length;++d<e;)Rc(b[d],f,0)},Polygon:function(a,f){re(a.coordinates,f)},MultiPolygon:function(a,f){for(var b=a.coordinates,d=-1,e=b.length;++d<e;)re(b[d],f)},GeometryCollection:function(a,f){for(var b=a.geometries,d=-1,e=b.length;++d<e;)Qb(b[d],f)}};s.geo.area=function(a){return lb=0,s.geo.stream(a,fa),lb};var lb,Ra=new Qc,fa={sphere:function(){lb+=4*G},
point:v,lineStart:v,lineEnd:v,polygonStart:function(){Ra.reset();fa.lineStart=Rg},polygonEnd:function(){var a=2*Ra;lb+=0>a?4*G+a:a;fa.lineStart=fa.lineEnd=fa.point=v}};s.geo.bounds=function(){function a(a,f){J.push(U=[p=a,r=a]);q>f&&(q=f);f>t&&(t=f)}function f(f,b){var d=Sa([f*F,b*F]);if(x){var e=cb(x,d),e=cb([e[1],-e[0],0],e);Tb(e);var e=Ub(e),g=f-w,l=0<g?1:-1,h=e[0]*N*l,g=180<I(g);g^(h>l*w&&l*f>h)?(e=e[1]*N,e>t&&(t=e)):(h=(h+360)%360-180,g^(h>l*w&&l*f>h))?(e=-e[1]*N,q>e&&(q=e)):(q>b&&(q=b),b>t&&
(t=b));g?w>f?k(p,f)>k(p,r)&&(r=f):k(f,r)>k(p,r)&&(p=f):r>=p?(p>f&&(p=f),f>r&&(r=f)):f>w?k(p,f)>k(p,r)&&(r=f):k(f,r)>k(p,r)&&(p=f)}else a(f,b);x=d;w=f}function b(){E.point=f}function d(){U[0]=p;U[1]=r;E.point=a;x=null}function e(a,b){if(x){var d=a-w;H+=180<I(d)?d+(0<d?360:-360):d}else v=a,y=b;fa.point(a,b);f(a,b)}function g(){fa.lineStart()}function h(){e(v,y);fa.lineEnd();I(H)>C&&(p=-(r=180));U[0]=p;U[1]=r;x=null}function k(a,f){return 0>(f-=a)?f+360:f}function m(a,f){return a[0]-f[0]}function n(a,
f){return f[0]<=f[1]?f[0]<=a&&a<=f[1]:a<f[0]||f[1]<a}var p,q,r,t,w,v,y,x,H,J,U,E={point:a,lineStart:b,lineEnd:d,polygonStart:function(){E.point=e;E.lineStart=g;E.lineEnd=h;H=0;fa.polygonStart()},polygonEnd:function(){fa.polygonEnd();E.point=a;E.lineStart=b;E.lineEnd=d;0>Ra?(p=-(r=180),q=-(t=90)):H>C?t=90:-C>H&&(q=-90);U[0]=p;U[1]=r}};return function(a){t=r=-(p=q=1/0);J=[];s.geo.stream(a,E);if(a=J.length){J.sort(m);for(var f,b=1,d=J[0],e=[d];a>b;++b)f=J[b],n(f[0],d)||n(f[1],d)?(k(d[0],f[1])>k(d[0],
d[1])&&(d[1]=f[1]),k(f[0],d[1])>k(d[0],d[1])&&(d[0]=f[0])):e.push(d=f);var g,l=-1/0;a=e.length-1;b=0;for(d=e[a];a>=b;d=f,++b)f=e[b],(g=k(d[1],f[0]))>l&&(l=g,p=f[0],r=d[1])}return J=U=null,1/0===p||1/0===q?[[0/0,0/0],[0/0,0/0]]:[[p,q],[r,t]]}}();s.geo.centroid=function(a){pb=db=Aa=Ba=sa=ia=ja=da=Ga=Ha=ta=0;s.geo.stream(a,oa);a=Ga;var f=Ha,b=ta,d=a*a+f*f+b*b;return cd>d&&(a=ia,f=ja,b=da,C>db&&(a=Aa,f=Ba,b=sa),d=a*a+f*f+b*b,cd>d)?[0/0,0/0]:[Math.atan2(f,a)*N,Za(b/Math.sqrt(d))*N]};var pb,db,Aa,Ba,sa,
ia,ja,da,Ga,Ha,ta,oa={sphere:v,point:Tc,lineStart:se,lineEnd:te,polygonStart:function(){oa.lineStart=Sg},polygonEnd:function(){oa.lineStart=se}},Je=we(eb,function(a){var f,b=0/0,d=0/0,e=0/0;return{lineStart:function(){a.lineStart();f=1},point:function(g,h){var k=0<g?G:-G,m=I(g-b);if(I(m-G)<C)a.point(b,d=0<(d+h)/2?X:-X),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(k,d),a.point(g,d),f=0;else if(e!==k&&m>=G){I(b-e)<C&&(b-=e*C);I(g-k)<C&&(g-=k*C);var m=b,n=d,p=g,q,r,s=Math.sin(m-p);d=I(s)>C?Math.atan((Math.sin(n)*
(r=Math.cos(h))*Math.sin(p)-Math.sin(h)*(q=Math.cos(n))*Math.sin(m))/(q*r*s)):(n+h)/2;a.point(e,d);a.lineEnd();a.lineStart();a.point(k,d);f=0}a.point(b=g,d=h);e=k},lineEnd:function(){a.lineEnd();b=d=0/0},clean:function(){return 2-f}}},function(a,f,b,d){null==a?(b*=X,d.point(-G,b),d.point(0,b),d.point(G,b),d.point(G,0),d.point(G,-b),d.point(0,-b),d.point(-G,-b),d.point(-G,0),d.point(-G,b)):I(a[0]-f[0])>C?(a=a[0]<f[0]?G:-G,b=b*a/2,d.point(-a,b),d.point(0,b),d.point(a,b)):d.point(f[0],f[1])},[-G,-G/
2]),Xb=1E9;s.geo.clipExtent=function(){var a,f,b,d,e,g,h={stream:function(a){return e&&(e.valid=!1),e=g(a),e.valid=!0,e},extent:function(k){return arguments.length?(g=ze(a=+k[0][0],f=+k[0][1],b=+k[1][0],d=+k[1][1]),e&&(e.valid=!1,e=null),h):[[a,f],[b,d]]}};return h.extent([[0,0],[960,500]])};(s.geo.conicEqualArea=function(){return Vc(Be)}).raw=Be;s.geo.albers=function(){return s.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};s.geo.albersUsa=function(){function a(a){var g=
a[0];a=a[1];return f=null,b(g,a),f||(d(g,a),f)||e(g,a),f}var f,b,d,e,g=s.geo.albers(),h=s.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),k=s.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),m={point:function(a,b){f=[a,b]}};return a.invert=function(a){var f=g.scale(),b=g.translate(),d=(a[0]-b[0])/f,f=(a[1]-b[1])/f;return(.12<=f&&.234>f&&-.425<=d&&-.214>d?h:.166<=f&&.234>f&&-.214<=d&&-.115>d?k:g).invert(a)},a.stream=function(a){var f=g.stream(a),b=
h.stream(a),d=k.stream(a);return{point:function(a,e){f.point(a,e);b.point(a,e);d.point(a,e)},sphere:function(){f.sphere();b.sphere();d.sphere()},lineStart:function(){f.lineStart();b.lineStart();d.lineStart()},lineEnd:function(){f.lineEnd();b.lineEnd();d.lineEnd()},polygonStart:function(){f.polygonStart();b.polygonStart();d.polygonStart()},polygonEnd:function(){f.polygonEnd();b.polygonEnd();d.polygonEnd()}}},a.precision=function(f){return arguments.length?(g.precision(f),h.precision(f),k.precision(f),
a):g.precision()},a.scale=function(f){return arguments.length?(g.scale(f),h.scale(.35*f),k.scale(f),a.translate(g.translate())):g.scale()},a.translate=function(f){if(!arguments.length)return g.translate();var n=g.scale(),p=+f[0],q=+f[1];return b=g.translate(f).clipExtent([[p-.455*n,q-.238*n],[p+.455*n,q+.238*n]]).stream(m).point,d=h.translate([p-.307*n,q+.201*n]).clipExtent([[p-.425*n+C,q+.12*n+C],[p-.214*n-C,q+.234*n-C]]).stream(m).point,e=k.translate([p-.205*n,q+.212*n]).clipExtent([[p-.214*n+C,
q+.166*n+C],[p-.115*n-C,q+.234*n-C]]).stream(m).point,a},a.scale(1070)};var rc,Yb,sc,tc,uc,vc,Ia={point:v,lineStart:v,lineEnd:v,polygonStart:function(){Yb=0;Ia.lineStart=Wg},polygonEnd:function(){Ia.lineStart=Ia.lineEnd=Ia.point=v;rc+=I(Yb/2)}},li={point:function(a,f){sc>a&&(sc=a);a>uc&&(uc=a);tc>f&&(tc=f);f>vc&&(vc=f)},lineStart:v,lineEnd:v,polygonStart:v,polygonEnd:v},pa={point:Ta,lineStart:De,lineEnd:Ee,polygonStart:function(){pa.lineStart=Yg},polygonEnd:function(){pa.point=Ta;pa.lineStart=De;
pa.lineEnd=Ee}};s.geo.path=function(){function a(a){return a&&("function"==typeof h&&e.pointRadius(+h.apply(this,arguments)),g&&g.valid||(g=d(e)),s.geo.stream(a,g)),e.result()}var f,b,d,e,g,h=4.5;return a.area=function(a){return rc=0,s.geo.stream(a,d(Ia)),rc},a.centroid=function(a){return Aa=Ba=sa=ia=ja=da=Ga=Ha=ta=0,s.geo.stream(a,d(pa)),ta?[Ga/ta,Ha/ta]:da?[ia/da,ja/da]:sa?[Aa/sa,Ba/sa]:[0/0,0/0]},a.bounds=function(a){return uc=vc=-(sc=tc=1/0),s.geo.stream(a,d(li)),[[sc,tc],[uc,vc]]},a.projection=
function(b){return arguments.length?(d=(f=b)?b.stream||$g(b):W,g=null,a):f},a.context=function(f){return arguments.length?(e=null==(b=f)?new Xg:new Zg(f),"function"!=typeof h&&e.pointRadius(h),g=null,a):b},a.pointRadius=function(f){return arguments.length?(h="function"==typeof f?f:(e.pointRadius(+f),+f),a):h},a.projection(s.geo.albersUsa()).context(null)};s.geo.transform=function(a){return{stream:function(f){f=new Ie(f);for(var b in a)f[b]=a[b];return f}}};Ie.prototype={point:function(a,f){this.stream.point(a,
f)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};s.geo.projection=Ja;s.geo.projectionMutator=Wc;(s.geo.equirectangular=function(){return Ja(qb)}).raw=qb.invert=qb;s.geo.rotation=function(a){function f(f){return f=a(f[0]*F,f[1]*F),f[0]*=N,f[1]*=N,f}return a=Xc(a[0]%360*F,a[1]*F,2<a.length?a[2]*F:0),f.invert=function(f){return f=
a.invert(f[0]*F,f[1]*F),f[0]*=N,f[1]*=N,f},f};Ke.invert=qb;s.geo.circle=function(){function a(){var a="function"==typeof d?d.apply(this,arguments):d,f=Xc(-a[0]*F,-a[1]*F,0).invert,e=[];return b(null,null,1,{point:function(a,b){e.push(a=f(a,b));a[0]*=N;a[1]*=N}}),{type:"Polygon",coordinates:[e]}}var f,b,d=[0,0],e=6;return a.origin=function(f){return arguments.length?(d=f,a):d},a.angle=function(d){return arguments.length?(b=Uc((f=+d)*F,e*F),a):f},a.precision=function(d){return arguments.length?(b=Uc(f*
F,(e=+d)*F),a):e},a.angle(90)};s.geo.distance=function(a,f){var b,d=(f[0]-a[0])*F,e=a[1]*F,g=f[1]*F,h=Math.sin(d),d=Math.cos(d),k=Math.sin(e),e=Math.cos(e),m=Math.sin(g),g=Math.cos(g);return Math.atan2(Math.sqrt((b=g*h)*b+(b=e*m-k*g*d)*b),k*m+e*g*d)};s.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:f()}}function f(){return s.range(Math.ceil(g/y)*y,e,y).map(r).concat(s.range(Math.ceil(n/x)*x,m,x).map(t)).concat(s.range(Math.ceil(d/w)*w,b,w).filter(function(a){return I(a%
y)>C}).map(p)).concat(s.range(Math.ceil(k/v)*v,h,v).filter(function(a){return I(a%x)>C}).map(q))}var b,d,e,g,h,k,m,n,p,q,r,t,w=10,v=w,y=90,x=360,H=2.5;return a.lines=function(){return f().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[r(g).concat(t(m).slice(1),r(e).reverse().slice(1),t(n).reverse().slice(1))]}},a.extent=function(f){return arguments.length?a.majorExtent(f).minorExtent(f):a.minorExtent()},a.majorExtent=function(f){return arguments.length?
(g=+f[0][0],e=+f[1][0],n=+f[0][1],m=+f[1][1],g>e&&(f=g,g=e,e=f),n>m&&(f=n,n=m,m=f),a.precision(H)):[[g,n],[e,m]]},a.minorExtent=function(f){return arguments.length?(d=+f[0][0],b=+f[1][0],k=+f[0][1],h=+f[1][1],d>b&&(f=d,d=b,b=f),k>h&&(f=k,k=h,h=f),a.precision(H)):[[d,k],[b,h]]},a.step=function(f){return arguments.length?a.majorStep(f).minorStep(f):a.minorStep()},a.majorStep=function(f){return arguments.length?(y=+f[0],x=+f[1],a):[y,x]},a.minorStep=function(f){return arguments.length?(w=+f[0],v=+f[1],
a):[w,v]},a.precision=function(f){return arguments.length?(H=+f,p=Pe(k,h,90),q=Qe(d,b,H),r=Pe(n,m,90),t=Qe(g,e,H),a):H},a.majorExtent([[-180,-90+C],[180,90-C]]).minorExtent([[-180,-80-C],[180,80+C]])};s.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[f||d.apply(this,arguments),b||e.apply(this,arguments)]}}var f,b,d=Yc,e=Zc;return a.distance=function(){return s.geo.distance(f||d.apply(this,arguments),b||e.apply(this,arguments))},a.source=function(b){return arguments.length?
(d=b,f="function"==typeof b?null:b,a):d},a.target=function(f){return arguments.length?(e=f,b="function"==typeof f?null:f,a):e},a.precision=function(){return arguments.length?a:0},a};s.geo.interpolate=function(a,f){return ah(a[0]*F,a[1]*F,f[0]*F,f[1]*F)};s.geo.length=function(a){return wc=0,s.geo.stream(a,mb),wc};var wc,mb={sphere:v,point:v,lineStart:function(){function a(a,e){var g=Math.sin(e*=F),h=Math.cos(e),k=I((a*=F)-f),m=Math.cos(k);wc+=Math.atan2(Math.sqrt((k=h*Math.sin(k))*k+(k=d*g-b*h*m)*
k),b*g+d*h*m);f=a;b=g;d=h}var f,b,d;mb.point=function(e,g){f=e*F;b=Math.sin(g*=F);d=Math.cos(g);mb.point=a};mb.lineEnd=function(){mb.point=mb.lineEnd=v}},lineEnd:v,polygonStart:v,polygonEnd:v},dg=rb(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(s.geo.azimuthalEqualArea=function(){return Ja(dg)}).raw=dg;var eg=rb(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},W);(s.geo.azimuthalEquidistant=function(){return Ja(eg)}).raw=eg;(s.geo.conicConformal=function(){return Vc(Re)}).raw=
Re;(s.geo.conicEquidistant=function(){return Vc(Se)}).raw=Se;var fg=rb(function(a){return 1/a},Math.atan);(s.geo.gnomonic=function(){return Ja(fg)}).raw=fg;Zb.invert=function(a,f){return[a,2*Math.atan(Math.exp(f))-X]};(s.geo.mercator=function(){return Te(Zb)}).raw=Zb;var gg=rb(function(){return 1},Math.asin);(s.geo.orthographic=function(){return Ja(gg)}).raw=gg;var hg=rb(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(s.geo.stereographic=function(){return Ja(hg)}).raw=hg;$c.invert=
function(a,f){return[-f,2*Math.atan(Math.exp(a))-X]};(s.geo.transverseMercator=function(){var a=Te($c),f=a.center,b=a.rotate;return a.center=function(a){return a?f([-a[1],a[0]]):(a=f(),[a[1],-a[0]])},a.rotate=function(a){return a?b([a[0],a[1],2<a.length?a[2]+90:90]):(a=b(),[a[0],a[1],a[2]-90])},b([0,0,90])}).raw=$c;s.geom={};s.geom.hull=function(a){function f(a){if(3>a.length)return[];var f,e=K(b),g=K(d),h=a.length,k=[],m=[];for(f=0;h>f;f++)k.push([+e.call(this,a[f],f),+g.call(this,a[f],f),f]);k.sort(bh);
for(f=0;h>f;f++)m.push([k[f][0],-k[f][1]]);var e=Ue(k),m=Ue(m),g=m[0]===e[0],h=m[m.length-1]===e[e.length-1],n=[];for(f=e.length-1;0<=f;--f)n.push(a[k[e[f]][2]]);for(f=+g;f<m.length-h;++f)n.push(a[k[m[f]][2]]);return n}var b=fb,d=sb;return arguments.length?f(a):(f.x=function(a){return arguments.length?(b=a,f):b},f.y=function(a){return arguments.length?(d=a,f):d},f)};s.geom.polygon=function(a){return Cb(a,xc),a};var xc=s.geom.polygon.prototype=[];xc.area=function(){for(var a,f=-1,b=this.length,d=this[b-
1],e=0;++f<b;)a=d,d=this[f],e+=a[1]*d[0]-a[0]*d[1];return.5*e};xc.centroid=function(a){var f,b,d=-1,e=this.length,g=0,h=0,k=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++d<e;)f=k,k=this[d],b=f[0]*k[1]-k[0]*f[1],g+=(f[0]+k[0])*b,h+=(f[1]+k[1])*b;return[g*a,h*a]};xc.clip=function(a){for(var f,b,d,e,g,h,k=We(a),m=-1,n=this.length-We(this),p=this[n-1];++m<n;){f=a.slice();a.length=0;e=this[m];g=f[(d=f.length-k)-1];for(b=-1;++b<d;)h=f[b],ad(h,p,e)?(ad(g,p,e)||a.push(Ve(g,h,p,e)),a.push(h)):ad(g,
p,e)&&a.push(Ve(g,h,p,e)),g=h;k&&a.push(a[0]);p=e}return a};var jb,Ua,hb,dd,tb,Ye=[],bf=[];$e.prototype.prepare=function(){for(var a,f=this.edges,b=f.length;b--;)a=f[b].edge,a.b&&a.a||f.splice(b,1);return f.sort(af),f.length};bc.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};ed.prototype={insert:function(a,f){var b,d,e;if(a){if(f.P=a,f.N=a.N,a.N&&(a.N.P=f),a.N=f,a.R){for(a=a.R;a.L;)a=a.L;a.L=
f}else a.R=f;b=a}else this._?(a=df(this._),f.P=null,f.N=a,a.P=a.L=f,b=a):(f.P=f.N=null,this._=f,b=null);f.L=f.R=null;f.U=b;f.C=!0;for(a=f;b&&b.C;)d=b.U,b===d.L?(e=d.R,e&&e.C?(b.C=e.C=!1,d.C=!0,a=d):(a===b.R&&(vb(this,b),a=b,b=a.U),b.C=!1,d.C=!0,wb(this,d))):(e=d.L,e&&e.C?(b.C=e.C=!1,d.C=!0,a=d):(a===b.L&&(wb(this,b),a=b,b=a.U),b.C=!1,d.C=!0,vb(this,d))),b=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var f,b,d,e=a.U,g=a.L,h=a.R;if(b=g?h?df(h):g:h,e?e.L===a?e.L=
b:e.R=b:this._=b,g&&h?(d=b.C,b.C=a.C,b.L=g,g.U=b,b!==h?(e=b.U,b.U=a.U,a=b.R,e.L=a,b.R=h,h.U=b):(b.U=e,e=b,a=b.R)):(d=a.C,a=b),a&&(a.U=e),!d){if(a&&a.C)return a.C=!1,void 0;do{if(a===this._)break;if(a===e.L){if(f=e.R,f.C&&(f.C=!1,e.C=!0,vb(this,e),f=e.R),f.L&&f.L.C||f.R&&f.R.C){f.R&&f.R.C||(f.L.C=!1,f.C=!0,wb(this,f),f=e.R);f.C=e.C;e.C=f.R.C=!1;vb(this,e);a=this._;break}}else if(f=e.L,f.C&&(f.C=!1,e.C=!0,wb(this,e),f=e.L),f.L&&f.L.C||f.R&&f.R.C){f.L&&f.L.C||(f.R.C=!1,f.C=!0,vb(this,f),f=e.L);f.C=e.C;
e.C=f.L.C=!1;wb(this,e);a=this._;break}f.C=!0;a=e;e=e.U}while(!a.C);a&&(a.C=!1)}}};s.geom.voronoi=function(a){function f(a){var f=Array(a.length),d=k[0][0],e=k[0][1],g=k[1][0],h=k[1][1];return fd(b(a),k).cells.forEach(function(b,l){var k=b.edges,m=b.site;(f[l]=k.length?k.map(function(a){a=a.start();return[a.x,a.y]}):m.x>=d&&m.x<=g&&m.y>=e&&m.y<=h?[[d,h],[g,h],[g,e],[d,e]]:[]).point=a[l]}),f}function b(a){return a.map(function(a,f){return{x:Math.round(g(a,f)/C)*C,y:Math.round(h(a,f)/C)*C,i:f}})}var d=
fb,e=sb,g=d,h=e,k=yc;return a?f(a):(f.links=function(a){return fd(b(a)).edges.filter(function(a){return a.l&&a.r}).map(function(f){return{source:a[f.l.i],target:a[f.r.i]}})},f.triangles=function(a){var f=[];return fd(b(a)).cells.forEach(function(b,d){for(var e,g=b.site,h=b.edges.sort(af),l=-1,k=h.length,m=h[k-1].edge,m=m.l===g?m.r:m.l;++l<k;)e=m,m=h[l].edge,m=m.l===g?m.r:m.l,d<e.i&&d<m.i&&0>(g.x-m.x)*(e.y-g.y)-(g.x-e.x)*(m.y-g.y)&&f.push([a[d],a[e.i],a[m.i]])}),f},f.x=function(a){return arguments.length?
(g=K(d=a),f):d},f.y=function(a){return arguments.length?(h=K(e=a),f):e},f.clipExtent=function(a){return arguments.length?(k=null==a?yc:a,f):k===yc?null:k},f.size=function(a){return arguments.length?f.clipExtent(a&&[[0,0],a]):k===yc?null:k&&k[1]},f)};var yc=[[-1E6,-1E6],[1E6,1E6]];s.geom.delaunay=function(a){return s.geom.voronoi().triangles(a)};s.geom.quadtree=function(a,f,b,d,e){function g(a){function n(a,f,b,d,e,g,h,l){if(!isNaN(b)&&!isNaN(d))if(a.leaf){var k=a.x,m=a.y;if(null!=k){if(!(.01>I(k-
b)+I(m-d))){var u=a.point;a.x=a.y=a.point=null;p(a,u,k,m,e,g,h,l)}p(a,f,b,d,e,g,h,l)}else a.x=b,a.y=d,a.point=f}else p(a,f,b,d,e,g,h,l)}function p(a,f,b,d,e,g,h,l){var k=.5*(e+h),m=.5*(g+l),u=b>=k,q=d>=m,r=(q<<1)+u;a.leaf=!1;a=a.nodes[r]||(a.nodes[r]=ef());u?e=k:h=k;q?g=m:l=m;n(a,f,b,d,e,g,h,l)}var u,q,r,s,t,w,v,y,x,E=K(k),D=K(m);if(null!=f)w=f,v=b,y=d,x=e;else if(y=x=-(w=v=1/0),q=[],r=[],t=a.length,h)for(s=0;t>s;++s)u=a[s],u.x<w&&(w=u.x),u.y<v&&(v=u.y),u.x>y&&(y=u.x),u.y>x&&(x=u.y),q.push(u.x),r.push(u.y);
else for(s=0;t>s;++s){var B=+E(u=a[s],s);u=+D(u,s);w>B&&(w=B);v>u&&(v=u);B>y&&(y=B);u>x&&(x=u);q.push(B);r.push(u)}B=y-w;u=x-v;B>u?x=v+B:y=w+u;var C=ef();if(C.add=function(a){n(C,a,+E(a,++s),+D(a,s),w,v,y,x)},C.visit=function(a){xb(a,C,w,v,y,x)},s=-1,null==f){for(;++s<t;)n(C,a[s],q[s],r[s],w,v,y,x);--s}else a.forEach(C.add);return q=r=a=u=null,C}var h,k=fb,m=sb;return(h=arguments.length)?(k=hh,m=ih,3===h&&(e=b,d=f,b=f=0),g(a)):(g.x=function(a){return arguments.length?(k=a,g):k},g.y=function(a){return arguments.length?
(m=a,g):m},g.extent=function(a){return arguments.length?(null==a?f=b=d=e=null:(f=+a[0][0],b=+a[0][1],d=+a[1][0],e=+a[1][1]),g):null==f?null:[[f,b],[d,e]]},g.size=function(a){return arguments.length?(null==a?f=b=d=e=null:(f=b=0,d=+a[0],e=+a[1]),g):null==f?null:[d-f,e-b]},g)};s.interpolateRgb=gd;s.interpolateObject=ff;s.interpolateNumber=Ca;s.interpolateString=gf;var hd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,id=new RegExp(hd.source,"g");s.interpolate=Va;s.interpolators=[function(a,f){var b=typeof f;
return("string"===b?Gb.has(f)||/^(#|rgb\(|hsl\()/.test(f)?gd:gf:f instanceof Oa?gd:Array.isArray(f)?cc:"object"===b&&isNaN(f)?ff:Ca)(a,f)}];s.interpolateArray=cc;var ig=function(){return W},mi=s.map({linear:ig,poly:function(a){return function(f){return Math.pow(f,a)}},quad:function(){return kh},cubic:function(){return lh},sin:function(){return nh},exp:function(){return oh},circle:function(){return ph},elastic:function(a,f){var b;return 2>arguments.length&&(f=.45),arguments.length?b=f/ga*Math.asin(1/
a):(a=1,b=f/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-b)*ga/f)}},back:function(a){return a||(a=1.70158),function(f){return f*f*((a+1)*f-a)}},bounce:function(){return qh}}),ni=s.map({"in":W,out:hf,"in-out":jf,"out-in":function(a){return jf(hf(a))}});s.ease=function(a){var f=a.indexOf("-"),b=0<=f?a.slice(0,f):a,f=0<=f?a.slice(f+1):"in";return b=mi.get(b)||ig,f=ni.get(f)||W,jh(f(b.apply(null,Wf.call(arguments,1))))};s.interpolateHcl=function(a,f){a=s.hcl(a);f=s.hcl(f);var b=a.h,d=a.c,e=
a.l,g=f.h-b,h=f.c-d,k=f.l-e;return isNaN(h)&&(h=0,d=isNaN(d)?f.c:d),isNaN(g)?(g=0,b=isNaN(b)?f.h:b):180<g?g-=360:-180>g&&(g+=360),function(a){return Hc(b+g*a,d+h*a,e+k*a)+""}};s.interpolateHsl=function(a,f){a=s.hsl(a);f=s.hsl(f);var b=a.h,d=a.s,e=a.l,g=f.h-b,h=f.s-d,k=f.l-e;return isNaN(h)&&(h=0,d=isNaN(d)?f.s:d),isNaN(g)?(g=0,b=isNaN(b)?f.h:b):180<g?g-=360:-180>g&&(g+=360),function(a){return Gc(b+g*a,d+h*a,e+k*a)+""}};s.interpolateLab=function(a,b){a=s.lab(a);b=s.lab(b);var d=a.l,e=a.a,g=a.b,h=b.l-
d,k=b.a-e,m=b.b-g;return function(a){return ce(d+h*a,e+k*a,g+m*a)+""}};s.interpolateRound=kf;s.transform=function(a){var b=qa.createElementNS(s.ns.prefix.svg,"g");return(s.transform=function(a){if(null!=a){b.setAttribute("transform",a);var d=b.transform.baseVal.consolidate()}return new lf(d?d.matrix:oi)})(a)};lf.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var oi={a:1,b:0,c:0,d:1,e:0,f:0};s.interpolateTransform=
nf;s.layout={};s.layout.bundle=function(){return function(a){for(var b=[],d=-1,e=a.length;++d<e;)b.push(th(a[d]));return b}};s.layout.chord=function(){function a(){var a,p,r,t,w,v={},y=[],M=s.range(h),x=[];d=[];e=[];a=0;for(t=-1;++t<h;){p=0;for(w=-1;++w<h;)p+=g[t][w];y.push(p);x.push(s.range(h));a+=p}k&&M.sort(function(a,b){return k(y[a],y[b])});m&&x.forEach(function(a,b){a.sort(function(a,f){return m(g[b][a],g[b][f])})});a=(ga-q*h)/a;p=0;for(t=-1;++t<h;){r=p;for(w=-1;++w<h;){var E=M[t],D=x[E][w],
B=g[E][D],C=p,O=p+=B*a;v[E+"-"+D]={index:E,subindex:D,startAngle:C,endAngle:O,value:B}}e[E]={index:E,startAngle:r,endAngle:p,value:(p-r)/a};p+=q}for(t=-1;++t<h;)for(w=t-1;++w<h;)a=v[t+"-"+w],p=v[w+"-"+t],(a.value||p.value)&&d.push(a.value<p.value?{source:p,target:a}:{source:a,target:p});n&&b()}function b(){d.sort(function(a,b){return n((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var d,e,g,h,k,m,n,p={},q=0;return p.matrix=function(a){return arguments.length?(h=(g=a)&&g.length,
d=e=null,p):g},p.padding=function(a){return arguments.length?(q=a,d=e=null,p):q},p.sortGroups=function(a){return arguments.length?(k=a,d=e=null,p):k},p.sortSubgroups=function(a){return arguments.length?(m=a,d=null,p):m},p.sortChords=function(a){return arguments.length?(n=a,d&&b(),p):n},p.chords=function(){return d||a(),d},p.groups=function(){return e||a(),e},p};s.layout.force=function(){function a(a){return function(b,f,d,e){if(b.point!==a){d=b.cx-a.x;var g=b.cy-a.y;f=e-f;e=d*d+g*g;if(e>f*f/x)return v>
e&&(f=b.charge/e,a.px-=d*f,a.py-=g*f),!0;b.point&&e&&v>e&&(f=b.pointCharge/e,a.px-=d*f,a.py-=g*f)}return!b.charge}}function b(a){a.px=s.event.x;a.py=s.event.y;m.resume()}var d,e,g,h,k,m={},n=s.dispatch("start","tick","end"),p=[1,1],q=.9,r=pi,t=qi,w=-30,v=ri,y=.1,x=.64,E=[],H=[];return m.tick=function(){if(.005>(e*=.99))return n.end({type:"end",alpha:e=0}),!0;var b,f,d,l,m,r,t,v,x=E.length,Q=H.length;for(f=0;Q>f;++f)d=H[f],b=d.source,l=d.target,t=l.x-b.x,v=l.y-b.y,(m=t*t+v*v)&&(m=e*h[f]*((m=Math.sqrt(m))-
g[f])/m,t*=m,v*=m,l.x-=t*(r=b.weight/(l.weight+b.weight)),l.y-=v*r,b.x+=t*(r=1-r),b.y+=v*r);if((r=e*y)&&(t=p[0]/2,v=p[1]/2,f=-1,r))for(;++f<x;)d=E[f],d.x+=(t-d.x)*r,d.y+=(v-d.y)*r;if(w)for(pf(b=s.geom.quadtree(E),e,k),f=-1;++f<x;)(d=E[f]).fixed||b.visit(a(d));for(f=-1;++f<x;)d=E[f],d.fixed?(d.x=d.px,d.y=d.py):(d.x-=(d.px-(d.px=d.x))*q,d.y-=(d.py-(d.py=d.y))*q);n.tick({type:"tick",alpha:e})},m.nodes=function(a){return arguments.length?(E=a,m):E},m.links=function(a){return arguments.length?(H=a,m):
H},m.size=function(a){return arguments.length?(p=a,m):p},m.linkDistance=function(a){return arguments.length?(r="function"==typeof a?a:+a,m):r},m.distance=m.linkDistance,m.linkStrength=function(a){return arguments.length?(t="function"==typeof a?a:+a,m):t},m.friction=function(a){return arguments.length?(q=+a,m):q},m.charge=function(a){return arguments.length?(w="function"==typeof a?a:+a,m):w},m.chargeDistance=function(a){return arguments.length?(v=a*a,m):Math.sqrt(v)},m.gravity=function(a){return arguments.length?
(y=+a,m):y},m.theta=function(a){return arguments.length?(x=a*a,m):Math.sqrt(x)},m.alpha=function(a){return arguments.length?(a=+a,e?e=0<a?a:0:0<a&&(n.start({type:"start",alpha:e=a}),s.timer(m.tick)),m):e},m.start=function(){function a(d,g){if(!f){f=Array(e);for(k=0;e>k;++k)f[k]=[];for(k=0;m>k;++k){var h=H[k];f[h.source.index].push(h.target);f[h.target.index].push(h.source)}}for(var l=f[b],k=-1,m=l.length;++k<m;)if(!isNaN(h=l[k][d]))return h;return Math.random()*g}var b,f,d,e=E.length,l=H.length,n=
p[0],q=p[1];for(b=0;e>b;++b)(d=E[b]).index=b,d.weight=0;for(b=0;l>b;++b)d=H[b],"number"==typeof d.source&&(d.source=E[d.source]),"number"==typeof d.target&&(d.target=E[d.target]),++d.source.weight,++d.target.weight;for(b=0;e>b;++b)d=E[b],isNaN(d.x)&&(d.x=a("x",n)),isNaN(d.y)&&(d.y=a("y",q)),isNaN(d.px)&&(d.px=d.x),isNaN(d.py)&&(d.py=d.y);if(g=[],"function"==typeof r)for(b=0;l>b;++b)g[b]=+r.call(this,H[b],b);else for(b=0;l>b;++b)g[b]=r;if(h=[],"function"==typeof t)for(b=0;l>b;++b)h[b]=+t.call(this,
H[b],b);else for(b=0;l>b;++b)h[b]=t;if(k=[],"function"==typeof w)for(b=0;e>b;++b)k[b]=+w.call(this,E[b],b);else for(b=0;e>b;++b)k[b]=w;return m.resume()},m.resume=function(){return m.alpha(.1)},m.stop=function(){return m.alpha(0)},m.drag=function(){return d||(d=s.behavior.drag().origin(W).on("dragstart.force",uh).on("drag.force",b).on("dragend.force",vh)),arguments.length?(this.on("mouseover.force",wh).on("mouseout.force",xh).call(d),void 0):d},s.rebind(m,n,"on")};var pi=20,qi=1,ri=1/0;s.layout.hierarchy=
function(){function a(g){var h,k=[g],m=[];for(g.depth=0;null!=(h=k.pop());)if(m.push(h),(p=d.call(a,h,h.depth))&&(n=p.length)){for(var n,p,q;0<=--n;)k.push(q=p[n]),q.parent=h,q.depth=h.depth+1;e&&(h.value=0);h.children=p}else e&&(h.value=+e.call(a,h,h.depth)||0),delete h.children;return ua(g,function(a){var d,g;b&&(d=a.children)&&d.sort(b);e&&(g=a.parent)&&(g.value+=a.value)}),m}var b=Bh,d=zh,e=Ah;return a.sort=function(d){return arguments.length?(b=d,a):b},a.children=function(b){return arguments.length?
(d=b,a):d},a.value=function(b){return arguments.length?(e=b,a):e},a.revalue=function(b){return e&&(zb(b,function(a){a.children&&(a.value=0)}),ua(b,function(b){var f;b.children||(b.value=+e.call(a,b,b.depth)||0);(f=b.parent)&&(f.value+=b.value)})),b},a};s.layout.partition=function(){function a(b,f,d,e){var g=b.children;if(b.x=f,b.y=b.depth*e,b.dx=d,b.dy=e,g&&(h=g.length)){var h,l,k=-1;for(d=b.value?d/b.value:0;++k<h;)a(l=g[k],f,b=l.value*d,e),f+=b}}function b(a){a=a.children;var d=0;if(a&&(e=a.length))for(var e,
g=-1;++g<e;)d=Math.max(d,b(a[g]));return 1+d}function d(h,l){var k=e.call(this,h,l);return a(k[0],0,g[0],g[1]/b(k[0])),k}var e=s.layout.hierarchy(),g=[1,1];return d.size=function(a){return arguments.length?(g=a,d):g},yb(d,e)};s.layout.pie=function(){function a(h){var k=h.map(function(d,e){return+b.call(a,d,e)}),m=+("function"==typeof e?e.apply(this,arguments):e),n=(("function"==typeof g?g.apply(this,arguments):g)-m)/s.sum(k),p=s.range(h.length);null!=d&&p.sort(d===jg?function(a,b){return k[b]-k[a]}:
function(a,b){return d(h[a],h[b])});var q=[];return p.forEach(function(a){var b;q[a]={data:h[a],value:b=k[a],startAngle:m,endAngle:m+=b*n}}),q}var b=Number,d=jg,e=0,g=ga;return a.value=function(d){return arguments.length?(b=d,a):b},a.sort=function(b){return arguments.length?(d=b,a):d},a.startAngle=function(b){return arguments.length?(e=b,a):e},a.endAngle=function(b){return arguments.length?(g=b,a):g},a};var jg={};s.layout.stack=function(){function a(m,n){var p=m.map(function(d,e){return b.call(a,
d,e)}),q=p.map(function(b){return b.map(function(b,f){return[h.call(a,b,f),k.call(a,b,f)]})}),r=d.call(a,q,n),p=s.permute(p,r),q=s.permute(q,r),t,w,v=e.call(a,q,n),x=p.length,y=p[0].length;for(t=0;y>t;++t)for(g.call(a,p[0][t],w=v[t],q[0][t][1]),r=1;x>r;++r)g.call(a,p[r][t],w+=q[r-1][t][1],q[r][t][1]);return m}var b=W,d=jd,e=kd,g=Eh,h=Ch,k=Dh;return a.values=function(d){return arguments.length?(b=d,a):b},a.order=function(b){return arguments.length?(d="function"==typeof b?b:si.get(b)||jd,a):d},a.offset=
function(b){return arguments.length?(e="function"==typeof b?b:ti.get(b)||kd,a):e},a.x=function(b){return arguments.length?(h=b,a):h},a.y=function(b){return arguments.length?(k=b,a):k},a.out=function(b){return arguments.length?(g=b,a):g},a};var si=s.map({"inside-out":function(a){var b,d=a.length,e=a.map(Fh),g=a.map(Gh),h=s.range(d).sort(function(a,b){return e[a]-e[b]}),k=0,m=0,n=[],p=[];for(a=0;d>a;++a)b=h[a],m>k?(k+=g[b],n.push(b)):(m+=g[b],p.push(b));return p.reverse().concat(n)},reverse:function(a){return s.range(a.length).reverse()},
"default":jd}),ti=s.map({silhouette:function(a){var b,d,e,g=a.length,h=a[0].length,k=[],m=0,n=[];for(d=0;h>d;++d){for(e=b=0;g>b;b++)e+=a[b][d][1];e>m&&(m=e);k.push(e)}for(d=0;h>d;++d)n[d]=(m-k[d])/2;return n},wiggle:function(a){var b,d,e,g,h,k,m,n,p,q=a.length,r=a[0],s=r.length,t=[];t[0]=n=p=0;for(d=1;s>d;++d){for(g=b=0;q>b;++b)g+=a[b][d][1];h=b=0;for(m=r[d][0]-r[d-1][0];q>b;++b){e=0;for(k=(a[b][d][1]-a[b][d-1][1])/(2*m);b>e;++e)k+=(a[e][d][1]-a[e][d-1][1])/m;h+=k*a[b][d][1]}t[d]=n-=g?h/g*m:0;p>n&&
(p=n)}for(d=0;s>d;++d)t[d]-=p;return t},expand:function(a){var b,d,e,g=a.length,h=a[0].length,k=1/g,m=[];for(d=0;h>d;++d){for(e=b=0;g>b;b++)e+=a[b][d][1];if(e)for(b=0;g>b;b++)a[b][d][1]/=e;else for(b=0;g>b;b++)a[b][d][1]=k}for(d=0;h>d;++d)m[d]=0;return m},zero:kd});s.layout.histogram=function(){function a(a,h){var k,m,n=[],p=a.map(d,this),q=e.call(this,p,h),r=g.call(this,q,p,h);h=-1;for(var t=p.length,w=r.length-1,v=b?1:1/t;++h<w;)k=n[h]=[],k.dx=r[h+1]-(k.x=r[h]),k.y=0;if(0<w)for(h=-1;++h<t;)m=p[h],
m>=q[0]&&m<=q[1]&&(k=n[s.bisect(r,m,1,w)-1],k.y+=v,k.push(a[h]));return n}var b=!0,d=Number,e=Jh,g=Ih;return a.value=function(b){return arguments.length?(d=b,a):d},a.range=function(b){return arguments.length?(e=K(b),a):e},a.bins=function(b){return arguments.length?(g="number"==typeof b?function(a){return qf(a,b)}:K(b),a):g},a.frequency=function(d){return arguments.length?(b=!!d,a):b},a};s.layout.pack=function(){function a(a,h){var k=d.call(this,a,h),m=k[0],n=g[0],p=g[1],q=null==b?Math.sqrt:"function"==
typeof b?b:function(){return b};if(m.x=m.y=0,ua(m,function(a){a.r=+q(a.value)}),ua(m,tf),e){var r=e*(b?1:Math.max(2*m.r/n,2*m.r/p))/2;ua(m,function(a){a.r+=r});ua(m,tf);ua(m,function(a){a.r-=r})}return vf(m,n/2,p/2,b?1:1/Math.max(2*m.r/n,2*m.r/p)),k}var b,d=s.layout.hierarchy().sort(Kh),e=0,g=[1,1];return a.size=function(b){return arguments.length?(g=b,a):g},a.radius=function(d){return arguments.length?(b=null==d||"function"==typeof d?d:+d,a):b},a.padding=function(b){return arguments.length?(e=+b,
a):e},yb(a,d)};s.layout.tree=function(){function a(a,p){var q=h.call(this,a,p),r=q[0],s=b(r);if(ua(s,d),s.parent.m=-s.z,zb(s,e),n)zb(r,g);else{var t=r,w=r,v=r;zb(r,function(a){a.x<t.x&&(t=a);a.x>w.x&&(w=a);a.depth>v.depth&&(v=a)});var x=k(t,w)/2-t.x,y=m[0]/(w.x+k(w,t)/2+x),E=m[1]/(v.depth||1);zb(r,function(a){a.x=(a.x+x)*y;a.y=a.depth*E})}return q}function b(a){for(var f={A:null,children:[a]},d=[f];null!=(a=d.pop());)for(var e,g=a.children,h=0,k=g.length;k>h;++h)d.push((g[h]=e={_:g[h],parent:a,children:(e=
g[h].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:h}).a=e);return f.children[0]}function d(a){var b=a.children,f=a.parent.children,e=a.i?f[a.i-1]:null;if(b.length){for(var g,h=0,l=0,m=a.children,n=m.length;0<=--n;)g=m[n],g.z+=h,g.m+=h,h+=g.s+(l+=g.c);b=(b[0].z+b[b.length-1].z)/2;e?(a.z=e.z+k(a._,e._),a.m=a.z-b):a.z=b}else e&&(a.z=e.z+k(a._,e._));b=a.parent;f=a.parent.A||f[0];if(e){for(var h=g=a,l=e,m=g.parent.children[0],n=g.m,p=h.m,q=l.m,u=m.m;l=nd(l),g=md(g),l&&g;){m=md(m);h=
nd(h);h.a=a;e=l.z+q-g.z-n+k(l._,g._);if(0<e){var r=l.a.parent===a.parent?l.a:f,s=a,t=e,w=t/(s.i-r.i);s.c-=w;s.s+=t;r.c+=w;s.z+=t;s.m+=t;n+=e;p+=e}q+=l.m;n+=g.m;u+=m.m;p+=h.m}l&&!nd(h)&&(h.t=l,h.m+=q-p);g&&!md(m)&&(m.t=g,m.m+=n-u,f=a)}b.A=f}function e(a){a._.x=a.z+a.parent.m;a.m+=a.parent.m}function g(a){a.x*=m[0];a.y=a.depth*m[1]}var h=s.layout.hierarchy().sort(null).value(null),k=wf,m=[1,1],n=null;return a.separation=function(b){return arguments.length?(k=b,a):k},a.size=function(b){return arguments.length?
(n=null==(m=b)?g:null,a):n?null:m},a.nodeSize=function(b){return arguments.length?(n=null==(m=b)?null:g,a):n?m:null},yb(a,h)};s.layout.cluster=function(){function a(a,h){var k,m=b.call(this,a,h),n=m[0],p=0;ua(n,function(a){var b=a.children;b&&b.length?(a.x=Oh(b),a.y=Nh(b)):(a.x=k?p+=d(a,k):0,a.y=0,k=a)});var q=xf(n),r=yf(n),s=q.x-d(q,r)/2,t=r.x+d(r,q)/2;return ua(n,g?function(a){a.x=(a.x-n.x)*e[0];a.y=(n.y-a.y)*e[1]}:function(a){a.x=(a.x-s)/(t-s)*e[0];a.y=(1-(n.y?a.y/n.y:1))*e[1]}),m}var b=s.layout.hierarchy().sort(null).value(null),
d=wf,e=[1,1],g=!1;return a.separation=function(b){return arguments.length?(d=b,a):d},a.size=function(b){return arguments.length?(g=null==(e=b),a):g?null:e},a.nodeSize=function(b){return arguments.length?(g=null!=(e=b),a):g?e:null},yb(a,b)};s.layout.treemap=function(){function a(a,b){for(var f,d,e=-1,g=a.length;++e<g;)d=(f=a[e]).value*(0>b?0:b),f.area=isNaN(d)||0>=d?0:d}function b(d){var g=d.children;if(g&&g.length){var h,k=q(d),l=[],m=g.slice(),n=1/0,p="slice"===t?k.dx:"dice"===t?k.dy:"slice-dice"===
t?1&d.depth?k.dy:k.dx:Math.min(k.dx,k.dy);a(m,k.dx*k.dy/d.value);for(l.area=0;0<(d=m.length);){l.push(d=m[d-1]);l.area+=d.area;var r;if(!(r="squarify"!==t)){d=p;h=void 0;var u=l.area;r=0;for(var s=1/0,v=-1,x=l.length;++v<x;)(h=l[v].area)&&(s>h&&(s=h),h>r&&(r=h));r=(h=(u*=u,d*=d,u?Math.max(d*r*w/u,u/(d*s*w)):1/0))<=n}r?(m.pop(),n=h):(l.area-=l.pop().area,e(l,p,k,!1),p=Math.min(k.dx,k.dy),l.length=l.area=0,n=1/0)}l.length&&(e(l,p,k,!0),l.length=l.area=0);g.forEach(b)}}function d(b){var f=b.children;
if(f&&f.length){var g=q(b),h=f.slice(),k=[];a(h,g.dx*g.dy/b.value);for(k.area=0;b=h.pop();)k.push(b),k.area+=b.area,null!=b.z&&(e(k,b.z?g.dx:g.dy,g,!h.length),k.length=k.area=0);f.forEach(d)}}function e(a,b,f,d){var g,h=-1,k=a.length,l=f.x,n=f.y,p=b?m(a.area/b):0;if(b==f.dx){for((d||p>f.dy)&&(p=f.dy);++h<k;)g=a[h],g.x=l,g.y=n,g.dy=p,l+=g.dx=Math.min(f.x+f.dx-l,p?m(g.area/p):0);g.z=!0;g.dx+=f.x+f.dx-l;f.y+=p;f.dy-=p}else{for((d||p>f.dx)&&(p=f.dx);++h<k;)g=a[h],g.x=l,g.y=n,g.dx=p,n+=g.dy=Math.min(f.y+
f.dy-n,p?m(g.area/p):0);g.z=!1;g.dy+=f.y+f.dy-n;f.x+=p;f.dx-=p}}function g(e){e=h||k(e);var m=e[0];return m.x=0,m.y=0,m.dx=n[0],m.dy=n[1],h&&k.revalue(m),a([m],m.dx*m.dy/m.value),(h?d:b)(m),r&&(h=e),e}var h,k=s.layout.hierarchy(),m=Math.round,n=[1,1],p=null,q=od,r=!1,t="squarify",w=.5*(1+Math.sqrt(5));return g.size=function(a){return arguments.length?(n=a,g):n},g.padding=function(a){function b(f){var d=a.call(g,f,f.depth);return null==d?od(f):zf(f,"number"==typeof d?[d,d,d,d]:d)}function f(b){return zf(b,
a)}if(!arguments.length)return p;var d;return q=null==(p=a)?od:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],f):f,g},g.round=function(a){return arguments.length?(m=a?Math.round:Number,g):m!=Number},g.sticky=function(a){return arguments.length?(r=a,h=null,g):r},g.ratio=function(a){return arguments.length?(w=a,g):w},g.mode=function(a){return arguments.length?(t=a+"",g):t},yb(g,k)};s.random={normal:function(a,b){var d=arguments.length;return 2>d&&(b=1),1>d&&(a=0),function(){var d,e;do d=2*Math.random()-
1,e=2*Math.random()-1,e=d*d+e*e;while(!e||1<e);return a+b*d*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=s.random.normal.apply(s,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=s.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,d=0;a>d;d++)b+=Math.random();return b}}};s.scale={};var Qh={floor:W,ceil:W};s.scale.linear=function(){return Bf([0,1],[0,1],Va,!1)};var Th={s:1,g:1,p:1,r:1,e:1};s.scale.log=function(){return Cf(s.scale.linear().domain([0,
1]),10,!0,[1,10])};var Df=s.format(".0e"),Uh={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};s.scale.pow=function(){return Ef(s.scale.linear(),1,[0,1])};s.scale.sqrt=function(){return s.scale.pow().exponent(.5)};s.scale.ordinal=function(){return Ff([],{t:"range",a:[[]]})};s.scale.category10=function(){return s.scale.ordinal().range(ui)};s.scale.category20=function(){return s.scale.ordinal().range(vi)};s.scale.category20b=function(){return s.scale.ordinal().range(wi)};
s.scale.category20c=function(){return s.scale.ordinal().range(xi)};var ui=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Fb),vi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Fb),wi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,
10834324,13528509,14589654].map(Fb),xi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Fb);s.scale.quantile=function(){return Gf([],[])};s.scale.quantize=function(){return Hf(0,1,[0,1])};s.scale.threshold=function(){return If([.5],[0,1])};s.scale.identity=function(){return Jf([0,1])};s.svg={};s.svg.arc=function(){function a(){var a=b.apply(this,arguments),h=d.apply(this,
arguments),k=e.apply(this,arguments)+Wa,m=g.apply(this,arguments)+Wa,n=(k>m&&(n=k,k=m,m=n),m-k),p=G>n?"0":"1",q=Math.cos(k),k=Math.sin(k),r=Math.cos(m),m=Math.sin(m);return n>=yi?a?"M0,"+h+"A"+h+","+h+" 0 1,1 0,"+-h+"A"+h+","+h+" 0 1,1 0,"+h+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+h+"A"+h+","+h+" 0 1,1 0,"+-h+"A"+h+","+h+" 0 1,1 0,"+h+"Z":a?"M"+h*q+","+h*k+"A"+h+","+h+" 0 "+p+",1 "+h*r+","+h*m+"L"+a*r+","+a*m+"A"+a+","+a+" 0 "+p+",0 "+a*q+","+a*k+"Z":"M"+h*q+","+h*k+
"A"+h+","+h+" 0 "+p+",1 "+h*r+","+h*m+"L0,0Z"}var b=Vh,d=Wh,e=Kf,g=Lf;return a.innerRadius=function(d){return arguments.length?(b=K(d),a):b},a.outerRadius=function(b){return arguments.length?(d=K(b),a):d},a.startAngle=function(b){return arguments.length?(e=K(b),a):e},a.endAngle=function(b){return arguments.length?(g=K(b),a):g},a.centroid=function(){var a=(b.apply(this,arguments)+d.apply(this,arguments))/2,h=(e.apply(this,arguments)+g.apply(this,arguments))/2+Wa;return[Math.cos(h)*a,Math.sin(h)*a]},
a};var Wa=-X,yi=ga-C;s.svg.line=function(){return Mf(W)};var rd=s.map({linear:ha,"linear-closed":function(a){return ha(a)+"Z"},step:function(a){for(var b=0,d=a.length,e=a[0],g=[e[0],",",e[1]];++b<d;)g.push("H",(e[0]+(e=a[b])[0])/2,"V",e[1]);return 1<d&&g.push("H",e[0]),g.join("")},"step-before":sd,"step-after":td,basis:Nf,"basis-open":function(a){if(4>a.length)return ha(a);for(var b,d=[],e=-1,g=a.length,h=[0],k=[0];3>++e;)b=a[e],h.push(b[0]),k.push(b[1]);d.push(ka(La,h)+","+ka(La,k));for(--e;++e<
g;)b=a[e],h.shift(),h.push(b[0]),k.shift(),k.push(b[1]),vd(d,h,k);return d.join("")},"basis-closed":function(a){for(var b,d,e=-1,g=a.length,h=g+4,k=[],m=[];4>++e;)d=a[e%g],k.push(d[0]),m.push(d[1]);b=[ka(La,k),",",ka(La,m)];for(--e;++e<h;)d=a[e%g],k.shift(),k.push(d[0]),m.shift(),m.push(d[1]),vd(b,k,m);return b.join("")},bundle:function(a,b){var d=a.length-1;if(d)for(var e,g,h=a[0][0],k=a[0][1],m=a[d][0]-h,n=a[d][1]-k,p=-1;++p<=d;)e=a[p],g=p/d,e[0]=b*e[0]+(1-b)*(h+g*m),e[1]=b*e[1]+(1-b)*(k+g*n);return Nf(a)},
cardinal:function(a,b){return 3>a.length?ha(a):a[0]+hc(a,ud(a,b))},"cardinal-open":function(a,b){return 4>a.length?ha(a):a[1]+hc(a.slice(1,a.length-1),ud(a,b))},"cardinal-closed":function(a,b){return 3>a.length?ha(a):a[0]+hc((a.push(a[0]),a),ud([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=ha(a);else{var b=a[0],d,e,g,h,k=[],m;d=0;m=a.length-1;for(var n=[],p=a[1],q=n[0]=wd(a[0],p);++d<m;)n[d]=(q+(q=wd(p,p=a[d+1])))/2;m=(n[d]=q,n);n=-1;for(p=a.length-1;++n<p;)d=wd(a[n],
a[n+1]),I(d)<C?m[n]=m[n+1]=0:(e=m[n]/d,g=m[n+1]/d,h=e*e+g*g,9<h&&(h=3*d/Math.sqrt(h),m[n]=h*e,m[n+1]=h*g));for(n=-1;++n<=p;)h=(a[Math.min(p,n+1)][0]-a[Math.max(0,n-1)][0])/(6*(1+m[n]*m[n])),k.push([h||0,m[n]*h||0]);a=b+hc(a,k)}return a}});rd.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var Of=[0,2/3,1/3,0],Pf=[0,1/3,2/3,0],La=[0,1/6,2/3,1/6];s.svg.line.radial=function(){var a=Mf(Qf);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a};sd.reverse=td;td.reverse=sd;s.svg.area=function(){return Rf(W)};
s.svg.area.radial=function(){var a=Rf(Qf);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a};s.svg.chord=function(){function a(a,h){var k=b(this,e,a,h),m=b(this,g,a,h);return"M"+k.p0+d(k.r,k.p1,k.a1-k.a0)+(k.a0==m.a0&&k.a1==m.a1?"Q 0,0 "+k.p0:"Q 0,0 "+m.p0+d(m.r,m.p1,m.a1-m.a0)+("Q 0,0 "+k.p0))+"Z"}function b(a,f,d,e){var g=f.call(a,d,e);f=h.call(a,g,e);d=k.call(a,g,e)+Wa;
a=m.call(a,g,e)+Wa;return{r:f,a0:d,a1:a,p0:[f*Math.cos(d),f*Math.sin(d)],p1:[f*Math.cos(a),f*Math.sin(a)]}}function d(a,b,f){return"A"+a+","+a+" 0 "+ +(f>G)+",1 "+b}var e=Yc,g=Zc,h=Xh,k=Kf,m=Lf;return a.radius=function(b){return arguments.length?(h=K(b),a):h},a.source=function(b){return arguments.length?(e=K(b),a):e},a.target=function(b){return arguments.length?(g=K(b),a):g},a.startAngle=function(b){return arguments.length?(k=K(b),a):k},a.endAngle=function(b){return arguments.length?(m=K(b),a):m},
a};s.svg.diagonal=function(){function a(a,g){var h=b.call(this,a,g),k=d.call(this,a,g),m=(h.y+k.y)/2,h=[h,{x:h.x,y:m},{x:k.x,y:m},k];return h=h.map(e),"M"+h[0]+"C"+h[1]+" "+h[2]+" "+h[3]}var b=Yc,d=Zc,e=Sf;return a.source=function(d){return arguments.length?(b=K(d),a):b},a.target=function(b){return arguments.length?(d=K(b),a):d},a.projection=function(b){return arguments.length?(e=b,a):e},a};s.svg.diagonal.radial=function(){var a=s.svg.diagonal(),b=Sf,d=a.projection;return a.projection=function(a){return arguments.length?
d(Yh(b=a)):b},a};s.svg.symbol=function(){function a(a,e){return(kg.get(b.call(this,a,e))||Tf)(d.call(this,a,e))}var b=$h,d=Zh;return a.type=function(d){return arguments.length?(b=K(d),a):b},a.size=function(b){return arguments.length?(d=K(b),a):d},a};var kg=s.map({circle:Tf,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*lg));var b=a*lg;return"M0,"+-a+"L"+b+",0 0,"+a+
" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/zc);var b=a*zc/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/zc);var b=a*zc/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});s.svg.symbolTypes=kg.keys();var Ya,lc,zc=Math.sqrt(3),lg=Math.tan(30*F),V=[],$f=0;V.call=L.call;V.empty=L.empty;V.node=L.node;V.size=L.size;s.transition=function(a){return arguments.length?
Ya?a.transition():a:Zf.transition()};s.transition.prototype=V;V.select=function(a){var b,d,e,g=this.id,h=[];a=T(a);for(var k=-1,m=this.length;++k<m;){h.push(b=[]);for(var n=this[k],p=-1,q=n.length;++p<q;)(e=n[p])&&(d=a.call(e,e.__data__,p,k))?("__data__"in e&&(d.__data__=e.__data__),ic(d,p,g,e.__transition__[g]),b.push(d)):b.push(null)}return Ab(h,g)};V.selectAll=function(a){var b,d,e,g,h=this.id,k=[];a=Hd(a);for(var m=-1,n=this.length;++m<n;)for(var p=this[m],q=-1,r=p.length;++q<r;)if(b=p[q]){g=
b.__transition__[h];d=a.call(b,b.__data__,q,m);k.push(b=[]);for(var s=-1,t=d.length;++s<t;)(e=d[s])&&ic(e,s,h,g),b.push(e)}return Ab(k,h)};V.filter=function(a){var b,d,e,g=[];"function"!=typeof a&&(a=Pd(a));for(var h=0,k=this.length;k>h;h++){g.push(b=[]);d=this[h];for(var m=0,n=d.length;n>m;m++)(e=d[m])&&a.call(e,e.__data__,m,h)&&b.push(e)}return Ab(g,this.id)};V.tween=function(a,b){var d=this.id;return 2>arguments.length?this.node().__transition__[d].tween.get(a):va(this,null==b?function(b){b.__transition__[d].tween.remove(a)}:
function(e){e.__transition__[d].tween.set(a,b)})};V.attr=function(a,b){function d(){this.removeAttribute(m)}function e(){this.removeAttributeNS(m.space,m.local)}function g(a){return null==a?d:(a+="",function(){var b,f=this.getAttribute(m);return f!==a&&(b=k(f,a),function(a){this.setAttribute(m,b(a))})})}function h(a){return null==a?e:(a+="",function(){var b,f=this.getAttributeNS(m.space,m.local);return f!==a&&(b=k(f,a),function(a){this.setAttributeNS(m.space,m.local,b(a))})})}if(2>arguments.length){for(b in a)this.attr(b,
a[b]);return this}var k="transform"==a?nf:Va,m=s.ns.qualify(a);return xd(this,"attr."+a,b,m.local?h:g)};V.attrTween=function(a,b){function d(a,e){var h=b.call(this,a,e,this.getAttribute(g));return h&&function(a){this.setAttribute(g,h(a))}}function e(a,d){var h=b.call(this,a,d,this.getAttributeNS(g.space,g.local));return h&&function(a){this.setAttributeNS(g.space,g.local,h(a))}}var g=s.ns.qualify(a);return this.tween("attr."+a,g.local?e:d)};V.style=function(a,b,d){function e(){this.style.removeProperty(a)}
var g=arguments.length;if(3>g){if("string"!=typeof a){2>g&&(b="");for(d in a)this.style(d,a[d],b);return this}d=""}return xd(this,"style."+a,b,function(b){return null==b?e:(b+="",function(){var f,e=Z.getComputedStyle(this,null).getPropertyValue(a);return e!==b&&(f=Va(e,b),function(b){this.style.setProperty(a,f(b),d)})})})};V.styleTween=function(a,b,d){return 3>arguments.length&&(d=""),this.tween("style."+a,function(e,g){var h=b.call(this,e,g,Z.getComputedStyle(this,null).getPropertyValue(a));return h&&
function(b){this.style.setProperty(a,h(b),d)}})};V.text=function(a){return xd(this,"text",a,ai)};V.remove=function(){return this.each("end.transition",function(){var a;2>this.__transition__.count&&(a=this.parentNode)&&a.removeChild(this)})};V.ease=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].ease:("function"!=typeof a&&(a=s.ease.apply(s,arguments)),va(this,function(d){d.__transition__[b].ease=a}))};V.delay=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].delay:
va(this,"function"==typeof a?function(d,e,g){d.__transition__[b].delay=+a.call(d,d.__data__,e,g)}:(a=+a,function(d){d.__transition__[b].delay=a}))};V.duration=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].duration:va(this,"function"==typeof a?function(d,e,g){d.__transition__[b].duration=Math.max(1,a.call(d,d.__data__,e,g))}:(a=Math.max(1,a),function(d){d.__transition__[b].duration=a}))};V.each=function(a,b){var d=this.id;if(2>arguments.length){var e=lc,g=Ya;Ya=
d;va(this,function(b,f,e){lc=b.__transition__[d];a.call(b,b.__data__,f,e)});lc=e;Ya=g}else va(this,function(e){e=e.__transition__[d];(e.event||(e.event=s.dispatch("start","end"))).on(a,b)});return this};V.transition=function(){for(var a,b,d,e,g=this.id,h=++$f,k=[],m=0,n=this.length;n>m;m++){k.push(a=[]);b=this[m];for(var p=0,q=b.length;q>p;p++)(d=b[p])&&(e=Object.create(d.__transition__[g]),e.delay+=e.duration,ic(d,p,h,e)),a.push(d)}return Ab(k,h)};s.svg.axis=function(){function a(a){a.each(function(){var a,
p=s.select(this),q=this.__chart__||d,r=this.__chart__=d.copy(),t=null==n?r.ticks?r.ticks.apply(r,m):r.domain():n,w=null==b?r.tickFormat?r.tickFormat.apply(r,m):W:b,v=p.selectAll(".tick").data(t,r),t=v.enter().insert("g",".domain").attr("class","tick").style("opacity",C),x=s.transition(v.exit()).style("opacity",C).remove(),y=s.transition(v.order()).style("opacity",1),E=dc(r),p=p.selectAll(".domain").data([0]),p=(p.enter().append("path").attr("class","domain"),s.transition(p));t.append("line");t.append("text");
var D=t.select("line"),B=y.select("line"),w=v.select("text").text(w),v=t.select("text"),O=y.select("text");switch(e){case "bottom":a=Uf;D.attr("y2",g);v.attr("y",Math.max(g,0)+k);B.attr("x2",0).attr("y2",g);O.attr("x",0).attr("y",Math.max(g,0)+k);w.attr("dy",".71em").style("text-anchor","middle");p.attr("d","M"+E[0]+","+h+"V0H"+E[1]+"V"+h);break;case "top":a=Uf;D.attr("y2",-g);v.attr("y",-(Math.max(g,0)+k));B.attr("x2",0).attr("y2",-g);O.attr("x",0).attr("y",-(Math.max(g,0)+k));w.attr("dy","0em").style("text-anchor",
"middle");p.attr("d","M"+E[0]+","+-h+"V0H"+E[1]+"V"+-h);break;case "left":a=Vf;D.attr("x2",-g);v.attr("x",-(Math.max(g,0)+k));B.attr("x2",-g).attr("y2",0);O.attr("x",-(Math.max(g,0)+k)).attr("y",0);w.attr("dy",".32em").style("text-anchor","end");p.attr("d","M"+-h+","+E[0]+"H0V"+E[1]+"H"+-h);break;case "right":a=Vf,D.attr("x2",g),v.attr("x",Math.max(g,0)+k),B.attr("x2",g).attr("y2",0),O.attr("x",Math.max(g,0)+k).attr("y",0),w.attr("dy",".32em").style("text-anchor","start"),p.attr("d","M"+h+","+E[0]+
"H0V"+E[1]+"H"+h)}if(r.rangeBand)var M=r,F=M.rangeBand()/2,q=r=function(a){return M(a)+F};else q.rangeBand?q=r:x.call(a,r);t.call(a,q);y.call(a,r)})}var b,d=s.scale.linear(),e=mg,g=6,h=6,k=3,m=[10],n=null;return a.scale=function(b){return arguments.length?(d=b,a):d},a.orient=function(b){return arguments.length?(e=b in zi?b+"":mg,a):e},a.ticks=function(){return arguments.length?(m=arguments,a):m},a.tickValues=function(b){return arguments.length?(n=b,a):n},a.tickFormat=function(d){return arguments.length?
(b=d,a):b},a.tickSize=function(b){var d=arguments.length;return d?(g=+b,h=+arguments[d-1],a):g},a.innerTickSize=function(b){return arguments.length?(g=+b,a):g},a.outerTickSize=function(b){return arguments.length?(h=+b,a):h},a.tickPadding=function(b){return arguments.length?(k=+b,a):k},a.tickSubdivide=function(){return arguments.length&&a},a};var mg="bottom",zi={top:1,right:1,bottom:1,left:1};s.svg.brush=function(){function a(h){h.each(function(){var h=s.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color",
"rgba(0,0,0,0)").on("mousedown.brush",g).on("touchstart.brush",g),k=h.selectAll(".background").data([0]);k.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");h.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var m=h.selectAll(".resize").data(v,W);m.exit().remove();m.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Ai[a]}).append("rect").attr("x",
function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");m.style("display",a.empty()?"none":null);var q,h=s.transition(h),k=s.transition(k);n&&(q=dc(n),k.attr("x",q[0]).attr("width",q[1]-q[0]),d(h));p&&(q=dc(p),k.attr("y",q[0]).attr("height",q[1]-q[0]),e(h));b(h)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+q[+/e$/.test(a)]+","+r[+/^s/.test(a)]+")"})}function d(a){a.select(".extent").attr("x",
q[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",q[1]-q[0])}function e(a){a.select(".extent").attr("y",r[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",r[1]-r[0])}function g(){function v(){var a=s.mouse(B),g=!1;A&&(a[0]+=A[0],a[1]+=A[1]);L||(s.event.altKey?(D||(D=[(q[0]+q[1])/2,(r[0]+r[1])/2]),K[0]=q[+(a[0]<D[0])],K[1]=r[+(a[1]<D[1])]):D=null);I&&x(a,n,0)&&(d(F),g=!0);T&&x(a,p,1)&&(e(F),g=!0);g&&(b(F),O({type:"brush",mode:L?"move":"resize"}))}function x(a,b,d){var f,e,g=dc(b);b=
g[0];var g=g[1],m=K[d],l=d?r:q,n=l[1]-l[0];return L&&(b-=m,g-=n+m),f=(d?w:t)?Math.max(b,Math.min(g,a[d])):a[d],L?e=(f+=m)+n:(D&&(m=Math.max(b,Math.min(g,2*D[d]-f))),f>m?(e=f,f=m):e=m),l[0]!=f||l[1]!=e?(d?k=null:h=null,l[0]=f,l[1]=e,!0):void 0}function y(){v();F.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);s.select("body").style("cursor",null);N.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",
null).on("keyup.brush",null);Ma();O({type:"brushend"})}var D,A,B=this,C=s.select(s.event.target),O=m.of(B,arguments),F=s.select(B),G=C.datum(),I=!/^(n|s)$/.test(G)&&n,T=!/^(e|w)$/.test(G)&&p,L=C.classed("extent"),Ma=Eb(),K=s.mouse(B),N=s.select(Z).on("keydown.brush",function(){32==s.event.keyCode&&(L||(D=null,K[0]-=q[1],K[1]-=r[1],L=2),E())}).on("keyup.brush",function(){32==s.event.keyCode&&2==L&&(K[0]+=q[1],K[1]+=r[1],L=0,E())});if(s.event.changedTouches?N.on("touchmove.brush",v).on("touchend.brush",
y):N.on("mousemove.brush",v).on("mouseup.brush",y),F.interrupt().selectAll("*").interrupt(),L)K[0]=q[0]-K[0],K[1]=r[0]-K[1];else if(G){var P=+/w$/.test(G),G=+/^n/.test(G);A=[q[1-P]-K[0],r[1-G]-K[1]];K[0]=q[P];K[1]=r[G]}else s.event.altKey&&(D=K.slice());F.style("pointer-events","none").selectAll(".resize").style("display",null);s.select("body").style("cursor",C.style("cursor"));O({type:"brushstart"});v()}var h,k,m=Ma(a,"brushstart","brush","brushend"),n=null,p=null,q=[0,0],r=[0,0],t=!0,w=!0,v=Ed[0];
return a.event=function(a){a.each(function(){var a=m.of(this,arguments),b={x:q,y:r,i:h,j:k},d=this.__chart__||b;this.__chart__=b;Ya?s.select(this).transition().each("start.brush",function(){h=d.i;k=d.j;q=d.x;r=d.y;a({type:"brushstart"})}).tween("brush:brush",function(){var d=cc(q,b.x),f=cc(r,b.y);return h=k=null,function(e){q=b.x=d(e);r=b.y=f(e);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){h=b.i;k=b.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),
a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(n=b,v=Ed[!n<<1|!p],a):n},a.y=function(b){return arguments.length?(p=b,v=Ed[!n<<1|!p],a):p},a.clamp=function(b){return arguments.length?(n&&p?(t=!!b[0],w=!!b[1]):n?t=!!b:p&&(w=!!b),a):n&&p?[t,w]:n?t:p?w:null},a.extent=function(b){var d,f,e,g,m;return arguments.length?(n&&(d=b[0],f=b[1],p&&(d=d[0],f=f[0]),h=[d,f],n.invert&&(d=n(d),f=n(f)),d>f&&(m=d,d=f,f=m),(d!=q[0]||f!=q[1])&&(q=[d,f])),p&&(e=b[0],g=b[1],
n&&(e=e[1],g=g[1]),k=[e,g],p.invert&&(e=p(e),g=p(g)),e>g&&(m=e,e=g,g=m),(e!=r[0]||g!=r[1])&&(r=[e,g])),a):(n&&(h?(d=h[0],f=h[1]):(d=q[0],f=q[1],n.invert&&(d=n.invert(d),f=n.invert(f)),d>f&&(m=d,d=f,f=m))),p&&(k?(e=k[0],g=k[1]):(e=r[0],g=r[1],p.invert&&(e=p.invert(e),g=p.invert(g)),e>g&&(m=e,e=g,g=m))),n&&p?[[d,e],[f,g]]:n?[d,f]:p&&[e,g])},a.clear=function(){return a.empty()||(q=[0,0],r=[0,0],h=k=null),a},a.empty=function(){return!!n&&q[0]==q[1]||!!p&&r[0]==r[1]},s.rebind(a,m,"on")};var Ai={n:"ns-resize",
e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ed=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Fd=B.format=bg.timeFormat,ng=Fd.utc,og=ng("%Y-%m-%dT%H:%M:%S.%LZ");Fd.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?yd:og;yd.parse=function(a){a=new Date(a);return isNaN(a)?null:a};yd.toString=og.toString;B.second=Qa(function(a){return new Y(1E3*Math.floor(a/1E3))},function(a,b){a.setTime(a.getTime()+1E3*
Math.floor(b))},function(a){return a.getSeconds()});B.seconds=B.second.range;B.seconds.utc=B.second.utc.range;B.minute=Qa(function(a){return new Y(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});B.minutes=B.minute.range;B.minutes.utc=B.minute.utc.range;B.hour=Qa(function(a){var b=a.getTimezoneOffset()/60;return new Y(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},function(a){return a.getHours()});
B.hours=B.hour.range;B.hours.utc=B.hour.utc.range;B.month=Qa(function(a){return a=B.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});B.months=B.month.range;B.months.utc=B.month.utc.range;var jc=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Gd=[[B.second,1],[B.second,5],[B.second,15],[B.second,30],[B.minute,1],[B.minute,5],[B.minute,15],[B.minute,30],[B.hour,1],[B.hour,3],[B.hour,6],[B.hour,12],
[B.day,1],[B.day,2],[B.week,1],[B.month,1],[B.month,3],[B.year,1]],Bi=Fd.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",eb]]),bi={range:function(a,b,d){return s.range(Math.ceil(a/d)*d,+b,d).map(Xa)},floor:W,ceil:W};
Gd.year=B.year;B.scale=function(){return zd(s.scale.linear(),Gd,Bi)};var pg=Gd.map(function(a){return[a[0].utc,a[1]]}),Ci=ng.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",eb]]);pg.year=B.year.utc;
B.scale.utc=function(){return zd(s.scale.linear(),pg,Ci)};s.text=Nc(function(a){return a.responseText});s.json=function(a,b){return Hb(a,"application/json",ci,b)};s.html=function(a,b){return Hb(a,"text/html",di,b)};s.xml=Nc(function(a){return a.responseXML});"function"==typeof define&&define.amd?define(s):"object"==typeof module&&module.exports&&(module.exports=s);this.d3=s}();this.j$=this.jStat=function(e,k){function d(b,d){var g=b>d?b:d;return e.pow(10,17-~~(e.log(0<g?g:-g)*e.LOG10E))}function h(b){return"[object Function]"===t.call(b)}function b(b){return"number"==typeof b&&b===b}function g(){return new g._init(arguments)}function m(){return 0}function p(){return 1}function n(b,d){return b===d?1:0}var q=Array.prototype.concat,r=Array.prototype.slice,t=Object.prototype.toString,x=Array.isArray||function(b){return"[object Array]"===t.call(b)};g.fn=g.prototype;g._init=
function(d){var e;if(x(d[0]))if(x(d[0][0])){h(d[1])&&(d[0]=g.map(d[0],d[1]));for(e=0;e<d[0].length;e++)this[e]=d[0][e];this.length=d[0].length}else this[0]=h(d[1])?g.map(d[0],d[1]):d[0],this.length=1;else{if(b(d[0]))this[0]=g.seq.apply(null,d);else{if(d[0]instanceof g)return g(d[0].toArray());this[0]=[]}this.length=1}return this};g._init.prototype=g.prototype;g._init.constructor=g;g.utils={calcRdx:d,isArray:x,isFunction:h,isNumber:b,toVector:function(b){return q.apply([],b)}};g.extend=function(b){var d,
e;if(1===arguments.length){for(e in b)g[e]=b[e];return this}for(d=1;d<arguments.length;d++)for(e in arguments[d])b[e]=arguments[d][e];return b};g.rows=function(b){return b.length||1};g.cols=function(b){return b[0].length||1};g.dimensions=function(b){return{rows:g.rows(b),cols:g.cols(b)}};g.row=function(b,d){return b[d]};g.col=function(b,d){for(var e=Array(b.length),g=0;g<b.length;g++)e[g]=[b[g][d]];return e};g.diag=function(b){for(var d=g.rows(b),e=Array(d),h=0;h<d;h++)e[h]=[b[h][h]];return e};g.antidiag=
function(b){for(var d=g.rows(b)-1,e=Array(d),h=0;0<=d;d--,h++)e[h]=[b[h][d]];return e};g.transpose=function(b){var d=[],e,g,h,k,m;x(b[0])||(b=[b]);g=b.length;h=b[0].length;for(m=0;m<h;m++){e=Array(g);for(k=0;k<g;k++)e[k]=b[k][m];d.push(e)}return 1===d.length?d[0]:d};g.map=function(b,d,e){var g,h,k,m;x(b[0])||(b=[b]);g=b.length;h=b[0].length;k=e?b:Array(g);for(e=0;e<g;e++)for(k[e]||(k[e]=Array(h)),m=0;m<h;m++)k[e][m]=d(b[e][m],e,m);return 1===k.length?k[0]:k};g.alter=function(b,d){return g.map(b,d,
!0)};g.create=function(b,d,e){var g=Array(b),k,m;h(d)&&(e=d,d=b);for(k=0;k<b;k++)for(g[k]=Array(d),m=0;m<d;m++)g[k][m]=e(k,m);return g};g.zeros=function(d,e){return b(e)||(e=d),g.create(d,e,m)};g.ones=function(d,e){return b(e)||(e=d),g.create(d,e,p)};g.rand=function(d,h){return b(h)||(h=d),g.create(d,h,e.random)};g.identity=function(d,e){return b(e)||(e=d),g.create(d,e,n)};g.symmetric=function(b){var d=b.length,e,g;if(b.length!==b[0].length)return!1;for(e=0;e<d;e++)for(g=0;g<d;g++)if(b[g][e]!==b[e][g])return!1;
return!0};g.clear=function(b){return g.alter(b,m)};g.seq=function(b,e,g,k){h(k)||(k=!1);var m=[],n=d(b,e);g=(e*n-b*n)/((g-1)*n);var p=b,q;for(q=0;p<=e;q++,p=(b*n+g*n*q)/n)m.push(k?k(p,q):p);return m};var v=g.prototype;return v.length=0,v.push=Array.prototype.push,v.sort=Array.prototype.sort,v.splice=Array.prototype.splice,v.slice=Array.prototype.slice,v.toArray=function(){return 1<this.length?r.call(this):r.call(this)[0]},v.map=function(b,d){return g(g.map(this,b,d))},v.alter=function(b){return g.alter(this,
b),this},function(b){for(var d=0;d<b.length;d++)(function(b){v[b]=function(d){var e=this,h;return d?(setTimeout(function(){d.call(e,v[b].call(e))}),this):(h=g[b](this),x(h)?g(h):h)}})(b[d])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(b){for(var d=0;d<b.length;d++)(function(b){v[b]=function(d,e){var h=this;return e?(setTimeout(function(){e.call(h,v[b].call(h,d))}),this):g(g[b](this,d))}})(b[d])}(["row","col"]),function(b){for(var d=0;d<b.length;d++){var e=b[d];
v[e]=new Function("return jStat(jStat."+e+".apply(null, arguments));")}}(["create","zeros","ones","rand","identity"]),g}(Math);
(function(e,k){function d(b,d){return b-d}var h=e.utils.isFunction;e.sum=function(b){for(var d=0,e=b.length;0<=--e;)d+=b[e];return d};e.sumsqrd=function(b){for(var d=0,e=b.length;0<=--e;)d+=b[e]*b[e];return d};e.sumsqerr=function(b){for(var d=e.mean(b),h=0,k=b.length,q;0<=--k;)q=b[k]-d,h+=q*q;return h};e.product=function(b){for(var d=1,e=b.length;0<=--e;)d*=b[e];return d};e.min=function(b){for(var d=b[0],e=0;++e<b.length;)b[e]<d&&(d=b[e]);return d};e.max=function(b){for(var d=b[0],e=0;++e<b.length;)b[e]>
d&&(d=b[e]);return d};e.mean=function(b){return e.sum(b)/b.length};e.meansqerr=function(b){return e.sumsqerr(b)/b.length};e.geomean=function(b){return k.pow(e.product(b),1/b.length)};e.median=function(b){var e=b.length;b=b.slice().sort(d);return e&1?b[e/2|0]:(b[e/2-1]+b[e/2])/2};e.cumsum=function(b){var d=b.length,e=Array(d),h;e[0]=b[0];for(h=1;h<d;h++)e[h]=e[h-1]+b[h];return e};e.diff=function(b){var d=[],e=b.length,h;for(h=1;h<e;h++)d.push(b[h]-b[h-1]);return d};e.mode=function(b){var e=b.length;
b=b.slice().sort(d);var h=1,k=0,q=0,r=[],t;for(t=0;t<e;t++)b[t]===b[t+1]?h++:(h>k?(r=[b[t]],k=h,q=0):h===k&&(r.push(b[t]),q++),h=1);return 0===q?r[0]:r};e.range=function(b){return e.max(b)-e.min(b)};e.variance=function(b,d){return e.sumsqerr(b)/(b.length-(d?1:0))};e.stdev=function(b,d){return k.sqrt(e.variance(b,d))};e.meandev=function(b){var d=0,h=e.mean(b),n;for(n=b.length-1;0<=n;n--)d+=k.abs(b[n]-h);return d/b.length};e.meddev=function(b){var d=0,h=e.median(b),n;for(n=b.length-1;0<=n;n--)d+=k.abs(b[n]-
h);return d/b.length};e.coeffvar=function(b){return e.stdev(b)/e.mean(b)};e.quartiles=function(b){var e=b.length;b=b.slice().sort(d);return[b[k.round(e/4)-1],b[k.round(e/2)-1],b[k.round(3*e/4)-1]]};e.quantiles=function(b,e,h,n){var q=b.slice().sort(d),r=[e.length];b=b.length;var t,x,v;"undefined"==typeof h&&(h=.375);"undefined"==typeof n&&(n=.375);for(t=0;t<e.length;t++)x=e[t],v=h+x*(1-h-n),v=b*x+v,x=k.floor(k.max(1,k.min(v,b-1))),v=k.max(0,k.min(v-x,1)),r[t]=(1-v)*q[x-1]+v*q[x];return r};e.percentileOfScore=
function(b,d,e){var h=0,k=b.length,r=!1,t;"strict"===e&&(r=!0);for(t=0;t<k;t++)e=b[t],(r&&e<d||!r&&e<=d)&&h++;return h/k};e.covariance=function(b,d){var h=e.mean(b),k=e.mean(d),q=b.length,r=Array(q),t;for(t=0;t<q;t++)r[t]=(b[t]-h)*(d[t]-k);return e.sum(r)/(q-1)};e.corrcoeff=function(b,d){return e.covariance(b,d)/e.stdev(b,1)/e.stdev(d,1)};var b=e.prototype;b.cumsum=function(d,k){var p=[],n=0,q=this;h(d)&&(k=d,d=!1);if(k)return setTimeout(function(){k.call(q,b.cumsum.call(q,d))}),this;if(1<this.length){for(q=
!0===d?this:this.transpose();n<q.length;n++)p[n]=e.cumsum(q[n]);return p}return e.cumsum(this[0],d)};(function(d){for(var k=0;k<d.length;k++)(function(d){b[d]=function(g,k){var m=[],t=0,x=this;h(g)&&(k=g,g=!1);if(k)return setTimeout(function(){k.call(x,b[d].call(x,g))}),this;if(1<this.length){for(x=!0===g?this:this.transpose();t<x.length;t++)m[t]=e[d](x[t]);return!0===g?e[d](e.utils.toVector(m)):m}return e[d](this[0],g)}})(d[k])})("sum sumsqrd sumsqerr product min max mean meansqerr geomean median diff mode range variance stdev meandev meddev coeffvar quartiles".split(" "));
(function(d){for(var k=0;k<d.length;k++)(function(d){b[d]=function(){var g=[],k=0,m=this,t=Array.prototype.slice.call(arguments);if(h(t[t.length-1])){var x=t[t.length-1],v=t.slice(0,t.length-1);return setTimeout(function(){x.call(m,b[d].apply(m,v))}),this}x=void 0;if(1<this.length){for(m=m.transpose();k<m.length;k++)g[k]=e[d].apply(m,[m[k]].concat(t));return g}return e[d].apply(m,[this[0]].concat(t))}})(d[k])})(["quantiles","percentileOfScore"])})(this.jStat,Math);
(function(e,k){e.gammaln=function(d){var e=0,b=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5.395239384953E-6],g=1.000000000190015,m,p;p=(m=d)+5.5;for(p-=(d+.5)*k.log(p);6>e;e++)g+=b[e]/++m;return k.log(2.5066282746310007*g/d)-p};e.gammafn=function(d){var e=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],b=[-30.8402300119739,315.35062697960416,
-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],g=!1,m=0,p=0,n=0,q,r,t,x;if(0>=d)if(x=d%1+3.6E-16)g=(d&1?-1:1)*k.PI/k.sin(k.PI*x),d=1-d;else return Infinity;t=d;1>d?r=d++:r=(d-=m=(d|0)-1)-1;for(q=0;8>q;++q)n=(n+e[q])*r,p=p*r+b[q];x=n/p+1;if(t<d)x/=t;else if(t>d)for(q=0;q<m;++q)x*=d,d++;return g&&(x=g/x),x};e.gammap=function(d,h){var b=e.gammaln(d),g=d,m=1/d,p=m,n=h+1-d,q=1/1E-30,r=1/n,t=r,x=1,v=-~(8.5*k.log(1<=d?d:1/d)+.4*d+17);if(0>
h||0>=d)return NaN;if(h<d+1){for(;x<=v;x++)m+=p*=h/++g;return m*k.exp(-h+d*k.log(h)-b)}for(;x<=v;x++)g=-x*(x-d),n+=2,r=g*r+n,q=n+g/q,r=1/r,t=t*r*q;return 1-t*k.exp(-h+d*k.log(h)-b)};e.factorialln=function(d){return 0>d?NaN:e.gammaln(d+1)};e.factorial=function(d){return 0>d?NaN:e.gammafn(d+1)};e.combination=function(d,h){return 170<d||170<h?k.exp(e.combinationln(d,h)):e.factorial(d)/e.factorial(h)/e.factorial(d-h)};e.combinationln=function(d,h){return e.factorialln(d)-e.factorialln(h)-e.factorialln(d-
h)};e.permutation=function(d,h){return e.factorial(d)/e.factorial(d-h)};e.betafn=function(d,h){return 0>=d||0>=h?void 0:170<d+h?k.exp(e.betaln(d,h)):e.gammafn(d)*e.gammafn(h)/e.gammafn(d+h)};e.betaln=function(d,h){return e.gammaln(d)+e.gammaln(h)-e.gammaln(d+h)};e.betacf=function(d,e,b){var g=1,m=e+b,p=e+1,n=e-1,q=1,r=1-m*d/p,t,x,v;1E-30>k.abs(r)&&(r=1E-30);for(v=r=1/r;100>=g&&!(t=2*g,x=g*(b-g)*d/((n+t)*(e+t)),r=1+x*r,1E-30>k.abs(r)&&(r=1E-30),q=1+x/q,1E-30>k.abs(q)&&(q=1E-30),r=1/r,v=v*r*q,x=-(e+
g)*(m+g)*d/((e+t)*(p+t)),r=1+x*r,1E-30>k.abs(r)&&(r=1E-30),q=1+x/q,1E-30>k.abs(q)&&(q=1E-30),r=1/r,t=r*q,v*=t,3E-7>k.abs(t-1));g++);return v};e.gammapinv=function(d,h){var b=0,g=h-1,m=e.gammaln(h),p,n,q,r,t;if(1<=d)return k.max(100,h+100*k.sqrt(h));if(0>=d)return 0;for(1<h?(r=k.log(g),t=k.exp(g*(r-1)-m),n=.5>d?d:1-d,q=k.sqrt(-2*k.log(n)),p=(2.30753+.27061*q)/(1+q*(.99229+.04481*q))-q,.5>d&&(p=-p),p=k.max(.001,h*k.pow(1-1/(9*h)-p/(3*k.sqrt(h)),3))):(q=1-h*(.253+.12*h),d<q?p=k.pow(d/q,1/h):p=1-k.log(1-
(d-q)/(1-q)));12>b;b++){if(0>=p)return 0;n=e.gammap(h,p)-d;1<h?q=t*k.exp(-(p-g)+g*(k.log(p)-r)):q=k.exp(-p+g*k.log(p)-m);q=n/q;p-=q/=1-.5*k.min(1,q*((h-1)/p-1));0>=p&&(p=.5*(p+q));if(k.abs(q)<1E-8*p)break}return p};e.erf=function(d){var e=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-9.46595344482036E-4,3.66839497852761E-4,4.2523324806907E-5,-2.0278578112534E-5,-1.624290004647E-6,1.30365583558E-6,1.5626441722E-8,-8.5238095915E-8,6.529054439E-9,5.059343495E-9,-9.91364156E-10,
-2.27365122E-10,9.6467911E-11,2.394038E-12,-6.886027E-12,8.94487E-13,3.13092E-13,-1.12708E-13,3.81E-16,7.106E-15,-1.523E-15,-9.4E-17,1.21E-16,-2.8E-17],b=e.length-1,g=!1,m=0,p=0,n,q,r,t;0>d&&(d=-d,g=!0);n=2/(2+d);for(q=4*n-2;0<b;b--)r=m,m=q*m-p+e[b],p=r;return t=n*k.exp(-d*d+.5*(e[0]+q*m)-p),g?t-1:1-t};e.erfc=function(d){return 1-e.erf(d)};e.erfcinv=function(d){var h=0,b,g,m;if(2<=d)return-100;if(0>=d)return 100;m=1>d?d:2-d;b=k.sqrt(-2*k.log(m/2));for(b=-.70711*((2.30753+.27061*b)/(1+b*(.99229+.04481*
b))-b);2>h;h++)g=e.erfc(b)-m,b+=g/(1.1283791670955126*k.exp(-b*b)-b*g);return 1>d?b:-b};e.ibetainv=function(d,h,b){var g=h-1,m=b-1,p=0,n,q,r,t,x,v,w,y,E;if(0>=d)return 0;if(1<=d)return 1;1<=h&&1<=b?(r=.5>d?d:1-d,t=k.sqrt(-2*k.log(r)),v=(2.30753+.27061*t)/(1+t*(.99229+.04481*t))-t,.5>d&&(v=-v),w=(v*v-3)/6,y=2/(1/(2*h-1)+1/(2*b-1)),E=v*k.sqrt(w+y)/y-(1/(2*b-1)-1/(2*h-1))*(w+5/6-2/(3*y)),v=h/(h+b*k.exp(2*E))):(n=k.log(h/(h+b)),q=k.log(b/(h+b)),t=k.exp(h*n)/h,x=k.exp(b*q)/b,E=t+x,d<t/E?v=k.pow(h*E*d,
1/h):v=1-k.pow(b*E*(1-d),1/b));for(n=-e.gammaln(h)-e.gammaln(b)+e.gammaln(h+b);10>p&&0!==v&&1!==v&&!(x=e.ibeta(v,h,b)-d,t=k.exp(g*k.log(v)+m*k.log(1-v)+n),x/=t,v-=t=x/(1-.5*k.min(1,x*(g/v-m/(1-v)))),0>=v&&(v=.5*(v+t)),1<=v&&(v=.5*(v+t+1)),k.abs(t)<1E-8*v&&0<p);p++);return v};e.ibeta=function(d,h,b){var g=0===d||1===d?0:k.exp(e.gammaln(h+b)-e.gammaln(h)-e.gammaln(b)+h*k.log(d)+b*k.log(1-d));return 0>d||1<d?!1:d<(h+1)/(h+b+2)?g*e.betacf(d,h,b)/h:1-g*e.betacf(1-d,b,h)/b};e.randn=function(d,h){var b,
g,m,p;h||(h=d);if(d)return e.create(d,h,function(){return e.randn()});do b=k.random(),g=1.7156*(k.random()-.5),m=b-.449871,p=k.abs(g)+.386595,m=m*m+p*(.196*p-.25472*m);while(.27597<m&&(.27846<m||g*g>-4*k.log(b)*b*b));return g/b};e.randg=function(d,h,b){var g=d,m,p,n;b||(b=h);d||(d=1);if(h)return m=e.zeros(h,b),m.alter(function(){return e.randg(d)}),m;1>d&&(d+=1);h=d-1/3;b=1/k.sqrt(9*h);do{do n=e.randn(),p=1+b*n;while(0>=p);p*=p*p;m=k.random()}while(m>1-.331*k.pow(n,4)&&k.log(m)>.5*n*n+h*(1-p+k.log(p)));
if(d==g)return h*p;do m=k.random();while(0===m);return k.pow(m,1/g)*h*p};(function(d){for(var h=0;h<d.length;h++)(function(b){e.fn[b]=function(){return e(e.map(this,function(d){return e[b](d)}))}})(d[h])})(["gammaln","gammafn","factorial","factorialln"]);(function(d){for(var h=0;h<d.length;h++)(function(b){e.fn[b]=function(){return e(e[b].apply(null,arguments))}})(d[h])})(["randn"])})(this.jStat,Math);
(function(e,k){(function(d){for(var h=0;h<d.length;h++)(function(b){e[b]=function(b,d,e){return this instanceof arguments.callee?(this._a=b,this._b=d,this._c=e,this):new arguments.callee(b,d,e)};e.fn[b]=function(d,h,k){d=e[b](d,h,k);return d.data=this,d};e[b].prototype.sample=function(d){var h=this._a,k=this._b,n=this._c;return d?e.alter(d,function(){return e[b].sample(h,k,n)}):e[b].sample(h,k,n)};(function(d){for(var h=0;h<d.length;h++)(function(d){e[b].prototype[d]=function(g){var h=this._a,k=this._b,
m=this._c;return!g&&0!==g&&(g=this.data),"number"!=typeof g?e.fn.map.call(g,function(g){return e[b][d](g,h,k,m)}):e[b][d](g,h,k,m)}})(d[h])})(["pdf","cdf","inv"]);(function(d){for(var h=0;h<d.length;h++)(function(d){e[b].prototype[d]=function(){return e[b][d](this._a,this._b,this._c)}})(d[h])})(["mean","median","mode","variance"])})(d[h])})("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy lognormal normal pareto studentt weibull uniform  binomial negbin hypgeom poisson triangular".split(" "));
e.extend(e.beta,{pdf:function(d,h,b){return 1<d||0>d?0:1==h&&1==b?1:512>h||512>b?k.pow(d,h-1)*k.pow(1-d,b-1)/e.betafn(h,b):k.exp((h-1)*k.log(d)+(b-1)*k.log(1-d)-e.betaln(h,b))},cdf:function(d,h,b){return 1<d||0>d?1*(1<d):e.ibeta(d,h,b)},inv:function(d,h,b){return e.ibetainv(d,h,b)},mean:function(d,e){return d/(d+e)},median:function(d,e){throw Error("median not yet implemented");},mode:function(d,e){return d*e/(k.pow(d+e,2)*(d+e+1))},sample:function(d,h){var b=e.randg(d);return b/(b+e.randg(h))},variance:function(d,
e){return d*e/(k.pow(d+e,2)*(d+e+1))}});e.extend(e.centralF,{pdf:function(d,h,b){return 0>d?void 0:k.sqrt(k.pow(h*d,h)*k.pow(b,b)/k.pow(h*d+b,h+b))/(d*e.betafn(h/2,b/2))},cdf:function(d,h,b){return e.ibeta(h*d/(h*d+b),h/2,b/2)},inv:function(d,h,b){return b/(h*(1/e.ibetainv(d,h/2,b/2)-1))},mean:function(d,e){return 2<e?e/(e-2):void 0},mode:function(d,e){return 2<d?e*(d-2)/(d*(e+2)):void 0},sample:function(d,h){var b=2*e.randg(d/2),g=2*e.randg(h/2);return b/d/(g/h)},variance:function(d,e){return 4>=
e?void 0:2*e*e*(d+e-2)/(d*(e-2)*(e-2)*(e-4))}});e.extend(e.cauchy,{pdf:function(d,e,b){return b/(k.pow(d-e,2)+k.pow(b,2))/k.PI},cdf:function(d,e,b){return k.atan((d-e)/b)/k.PI+.5},inv:function(d,e,b){return e+b*k.tan(k.PI*(d-.5))},median:function(d,e){return d},mode:function(d,e){return d},sample:function(d,h){return e.randn()*k.sqrt(1/(2*e.randg(.5)))*h+d}});e.extend(e.chisquare,{pdf:function(d,h){return k.exp((h/2-1)*k.log(d)-d/2-h/2*k.log(2)-e.gammaln(h/2))},cdf:function(d,h){return e.gammap(h/
2,d/2)},inv:function(d,h){return 2*e.gammapinv(d,.5*h)},mean:function(d){return d},median:function(d){return d*k.pow(1-2/(9*d),3)},mode:function(d){return 0<d-2?d-2:0},sample:function(d){return 2*e.randg(d/2)},variance:function(d){return 2*d}});e.extend(e.exponential,{pdf:function(d,e){return 0>d?0:e*k.exp(-e*d)},cdf:function(d,e){return 0>d?0:1-k.exp(-e*d)},inv:function(d,e){return-k.log(1-d)/e},mean:function(d){return 1/d},median:function(d){return 1/d*k.log(2)},mode:function(d){return 0},sample:function(d){return-1/
d*k.log(k.random())},variance:function(d){return k.pow(d,-2)}});e.extend(e.gamma,{pdf:function(d,h,b){return k.exp((h-1)*k.log(d)-d/b-e.gammaln(h)-h*k.log(b))},cdf:function(d,h,b){return e.gammap(h,d/b)},inv:function(d,h,b){return e.gammapinv(d,h)*b},mean:function(d,e){return d*e},mode:function(d,e){return 1<d?(d-1)*e:void 0},sample:function(d,h){return e.randg(d)*h},variance:function(d,e){return d*e*e}});e.extend(e.invgamma,{pdf:function(d,h,b){return k.exp(-(h+1)*k.log(d)-b/d-e.gammaln(h)+h*k.log(b))},
cdf:function(d,h,b){return 1-e.gammap(h,b/d)},inv:function(d,h,b){return b/e.gammapinv(1-d,h)},mean:function(d,e){return 1<d?e/(d-1):void 0},mode:function(d,e){return e/(d+1)},sample:function(d,h){return h/e.randg(d)},variance:function(d,e){return 2>=d?void 0:e*e/((d-1)*(d-1)*(d-2))}});e.extend(e.kumaraswamy,{pdf:function(d,e,b){return k.exp(k.log(e)+k.log(b)+(e-1)*k.log(d)+(b-1)*k.log(1-k.pow(d,e)))},cdf:function(d,e,b){return 1-k.pow(1-k.pow(d,e),b)},mean:function(d,h){return h*e.gammafn(1+1/d)*
e.gammafn(h)/e.gammafn(1+1/d+h)},median:function(d,e){return k.pow(1-k.pow(2,-1/e),1/d)},mode:function(d,e){return 1<=d&&1<=e&&1!==d&&1!==e?k.pow((d-1)/(d*e-1),1/d):void 0},variance:function(d,e){throw Error("variance not yet implemented");}});e.extend(e.lognormal,{pdf:function(d,e,b){return k.exp(-k.log(d)-.5*k.log(2*k.PI)-k.log(b)-k.pow(k.log(d)-e,2)/(2*b*b))},cdf:function(d,h,b){return.5+.5*e.erf((k.log(d)-h)/k.sqrt(2*b*b))},inv:function(d,h,b){return k.exp(-1.4142135623730951*b*e.erfcinv(2*d)+
h)},mean:function(d,e){return k.exp(d+e*e/2)},median:function(d,e){return k.exp(d)},mode:function(d,e){return k.exp(d-e*e)},sample:function(d,h){return k.exp(e.randn()*h+d)},variance:function(d,e){return(k.exp(e*e)-1)*k.exp(2*d+e*e)}});e.extend(e.normal,{pdf:function(d,e,b){return k.exp(-.5*k.log(2*k.PI)-k.log(b)-k.pow(d-e,2)/(2*b*b))},cdf:function(d,h,b){return.5*(1+e.erf((d-h)/k.sqrt(2*b*b)))},inv:function(d,h,b){return-1.4142135623730951*b*e.erfcinv(2*d)+h},mean:function(d,e){return d},median:function(d,
e){return d},mode:function(d,e){return d},sample:function(d,h){return e.randn()*h+d},variance:function(d,e){return e*e}});e.extend(e.pareto,{pdf:function(d,e,b){return d<=e?void 0:b*k.pow(e,b)/k.pow(d,b+1)},cdf:function(d,e,b){return 1-k.pow(e/d,b)},mean:function(d,e){return 1>=e?void 0:e*k.pow(d,e)/(e-1)},median:function(d,e){return d*e*k.SQRT2},mode:function(d,e){return d},variance:function(d,e){return 2>=e?void 0:d*d*e/(k.pow(e-1,2)*(e-2))}});e.extend(e.studentt,{pdf:function(d,h){return e.gammafn((h+
1)/2)/(k.sqrt(h*k.PI)*e.gammafn(h/2))*k.pow(1+d*d/h,-((h+1)/2))},cdf:function(d,h){var b=h/2;return e.ibeta((d+k.sqrt(d*d+h))/(2*k.sqrt(d*d+h)),b,b)},inv:function(d,h){var b=e.ibetainv(2*k.min(d,1-d),.5*h,.5);return b=k.sqrt(h*(1-b)/b),.5<d?b:-b},mean:function(d){return 1<d?0:void 0},median:function(d){return 0},mode:function(d){return 0},sample:function(d){return e.randn()*k.sqrt(d/(2*e.randg(d/2)))},variance:function(d){return 2<d?d/(d-2):1<d?Infinity:void 0}});e.extend(e.weibull,{pdf:function(d,
e,b){return 0>d?0:b/e*k.pow(d/e,b-1)*k.exp(-k.pow(d/e,b))},cdf:function(d,e,b){return 0>d?0:1-k.exp(-k.pow(d/e,b))},inv:function(d,e,b){return e*k.pow(-k.log(1-d),1/b)},mean:function(d,h){return d*e.gammafn(1+1/h)},median:function(d,e){return d*k.pow(k.log(2),1/e)},mode:function(d,e){return 1>=e?void 0:d*k.pow((e-1)/e,1/e)},sample:function(d,e){return d*k.pow(-k.log(k.random()),1/e)},variance:function(d,h){return d*d*e.gammafn(1+2/h)-k.pow(this.mean(d,h),2)}});e.extend(e.uniform,{pdf:function(d,e,
b){return d<e||d>b?0:1/(b-e)},cdf:function(d,e,b){return d<e?0:d<b?(d-e)/(b-e):1},mean:function(d,e){return.5*(d+e)},median:function(d,h){return e.mean(d,h)},mode:function(d,e){throw Error("mode is not yet implemented");},sample:function(d,e){return d/2+e/2+(e/2-d/2)*(2*k.random()-1)},variance:function(d,e){return k.pow(e-d,2)/12}});e.extend(e.binomial,{pdf:function(d,h,b){return 0===b||1===b?h*b===d?1:0:e.combination(h,d)*k.pow(b,d)*k.pow(1-b,h-d)},cdf:function(d,h,b){var g=[],k=0;if(0>d)return 0;
if(d<h){for(;k<=d;k++)g[k]=e.binomial.pdf(k,h,b);return e.sum(g)}return 1}});e.extend(e.negbin,{pdf:function(d,h,b){return d!==d|0?!1:0>d?0:e.combination(d+h-1,h-1)*k.pow(1-b,d)*k.pow(b,h)},cdf:function(d,h,b){var g=0,k=0;if(0>d)return 0;for(;k<=d;k++)g+=e.negbin.pdf(k,h,b);return g}});e.extend(e.hypgeom,{pdf:function(d,h,b,g){if(d!==d|0)return!1;if(0>d||d<b-(h-g)||d>g||d>b)return 0;if(2*b>h)return 2*g>h?e.hypgeom.pdf(h-b-g+d,h,h-b,h-g):e.hypgeom.pdf(g-d,h,h-b,g);if(2*g>h)return e.hypgeom.pdf(b-d,
h,b,h-g);if(b<g)return e.hypgeom.pdf(d,h,g,b);for(var m=1,p=0,n=0;n<d;n++){for(;1<m&&p<g;)m*=1-b/(h-p),p++;m*=(g-n)*(b-n)/((n+1)*(h-b-g+n+1))}for(;p<g;p++)m*=1-b/(h-p);return k.min(1,k.max(0,m))},cdf:function(d,h,b,g){if(0>d||d<b-(h-g))return 0;if(d>=g||d>=b)return 1;if(2*b>h)return 2*g>h?e.hypgeom.cdf(h-b-g+d,h,h-b,h-g):1-e.hypgeom.cdf(g-d-1,h,h-b,g);if(2*g>h)return 1-e.hypgeom.cdf(b-d-1,h,b,h-g);if(b<g)return e.hypgeom.cdf(d,h,g,b);for(var m=1,p=1,n=0,q=0;q<d;q++){for(;1<m&&n<g;){var r=1-b/(h-n),
p=p*r,m=m*r;n++}p*=(g-q)*(b-q)/((q+1)*(h-b-g+q+1));m+=p}for(;n<g;n++)m*=1-b/(h-n);return k.min(1,k.max(0,m))}});e.extend(e.poisson,{pdf:function(d,h){return k.pow(h,d)*k.exp(-h)/e.factorial(d)},cdf:function(d,h){var b=[],g=0;if(0>d)return 0;for(;g<=d;g++)b.push(e.poisson.pdf(g,h));return e.sum(b)},mean:function(d){return d},variance:function(d){return d},sample:function(d){var e=1,b=0;d=k.exp(-d);do b++,e*=k.random();while(e>d);return b-1}});e.extend(e.triangular,{pdf:function(d,e,b,g){return b<=
e||g<e||g>b?void 0:d<e||d>b?0:d<=g?2*(d-e)/((b-e)*(g-e)):2*(b-d)/((b-e)*(b-g))},cdf:function(d,e,b,g){return b<=e||g<e||g>b?void 0:d<e?0:d<=g?k.pow(d-e,2)/((b-e)*(g-e)):1-k.pow(b-d,2)/((b-e)*(b-g))},mean:function(d,e,b){return(d+e+b)/3},median:function(d,e,b){if(b<=(d+e)/2)return e-k.sqrt((e-d)*(e-b))/k.sqrt(2);if(b>(d+e)/2)return d+k.sqrt((e-d)*(b-d))/k.sqrt(2)},mode:function(d,e,b){return b},sample:function(d,e,b){var g=k.random();return g<(b-d)/(e-d)?d+k.sqrt(g*(e-d)*(b-d)):e-k.sqrt((1-g)*(e-d)*
(e-b))},variance:function(d,e,b){return(d*d+e*e+b*b-d*e-d*b-e*b)/18}})})(this.jStat,Math);
(function(e,k){var d=Array.prototype.push,h=e.utils.isArray;e.extend({add:function(b,d){return h(d)?(h(d[0])||(d=[d]),e.map(b,function(b,e,h){return b+d[e][h]})):e.map(b,function(b){return b+d})},subtract:function(b,d){return h(d)?(h(d[0])||(d=[d]),e.map(b,function(b,e,h){return b-d[e][h]||0})):e.map(b,function(b){return b-d})},divide:function(b,d){return h(d)?(h(d[0])||(d=[d]),e.multiply(b,e.inv(d))):e.map(b,function(b){return b/d})},multiply:function(b,d){var k,p,n,q,r=b.length,t=b[0].length,x=
e.zeros(r,n=h(d)?d[0].length:t),v=0;if(h(d)){for(;v<n;v++)for(k=0;k<r;k++){for(p=q=0;p<t;p++)q+=b[k][p]*d[p][v];x[k][v]=q}return 1===r&&1===v?x[0][0]:x}return e.map(b,function(b){return b*d})},dot:function(b,d){h(b[0])||(b=[b]);h(d[0])||(d=[d]);for(var k=1===b[0].length&&1!==b.length?e.transpose(b):b,p=1===d[0].length&&1!==d.length?e.transpose(d):d,n=[],q=0,r=k.length,t=k[0].length,x,v;q<r;q++){n[q]=[];for(v=x=0;v<t;v++)x+=k[q][v]*p[q][v];n[q]=x}return 1===n.length?n[0]:n},pow:function(b,d){return e.map(b,
function(b){return k.pow(b,d)})},abs:function(b){return e.map(b,function(b){return k.abs(b)})},norm:function(b,d){var e=0,p=0;isNaN(d)&&(d=2);for(h(b[0])&&(b=b[0]);p<b.length;p++)e+=k.pow(k.abs(b[p]),d);return k.pow(e,1/d)},angle:function(b,d){return k.acos(e.dot(b,d)/(e.norm(b)*e.norm(d)))},aug:function(b,e){for(var h=b.slice(),k=0;k<h.length;k++)d.apply(h[k],e[k]);return h},inv:function(b){var d=b.length,h=b[0].length,k=e.identity(d,h);b=e.gauss_jordan(b,k);for(var k=[],n=0,q;n<d;n++)for(k[n]=[],
q=h-1;q<b[0].length;q++)k[n][q-h]=b[n][q];return k},det:function(b){var d=b.length,e=2*d,h=Array(e),k=d-1,q=e-1,r=k-d+1,t=q,x=0,v=0,w;if(2===d)return b[0][0]*b[1][1]-b[0][1]*b[1][0];for(;x<e;x++)h[x]=1;for(x=0;x<d;x++){for(w=0;w<d;w++)h[0>r?r+d:r]*=b[x][w],h[t<d?t+d:t]*=b[x][w],r++,t--;r=--k-d+1;t=--q}for(x=0;x<d;x++)v+=h[x];for(;x<e;x++)v-=h[x];return v},gauss_elimination:function(b,d){var h=0,p=0,n=b.length,q=b[0].length,r=1,t=0,x=[],v;b=e.aug(b,d);for(v=b[0].length;h<n;h++){r=b[h][h];p=h;for(t=
h+1;t<q;t++)r<k.abs(b[t][h])&&(r=b[t][h],p=t);if(p!=h)for(t=0;t<v;t++)r=b[h][t],b[h][t]=b[p][t],b[p][t]=r;for(p=h+1;p<n;p++)for(r=b[p][h]/b[h][h],t=h;t<v;t++)b[p][t]-=r*b[h][t]}for(h=n-1;0<=h;h--){t=0;for(p=h+1;p<=n-1;p++)t=x[p]*b[h][p];x[h]=(b[h][v-1]-t)/b[h][h]}return x},gauss_jordan:function(b,d){for(var h=e.aug(b,d),p=h.length,n=h[0].length,q=0;q<p;q++){for(var r=q,t=q+1;t<p;t++)k.abs(h[t][q])>k.abs(h[r][q])&&(r=t);t=h[q];h[q]=h[r];h[r]=t;for(t=q+1;t<p;t++)for(c=h[t][q]/h[q][q],r=q;r<n;r++)h[t][r]-=
h[q][r]*c}for(q=p-1;0<=q;q--){c=h[q][q];for(t=0;t<q;t++)for(r=n-1;r>q-1;r--)h[t][r]-=h[q][r]*h[t][q]/c;h[q][q]/=c;for(r=p;r<n;r++)h[q][r]/=c}return h},lu:function(b,d){throw Error("lu not yet implemented");},cholesky:function(b,d){throw Error("cholesky not yet implemented");},gauss_jacobi:function(b,d,h,p){for(var n=0,q=0,r=b.length,t=[],x=[],v=[];n<r;n++)for(t[n]=[],x[n]=[],v[n]=[],q=0;q<r;q++)n>q?(t[n][q]=b[n][q],x[n][q]=v[n][q]=0):n<q?(x[n][q]=b[n][q],t[n][q]=v[n][q]=0):(v[n][q]=b[n][q],t[n][q]=
x[n][q]=0);b=e.multiply(e.multiply(e.inv(v),e.add(t,x)),-1);v=e.multiply(e.inv(v),d);d=h;h=e.add(e.multiply(b,h),v);for(n=2;k.abs(e.norm(e.subtract(h,d)))>p;)d=h,h=e.add(e.multiply(b,d),v),n++;return h},gauss_seidel:function(b,d,h,p){for(var n=0,q=b.length,r=[],t=[],x=[],v;n<q;n++)for(r[n]=[],t[n]=[],x[n]=[],v=0;v<q;v++)n>v?(r[n][v]=b[n][v],t[n][v]=x[n][v]=0):n<v?(t[n][v]=b[n][v],r[n][v]=x[n][v]=0):(x[n][v]=b[n][v],r[n][v]=t[n][v]=0);b=e.multiply(e.multiply(e.inv(e.add(x,r)),t),-1);r=e.multiply(e.inv(e.add(x,
r)),d);d=h;h=e.add(e.multiply(b,h),r);for(n=2;k.abs(e.norm(e.subtract(h,d)))>p;)d=h,h=e.add(e.multiply(b,d),r),n+=1;return h},SOR:function(b,d,h,p,n){for(var q=0,r=b.length,t=[],x=[],v=[],w;q<r;q++)for(t[q]=[],x[q]=[],v[q]=[],w=0;w<r;w++)q>w?(t[q][w]=b[q][w],x[q][w]=v[q][w]=0):q<w?(x[q][w]=b[q][w],t[q][w]=v[q][w]=0):(v[q][w]=b[q][w],t[q][w]=x[q][w]=0);b=e.multiply(e.inv(e.add(v,e.multiply(t,n))),e.subtract(e.multiply(v,1-n),e.multiply(x,n)));n=e.multiply(e.multiply(e.inv(e.add(v,e.multiply(t,n))),
d),n);d=h;h=e.add(e.multiply(b,h),n);for(q=2;k.abs(e.norm(e.subtract(h,d)))>p;)d=h,h=e.add(e.multiply(b,d),n),q++;return h},householder:function(b){for(var d=b.length,h=b[0].length,p=0,n=[],q=[],r;p<d-1;p++){q=0;for(n=p+1;n<h;n++)q+=b[n][p]*b[n][p];n=0<b[p+1][p]?-1:1;q=n*k.sqrt(q);r=k.sqrt((q*q-b[p+1][p]*q)/2);n=e.zeros(d,1);n[p+1][0]=(b[p+1][p]-q)/(2*r);for(q=p+2;q<d;q++)n[q][0]=b[q][p]/(2*r);q=e.subtract(e.identity(d,h),e.multiply(e.multiply(n,e.transpose(n)),2));b=e.multiply(q,e.multiply(b,q))}return b},
QR:function(b,d){for(var h=b.length,p=b[0].length,n=0,q=[],r=[],t=[],x;n<h-1;n++){r=0;for(q=n+1;q<p;q++)r+=b[q][n]*b[q][n];q=0<b[n+1][n]?-1:1;r=q*k.sqrt(r);x=k.sqrt((r*r-b[n+1][n]*r)/2);q=e.zeros(h,1);q[n+1][0]=(b[n+1][n]-r)/(2*x);for(r=n+2;r<h;r++)q[r][0]=b[r][n]/(2*x);r=e.subtract(e.identity(h,p),e.multiply(e.multiply(q,e.transpose(q)),2));b=e.multiply(r,b);d=e.multiply(r,d)}for(n=h-1;0<=n;n--){for(q=n+1;q<=p-1;q++);t[n]=d[n][0]/b[n][n]}return t},jacobi:function(b){for(var d=1,h=0,p=b.length,n=
e.identity(p,p),q=[],r,t,x,v,w;1===d;){h++;v=b[0][1];d=0;x=1;for(r=0;r<p;r++)for(t=0;t<p;t++)r!=t&&v<k.abs(b[r][t])&&(v=k.abs(b[r][t]),d=r,x=t);b[d][d]===b[x][x]?w=0<b[d][x]?k.PI/4:-k.PI/4:w=k.atan(2*b[d][x]/(b[d][d]-b[x][x]))/2;r=e.identity(p,p);r[d][d]=k.cos(w);r[d][x]=-k.sin(w);r[x][d]=k.sin(w);r[x][x]=k.cos(w);n=e.multiply(n,r);b=e.multiply(e.multiply(e.inv(r),b),r);d=0;for(r=1;r<p;r++)for(t=1;t<p;t++)r!=t&&.001<k.abs(b[r][t])&&(d=1)}for(r=0;r<p;r++)q.push(b[r][r]);return[n,q]},rungekutta:function(b,
d,e,h,k,q){var r,t,x;if(2===q)for(;h<=e;)r=d*b(h,k),t=d*b(h+d,k+r),k+=(r+t)/2,h+=d;if(4===q)for(;h<=e;)r=d*b(h,k),t=d*b(h+d/2,k+r/2),q=d*b(h+d/2,k+t/2),x=d*b(h+d,k+q),k+=(r+2*t+2*q+x)/6,h+=d;return k},romberg:function(b,d,e,h){for(var n=0,q=(e-d)/2,r=[],t=[],x=[],v,w,y;n<h/2;){y=b(d);w=d;for(v=0;w<=e;w+=q,v++)r[v]=w;v=r.length;for(w=1;w<v-1;w++)y+=(0!==w%2?4:2)*b(r[w]);y=q/3*(y+b(e));x[n]=y;q/=2;n++}b=x.length;for(v=1;1!==b;){for(w=0;w<b-1;w++)t[w]=(k.pow(4,v)*x[w+1]-x[w])/(k.pow(4,v)-1);b=t.length;
x=t;t=[];v++}return x},richardson:function(b,d,e,h){function n(b,d){for(var e=0,g=b.length,h;e<g;e++)b[e]===d&&(h=e);return h}for(var q=k.abs(e-b[n(b,e)+1]),r=0,t=[],x=[],v,w;h>=q;)v=n(b,e+h),w=n(b,e),t[r]=(d[v]-2*d[w]+d[2*w-v])/(h*h),h/=2,r++;d=t.length;for(b=1;1!=d;){for(e=0;e<d-1;e++)x[e]=(k.pow(4,b)*t[e+1]-t[e])/(k.pow(4,b)-1);d=x.length;t=x;x=[];b++}return t},simpson:function(b,d,e,h){h=(e-d)/h;var k=b(d),q=[],r=d,t=0;for(d=1;r<=e;r+=h,t++)q[t]=r;for(r=q.length;d<r-1;d++)k+=(0!==d%2?4:2)*b(q[d]);
return h/3*(k+b(e))},hermite:function(b,d,e,h){for(var k=b.length,q=0,r=0,t=[],x=[],v=[],w=[],y;r<k;r++){t[r]=1;for(y=0;y<k;y++)r!=y&&(t[r]*=(h-b[y])/(b[r]-b[y]));for(y=x[r]=0;y<k;y++)r!=y&&(x[r]+=1/(b[r]-b[y]));v[r]=(1-2*(h-b[r])*x[r])*t[r]*t[r];w[r]=(h-b[r])*t[r]*t[r];q+=v[r]*d[r]+w[r]*e[r]}return q},lagrange:function(b,d,e){for(var h=0,k=0,q,r,t=b.length;k<t;k++){r=d[k];for(q=0;q<t;q++)k!=q&&(r*=(e-b[q])/(b[k]-b[q]));h+=r}return h},cubic_spline:function(b,d,h){for(var k=b.length,n=0,q=[],r=[],
t=[],x=[],v=[],w=[],y=[];n<k-1;n++)v[n]=b[n+1]-b[n];t[0]=0;for(n=1;n<k-1;n++)t[n]=3/v[n]*(d[n+1]-d[n])-3/v[n-1]*(d[n]-d[n-1]);for(n=1;n<k-1;n++)q[n]=[],r[n]=[],q[n][n-1]=v[n-1],q[n][n]=2*(v[n-1]+v[n]),q[n][n+1]=v[n],r[n][0]=t[n];x=e.multiply(e.inv(q),r);for(n=0;n<k-1;n++)w[n]=(d[n+1]-d[n])/v[n]-v[n]*(x[n+1][0]+2*x[n][0])/3,y[n]=(x[n+1][0]-x[n][0])/(3*v[n]);for(n=0;n<k&&!(b[n]>h);n++);return n-=1,d[n]+(h-b[n])*w[n]+e.sq(h-b[n])*x[n]+(h-b[n])*e.sq(h-b[n])*y[n]},gauss_quadrature:function(){throw Error("gauss_quadrature not yet implemented");
},PCA:function(b){var d=b.length,h=b[0].length,k=0,n,q,r=[],t=[];n=[];for(var x=[],v=[],w=[],w=[],t=[],k=[],y=[],k=0;k<d;k++)r[k]=e.sum(b[k])/h;for(k=0;k<h;k++)for(w[k]=[],n=0;n<d;n++)w[k][n]=b[n][k]-r[n];w=e.transpose(w);for(k=0;k<d;k++)for(t[k]=[],n=0;n<d;n++)t[k][n]=e.dot([w[k]],[w[n]])/(h-1);n=e.jacobi(t);k=n[0];t=n[1];y=e.transpose(k);for(k=0;k<t.length;k++)for(n=k;n<t.length;n++)t[k]<t[n]&&(q=t[k],t[k]=t[n],t[n]=q,x=y[k],y[k]=y[n],y[n]=x);w=e.transpose(w);for(k=0;k<d;k++)for(v[k]=[],n=0;n<w.length;n++)v[k][n]=
e.dot([y[k]],[w[n]]);return[b,t,y,v]}});(function(b){for(var d=0;d<b.length;d++)(function(b){e.fn[b]=function(d,g){var h=this;return g?(setTimeout(function(){g.call(h,e.fn[b].call(h,d))},15),this):"number"==typeof e[b](this,d)?e[b](this,d):e(e[b](this,d))}})(b[d])})("add divide multiply subtract dot pow abs norm angle".split(" "))})(this.jStat,Math);
(function(e,k){var d=[].slice,h=e.utils.isNumber;e.extend({zscore:function(){var b=d.call(arguments);return h(b[1])?(b[0]-b[1])/b[2]:(b[0]-e.mean(b[1]))/e.stdev(b[1],b[2])},ztest:function(){var b=d.call(arguments);if(4===b.length){if(h(b[1])){var g=e.zscore(b[0],b[1],b[2]);return 1===b[3]?e.normal.cdf(-k.abs(g),0,1):2*e.normal.cdf(-k.abs(g),0,1)}g=b[0];return 1===b[2]?e.normal.cdf(-k.abs(g),0,1):2*e.normal.cdf(-k.abs(g),0,1)}g=e.zscore(b[0],b[1],b[3]);return 1===b[1]?e.normal.cdf(-k.abs(g),0,1):2*
e.normal.cdf(-k.abs(g),0,1)}});e.extend(e.fn,{zscore:function(b,d){return(b-this.mean())/this.stdev(d)},ztest:function(b,d,h){b=k.abs(this.zscore(b,h));return 1===d?e.normal.cdf(-b,0,1):2*e.normal.cdf(-b,0,1)}});e.extend({tscore:function(){var b=d.call(arguments);return 4===b.length?(b[0]-b[1])/(b[2]/k.sqrt(b[3])):(b[0]-e.mean(b[1]))/(e.stdev(b[1],!0)/k.sqrt(b[1].length))},ttest:function(){var b=d.call(arguments),g;return 5===b.length?(g=k.abs(e.tscore(b[0],b[1],b[2],b[3])),1===b[4]?e.studentt.cdf(-g,
b[3]-1):2*e.studentt.cdf(-g,b[3]-1)):h(b[1])?(g=k.abs(b[0]),1==b[2]?e.studentt.cdf(-g,b[1]-1):2*e.studentt.cdf(-g,b[1]-1)):(g=k.abs(e.tscore(b[0],b[1])),1==b[2]?e.studentt.cdf(-g,b[1].length-1):2*e.studentt.cdf(-g,b[1].length-1))}});e.extend(e.fn,{tscore:function(b){return(b-this.mean())/(this.stdev(!0)/k.sqrt(this.cols()))},ttest:function(b,d){return 1===d?1-e.studentt.cdf(k.abs(this.tscore(b)),this.cols()-1):2*e.studentt.cdf(-k.abs(this.tscore(b)),this.cols()-1)}});e.extend({anovafscore:function(){var b=
d.call(arguments),g,h,p,n,q,r;if(1===b.length){g=Array(b[0].length);for(q=0;q<b[0].length;q++)g[q]=b[0][q];b=g}if(2===b.length)return e.variance(b[0])/e.variance(b[1]);h=[];for(q=0;q<b.length;q++)h=h.concat(b[q]);p=e.mean(h);for(q=g=0;q<b.length;q++)g+=b[q].length*k.pow(e.mean(b[q])-p,2);g/=b.length-1;for(q=n=0;q<b.length;q++)for(p=e.mean(b[q]),r=0;r<b[q].length;r++)n+=k.pow(b[q][r]-p,2);return n/=h.length-b.length,g/n},anovaftest:function(){var b=d.call(arguments),g,k,p,n;if(h(b[0]))return 1-e.centralF.cdf(b[0],
b[1],b[2]);anovafscore=e.anovafscore(b);g=b.length-1;for(n=p=0;n<b.length;n++)p+=b[n].length;return k=p-g-1,1-e.centralF.cdf(anovafscore,g,k)},ftest:function(b,d,h){return 1-e.centralF.cdf(b,d,h)}});e.extend(e.fn,{anovafscore:function(){return e.anovafscore(this.toArray())},anovaftes:function(){var b=0,d;for(d=0;d<this.length;d++)b+=this[d].length;return e.ftest(this.anovafscore(),this.length-1,b-this.length)}});e.extend({normalci:function(){var b=d.call(arguments),g=Array(2),h;return 4===b.length?
h=k.abs(e.normal.inv(b[1]/2,0,1)*b[2]/k.sqrt(b[3])):h=k.abs(e.normal.inv(b[1]/2,0,1)*e.stdev(b[2])/k.sqrt(b[2].length)),g[0]=b[0]-h,g[1]=b[0]+h,g},tci:function(){var b=d.call(arguments),g=Array(2),h;return 4===b.length?h=k.abs(e.studentt.inv(b[1]/2,b[3]-1)*b[2]/k.sqrt(b[3])):h=k.abs(e.studentt.inv(b[1]/2,b[2].length-1)*e.stdev(b[2],!0)/k.sqrt(b[2].length)),g[0]=b[0]-h,g[1]=b[0]+h,g},significant:function(b,d){return b<d}});e.extend(e.fn,{normalci:function(b,d){return e.normalci(b,d,this.toArray())},
tci:function(b,d){return e.tci(b,d,this.toArray())}})})(this.jStat,Math);svgNamespaceUri="http://www.w3.org/2000/svg";xlinkUri="http://www.w3.org/1999/xlink";hasOwnProperty=function(e,k){var d=e.__proto__||e.constructor.prototype;return k in e&&(!(k in d)||d[k]!==e[k])};isObjInArray=function(e,k){var d=!1;0<=e.indexOf(k)&&(d=!0);return d};getKeys=function(e){var k=[],d;for(d in e)k.push(d);return k};eliminateDuplicates=function(e){var k,d=e.length,h=[],b={};for(k=0;k<d;k++)b[e[k]]=0;for(k in b)h.push(k);return h};
keepReplicates=function(e,k,d){for(var h={},b=0;b<e.length;b++){var g=e[b];g in h||(h[g]=0);h[g]++}k=null==k?2:k;e=[];for(g in h)null!=d&&d?h[g]<k&&e.push(g):h[g]>=k&&e.push(g);return e};beginsWith=function(e,k){return 0===e.indexOf(k)};endsWith=function(e,k){return-1!==e.indexOf(k,e.length-k.length)};isNumerical=function(e){return null==e||""===e||isNaN(e)?!1:!0};getListBoxSelectedValues=function(e){for(var k=[],d=0;d<e.length;d++){var h=e[d];h.selected&&k.push(h.value)}return k};
compareAsNumeric=function(e,k){var d=parseFloat(e),h=parseFloat(k);if(isNumerical(d)&&isNumerical(h)){if(d<h)return-1;if(d>h)return 1}else if(d==d||h==h){if(d!=d)return-1;if(h!=h)return 1}return 0};compareAsString=function(e,k){var d=new String(e),h=new String(k);return"null"==d&&"null"!=h?-1:"null"!=d&&"null"==h?1:d.localeCompare(h)};compareAsDate=function(e,k){var d=e,h=k;null==d?d="1000":""==d&&(d="1001");null==h?h="1000":""==h&&(h="1001");return new Date(d)-new Date(h)};
centeredRgbaColorMapper=function(e,k,d,h){var b=null,g=null==k?0:k,m=null==d?-1.96:d,p=null==h?1.96:h;return b=function(b){var d=1,h=169,k=169,x=169;b=parseFloat(b);null!=b&&b==b&&(b>g?(h=255,x=k=0,b>p?d=1:(d=(b-g)/(p-g),d=Math.abs(d),e&&(d=Math.log(d)))):b<g?(k=h=0,x=255,b<m?d=1:(d=(b-g)/(m-g),d=Math.abs(d),e&&(d=Math.log(d)))):(x=k=h=255,d=1));return"rgba("+h+","+k+","+x+","+d+")"}};
setupQuantileColorMapper=function(e,k){var d=k;null==d&&(d="rgb(255,255,217) rgb(237,248,177) rgb(199,233,180) rgb(127,205,187) rgb(65,182,196) rgb(29,145,192) rgb(34,94,168) rgb(37,52,148) rgb(8,29,88)".split(" "));var h=d.length;return d3.scale.quantile().domain([0,h-1,d3.max(e,function(b){return parseFloat(b)})]).range(d)};getXmlDom_url=function(e){xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");xmlhttp.open("GET",e,!1);xmlhttp.send();return xmlDoc=xmlhttp.responseXML};
getXmlDom_string=function(e){window.DOMParser?(parser=new DOMParser,xmlDoc=parser.parseFromString(e,"text/xml")):(xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),xmlDoc.async=!1,xmlDoc.loadXML(e));return xmlDoc};
getDateTime=function(){var e=new Date,k=e.getFullYear(),d=e.getMonth()+1,h=e.getDate(),b=e.getHours(),g=e.getMinutes(),e=e.getSeconds();1==d.toString().length&&(d="0"+d);1==h.toString().length&&(h="0"+h);1==b.toString().length&&(b="0"+b);1==g.toString().length&&(g="0"+g);1==e.toString().length&&(e="0"+e);return k+"/"+d+"/"+h+" "+b+":"+g+":"+e};
todaysDate=function(){var e=new Date,k=e.getDate();e.getDay();var d=e.getMonth()+1,e=e.getYear();return[,"January","February","March","April","May","June","July","August","September","October","November","December"][d]+" "+k+", "+(1E3>e?e+1900:e)};createDivElement=function(e,k){var d=document.createElement("div");null!=e&&(d.id=e);null!=k&&(d.className=k);return d};
swapContainingDivs=function(e,k){var d=k.parentNode;document.getElementById("#"+e.parentNode.id).appendChild(k);document.getElementById("#"+d.id).appendChild(e)};lengthOfLongestString=function(e){var k=[],d;for(d in e)k.push(e[d].length);return Math.max.apply(null,k)};simpleAsyncGet=function(e,k){var d=new XMLHttpRequest;d.onreadystatechange=function(){this.readyState===(this.DONE||4)&&k(d.responseText)};d.open("GET",e,!0);d.setRequestHeader("X-Requested-With","XMLHttpRequest");d.send(null)};
getResponse=function(e){var k=null,d=null,d=new XMLHttpRequest;d.open("GET",e,!1);d.onload=function(){k=d.status;200!=k&&console.log("xhr status: "+k+" for "+e)};d.send(null);var h=null;200==k&&(h=d.responseText);return h};loadNewSettings=function(e){e=window.location.pathname+"?query="+JSON.stringify(e);window.open(e,"_self")};getQueryObj=function(){var e={};location.search.slice(1).split("&").forEach(function(k){k=k.split("=");e[k[0]]=decodeURIComponent(k[1])||""});return e};
getQueryStringParameterByName=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");e=(new RegExp("[\\?&]"+e+"=([^&#]*)")).exec(location.search);return null==e?"":decodeURIComponent(e[1].replace(/\+/g," "))};parseJson=function(e){return JSON.parse(e)};serializeJson=function(e,k){return k?JSON.stringify(e,null,"\t"):JSON.stringify(e)};prettyJson=function(e){return serializeJson(e,!0)};
bottomRoundedRectSvgPath=function(e,k,d,h,b){e=""+("M"+e+","+k)+("h"+d);e+="v"+(h-b);e+="a"+b+","+b+" 0 0 1 "+-1*b+","+b;e+="h"+-1*(d-2*b);e+="a"+b+","+b+" 0 0 1 "+-1*b+","+-1*b;e+="v"+-1*(h-b);return e+="z"};allRoundedRectSvgPath=function(e,k,d,h,b){e=""+("M"+e+","+(k+b))+("a"+b+","+b+" 0 0 1 "+b+","+-1*b);e+="h"+(d-2*b);e+="a"+b+","+b+" 0 0 1 "+b+","+b;e+="v"+(h-2*b);e+="a"+b+","+b+" 0 0 1 "+-1*b+","+b;e+="h"+-1*(d-2*b);e+="a"+b+","+b+" 0 0 1 "+-1*b+","+-1*b;e+="v"+-1*(h-2*b);return e+="z"};
allAngledRectSvgPath=function(e,k,d,h){var b=d>h?d/8:h/8;e=""+("M"+(e+b)+","+k)+("h"+(d-2*b));e+="l"+b+","+b;e+="v"+(h-2*b);e+="l"+-1*b+","+b;e+="h"+-1*(d-2*b);e+="l"+-1*b+","+-1*b;e+="v"+-1*(h-2*b);return e+="z"};
createSvgRingElement=function(e,k,d,h){function b(b,d,e,g){g=(g-90)*Math.PI/180;return{x:b+e*Math.cos(g),y:d+e*Math.sin(g)}}e=function(d,e,g,h,k){var t=b(d,e,g,k);d=b(d,e,g,h);return["M",t.x,t.y,"A",g,g,0,180>=k-h?"0":"1",0,d.x,d.y].join(" ")}(e,k,d,0,359.9);k=document.createElementNS(svgNamespaceUri,"path");k.setAttributeNS(null,"d",e);if(null!=h)for(var g in h)k.setAttributeNS(null,g,h[g]);return k};
createSvgCircleElement=function(e,k,d,h){var b=document.createElementNS(svgNamespaceUri,"circle");b.setAttributeNS(null,"cx",e);b.setAttributeNS(null,"cy",k);b.setAttributeNS(null,"r",d);if(null!=h)for(var g in h)b.setAttributeNS(null,g,h[g]);return b};
createSvgRectElement=function(e,k,d,h,b,g,m){var p=document.createElementNS(svgNamespaceUri,"rect");p.setAttributeNS(null,"x",e);p.setAttributeNS(null,"y",k);p.setAttributeNS(null,"rx",d);p.setAttributeNS(null,"ry",h);p.setAttributeNS(null,"width",b);p.setAttributeNS(null,"height",g);if(null!=m)for(var n in m)p.setAttributeNS(null,n,m[n]);return p};
createSvgImageElement=function(e,k,d,h,b,g){var m=document.createElementNS(svgNamespaceUri,"image");m.setAttributeNS(xlinkUri,"href",e);m.setAttributeNS(null,"x",k);m.setAttributeNS(null,"y",d);m.setAttributeNS(null,"width",h);m.setAttributeNS(null,"height",b);if(null!=g)for(var p in g)m.setAttributeNS(null,p,g[p]);return m};setCookie=function(e,k,d){if(d){var h=new Date;h.setTime(h.getTime()+864E5*d);d="; expires="+h.toGMTString()}else d="";document.cookie=e+"="+k+d+"; path=/"};
getCookie=function(e){e+="=";for(var k=document.cookie.split(";"),d=0;d<k.length;d++){for(var h=k[d];" "==h.charAt(0);)h=h.substring(1,h.length);if(0==h.indexOf(e))return h.substring(e.length,h.length)}return null};deleteCookie=function(e){setCookie(e,"",-1)};var eventHierarchyUrl="observation_deck/data/eventHierarchy.xml";function getEventElems(e,k){var d=[];e.find("event").each(function(e,b){var g=b.getAttribute("type");void 0===k||null===k?d.push(b):g===k&&d.push(b)});return d}
function getEventParentChildren(e,k){var d={parent:null,children:[]},h=getEventElems(e,k);$(h).each(function(b,e){if("event"!==e.tagName)return"continue";d.parent=e.parentNode.getAttribute("type");$(e.children).each(function(b,e){"event"===e.tagName&&d.children.push(e.getAttribute("type"))})});return d}
function tracebackToRoot(e,k){for(var d=[],h=getEventElems(e,k),b=0;b<h.length;b++){var g=h[b],m=[];d.push(m);g=g.getAttribute("type");for(g=getEventParentChildren(e,g).parent;void 0!==g&&null!==g;)m.push(g),g=getEventParentChildren(e,g).parent}return d}
function OD_eventMetadataAlbum(){this.album={};this.addEvent=function(e,k){var d=new OD_event(e);this.album[e.id]=d;d.data.setData(k,"numeric"==e.allowedValues||"expression"==e.allowedValues);return this};this.getEventIdsByType=function(){for(var e={},k=getKeys(this.album),d=0;d<k.length;d++){var h=k[d],b=this.getEvent(h).metadata.datatype;hasOwnProperty(e,b)||(e[b]=[]);e[b].push(h)}return e};this.getEventData=function(e){for(var k={},d=getKeys(this.album),h=0;h<d.length;h++){var b=d[h],g=this.getEvent(b).data.getData(e);
k[b]=g}return k};this.getAllDataAsList=function(){for(var e=[],k=this.getEventData(),d=getKeys(k),h=0;h<d.length;h++){for(var b=d[h],g=k[b].slice(),m=0;m<g.length;m++)g[m].eventId=b;e=e.concat(g)}return e};this.getAllSampleIds=function(){for(var e=[],k=getKeys(this.album),d=0;d<k.length;d++)var h=this.getEvent(k[d]).data.getAllSampleIds(),e=e.concat(h);return eliminateDuplicates(e)};this.getEvent=function(e){return this.album[e]};this.getAllChildren=function(e,k){for(var d="undefined"===typeof k?
[]:k,h=[],b=0;b<e.length;b++)var g=this.getEvent(e[b]).metadata,h=h.concat(getKeys(g.children));if(0==h.length)return d;d=d.concat(h);return this.getAllChildren(h,d)};this.multisortSamples=function(e){var k=this.getAllSampleIds();if(null==e)return k;var d=e.getSteps().slice();d.reverse();var h=this;k.sort(function(b,e){for(var k=0,p=0;p<d.length;p++){var n=d[p].name,q=d[p].reverse,k=h.getEvent(n).metadata.allowedValues,r=h.getEvent(n).data.getData([b,e]),n=r[0].val,r=r[1].val,t=null,t="numeric"==
k?compareAsNumeric:"categoric"==k?compareAsString:"expression"==k?compareAsNumeric:"date"==k?compareAsDate:compareAsString,k=t(n,r);q&&(k*=-1);if(0!=k)break}return k});return k};this.scaledExpressionRescaling=function(){};this.zScoreExpressionRescaling=function(){console.log("zScoreExpressionRescaling");var e=this.getEventIdsByType();if(!hasOwnProperty(e,"expression data"))return console.log("no expression"),null;for(var e=e["expression data"],k={},d={stats:k},h=[],b=0;b<e.length;b++){var g=e[b],
m=this.getEvent(g).data.getMeanAndSd();k[g]={};k[g]=m;for(var m=this.getEvent(g).data.getData(),p=0;p<m.length;p++){var n=m[p],q=n.val;n.val_orig=q;isNumerical(q)&&(n.val=(q-k[g].mean)/k[g].sd,h.push(n.val))}}d.maxVal=jStat.max(h);d.minVal=jStat.min(h);return d};this.betweenMeansExpressionRescaling=function(e,k,d){console.log("betweenMeansExpressionRescaling",e,k,d);k=this.getEvent(e).data.selectIds(k);var h=null;null==d?(h=this.getEvent(e).data.selectIds(d),h=h.concat(k),h=eliminateDuplicates(h)):
h=this.getEvent(e).data.selectIds(d);e=this.getEventIdsByType();if(!hasOwnProperty(e,"expression data"))return console.log("no expression"),null;e=e["expression data"];d={};for(var b={meanVals:d},g=[],m=0;m<e.length;m++){var p=e[m];d[p]={};d[p].group1=this.getEvent(p).data.getMeanAndSd(k).mean;d[p].group2=this.getEvent(p).data.getMeanAndSd(h).mean;for(var n=(d[p].group2-d[p].group1)/2,p=this.getEvent(p).data.getData(),q=0;q<p.length;q++){var r=p[q],t=r.val;r.val_orig=t;isNumerical(t)&&(r.val=t-n,
g.push(r.val))}}b.maxVal=jStat.max(g);b.minVal=jStat.min(g);return b};this.yuliaExpressionRescaling=function(e,k){console.log("yuliaExpressionRescaling",e,k);var d=this.getEvent(e).data.selectIds(k),h=this.getEventIdsByType();if(!hasOwnProperty(h,"expression data"))return console.log("no expression"),null;for(var h=h["expression data"],b={},g={meanVals:b},m=[],p=0;p<h.length;p++){var n=h[p];b[n]=this.getEvent(n).data.getMeanAndSd(d).mean;for(var q=this.getEvent(n).data.getData(),r=0;r<q.length;r++){var t=
q[r],x=t.val;t.val_orig=x;isNumerical(x)&&(t.val=x-b[n],m.push(t.val))}}g.maxVal=jStat.max(m);g.minVal=jStat.min(m);return g};this.fillInMissingSamples=function(e){for(var k=this.getAllSampleIds(),d=this.getEventIdsByType(),h=0;h<getKeys(d).length;h++)for(var b=getKeys(d)[h],g=0;g<d[b].length;g++){var m=d[b][g],p=this.getEvent(m).data.getAllSampleIds();if(0!=k.length-p.length){for(var p=keepReplicates(k.concat(p),2,!0),n={},q=0;q<p.length;q++)n[p[q]]=e;this.getEvent(m).data.setData(n)}}}}
function OD_event(e){this.metadata=new OD_eventMetadata(e);this.data=new OD_eventDataCollection}function OD_eventMetadata(e){this.id=e.id;this.name=e.name;this.displayName=e.displayName;this.description=e.description;this.datatype=e.datatype;this.allowedValues=e.allowedValues;this.parents={};this.children={};this.addParent=function(e){this.parents[e]=e;return this};this.addChild=function(e){this.children[e]=e;return this};this.computeCompositeScore=function(e){return null}}
function OD_eventDataCollection(){function e(e,d){this.id=e;this.val=d}this.dataCollection=[];this.getValues=function(e){for(var d=[],h=this.getData(),b=0;b<h.length;b++)d.push(h[b].val);null!=e&&1==e&&(d=eliminateDuplicates(d));return d};this.setData=function(k,d){for(var h in k){var b=k[h];"NaN"!=b&&"null"!=b&&""!=b&&"N/A"!=b&&(null!=d&&1==d&&(b=parseFloat(b)),this.dataCollection.push(new e(h,b)))}return this};this.getData=function(k){var d=this.getAllSampleIds(!0);null==k&&(k=getKeys(d));for(var h=
[],b=0;b<k.length;b++){var g=k[b];g in d?h.push(this.dataCollection[d[g]]):h.push(new e(g,null))}return h};this.getAllSampleIds=function(e){for(var d={},h=0;h<this.dataCollection.length;h++)d[this.dataCollection[h].id]=h;return e?d:getKeys(d)};this.sortSamples=function(e,d){var h=this.getData(e),b=compareSamplesAsStrings;d=null==d?"categoric":d.toLowerCase();"numeric"==d||"expression"==d?b=compareSamplesAsNumeric:"date"==d&&(b=compareSamplesAsDate);h.sort(b);for(var b=[],g=0;g<h.length;g++)b.push(h[g].id);
return b};this.selectIds=function(e){for(var d=[],h=this.getData(),b=0;b<h.length;b++){var g=h[b];g.val==e&&d.push(g.id)}return d};this.getMeanAndSd=function(e){var d={mean:0,sd:0},h=this.getAllSampleIds(!0);null==e&&(e=getKeys(h));for(var b=[],g=0;g<e.length;g++){var m=e[g];m in h&&(m=this.dataCollection[h[m]].val,isNumerical(m)&&b.push(m))}d.mean=jStat.mean(b);d.sd=jStat.stdev(b);return d}}
function sortingSteps(e){this.steps=[];null!=e&&(this.steps=e);this.getSteps=function(){return this.steps};this.getIndex=function(e){for(var d=0;d<this.steps.length;d++)if(this.steps[d].name==e)return d;return-1};this.addStep=function(e){var d=this.getIndex(e);0<=d?(e=this.steps.splice(d,1)[0],e.reverse=!e.reverse,this.steps.push(e)):this.steps.push({name:e,reverse:!1})};this.removeStep=function(e){e=this.getIndex(e);0<=e&&this.steps.splice(e,1)};this.clearSteps=function(){this.steps.splice(0,this.steps.length)}}
;function transposeClinicalData(e,k){for(var d={},h=0;h<e.length;h++){var b=e[h],g=b[k],m;for(m in b)m in d||(d[m]={}),d[m][g]=b[m]}return d}
function getClinicalData(e,k){for(var d=getResponse(e).split("\n"),h=[],b=[],g=[],m=0;m<d.length;m++){var p=d[m];beginsWith(p,"#")?b.push(p):beginsWith(p,"STRING")?g=p.split("\t"):h.push(p)}d=d3.tsv.parse(h.join("\n"));h=transposeClinicalData(d,"SAMPLE_ID");delete h.SAMPLE_ID;b=getKeys(h);for(m=0;m<b.length;m++){var p=b[m],n=h[p],q=g[m+1],r="categoric";"number"==q.toLowerCase()?r="numeric":"date"==q.toLowerCase()&&(r="date");k.addEvent({id:p,name:null,displayName:null,description:null,datatype:"clinical data",
allowedValues:r},n)}return d}function getClinicalData_old(e,k){var d=getResponse(e),d=d3.tsv.parse(d),d=transposeClinicalData(d,"CASE_ID"),h;for(h in d){var b=d[h],g=h,m=endsWith(g.toLowerCase(),"_score")?"numeric":"categoric";k.addEvent({id:g,name:null,displayName:null,description:null,datatype:"clinical data",allowedValues:m},b)}}
function getMutationData(e,k){for(var d=getResponse(e),h=d3.tsv.parse(d),d={},b=0;b<h.length;b++){var g=h[b],m=g.Hugo_Symbol,g=g.Tumor_Sample_Barcode,g=g.replace(/_/g,"-"),g=g.replace(/[A-Z]$/,"");hasOwnProperty(d,m)||(d[m]={},d[m].metadata={id:m+"_mut",name:null,displayName:null,description:null,datatype:"mutation data",allowedValues:"categoric"},d[m].data={});d[m].data[g]=!0}h=getKeys(d);for(b=0;b<h.length;b++)m=d[h[b]],k.addEvent(m.metadata,m.data);return d}
function getMutationData_old(e){var k=getResponse(e).split("\n"),d=[],h=[];for(e=0;e<k.length;e++){var b=k[e];beginsWith(b,"#")?h.push(b):d.push(b)}k=d3.tsv.parse(d.join("\n"));for(e=0;e<k.length;e++)d=k[e],h=d.COMMON,delete d.GENE_ID,delete d.COMMON,OD_eventAlbum.addEvent({id:h+"_mutation",name:null,displayName:null,description:null,datatype:"mutation",allowedValues:"numeric"},d);return k}
function getExpressionData(e,k){var d=getResponse(e),d=d3.tsv.parse(d),h;for(h in d){var b=d[h],g=b[""];delete b[""];k.addEvent({id:g+"_mRNA",name:null,displayName:null,description:null,datatype:"expression data",allowedValues:"expression"},b)}}
mongoClinicalData=function(e,k){for(var d=0;d<e.length;d++){var h=e[d];delete h._id;var b=h.sample.trim();delete h.sample;if("Patient ID"!=b)for(var g=getKeys(h),m=0;m<g.length;m++){var p=g[m],n=k.getEvent(p);null==n&&(k.addEvent({id:p,name:null,displayName:null,description:null,datatype:"clinical data",allowedValues:"categoric"},[]),n=k.getEvent(p));var q={};q[b]=h[p];n.data.setData(q)}}return null};buildObservationDeck=function(e,k){k=getConfiguration(k);drawMatrix(e,k);setupContextMenus(k.querySettings)};
getConfiguration=function(e){null==e&&(e={});var k=parseJson(getCookie("od_config"))||{};e.querySettings=k;k=null;"eventAlbum"in e?k=e.eventAlbum:(k=new OD_eventMetadataAlbum,e.eventAlbum=k);"clinicalUrl"in e&&getClinicalData(e.clinicalUrl,k);"expressionUrl"in e&&getExpressionData(e.expressionUrl,k);"mutationUrl"in e&&getMutationData(e.mutationUrl,k);if("mongoData"in e){var d=e.mongoData;"clinical"in d&&mongoClinicalData(d.clinical,k)}return e};
setupContextMenus=function(e){setupColLabelContextMenu(e);setupRowLabelContextMenu(e);setupCategoricCellContextMenu(e)};
setupColLabelContextMenu=function(e){$.contextMenu({selector:".colLabel",callback:function(e,d){var h=this[0].textContent,b=0<=this[0].getAttribute("class").indexOf("axis")?!0:!1;b&&(b=0<=this[0].getAttribute("class").indexOf("rowLabel")?"row":"column");console.log(e,h,b)},items:{sort:{name:"sort",icon:null,disabled:!1,callback:function(k,d){var h=this[0].textContent,b=0<=this[0].getAttribute("class").indexOf("axis")?!0:!1;if(b){var b=0<=this[0].getAttribute("class").indexOf("rowLabel")?"row":"column",
g="colSort";"row"!=b&&(g="rowSort");b=null;b=g in e?new sortingSteps(e[g].steps):new sortingSteps;b.addStep(h);e[g]=b;setCookie("od_config",JSON.stringify(e));window.open(window.location.pathname,"_self")}else console.log("exit out because not a row or a column")}},sep1:"---------",expand:{name:"expand",icon:null,disabled:!0},collapse:{name:"collapse",icon:null,disabled:!0},reset:{name:"reset",icon:null,disabled:!1,callback:function(e,d){deleteCookie("od_config");window.open(window.location.pathname,
"_self")}}}})};
setupRowLabelContextMenu=function(e){$.contextMenu({selector:".rowLabel",callback:function(e,d){var h=this[0].textContent,b=0<=this[0].getAttribute("class").indexOf("axis")?!0:!1;b&&(b=0<=this[0].getAttribute("class").indexOf("rowLabel")?"row":"column");console.log(e,h,b)},items:{sort:{name:"sort",icon:null,disabled:!1,callback:function(k,d){var h=this[0].textContent,b=0<=this[0].getAttribute("class").indexOf("axis")?!0:!1;if(b){var b=0<=this[0].getAttribute("class").indexOf("rowLabel")?"row":"column",
g="colSort";"row"!=b&&(g="rowSort");b=null;b=g in e?new sortingSteps(e[g].steps):new sortingSteps;b.addStep(h);e[g]=b;setCookie("od_config",JSON.stringify(e));window.open(window.location.pathname,"_self")}else console.log("exit out because not a row or a column")}},sep1:"---------",expand:{name:"expand",icon:null,disabled:!0},collapse:{name:"collapse",icon:null,disabled:!0},reset:{name:"reset",icon:null,disabled:!1,callback:function(e,d){deleteCookie("od_config");window.open(window.location.pathname,
"_self")}}}})};setupCategoricCellContextMenu=function(e){$.contextMenu({selector:".categoric",callback:function(e,d){},items:{reset:{name:"reset",icon:null,disabled:!1,callback:function(e,d){deleteCookie("od_config");window.open(window.location.pathname,"_self")}}}})};
drawMatrix=function(e,k){k.rowClickback=function(b,d){console.log("rowClickback: "+b)};k.columnClickback=function(b,d){alert("open page for sample: "+b)};k.cellClickback=function(b,d){console.log("cellClickback: r"+b.eventId+" c"+b.id+" val:"+b.val)};k.rowRightClickback=function(b,d){console.log("rowRightClickback: "+b);d3.event.preventDefault()};k.columnRightClickback=function(b,d){console.log("columnRightClickback: "+b);d3.event.preventDefault()};for(k.cellRightClickback=function(b,d){console.log("cellRightClickback: r"+
b.eventId+" c"+b.id+" val:"+b.val);d3.event.preventDefault()};e.firstChild;)e.removeChild(e.firstChild);var d=k.eventAlbum;d.fillInMissingSamples(null);var h=d.getEventIdsByType(),b=[],g;for(g in h)b=b.concat(h[g]);var m=k.querySettings;g=null;hasOwnProperty(h,"expression data")&&(g=d.zScoreExpressionRescaling());h=null;null!=g&&(h=centeredRgbaColorMapper(!1,0,g.minVal,g.maxVal));var p={};for(g=0;g<b.length;g++){var n=b[g],q=d.getEvent(n).metadata.allowedValues;if("categoric"==q)p[n]=d3.scale.category10();
else if("numeric"==q){for(var r=d.getEvent(n).data.getValues(),q=[],t=0;t<r.length;t++){var x=r[t];isNumerical(x)&&q.push(x)}r=Math.min.apply(null,q);q=Math.max.apply(null,q);p[n]=centeredRgbaColorMapper(!1,0,r,q)}else p[n]="expression"==q?h:d3.scale.category10()}n=h=null;"colSort"in m&&(n=new sortingSteps(m.colSort.steps));var h=d.multisortSamples(n),v={};for(g in h)q=h[g],v[q]=g;m=[];if(null!=n){q=n.getSteps();for(r=0;r<q.length;r++)n=q[r].name,m.push(n);m.reverse()}for(q=0;q<b.length;q++)n=b[q],
isObjInArray(m,n)||m.push(n);var w={};for(g in m)q=m[g],w[q]=g;b=lengthOfLongestString(h);g=lengthOfLongestString(m);b=3<b?9*b:30;g=1<g?8*g:15;var n=document.documentElement.clientWidth,y=Math.floor((n-g-0)/(h.length>m.length?h.length:m.length)),q=b+0+y*m.length,b=d3.select(e).append("svg").attr({width:n,height:q,viewBox:"0 0 "+n+" "+q,perserveAspectRatio:"xMinYMin meet"}).append("g").attr({transform:"translate("+g+","+b+")"});g=-6;n=y/1.5;g=b.selectAll(".rowLabel").data(m).enter().append("text").text(function(b){return b}).attr({x:0,
y:function(b,d){return d*y},transform:"translate("+g+", "+n+")","class":function(b,d){return"rowLabel mono axis unselectable"}}).style("text-anchor","end");g.on("click",k.rowClickback);g.on("contextmenu",k.rowRightClickback);g=Math.floor(y/5);n=-1*Math.floor(y/3);h=b.selectAll(".colLabel").data(h).enter().append("text").text(function(b){return b}).attr({y:function(b,d){return(d+1)*y},x:0,transform:"rotate(-90) translate("+g+", "+n+")","class":function(b,d){return"colLabel mono axis unselectable"}}).style("text-anchor",
"start");h.on("click",k.columnClickback);h.on("contextmenu",k.columnRightClickback);h=d.getAllDataAsList();b=b.selectAll(".cell").data(h).enter().append(function(b){var e=document.createElementNS(svgNamespaceUri,"g");e.setAttributeNS(null,"class","cell");var g=v[b.id]*y,h=w[b.eventId]*y,k,m,n=y,q=y,r={"class":"bordered"};k=b.eventId;r.fill=null==k||null==b.val?"lightgrey":"white";e.appendChild(createSvgRectElement(g,h,4,4,n,q,r));if(null==k||null==b.val)return e;r=b.val;g=v[b.id]*y;h=w[b.eventId]*
y;m=k=4;q=n=y;r={stroke:"#E6E6E6","stroke-width":"2px",fill:(0,p[b.eventId])(r)};d.getEvent(b.eventId).metadata.allowedValues&&(r["class"]="categoric",r.eventId=b.eventId,r.sampleId=b.id,r.val=b.val);e.appendChild(createSvgRectElement(g,h,k,m,n,q,r));return e});b.on("click",k.cellClickback).on("contextmenu",k.cellRightClickback);b.append("title").text(function(b){return"r:"+b.eventId+"\n\nc:"+b.id+"\n\nval:"+b.val});return k};
