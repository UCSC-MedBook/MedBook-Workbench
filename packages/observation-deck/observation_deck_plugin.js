(function(e,h){function d(e){e=e.split(/\s+/);for(var b=[],d=0,f;f=e[d];d++)f=f[0].toUpperCase(),b.push(f);return b}function f(b){return b.id&&e('label[for="'+b.id+'"]').val()||b.name}function b(d,k,l){l||(l=0);k.each(function(){var k=e(this),n=this,p=this.nodeName.toLowerCase(),q,r;"label"==p&&k.find("input, textarea, select").length&&(q=k.text(),k=k.children().first(),n=k.get(0),p=n.nodeName.toLowerCase());switch(p){case "menu":r={name:k.attr("label"),items:{}};l=b(r.items,k.children(),l);break;
case "a":case "button":r={name:k.text(),disabled:!!k.attr("disabled"),callback:function(){return function(){k.click()}}()};break;case "menuitem":case "command":switch(k.attr("type")){case h:case "command":case "menuitem":r={name:k.attr("label"),disabled:!!k.attr("disabled"),callback:function(){return function(){k.click()}}()};break;case "checkbox":r={type:"checkbox",disabled:!!k.attr("disabled"),name:k.attr("label"),selected:!!k.attr("checked")};break;case "radio":r={type:"radio",disabled:!!k.attr("disabled"),
name:k.attr("label"),radio:k.attr("radiogroup"),value:k.attr("id"),selected:!!k.attr("checked")};break;default:r=h}break;case "hr":r="-------";break;case "input":switch(k.attr("type")){case "text":r={type:"text",name:q||f(n),disabled:!!k.attr("disabled"),value:k.val()};break;case "checkbox":r={type:"checkbox",name:q||f(n),disabled:!!k.attr("disabled"),selected:!!k.attr("checked")};break;case "radio":r={type:"radio",name:q||f(n),disabled:!!k.attr("disabled"),radio:!!k.attr("name"),value:k.val(),selected:!!k.attr("checked")};
break;default:r=h}break;case "select":r={type:"select",name:q||f(n),disabled:!!k.attr("disabled"),selected:k.val(),options:{}};k.children().each(function(){r.options[this.value]=e(this).text()});break;case "textarea":r={type:"textarea",name:q||f(n),disabled:!!k.attr("disabled"),value:k.val()};break;case "label":break;default:r={type:"html",html:k.clone(!0)}}r&&(l++,d["key"+l]=r)});return l}e.support.htmlMenuitem="HTMLMenuItemElement"in window;e.support.htmlCommand="HTMLCommandElement"in window;e.support.eventSelectstart=
"onselectstart"in document.documentElement;if(!e.ui||!e.ui.widget){var k=e.cleanData;e.cleanData=function(b){for(var d=0,f;null!=(f=b[d]);d++)try{e(f).triggerHandler("remove")}catch(h){}k(b)}}var l=null,p=!1,n=e(window),q=0,r={},s={},w={},v={selector:null,appendTo:null,trigger:"right",autoHide:!1,delay:200,reposition:!0,determinePosition:function(b){if(e.ui&&e.ui.position)b.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none");
else{var d=this.offset();d.top+=this.outerHeight();d.left+=this.outerWidth()/2-b.outerWidth()/2;b.css(d)}},position:function(e,b,d){if(b||d){b="maintain"===b&&"maintain"===d?e.$menu.position():{top:d,left:b};d=n.scrollTop()+n.height();var f=n.scrollLeft()+n.width(),k=e.$menu.height(),h=e.$menu.width();b.top+k>d&&(b.top-=k);b.left+h>f&&(b.left-=h);e.$menu.css(b)}else e.determinePosition.call(this,e.$menu)},positionSubmenu:function(b){if(e.ui&&e.ui.position)b.css("display","block").position({my:"left top",
at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var d={top:0,left:this.outerWidth()};b.css(d)}},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{show:e.noop,hide:e.noop},callback:null,items:{}},x=null,y=null,L=null,M,N=function(b){for(var e=0;e=Math.max(e,parseInt(b.css("z-index"),10)||0),b=b.parent(),b&&b.length&&!(-1<"html body".indexOf(b.prop("nodeName").toLowerCase())););return e},z={abortevent:function(b){b.preventDefault();b.stopImmediatePropagation()},
contextmenu:function(b){var d=e(this);b.preventDefault();b.stopImmediatePropagation();if(!("right"!=b.data.trigger&&b.originalEvent||d.hasClass("context-menu-active")||d.hasClass("context-menu-disabled"))){l=d;if(b.data.build){var f=b.data.build(l,b);if(!1===f)return;b.data=e.extend(!0,{},v,b.data,f||{});if(!b.data.items||e.isEmptyObject(b.data.items))throw window.console&&(console.error||console.log)("No items specified to show in contextMenu"),Error("No Items specified");b.data.$trigger=l;T.create(b.data)}T.show.call(d,
b.data,b.pageX,b.pageY)}},click:function(b){b.preventDefault();b.stopImmediatePropagation();e(this).trigger(e.Event("contextmenu",{data:b.data,pageX:b.pageX,pageY:b.pageY}))},mousedown:function(b){var d=e(this);l&&l.length&&!l.is(d)&&l.data("contextMenu").$menu.trigger("contextmenu:hide");2==b.button&&(l=d.data("contextMenuActive",!0))},mouseup:function(b){var d=e(this);d.data("contextMenuActive")&&l&&l.length&&l.is(d)&&!d.hasClass("context-menu-disabled")&&(b.preventDefault(),b.stopImmediatePropagation(),
l=d,d.trigger(e.Event("contextmenu",{data:b.data,pageX:b.pageX,pageY:b.pageY})));d.removeData("contextMenuActive")},mouseenter:function(b){var d=e(this),f=e(b.relatedTarget),k=e(document);f.is(".context-menu-list")||f.closest(".context-menu-list").length||l&&l.length||(y=b.pageX,L=b.pageY,M=b.data,k.on("mousemove.contextMenuShow",z.mousemove),x=setTimeout(function(){x=null;k.off("mousemove.contextMenuShow");l=d;d.trigger(e.Event("contextmenu",{data:M,pageX:y,pageY:L}))},b.data.delay))},mousemove:function(b){y=
b.pageX;L=b.pageY},mouseleave:function(b){b=e(b.relatedTarget);if(!b.is(".context-menu-list")&&!b.closest(".context-menu-list").length){try{clearTimeout(x)}catch(d){}x=null}},layerClick:function(b){var d=e(this).data("contextMenuRoot"),f=b.button,k=b.pageX,h=b.pageY,l,p;b.preventDefault();b.stopImmediatePropagation();setTimeout(function(){var q,r="left"==d.trigger&&0===f||"right"==d.trigger&&2===f;document.elementFromPoint&&(d.$layer.hide(),l=document.elementFromPoint(k-n.scrollLeft(),h-n.scrollTop()),
d.$layer.show());if(d.reposition&&r)if(document.elementFromPoint){if(d.$trigger.is(l)||d.$trigger.has(l).length){d.position.call(d.$trigger,d,k,h);return}}else if(p=d.$trigger.offset(),q=e(window),p.top+=q.scrollTop(),p.top<=b.pageY&&(p.left+=q.scrollLeft(),p.left<=b.pageX&&(p.bottom=p.top+d.$trigger.outerHeight(),p.bottom>=b.pageY&&(p.right=p.left+d.$trigger.outerWidth(),p.right>=b.pageX)))){d.position.call(d.$trigger,d,k,h);return}if(l&&r)d.$trigger.one("contextmenu:hidden",function(){e(l).contextMenu({x:k,
y:h})});d.$menu.trigger("contextmenu:hide")},50)},keyStop:function(b,e){e.isInput||b.preventDefault();b.stopPropagation()},key:function(b){var e=l.data("contextMenu")||{};switch(b.keyCode){case 9:case 38:if(z.keyStop(b,e),e.isInput){if(9==b.keyCode&&b.shiftKey){b.preventDefault();e.$selected&&e.$selected.find("input, textarea, select").blur();e.$menu.trigger("prevcommand");return}if(38==b.keyCode&&"checkbox"==e.$selected.find("input, textarea, select").prop("type")){b.preventDefault();return}}else if(9!=
b.keyCode||b.shiftKey){e.$menu.trigger("prevcommand");return}case 40:z.keyStop(b,e);if(e.isInput){if(9==b.keyCode){b.preventDefault();e.$selected&&e.$selected.find("input, textarea, select").blur();e.$menu.trigger("nextcommand");return}if(40==b.keyCode&&"checkbox"==e.$selected.find("input, textarea, select").prop("type")){b.preventDefault();return}}else{e.$menu.trigger("nextcommand");return}break;case 37:z.keyStop(b,e);if(e.isInput||!e.$selected||!e.$selected.length)break;if(!e.$selected.parent().hasClass("context-menu-root")){b=
e.$selected.parent().parent();e.$selected.trigger("contextmenu:blur");e.$selected=b;return}break;case 39:z.keyStop(b,e);if(e.isInput||!e.$selected||!e.$selected.length)break;var d=e.$selected.data("contextMenu")||{};if(d.$menu&&e.$selected.hasClass("context-menu-submenu")){e.$selected=null;d.$selected=null;d.$menu.trigger("nextcommand");return}break;case 35:case 36:e.$selected&&e.$selected.find("input, textarea, select").length||((e.$selected&&e.$selected.parent()||e.$menu).children(":not(.disabled, .not-selectable)")[36==
b.keyCode?"first":"last"]().trigger("contextmenu:focus"),b.preventDefault());return;case 13:z.keyStop(b,e);if(e.isInput){if(e.$selected&&!e.$selected.is("textarea, select")){b.preventDefault();return}break}e.$selected&&e.$selected.trigger("mouseup");return;case 32:case 33:case 34:z.keyStop(b,e);return;case 27:z.keyStop(b,e);e.$menu.trigger("contextmenu:hide");return;default:if(d=String.fromCharCode(b.keyCode).toUpperCase(),e.accesskeys[d]){e.accesskeys[d].$node.trigger(e.accesskeys[d].$menu?"contextmenu:focus":
"mouseup");return}}b.stopPropagation();e.$selected&&e.$selected.trigger(b)},prevItem:function(b){b.stopPropagation();var d=e(this).data("contextMenu")||{};if(d.$selected){var f=d.$selected,d=d.$selected.parent().data("contextMenu")||{};d.$selected=f}for(var f=d.$menu.children(),k=d.$selected&&d.$selected.prev().length?d.$selected.prev():f.last(),h=k;k.hasClass("disabled")||k.hasClass("not-selectable");)if(k=k.prev().length?k.prev():f.last(),k.is(h))return;d.$selected&&z.itemMouseleave.call(d.$selected.get(0),
b);z.itemMouseenter.call(k.get(0),b);b=k.find("input, textarea, select");b.length&&b.focus()},nextItem:function(b){b.stopPropagation();var d=e(this).data("contextMenu")||{};if(d.$selected){var k=d.$selected,d=d.$selected.parent().data("contextMenu")||{};d.$selected=k}for(var k=d.$menu.children(),f=d.$selected&&d.$selected.next().length?d.$selected.next():k.first(),h=f;f.hasClass("disabled")||f.hasClass("not-selectable");)if(f=f.next().length?f.next():k.first(),f.is(h))return;d.$selected&&z.itemMouseleave.call(d.$selected.get(0),
b);z.itemMouseenter.call(f.get(0),b);b=f.find("input, textarea, select");b.length&&b.focus()},focusInput:function(b){b=e(this).closest(".context-menu-item");var d=b.data(),f=d.contextMenu,d=d.contextMenuRoot;d.$selected=f.$selected=b;d.isInput=f.isInput=!0},blurInput:function(b){b=e(this).closest(".context-menu-item").data();b.contextMenuRoot.isInput=b.contextMenu.isInput=!1},menuMouseenter:function(b){e(this).data().contextMenuRoot.hovering=!0},menuMouseleave:function(b){var d=e(this).data().contextMenuRoot;
d.$layer&&d.$layer.is(b.relatedTarget)&&(d.hovering=!1)},itemMouseenter:function(b){var d=e(this),f=d.data(),k=f.contextMenu,f=f.contextMenuRoot;f.hovering=!0;b&&f.$layer&&f.$layer.is(b.relatedTarget)&&(b.preventDefault(),b.stopImmediatePropagation());(k.$menu?k:f).$menu.children(".hover").trigger("contextmenu:blur");d.hasClass("disabled")||d.hasClass("not-selectable")?k.$selected=null:d.trigger("contextmenu:focus")},itemMouseleave:function(b){var d=e(this),f=d.data(),k=f.contextMenu,f=f.contextMenuRoot;
f!==k&&f.$layer&&f.$layer.is(b.relatedTarget)?(f.$selected&&f.$selected.trigger("contextmenu:blur"),b.preventDefault(),b.stopImmediatePropagation(),f.$selected=k.$selected=k.$node):d.trigger("contextmenu:blur")},itemClick:function(b){var d=e(this),f=d.data(),k=f.contextMenuRoot,h=f.contextMenuKey;if(f.contextMenu.items[h]&&!d.is(".disabled, .context-menu-submenu, .context-menu-separator, .not-selectable")){b.preventDefault();b.stopImmediatePropagation();if(e.isFunction(k.callbacks[h])&&Object.prototype.hasOwnProperty.call(k.callbacks,
h))b=k.callbacks[h];else if(e.isFunction(k.callback))b=k.callback;else return;!1!==b.call(k.$trigger,h,k)?k.$menu.trigger("contextmenu:hide"):k.$menu.parent().length&&T.update.call(k.$trigger,k)}},inputClick:function(b){b.stopImmediatePropagation()},hideMenu:function(b,d){var f=e(this).data("contextMenuRoot");T.hide.call(f.$trigger,f,d&&d.force)},focusItem:function(b){b.stopPropagation();b=e(this);var d=b.data(),f=d.contextMenu,d=d.contextMenuRoot;b.addClass("hover").siblings(".hover").trigger("contextmenu:blur");
f.$selected=d.$selected=b;f.$node&&d.positionSubmenu.call(f.$node,f.$menu)},blurItem:function(b){b.stopPropagation();b=e(this);var d=b.data().contextMenu;b.removeClass("hover");d.$selected=null}},T={show:function(b,d,f){var k=e(this),h={};e("#context-menu-layer").trigger("mousedown");b.$trigger=k;if(!1===b.events.show.call(k,b))l=null;else if(T.update.call(k,b),b.position.call(k,b,d,f),b.zIndex&&(h.zIndex=N(k)+b.zIndex),T.layer.call(b.$menu,b,h.zIndex),b.$menu.find("ul").css("zIndex",h.zIndex+1),
b.$menu.css(h)[b.animation.show](b.animation.duration,function(){k.trigger("contextmenu:visible")}),k.data("contextMenu",b).addClass("context-menu-active"),e(document).off("keydown.contextMenu").on("keydown.contextMenu",z.key),b.autoHide)e(document).on("mousemove.contextMenuAutoHide",function(d){var e=k.offset();e.right=e.left+k.outerWidth();e.bottom=e.top+k.outerHeight();!b.$layer||b.hovering||d.pageX>=e.left&&d.pageX<=e.right&&d.pageY>=e.top&&d.pageY<=e.bottom||b.$menu.trigger("contextmenu:hide")})},
hide:function(b,d){var f=e(this);b||(b=f.data("contextMenu")||{});if(d||!b.events||!1!==b.events.hide.call(f,b)){f.removeData("contextMenu").removeClass("context-menu-active");if(b.$layer){setTimeout(function(b){return function(){b.remove()}}(b.$layer),10);try{delete b.$layer}catch(k){b.$layer=null}}l=null;b.$menu.find(".hover").trigger("contextmenu:blur");b.$selected=null;e(document).off(".contextMenuAutoHide").off("keydown.contextMenu");b.$menu&&b.$menu[b.animation.hide](b.animation.duration,function(){b.build&&
(b.$menu.remove(),e.each(b,function(d,e){switch(d){case "ns":case "selector":case "build":case "trigger":return!0;default:b[d]=h;try{delete b[d]}catch(f){}return!0}}));setTimeout(function(){f.trigger("contextmenu:hidden")},10)})}},create:function(b,f){f===h&&(f=b);b.$menu=e('<ul class="context-menu-list"></ul>').addClass(b.className||"").data({contextMenu:b,contextMenuRoot:f});e.each(["callbacks","commands","inputs"],function(d,e){b[e]={};f[e]||(f[e]={})});f.accesskeys||(f.accesskeys={});e.each(b.items,
function(k,h){var l=e('<li class="context-menu-item"></li>').addClass(h.className||""),n=null,p=null;l.on("click",e.noop);h.$node=l.data({contextMenu:b,contextMenuRoot:f,contextMenuKey:k});if(h.accesskey)for(var q=d(h.accesskey),r=0,s;s=q[r];r++)if(!f.accesskeys[s]){f.accesskeys[s]=h;h._name=h.name.replace(new RegExp("("+s+")","i"),'<span class="context-menu-accesskey">$1</span>');break}if("string"==typeof h)l.addClass("context-menu-separator not-selectable");else if(h.type&&w[h.type])w[h.type].call(l,
h,b,f),e.each([b,f],function(b,d){d.commands[k]=h;e.isFunction(h.callback)&&(d.callbacks[k]=h.callback)});else{"html"==h.type?l.addClass("context-menu-html not-selectable"):h.type?(n=e("<label></label>").appendTo(l),e("<span></span>").html(h._name||h.name).appendTo(n),l.addClass("context-menu-input"),b.hasTypes=!0,e.each([b,f],function(b,d){d.commands[k]=h;d.inputs[k]=h})):h.items&&(h.type="sub");switch(h.type){case "text":p=e('<input type="text" value="1" name="" value="">').attr("name","context-menu-input-"+
k).val(h.value||"").appendTo(n);break;case "textarea":p=e('<textarea name=""></textarea>').attr("name","context-menu-input-"+k).val(h.value||"").appendTo(n);h.height&&p.height(h.height);break;case "checkbox":p=e('<input type="checkbox" value="1" name="" value="">').attr("name","context-menu-input-"+k).val(h.value||"").prop("checked",!!h.selected).prependTo(n);break;case "radio":p=e('<input type="radio" value="1" name="" value="">').attr("name","context-menu-input-"+h.radio).val(h.value||"").prop("checked",
!!h.selected).prependTo(n);break;case "select":p=e('<select name="">').attr("name","context-menu-input-"+k).appendTo(n);h.options&&(e.each(h.options,function(b,d){e("<option></option>").val(b).text(d).appendTo(p)}),p.val(h.selected));break;case "sub":e("<span></span>").html(h._name||h.name).appendTo(l);h.appendTo=h.$node;T.create(h,f);l.data("contextMenu",h).addClass("context-menu-submenu");h.callback=null;break;case "html":e(h.html).appendTo(l);break;default:e.each([b,f],function(b,d){d.commands[k]=
h;e.isFunction(h.callback)&&(d.callbacks[k]=h.callback)}),e("<span></span>").html(h._name||h.name||"").appendTo(l)}if(h.type&&"sub"!=h.type&&"html"!=h.type&&(p.on("focus",z.focusInput).on("blur",z.blurInput),h.events))p.on(h.events,b);h.icon&&l.addClass("icon icon-"+h.icon)}h.$input=p;h.$label=n;l.appendTo(b.$menu);if(!b.hasTypes&&e.support.eventSelectstart)l.on("selectstart.disableTextSelect",z.abortevent)});b.$node||b.$menu.css("display","none").addClass("context-menu-root");b.$menu.appendTo(b.appendTo||
document.body)},resize:function(b,d){b.css({position:"absolute",display:"block"});b.data("width",Math.ceil(b.width())+1);b.css({position:"static",minWidth:"0px",maxWidth:"100000px"});b.find("> li > ul").each(function(){T.resize(e(this),!0)});d||b.find("ul").andSelf().css({position:"",display:"",minWidth:"",maxWidth:""}).width(function(){return e(this).data("width")})},update:function(b,d){var f=this;d===h&&(d=b,T.resize(b.$menu));b.$menu.children().each(function(){var k=e(this),h=k.data("contextMenuKey"),
l=b.items[h],h=e.isFunction(l.disabled)&&l.disabled.call(f,h,d)||!0===l.disabled;k[h?"addClass":"removeClass"]("disabled");if(l.type)switch(k.find("input, select, textarea").prop("disabled",h),l.type){case "text":case "textarea":l.$input.val(l.value||"");break;case "checkbox":case "radio":l.$input.val(l.value||"").prop("checked",!!l.selected);break;case "select":l.$input.val(l.selected||"")}l.$menu&&T.update.call(f,l,d)})},layer:function(b,d){var f=b.$layer=e('<div id="context-menu-layer" style="position:fixed; z-index:'+
d+'; top:0; left:0; opacity: 0; filter: alpha(opacity=0); background-color: #000;"></div>').css({height:n.height(),width:n.width(),display:"block"}).data("contextMenuRoot",b).insertBefore(this).on("contextmenu",z.abortevent).on("mousedown",z.layerClick);e.support.fixedPosition||f.css({position:"absolute",height:e(document).height()});return f}};e.fn.contextMenu=function(b){b===h?this.first().trigger("contextmenu"):b.x&&b.y?this.first().trigger(e.Event("contextmenu",{pageX:b.x,pageY:b.y})):"hide"===
b?(b=this.data("contextMenu").$menu)&&b.trigger("contextmenu:hide"):"destroy"===b?e.contextMenu("destroy",{context:this}):e.isPlainObject(b)?(b.context=this,e.contextMenu("create",b)):b?this.removeClass("context-menu-disabled"):b||this.addClass("context-menu-disabled");return this};e.contextMenu=function(b,d){"string"!=typeof b&&(d=b,b="create");"string"==typeof d?d={selector:d}:d===h&&(d={});var f=e.extend(!0,{},v,d||{}),k=e(document),l=k,n=!1;f.context&&f.context.length?(l=e(f.context).first(),
f.context=l.get(0),n=f.context!==document):f.context=document;switch(b){case "create":if(!f.selector)throw Error("No selector specified");if(f.selector.match(/.context-menu-(list|item|input)($|\s)/))throw Error('Cannot bind to selector "'+f.selector+'" as it contains a reserved className');if(!f.build&&(!f.items||e.isEmptyObject(f.items)))throw Error("No Items specified");q++;f.ns=".contextMenu"+q;n||(r[f.selector]=f.ns);s[f.ns]=f;f.trigger||(f.trigger="right");p||(k.on({"contextmenu:hide.contextMenu":z.hideMenu,
"prevcommand.contextMenu":z.prevItem,"nextcommand.contextMenu":z.nextItem,"contextmenu.contextMenu":z.abortevent,"mouseenter.contextMenu":z.menuMouseenter,"mouseleave.contextMenu":z.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",z.inputClick).on({"mouseup.contextMenu":z.itemClick,"contextmenu:focus.contextMenu":z.focusItem,"contextmenu:blur.contextMenu":z.blurItem,"contextmenu.contextMenu":z.abortevent,"mouseenter.contextMenu":z.itemMouseenter,"mouseleave.contextMenu":z.itemMouseleave},
".context-menu-item"),p=!0);l.on("contextmenu"+f.ns,f.selector,f,z.contextmenu);if(n)l.on("remove"+f.ns,function(){e(this).contextMenu("destroy")});switch(f.trigger){case "hover":l.on("mouseenter"+f.ns,f.selector,f,z.mouseenter).on("mouseleave"+f.ns,f.selector,f,z.mouseleave);break;case "left":l.on("click"+f.ns,f.selector,f,z.click)}f.build||T.create(f);break;case "destroy":var x;if(n){var w=f.context;e.each(s,function(b,d){if(d.context!==w)return!0;x=e(".context-menu-list").filter(":visible");x.length&&
x.data().contextMenuRoot.$trigger.is(e(d.context).find(d.selector))&&x.trigger("contextmenu:hide",{force:!0});try{s[d.ns].$menu&&s[d.ns].$menu.remove(),delete s[d.ns]}catch(f){s[d.ns]=null}e(d.context).off(d.ns);return!0})}else if(!f.selector)k.off(".contextMenu .contextMenuAutoHide"),e.each(s,function(b,d){e(d.context).off(d.ns)}),r={},s={},q=0,p=!1,e("#context-menu-layer, .context-menu-list").remove();else if(r[f.selector]){x=e(".context-menu-list").filter(":visible");x.length&&x.data().contextMenuRoot.$trigger.is(f.selector)&&
x.trigger("contextmenu:hide",{force:!0});try{s[r[f.selector]].$menu&&s[r[f.selector]].$menu.remove(),delete s[r[f.selector]]}catch(y){s[r[f.selector]]=null}k.off(r[f.selector])}break;case "html5":(!e.support.htmlCommand&&!e.support.htmlMenuitem||"boolean"==typeof d&&d)&&e('menu[type="context"]').each(function(){this.id&&e.contextMenu({selector:"[contextmenu="+this.id+"]",items:e.contextMenu.fromMenu(this)})}).css("display","none");break;default:throw Error('Unknown operation "'+b+'"');}return this};
e.contextMenu.setInputValues=function(b,d){d===h&&(d={});e.each(b.inputs,function(b,e){switch(e.type){case "text":case "textarea":e.value=d[b]||"";break;case "checkbox":e.selected=d[b]?!0:!1;break;case "radio":e.selected=(d[e.radio]||"")==e.value?!0:!1;break;case "select":e.selected=d[b]||""}})};e.contextMenu.getInputValues=function(b,d){d===h&&(d={});e.each(b.inputs,function(b,e){switch(e.type){case "text":case "textarea":case "select":d[b]=e.$input.val();break;case "checkbox":d[b]=e.$input.prop("checked");
break;case "radio":e.$input.prop("checked")&&(d[e.radio]=e.value)}});return d};e.contextMenu.fromMenu=function(d){d=e(d);var f={};b(f,d.children());return f};e.contextMenu.defaults=v;e.contextMenu.types=w;e.contextMenu.handle=z;e.contextMenu.op=T;e.contextMenu.menus=s})(jQuery);!function(){function e(a,g){return g>a?-1:a>g?1:a>=g?0:0/0}function h(a){return null!=a&&!isNaN(a)}function d(a){return{left:function(g,m,D,b){3>arguments.length&&(D=0);for(4>arguments.length&&(b=g.length);b>D;){var u=D+b>>>1;0>a(g[u],m)?D=u+1:b=u}return D},right:function(g,m,D,b){3>arguments.length&&(D=0);for(4>arguments.length&&(b=g.length);b>D;){var u=D+b>>>1;0<a(g[u],m)?b=u:D=u+1}return D}}}function f(a){return a.length}function b(a,g){try{for(var m in g)Object.defineProperty(a.prototype,m,{value:g[m],
enumerable:!1})}catch(b){a.prototype=g}}function k(){}function l(a){return Oa+a in this}function p(){var a=[];return this.forEach(function(g){a.push(g)}),a}function n(){var a=0,g;for(g in this)g.charCodeAt(0)===Cb&&++a;return a}function q(){for(var a in this)if(a.charCodeAt(0)===Cb)return!1;return!0}function r(){}function s(a,g,m){return function(){var b=m.apply(g,arguments);return b===g?a:b}}function w(a,g){if(g in a)return g;g=g.charAt(0).toUpperCase()+g.slice(1);for(var m=0,b=Rd.length;b>m;++m){var B=
Rd[m]+g;if(B in a)return B}}function v(){}function x(){}function y(a){function g(){for(var g,b=m,D=-1,d=b.length;++D<d;)(g=b[D].on)&&g.apply(this,arguments);return a}var m=[],b=new k;return g.on=function(g,u){var d,e=b.get(g);return 2>arguments.length?e&&e.on:(e&&(e.on=null,m=m.slice(0,d=m.indexOf(e)).concat(m.slice(d+1)),b.remove(g)),u&&m.push(b.set(g,{on:u})),a)},g}function L(){t.event.preventDefault()}function M(){for(var a,g=t.event;a=g.sourceEvent;)g=a;return g}function N(a){for(var g=new x,
m=0,b=arguments.length;++m<b;)g[arguments[m]]=y(g);return g.of=function(m,b){return function(D){try{var d=D.sourceEvent=t.event;D.target=a;t.event=D;g[D.type].apply(m,b)}finally{t.event=d}}},g}function z(a){return Db(a,O),a}function T(a){return"function"==typeof a?a:function(){return Ac(a,this)}}function Id(a){return"function"==typeof a?a:function(){return Bc(a,this)}}function Jd(a,g){function m(){this.removeAttribute(a)}function b(){this.removeAttributeNS(a.space,a.local)}function B(){this.setAttribute(a,
g)}function u(){this.setAttributeNS(a.space,a.local,g)}function d(){var m=g.apply(this,arguments);null==m?this.removeAttribute(a):this.setAttribute(a,m)}function e(){var m=g.apply(this,arguments);null==m?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,m)}return a=t.ns.qualify(a),null==g?a.local?b:m:"function"==typeof g?a.local?e:d:a.local?u:B}function Kd(a){return a.trim().replace(/\s+/g," ")}function Ld(a){return new RegExp("(?:^|\\s+)"+t.requote(a)+"(?:\\s+|$)","g")}
function Md(a,g){function m(){for(var m=-1;++m<B;)a[m](this,g)}function b(){for(var m=-1,D=g.apply(this,arguments);++m<B;)a[m](this,D)}a=(a+"").trim().split(/^|\s+/).map(pg);var B=a.length;return"function"==typeof g?b:m}function pg(a){var g=Ld(a);return function(m,b){if(B=m.classList)return b?B.add(a):B.remove(a);var B=m.getAttribute("class")||"";b?(g.lastIndex=0,g.test(B)||m.setAttribute("class",Kd(B+" "+a))):m.setAttribute("class",Kd(B.replace(g," ")))}}function Nd(a,g,m){function b(){this.style.removeProperty(a)}
function B(){this.style.setProperty(a,g,m)}function u(){var b=g.apply(this,arguments);null==b?this.style.removeProperty(a):this.style.setProperty(a,b,m)}return null==g?b:"function"==typeof g?u:B}function Od(a,g){function m(){delete this[a]}function b(){this[a]=g}function B(){var m=g.apply(this,arguments);null==m?delete this[a]:this[a]=m}return null==g?m:"function"==typeof g?B:b}function Pd(a){return"function"==typeof a?a:(a=t.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,
a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,a)}}function Qd(a){return function(){return Sd(this,a)}}function qg(a){return arguments.length||(a=e),function(g,m){return g&&m?a(g.__data__,m.__data__):!g-!m}}function xa(a,g){for(var m=0,b=a.length;b>m;m++)for(var B,u=a[m],d=0,e=u.length;e>d;d++)(B=u[d])&&g(B,d,m);return a}function Td(a){return Db(a,ya),a}function rg(a){var g,m;return function(b,d,u){b=a[u].update;var e=b.length;u!=m&&(m=u,g=0);for(d>=g&&(g=d+1);!(d=
b[g])&&++g<e;);return d}}function Eb(){var a=this.__transition__;a&&++a.active}function Ud(a,g,m){function b(){var g=this[e];g&&(this.removeEventListener(a,g,g.$),delete this[e])}function d(){var u=k(g,Ga(arguments));b.call(this);this.addEventListener(a,this[e]=u,u.$=m);u._=g}function u(){var g,m=new RegExp("^__on([^.]+)"+t.requote(a)+"$"),b;for(b in this)if(g=b.match(m)){var D=this[b];this.removeEventListener(g[1],D,D.$);delete this[b]}}var e="__on"+a,f=a.indexOf("."),k=Vd;0<f&&(a=a.slice(0,f));
var Z=Cc.get(a);return Z&&(a=Z,k=sg),f?g?d:b:g?v:u}function Vd(a,g){return function(m){var b=t.event;t.event=m;g[0]=this.__data__;try{a.apply(this,g)}finally{t.event=b}}}function sg(a,g){var m=Vd(a,g);return function(a){var g=a.relatedTarget;g&&(g===this||8&g.compareDocumentPosition(this))||m.call(this,a)}}function Fb(){var a=".dragsuppress-"+ ++tg,g="click"+a,m=t.select(ba).on("touchmove"+a,L).on("dragstart"+a,L).on("selectstart"+a,L);if(ob){var b=za.style,d=b[ob];b[ob]="none"}return function(u){function e(){m.on(g,
null)}m.on(a,null);ob&&(b[ob]=d);u&&(m.on(g,function(){L();e()},!0),setTimeout(e,0))}}function Dc(a,g){g.changedTouches&&(g=g.changedTouches[0]);var m=a.ownerSVGElement||a;if(m.createSVGPoint){var b=m.createSVGPoint();if(0>Ec&&(ba.scrollX||ba.scrollY)){var m=t.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),d=m[0][0].getScreenCTM();Ec=!(d.f||d.e);m.remove()}return Ec?(b.x=g.pageX,b.y=g.pageY):(b.x=g.clientX,b.y=g.clientY),b=b.matrixTransform(a.getScreenCTM().inverse()),
[b.x,b.y]}m=a.getBoundingClientRect();return[g.clientX-m.left-a.clientLeft,g.clientY-m.top-a.clientTop]}function ug(){return t.event.changedTouches[0].identifier}function vg(){return t.event.target}function wg(){return ba}function Fc(a,g,m){return(g[0]-a[0])*(m[1]-a[1])-(g[1]-a[1])*(m[0]-a[0])}function Wd(a){return 1<a?0:-1>a?F:Math.acos(a)}function ab(a){return 1<a?Y:-1>a?-Y:Math.asin(a)}function Xd(a){return((a=Math.exp(a))+1/a)/2}function Yd(a){return(a=Math.sin(a/2))*a}function Qa(){}function sa(a,
g,m){return this instanceof sa?(this.h=+a,this.s=+g,void(this.l=+m)):2>arguments.length?a instanceof sa?new sa(a.h,a.s,a.l):Zd(""+a,$d,sa):new sa(a,g,m)}function Gc(a,g,m){function b(a){return 360<a?a-=360:0>a&&(a+=360),60>a?d+(u-d)*a/60:180>a?u:240>a?d+(u-d)*(240-a)/60:d}var d,u;return a=isNaN(a)?0:0>(a%=360)?a+360:a,g=isNaN(g)?0:0>g?0:1<g?1:g,m=0>m?0:1<m?1:m,u=.5>=m?m*(1+g):m+g-m*g,d=2*m-u,new ca(Math.round(255*b(a+120)),Math.round(255*b(a)),Math.round(255*b(a-120)))}function na(a,g,m){return this instanceof
na?(this.h=+a,this.c=+g,void(this.l=+m)):2>arguments.length?a instanceof na?new na(a.h,a.c,a.l):a instanceof oa?ae(a.l,a.a,a.b):ae((a=be((a=t.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new na(a,g,m)}function Hc(a,g,m){return isNaN(a)&&(a=0),isNaN(g)&&(g=0),new oa(m,Math.cos(a*=E)*g,Math.sin(a)*g)}function oa(a,g,m){return this instanceof oa?(this.l=+a,this.a=+g,void(this.b=+m)):2>arguments.length?a instanceof oa?new oa(a.l,a.a,a.b):a instanceof na?Hc(a.l,a.c,a.h):be((a=ca(a)).r,a.g,a.b):new oa(a,g,m)}function ce(a,
g,m){a=(a+16)/116;g=a+g/500;m=a-m/200;return g=Ic(g)*de,a=Ic(a)*ee,m=Ic(m)*fe,new ca(Jc(3.2404542*g-1.5371385*a-.4985314*m),Jc(-.969266*g+1.8760108*a+.041556*m),Jc(.0556434*g-.2040259*a+1.0572252*m))}function ae(a,g,m){return 0<a?new na(Math.atan2(m,g)*P,Math.sqrt(g*g+m*m),a):new na(0/0,0/0,a)}function Ic(a){return.206893034<a?a*a*a:(a-4/29)/7.787037}function Kc(a){return.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function Jc(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}
function ca(a,g,m){return this instanceof ca?(this.r=~~a,this.g=~~g,void(this.b=~~m)):2>arguments.length?a instanceof ca?new ca(a.r,a.g,a.b):Zd(""+a,ca,Gc):new ca(a,g,m)}function Gb(a){return new ca(a>>16,255&a>>8,255&a)+""}function bb(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function Zd(a,g,m){var b,d,u,e=0,f=0,k=0;if(b=/([a-z]+)\((.*)\)/i.exec(a))switch(d=b[2].split(","),b[1]){case "hsl":return m(parseFloat(d[0]),parseFloat(d[1])/100,parseFloat(d[2])/100);case "rgb":return g(Lc(d[0]),
Lc(d[1]),Lc(d[2]))}return(u=Hb.get(a))?g(u.r,u.g,u.b):(null==a||"#"!==a.charAt(0)||isNaN(u=parseInt(a.slice(1),16))||(4===a.length?(e=(3840&u)>>4,e|=e>>4,f=240&u,f|=f>>4,k=15&u,k|=k<<4):7===a.length&&(e=(16711680&u)>>16,f=(65280&u)>>8,k=255&u)),g(e,f,k))}function $d(a,g,m){var b,d,u=Math.min(a/=255,g/=255,m/=255),e=Math.max(a,g,m),f=e-u,k=(e+u)/2;return f?(d=.5>k?f/(e+u):f/(2-e-u),b=a==e?(g-m)/f+(m>g?6:0):g==e?(m-a)/f+2:(a-g)/f+4,b*=60):(b=0/0,d=0<k&&1>k?0:b),new sa(b,d,k)}function be(a,g,m){a=Mc(a);
g=Mc(g);m=Mc(m);var b=Kc((.4124564*a+.3575761*g+.1804375*m)/de),d=Kc((.2126729*a+.7151522*g+.072175*m)/ee);a=Kc((.0193339*a+.119192*g+.9503041*m)/fe);return oa(116*d-16,500*(b-d),200*(d-a))}function Mc(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Lc(a){var g=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*g):g}function J(a){return"function"==typeof a?a:function(){return a}}function X(a){return a}function Nc(a){return function(g,m,b){return 2===arguments.length&&
"function"==typeof m&&(b=m,m=null),Ib(g,m,a,b)}}function Ib(a,g,m,b){function d(){var a,g=k.status,b;if(b=!g)b=(b=k.responseType)&&"text"!==b?k.response:k.responseText;if(b||200<=g&&300>g||304===g){try{a=m.call(u,k)}catch(D){return e.error.call(u,D),void 0}e.load.call(u,a)}else e.error.call(u,k)}var u={},e=t.dispatch("beforesend","progress","load","error"),f={},k=new XMLHttpRequest,Z=null;return!ba.XDomainRequest||"withCredentials"in k||!/^(http(s)?:)?\/\//.test(a)||(k=new XDomainRequest),"onload"in
k?k.onload=k.onerror=d:k.onreadystatechange=function(){3<k.readyState&&d()},k.onprogress=function(a){var g=t.event;t.event=a;try{e.progress.call(u,k)}finally{t.event=g}},u.header=function(a,g){return a=(a+"").toLowerCase(),2>arguments.length?f[a]:(null==g?delete f[a]:f[a]=g+"",u)},u.mimeType=function(a){return arguments.length?(g=null==a?null:a+"",u):g},u.responseType=function(a){return arguments.length?(Z=a,u):Z},u.response=function(a){return m=a,u},["get","post"].forEach(function(a){u[a]=function(){return u.send.apply(u,
[a].concat(Ga(arguments)))}}),u.send=function(m,b,D){if(2===arguments.length&&"function"==typeof b&&(D=b,b=null),k.open(m,a,!0),null==g||"accept"in f||(f.accept=g+",*/*"),k.setRequestHeader)for(var d in f)k.setRequestHeader(d,f[d]);return null!=g&&k.overrideMimeType&&k.overrideMimeType(g),null!=Z&&(k.responseType=Z),null!=D&&u.on("error",D).on("load",function(a){D(null,a)}),e.beforesend.call(u,k),k.send(null==b?null:b),u},u.abort=function(){return k.abort(),u},t.rebind(u,e,"on"),null==b?u:u.get(xg(b))}
function xg(a){return 1===a.length?function(g,m){a(null==g?m:null)}:a}function Oc(){var a=ge(),a=he()-a;24<a?(isFinite(a)&&(clearTimeout(Jb),Jb=setTimeout(Oc,a)),Kb=0):(Kb=1,ie(Oc))}function ge(){var a=Date.now();for(Aa=Lb;Aa;)a>=Aa.t&&(Aa.f=Aa.c(a-Aa.t)),Aa=Aa.n;return a}function he(){for(var a,g=Lb,m=1/0;g;)g.f?g=a?a.n=g.n:Lb=g.n:(g.t<m&&(m=g.t),g=(a=g).n);return Mb=a,m}function Pc(a,g){return g-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function yg(a){var g=a.decimal,m=a.thousands,b=a.grouping,d=a.currency,
u=b?function(a){for(var g=a.length,u=[],d=0,e=b[0];0<e&&0<g;)u.push(a.substring(g-=e,g+e)),e=b[d=(d+1)%b.length];return u.reverse().join(m)}:X;return function(a){a=je.exec(a);var m=a[1]||" ",b=a[2]||">",D=a[3]||"",e=a[4]||"",f=a[5],k=+a[6],h=a[7],l=a[8],n=a[9],p=1,q="",r="",s=!1;switch(l&&(l=+l.substring(1)),(f||"0"===m&&"="===b)&&(f=m="0",b="=",h&&(k-=Math.floor((k-1)/4))),n){case "n":h=!0;n="g";break;case "%":p=100;r="%";n="f";break;case "p":p=100;r="%";n="r";break;case "b":case "o":case "x":case "X":"#"===
e&&(q="0"+n.toLowerCase());case "c":case "d":s=!0;l=0;break;case "s":p=-1,n="r"}"$"===e&&(q=d[0],r=d[1]);"r"!=n||l||(n="g");null!=l&&("g"==n?l=Math.max(1,Math.min(21,l)):("e"==n||"f"==n)&&(l=Math.max(0,Math.min(20,l))));var n=zg.get(n)||Ag,G=f&&h;return function(a){var d=r;if(s&&a%1)return"";var e=0>a||0===a&&0>1/a?(a=-a,"-"):D;0>p?(d=t.formatPrefix(a,l),a=d.scale(a),d=d.symbol+r):a*=p;a=n(a,l);var B=a.lastIndexOf("."),U=0>B?a:a.substring(0,B),B=0>B?"":g+a.substring(B+1);!f&&h&&(U=u(U));var Q=q.length+
U.length+B.length+(G?0:e.length),x=k>Q?Array(Q=k-Q+1).join(m):"";return G&&(U=u(x+U)),e+=q,a=U+B,("<"===b?e+a+x:">"===b?x+e+a:"^"===b?x.substring(0,Q>>=1)+e+a+x.substring(Q):e+(G?a:x+a))+d}}}function Ag(a){return a+""}function Ba(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Ra(a,g,m){function b(g){var m=a(g),D=u(m,1);return D-g>g-m?m:D}function d(m){return g(m=a(new aa(m-1)),1),m}function u(a,m){return g(a=new aa(+a),m),a}function e(a,b,D){a=d(a);var u=
[];if(1<D)for(;b>a;)m(a)%D||u.push(new Date(+a)),g(a,1);else for(;b>a;)u.push(new Date(+a)),g(a,1);return u}a.floor=a;a.round=b;a.ceil=d;a.offset=u;a.range=e;var f=a.utc=Nb(a);return f.floor=f,f.round=Nb(b),f.ceil=Nb(d),f.offset=Nb(u),f.range=function(a,g,m){try{aa=Ba;var b=new Ba;return b._=a,e(b,g,m)}finally{aa=Date}},a}function Nb(a){return function(g,m){try{aa=Ba;var b=new Ba;return b._=g,a(b,m)._}finally{aa=Date}}}function Bg(a){function g(a){function g(m){for(var u,D,d,e=[],B=-1,f=0;++B<b;)37===
a.charCodeAt(B)&&(e.push(a.slice(f,B)),null!=(D=ke[u=a.charAt(++B)])&&(u=a.charAt(++B)),(d=G[u])&&(u=d(m,null==D?"e"===u?" ":"0":D)),e.push(u),f=B+1);return e.push(a.slice(f,B)),e.join("")}var b=a.length;return g.parse=function(g){var b={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(m(b,a,g,0)!=g.length)return null;"p"in b&&(b.H=b.H%12+12*b.p);g=null!=b.Z&&aa!==Ba;var u=new (g?Ba:aa);return"j"in b?u.setFullYear(b.y,0,b.j):"w"in b&&("W"in b||"U"in b)?(u.setFullYear(b.y,0,1),u.setFullYear(b.y,0,"W"in b?
(b.w+6)%7+7*b.W-(u.getDay()+5)%7:b.w+7*b.U-(u.getDay()+6)%7)):u.setFullYear(b.y,b.m,b.d),u.setHours(b.H+(0|b.Z/100),b.M+b.Z%100,b.S,b.L),g?u._:u},g.toString=function(){return a},g}function m(a,g,m,b){for(var u,D,d,e=0,B=g.length,f=m.length;B>e;){if(b>=f)return-1;if(u=g.charCodeAt(e++),37===u){if(d=g.charAt(e++),D=x[d in ke?g.charAt(e++):d],!D||0>(b=D(a,m,b)))return-1}else if(u!=m.charCodeAt(b++))return-1}return b}var b=a.dateTime,d=a.date,u=a.time,e=a.periods,f=a.days,k=a.shortDays,Z=a.months,h=a.shortMonths;
g.utc=function(a){function m(a){try{aa=Ba;var g=new aa;return g._=a,b(g)}finally{aa=Date}}var b=g(a);return m.parse=function(a){try{aa=Ba;var g=b.parse(a);return g&&g._}finally{aa=Date}},m.toString=b.toString,m};g.multi=g.utc.multi=Cg;var l=t.map(),n=Ob(f),p=Pb(f),q=Ob(k),r=Pb(k),s=Ob(Z),R=Pb(Z),H=Ob(h),K=Pb(h);e.forEach(function(a,g){l.set(a.toLowerCase(),g)});var G={a:function(a){return k[a.getDay()]},A:function(a){return f[a.getDay()]},b:function(a){return h[a.getMonth()]},B:function(a){return Z[a.getMonth()]},
c:g(b),d:function(a,g){return da(a.getDate(),g,2)},e:function(a,g){return da(a.getDate(),g,2)},H:function(a,g){return da(a.getHours(),g,2)},I:function(a,g){return da(a.getHours()%12||12,g,2)},j:function(a,g){return da(1+A.dayOfYear(a),g,3)},L:function(a,g){return da(a.getMilliseconds(),g,3)},m:function(a,g){return da(a.getMonth()+1,g,2)},M:function(a,g){return da(a.getMinutes(),g,2)},p:function(a){return e[+(12<=a.getHours())]},S:function(a,g){return da(a.getSeconds(),g,2)},U:function(a,g){return da(A.sundayOfYear(a),
g,2)},w:function(a){return a.getDay()},W:function(a,g){return da(A.mondayOfYear(a),g,2)},x:g(d),X:g(u),y:function(a,g){return da(a.getFullYear()%100,g,2)},Y:function(a,g){return da(a.getFullYear()%1E4,g,4)},Z:Dg,"%":function(){return"%"}},x={a:function(a,g,m){q.lastIndex=0;return(g=q.exec(g.slice(m)))?(a.w=r.get(g[0].toLowerCase()),m+g[0].length):-1},A:function(a,g,m){n.lastIndex=0;return(g=n.exec(g.slice(m)))?(a.w=p.get(g[0].toLowerCase()),m+g[0].length):-1},b:function(a,g,m){H.lastIndex=0;return(g=
H.exec(g.slice(m)))?(a.m=K.get(g[0].toLowerCase()),m+g[0].length):-1},B:function(a,g,m){s.lastIndex=0;return(g=s.exec(g.slice(m)))?(a.m=R.get(g[0].toLowerCase()),m+g[0].length):-1},c:function(a,g,b){return m(a,G.c.toString(),g,b)},d:le,e:le,H:me,I:me,j:Eg,L:Fg,m:Gg,M:Hg,p:function(a,g,m){g=l.get(g.slice(m,m+=2).toLowerCase());return null==g?-1:(a.p=g,m)},S:Ig,U:Jg,w:Kg,W:Lg,x:function(a,g,b){return m(a,G.x.toString(),g,b)},X:function(a,g,b){return m(a,G.X.toString(),g,b)},y:Mg,Y:Ng,Z:Og,"%":Pg};return g}
function da(a,g,m){var b=0>a?"-":"";a=(b?-a:a)+"";var d=a.length;return b+(m>d?Array(m-d+1).join(g)+a:a)}function Ob(a){return new RegExp("^(?:"+a.map(t.requote).join("|")+")","i")}function Pb(a){for(var g=new k,m=-1,b=a.length;++m<b;)g.set(a[m].toLowerCase(),m);return g}function Kg(a,g,m){S.lastIndex=0;return(g=S.exec(g.slice(m,m+1)))?(a.w=+g[0],m+g[0].length):-1}function Jg(a,g,m){S.lastIndex=0;return(g=S.exec(g.slice(m)))?(a.U=+g[0],m+g[0].length):-1}function Lg(a,g,m){S.lastIndex=0;return(g=S.exec(g.slice(m)))?
(a.W=+g[0],m+g[0].length):-1}function Ng(a,g,m){S.lastIndex=0;return(g=S.exec(g.slice(m,m+4)))?(a.y=+g[0],m+g[0].length):-1}function Mg(a,g,m){S.lastIndex=0;if(g=S.exec(g.slice(m,m+2))){var b=+g[0];a=(a.y=b+(68<b?1900:2E3),m+g[0].length)}else a=-1;return a}function Og(a,g,m){return/^[+-]\d{4}$/.test(g=g.slice(m,m+5))?(a.Z=-g,m+5):-1}function Gg(a,g,m){S.lastIndex=0;return(g=S.exec(g.slice(m,m+2)))?(a.m=g[0]-1,m+g[0].length):-1}function le(a,g,m){S.lastIndex=0;return(g=S.exec(g.slice(m,m+2)))?(a.d=
+g[0],m+g[0].length):-1}function Eg(a,g,m){S.lastIndex=0;return(g=S.exec(g.slice(m,m+3)))?(a.j=+g[0],m+g[0].length):-1}function me(a,g,m){S.lastIndex=0;return(g=S.exec(g.slice(m,m+2)))?(a.H=+g[0],m+g[0].length):-1}function Hg(a,g,m){S.lastIndex=0;return(g=S.exec(g.slice(m,m+2)))?(a.M=+g[0],m+g[0].length):-1}function Ig(a,g,m){S.lastIndex=0;return(g=S.exec(g.slice(m,m+2)))?(a.S=+g[0],m+g[0].length):-1}function Fg(a,g,m){S.lastIndex=0;return(g=S.exec(g.slice(m,m+3)))?(a.L=+g[0],m+g[0].length):-1}function Dg(a){var g=
a.getTimezoneOffset();a=0<g?"-":"+";var m=0|I(g)/60,g=I(g)%60;return a+da(m,"0",2)+da(g,"0",2)}function Pg(a,g,m){ne.lastIndex=0;return(a=ne.exec(g.slice(m,m+1)))?m+a[0].length:-1}function Cg(a){for(var g=a.length,m=-1;++m<g;)a[m][0]=this(a[m][0]);return function(g){for(var m=0,b=a[m];!b[1](g);)b=a[++m];return b[0](g)}}function Rc(){}function oe(a,g,m){var b=m.s=a+g,d=b-a;m.t=a-(b-d)+(g-d)}function Qb(a,g){a&&pe.hasOwnProperty(a.type)&&pe[a.type](a,g)}function Sc(a,g,m){var b=-1,d=a.length-m;for(g.lineStart();++b<
d;)m=a[b],g.point(m[0],m[1],m[2]);g.lineEnd()}function qe(a,g){var m=-1,b=a.length;for(g.polygonStart();++m<b;)Sc(a[m],g,1);g.polygonEnd()}function Qg(){function a(a,g){a*=E;g=g*E/2+F/4;var m=a-b,e=0<=m?1:-1,f=e*m,m=Math.cos(g),k=Math.sin(g),h=u*k,l=d*m+h*Math.cos(f),e=h*e*Math.sin(f);Sa.add(Math.atan2(e,l));b=a;d=m;u=k}var g,m,b,d,u;ga.point=function(e,f){ga.point=a;b=(g=e)*E;d=Math.cos(f=(m=f)*E/2+F/4);u=Math.sin(f)};ga.lineEnd=function(){a(g,m)}}function Ta(a){var g=a[0];a=a[1];var m=Math.cos(a);
return[m*Math.cos(g),m*Math.sin(g),Math.sin(a)]}function Rb(a,g){return a[0]*g[0]+a[1]*g[1]+a[2]*g[2]}function db(a,g){return[a[1]*g[2]-a[2]*g[1],a[2]*g[0]-a[0]*g[2],a[0]*g[1]-a[1]*g[0]]}function Tc(a,g){a[0]+=g[0];a[1]+=g[1];a[2]+=g[2]}function Sb(a,g){return[a[0]*g,a[1]*g,a[2]*g]}function Tb(a){var g=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=g;a[1]/=g;a[2]/=g}function Ub(a){return[Math.atan2(a[1],a[0]),ab(a[2])]}function Vb(a,g){return I(a[0]-g[0])<C&&I(a[1]-g[1])<C}function Uc(a,g){a*=E;var m=
Math.cos(g*=E);pb(m*Math.cos(a),m*Math.sin(a),Math.sin(g))}function pb(a,g,m){++qb;Ca+=(a-Ca)/qb;Da+=(g-Da)/qb;ua+=(m-ua)/qb}function re(){function a(a,u){a*=E;var d=Math.cos(u*=E),e=d*Math.cos(a),d=d*Math.sin(a),f=Math.sin(u),k=Math.atan2(Math.sqrt((k=m*f-b*d)*k+(k=b*e-g*f)*k+(k=g*d-m*e)*k),g*e+m*d+b*f);eb+=k;ja+=k*(g+(g=e));ka+=k*(m+(m=d));ea+=k*(b+(b=f));pb(g,m,b)}var g,m,b;pa.point=function(d,u){d*=E;var e=Math.cos(u*=E);g=e*Math.cos(d);m=e*Math.sin(d);b=Math.sin(u);pa.point=a;pb(g,m,b)}}function se(){pa.point=
Uc}function Rg(){function a(a,g){a*=E;var m=Math.cos(g*=E),e=m*Math.cos(a),m=m*Math.sin(a),f=Math.sin(g),k=d*f-u*m,h=u*e-b*f,l=b*m-d*e,n=Math.sqrt(k*k+h*h+l*l),p=b*e+d*m+u*f,q=n&&-Wd(p)/n,n=Math.atan2(n,p);Ia+=q*k;Ja+=q*h;va+=q*l;eb+=n;ja+=n*(b+(b=e));ka+=n*(d+(d=m));ea+=n*(u+(u=f));pb(b,d,u)}var g,m,b,d,u;pa.point=function(e,f){g=e;m=f;pa.point=a;e*=E;var k=Math.cos(f*=E);b=k*Math.cos(e);d=k*Math.sin(e);u=Math.sin(f);pb(b,d,u)};pa.lineEnd=function(){a(g,m);pa.lineEnd=se;pa.point=Uc}}function fb(){return!0}
function te(a,g,m,b,d){var u=[],e=[];if(a.forEach(function(a){if(!(0>=(g=a.length-1))){var g,m=a[0],b=a[g];if(Vb(m,b)){d.lineStart();for(b=0;g>b;++b)d.point((m=a[b])[0],m[1]);return d.lineEnd(),void 0}g=new Wb(m,a,null,!0);m=new Wb(m,null,g,!1);g.o=m;u.push(g);e.push(m);g=new Wb(b,a,null,!1);m=new Wb(b,null,g,!0);g.o=m;u.push(g);e.push(m)}}),e.sort(g),ue(u),ue(e),u.length){a=0;g=m;for(m=e.length;m>a;++a)e[a].e=g=!g;for(var f,k=u[0];;){for(var h=k,l=!0;h.v;)if((h=h.n)===k)return;g=h.z;d.lineStart();
do{if(h.v=h.o.v=!0,h.e){if(l)for(a=0,m=g.length;m>a;++a)d.point((f=g[a])[0],f[1]);else b(h.x,h.n.x,1,d);h=h.n}else{if(l)for(g=h.p.z,a=g.length-1;0<=a;--a)d.point((f=g[a])[0],f[1]);else b(h.x,h.p.x,-1,d);h=h.p}h=h.o;g=h.z;l=!l}while(!h.v);d.lineEnd()}}}function ue(a){if(g=a.length){for(var g,m,b=0,d=a[0];++b<g;)d.n=m=a[b],m.p=d,d=m;d.n=m=a[0];m.p=d}}function Wb(a,g,m,b){this.x=a;this.z=g;this.o=m;this.e=b;this.v=!1;this.n=this.p=null}function ve(a,g,m,b){return function(d,u){function e(g,m){var b=
d(g,m);a(g=b[0],m=b[1])&&u.point(g,m)}function f(a,g){var m=d(a,g);fa.point(m[0],m[1])}function k(){H.point=f;fa.lineStart()}function h(){H.point=e;fa.lineEnd()}function l(a,g){s.push([a,g]);var m=d(a,g);G.point(m[0],m[1])}function n(){G.lineStart();s=[]}function p(){l(s[0][0],s[0][1]);G.lineEnd();var a;a=G.clean();var g=K.buffer(),m=g.length;if(s.pop(),r.push(s),s=null,m)if(1&a){a=g[0];var b,m=a.length-1,g=-1;if(0<m){x||(u.polygonStart(),x=!0);for(u.lineStart();++g<m;)u.point((b=a[g])[0],b[1]);u.lineEnd()}}else 1<
m&&2&a&&g.push(g.pop().concat(g.shift())),q.push(g.filter(Sg))}var q,r,s,fa=g(u),R=d.invert(b[0],b[1]),H={point:e,lineStart:k,lineEnd:h,polygonStart:function(){H.point=l;H.lineStart=n;H.lineEnd=p;q=[];r=[]},polygonEnd:function(){H.point=e;H.lineStart=k;H.lineEnd=h;q=t.merge(q);var a,g=R;a=r;var b=g[0],d=g[1],D=[Math.sin(b),-Math.cos(b),0],f=0,B=0;Sa.reset();for(var V=0,l=a.length;l>V;++V){var n=a[V],p=n.length;if(p)for(var Q=n[0],ma=Q[0],g=Q[1]/2+F/4,Pa=Math.sin(g),s=Math.cos(g),K=1;;){K===p&&(K=
0);var g=n[K],Qc=g[0],fa=g[1]/2+F/4,G=Math.sin(fa),fa=Math.cos(fa),v=Qc-ma,w=0<=v?1:-1,y=w*v,z=y>F,Pa=Pa*G;if(Sa.add(Math.atan2(Pa*w*Math.sin(y),s*fa+Pa*Math.cos(y))),f+=z?v+w*ha:v,z^ma>=b^Qc>=b)Q=db(Ta(Q),Ta(g)),Tb(Q),ma=db(D,Q),Tb(ma),ma=(z^0<=v?-1:1)*ab(ma[2]),(d>ma||d===ma&&(Q[0]||Q[1]))&&(B+=z^0<=v?1:-1);if(!K++)break;ma=Qc;Pa=G;s=fa;Q=g}}a=(-C>f||C>f&&0>Sa)^1&B;q.length?(x||(u.polygonStart(),x=!0),te(q,Tg,a,m,u)):a&&(x||(u.polygonStart(),x=!0),u.lineStart(),m(null,null,1,u),u.lineEnd());x&&
(u.polygonEnd(),x=!1);q=r=null},sphere:function(){u.polygonStart();u.lineStart();m(null,null,1,u);u.lineEnd();u.polygonEnd()}},K=we(),G=g(K),x=!1;return H}}function Sg(a){return 1<a.length}function we(){var a,g=[];return{lineStart:function(){g.push(a=[])},point:function(g,b){a.push([g,b])},lineEnd:v,buffer:function(){var m=g;return g=[],a=null,m},rejoin:function(){1<g.length&&g.push(g.pop().concat(g.shift()))}}}function Tg(a,g){return(0>(a=a.x)[0]?a[1]-Y-C:Y-a[1])-(0>(g=g.x)[0]?g[1]-Y-C:Y-g[1])}function Ug(a){function g(a,
g){return Math.cos(a)*Math.cos(g)>d}function m(a,g,m){var b=Ta(a),u=Ta(g),e=[1,0,0],u=db(b,u),D=Rb(u,u),b=u[0],f=D-b*b;if(!f)return!m&&a;D=d*D/f;f=-d*b/f;b=db(e,u);e=Sb(e,D);u=Sb(u,f);Tc(e,u);u=Rb(e,b);D=Rb(b,b);f=u*u-D*(Rb(e,e)-1);if(!(0>f)){var k=Math.sqrt(f),f=Sb(b,(-u-k)/D);if(Tc(f,e),f=Ub(f),!m)return f;var V;m=a[0];var h=g[0];a=a[1];g=g[1];m>h&&(V=m,m=h,h=V);var U=h-m,l=I(U-F)<C,n=l||C>U;if(!l&&a>g&&(V=a,a=g,g=V),n?l?0<a+g^f[1]<(I(f[0]-m)<C?a:g):a<=f[1]&&f[1]<=g:U>F^(m<=f[0]&&f[0]<=h))return V=
Sb(b,(-u+k)/D),Tc(V,e),[f,Ub(V)]}}function b(g,m){var d=u?a:F-a,e=0;return-d>g?e|=1:g>d&&(e|=2),-d>m?e|=4:m>d&&(e|=8),e}var d=Math.cos(a),u=0<d,e=I(d)>C,f=Vc(a,6*E);return ve(g,function(a){var d,f,B,k,V;return{lineStart:function(){k=B=!1;V=1},point:function(h,l){var n,p=[h,l],q=g(h,l),t=u?q?0:b(h,l):q?b(h+(0>h?F:-F),l):0;if(!d&&(k=B=q)&&a.lineStart(),q!==B&&(n=m(d,p),(Vb(d,n)||Vb(p,n))&&(p[0]+=C,p[1]+=C,q=g(p[0],p[1]))),q!==B)V=0,q?(a.lineStart(),n=m(p,d),a.point(n[0],n[1])):(n=m(d,p),a.point(n[0],
n[1]),a.lineEnd()),d=n;else if(e&&d&&u^q){var r;t&f||!(r=m(p,d,!0))||(V=0,u?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!q||d&&Vb(d,p)||a.point(p[0],p[1]);d=p;B=q;f=t},lineEnd:function(){B&&a.lineEnd();d=null},clean:function(){return V|(k&&B)<<1}}},f,u?[0,-a]:[-F,a-F])}function xe(a,g,m,b){return function(d){var u,e=d.a,f=d.b,k=e.x,e=e.y,h=0,l=1,n=f.x-k,f=f.y-e;if(u=a-k,n||!(0<u)){if(u/=
n,0>n){if(h>u)return;l>u&&(l=u)}else if(0<n){if(u>l)return;u>h&&(h=u)}if(u=m-k,n||!(0>u)){if(u/=n,0>n){if(u>l)return;u>h&&(h=u)}else if(0<n){if(h>u)return;l>u&&(l=u)}if(u=g-e,f||!(0<u)){if(u/=f,0>f){if(h>u)return;l>u&&(l=u)}else if(0<f){if(u>l)return;u>h&&(h=u)}if(u=b-e,f||!(0>u)){if(u/=f,0>f){if(u>l)return;u>h&&(h=u)}else if(0<f){if(h>u)return;l>u&&(l=u)}return 0<h&&(d.a={x:k+h*n,y:e+h*f}),1>l&&(d.b={x:k+l*n,y:e+l*f}),d}}}}}}function ye(a,g,m,b){function d(b,u){return I(b[0]-a)<C?0<u?0:3:I(b[0]-
m)<C?0<u?2:1:I(b[1]-g)<C?0<u?1:0:0<u?3:2}function u(a,g){return e(a.x,g.x)}function e(a,g){var m=d(a,1),b=d(g,1);return m!==b?m-b:0===m?g[1]-a[1]:1===m?a[0]-g[0]:2===m?a[1]-g[1]:g[0]-a[0]}return function(f){function k(u,f,h,V){var l=0,$a=0;if(null==u||(l=d(u,h))!==($a=d(f,h))||0>e(u,f)^0<h){do V.point(0===l||3===l?a:m,1<l?b:g);while((l=(l+h+4)%4)!==$a)}else V.point(f[0],f[1])}function h(d,u){d>=a&&m>=d&&u>=g&&b>=u&&f.point(d,u)}function l(d,u){d=Math.max(-Xb,Math.min(Xb,d));u=Math.max(-Xb,Math.min(Xb,
u));var e=d>=a&&m>=d&&u>=g&&b>=u;if(p&&q.push([d,u]),G)r=d,s=u,x=e,G=!1,e&&(f.lineStart(),f.point(d,u));else if(e&&K)f.point(d,u);else{var B={a:{x:R,y:H},b:{x:d,y:u}};y(B)?(K||(f.lineStart(),f.point(B.a.x,B.a.y)),f.point(B.b.x,B.b.y),e||f.lineEnd(),v=!1):e&&(f.lineStart(),f.point(d,u),v=!1)}R=d;H=u;K=e}var n,p,q,r,s,x,R,H,K,G,v,w=f,Ha=we(),y=xe(a,g,m,b),z={point:h,lineStart:function(){z.point=l;p&&p.push(q=[]);G=!0;K=!1;R=H=0/0},lineEnd:function(){n&&(l(r,s),x&&K&&Ha.rejoin(),n.push(Ha.buffer()));
z.point=h;K&&f.lineEnd()},polygonStart:function(){f=Ha;n=[];p=[];v=!0},polygonEnd:function(){f=w;n=t.merge(n);var g;g=[a,b];for(var m=0,d=p.length,e=g[1],B=0;d>B;++B)for(var h,U=1,l=p[B],Z=l.length,Q=l[0];Z>U;++U)h=l[U],Q[1]<=e?h[1]>e&&0<Fc(Q,h,g)&&++m:h[1]<=e&&0>Fc(Q,h,g)&&--m,Q=h;g=0!==m;m=v&&g;d=n.length;(m||d)&&(f.polygonStart(),m&&(f.lineStart(),k(null,null,1,f),f.lineEnd()),d&&te(n,u,g,k,f),f.polygonEnd());n=p=q=null}};return z}}function ze(a,g){function m(m,b){return m=a(m,b),g(m[0],m[1])}
return a.invert&&g.invert&&(m.invert=function(m,b){return m=g.invert(m,b),m&&a.invert(m[0],m[1])}),m}function Wc(a){var g=0,m=F/3,b=Xc(a);a=b(g,m);return a.parallels=function(a){return arguments.length?b(g=a[0]*F/180,m=a[1]*F/180):[g/F*180,m/F*180]},a}function Ae(a,g){function m(a,g){var m=Math.sqrt(u-2*d*Math.sin(g))/d;return[m*Math.sin(a*=d),e-m*Math.cos(a)]}var b=Math.sin(a),d=(b+Math.sin(g))/2,u=1+b*(2*d-b),e=Math.sqrt(u)/d;return m.invert=function(a,g){var m=e-g;return[Math.atan2(a,m)/d,ab((u-
(a*a+m*m)*d*d)/(2*d))]},m}function Vg(){function a(a,g){Yb+=d*a-b*g;b=a;d=g}var g,m,b,d;Ka.point=function(u,e){Ka.point=a;g=b=u;m=d=e};Ka.lineEnd=function(){a(g,m)}}function Wg(){function a(a,g){e.push("M",a,",",g,u)}function g(a,g){e.push("M",a,",",g);f.point=m}function m(a,g){e.push("L",a,",",g)}function b(){f.point=a}function d(){e.push("Z")}var u=Be(4.5),e=[],f={point:a,lineStart:function(){f.point=g},lineEnd:b,polygonStart:function(){f.lineEnd=d},polygonEnd:function(){f.lineEnd=b;f.point=a},
pointRadius:function(a){return u=Be(a),f},result:function(){if(e.length){var a=e.join("");return e=[],a}}};return f}function Be(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Ua(a,g){Ca+=a;Da+=g;++ua}function Ce(){function a(a,b){var d=a-g,e=b-m,d=Math.sqrt(d*d+e*e);ja+=d*(g+a)/2;ka+=d*(m+b)/2;ea+=d;Ua(g=a,m=b)}var g,m;qa.point=function(b,d){qa.point=a;Ua(g=b,m=d)}}function De(){qa.point=Ua}function Xg(){function a(a,g){var m=a-b,e=g-d,m=Math.sqrt(m*m+e*e);
ja+=m*(b+a)/2;ka+=m*(d+g)/2;ea+=m;m=d*a-b*g;Ia+=m*(b+a);Ja+=m*(d+g);va+=3*m;Ua(b=a,d=g)}var g,m,b,d;qa.point=function(u,e){qa.point=a;Ua(g=b=u,m=d=e)};qa.lineEnd=function(){a(g,m)}}function Yg(a){function g(g,m){a.moveTo(g,m);a.arc(g,m,e,0,ha)}function m(g,m){a.moveTo(g,m);f.point=b}function b(g,m){a.lineTo(g,m)}function d(){f.point=g}function u(){a.closePath()}var e=4.5,f={point:g,lineStart:function(){f.point=m},lineEnd:d,polygonStart:function(){f.lineEnd=u},polygonEnd:function(){f.lineEnd=d;f.point=
g},pointRadius:function(a){return e=a,f},result:v};return f}function Ee(a){function g(a){return(f?b:m)(a)}function m(g){return Fe(g,function(m,b){m=a(m,b);g.point(m[0],m[1])})}function b(g){function m(b,d){b=a(b,d);g.point(b[0],b[1])}function e(){x=0/0;N.point=u;g.lineStart()}function u(m,b){var e=Ta([m,b]),D=a(m,b);d(x,v,s,w,y,z,x=D[0],v=D[1],s=m,w=e[0],y=e[1],z=e[2],f,g);g.point(x,v)}function D(){N.point=m;g.lineEnd()}function k(){e();N.point=h;N.lineEnd=l}function h(a,g){u(U=a,g);n=x;p=v;q=w;t=
y;r=z;N.point=u}function l(){d(x,v,s,w,y,z,n,p,U,q,t,r,f,g);N.lineEnd=D;D()}var U,n,p,q,t,r,s,x,v,w,y,z,N={point:m,lineStart:e,lineEnd:D,polygonStart:function(){g.polygonStart();N.lineStart=k},polygonEnd:function(){g.polygonEnd();N.lineStart=e}};return N}function d(g,m,b,f,D,k,h,V,l,n,p,q,t,r){var s=h-g,x=V-m,v=s*s+x*x;if(v>4*u&&t--){var w=f+n,y=D+p,z=k+q,N=Math.sqrt(w*w+y*y+z*z),cb=Math.asin(z/=N),L=I(I(z)-1)<C||I(b-l)<C?(b+l)/2:Math.atan2(y,w),A=a(L,cb),cb=A[0],A=A[1],M=cb-g,E=A-m,F=x*M-s*E;(F*
F/v>u||.3<I((s*M+x*E)/v-.5)||e>f*n+D*p+k*q)&&(d(g,m,b,f,D,k,cb,A,L,w/=N,y/=N,z,t,r),r.point(cb,A),d(cb,A,L,w,y,z,h,V,l,n,p,q,t,r))}}var u=.5,e=Math.cos(30*E),f=16;return g.precision=function(a){return arguments.length?(f=0<(u=a*a)&&16,g):Math.sqrt(u)},g}function Zg(a){var g=Ee(function(g,b){return a([g*P,b*P])});return function(a){return Ge(g(a))}}function He(a){this.stream=a}function Fe(a,g){return{point:g,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},
polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function La(a){return Xc(function(){return a})()}function Xc(a){function g(a){return a=k(a[0]*E,a[1]*E),[a[0]*q+h,l-a[1]*q]}function m(a){return a=k.invert((a[0]-h)/q,(l-a[1])/q),a&&[a[0]*P,a[1]*P]}function b(){k=ze(f=Yc(R,H,K),e);var a=e(x,v);return h=r-a[0]*q,l=s+a[1]*q,d()}function d(){return n&&(n.valid=!1,n=null),g}var e,f,k,h,l,n,p=Ee(function(a,g){return a=e(a,g),[a[0]*q+h,l-a[1]*q]}),q=150,r=480,s=250,x=0,v=0,
R=0,H=0,K=0,G=Ie,w=X,ta=null,y=null;return g.stream=function(a){return n&&(n.valid=!1),n=Ge(G(f,p(w(a)))),n.valid=!0,n},g.clipAngle=function(a){return arguments.length?(G=null==a?(ta=a,Ie):Ug((ta=+a)*E),d()):ta},g.clipExtent=function(a){return arguments.length?(y=a,w=a?ye(a[0][0],a[0][1],a[1][0],a[1][1]):X,d()):y},g.scale=function(a){return arguments.length?(q=+a,b()):q},g.translate=function(a){return arguments.length?(r=+a[0],s=+a[1],b()):[r,s]},g.center=function(a){return arguments.length?(x=a[0]%
360*E,v=a[1]%360*E,b()):[x*P,v*P]},g.rotate=function(a){return arguments.length?(R=a[0]%360*E,H=a[1]%360*E,K=2<a.length?a[2]%360*E:0,b()):[R*P,H*P,K*P]},t.rebind(g,p,"precision"),function(){return e=a.apply(this,arguments),g.invert=e.invert&&m,b()}}function Ge(a){return Fe(a,function(g,m){a.point(g*E,m*E)})}function rb(a,g){return[a,g]}function Je(a,g){return[a>F?a-ha:-F>a?a+ha:a,g]}function Yc(a,g,m){return a?g||m?ze(Ke(a),Le(g,m)):Ke(a):g||m?Le(g,m):Je}function Me(a){return function(g,m){return g+=
a,[g>F?g-ha:-F>g?g+ha:g,m]}}function Ke(a){var g=Me(a);return g.invert=Me(-a),g}function Le(a,g){function m(a,g){var m=Math.cos(g),k=Math.cos(a)*m,m=Math.sin(a)*m,h=Math.sin(g),l=h*b+k*d;return[Math.atan2(m*e-l*f,k*b-h*d),ab(l*e+m*f)]}var b=Math.cos(a),d=Math.sin(a),e=Math.cos(g),f=Math.sin(g);return m.invert=function(a,g){var m=Math.cos(g),k=Math.cos(a)*m,m=Math.sin(a)*m,h=Math.sin(g),l=h*e-m*f;return[Math.atan2(m*e+h*f,k*b+l*d),ab(l*b-k*d)]},m}function Vc(a,g){var m=Math.cos(a),b=Math.sin(a);return function(d,
e,f,k){var h=f*g;null!=d?(d=Ne(m,d),e=Ne(m,e),(0<f?e>d:d>e)&&(d+=f*ha)):(d=a+f*ha,e=a-.5*h);for(var l;0<f?d>e:e>d;d-=h)k.point((l=Ub([m,-b*Math.cos(d),-b*Math.sin(d)]))[0],l[1])}}function Ne(a,g){var m=Ta(g);m[0]-=a;Tb(m);var b=Wd(-m[1]);return((0>-m[2]?-b:b)+2*Math.PI-C)%(2*Math.PI)}function Oe(a,g,m){var b=t.range(a,g-C,m).concat(g);return function(a){return b.map(function(g){return[a,g]})}}function Pe(a,g,m){var b=t.range(a,g-C,m).concat(g);return function(a){return b.map(function(g){return[g,
a]})}}function Zc(a){return a.source}function $c(a){return a.target}function $g(a,g,m,b){var d=Math.cos(g),e=Math.sin(g),f=Math.cos(b),k=Math.sin(b),h=d*Math.cos(a),l=d*Math.sin(a),n=f*Math.cos(m),p=f*Math.sin(m),q=2*Math.asin(Math.sqrt(Yd(b-g)+d*f*Yd(m-a))),r=1/Math.sin(q);m=q?function(a){var g=Math.sin(a*=q)*r,m=Math.sin(q-a)*r;a=m*h+g*n;var b=m*l+g*p,g=m*e+g*k;return[Math.atan2(b,a)*P,Math.atan2(g,Math.sqrt(a*a+b*b))*P]}:function(){return[a*P,g*P]};return m.distance=q,m}function sb(a,g){function m(g,
m){var b=Math.cos(g),d=Math.cos(m),b=a(b*d);return[b*d*Math.sin(g),b*Math.sin(m)]}return m.invert=function(a,m){var b=Math.sqrt(a*a+m*m),d=g(b),e=Math.sin(d),d=Math.cos(d);return[Math.atan2(a*e,b*d),Math.asin(b&&m*e/b)]},m}function Qe(a,g){function m(a,g){0<e?-Y+C>g&&(g=-Y+C):g>Y-C&&(g=Y-C);var m=e/Math.pow(Math.tan(F/4+g/2),d);return[m*Math.sin(d*a),e-m*Math.cos(d*a)]}var b=Math.cos(a),d=a===g?Math.sin(a):Math.log(b/Math.cos(g))/Math.log(Math.tan(F/4+g/2)/Math.tan(F/4+a/2)),e=b*Math.pow(Math.tan(F/
4+a/2),d)/d;return d?(m.invert=function(a,g){var m=e-g,b=(0<d?1:0>d?-1:0)*Math.sqrt(a*a+m*m);return[Math.atan2(a,m)/d,2*Math.atan(Math.pow(e/b,1/d))-Y]},m):Zb}function Re(a,g){function m(a,g){var m=e-g;return[m*Math.sin(d*a),e-m*Math.cos(d*a)]}var b=Math.cos(a),d=a===g?Math.sin(a):(b-Math.cos(g))/(g-a),e=b/d+a;return I(d)<C?rb:(m.invert=function(a,g){var m=e-g;return[Math.atan2(a,m)/d,e-(0<d?1:0>d?-1:0)*Math.sqrt(a*a+m*m)]},m)}function Zb(a,g){return[a,Math.log(Math.tan(F/4+g/2))]}function Se(a){var g,
m=La(a),b=m.scale,d=m.translate,e=m.clipExtent;return m.scale=function(){var a=b.apply(m,arguments);return a===m?g?m.clipExtent(null):m:a},m.translate=function(){var a=d.apply(m,arguments);return a===m?g?m.clipExtent(null):m:a},m.clipExtent=function(a){var f=e.apply(m,arguments);if(f===m){if(g=null==a){var k=F*b(),h=d();e([[h[0]-k,h[1]-k],[h[0]+k,h[1]+k]])}}else g&&(f=null);return f},m.clipExtent(null)}function ad(a,g){return[Math.log(Math.tan(F/4+g/2)),-a]}function gb(a){return a[0]}function tb(a){return a[1]}
function Te(a){for(var g=a.length,m=[0,1],b=2,d=2;g>d;d++){for(;1<b&&0>=Fc(a[m[b-2]],a[m[b-1]],a[d]);)--b;m[b++]=d}return m.slice(0,b)}function ah(a,g){return a[0]-g[0]||a[1]-g[1]}function bd(a,g,m){return(m[0]-g[0])*(a[1]-g[1])<(m[1]-g[1])*(a[0]-g[0])}function Ue(a,g,m,b){var d=a[0],e=m[0],f=g[0]-d,k=b[0]-e;a=a[1];m=m[1];g=g[1]-a;b=b[1]-m;e=(k*(a-m)-b*(d-e))/(b*f-k*g);return[d+e*f,a+e*g]}function Ve(a){var g=a[0];a=a[a.length-1];return!(g[0]-a[0]||g[1]-a[1])}function bh(){$b(this);this.edge=this.site=
this.circle=null}function We(a){var g=Xe.pop()||new bh;return g.site=a,g}function cd(a){hb(a);ib.remove(a);Xe.push(a);$b(a)}function Ye(a,g){var m=a.site,b=m.x,d=m.y,e=d-g;if(!e)return b;var f=a.P;if(!f)return-1/0;var m=f.site,f=m.x,m=m.y,k=m-g;if(!k)return f;var h=f-b,l=1/e-1/k,n=h/k;return l?(-n+Math.sqrt(n*n-2*l*(h*h/(-2*k)-m+k/2+d-e/2)))/l+b:(b+f)/2}function Ze(a){this.site=a;this.edges=[]}function $e(a,g){return g.angle-a.angle}function ch(){$b(this);this.x=this.y=this.arc=this.site=this.cy=
null}function jb(a){var g=a.P,m=a.N;if(g&&m){var b=g.site,g=a.site,d=m.site;if(b!==d){var m=g.x,e=g.y,f=b.x-m,k=b.y-e,b=d.x-m,d=d.y-e,h=2*(f*d-k*b);if(!(h>=-dd)){var l=f*f+k*k,n=b*b+d*d,k=(d*l-k*n)/h,f=(f*n-b*l)/h,d=f+e,e=af.pop()||new ch;e.arc=a;e.site=g;e.x=k+m;e.y=d+Math.sqrt(k*k+f*f);e.cy=d;a.circle=e;a=null;for(g=ub._;g;)if(e.y<g.y||e.y===g.y&&e.x<=g.x){if(!g.L){a=g.P;break}g=g.L}else{if(!g.R){a=g;break}g=g.R}ub.insert(a,e);a||(ed=e)}}}}function hb(a){var g=a.circle;g&&(g.P||(ed=g.N),ub.remove(g),
af.push(g),$b(g),a.circle=null)}function dh(a,g){var m=a.b;if(m)return!0;var b,d,e=a.a,m=g[0][0],f=g[1][0],k=g[0][1],h=g[1][1],l=a.l,n=a.r,p=l.x,l=l.y,q=n.x,n=n.y;d=(p+q)/2;if(n===l){if(m>d||d>=f)return;if(p>q){if(e){if(e.y>=h)return}else e={x:d,y:k};m={x:d,y:h}}else{if(e){if(e.y<k)return}else e={x:d,y:h};m={x:d,y:k}}}else if(b=(p-q)/(n-l),d=(l+n)/2-b*d,-1>b||1<b)if(p>q){if(e){if(e.y>=h)return}else e={x:(k-d)/b,y:k};m={x:(h-d)/b,y:h}}else{if(e){if(e.y<k)return}else e={x:(h-d)/b,y:h};m={x:(k-d)/b,
y:k}}else if(n>l){if(e){if(e.x>=f)return}else e={x:m,y:b*m+d};m={x:f,y:b*f+d}}else{if(e){if(e.x<m)return}else e={x:f,y:b*f+d};m={x:m,y:b*m+d}}return a.a=e,a.b=m,!0}function bf(a,g){this.l=a;this.r=g;this.a=this.b=null}function vb(a,g,m,b){var d=new bf(a,g);return kb.push(d),m&&ac(d,a,g,m),b&&ac(d,g,a,b),Va[a.i].edges.push(new bc(d,a,g)),Va[g.i].edges.push(new bc(d,g,a)),d}function eh(a,g,m){a=new bf(a,null);return a.a=g,a.b=m,kb.push(a),a}function ac(a,g,m,b){a.a||a.b?a.l===m?a.b=b:a.a=b:(a.a=b,a.l=
g,a.r=m)}function bc(a,g,m){var b=a.a,d=a.b;this.edge=a;this.site=g;this.angle=m?Math.atan2(m.y-g.y,m.x-g.x):a.l===g?Math.atan2(d.x-b.x,b.y-d.y):Math.atan2(b.x-d.x,d.y-b.y)}function fd(){this._=null}function $b(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function wb(a,g){var m=g.R,b=g.U;b?b.L===g?b.L=m:b.R=m:a._=m;m.U=b;g.U=m;g.R=m.L;g.R&&(g.R.U=g);m.L=g}function xb(a,g){var m=g.L,b=g.U;b?b.L===g?b.L=m:b.R=m:a._=m;m.U=b;g.U=m;g.L=m.R;g.L&&(g.L.U=g);m.R=g}function cf(a){for(;a.L;)a=a.L;return a}function gd(a,
g){var m,b,d,e=a.sort(fh).pop();kb=[];Va=Array(a.length);ib=new fd;for(ub=new fd;;)if(d=ed,e&&(!d||e.y<d.y||e.y===d.y&&e.x<d.x)){if(e.x!==m||e.y!==b){Va[e.i]=new Ze(e);m=e;for(var f=b=void 0,k=void 0,h=void 0,l=m.x,n=m.y,p=ib._;p;)if(k=Ye(p,n)-l,k>C)p=p.L;else{var q;var r=p;q=n;var t=r.N;t?q=Ye(t,q):(r=r.site,q=r.y===q?r.x:1/0);if(h=l-q,!(h>C)){k>-C?(b=p.P,f=p):h>-C?(b=p,f=p.N):b=f=p;break}if(!p.R){b=p;break}p=p.R}k=We(m);if(ib.insert(b,k),b||f)if(b===f)hb(b),f=We(b.site),ib.insert(k,f),k.edge=f.edge=
vb(b.site,k.site),jb(b),jb(f);else if(f){hb(b);hb(f);h=b.site;n=h.x;p=h.y;q=m.x-n;var r=m.y-p,l=f.site,t=l.x-n,s=l.y-p,x=2*(q*s-r*t),v=q*q+r*r,H=t*t+s*s,n={x:(s*v-r*H)/x+n,y:(q*H-t*v)/x+p};ac(f.edge,h,l,n);k.edge=vb(h,m,null,n);f.edge=vb(m,l,null,n);jb(b);jb(f)}else k.edge=vb(b.site,k.site);m=e.x;b=e.y}e=a.pop()}else{if(!d)break;l=d.arc;f=l.circle;h=f.x;n=f.cy;f={x:h,y:n};q=l.P;p=l.N;k=[l];cd(l);for(l=q;l.circle&&I(h-l.circle.x)<C&&I(n-l.circle.cy)<C;)q=l.P,k.unshift(l),cd(l),l=q;k.unshift(l);hb(l);
for(q=p;q.circle&&I(h-q.circle.x)<C&&I(n-q.circle.cy)<C;)p=q.N,k.push(q),cd(q),q=p;k.push(q);hb(q);h=void 0;n=k.length;for(h=1;n>h;++h)q=k[h],l=k[h-1],ac(q.edge,l.site,q.site,f);l=k[0];q=k[n-1];q.edge=vb(l.site,q.site,null,f);jb(l);jb(q)}if(g){e=kb;m=xe(g[0][0],g[0][1],g[1][0],g[1][1]);for(b=e.length;b--;)d=e[b],(!dh(d,g)||!m(d)||I(d.a.x-d.b.x)<C&&I(d.a.y-d.b.y)<C)&&(d.a=d.b=null,e.splice(b,1));var K,l=g[0][0],n=g[1][0],p=g[0][1];q=g[1][1];r=Va;for(t=r.length;t--;)if(K=r[t],K&&K.prepare())for(f=K.edges,
k=f.length,b=0;k>b;)h=f[b].end(),e=h.x,m=h.y,s=f[++b%k].start(),d=s.x,s=s.y,(I(e-d)>C||I(m-s)>C)&&(f.splice(b,0,new bc(eh(K.site,h,I(e-l)<C&&q-m>C?{x:l,y:I(d-l)<C?s:q}:I(m-q)<C&&n-e>C?{x:I(s-q)<C?d:n,y:q}:I(e-n)<C&&m-p>C?{x:n,y:I(d-n)<C?s:p}:I(m-p)<C&&e-l>C?{x:I(s-p)<C?d:l,y:p}:null),K.site,null)),++k)}K={cells:Va,edges:kb};return ib=ub=kb=Va=null,K}function fh(a,g){return g.y-a.y||g.x-a.x}function gh(a){return a.x}function hh(a){return a.y}function df(){return{leaf:!0,nodes:[],point:null,x:null,
y:null}}function yb(a,g,m,b,d,e){if(!a(g,m,b,d,e)){var f=.5*(m+d),k=.5*(b+e);g=g.nodes;g[0]&&yb(a,g[0],m,b,f,k);g[1]&&yb(a,g[1],f,b,d,k);g[2]&&yb(a,g[2],m,k,f,e);g[3]&&yb(a,g[3],f,k,d,e)}}function hd(a,g){a=t.rgb(a);g=t.rgb(g);var m=a.r,b=a.g,d=a.b,e=g.r-m,f=g.g-b,k=g.b-d;return function(a){return"#"+bb(Math.round(m+e*a))+bb(Math.round(b+f*a))+bb(Math.round(d+k*a))}}function ef(a,g){var m,b={},d={};for(m in a)m in g?b[m]=Wa(a[m],g[m]):d[m]=a[m];for(m in g)m in a||(d[m]=g[m]);return function(a){for(m in b)d[m]=
b[m](a);return d}}function Ea(a,g){return g-=a=+a,function(m){return a+g*m}}function ff(a,g){var m,b,d,e=id.lastIndex=jd.lastIndex=0,f=-1,k=[],h=[];a+="";for(g+="";(m=id.exec(a))&&(b=jd.exec(g));)(d=b.index)>e&&(d=g.slice(e,d),k[f]?k[f]+=d:k[++f]=d),(m=m[0])===(b=b[0])?k[f]?k[f]+=b:k[++f]=b:(k[++f]=null,h.push({i:f,x:Ea(m,b)})),e=jd.lastIndex;return e<g.length&&(d=g.slice(e),k[f]?k[f]+=d:k[++f]=d),2>k.length?h[0]?(g=h[0].x,function(a){return g(a)+""}):function(){return g}:(g=h.length,function(a){for(var m,
b=0;g>b;++b)k[(m=h[b]).i]=m.x(a);return k.join("")})}function Wa(a,g){for(var m,b=t.interpolators.length;0<=--b&&!(m=t.interpolators[b](a,g)););return m}function cc(a,g){var m,b=[],d=[],e=a.length,f=g.length,k=Math.min(a.length,g.length);for(m=0;k>m;++m)b.push(Wa(a[m],g[m]));for(;e>m;++m)d[m]=a[m];for(;f>m;++m)d[m]=g[m];return function(a){for(m=0;k>m;++m)d[m]=b[m](a);return d}}function ih(a){return function(g){return 0>=g?0:1<=g?1:a(g)}}function gf(a){return function(g){return 1-a(1-g)}}function hf(a){return function(g){return.5*
(.5>g?a(2*g):2-a(2-2*g))}}function jh(a){return a*a}function kh(a){return a*a*a}function lh(a){if(0>=a)return 0;if(1<=a)return 1;var g=a*a,m=g*a;return 4*(.5>a?m:3*(a-g)+m-.75)}function mh(a){return 1-Math.cos(a*Y)}function nh(a){return Math.pow(2,10*(a-1))}function oh(a){return 1-Math.sqrt(1-a*a)}function ph(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function jf(a,g){return g-=a,function(m){return Math.round(a+
g*m)}}function kf(a){var g=[a.a,a.b],m=[a.c,a.d],b=lf(g),d=g[0]*m[0]+g[1]*m[1],e;e=-d;e=(m[0]+=e*g[0],m[1]+=e*g[1],m);e=lf(e)||0;g[0]*m[1]<m[0]*g[1]&&(g[0]*=-1,g[1]*=-1,b*=-1,d*=-1);this.rotate=(b?Math.atan2(g[1],g[0]):Math.atan2(-m[0],m[1]))*P;this.translate=[a.e,a.f];this.scale=[b,e];this.skew=e?Math.atan2(d,e)*P:0}function lf(a){var g=Math.sqrt(a[0]*a[0]+a[1]*a[1]);return g&&(a[0]/=g,a[1]/=g),g}function mf(a,g){var m,b=[],d=[],e=t.transform(a),f=t.transform(g),k=e.translate,h=f.translate,l=e.rotate,
n=f.rotate,p=e.skew,q=f.skew,e=e.scale,f=f.scale;return k[0]!=h[0]||k[1]!=h[1]?(b.push("translate(",null,",",null,")"),d.push({i:1,x:Ea(k[0],h[0])},{i:3,x:Ea(k[1],h[1])})):h[0]||h[1]?b.push("translate("+h+")"):b.push(""),l!=n?(180<l-n?n+=360:180<n-l&&(l+=360),d.push({i:b.push(b.pop()+"rotate(",null,")")-2,x:Ea(l,n)})):n&&b.push(b.pop()+"rotate("+n+")"),p!=q?d.push({i:b.push(b.pop()+"skewX(",null,")")-2,x:Ea(p,q)}):q&&b.push(b.pop()+"skewX("+q+")"),e[0]!=f[0]||e[1]!=f[1]?(m=b.push(b.pop()+"scale(",
null,",",null,")"),d.push({i:m-4,x:Ea(e[0],f[0])},{i:m-2,x:Ea(e[1],f[1])})):(1!=f[0]||1!=f[1])&&b.push(b.pop()+"scale("+f+")"),m=d.length,function(a){for(var g,e=-1;++e<m;)b[(g=d[e]).i]=g.x(a);return b.join("")}}function qh(a,g){return g=g-(a=+a)?1/(g-a):0,function(b){return(b-a)*g}}function rh(a,g){return g=g-(a=+a)?1/(g-a):0,function(b){return Math.max(0,Math.min(1,(b-a)*g))}}function sh(a){var g=a.source;a=a.target;var b;var d=a;if(g===d)b=g;else{b=nf(g);for(var d=nf(d),e=b.pop(),f=d.pop(),k=null;e===
f;)k=e,e=b.pop(),f=d.pop();b=k}for(d=[g];g!==b;)g=g.parent,d.push(g);for(g=d.length;a!==b;)d.splice(g,0,a),a=a.parent;return d}function nf(a){for(var g=[],b=a.parent;null!=b;)g.push(a),a=b,b=b.parent;return g.push(a),g}function th(a){a.fixed|=2}function uh(a){a.fixed&=-7}function vh(a){a.fixed|=4;a.px=a.x;a.py=a.y}function wh(a){a.fixed&=-5}function of(a,g,b){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,k=a.nodes,h=k.length,l=-1;++l<h;)f=k[l],null!=f&&(of(f,g,b),a.charge+=f.charge,d+=f.charge*f.cx,
e+=f.charge*f.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5),g*=b[a.point.index],a.charge+=a.pointCharge=g,d+=g*a.point.x,e+=g*a.point.y);a.cx=d/a.charge;a.cy=e/a.charge}function zb(a,g){return t.rebind(a,g,"sort","children","value"),a.nodes=a,a.links=xh,a}function Ab(a,g){for(var b=[a];null!=(a=b.pop());)if(g(a),(e=a.children)&&(d=e.length))for(var d,e;0<=--d;)b.push(e[d])}function wa(a,g){for(var b=[a],d=[];null!=(a=b.pop());)if(d.push(a),(f=a.children)&&(e=f.length))for(var e,
f,k=-1;++k<e;)b.push(f[k]);for(;null!=(a=d.pop());)g(a)}function yh(a){return a.children}function zh(a){return a.value}function Ah(a,g){return g.value-a.value}function xh(a){return t.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function Bh(a){return a.x}function Ch(a){return a.y}function Dh(a,g,b){a.y0=g;a.y=b}function kd(a){return t.range(a.length)}function ld(a){var g=-1;a=a[0].length;for(var b=[];++g<a;)b[g]=0;return b}function Eh(a){for(var g,b=
1,d=0,e=a[0][1],f=a.length;f>b;++b)(g=a[b][1])>e&&(d=b,e=g);return d}function Fh(a){return a.reduce(Gh,0)}function Gh(a,g){return a+g[1]}function Hh(a,g){return pf(a,Math.ceil(Math.log(g.length)/Math.LN2+1))}function pf(a,g){for(var b=-1,d=+a[0],e=(a[1]-d)/g,f=[];++b<=g;)f[b]=e*b+d;return f}function Ih(a){return[t.min(a),t.max(a)]}function Jh(a,g){return a.value-g.value}function md(a,g){var b=a._pack_next;a._pack_next=g;g._pack_prev=a;g._pack_next=b;b._pack_prev=g}function qf(a,g){a._pack_next=g;
g._pack_prev=a}function rf(a,g){var b=g.x-a.x,d=g.y-a.y,e=a.r+g.r;return.999*e*e>b*b+d*d}function sf(a){function g(a){p=Math.min(a.x-a.r,p);q=Math.max(a.x+a.r,q);r=Math.min(a.y-a.r,r);t=Math.max(a.y+a.r,t)}if((b=a.children)&&(n=b.length)){var b,d,e,f,k,h,l,n,p=1/0,q=-1/0,r=1/0,t=-1/0;if(b.forEach(Kh),d=b[0],d.x=-d.r,d.y=0,g(d),1<n&&(e=b[1],e.x=e.r,e.y=0,g(e),2<n))for(f=b[2],tf(d,e,f),g(f),md(d,f),d._pack_prev=f,md(f,e),e=d._pack_next,k=3;n>k;k++){tf(d,e,f=b[k]);var s=0,x=1,v=1;for(h=e._pack_next;h!==
e;h=h._pack_next,x++)if(rf(h,f)){s=1;break}if(1==s)for(l=d._pack_prev;l!==h._pack_prev&&!rf(l,f);l=l._pack_prev,v++);s?(v>x||x==v&&e.r<d.r?qf(d,e=h):qf(d=l,e),k--):(md(d,f),e=f,g(f))}d=(p+q)/2;e=(r+t)/2;for(k=h=0;n>k;k++)f=b[k],f.x-=d,f.y-=e,h=Math.max(h,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=h;b.forEach(Lh)}}function Kh(a){a._pack_next=a._pack_prev=a}function Lh(a){delete a._pack_next;delete a._pack_prev}function uf(a,g,b,d){var e=a.children;if(a.x=g+=d*a.x,a.y=b+=d*a.y,a.r*=d,e){a=-1;for(var f=e.length;++a<
f;)uf(e[a],g,b,d)}}function tf(a,g,b){var d=a.r+b.r,e=g.x-a.x,f=g.y-a.y;if(d&&(e||f)){var k=g.r+b.r,h=e*e+f*f,k=k*k,d=d*d;g=.5+(d-k)/(2*h);k=Math.sqrt(Math.max(0,2*k*(d+h)-(d-=h)*d-k*k))/(2*h);b.x=a.x+g*e+k*f;b.y=a.y+g*f-k*e}else b.x=a.x+d,b.y=a.y}function vf(a,g){return a.parent==g.parent?1:2}function nd(a){var g=a.children;return g.length?g[0]:a.t}function od(a){var g,b=a.children;return(g=b.length)?b[g-1]:a.t}function Mh(a){return 1+t.max(a,function(a){return a.y})}function Nh(a){return a.reduce(function(a,
b){return a+b.x},0)/a.length}function wf(a){var g=a.children;return g&&g.length?wf(g[0]):a}function xf(a){var g,b=a.children;return b&&(g=b.length)?xf(b[g-1]):a}function pd(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function yf(a,g){var b=a.x+g[3],d=a.y+g[0],e=a.dx-g[1]-g[3],f=a.dy-g[0]-g[2];return 0>e&&(b+=e/2,e=0),0>f&&(d+=f/2,f=0),{x:b,y:d,dx:e,dy:f}}function lb(a){var g=a[0];a=a[a.length-1];return a>g?[g,a]:[a,g]}function dc(a){return a.rangeExtent?a.rangeExtent():lb(a.range())}function Oh(a,g,b,
d){var e=b(a[0],a[1]),f=d(g[0],g[1]);return function(a){return f(e(a))}}function ec(a,g){var b,d=0,e=a.length-1,f=a[d],k=a[e];return f>k&&(b=d,d=e,e=b,b=f,f=k,k=b),a[d]=g.floor(f),a[e]=g.ceil(k),a}function zf(a){return a?{floor:function(g){return Math.floor(g/a)*a},ceil:function(g){return Math.ceil(g/a)*a}}:Ph}function Qh(a,g,b,d){var e=[],f=[],k=0,h=Math.min(a.length,g.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),g=g.slice().reverse());++k<=h;)e.push(b(a[k-1],a[k])),f.push(d(g[k-1],g[k]));return function(g){var b=
t.bisect(a,g,1,h)-1;return f[b](e[b](g))}}function Af(a,g,b,d){function e(){var l=2<Math.min(a.length,g.length)?Qh:Oh,B=d?rh:qh;return k=l(a,g,B,b),h=l(g,a,B,Wa),f}function f(a){return k(a)}var k,h;return f.invert=function(a){return h(a)},f.domain=function(g){return arguments.length?(a=g.map(Number),e()):a},f.range=function(a){return arguments.length?(g=a,e()):g},f.rangeRound=function(a){return f.range(a).interpolate(jf)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?
(b=a,e()):b},f.ticks=function(g){return t.range.apply(t,Ma(a,g))},f.tickFormat=function(g,b){return qd(a,g,b)},f.nice=function(g){return ec(a,zf(Ma(a,g)[2])),e()},f.copy=function(){return Af(a,g,b,d)},e()}function rd(a,g){return t.rebind(a,g,"range","rangeRound","interpolate","clamp")}function Ma(a,g){null==g&&(g=10);var b=lb(a),d=b[1]-b[0],e=Math.pow(10,Math.floor(Math.log(d/g)/Math.LN10)),d=g/d*e;return.15>=d?e*=10:.35>=d?e*=5:.75>=d&&(e*=2),b[0]=Math.ceil(b[0]/e)*e,b[1]=Math.floor(b[1]/e)*e+.5*
e,b[2]=e,b}function qd(a,g,b){a=Ma(a,g);if(b){g=je.exec(b);if(g.shift(),"s"===g[8]){var d=t.formatPrefix(Math.max(I(a[0]),I(a[1])));return g[7]||(g[7]="."+fc(d.scale(a[2]))),g[8]="f",b=t.format(g.join("")),function(a){return b(d.scale(a))+d.symbol}}g[7]||(g[7]="."+Rh(g[8],a));b=g.join("")}else b=",."+fc(a[2])+"f";return t.format(b)}function fc(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function Rh(a,g){var b=fc(g[2]);return a in Sh?Math.abs(b-fc(Math.max(I(g[0]),I(g[1]))))+ +("e"!==a):b-2*("%"===
a)}function Bf(a,g,b,d){function e(a){return(b?Math.log(0>a?0:a):-Math.log(0<a?0:-a))/Math.log(g)}function f(a){return b?Math.pow(g,a):-Math.pow(g,-a)}function k(g){return a(e(g))}return k.invert=function(g){return f(a.invert(g))},k.domain=function(g){return arguments.length?(b=0<=g[0],a.domain((d=g.map(Number)).map(e)),k):d},k.base=function(b){return arguments.length?(g=+b,a.domain(d.map(e)),k):g},k.nice=function(){var g=ec(d.map(e),b?Math:Th);return a.domain(g),d=g.map(f),k},k.ticks=function(){var a=
lb(d),k=[],h=a[0],a=a[1],l=Math.floor(e(h)),n=Math.ceil(e(a)),p=g%1?2:g;if(isFinite(n-l)){if(b){for(;n>l;l++)for(var q=1;p>q;q++)k.push(f(l)*q);k.push(f(l))}else for(k.push(f(l));l++<n;)for(q=p-1;0<q;q--)k.push(f(l)*q);for(l=0;k[l]<h;l++);for(n=k.length;k[n-1]>a;n--);k=k.slice(l,n)}return k},k.tickFormat=function(a,g){if(!arguments.length)return Cf;2>arguments.length?g=Cf:"function"!=typeof g&&(g=t.format(g));var d,h=Math.max(.1,a/k.ticks().length),l=b?(d=1E-12,Math.ceil):(d=-1E-12,Math.floor);return function(a){return a/
f(l(e(a)+d))<=h?g(a):""}},k.copy=function(){return Bf(a.copy(),g,b,d)},rd(k,a)}function Df(a,g,b){function d(g){return a(e(g))}var e=gc(g),f=gc(1/g);return d.invert=function(g){return f(a.invert(g))},d.domain=function(g){return arguments.length?(a.domain((b=g.map(Number)).map(e)),d):b},d.ticks=function(a){return t.range.apply(t,Ma(b,a))},d.tickFormat=function(a,g){return qd(b,a,g)},d.nice=function(a){return d.domain(ec(b,zf(Ma(b,a)[2])))},d.exponent=function(k){return arguments.length?(e=gc(g=k),
f=gc(1/g),a.domain(b.map(e)),d):g},d.copy=function(){return Df(a.copy(),g,b)},rd(d,a)}function gc(a){return function(g){return 0>g?-Math.pow(-g,a):Math.pow(g,a)}}function Ef(a,g){function b(d){return f[((e.get(d)||("range"===g.t?e.set(d,a.push(d)):0/0))-1)%f.length]}function d(g,b){return t.range(a.length).map(function(a){return g+b*a})}var e,f,h;return b.domain=function(d){if(!arguments.length)return a;a=[];e=new k;for(var f,u=-1,h=d.length;++u<h;)e.has(f=d[u])||e.set(f,a.push(f));return b[g.t].apply(b,
g.a)},b.range=function(a){return arguments.length?(f=a,h=0,g={t:"range",a:arguments},b):f},b.rangePoints=function(e,k){2>arguments.length&&(k=0);var l=e[0],n=e[1],B=(n-l)/(Math.max(1,a.length-1)+k);return f=d(2>a.length?(l+n)/2:l+B*k/2,B),h=0,g={t:"rangePoints",a:arguments},b},b.rangeBands=function(e,k,l){2>arguments.length&&(k=0);3>arguments.length&&(l=k);var n=e[1]<e[0],B=e[n-0],p=(e[1-n]-B)/(a.length-k+2*l);return f=d(B+p*l,p),n&&f.reverse(),h=p*(1-k),g={t:"rangeBands",a:arguments},b},b.rangeRoundBands=
function(e,k,l){2>arguments.length&&(k=0);3>arguments.length&&(l=k);var n=e[1]<e[0],B=e[n-0],p=e[1-n],q=Math.floor((p-B)/(a.length-k+2*l));return f=d(B+Math.round((p-B-(a.length-k)*q)/2),q),n&&f.reverse(),h=Math.round(q*(1-k)),g={t:"rangeRoundBands",a:arguments},b},b.rangeBand=function(){return h},b.rangeExtent=function(){return lb(g.a[0])},b.copy=function(){return Ef(a,g)},b.domain(a)}function Ff(a,g){function b(){var m=0,e=g.length;for(f=[];++m<e;)f[m-1]=t.quantile(a,m/e);return d}function d(a){return isNaN(a=
+a)?void 0:g[t.bisect(f,a)]}var f;return d.domain=function(g){return arguments.length?(a=g.filter(h).sort(e),b()):a},d.range=function(a){return arguments.length?(g=a,b()):g},d.quantiles=function(){return f},d.invertExtent=function(b){return b=g.indexOf(b),0>b?[0/0,0/0]:[0<b?f[b-1]:a[0],b<f.length?f[b]:a[a.length-1]]},d.copy=function(){return Ff(a,g)},b()}function Gf(a,g,b){function d(g){return b[Math.max(0,Math.min(k,Math.floor(f*(g-a))))]}function e(){return f=b.length/(g-a),k=b.length-1,d}var f,
k;return d.domain=function(b){return arguments.length?(a=+b[0],g=+b[b.length-1],e()):[a,g]},d.range=function(a){return arguments.length?(b=a,e()):b},d.invertExtent=function(g){return g=b.indexOf(g),g=0>g?0/0:g/f+a,[g,g+1/f]},d.copy=function(){return Gf(a,g,b)},e()}function Hf(a,g){function b(d){return d>=d?g[t.bisect(a,d)]:void 0}return b.domain=function(g){return arguments.length?(a=g,b):a},b.range=function(a){return arguments.length?(g=a,b):g},b.invertExtent=function(b){return b=g.indexOf(b),[a[b-
1],a[b]]},b.copy=function(){return Hf(a,g)},b}function If(a){function g(a){return+a}return g.invert=g,g.domain=g.range=function(b){return arguments.length?(a=b.map(g),g):a},g.ticks=function(g){return t.range.apply(t,Ma(a,g))},g.tickFormat=function(g,b){return qd(a,g,b)},g.copy=function(){return If(a)},g}function Uh(a){return a.innerRadius}function Vh(a){return a.outerRadius}function Jf(a){return a.startAngle}function Kf(a){return a.endAngle}function Lf(a){function g(g){function k(){n.push("M",f(a(p),
h))}for(var l,n=[],p=[],q=-1,r=g.length,U=J(b),t=J(d);++q<r;)e.call(this,l=g[q],q)?p.push([+U.call(this,l,q),+t.call(this,l,q)]):p.length&&(k(),p=[]);return p.length&&k(),n.length?n.join(""):null}var b=gb,d=tb,e=fb,f=ia,k=f.key,h=.7;return g.x=function(a){return arguments.length?(b=a,g):b},g.y=function(a){return arguments.length?(d=a,g):d},g.defined=function(a){return arguments.length?(e=a,g):e},g.interpolate=function(a){return arguments.length?(k="function"==typeof a?f=a:(f=sd.get(a)||ia).key,g):
k},g.tension=function(a){return arguments.length?(h=a,g):h},g}function ia(a){return a.join("L")}function td(a){for(var g=0,b=a.length,d=a[0],e=[d[0],",",d[1]];++g<b;)e.push("V",(d=a[g])[1],"H",d[0]);return e.join("")}function ud(a){for(var g=0,b=a.length,d=a[0],e=[d[0],",",d[1]];++g<b;)e.push("H",(d=a[g])[0],"V",d[1]);return e.join("")}function hc(a,g){if(1>g.length||a.length!=g.length&&a.length!=g.length+2)return ia(a);var b=a.length!=g.length,d="",e=a[0],f=a[1],k=g[0],h=k,l=1;if(b&&(d+="Q"+(f[0]-
2*k[0]/3)+","+(f[1]-2*k[1]/3)+","+f[0]+","+f[1],e=a[1],l=2),1<g.length)for(h=g[1],f=a[l],l++,d+="C"+(e[0]+k[0])+","+(e[1]+k[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1],e=2;e<g.length;e++,l++)f=a[l],h=g[e],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];b&&(b=a[l],d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+b[0]+","+b[1]);return d}function vd(a,g){for(var b,d=[],e=(1-g)/2,f=a[0],k=a[1],h=1,l=a.length;++h<l;)b=f,f=k,k=a[h],d.push([e*(k[0]-b[0]),e*(k[1]-b[1])]);return d}function Mf(a){if(3>
a.length)return ia(a);var g=1,b=a.length,d=a[0],e=d[0],f=d[1],k=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],e=[e,",",f,"L",la(Na,k),",",la(Na,h)];for(a.push(a[b-1]);++g<=b;)d=a[g],k.shift(),k.push(d[0]),h.shift(),h.push(d[1]),wd(e,k,h);return a.pop(),e.push("L",d),e.join("")}function la(a,g){return a[0]*g[0]+a[1]*g[1]+a[2]*g[2]+a[3]*g[3]}function wd(a,g,b){a.push("C",la(Nf,g),",",la(Nf,b),",",la(Of,g),",",la(Of,b),",",la(Na,g),",",la(Na,b))}function xd(a,g){return(g[1]-a[1])/(g[0]-a[0])}function Pf(a){for(var g,
b,d,e=-1,f=a.length;++e<f;)g=a[e],b=g[0],d=g[1]+Xa,g[0]=b*Math.cos(d),g[1]=b*Math.sin(d);return a}function Qf(a){function g(g){function l(){$a.push("M",h(a(K),q),p,n(a(x.reverse()),q),"Z")}for(var r,t,s,$a=[],x=[],K=[],v=-1,w=g.length,ta=J(b),y=J(e),z=b===d?function(){return t}:J(d),N=e===f?function(){return s}:J(f);++v<w;)k.call(this,r=g[v],v)?(x.push([t=+ta.call(this,r,v),s=+y.call(this,r,v)]),K.push([+z.call(this,r,v),+N.call(this,r,v)])):x.length&&(l(),x=[],K=[]);return x.length&&l(),$a.length?
$a.join(""):null}var b=gb,d=gb,e=0,f=tb,k=fb,h=ia,l=h.key,n=h,p="L",q=.7;return g.x=function(a){return arguments.length?(b=d=a,g):d},g.x0=function(a){return arguments.length?(b=a,g):b},g.x1=function(a){return arguments.length?(d=a,g):d},g.y=function(a){return arguments.length?(e=f=a,g):f},g.y0=function(a){return arguments.length?(e=a,g):e},g.y1=function(a){return arguments.length?(f=a,g):f},g.defined=function(a){return arguments.length?(k=a,g):k},g.interpolate=function(a){return arguments.length?
(l="function"==typeof a?h=a:(h=sd.get(a)||ia).key,n=h.reverse||h,p=h.closed?"M":"L",g):l},g.tension=function(a){return arguments.length?(q=a,g):q},g}function Wh(a){return a.radius}function Rf(a){return[a.x,a.y]}function Xh(a){return function(){var g=a.apply(this,arguments),b=g[0],g=g[1]+Xa;return[b*Math.cos(g),b*Math.sin(g)]}}function Yh(){return 64}function Zh(){return"circle"}function Sf(a){a=Math.sqrt(a/F);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function Bb(a,g){return Db(a,
W),a.id=g,a}function yd(a,g,b,d){var e=a.id;return xa(a,"function"==typeof b?function(a,f,k){a.__transition__[e].tween.set(g,d(b.call(a,a.__data__,f,k)))}:(b=d(b),function(a){a.__transition__[e].tween.set(g,b)}))}function $h(a){return null==a&&(a=""),function(){this.textContent=a}}function ic(a,g,b,d){var e=a.__transition__||(a.__transition__={active:0,count:0}),f=e[b];if(!f){var h=d.time,f=e[b]={tween:new k,time:h,ease:d.ease,delay:d.delay,duration:d.duration};++e.count;t.timer(function(d){function k(d){return e.active>
b?n():(e.active=b,f.event&&f.event.start.call(a,D,g),f.tween.forEach(function(b,d){(d=d.call(a,D,g))&&x.push(d)}),t.timer(function(){return s.c=l(d||1)?fb:l,1},0,h),void 0)}function l(d){if(e.active!==b)return n();d/=r;for(var k=p(d),h=x.length;0<h;)x[--h].call(a,k);return 1<=d?(f.event&&f.event.end.call(a,D,g),n()):void 0}function n(){return--e.count?delete e[b]:delete a.__transition__,1}var D=a.__data__,p=f.ease,q=f.delay,r=f.duration,s=Aa,x=[];return s.t=q+h,d>=q?k(d-q):(s.c=k,void 0)},0,h)}}function Tf(a,
g){a.attr("transform",function(a){return"translate("+g(a)+",0)"})}function Uf(a,g){a.attr("transform",function(a){return"translate(0,"+g(a)+")"})}function zd(a){return a.toISOString()}function Ad(a,g,b){function d(g){return a(g)}function e(a,b){var d=(a[1]-a[0])/b,m=t.bisect(jc,d);return m==jc.length?[g.year,Ma(a.map(function(a){return a/31536E6}),b)[2]]:m?g[d/jc[m-1]<jc[m]/d?m-1:m]:[ai,Ma(a,b)[2]]}return d.invert=function(g){return Ya(a.invert(g))},d.domain=function(g){return arguments.length?(a.domain(g),
d):a.domain().map(Ya)},d.nice=function(a,g){function b(d){return!isNaN(d)&&!a.range(d,Ya(+d+1),g).length}var m=d.domain(),f=lb(m),f=null==a?e(f,10):"number"==typeof a&&e(f,a);return f&&(a=f[0],g=f[1]),d.domain(ec(m,1<g?{floor:function(g){for(;b(g=a.floor(g));)g=Ya(g-1);return g},ceil:function(g){for(;b(g=a.ceil(g));)g=Ya(+g+1);return g}}:a))},d.ticks=function(a,g){var b=lb(d.domain()),m=null==a?e(b,10):"number"==typeof a?e(b,a):!a.range&&[{range:a},g];return m&&(a=m[0],g=m[1]),a.range(b[0],Ya(+b[1]+
1),1>g?1:g)},d.tickFormat=function(){return b},d.copy=function(){return Ad(a.copy(),g,b)},rd(d,a)}function Ya(a){return new Date(a)}function bi(a){return JSON.parse(a.responseText)}function ci(a){var g=ra.createRange();return g.selectNode(ra.body),g.createContextualFragment(a.responseText)}var t={version:"3.4.12"};Date.now||(Date.now=function(){return+new Date});var Vf=[].slice,Ga=function(a){return Vf.call(a)},ra=document,za=ra.documentElement,ba=window;try{Ga(za.childNodes)[0].nodeType}catch(Ci){Ga=
function(a){for(var g=a.length,b=Array(g);g--;)b[g]=a[g];return b}}try{ra.createElement("div").style.setProperty("opacity",0,"")}catch(Di){var kc=ba.Element.prototype,di=kc.setAttribute,ei=kc.setAttributeNS,Wf=ba.CSSStyleDeclaration.prototype,fi=Wf.setProperty;kc.setAttribute=function(a,g){di.call(this,a,g+"")};kc.setAttributeNS=function(a,g,b){ei.call(this,a,g,b+"")};Wf.setProperty=function(a,g,b){fi.call(this,a,g+"",b)}}t.ascending=e;t.descending=function(a,g){return a>g?-1:g>a?1:g>=a?0:0/0};t.min=
function(a,g){var b,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=(b=a[e])&&b>=b);)b=void 0;for(;++e<f;)null!=(d=a[e])&&b>d&&(b=d)}else{for(;++e<f&&!(null!=(b=g.call(a,a[e],e))&&b>=b);)b=void 0;for(;++e<f;)null!=(d=g.call(a,a[e],e))&&b>d&&(b=d)}return b};t.max=function(a,g){var b,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=(b=a[e])&&b>=b);)b=void 0;for(;++e<f;)null!=(d=a[e])&&d>b&&(b=d)}else{for(;++e<f&&!(null!=(b=g.call(a,a[e],e))&&b>=b);)b=void 0;for(;++e<f;)null!=
(d=g.call(a,a[e],e))&&d>b&&(b=d)}return b};t.extent=function(a,g){var b,d,e,f=-1,k=a.length;if(1===arguments.length){for(;++f<k&&!(null!=(b=e=a[f])&&b>=b);)b=e=void 0;for(;++f<k;)null!=(d=a[f])&&(b>d&&(b=d),d>e&&(e=d))}else{for(;++f<k&&!(null!=(b=e=g.call(a,a[f],f))&&b>=b);)b=void 0;for(;++f<k;)null!=(d=g.call(a,a[f],f))&&(b>d&&(b=d),d>e&&(e=d))}return[b,e]};t.sum=function(a,g){var b,d=0,e=a.length,f=-1;if(1===arguments.length)for(;++f<e;)isNaN(b=+a[f])||(d+=b);else for(;++f<e;)isNaN(b=+g.call(a,
a[f],f))||(d+=b);return d};t.mean=function(a,g){var b,d=0,e=a.length,f=-1,k=e;if(1===arguments.length)for(;++f<e;)h(b=a[f])?d+=b:--k;else for(;++f<e;)h(b=g.call(a,a[f],f))?d+=b:--k;return k?d/k:void 0};t.quantile=function(a,g){var b=(a.length-1)*g+1,d=Math.floor(b),e=+a[d-1];return(b-=d)?e+b*(a[d]-e):e};t.median=function(a,g){return 1<arguments.length&&(a=a.map(g)),a=a.filter(h),a.length?t.quantile(a.sort(e),.5):void 0};var Xf=d(e);t.bisectLeft=Xf.left;t.bisect=t.bisectRight=Xf.right;t.bisector=function(a){return d(1===
a.length?function(g,b){return e(a(g),b)}:a)};t.shuffle=function(a){for(var g,b,d=a.length;d;)b=0|Math.random()*d--,g=a[d],a[d]=a[b],a[b]=g;return a};t.permute=function(a,g){for(var b=g.length,d=Array(b);b--;)d[b]=a[g[b]];return d};t.pairs=function(a){for(var g=0,b=a.length-1,d=a[0],e=Array(0>b?0:b);b>g;)e[g]=[d,d=a[++g]];return e};t.zip=function(){if(!(d=arguments.length))return[];for(var a=-1,g=t.min(arguments,f),b=Array(g);++a<g;)for(var d,e=-1,k=b[a]=Array(d);++e<d;)k[e]=arguments[e][a];return b};
t.transpose=function(a){return t.zip.apply(t,a)};t.keys=function(a){var g=[],b;for(b in a)g.push(b);return g};t.values=function(a){var g=[],b;for(b in a)g.push(a[b]);return g};t.entries=function(a){var g=[],b;for(b in a)g.push({key:b,value:a[b]});return g};t.merge=function(a){var g,b,d,e=a.length;g=-1;for(var f=0;++g<e;)f+=a[g].length;for(b=Array(f);0<=--e;)for(d=a[e],g=d.length;0<=--g;)b[--f]=d[g];return b};var I=Math.abs;t.range=function(a,g,b){if(3>arguments.length&&(b=1,2>arguments.length&&(g=
a,a=0)),1/0===(g-a)/b)throw Error("infinite range");var d,e=[],f;d=I(b);for(f=1;d*f%1;)f*=10;var k=-1;if(a*=f,g*=f,b*=f,0>b)for(;(d=a+b*++k)>g;)e.push(d/f);else for(;(d=a+b*++k)<g;)e.push(d/f);return e};t.map=function(a){var g=new k;if(a instanceof k)a.forEach(function(a,b){g.set(a,b)});else for(var b in a)g.set(b,a[b]);return g};b(k,{has:l,get:function(a){return this[Oa+a]},set:function(a,g){return this[Oa+a]=g},remove:function(a){return a=Oa+a,a in this&&delete this[a]},keys:p,values:function(){var a=
[];return this.forEach(function(g,b){a.push(b)}),a},entries:function(){var a=[];return this.forEach(function(g,b){a.push({key:g,value:b})}),a},size:n,empty:q,forEach:function(a){for(var g in this)g.charCodeAt(0)===Cb&&a.call(this,g.slice(1),this[g])}});var Oa="\x00",Cb=Oa.charCodeAt(0);t.nest=function(){function a(g,h,l){if(l>=f.length)return d?d.call(e,h):b?h.sort(b):h;for(var n,p,q,r,t=-1,s=h.length,U=f[l++],x=new k;++t<s;)(r=x.get(n=U(p=h[t])))?r.push(p):x.set(n,[p]);return g?(p=g(),q=function(b,
d){p.set(b,a(g,d,l))}):(p={},q=function(b,d){p[b]=a(g,d,l)}),x.forEach(q),p}function g(a,b){if(b>=f.length)return a;var d=[],e=h[b++];return a.forEach(function(a,e){d.push({key:a,values:g(e,b)})}),e?d.sort(function(a,g){return e(a.key,g.key)}):d}var b,d,e={},f=[],h=[];return e.map=function(g,b){return a(b,g,0)},e.entries=function(b){return g(a(t.map,b,0),0)},e.key=function(a){return f.push(a),e},e.sortKeys=function(a){return h[f.length-1]=a,e},e.sortValues=function(a){return b=a,e},e.rollup=function(a){return d=
a,e},e};t.set=function(a){var g=new r;if(a)for(var b=0,d=a.length;d>b;++b)g.add(a[b]);return g};b(r,{has:l,add:function(a){return this[Oa+a]=!0,a},remove:function(a){return a=Oa+a,a in this&&delete this[a]},values:p,size:n,empty:q,forEach:function(a){for(var g in this)g.charCodeAt(0)===Cb&&a.call(this,g.slice(1))}});t.behavior={};t.rebind=function(a,g){for(var b,d=1,e=arguments.length;++d<e;)a[b=arguments[d]]=s(a,g,g[b]);return a};var Rd="webkit ms moz Moz o O".split(" ");t.dispatch=function(){for(var a=
new x,g=-1,b=arguments.length;++g<b;)a[arguments[g]]=y(a);return a};x.prototype.on=function(a,g){var b=a.indexOf("."),d="";if(0<=b&&(d=a.slice(b+1),a=a.slice(0,b)),a)return 2>arguments.length?this[a].on(d):this[a].on(d,g);if(2===arguments.length){if(null==g)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}};t.event=null;t.requote=function(a){return a.replace(gi,"\\$&")};var gi=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Db={}.__proto__?function(a,g){a.__proto__=g}:function(a,g){for(var b in g)a[b]=
g[b]},Ac=function(a,g){return g.querySelector(a)},Bc=function(a,g){return g.querySelectorAll(a)},hi=za.matches||za[w(za,"matchesSelector")],Sd=function(a,g){return hi.call(a,g)};"function"==typeof Sizzle&&(Ac=function(a,g){return Sizzle(a,g)[0]||null},Bc=Sizzle,Sd=Sizzle.matchesSelector);t.selection=function(){return Yf};var O=t.selection.prototype=[];O.select=function(a){var g,b,d,e,f=[];a=T(a);for(var k=-1,h=this.length;++k<h;){f.push(g=[]);g.parentNode=(d=this[k]).parentNode;for(var l=-1,n=d.length;++l<
n;)(e=d[l])?(g.push(b=a.call(e,e.__data__,l,k)),b&&"__data__"in e&&(b.__data__=e.__data__)):g.push(null)}return z(f)};O.selectAll=function(a){var g,b,d=[];a=Id(a);for(var e=-1,f=this.length;++e<f;)for(var k=this[e],h=-1,l=k.length;++h<l;)(b=k[h])&&(d.push(g=Ga(a.call(b,b.__data__,h,e))),g.parentNode=b);return z(d)};var Bd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};
t.ns={prefix:Bd,qualify:function(a){var g=a.indexOf(":"),b=a;return 0<=g&&(b=a.slice(0,g),a=a.slice(g+1)),Bd.hasOwnProperty(b)?{space:Bd[b],local:a}:a}};O.attr=function(a,g){if(2>arguments.length){if("string"==typeof a){var b=this.node();return a=t.ns.qualify(a),a.local?b.getAttributeNS(a.space,a.local):b.getAttribute(a)}for(g in a)this.each(Jd(g,a[g]));return this}return this.each(Jd(a,g))};O.classed=function(a,g){if(2>arguments.length){if("string"==typeof a){var b=this.node(),d=(a=(a+"").trim().split(/^|\s+/)).length,
e=-1;if(g=b.classList)for(;++e<d;){if(!g.contains(a[e]))return!1}else for(g=b.getAttribute("class");++e<d;)if(!Ld(a[e]).test(g))return!1;return!0}for(g in a)this.each(Md(g,a[g]));return this}return this.each(Md(a,g))};O.style=function(a,g,b){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(g="");for(b in a)this.each(Nd(b,a[b],g));return this}if(2>d)return ba.getComputedStyle(this.node(),null).getPropertyValue(a);b=""}return this.each(Nd(a,g,b))};O.property=function(a,g){if(2>arguments.length){if("string"==
typeof a)return this.node()[a];for(g in a)this.each(Od(g,a[g]));return this}return this.each(Od(a,g))};O.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var g=a.apply(this,arguments);this.textContent=null==g?"":g}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};O.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var g=a.apply(this,arguments);this.innerHTML=null==g?"":g}:null==a?function(){this.innerHTML=
""}:function(){this.innerHTML=a}):this.node().innerHTML};O.append=function(a){return a=Pd(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})};O.insert=function(a,g){return a=Pd(a),g=T(g),this.select(function(){return this.insertBefore(a.apply(this,arguments),g.apply(this,arguments)||null)})};O.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};O.data=function(a,g){function b(a,d){var e,f,m,h=a.length,u=d.length,D=Math.min(h,u),q=
Array(u),B=Array(u),r=Array(h);if(g){var t=new k,s=new k,U=[];for(e=-1;++e<h;)D=g.call(f=a[e],f.__data__,e),t.has(D)?r[e]=f:t.set(D,f),U.push(D);for(e=-1;++e<u;)D=g.call(d,m=d[e],e),(f=t.get(D))?(q[e]=f,f.__data__=m):s.has(D)||(B[e]={__data__:m}),s.set(D,m),t.remove(D);for(e=-1;++e<h;)t.has(U[e])&&(r[e]=a[e])}else{for(e=-1;++e<D;)f=a[e],m=d[e],f?(f.__data__=m,q[e]=f):B[e]={__data__:m};for(;u>e;++e)B[e]={__data__:d[e]};for(;h>e;++e)r[e]=a[e]}B.update=q;B.parentNode=q.parentNode=r.parentNode=a.parentNode;
l.push(B);n.push(q);p.push(r)}var d,e,f=-1,h=this.length;if(!arguments.length){for(a=Array(h=(d=this[0]).length);++f<h;)(e=d[f])&&(a[f]=e.__data__);return a}var l=Td([]),n=z([]),p=z([]);if("function"==typeof a)for(;++f<h;)b(d=this[f],a.call(d,d.parentNode.__data__,f));else for(;++f<h;)b(d=this[f],a);return n.enter=function(){return l},n.exit=function(){return p},n};O.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};O.filter=function(a){var g,b,d,e=[];
"function"!=typeof a&&(a=Qd(a));for(var f=0,k=this.length;k>f;f++){e.push(g=[]);g.parentNode=(b=this[f]).parentNode;for(var h=0,l=b.length;l>h;h++)(d=b[h])&&a.call(d,d.__data__,h,f)&&g.push(d)}return z(e)};O.order=function(){for(var a=-1,g=this.length;++a<g;)for(var b,d=this[a],e=d.length-1,f=d[e];0<=--e;)(b=d[e])&&(f&&f!==b.nextSibling&&f.parentNode.insertBefore(b,f),f=b);return this};O.sort=function(a){a=qg.apply(this,arguments);for(var g=-1,b=this.length;++g<b;)this[g].sort(a);return this.order()};
O.each=function(a){return xa(this,function(g,b,d){a.call(g,g.__data__,b,d)})};O.call=function(a){var g=Ga(arguments);return a.apply(g[0]=this,g),this};O.empty=function(){return!this.node()};O.node=function(){for(var a=0,g=this.length;g>a;a++)for(var b=this[a],d=0,e=b.length;e>d;d++){var f=b[d];if(f)return f}return null};O.size=function(){var a=0;return xa(this,function(){++a}),a};var ya=[];t.selection.enter=Td;t.selection.enter.prototype=ya;ya.append=O.append;ya.empty=O.empty;ya.node=O.node;ya.call=
O.call;ya.size=O.size;ya.select=function(a){for(var g,b,d,e,f,k=[],h=-1,l=this.length;++h<l;){d=(e=this[h]).update;k.push(g=[]);g.parentNode=e.parentNode;for(var n=-1,p=e.length;++n<p;)(f=e[n])?(g.push(d[n]=b=a.call(e.parentNode,f.__data__,n,h)),b.__data__=f.__data__):g.push(null)}return z(k)};ya.insert=function(a,g){return 2>arguments.length&&(g=rg(this)),O.insert.call(this,a,g)};O.transition=function(){for(var a,g,b=Za||++Zf,d=[],e=lc||{time:Date.now(),ease:lh,delay:0,duration:250},f=-1,k=this.length;++f<
k;){d.push(a=[]);for(var h=this[f],l=-1,n=h.length;++l<n;)(g=h[l])&&ic(g,l,b,e),a.push(g)}return Bb(d,b)};O.interrupt=function(){return this.each(Eb)};t.select=function(a){a=["string"==typeof a?Ac(a,ra):a];return a.parentNode=za,z([a])};t.selectAll=function(a){a=Ga("string"==typeof a?Bc(a,ra):a);return a.parentNode=za,z([a])};var Yf=t.select(za);O.on=function(a,g,b){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(g=!1);for(b in a)this.each(Ud(b,a[b],g));return this}if(2>d)return(d=this.node()["__on"+
a])&&d._;b=!1}return this.each(Ud(a,g,b))};var Cc=t.map({mouseenter:"mouseover",mouseleave:"mouseout"});Cc.forEach(function(a){"on"+a in ra&&Cc.remove(a)});var ob="onselectstart"in ra?null:w(za.style,"userSelect"),tg=0;t.mouse=function(a){return Dc(a,M())};var Ec=/WebKit/.test(ba.navigator.userAgent)?-1:0;t.touch=function(a,b,d){if(3>arguments.length&&(d=b,b=M().changedTouches),b)for(var e,f=0,k=b.length;k>f;++f)if((e=b[f]).identifier===d)return Dc(a,e)};t.behavior.drag=function(){function a(){this.on("mousedown.drag",
f).on("touchstart.drag",k)}function b(a,g,f,k,h){return function(){var b,l=t.event.target,u=this.parentNode,n=d.of(this,arguments),p=0,q=a(),B=".drag"+(null==q?"":"-"+q),r=t.select(f()).on(k+B,function(){var a,d,e=g(u,q);e&&(a=e[0]-x[0],d=e[1]-x[1],p=p|a|d,x=e,n({type:"drag",x:e[0]+b[0],y:e[1]+b[1],dx:a,dy:d}))}).on(h+B,function(){g(u,q)&&(r.on(k+B,null).on(h+B,null),s(p&&t.event.target===l),n({type:"dragend"}))}),s=Fb(),x=g(u,q);e?(b=e.apply(this,arguments),b=[b.x-x[0],b.y-x[1]]):b=[0,0];n({type:"dragstart"})}}
var d=N(a,"drag","dragstart","dragend"),e=null,f=b(v,t.mouse,wg,"mousemove","mouseup"),k=b(ug,t.touch,vg,"touchmove","touchend");return a.origin=function(b){return arguments.length?(e=b,a):e},t.rebind(a,d,"on")};t.touches=function(a,b){return 2>arguments.length&&(b=M().touches),b?Ga(b).map(function(b){var g=Dc(a,b);return g.identifier=b.identifier,g}):[]};var F=Math.PI,ha=2*F,Y=F/2,C=1E-6,dd=C*C,E=F/180,P=180/F,mc=Math.SQRT2;t.interpolateZoom=function(a,b){function d(a){var b=a*x;if(s){a=Xd(t);var g=
k/(2*q),m,h=mc*b+t;m=((h=Math.exp(2*h))-1)/(h+1);m*=a;var p=t,h=((p=Math.exp(p))-1/p)/2,g=g*(m-h);return[e+g*l,f+g*n,k*a/Xd(mc*b+t)]}return[e+a*l,f+a*n,k*Math.exp(mc*b)]}var e=a[0],f=a[1],k=a[2],h=b[2],l=b[0]-e,n=b[1]-f,p=l*l+n*n,q=Math.sqrt(p),r=(h*h-k*k+4*p)/(4*k*q),p=(h*h-k*k-4*p)/(4*h*q),t=Math.log(Math.sqrt(r*r+1)-r),s=Math.log(Math.sqrt(p*p+1)-p)-t,x=(s||Math.log(h/k))/mc;return d.duration=1E3*x,d};t.behavior.zoom=function(){function a(a){a.on(z,n).on(ii+".zoom",q).on("dblclick.zoom",r).on(M,
p)}function b(a){return[(a[0]-y.x)/y.k,(a[1]-y.y)/y.k]}function d(a){y.k=Math.max(Ha[0],Math.min(Ha[1],a))}function e(a,b){b=[b[0]*y.k+y.x,b[1]*y.k+y.y];y.x+=a[0]-b[0];y.y+=a[1]-b[1]}function f(){H&&H.domain(R.range().map(function(a){return(a-y.x)/y.k}).map(R.invert));G&&G.domain(K.range().map(function(a){return(a-y.y)/y.k}).map(K.invert))}function k(a){a({type:"zoomstart"})}function h(a){f();a({type:"zoom",scale:y.k,translate:[y.x,y.y]})}function l(a){a({type:"zoomend"})}function n(){var a=this,
d=t.event.target,f=E.of(a,arguments),m=0,p=t.select(ba).on(A,function(){m=1;e(t.mouse(a),q);h(f)}).on(C,function(){p.on(A,null).on(C,null);B(m&&t.event.target===d);l(f)}),q=b(t.mouse(a)),B=Fb();Eb.call(a);k(f)}function p(){function a(){var d=t.touches(s);return r=y.k,d.forEach(function(a){a.identifier in Q&&(Q[a.identifier]=b(a))}),d}function f(){var b=t.event.target;t.select(b).on(ma,q).on(Pa,B);w.push(b);for(var b=t.event.changedTouches,g=0,k=b.length;k>g;++g)Q[b[g].identifier]=null;k=a();g=Date.now();
1===k.length?(500>g-fa&&(b=k[0],k=Q[b.identifier],d(2*y.k),e(b,k),L(),h(x)),fa=g):1<k.length&&(b=k[0],k=k[1],g=b[0]-k[0],b=b[1]-k[1],K=g*g+b*b)}function q(){for(var a,b,g,f,k=t.touches(s),l=0,u=k.length;u>l;++l,f=null)if(g=k[l],f=Q[g.identifier]){if(b)break;a=g;b=f}if(f){var n=(n=g[0]-a[0])*n+(n=g[1]-a[1])*n,k=K&&Math.sqrt(n/K);a=[(a[0]+g[0])/2,(a[1]+g[1])/2];b=[(b[0]+f[0])/2,(b[1]+f[1])/2];d(k*r)}fa=null;e(a,b);h(x)}function B(){if(t.event.touches.length){for(var b=t.event.changedTouches,g=0,d=b.length;d>
g;++g)delete Q[b[g].identifier];for(var e in Q)return void a()}t.selectAll(w).on(v,null);H.on(z,n).on(M,p);G();l(x)}var r,s=this,x=E.of(s,arguments),Q={},K=0,v=".zoom-"+t.event.changedTouches[0].identifier,ma="touchmove"+v,Pa="touchend"+v,w=[],H=t.select(s),G=Fb();Eb.call(s);f();k(x);H.on(z,null).on(M,f)}function q(){var a=E.of(this,arguments);w?clearTimeout(w):(s=b(x=v||t.mouse(this)),Eb.call(this),k(a));w=setTimeout(function(){w=null;l(a)},50);L();d(Math.pow(2,.002*nc())*y.k);e(x,s);h(a)}function r(){var a=
E.of(this,arguments),f=t.mouse(this),n=b(f),p=Math.log(y.k)/Math.LN2;k(a);d(Math.pow(2,t.event.shiftKey?Math.ceil(p)-1:Math.floor(p)+1));e(f,n);h(a);l(a)}var s,x,v,w,fa,R,H,K,G,y={x:0,y:0,k:1},ta=[960,500],Ha=$f,z="mousedown.zoom",A="mousemove.zoom",C="mouseup.zoom",M="touchstart.zoom",E=N(a,"zoomstart","zoom","zoomend");return a.event=function(a){a.each(function(){var a=E.of(this,arguments),b=y;Za?t.select(this).transition().each("start.zoom",function(){y=this.__chart__||{x:0,y:0,k:1};k(a)}).tween("zoom:zoom",
function(){var g=ta[0],d=g/2,e=ta[1]/2,f=t.interpolateZoom([(d-y.x)/y.k,(e-y.y)/y.k,g/y.k],[(d-b.x)/b.k,(e-b.y)/b.k,g/b.k]);return function(b){b=f(b);var m=g/b[2];this.__chart__=y={x:d-b[0]*m,y:e-b[1]*m,k:m};h(a)}}).each("end.zoom",function(){l(a)}):(this.__chart__=y,k(a),h(a),l(a))})},a.translate=function(b){return arguments.length?(y={x:+b[0],y:+b[1],k:y.k},f(),a):[y.x,y.y]},a.scale=function(b){return arguments.length?(y={x:y.x,y:y.y,k:+b},f(),a):y.k},a.scaleExtent=function(b){return arguments.length?
(Ha=null==b?$f:[+b[0],+b[1]],a):Ha},a.center=function(b){return arguments.length?(v=b&&[+b[0],+b[1]],a):v},a.size=function(b){return arguments.length?(ta=b&&[+b[0],+b[1]],a):ta},a.x=function(b){return arguments.length?(H=b,R=b.copy(),y={x:0,y:0,k:1},a):H},a.y=function(b){return arguments.length?(G=b,K=b.copy(),y={x:0,y:0,k:1},a):G},t.rebind(a,E,"on")};var nc,$f=[0,1/0],ii="onwheel"in ra?(nc=function(){return-t.event.deltaY*(t.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ra?(nc=function(){return t.event.wheelDelta},
"mousewheel"):(nc=function(){return-t.event.detail},"MozMousePixelScroll");t.color=Qa;Qa.prototype.toString=function(){return this.rgb()+""};t.hsl=sa;var Cd=sa.prototype=new Qa;Cd.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),new sa(this.h,this.s,this.l/a)};Cd.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new sa(this.h,this.s,a*this.l)};Cd.rgb=function(){return Gc(this.h,this.s,this.l)};t.hcl=na;var Dd=na.prototype=new Qa;Dd.brighter=function(a){return new na(this.h,
this.c,Math.min(100,this.l+oc*(arguments.length?a:1)))};Dd.darker=function(a){return new na(this.h,this.c,Math.max(0,this.l-oc*(arguments.length?a:1)))};Dd.rgb=function(){return Hc(this.h,this.c,this.l).rgb()};t.lab=oa;var oc=18,de=.95047,ee=1,fe=1.08883,Ed=oa.prototype=new Qa;Ed.brighter=function(a){return new oa(Math.min(100,this.l+oc*(arguments.length?a:1)),this.a,this.b)};Ed.darker=function(a){return new oa(Math.max(0,this.l-oc*(arguments.length?a:1)),this.a,this.b)};Ed.rgb=function(){return ce(this.l,
this.a,this.b)};t.rgb=ca;var pc=ca.prototype=new Qa;pc.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,d=this.g,e=this.b;return b||d||e?(b&&30>b&&(b=30),d&&30>d&&(d=30),e&&30>e&&(e=30),new ca(Math.min(255,b/a),Math.min(255,d/a),Math.min(255,e/a))):new ca(30,30,30)};pc.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ca(a*this.r,a*this.g,a*this.b)};pc.hsl=function(){return $d(this.r,this.g,this.b)};pc.toString=function(){return"#"+bb(this.r)+bb(this.g)+bb(this.b)};
var Hb=t.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,
tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Hb.forEach(function(a,b){Hb.set(a,new ca(b>>16,255&b>>8,255&b))});t.functor=J;t.xhr=Nc(X);t.dsv=function(a,b){function d(a,m,k){3>arguments.length&&(k=m,m=null);var h=Ib(a,b,null==m?e:f(m),k);return h.row=function(a){return arguments.length?h.response(null==(m=a)?e:f(a)):m},h}function e(a){return d.parse(a.responseText)}function f(a){return function(b){return d.parse(b.responseText,
a)}}function k(b){return b.map(h).join(a)}function h(a){return l.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var l=new RegExp('["'+a+"\n]"),n=a.charCodeAt(0);return d.parse=function(a,b){var g;return d.parseRows(a,function(a,d){if(g)return g(a,d-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");g=b?function(a,g){return b(e(a),g)}:e})},d.parseRows=function(a,b){function g(){if(l>=h)return m;if(e)return e=!1,f;var b=l;if(34===a.charCodeAt(b)){for(var d=
b;d++<h;)if(34===a.charCodeAt(d)){if(34!==a.charCodeAt(d+1))break;++d}l=d+2;var k=a.charCodeAt(d+1);return 13===k?(e=!0,10===a.charCodeAt(d+2)&&++l):10===k&&(e=!0),a.slice(b+1,d).replace(/""/g,'"')}for(;h>l;){k=a.charCodeAt(l++);d=1;if(10===k)e=!0;else if(13===k)e=!0,10===a.charCodeAt(l)&&(++l,++d);else if(k!==n)continue;return a.slice(b,l-d)}return a.slice(b)}for(var d,e,f={},m={},k=[],h=a.length,l=0,u=0;(d=g())!==m;){for(var p=[];d!==f&&d!==m;)p.push(d),d=g();b&&!(p=b(p,u++))||k.push(p)}return k},
d.format=function(b){if(Array.isArray(b[0]))return d.formatRows(b);var g=new r,e=[];return b.forEach(function(a){for(var b in a)g.has(b)||e.push(g.add(b))}),[e.map(h).join(a)].concat(b.map(function(b){return e.map(function(a){return h(b[a])}).join(a)})).join("\n")},d.formatRows=function(a){return a.map(k).join("\n")},d};t.csv=t.dsv(",","text/csv");t.tsv=t.dsv("\t","text/tab-separated-values");var Lb,Mb,Kb,Jb,Aa,ie=ba[w(ba,"requestAnimationFrame")]||function(a){setTimeout(a,17)};t.timer=function(a,
b,d){var e=arguments.length;2>e&&(b=0);3>e&&(d=Date.now());e={c:a,t:d+b,f:!1,n:null};Mb?Mb.n=e:Lb=e;Mb=e;Kb||(Jb=clearTimeout(Jb),Kb=1,ie(Oc))};t.timer.flush=function(){ge();he()};t.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var ji="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,b){var d=Math.pow(10,3*I(8-b));return{scale:8<b?function(a){return a/d}:function(a){return a*d},symbol:a}});t.formatPrefix=function(a,b){var d=0;return a&&(0>a&&(a*=-1),
b&&(a=t.round(a,Pc(a,b))),d=1+Math.floor(1E-12+Math.log(a)/Math.LN10),d=Math.max(-24,Math.min(24,3*Math.floor((d-1)/3)))),ji[8+d/3]};var je=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,zg=t.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},
f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=t.round(a,Pc(a,b))).toFixed(Math.max(0,Math.min(20,Pc(a*(1+1E-15),b))))}}),A=t.time={},aa=Date;Ba.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},
getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Fa.setUTCDate.apply(this._,arguments)},setDay:function(){Fa.setUTCDay.apply(this._,arguments)},setFullYear:function(){Fa.setUTCFullYear.apply(this._,arguments)},setHours:function(){Fa.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Fa.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Fa.setUTCMinutes.apply(this._,
arguments)},setMonth:function(){Fa.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Fa.setUTCSeconds.apply(this._,arguments)},setTime:function(){Fa.setTime.apply(this._,arguments)}};var Fa=Date.prototype;A.year=Ra(function(a){return a=A.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()});A.years=A.year.range;A.years.utc=A.year.utc.range;A.day=Ra(function(a){var b=new aa(2E3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),
b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1});A.days=A.day.range;A.days.utc=A.day.utc.range;A.dayOfYear=function(a){var b=A.year(a);return Math.floor((a-b-6E4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(a,b){b=7-b;var d=A[a]=Ra(function(a){return(a=A.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var d=
A.year(a).getDay();return Math.floor((A.dayOfYear(a)+(d+b)%7)/7)-(d!==b)});A[a+"s"]=d.range;A[a+"s"].utc=d.utc.range;A[a+"OfYear"]=function(a){var d=A.year(a).getDay();return Math.floor((A.dayOfYear(a)+(d+b)%7)/7)}});A.week=A.sunday;A.weeks=A.sunday.range;A.weeks.utc=A.sunday.utc.range;A.weekOfYear=A.sundayOfYear;var ke={"-":"",_:" ",0:"0"},S=/^\s*\d+/,ne=/^%/;t.locale=function(a){return{numberFormat:yg(a),timeFormat:Bg(a)}};var ag=t.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],
dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});t.format=ag.numberFormat;t.geo={};Rc.prototype={s:0,t:0,add:function(a){oe(a,this.t,qc);oe(qc.s,this.s,this);this.s?
this.t+=qc.t:this.s=qc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var qc=new Rc;t.geo.stream=function(a,b){a&&bg.hasOwnProperty(a.type)?bg[a.type](a,b):Qb(a,b)};var bg={Feature:function(a,b){Qb(a.geometry,b)},FeatureCollection:function(a,b){for(var d=a.features,e=-1,f=d.length;++e<f;)Qb(d[e].geometry,b)}},pe={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates;b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var d=a.coordinates,e=-1,f=d.length;++e<
f;)a=d[e],b.point(a[0],a[1],a[2])},LineString:function(a,b){Sc(a.coordinates,b,0)},MultiLineString:function(a,b){for(var d=a.coordinates,e=-1,f=d.length;++e<f;)Sc(d[e],b,0)},Polygon:function(a,b){qe(a.coordinates,b)},MultiPolygon:function(a,b){for(var d=a.coordinates,e=-1,f=d.length;++e<f;)qe(d[e],b)},GeometryCollection:function(a,b){for(var d=a.geometries,e=-1,f=d.length;++e<f;)Qb(d[e],b)}};t.geo.area=function(a){return mb=0,t.geo.stream(a,ga),mb};var mb,Sa=new Rc,ga={sphere:function(){mb+=4*F},
point:v,lineStart:v,lineEnd:v,polygonStart:function(){Sa.reset();ga.lineStart=Qg},polygonEnd:function(){var a=2*Sa;mb+=0>a?4*F+a:a;ga.lineStart=ga.lineEnd=ga.point=v}};t.geo.bounds=function(){function a(a,b){K.push(G=[q=a,s=a]);r>b&&(r=b);b>x&&(x=b)}function b(g,d){var e=Ta([g*E,d*E]);if(R){var f=db(R,e),f=db([f[1],-f[0],0],f);Tb(f);var f=Ub(f),k=g-v,m=0<k?1:-1,h=f[0]*P*m,k=180<I(k);k^(h>m*v&&m*g>h)?(f=f[1]*P,f>x&&(x=f)):(h=(h+360)%360-180,k^(h>m*v&&m*g>h))?(f=-f[1]*P,r>f&&(r=f)):(r>d&&(r=d),d>x&&
(x=d));k?v>g?l(q,g)>l(q,s)&&(s=g):l(g,s)>l(q,s)&&(q=g):s>=q?(q>g&&(q=g),g>s&&(s=g)):g>v?l(q,g)>l(q,s)&&(s=g):l(g,s)>l(q,s)&&(q=g)}else a(g,d);R=e;v=g}function d(){z.point=b}function e(){G[0]=q;G[1]=s;z.point=a;R=null}function f(a,d){if(R){var e=a-v;H+=180<I(e)?e+(0<e?360:-360):e}else w=a,y=d;ga.point(a,d);b(a,d)}function k(){ga.lineStart()}function h(){f(w,y);ga.lineEnd();I(H)>C&&(q=-(s=180));G[0]=q;G[1]=s;R=null}function l(a,b){return 0>(b-=a)?b+360:b}function n(a,b){return a[0]-b[0]}function p(a,
b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var q,r,s,x,v,w,y,R,H,K,G,z={point:a,lineStart:d,lineEnd:e,polygonStart:function(){z.point=f;z.lineStart=k;z.lineEnd=h;H=0;ga.polygonStart()},polygonEnd:function(){ga.polygonEnd();z.point=a;z.lineStart=d;z.lineEnd=e;0>Sa?(q=-(s=180),r=-(x=90)):H>C?x=90:-C>H&&(r=-90);G[0]=q;G[1]=s}};return function(a){x=s=-(q=r=1/0);K=[];t.geo.stream(a,z);if(a=K.length){K.sort(n);for(var b,g=1,d=K[0],e=[d];a>g;++g)b=K[g],p(b[0],d)||p(b[1],d)?(l(d[0],b[1])>l(d[0],
d[1])&&(d[1]=b[1]),l(b[0],d[1])>l(d[0],d[1])&&(d[0]=b[0])):e.push(d=b);var f,k=-1/0;a=e.length-1;g=0;for(d=e[a];a>=g;d=b,++g)b=e[g],(f=l(d[1],b[0]))>k&&(k=f,q=b[0],s=d[1])}return K=G=null,1/0===q||1/0===r?[[0/0,0/0],[0/0,0/0]]:[[q,r],[s,x]]}}();t.geo.centroid=function(a){qb=eb=Ca=Da=ua=ja=ka=ea=Ia=Ja=va=0;t.geo.stream(a,pa);a=Ia;var b=Ja,d=va,e=a*a+b*b+d*d;return dd>e&&(a=ja,b=ka,d=ea,C>eb&&(a=Ca,b=Da,d=ua),e=a*a+b*b+d*d,dd>e)?[0/0,0/0]:[Math.atan2(b,a)*P,ab(d/Math.sqrt(e))*P]};var qb,eb,Ca,Da,ua,
ja,ka,ea,Ia,Ja,va,pa={sphere:v,point:Uc,lineStart:re,lineEnd:se,polygonStart:function(){pa.lineStart=Rg},polygonEnd:function(){pa.lineStart=re}},Ie=ve(fb,function(a){var b,d=0/0,e=0/0,f=0/0;return{lineStart:function(){a.lineStart();b=1},point:function(k,h){var l=0<k?F:-F,n=I(k-d);if(I(n-F)<C)a.point(d,e=0<(e+h)/2?Y:-Y),a.point(f,e),a.lineEnd(),a.lineStart(),a.point(l,e),a.point(k,e),b=0;else if(f!==l&&n>=F){I(d-f)<C&&(d-=f*C);I(k-l)<C&&(k-=l*C);var n=d,p=e,q=k,r,t,s=Math.sin(n-q);e=I(s)>C?Math.atan((Math.sin(p)*
(t=Math.cos(h))*Math.sin(q)-Math.sin(h)*(r=Math.cos(p))*Math.sin(n))/(r*t*s)):(p+h)/2;a.point(f,e);a.lineEnd();a.lineStart();a.point(l,e);b=0}a.point(d=k,e=h);f=l},lineEnd:function(){a.lineEnd();d=e=0/0},clean:function(){return 2-b}}},function(a,b,d,e){null==a?(d*=Y,e.point(-F,d),e.point(0,d),e.point(F,d),e.point(F,0),e.point(F,-d),e.point(0,-d),e.point(-F,-d),e.point(-F,0),e.point(-F,d)):I(a[0]-b[0])>C?(a=a[0]<b[0]?F:-F,d=d*a/2,e.point(-a,d),e.point(0,d),e.point(a,d)):e.point(b[0],b[1])},[-F,-F/
2]),Xb=1E9;t.geo.clipExtent=function(){var a,b,d,e,f,k,h={stream:function(a){return f&&(f.valid=!1),f=k(a),f.valid=!0,f},extent:function(l){return arguments.length?(k=ye(a=+l[0][0],b=+l[0][1],d=+l[1][0],e=+l[1][1]),f&&(f.valid=!1,f=null),h):[[a,b],[d,e]]}};return h.extent([[0,0],[960,500]])};(t.geo.conicEqualArea=function(){return Wc(Ae)}).raw=Ae;t.geo.albers=function(){return t.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};t.geo.albersUsa=function(){function a(a){var k=
a[0];a=a[1];return b=null,d(k,a),b||(e(k,a),b)||f(k,a),b}var b,d,e,f,k=t.geo.albers(),h=t.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=t.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),n={point:function(a,d){b=[a,d]}};return a.invert=function(a){var b=k.scale(),g=k.translate(),d=(a[0]-g[0])/b,b=(a[1]-g[1])/b;return(.12<=b&&.234>b&&-.425<=d&&-.214>d?h:.166<=b&&.234>b&&-.214<=d&&-.115>d?l:k).invert(a)},a.stream=function(a){var b=k.stream(a),g=
h.stream(a),d=l.stream(a);return{point:function(a,e){b.point(a,e);g.point(a,e);d.point(a,e)},sphere:function(){b.sphere();g.sphere();d.sphere()},lineStart:function(){b.lineStart();g.lineStart();d.lineStart()},lineEnd:function(){b.lineEnd();g.lineEnd();d.lineEnd()},polygonStart:function(){b.polygonStart();g.polygonStart();d.polygonStart()},polygonEnd:function(){b.polygonEnd();g.polygonEnd();d.polygonEnd()}}},a.precision=function(b){return arguments.length?(k.precision(b),h.precision(b),l.precision(b),
a):k.precision()},a.scale=function(b){return arguments.length?(k.scale(b),h.scale(.35*b),l.scale(b),a.translate(k.translate())):k.scale()},a.translate=function(b){if(!arguments.length)return k.translate();var g=k.scale(),p=+b[0],q=+b[1];return d=k.translate(b).clipExtent([[p-.455*g,q-.238*g],[p+.455*g,q+.238*g]]).stream(n).point,e=h.translate([p-.307*g,q+.201*g]).clipExtent([[p-.425*g+C,q+.12*g+C],[p-.214*g-C,q+.234*g-C]]).stream(n).point,f=l.translate([p-.205*g,q+.212*g]).clipExtent([[p-.214*g+C,
q+.166*g+C],[p-.115*g-C,q+.234*g-C]]).stream(n).point,a},a.scale(1070)};var rc,Yb,sc,tc,uc,vc,Ka={point:v,lineStart:v,lineEnd:v,polygonStart:function(){Yb=0;Ka.lineStart=Vg},polygonEnd:function(){Ka.lineStart=Ka.lineEnd=Ka.point=v;rc+=I(Yb/2)}},ki={point:function(a,b){sc>a&&(sc=a);a>uc&&(uc=a);tc>b&&(tc=b);b>vc&&(vc=b)},lineStart:v,lineEnd:v,polygonStart:v,polygonEnd:v},qa={point:Ua,lineStart:Ce,lineEnd:De,polygonStart:function(){qa.lineStart=Xg},polygonEnd:function(){qa.point=Ua;qa.lineStart=Ce;
qa.lineEnd=De}};t.geo.path=function(){function a(a){return a&&("function"==typeof h&&f.pointRadius(+h.apply(this,arguments)),k&&k.valid||(k=e(f)),t.geo.stream(a,k)),f.result()}var b,d,e,f,k,h=4.5;return a.area=function(a){return rc=0,t.geo.stream(a,e(Ka)),rc},a.centroid=function(a){return Ca=Da=ua=ja=ka=ea=Ia=Ja=va=0,t.geo.stream(a,e(qa)),va?[Ia/va,Ja/va]:ea?[ja/ea,ka/ea]:ua?[Ca/ua,Da/ua]:[0/0,0/0]},a.bounds=function(a){return uc=vc=-(sc=tc=1/0),t.geo.stream(a,e(ki)),[[sc,tc],[uc,vc]]},a.projection=
function(d){return arguments.length?(e=(b=d)?d.stream||Zg(d):X,k=null,a):b},a.context=function(b){return arguments.length?(f=null==(d=b)?new Wg:new Yg(b),"function"!=typeof h&&f.pointRadius(h),k=null,a):d},a.pointRadius=function(b){return arguments.length?(h="function"==typeof b?b:(f.pointRadius(+b),+b),a):h},a.projection(t.geo.albersUsa()).context(null)};t.geo.transform=function(a){return{stream:function(b){b=new He(b);for(var d in a)b[d]=a[d];return b}}};He.prototype={point:function(a,b){this.stream.point(a,
b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};t.geo.projection=La;t.geo.projectionMutator=Xc;(t.geo.equirectangular=function(){return La(rb)}).raw=rb.invert=rb;t.geo.rotation=function(a){function b(g){return g=a(g[0]*E,g[1]*E),g[0]*=P,g[1]*=P,g}return a=Yc(a[0]%360*E,a[1]*E,2<a.length?a[2]*E:0),b.invert=function(b){return b=
a.invert(b[0]*E,b[1]*E),b[0]*=P,b[1]*=P,b},b};Je.invert=rb;t.geo.circle=function(){function a(){var a="function"==typeof e?e.apply(this,arguments):e,b=Yc(-a[0]*E,-a[1]*E,0).invert,g=[];return d(null,null,1,{point:function(a,d){g.push(a=b(a,d));a[0]*=P;a[1]*=P}}),{type:"Polygon",coordinates:[g]}}var b,d,e=[0,0],f=6;return a.origin=function(b){return arguments.length?(e=b,a):e},a.angle=function(e){return arguments.length?(d=Vc((b=+e)*E,f*E),a):b},a.precision=function(e){return arguments.length?(d=Vc(b*
E,(f=+e)*E),a):f},a.angle(90)};t.geo.distance=function(a,b){var d,e=(b[0]-a[0])*E,f=a[1]*E,k=b[1]*E,h=Math.sin(e),e=Math.cos(e),l=Math.sin(f),f=Math.cos(f),n=Math.sin(k),k=Math.cos(k);return Math.atan2(Math.sqrt((d=k*h)*d+(d=f*n-l*k*e)*d),l*n+f*k*e)};t.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return t.range(Math.ceil(k/y)*y,f,y).map(s).concat(t.range(Math.ceil(p/R)*R,n,R).map(x)).concat(t.range(Math.ceil(e/v)*v,d,v).filter(function(a){return I(a%
y)>C}).map(q)).concat(t.range(Math.ceil(l/w)*w,h,w).filter(function(a){return I(a%R)>C}).map(r))}var d,e,f,k,h,l,n,p,q,r,s,x,v=10,w=v,y=90,R=360,H=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[s(k).concat(x(n).slice(1),s(f).reverse().slice(1),x(p).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?
(k=+b[0][0],f=+b[1][0],p=+b[0][1],n=+b[1][1],k>f&&(b=k,k=f,f=b),p>n&&(b=p,p=n,n=b),a.precision(H)):[[k,p],[f,n]]},a.minorExtent=function(b){return arguments.length?(e=+b[0][0],d=+b[1][0],l=+b[0][1],h=+b[1][1],e>d&&(b=e,e=d,d=b),l>h&&(b=l,l=h,h=b),a.precision(H)):[[e,l],[d,h]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(y=+b[0],R=+b[1],a):[y,R]},a.minorStep=function(b){return arguments.length?(v=+b[0],w=+b[1],
a):[v,w]},a.precision=function(b){return arguments.length?(H=+b,q=Oe(l,h,90),r=Pe(e,d,H),s=Oe(p,n,90),x=Pe(k,f,H),a):H},a.majorExtent([[-180,-90+C],[180,90-C]]).minorExtent([[-180,-80-C],[180,80+C]])};t.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||e.apply(this,arguments),d||f.apply(this,arguments)]}}var b,d,e=Zc,f=$c;return a.distance=function(){return t.geo.distance(b||e.apply(this,arguments),d||f.apply(this,arguments))},a.source=function(d){return arguments.length?
(e=d,b="function"==typeof d?null:d,a):e},a.target=function(b){return arguments.length?(f=b,d="function"==typeof b?null:b,a):f},a.precision=function(){return arguments.length?a:0},a};t.geo.interpolate=function(a,b){return $g(a[0]*E,a[1]*E,b[0]*E,b[1]*E)};t.geo.length=function(a){return wc=0,t.geo.stream(a,nb),wc};var wc,nb={sphere:v,point:v,lineStart:function(){function a(a,f){var k=Math.sin(f*=E),h=Math.cos(f),l=I((a*=E)-b),n=Math.cos(l);wc+=Math.atan2(Math.sqrt((l=h*Math.sin(l))*l+(l=e*k-d*h*n)*
l),d*k+e*h*n);b=a;d=k;e=h}var b,d,e;nb.point=function(f,k){b=f*E;d=Math.sin(k*=E);e=Math.cos(k);nb.point=a};nb.lineEnd=function(){nb.point=nb.lineEnd=v}},lineEnd:v,polygonStart:v,polygonEnd:v},cg=sb(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(t.geo.azimuthalEqualArea=function(){return La(cg)}).raw=cg;var dg=sb(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},X);(t.geo.azimuthalEquidistant=function(){return La(dg)}).raw=dg;(t.geo.conicConformal=function(){return Wc(Qe)}).raw=
Qe;(t.geo.conicEquidistant=function(){return Wc(Re)}).raw=Re;var eg=sb(function(a){return 1/a},Math.atan);(t.geo.gnomonic=function(){return La(eg)}).raw=eg;Zb.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-Y]};(t.geo.mercator=function(){return Se(Zb)}).raw=Zb;var fg=sb(function(){return 1},Math.asin);(t.geo.orthographic=function(){return La(fg)}).raw=fg;var gg=sb(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(t.geo.stereographic=function(){return La(gg)}).raw=gg;ad.invert=
function(a,b){return[-b,2*Math.atan(Math.exp(a))-Y]};(t.geo.transverseMercator=function(){var a=Se(ad),b=a.center,d=a.rotate;return a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])},a.rotate=function(a){return a?d([a[0],a[1],2<a.length?a[2]+90:90]):(a=d(),[a[0],a[1],a[2]-90])},d([0,0,90])}).raw=ad;t.geom={};t.geom.hull=function(a){function b(a){if(3>a.length)return[];var g,f=J(d),k=J(e),h=a.length,l=[],n=[];for(g=0;h>g;g++)l.push([+f.call(this,a[g],g),+k.call(this,a[g],g),g]);l.sort(ah);
for(g=0;h>g;g++)n.push([l[g][0],-l[g][1]]);var f=Te(l),n=Te(n),k=n[0]===f[0],h=n[n.length-1]===f[f.length-1],p=[];for(g=f.length-1;0<=g;--g)p.push(a[l[f[g]][2]]);for(g=+k;g<n.length-h;++g)p.push(a[l[n[g]][2]]);return p}var d=gb,e=tb;return arguments.length?b(a):(b.x=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=a,b):e},b)};t.geom.polygon=function(a){return Db(a,xc),a};var xc=t.geom.polygon.prototype=[];xc.area=function(){for(var a,b=-1,d=this.length,e=this[d-
1],f=0;++b<d;)a=e,e=this[b],f+=a[1]*e[0]-a[0]*e[1];return.5*f};xc.centroid=function(a){var b,d,e=-1,f=this.length,k=0,h=0,l=this[f-1];for(arguments.length||(a=-1/(6*this.area()));++e<f;)b=l,l=this[e],d=b[0]*l[1]-l[0]*b[1],k+=(b[0]+l[0])*d,h+=(b[1]+l[1])*d;return[k*a,h*a]};xc.clip=function(a){for(var b,d,e,f,k,h,l=Ve(a),n=-1,p=this.length-Ve(this),q=this[p-1];++n<p;){b=a.slice();a.length=0;f=this[n];k=b[(e=b.length-l)-1];for(d=-1;++d<e;)h=b[d],bd(h,q,f)?(bd(k,q,f)||a.push(Ue(k,h,q,f)),a.push(h)):bd(k,
q,f)&&a.push(Ue(k,h,q,f)),k=h;l&&a.push(a[0]);q=f}return a};var kb,Va,ib,ed,ub,Xe=[],af=[];Ze.prototype.prepare=function(){for(var a,b=this.edges,d=b.length;d--;)a=b[d].edge,a.b&&a.a||b.splice(d,1);return b.sort($e),b.length};bc.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};fd.prototype={insert:function(a,b){var d,e,f;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=
b}else a.R=b;d=a}else this._?(a=cf(this._),b.P=null,b.N=a,a.P=a.L=b,d=a):(b.P=b.N=null,this._=b,d=null);b.L=b.R=null;b.U=d;b.C=!0;for(a=b;d&&d.C;)e=d.U,d===e.L?(f=e.R,f&&f.C?(d.C=f.C=!1,e.C=!0,a=e):(a===d.R&&(wb(this,d),a=d,d=a.U),d.C=!1,e.C=!0,xb(this,e))):(f=e.L,f&&f.C?(d.C=f.C=!1,e.C=!0,a=e):(a===d.L&&(xb(this,d),a=d,d=a.U),d.C=!1,e.C=!0,wb(this,e))),d=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var b,d,e,f=a.U,k=a.L,h=a.R;if(d=k?h?cf(h):k:h,f?f.L===a?f.L=
d:f.R=d:this._=d,k&&h?(e=d.C,d.C=a.C,d.L=k,k.U=d,d!==h?(f=d.U,d.U=a.U,a=d.R,f.L=a,d.R=h,h.U=d):(d.U=f,f=d,a=d.R)):(e=a.C,a=d),a&&(a.U=f),!e){if(a&&a.C)return a.C=!1,void 0;do{if(a===this._)break;if(a===f.L){if(b=f.R,b.C&&(b.C=!1,f.C=!0,wb(this,f),b=f.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,xb(this,b),b=f.R);b.C=f.C;f.C=b.R.C=!1;wb(this,f);a=this._;break}}else if(b=f.L,b.C&&(b.C=!1,f.C=!0,xb(this,f),b=f.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,wb(this,b),b=f.L);b.C=f.C;
f.C=b.L.C=!1;xb(this,f);a=this._;break}b.C=!0;a=f;f=f.U}while(!a.C);a&&(a.C=!1)}}};t.geom.voronoi=function(a){function b(a){var g=Array(a.length),e=l[0][0],f=l[0][1],k=l[1][0],h=l[1][1];return gd(d(a),l).cells.forEach(function(b,d){var m=b.edges,l=b.site;(g[d]=m.length?m.map(function(a){a=a.start();return[a.x,a.y]}):l.x>=e&&l.x<=k&&l.y>=f&&l.y<=h?[[e,h],[k,h],[k,f],[e,f]]:[]).point=a[d]}),g}function d(a){return a.map(function(a,b){return{x:Math.round(k(a,b)/C)*C,y:Math.round(h(a,b)/C)*C,i:b}})}var e=
gb,f=tb,k=e,h=f,l=yc;return a?b(a):(b.links=function(a){return gd(d(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})},b.triangles=function(a){var b=[];return gd(d(a)).cells.forEach(function(d,g){for(var e,f=d.site,k=d.edges.sort($e),m=-1,h=k.length,l=k[h-1].edge,l=l.l===f?l.r:l.l;++m<h;)e=l,l=k[m].edge,l=l.l===f?l.r:l.l,g<e.i&&g<l.i&&0>(f.x-l.x)*(e.y-f.y)-(f.x-e.x)*(l.y-f.y)&&b.push([a[g],a[e.i],a[l.i]])}),b},b.x=function(a){return arguments.length?
(k=J(e=a),b):e},b.y=function(a){return arguments.length?(h=J(f=a),b):f},b.clipExtent=function(a){return arguments.length?(l=null==a?yc:a,b):l===yc?null:l},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):l===yc?null:l&&l[1]},b)};var yc=[[-1E6,-1E6],[1E6,1E6]];t.geom.delaunay=function(a){return t.geom.voronoi().triangles(a)};t.geom.quadtree=function(a,b,d,e,f){function k(a){function p(a,b,d,g,e,f,k,m){if(!isNaN(d)&&!isNaN(g))if(a.leaf){var h=a.x,l=a.y;if(null!=h){if(!(.01>I(h-
d)+I(l-g))){var n=a.point;a.x=a.y=a.point=null;q(a,n,h,l,e,f,k,m)}q(a,b,d,g,e,f,k,m)}else a.x=d,a.y=g,a.point=b}else q(a,b,d,g,e,f,k,m)}function q(a,b,d,g,e,f,k,m){var h=.5*(e+k),l=.5*(f+m),n=d>=h,u=g>=l,r=(u<<1)+n;a.leaf=!1;a=a.nodes[r]||(a.nodes[r]=df());n?e=h:k=h;u?f=l:m=l;p(a,b,d,g,e,f,k,m)}var u,r,t,s,x,v,w,y,G,z=J(l),N=J(n);if(null!=b)v=b,w=d,y=e,G=f;else if(y=G=-(v=w=1/0),r=[],t=[],x=a.length,h)for(s=0;x>s;++s)u=a[s],u.x<v&&(v=u.x),u.y<w&&(w=u.y),u.x>y&&(y=u.x),u.y>G&&(G=u.y),r.push(u.x),t.push(u.y);
else for(s=0;x>s;++s){var A=+z(u=a[s],s);u=+N(u,s);v>A&&(v=A);w>u&&(w=u);A>y&&(y=A);u>G&&(G=u);r.push(A);t.push(u)}A=y-v;u=G-w;A>u?G=w+A:y=v+u;var L=df();if(L.add=function(a){p(L,a,+z(a,++s),+N(a,s),v,w,y,G)},L.visit=function(a){yb(a,L,v,w,y,G)},s=-1,null==b){for(;++s<x;)p(L,a[s],r[s],t[s],v,w,y,G);--s}else a.forEach(L.add);return r=t=a=u=null,L}var h,l=gb,n=tb;return(h=arguments.length)?(l=gh,n=hh,3===h&&(f=d,e=b,d=b=0),k(a)):(k.x=function(a){return arguments.length?(l=a,k):l},k.y=function(a){return arguments.length?
(n=a,k):n},k.extent=function(a){return arguments.length?(null==a?b=d=e=f=null:(b=+a[0][0],d=+a[0][1],e=+a[1][0],f=+a[1][1]),k):null==b?null:[[b,d],[e,f]]},k.size=function(a){return arguments.length?(null==a?b=d=e=f=null:(b=d=0,e=+a[0],f=+a[1]),k):null==b?null:[e-b,f-d]},k)};t.interpolateRgb=hd;t.interpolateObject=ef;t.interpolateNumber=Ea;t.interpolateString=ff;var id=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jd=new RegExp(id.source,"g");t.interpolate=Wa;t.interpolators=[function(a,b){var d=typeof b;
return("string"===d?Hb.has(b)||/^(#|rgb\(|hsl\()/.test(b)?hd:ff:b instanceof Qa?hd:Array.isArray(b)?cc:"object"===d&&isNaN(b)?ef:Ea)(a,b)}];t.interpolateArray=cc;var hg=function(){return X},li=t.map({linear:hg,poly:function(a){return function(b){return Math.pow(b,a)}},quad:function(){return jh},cubic:function(){return kh},sin:function(){return mh},exp:function(){return nh},circle:function(){return oh},elastic:function(a,b){var d;return 2>arguments.length&&(b=.45),arguments.length?d=b/ha*Math.asin(1/
a):(a=1,d=b/4),function(e){return 1+a*Math.pow(2,-10*e)*Math.sin((e-d)*ha/b)}},back:function(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}},bounce:function(){return ph}}),mi=t.map({"in":X,out:gf,"in-out":hf,"out-in":function(a){return hf(gf(a))}});t.ease=function(a){var b=a.indexOf("-"),d=0<=b?a.slice(0,b):a,b=0<=b?a.slice(b+1):"in";return d=li.get(d)||hg,b=mi.get(b)||X,ih(b(d.apply(null,Vf.call(arguments,1))))};t.interpolateHcl=function(a,b){a=t.hcl(a);b=t.hcl(b);var d=a.h,e=a.c,f=
a.l,k=b.h-d,h=b.c-e,l=b.l-f;return isNaN(h)&&(h=0,e=isNaN(e)?b.c:e),isNaN(k)?(k=0,d=isNaN(d)?b.h:d):180<k?k-=360:-180>k&&(k+=360),function(a){return Hc(d+k*a,e+h*a,f+l*a)+""}};t.interpolateHsl=function(a,b){a=t.hsl(a);b=t.hsl(b);var d=a.h,e=a.s,f=a.l,k=b.h-d,h=b.s-e,l=b.l-f;return isNaN(h)&&(h=0,e=isNaN(e)?b.s:e),isNaN(k)?(k=0,d=isNaN(d)?b.h:d):180<k?k-=360:-180>k&&(k+=360),function(a){return Gc(d+k*a,e+h*a,f+l*a)+""}};t.interpolateLab=function(a,b){a=t.lab(a);b=t.lab(b);var d=a.l,e=a.a,f=a.b,k=b.l-
d,h=b.a-e,l=b.b-f;return function(a){return ce(d+k*a,e+h*a,f+l*a)+""}};t.interpolateRound=jf;t.transform=function(a){var b=ra.createElementNS(t.ns.prefix.svg,"g");return(t.transform=function(a){if(null!=a){b.setAttribute("transform",a);var d=b.transform.baseVal.consolidate()}return new kf(d?d.matrix:ni)})(a)};kf.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ni={a:1,b:0,c:0,d:1,e:0,f:0};t.interpolateTransform=
mf;t.layout={};t.layout.bundle=function(){return function(a){for(var b=[],d=-1,e=a.length;++d<e;)b.push(sh(a[d]));return b}};t.layout.chord=function(){function a(){var a,p,r,s,x,v={},w=[],y=t.range(k),Z=[];d=[];e=[];a=0;for(s=-1;++s<k;){p=0;for(x=-1;++x<k;)p+=f[s][x];w.push(p);Z.push(t.range(k));a+=p}h&&y.sort(function(a,b){return h(w[a],w[b])});l&&Z.forEach(function(a,b){a.sort(function(a,d){return l(f[b][a],f[b][d])})});a=(ha-q*k)/a;p=0;for(s=-1;++s<k;){r=p;for(x=-1;++x<k;){var G=y[s],z=Z[G][x],
N=f[G][z],A=p,L=p+=N*a;v[G+"-"+z]={index:G,subindex:z,startAngle:A,endAngle:L,value:N}}e[G]={index:G,startAngle:r,endAngle:p,value:(p-r)/a};p+=q}for(s=-1;++s<k;)for(x=s-1;++x<k;)a=v[s+"-"+x],p=v[x+"-"+s],(a.value||p.value)&&d.push(a.value<p.value?{source:p,target:a}:{source:a,target:p});n&&b()}function b(){d.sort(function(a,b){return n((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var d,e,f,k,h,l,n,p={},q=0;return p.matrix=function(a){return arguments.length?(k=(f=a)&&f.length,
d=e=null,p):f},p.padding=function(a){return arguments.length?(q=a,d=e=null,p):q},p.sortGroups=function(a){return arguments.length?(h=a,d=e=null,p):h},p.sortSubgroups=function(a){return arguments.length?(l=a,d=null,p):l},p.sortChords=function(a){return arguments.length?(n=a,d&&b(),p):n},p.chords=function(){return d||a(),d},p.groups=function(){return e||a(),e},p};t.layout.force=function(){function a(a){return function(b,d,g,e){if(b.point!==a){g=b.cx-a.x;var f=b.cy-a.y;d=e-d;e=g*g+f*f;if(e>d*d/y)return v>
e&&(d=b.charge/e,a.px-=g*d,a.py-=f*d),!0;b.point&&e&&v>e&&(d=b.pointCharge/e,a.px-=g*d,a.py-=f*d)}return!b.charge}}function b(a){a.px=t.event.x;a.py=t.event.y;l.resume()}var d,e,f,k,h,l={},n=t.dispatch("start","tick","end"),p=[1,1],q=.9,r=oi,s=pi,x=-30,v=qi,w=.1,y=.64,z=[],H=[];return l.tick=function(){if(.005>(e*=.99))return n.end({type:"end",alpha:e=0}),!0;var b,d,g,m,l,r,s,v,y=z.length,V=H.length;for(d=0;V>d;++d)g=H[d],b=g.source,m=g.target,s=m.x-b.x,v=m.y-b.y,(l=s*s+v*v)&&(l=e*k[d]*((l=Math.sqrt(l))-
f[d])/l,s*=l,v*=l,m.x-=s*(r=b.weight/(m.weight+b.weight)),m.y-=v*r,b.x+=s*(r=1-r),b.y+=v*r);if((r=e*w)&&(s=p[0]/2,v=p[1]/2,d=-1,r))for(;++d<y;)g=z[d],g.x+=(s-g.x)*r,g.y+=(v-g.y)*r;if(x)for(of(b=t.geom.quadtree(z),e,h),d=-1;++d<y;)(g=z[d]).fixed||b.visit(a(g));for(d=-1;++d<y;)g=z[d],g.fixed?(g.x=g.px,g.y=g.py):(g.x-=(g.px-(g.px=g.x))*q,g.y-=(g.py-(g.py=g.y))*q);n.tick({type:"tick",alpha:e})},l.nodes=function(a){return arguments.length?(z=a,l):z},l.links=function(a){return arguments.length?(H=a,l):
H},l.size=function(a){return arguments.length?(p=a,l):p},l.linkDistance=function(a){return arguments.length?(r="function"==typeof a?a:+a,l):r},l.distance=l.linkDistance,l.linkStrength=function(a){return arguments.length?(s="function"==typeof a?a:+a,l):s},l.friction=function(a){return arguments.length?(q=+a,l):q},l.charge=function(a){return arguments.length?(x="function"==typeof a?a:+a,l):x},l.chargeDistance=function(a){return arguments.length?(v=a*a,l):Math.sqrt(v)},l.gravity=function(a){return arguments.length?
(w=+a,l):w},l.theta=function(a){return arguments.length?(y=a*a,l):Math.sqrt(y)},l.alpha=function(a){return arguments.length?(a=+a,e?e=0<a?a:0:0<a&&(n.start({type:"start",alpha:e=a}),t.timer(l.tick)),l):e},l.start=function(){function a(g,f){if(!d){d=Array(e);for(m=0;e>m;++m)d[m]=[];for(m=0;l>m;++m){var k=H[m];d[k.source.index].push(k.target);d[k.target.index].push(k.source)}}for(var h=d[b],m=-1,l=h.length;++m<l;)if(!isNaN(k=h[m][g]))return k;return Math.random()*f}var b,d,g,e=z.length,m=H.length,n=
p[0],q=p[1];for(b=0;e>b;++b)(g=z[b]).index=b,g.weight=0;for(b=0;m>b;++b)g=H[b],"number"==typeof g.source&&(g.source=z[g.source]),"number"==typeof g.target&&(g.target=z[g.target]),++g.source.weight,++g.target.weight;for(b=0;e>b;++b)g=z[b],isNaN(g.x)&&(g.x=a("x",n)),isNaN(g.y)&&(g.y=a("y",q)),isNaN(g.px)&&(g.px=g.x),isNaN(g.py)&&(g.py=g.y);if(f=[],"function"==typeof r)for(b=0;m>b;++b)f[b]=+r.call(this,H[b],b);else for(b=0;m>b;++b)f[b]=r;if(k=[],"function"==typeof s)for(b=0;m>b;++b)k[b]=+s.call(this,
H[b],b);else for(b=0;m>b;++b)k[b]=s;if(h=[],"function"==typeof x)for(b=0;e>b;++b)h[b]=+x.call(this,z[b],b);else for(b=0;e>b;++b)h[b]=x;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){return d||(d=t.behavior.drag().origin(X).on("dragstart.force",th).on("drag.force",b).on("dragend.force",uh)),arguments.length?(this.on("mouseover.force",vh).on("mouseout.force",wh).call(d),void 0):d},t.rebind(l,n,"on")};var oi=20,pi=1,qi=1/0;t.layout.hierarchy=
function(){function a(f){var k,h=[f],l=[];for(f.depth=0;null!=(k=h.pop());)if(l.push(k),(p=d.call(a,k,k.depth))&&(n=p.length)){for(var n,p,q;0<=--n;)h.push(q=p[n]),q.parent=k,q.depth=k.depth+1;e&&(k.value=0);k.children=p}else e&&(k.value=+e.call(a,k,k.depth)||0),delete k.children;return wa(f,function(a){var d,f;b&&(d=a.children)&&d.sort(b);e&&(f=a.parent)&&(f.value+=a.value)}),l}var b=Ah,d=yh,e=zh;return a.sort=function(d){return arguments.length?(b=d,a):b},a.children=function(b){return arguments.length?
(d=b,a):d},a.value=function(b){return arguments.length?(e=b,a):e},a.revalue=function(b){return e&&(Ab(b,function(a){a.children&&(a.value=0)}),wa(b,function(b){var d;b.children||(b.value=+e.call(a,b,b.depth)||0);(d=b.parent)&&(d.value+=b.value)})),b},a};t.layout.partition=function(){function a(b,d,g,e){var f=b.children;if(b.x=d,b.y=b.depth*e,b.dx=g,b.dy=e,f&&(k=f.length)){var k,h,m=-1;for(g=b.value?g/b.value:0;++m<k;)a(h=f[m],d,b=h.value*g,e),d+=b}}function b(a){a=a.children;var d=0;if(a&&(e=a.length))for(var e,
f=-1;++f<e;)d=Math.max(d,b(a[f]));return 1+d}function d(k,h){var m=e.call(this,k,h);return a(m[0],0,f[0],f[1]/b(m[0])),m}var e=t.layout.hierarchy(),f=[1,1];return d.size=function(a){return arguments.length?(f=a,d):f},zb(d,e)};t.layout.pie=function(){function a(k){var h=k.map(function(d,e){return+b.call(a,d,e)}),l=+("function"==typeof e?e.apply(this,arguments):e),n=(("function"==typeof f?f.apply(this,arguments):f)-l)/t.sum(h),p=t.range(k.length);null!=d&&p.sort(d===ig?function(a,b){return h[b]-h[a]}:
function(a,b){return d(k[a],k[b])});var q=[];return p.forEach(function(a){var b;q[a]={data:k[a],value:b=h[a],startAngle:l,endAngle:l+=b*n}}),q}var b=Number,d=ig,e=0,f=ha;return a.value=function(d){return arguments.length?(b=d,a):b},a.sort=function(b){return arguments.length?(d=b,a):d},a.startAngle=function(b){return arguments.length?(e=b,a):e},a.endAngle=function(b){return arguments.length?(f=b,a):f},a};var ig={};t.layout.stack=function(){function a(l,n){var p=l.map(function(d,e){return b.call(a,
d,e)}),q=p.map(function(b){return b.map(function(b,d){return[k.call(a,b,d),h.call(a,b,d)]})}),r=d.call(a,q,n),p=t.permute(p,r),q=t.permute(q,r),s,x,v=e.call(a,q,n),w=p.length,y=p[0].length;for(s=0;y>s;++s)for(f.call(a,p[0][s],x=v[s],q[0][s][1]),r=1;w>r;++r)f.call(a,p[r][s],x+=q[r-1][s][1],q[r][s][1]);return l}var b=X,d=kd,e=ld,f=Dh,k=Bh,h=Ch;return a.values=function(d){return arguments.length?(b=d,a):b},a.order=function(b){return arguments.length?(d="function"==typeof b?b:ri.get(b)||kd,a):d},a.offset=
function(b){return arguments.length?(e="function"==typeof b?b:si.get(b)||ld,a):e},a.x=function(b){return arguments.length?(k=b,a):k},a.y=function(b){return arguments.length?(h=b,a):h},a.out=function(b){return arguments.length?(f=b,a):f},a};var ri=t.map({"inside-out":function(a){var b,d=a.length,e=a.map(Eh),f=a.map(Fh),k=t.range(d).sort(function(a,b){return e[a]-e[b]}),h=0,l=0,n=[],p=[];for(a=0;d>a;++a)b=k[a],l>h?(h+=f[b],n.push(b)):(l+=f[b],p.push(b));return p.reverse().concat(n)},reverse:function(a){return t.range(a.length).reverse()},
"default":kd}),si=t.map({silhouette:function(a){var b,d,e,f=a.length,k=a[0].length,h=[],l=0,n=[];for(d=0;k>d;++d){for(e=b=0;f>b;b++)e+=a[b][d][1];e>l&&(l=e);h.push(e)}for(d=0;k>d;++d)n[d]=(l-h[d])/2;return n},wiggle:function(a){var b,d,e,f,k,h,l,n,p,q=a.length,r=a[0],s=r.length,t=[];t[0]=n=p=0;for(d=1;s>d;++d){for(f=b=0;q>b;++b)f+=a[b][d][1];k=b=0;for(l=r[d][0]-r[d-1][0];q>b;++b){e=0;for(h=(a[b][d][1]-a[b][d-1][1])/(2*l);b>e;++e)h+=(a[e][d][1]-a[e][d-1][1])/l;k+=h*a[b][d][1]}t[d]=n-=f?k/f*l:0;p>n&&
(p=n)}for(d=0;s>d;++d)t[d]-=p;return t},expand:function(a){var b,d,e,f=a.length,k=a[0].length,h=1/f,l=[];for(d=0;k>d;++d){for(e=b=0;f>b;b++)e+=a[b][d][1];if(e)for(b=0;f>b;b++)a[b][d][1]/=e;else for(b=0;f>b;b++)a[b][d][1]=h}for(d=0;k>d;++d)l[d]=0;return l},zero:ld});t.layout.histogram=function(){function a(a,k){var h,l,n=[],p=a.map(d,this),q=e.call(this,p,k),r=f.call(this,q,p,k);k=-1;for(var s=p.length,x=r.length-1,v=b?1:1/s;++k<x;)h=n[k]=[],h.dx=r[k+1]-(h.x=r[k]),h.y=0;if(0<x)for(k=-1;++k<s;)l=p[k],
l>=q[0]&&l<=q[1]&&(h=n[t.bisect(r,l,1,x)-1],h.y+=v,h.push(a[k]));return n}var b=!0,d=Number,e=Ih,f=Hh;return a.value=function(b){return arguments.length?(d=b,a):d},a.range=function(b){return arguments.length?(e=J(b),a):e},a.bins=function(b){return arguments.length?(f="number"==typeof b?function(a){return pf(a,b)}:J(b),a):f},a.frequency=function(d){return arguments.length?(b=!!d,a):b},a};t.layout.pack=function(){function a(a,k){var h=d.call(this,a,k),l=h[0],n=f[0],p=f[1],q=null==b?Math.sqrt:"function"==
typeof b?b:function(){return b};if(l.x=l.y=0,wa(l,function(a){a.r=+q(a.value)}),wa(l,sf),e){var r=e*(b?1:Math.max(2*l.r/n,2*l.r/p))/2;wa(l,function(a){a.r+=r});wa(l,sf);wa(l,function(a){a.r-=r})}return uf(l,n/2,p/2,b?1:1/Math.max(2*l.r/n,2*l.r/p)),h}var b,d=t.layout.hierarchy().sort(Jh),e=0,f=[1,1];return a.size=function(b){return arguments.length?(f=b,a):f},a.radius=function(d){return arguments.length?(b=null==d||"function"==typeof d?d:+d,a):b},a.padding=function(b){return arguments.length?(e=+b,
a):e},zb(a,d)};t.layout.tree=function(){function a(a,p){var q=k.call(this,a,p),r=q[0],s=b(r);if(wa(s,d),s.parent.m=-s.z,Ab(s,e),n)Ab(r,f);else{var t=r,x=r,v=r;Ab(r,function(a){a.x<t.x&&(t=a);a.x>x.x&&(x=a);a.depth>v.depth&&(v=a)});var w=h(t,x)/2-t.x,y=l[0]/(x.x+h(x,t)/2+w),z=l[1]/(v.depth||1);Ab(r,function(a){a.x=(a.x+w)*y;a.y=a.depth*z})}return q}function b(a){for(var d={A:null,children:[a]},e=[d];null!=(a=e.pop());)for(var g,f=a.children,k=0,h=f.length;h>k;++k)e.push((f[k]=g={_:f[k],parent:a,children:(g=
f[k].children)&&g.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:k}).a=g);return d.children[0]}function d(a){var b=a.children,e=a.parent.children,g=a.i?e[a.i-1]:null;if(b.length){for(var f,k=0,l=0,m=a.children,n=m.length;0<=--n;)f=m[n],f.z+=k,f.m+=k,k+=f.s+(l+=f.c);b=(b[0].z+b[b.length-1].z)/2;g?(a.z=g.z+h(a._,g._),a.m=a.z-b):a.z=b}else g&&(a.z=g.z+h(a._,g._));b=a.parent;e=a.parent.A||e[0];if(g){for(var k=f=a,l=g,m=f.parent.children[0],n=f.m,p=k.m,q=l.m,r=m.m;l=od(l),f=nd(f),l&&f;){m=nd(m);k=
od(k);k.a=a;g=l.z+q-f.z-n+h(l._,f._);if(0<g){var s=l.a.parent===a.parent?l.a:e,u=a,t=g,x=t/(u.i-s.i);u.c-=x;u.s+=t;s.c+=x;u.z+=t;u.m+=t;n+=g;p+=g}q+=l.m;n+=f.m;r+=m.m;p+=k.m}l&&!od(k)&&(k.t=l,k.m+=q-p);f&&!nd(m)&&(m.t=f,m.m+=n-r,e=a)}b.A=e}function e(a){a._.x=a.z+a.parent.m;a.m+=a.parent.m}function f(a){a.x*=l[0];a.y=a.depth*l[1]}var k=t.layout.hierarchy().sort(null).value(null),h=vf,l=[1,1],n=null;return a.separation=function(b){return arguments.length?(h=b,a):h},a.size=function(b){return arguments.length?
(n=null==(l=b)?f:null,a):n?null:l},a.nodeSize=function(b){return arguments.length?(n=null==(l=b)?null:f,a):n?l:null},zb(a,k)};t.layout.cluster=function(){function a(a,k){var h,l=b.call(this,a,k),n=l[0],p=0;wa(n,function(a){var b=a.children;b&&b.length?(a.x=Nh(b),a.y=Mh(b)):(a.x=h?p+=d(a,h):0,a.y=0,h=a)});var q=wf(n),r=xf(n),s=q.x-d(q,r)/2,t=r.x+d(r,q)/2;return wa(n,f?function(a){a.x=(a.x-n.x)*e[0];a.y=(n.y-a.y)*e[1]}:function(a){a.x=(a.x-s)/(t-s)*e[0];a.y=(1-(n.y?a.y/n.y:1))*e[1]}),l}var b=t.layout.hierarchy().sort(null).value(null),
d=vf,e=[1,1],f=!1;return a.separation=function(b){return arguments.length?(d=b,a):d},a.size=function(b){return arguments.length?(f=null==(e=b),a):f?null:e},a.nodeSize=function(b){return arguments.length?(f=null!=(e=b),a):f?e:null},zb(a,b)};t.layout.treemap=function(){function a(a,b){for(var d,e,g=-1,f=a.length;++g<f;)e=(d=a[g]).value*(0>b?0:b),d.area=isNaN(e)||0>=e?0:e}function b(d){var f=d.children;if(f&&f.length){var k,h=q(d),l=[],m=f.slice(),n=1/0,p="slice"===s?h.dx:"dice"===s?h.dy:"slice-dice"===
s?1&d.depth?h.dy:h.dx:Math.min(h.dx,h.dy);a(m,h.dx*h.dy/d.value);for(l.area=0;0<(d=m.length);){l.push(d=m[d-1]);l.area+=d.area;var r;if(!(r="squarify"!==s)){d=p;k=void 0;var u=l.area;r=0;for(var t=1/0,v=-1,w=l.length;++v<w;)(k=l[v].area)&&(t>k&&(t=k),k>r&&(r=k));r=(k=(u*=u,d*=d,u?Math.max(d*r*x/u,u/(d*t*x)):1/0))<=n}r?(m.pop(),n=k):(l.area-=l.pop().area,e(l,p,h,!1),p=Math.min(h.dx,h.dy),l.length=l.area=0,n=1/0)}l.length&&(e(l,p,h,!0),l.length=l.area=0);f.forEach(b)}}function d(b){var g=b.children;
if(g&&g.length){var f=q(b),k=g.slice(),h=[];a(k,f.dx*f.dy/b.value);for(h.area=0;b=k.pop();)h.push(b),h.area+=b.area,null!=b.z&&(e(h,b.z?f.dx:f.dy,f,!k.length),h.length=h.area=0);g.forEach(d)}}function e(a,b,d,g){var f,k=-1,h=a.length,m=d.x,n=d.y,p=b?l(a.area/b):0;if(b==d.dx){for((g||p>d.dy)&&(p=d.dy);++k<h;)f=a[k],f.x=m,f.y=n,f.dy=p,m+=f.dx=Math.min(d.x+d.dx-m,p?l(f.area/p):0);f.z=!0;f.dx+=d.x+d.dx-m;d.y+=p;d.dy-=p}else{for((g||p>d.dx)&&(p=d.dx);++k<h;)f=a[k],f.x=m,f.y=n,f.dx=p,n+=f.dy=Math.min(d.y+
d.dy-n,p?l(f.area/p):0);f.z=!1;f.dy+=d.y+d.dy-n;d.x+=p;d.dx-=p}}function f(e){e=k||h(e);var l=e[0];return l.x=0,l.y=0,l.dx=n[0],l.dy=n[1],k&&h.revalue(l),a([l],l.dx*l.dy/l.value),(k?d:b)(l),r&&(k=e),e}var k,h=t.layout.hierarchy(),l=Math.round,n=[1,1],p=null,q=pd,r=!1,s="squarify",x=.5*(1+Math.sqrt(5));return f.size=function(a){return arguments.length?(n=a,f):n},f.padding=function(a){function b(d){var e=a.call(f,d,d.depth);return null==e?pd(d):yf(d,"number"==typeof e?[e,e,e,e]:e)}function d(b){return yf(b,
a)}if(!arguments.length)return p;var e;return q=null==(p=a)?pd:"function"==(e=typeof a)?b:"number"===e?(a=[a,a,a,a],d):d,f},f.round=function(a){return arguments.length?(l=a?Math.round:Number,f):l!=Number},f.sticky=function(a){return arguments.length?(r=a,k=null,f):r},f.ratio=function(a){return arguments.length?(x=a,f):x},f.mode=function(a){return arguments.length?(s=a+"",f):s},zb(f,h)};t.random={normal:function(a,b){var d=arguments.length;return 2>d&&(b=1),1>d&&(a=0),function(){var d,e;do d=2*Math.random()-
1,e=2*Math.random()-1,e=d*d+e*e;while(!e||1<e);return a+b*d*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=t.random.normal.apply(t,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=t.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,d=0;a>d;d++)b+=Math.random();return b}}};t.scale={};var Ph={floor:X,ceil:X};t.scale.linear=function(){return Af([0,1],[0,1],Wa,!1)};var Sh={s:1,g:1,p:1,r:1,e:1};t.scale.log=function(){return Bf(t.scale.linear().domain([0,
1]),10,!0,[1,10])};var Cf=t.format(".0e"),Th={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};t.scale.pow=function(){return Df(t.scale.linear(),1,[0,1])};t.scale.sqrt=function(){return t.scale.pow().exponent(.5)};t.scale.ordinal=function(){return Ef([],{t:"range",a:[[]]})};t.scale.category10=function(){return t.scale.ordinal().range(ti)};t.scale.category20=function(){return t.scale.ordinal().range(ui)};t.scale.category20b=function(){return t.scale.ordinal().range(vi)};
t.scale.category20c=function(){return t.scale.ordinal().range(wi)};var ti=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Gb),ui=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Gb),vi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,
10834324,13528509,14589654].map(Gb),wi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Gb);t.scale.quantile=function(){return Ff([],[])};t.scale.quantize=function(){return Gf(0,1,[0,1])};t.scale.threshold=function(){return Hf([.5],[0,1])};t.scale.identity=function(){return If([0,1])};t.svg={};t.svg.arc=function(){function a(){var a=b.apply(this,arguments),k=d.apply(this,
arguments),h=e.apply(this,arguments)+Xa,l=f.apply(this,arguments)+Xa,n=(h>l&&(n=h,h=l,l=n),l-h),p=F>n?"0":"1",q=Math.cos(h),h=Math.sin(h),r=Math.cos(l),l=Math.sin(l);return n>=xi?a?"M0,"+k+"A"+k+","+k+" 0 1,1 0,"+-k+"A"+k+","+k+" 0 1,1 0,"+k+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+k+"A"+k+","+k+" 0 1,1 0,"+-k+"A"+k+","+k+" 0 1,1 0,"+k+"Z":a?"M"+k*q+","+k*h+"A"+k+","+k+" 0 "+p+",1 "+k*r+","+k*l+"L"+a*r+","+a*l+"A"+a+","+a+" 0 "+p+",0 "+a*q+","+a*h+"Z":"M"+k*q+","+k*h+
"A"+k+","+k+" 0 "+p+",1 "+k*r+","+k*l+"L0,0Z"}var b=Uh,d=Vh,e=Jf,f=Kf;return a.innerRadius=function(d){return arguments.length?(b=J(d),a):b},a.outerRadius=function(b){return arguments.length?(d=J(b),a):d},a.startAngle=function(b){return arguments.length?(e=J(b),a):e},a.endAngle=function(b){return arguments.length?(f=J(b),a):f},a.centroid=function(){var a=(b.apply(this,arguments)+d.apply(this,arguments))/2,k=(e.apply(this,arguments)+f.apply(this,arguments))/2+Xa;return[Math.cos(k)*a,Math.sin(k)*a]},
a};var Xa=-Y,xi=ha-C;t.svg.line=function(){return Lf(X)};var sd=t.map({linear:ia,"linear-closed":function(a){return ia(a)+"Z"},step:function(a){for(var b=0,d=a.length,e=a[0],f=[e[0],",",e[1]];++b<d;)f.push("H",(e[0]+(e=a[b])[0])/2,"V",e[1]);return 1<d&&f.push("H",e[0]),f.join("")},"step-before":td,"step-after":ud,basis:Mf,"basis-open":function(a){if(4>a.length)return ia(a);for(var b,d=[],e=-1,f=a.length,k=[0],h=[0];3>++e;)b=a[e],k.push(b[0]),h.push(b[1]);d.push(la(Na,k)+","+la(Na,h));for(--e;++e<
f;)b=a[e],k.shift(),k.push(b[0]),h.shift(),h.push(b[1]),wd(d,k,h);return d.join("")},"basis-closed":function(a){for(var b,d,e=-1,f=a.length,k=f+4,h=[],l=[];4>++e;)d=a[e%f],h.push(d[0]),l.push(d[1]);b=[la(Na,h),",",la(Na,l)];for(--e;++e<k;)d=a[e%f],h.shift(),h.push(d[0]),l.shift(),l.push(d[1]),wd(b,h,l);return b.join("")},bundle:function(a,b){var d=a.length-1;if(d)for(var e,f,k=a[0][0],h=a[0][1],l=a[d][0]-k,n=a[d][1]-h,p=-1;++p<=d;)e=a[p],f=p/d,e[0]=b*e[0]+(1-b)*(k+f*l),e[1]=b*e[1]+(1-b)*(h+f*n);return Mf(a)},
cardinal:function(a,b){return 3>a.length?ia(a):a[0]+hc(a,vd(a,b))},"cardinal-open":function(a,b){return 4>a.length?ia(a):a[1]+hc(a.slice(1,a.length-1),vd(a,b))},"cardinal-closed":function(a,b){return 3>a.length?ia(a):a[0]+hc((a.push(a[0]),a),vd([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=ia(a);else{var b=a[0],d,e,f,k,h=[],l;d=0;l=a.length-1;for(var n=[],p=a[1],q=n[0]=xd(a[0],p);++d<l;)n[d]=(q+(q=xd(p,p=a[d+1])))/2;l=(n[d]=q,n);n=-1;for(p=a.length-1;++n<p;)d=xd(a[n],
a[n+1]),I(d)<C?l[n]=l[n+1]=0:(e=l[n]/d,f=l[n+1]/d,k=e*e+f*f,9<k&&(k=3*d/Math.sqrt(k),l[n]=k*e,l[n+1]=k*f));for(n=-1;++n<=p;)k=(a[Math.min(p,n+1)][0]-a[Math.max(0,n-1)][0])/(6*(1+l[n]*l[n])),h.push([k||0,l[n]*k||0]);a=b+hc(a,h)}return a}});sd.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var Nf=[0,2/3,1/3,0],Of=[0,1/3,2/3,0],Na=[0,1/6,2/3,1/6];t.svg.line.radial=function(){var a=Lf(Pf);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a};td.reverse=ud;ud.reverse=td;t.svg.area=function(){return Qf(X)};
t.svg.area.radial=function(){var a=Qf(Pf);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a};t.svg.chord=function(){function a(a,k){var h=b(this,e,a,k),l=b(this,f,a,k);return"M"+h.p0+d(h.r,h.p1,h.a1-h.a0)+(h.a0==l.a0&&h.a1==l.a1?"Q 0,0 "+h.p0:"Q 0,0 "+l.p0+d(l.r,l.p1,l.a1-l.a0)+("Q 0,0 "+h.p0))+"Z"}function b(a,d,e,g){var f=d.call(a,e,g);d=k.call(a,f,g);e=h.call(a,f,g)+Xa;
a=l.call(a,f,g)+Xa;return{r:d,a0:e,a1:a,p0:[d*Math.cos(e),d*Math.sin(e)],p1:[d*Math.cos(a),d*Math.sin(a)]}}function d(a,b,e){return"A"+a+","+a+" 0 "+ +(e>F)+",1 "+b}var e=Zc,f=$c,k=Wh,h=Jf,l=Kf;return a.radius=function(b){return arguments.length?(k=J(b),a):k},a.source=function(b){return arguments.length?(e=J(b),a):e},a.target=function(b){return arguments.length?(f=J(b),a):f},a.startAngle=function(b){return arguments.length?(h=J(b),a):h},a.endAngle=function(b){return arguments.length?(l=J(b),a):l},
a};t.svg.diagonal=function(){function a(a,f){var k=b.call(this,a,f),h=d.call(this,a,f),l=(k.y+h.y)/2,k=[k,{x:k.x,y:l},{x:h.x,y:l},h];return k=k.map(e),"M"+k[0]+"C"+k[1]+" "+k[2]+" "+k[3]}var b=Zc,d=$c,e=Rf;return a.source=function(d){return arguments.length?(b=J(d),a):b},a.target=function(b){return arguments.length?(d=J(b),a):d},a.projection=function(b){return arguments.length?(e=b,a):e},a};t.svg.diagonal.radial=function(){var a=t.svg.diagonal(),b=Rf,d=a.projection;return a.projection=function(a){return arguments.length?
d(Xh(b=a)):b},a};t.svg.symbol=function(){function a(a,e){return(jg.get(b.call(this,a,e))||Sf)(d.call(this,a,e))}var b=Zh,d=Yh;return a.type=function(d){return arguments.length?(b=J(d),a):b},a.size=function(b){return arguments.length?(d=J(b),a):d},a};var jg=t.map({circle:Sf,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*kg));var b=a*kg;return"M0,"+-a+"L"+b+",0 0,"+a+
" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/zc);var b=a*zc/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/zc);var b=a*zc/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});t.svg.symbolTypes=jg.keys();var Za,lc,zc=Math.sqrt(3),kg=Math.tan(30*E),W=[],Zf=0;W.call=O.call;W.empty=O.empty;W.node=O.node;W.size=O.size;t.transition=function(a){return arguments.length?
Za?a.transition():a:Yf.transition()};t.transition.prototype=W;W.select=function(a){var b,d,e,f=this.id,k=[];a=T(a);for(var h=-1,l=this.length;++h<l;){k.push(b=[]);for(var n=this[h],p=-1,q=n.length;++p<q;)(e=n[p])&&(d=a.call(e,e.__data__,p,h))?("__data__"in e&&(d.__data__=e.__data__),ic(d,p,f,e.__transition__[f]),b.push(d)):b.push(null)}return Bb(k,f)};W.selectAll=function(a){var b,d,e,f,k=this.id,h=[];a=Id(a);for(var l=-1,n=this.length;++l<n;)for(var p=this[l],q=-1,r=p.length;++q<r;)if(b=p[q]){f=
b.__transition__[k];d=a.call(b,b.__data__,q,l);h.push(b=[]);for(var s=-1,t=d.length;++s<t;)(e=d[s])&&ic(e,s,k,f),b.push(e)}return Bb(h,k)};W.filter=function(a){var b,d,e,f=[];"function"!=typeof a&&(a=Qd(a));for(var k=0,h=this.length;h>k;k++){f.push(b=[]);d=this[k];for(var l=0,n=d.length;n>l;l++)(e=d[l])&&a.call(e,e.__data__,l,k)&&b.push(e)}return Bb(f,this.id)};W.tween=function(a,b){var d=this.id;return 2>arguments.length?this.node().__transition__[d].tween.get(a):xa(this,null==b?function(b){b.__transition__[d].tween.remove(a)}:
function(e){e.__transition__[d].tween.set(a,b)})};W.attr=function(a,b){function d(){this.removeAttribute(l)}function e(){this.removeAttributeNS(l.space,l.local)}function f(a){return null==a?d:(a+="",function(){var b,d=this.getAttribute(l);return d!==a&&(b=h(d,a),function(a){this.setAttribute(l,b(a))})})}function k(a){return null==a?e:(a+="",function(){var b,d=this.getAttributeNS(l.space,l.local);return d!==a&&(b=h(d,a),function(a){this.setAttributeNS(l.space,l.local,b(a))})})}if(2>arguments.length){for(b in a)this.attr(b,
a[b]);return this}var h="transform"==a?mf:Wa,l=t.ns.qualify(a);return yd(this,"attr."+a,b,l.local?k:f)};W.attrTween=function(a,b){function d(a,e){var k=b.call(this,a,e,this.getAttribute(f));return k&&function(a){this.setAttribute(f,k(a))}}function e(a,d){var k=b.call(this,a,d,this.getAttributeNS(f.space,f.local));return k&&function(a){this.setAttributeNS(f.space,f.local,k(a))}}var f=t.ns.qualify(a);return this.tween("attr."+a,f.local?e:d)};W.style=function(a,b,d){function e(){this.style.removeProperty(a)}
var f=arguments.length;if(3>f){if("string"!=typeof a){2>f&&(b="");for(d in a)this.style(d,a[d],b);return this}d=""}return yd(this,"style."+a,b,function(b){return null==b?e:(b+="",function(){var e,f=ba.getComputedStyle(this,null).getPropertyValue(a);return f!==b&&(e=Wa(f,b),function(b){this.style.setProperty(a,e(b),d)})})})};W.styleTween=function(a,b,d){return 3>arguments.length&&(d=""),this.tween("style."+a,function(e,f){var k=b.call(this,e,f,ba.getComputedStyle(this,null).getPropertyValue(a));return k&&
function(b){this.style.setProperty(a,k(b),d)}})};W.text=function(a){return yd(this,"text",a,$h)};W.remove=function(){return this.each("end.transition",function(){var a;2>this.__transition__.count&&(a=this.parentNode)&&a.removeChild(this)})};W.ease=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].ease:("function"!=typeof a&&(a=t.ease.apply(t,arguments)),xa(this,function(d){d.__transition__[b].ease=a}))};W.delay=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].delay:
xa(this,"function"==typeof a?function(d,e,f){d.__transition__[b].delay=+a.call(d,d.__data__,e,f)}:(a=+a,function(d){d.__transition__[b].delay=a}))};W.duration=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].duration:xa(this,"function"==typeof a?function(d,e,f){d.__transition__[b].duration=Math.max(1,a.call(d,d.__data__,e,f))}:(a=Math.max(1,a),function(d){d.__transition__[b].duration=a}))};W.each=function(a,b){var d=this.id;if(2>arguments.length){var e=lc,f=Za;Za=
d;xa(this,function(b,e,f){lc=b.__transition__[d];a.call(b,b.__data__,e,f)});lc=e;Za=f}else xa(this,function(e){e=e.__transition__[d];(e.event||(e.event=t.dispatch("start","end"))).on(a,b)});return this};W.transition=function(){for(var a,b,d,e,f=this.id,k=++Zf,h=[],l=0,n=this.length;n>l;l++){h.push(a=[]);b=this[l];for(var p=0,q=b.length;q>p;p++)(d=b[p])&&(e=Object.create(d.__transition__[f]),e.delay+=e.duration,ic(d,p,k,e)),a.push(d)}return Bb(h,k)};t.svg.axis=function(){function a(a){a.each(function(){var a,
p=t.select(this),q=this.__chart__||d,r=this.__chart__=d.copy(),s=null==n?r.ticks?r.ticks.apply(r,l):r.domain():n,x=null==b?r.tickFormat?r.tickFormat.apply(r,l):X:b,v=p.selectAll(".tick").data(s,r),s=v.enter().insert("g",".domain").attr("class","tick").style("opacity",C),w=t.transition(v.exit()).style("opacity",C).remove(),y=t.transition(v.order()).style("opacity",1),z=dc(r),p=p.selectAll(".domain").data([0]),p=(p.enter().append("path").attr("class","domain"),t.transition(p));s.append("line");s.append("text");
var N=s.select("line"),A=y.select("line"),x=v.select("text").text(x),v=s.select("text"),L=y.select("text");switch(e){case "bottom":a=Tf;N.attr("y2",f);v.attr("y",Math.max(f,0)+h);A.attr("x2",0).attr("y2",f);L.attr("x",0).attr("y",Math.max(f,0)+h);x.attr("dy",".71em").style("text-anchor","middle");p.attr("d","M"+z[0]+","+k+"V0H"+z[1]+"V"+k);break;case "top":a=Tf;N.attr("y2",-f);v.attr("y",-(Math.max(f,0)+h));A.attr("x2",0).attr("y2",-f);L.attr("x",0).attr("y",-(Math.max(f,0)+h));x.attr("dy","0em").style("text-anchor",
"middle");p.attr("d","M"+z[0]+","+-k+"V0H"+z[1]+"V"+-k);break;case "left":a=Uf;N.attr("x2",-f);v.attr("x",-(Math.max(f,0)+h));A.attr("x2",-f).attr("y2",0);L.attr("x",-(Math.max(f,0)+h)).attr("y",0);x.attr("dy",".32em").style("text-anchor","end");p.attr("d","M"+-k+","+z[0]+"H0V"+z[1]+"H"+-k);break;case "right":a=Uf,N.attr("x2",f),v.attr("x",Math.max(f,0)+h),A.attr("x2",f).attr("y2",0),L.attr("x",Math.max(f,0)+h).attr("y",0),x.attr("dy",".32em").style("text-anchor","start"),p.attr("d","M"+k+","+z[0]+
"H0V"+z[1]+"H"+k)}if(r.rangeBand)var M=r,E=M.rangeBand()/2,q=r=function(a){return M(a)+E};else q.rangeBand?q=r:w.call(a,r);s.call(a,q);y.call(a,r)})}var b,d=t.scale.linear(),e=lg,f=6,k=6,h=3,l=[10],n=null;return a.scale=function(b){return arguments.length?(d=b,a):d},a.orient=function(b){return arguments.length?(e=b in yi?b+"":lg,a):e},a.ticks=function(){return arguments.length?(l=arguments,a):l},a.tickValues=function(b){return arguments.length?(n=b,a):n},a.tickFormat=function(d){return arguments.length?
(b=d,a):b},a.tickSize=function(b){var d=arguments.length;return d?(f=+b,k=+arguments[d-1],a):f},a.innerTickSize=function(b){return arguments.length?(f=+b,a):f},a.outerTickSize=function(b){return arguments.length?(k=+b,a):k},a.tickPadding=function(b){return arguments.length?(h=+b,a):h},a.tickSubdivide=function(){return arguments.length&&a},a};var lg="bottom",yi={top:1,right:1,bottom:1,left:1};t.svg.brush=function(){function a(k){k.each(function(){var k=t.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color",
"rgba(0,0,0,0)").on("mousedown.brush",f).on("touchstart.brush",f),h=k.selectAll(".background").data([0]);h.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");k.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var l=k.selectAll(".resize").data(v,X);l.exit().remove();l.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return zi[a]}).append("rect").attr("x",
function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");l.style("display",a.empty()?"none":null);var q,k=t.transition(k),h=t.transition(h);n&&(q=dc(n),h.attr("x",q[0]).attr("width",q[1]-q[0]),d(k));p&&(q=dc(p),h.attr("y",q[0]).attr("height",q[1]-q[0]),e(k));b(k)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+q[+/e$/.test(a)]+","+r[+/^s/.test(a)]+")"})}function d(a){a.select(".extent").attr("x",
q[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",q[1]-q[0])}function e(a){a.select(".extent").attr("y",r[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",r[1]-r[0])}function f(){function v(){var a=t.mouse(A),f=!1;N&&(a[0]+=N[0],a[1]+=N[1]);T||(t.event.altKey?(z||(z=[(q[0]+q[1])/2,(r[0]+r[1])/2]),J[0]=q[+(a[0]<z[0])],J[1]=r[+(a[1]<z[1])]):z=null);F&&w(a,n,0)&&(d(M),f=!0);I&&w(a,p,1)&&(e(M),f=!0);f&&(b(M),C({type:"brush",mode:T?"move":"resize"}))}function w(a,b,d){var e,f,g=dc(b);b=
g[0];var g=g[1],l=J[d],m=d?r:q,n=m[1]-m[0];return T&&(b-=l,g-=n+l),e=(d?x:s)?Math.max(b,Math.min(g,a[d])):a[d],T?f=(e+=l)+n:(z&&(l=Math.max(b,Math.min(g,2*z[d]-e))),e>l?(f=e,e=l):f=l),m[0]!=e||m[1]!=f?(d?h=null:k=null,m[0]=e,m[1]=f,!0):void 0}function y(){v();M.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);t.select("body").style("cursor",null);P.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",
null).on("keyup.brush",null);O();C({type:"brushend"})}var z,N,A=this,B=t.select(t.event.target),C=l.of(A,arguments),M=t.select(A),E=B.datum(),F=!/^(n|s)$/.test(E)&&n,I=!/^(e|w)$/.test(E)&&p,T=B.classed("extent"),O=Fb(),J=t.mouse(A),P=t.select(ba).on("keydown.brush",function(){32==t.event.keyCode&&(T||(z=null,J[0]-=q[1],J[1]-=r[1],T=2),L())}).on("keyup.brush",function(){32==t.event.keyCode&&2==T&&(J[0]+=q[1],J[1]+=r[1],T=0,L())});if(t.event.changedTouches?P.on("touchmove.brush",v).on("touchend.brush",
y):P.on("mousemove.brush",v).on("mouseup.brush",y),M.interrupt().selectAll("*").interrupt(),T)J[0]=q[0]-J[0],J[1]=r[0]-J[1];else if(E){var S=+/w$/.test(E),E=+/^n/.test(E);N=[q[1-S]-J[0],r[1-E]-J[1]];J[0]=q[S];J[1]=r[E]}else t.event.altKey&&(z=J.slice());M.style("pointer-events","none").selectAll(".resize").style("display",null);t.select("body").style("cursor",B.style("cursor"));C({type:"brushstart"});v()}var k,h,l=N(a,"brushstart","brush","brushend"),n=null,p=null,q=[0,0],r=[0,0],s=!0,x=!0,v=Fd[0];
return a.event=function(a){a.each(function(){var a=l.of(this,arguments),b={x:q,y:r,i:k,j:h},d=this.__chart__||b;this.__chart__=b;Za?t.select(this).transition().each("start.brush",function(){k=d.i;h=d.j;q=d.x;r=d.y;a({type:"brushstart"})}).tween("brush:brush",function(){var d=cc(q,b.x),e=cc(r,b.y);return k=h=null,function(f){q=b.x=d(f);r=b.y=e(f);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){k=b.i;h=b.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),
a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(n=b,v=Fd[!n<<1|!p],a):n},a.y=function(b){return arguments.length?(p=b,v=Fd[!n<<1|!p],a):p},a.clamp=function(b){return arguments.length?(n&&p?(s=!!b[0],x=!!b[1]):n?s=!!b:p&&(x=!!b),a):n&&p?[s,x]:n?s:p?x:null},a.extent=function(b){var d,e,f,g,l;return arguments.length?(n&&(d=b[0],e=b[1],p&&(d=d[0],e=e[0]),k=[d,e],n.invert&&(d=n(d),e=n(e)),d>e&&(l=d,d=e,e=l),(d!=q[0]||e!=q[1])&&(q=[d,e])),p&&(f=b[0],g=b[1],
n&&(f=f[1],g=g[1]),h=[f,g],p.invert&&(f=p(f),g=p(g)),f>g&&(l=f,f=g,g=l),(f!=r[0]||g!=r[1])&&(r=[f,g])),a):(n&&(k?(d=k[0],e=k[1]):(d=q[0],e=q[1],n.invert&&(d=n.invert(d),e=n.invert(e)),d>e&&(l=d,d=e,e=l))),p&&(h?(f=h[0],g=h[1]):(f=r[0],g=r[1],p.invert&&(f=p.invert(f),g=p.invert(g)),f>g&&(l=f,f=g,g=l))),n&&p?[[d,f],[e,g]]:n?[d,e]:p&&[f,g])},a.clear=function(){return a.empty()||(q=[0,0],r=[0,0],k=h=null),a},a.empty=function(){return!!n&&q[0]==q[1]||!!p&&r[0]==r[1]},t.rebind(a,l,"on")};var zi={n:"ns-resize",
e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Fd=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Gd=A.format=ag.timeFormat,mg=Gd.utc,ng=mg("%Y-%m-%dT%H:%M:%S.%LZ");Gd.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?zd:ng;zd.parse=function(a){a=new Date(a);return isNaN(a)?null:a};zd.toString=ng.toString;A.second=Ra(function(a){return new aa(1E3*Math.floor(a/1E3))},function(a,b){a.setTime(a.getTime()+1E3*
Math.floor(b))},function(a){return a.getSeconds()});A.seconds=A.second.range;A.seconds.utc=A.second.utc.range;A.minute=Ra(function(a){return new aa(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});A.minutes=A.minute.range;A.minutes.utc=A.minute.utc.range;A.hour=Ra(function(a){var b=a.getTimezoneOffset()/60;return new aa(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},function(a){return a.getHours()});
A.hours=A.hour.range;A.hours.utc=A.hour.utc.range;A.month=Ra(function(a){return a=A.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});A.months=A.month.range;A.months.utc=A.month.utc.range;var jc=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Hd=[[A.second,1],[A.second,5],[A.second,15],[A.second,30],[A.minute,1],[A.minute,5],[A.minute,15],[A.minute,30],[A.hour,1],[A.hour,3],[A.hour,6],[A.hour,12],
[A.day,1],[A.day,2],[A.week,1],[A.month,1],[A.month,3],[A.year,1]],Ai=Gd.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",fb]]),ai={range:function(a,b,d){return t.range(Math.ceil(a/d)*d,+b,d).map(Ya)},floor:X,ceil:X};
Hd.year=A.year;A.scale=function(){return Ad(t.scale.linear(),Hd,Ai)};var og=Hd.map(function(a){return[a[0].utc,a[1]]}),Bi=mg.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",fb]]);og.year=A.year.utc;
A.scale.utc=function(){return Ad(t.scale.linear(),og,Bi)};t.text=Nc(function(a){return a.responseText});t.json=function(a,b){return Ib(a,"application/json",bi,b)};t.html=function(a,b){return Ib(a,"text/html",ci,b)};t.xml=Nc(function(a){return a.responseXML});"function"==typeof define&&define.amd?define(t):"object"==typeof module&&module.exports&&(module.exports=t);this.d3=t}();this.j$=this.jStat=function(e,h){function d(b,d){var f=b>d?b:d;return e.pow(10,17-~~(e.log(0<f?f:-f)*e.LOG10E))}function f(b){return"[object Function]"===s.call(b)}function b(b){return"number"==typeof b&&b===b}function k(){return new k._init(arguments)}function l(){return 0}function p(){return 1}function n(b,d){return b===d?1:0}var q=Array.prototype.concat,r=Array.prototype.slice,s=Object.prototype.toString,w=Array.isArray||function(b){return"[object Array]"===s.call(b)};k.fn=k.prototype;k._init=
function(d){var e;if(w(d[0]))if(w(d[0][0])){f(d[1])&&(d[0]=k.map(d[0],d[1]));for(e=0;e<d[0].length;e++)this[e]=d[0][e];this.length=d[0].length}else this[0]=f(d[1])?k.map(d[0],d[1]):d[0],this.length=1;else{if(b(d[0]))this[0]=k.seq.apply(null,d);else{if(d[0]instanceof k)return k(d[0].toArray());this[0]=[]}this.length=1}return this};k._init.prototype=k.prototype;k._init.constructor=k;k.utils={calcRdx:d,isArray:w,isFunction:f,isNumber:b,toVector:function(b){return q.apply([],b)}};k.extend=function(b){var d,
e;if(1===arguments.length){for(e in b)k[e]=b[e];return this}for(d=1;d<arguments.length;d++)for(e in arguments[d])b[e]=arguments[d][e];return b};k.rows=function(b){return b.length||1};k.cols=function(b){return b[0].length||1};k.dimensions=function(b){return{rows:k.rows(b),cols:k.cols(b)}};k.row=function(b,d){return b[d]};k.col=function(b,d){for(var e=Array(b.length),f=0;f<b.length;f++)e[f]=[b[f][d]];return e};k.diag=function(b){for(var d=k.rows(b),e=Array(d),f=0;f<d;f++)e[f]=[b[f][f]];return e};k.antidiag=
function(b){for(var d=k.rows(b)-1,e=Array(d),f=0;0<=d;d--,f++)e[f]=[b[f][d]];return e};k.transpose=function(b){var d=[],e,f,k,h,l;w(b[0])||(b=[b]);f=b.length;k=b[0].length;for(l=0;l<k;l++){e=Array(f);for(h=0;h<f;h++)e[h]=b[h][l];d.push(e)}return 1===d.length?d[0]:d};k.map=function(b,d,e){var f,k,h,l;w(b[0])||(b=[b]);f=b.length;k=b[0].length;h=e?b:Array(f);for(e=0;e<f;e++)for(h[e]||(h[e]=Array(k)),l=0;l<k;l++)h[e][l]=d(b[e][l],e,l);return 1===h.length?h[0]:h};k.alter=function(b,d){return k.map(b,d,
!0)};k.create=function(b,d,e){var k=Array(b),h,l;f(d)&&(e=d,d=b);for(h=0;h<b;h++)for(k[h]=Array(d),l=0;l<d;l++)k[h][l]=e(h,l);return k};k.zeros=function(d,e){return b(e)||(e=d),k.create(d,e,l)};k.ones=function(d,e){return b(e)||(e=d),k.create(d,e,p)};k.rand=function(d,f){return b(f)||(f=d),k.create(d,f,e.random)};k.identity=function(d,e){return b(e)||(e=d),k.create(d,e,n)};k.symmetric=function(b){var d=b.length,e,f;if(b.length!==b[0].length)return!1;for(e=0;e<d;e++)for(f=0;f<d;f++)if(b[f][e]!==b[e][f])return!1;
return!0};k.clear=function(b){return k.alter(b,l)};k.seq=function(b,e,k,h){f(h)||(h=!1);var l=[],n=d(b,e);k=(e*n-b*n)/((k-1)*n);var p=b,q;for(q=0;p<=e;q++,p=(b*n+k*n*q)/n)l.push(h?h(p,q):p);return l};var v=k.prototype;return v.length=0,v.push=Array.prototype.push,v.sort=Array.prototype.sort,v.splice=Array.prototype.splice,v.slice=Array.prototype.slice,v.toArray=function(){return 1<this.length?r.call(this):r.call(this)[0]},v.map=function(b,d){return k(k.map(this,b,d))},v.alter=function(b){return k.alter(this,
b),this},function(b){for(var d=0;d<b.length;d++)(function(b){v[b]=function(d){var e=this,f;return d?(setTimeout(function(){d.call(e,v[b].call(e))}),this):(f=k[b](this),w(f)?k(f):f)}})(b[d])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(b){for(var d=0;d<b.length;d++)(function(b){v[b]=function(d,e){var f=this;return e?(setTimeout(function(){e.call(f,v[b].call(f,d))}),this):k(k[b](this,d))}})(b[d])}(["row","col"]),function(b){for(var d=0;d<b.length;d++){var e=b[d];
v[e]=new Function("return jStat(jStat."+e+".apply(null, arguments));")}}(["create","zeros","ones","rand","identity"]),k}(Math);
(function(e,h){function d(b,d){return b-d}var f=e.utils.isFunction;e.sum=function(b){for(var d=0,e=b.length;0<=--e;)d+=b[e];return d};e.sumsqrd=function(b){for(var d=0,e=b.length;0<=--e;)d+=b[e]*b[e];return d};e.sumsqerr=function(b){for(var d=e.mean(b),f=0,h=b.length,q;0<=--h;)q=b[h]-d,f+=q*q;return f};e.product=function(b){for(var d=1,e=b.length;0<=--e;)d*=b[e];return d};e.min=function(b){for(var d=b[0],e=0;++e<b.length;)b[e]<d&&(d=b[e]);return d};e.max=function(b){for(var d=b[0],e=0;++e<b.length;)b[e]>
d&&(d=b[e]);return d};e.mean=function(b){return e.sum(b)/b.length};e.meansqerr=function(b){return e.sumsqerr(b)/b.length};e.geomean=function(b){return h.pow(e.product(b),1/b.length)};e.median=function(b){var e=b.length;b=b.slice().sort(d);return e&1?b[e/2|0]:(b[e/2-1]+b[e/2])/2};e.cumsum=function(b){var d=b.length,e=Array(d),f;e[0]=b[0];for(f=1;f<d;f++)e[f]=e[f-1]+b[f];return e};e.diff=function(b){var d=[],e=b.length,f;for(f=1;f<e;f++)d.push(b[f]-b[f-1]);return d};e.mode=function(b){var e=b.length;
b=b.slice().sort(d);var f=1,h=0,q=0,r=[],s;for(s=0;s<e;s++)b[s]===b[s+1]?f++:(f>h?(r=[b[s]],h=f,q=0):f===h&&(r.push(b[s]),q++),f=1);return 0===q?r[0]:r};e.range=function(b){return e.max(b)-e.min(b)};e.variance=function(b,d){return e.sumsqerr(b)/(b.length-(d?1:0))};e.stdev=function(b,d){return h.sqrt(e.variance(b,d))};e.meandev=function(b){var d=0,f=e.mean(b),n;for(n=b.length-1;0<=n;n--)d+=h.abs(b[n]-f);return d/b.length};e.meddev=function(b){var d=0,f=e.median(b),n;for(n=b.length-1;0<=n;n--)d+=h.abs(b[n]-
f);return d/b.length};e.coeffvar=function(b){return e.stdev(b)/e.mean(b)};e.quartiles=function(b){var e=b.length;b=b.slice().sort(d);return[b[h.round(e/4)-1],b[h.round(e/2)-1],b[h.round(3*e/4)-1]]};e.quantiles=function(b,e,f,n){var q=b.slice().sort(d),r=[e.length];b=b.length;var s,w,v;"undefined"==typeof f&&(f=.375);"undefined"==typeof n&&(n=.375);for(s=0;s<e.length;s++)w=e[s],v=f+w*(1-f-n),v=b*w+v,w=h.floor(h.max(1,h.min(v,b-1))),v=h.max(0,h.min(v-w,1)),r[s]=(1-v)*q[w-1]+v*q[w];return r};e.percentileOfScore=
function(b,d,e){var f=0,h=b.length,r=!1,s;"strict"===e&&(r=!0);for(s=0;s<h;s++)e=b[s],(r&&e<d||!r&&e<=d)&&f++;return f/h};e.covariance=function(b,d){var f=e.mean(b),h=e.mean(d),q=b.length,r=Array(q),s;for(s=0;s<q;s++)r[s]=(b[s]-f)*(d[s]-h);return e.sum(r)/(q-1)};e.corrcoeff=function(b,d){return e.covariance(b,d)/e.stdev(b,1)/e.stdev(d,1)};var b=e.prototype;b.cumsum=function(d,h){var p=[],n=0,q=this;f(d)&&(h=d,d=!1);if(h)return setTimeout(function(){h.call(q,b.cumsum.call(q,d))}),this;if(1<this.length){for(q=
!0===d?this:this.transpose();n<q.length;n++)p[n]=e.cumsum(q[n]);return p}return e.cumsum(this[0],d)};(function(d){for(var h=0;h<d.length;h++)(function(d){b[d]=function(k,h){var l=[],s=0,w=this;f(k)&&(h=k,k=!1);if(h)return setTimeout(function(){h.call(w,b[d].call(w,k))}),this;if(1<this.length){for(w=!0===k?this:this.transpose();s<w.length;s++)l[s]=e[d](w[s]);return!0===k?e[d](e.utils.toVector(l)):l}return e[d](this[0],k)}})(d[h])})("sum sumsqrd sumsqerr product min max mean meansqerr geomean median diff mode range variance stdev meandev meddev coeffvar quartiles".split(" "));
(function(d){for(var h=0;h<d.length;h++)(function(d){b[d]=function(){var k=[],h=0,l=this,s=Array.prototype.slice.call(arguments);if(f(s[s.length-1])){var w=s[s.length-1],v=s.slice(0,s.length-1);return setTimeout(function(){w.call(l,b[d].apply(l,v))}),this}w=void 0;if(1<this.length){for(l=l.transpose();h<l.length;h++)k[h]=e[d].apply(l,[l[h]].concat(s));return k}return e[d].apply(l,[this[0]].concat(s))}})(d[h])})(["quantiles","percentileOfScore"])})(this.jStat,Math);
(function(e,h){e.gammaln=function(d){var e=0,b=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5.395239384953E-6],k=1.000000000190015,l,p;p=(l=d)+5.5;for(p-=(d+.5)*h.log(p);6>e;e++)k+=b[e]/++l;return h.log(2.5066282746310007*k/d)-p};e.gammafn=function(d){var e=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],b=[-30.8402300119739,315.35062697960416,
-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],k=!1,l=0,p=0,n=0,q,r,s,w;if(0>=d)if(w=d%1+3.6E-16)k=(d&1?-1:1)*h.PI/h.sin(h.PI*w),d=1-d;else return Infinity;s=d;1>d?r=d++:r=(d-=l=(d|0)-1)-1;for(q=0;8>q;++q)n=(n+e[q])*r,p=p*r+b[q];w=n/p+1;if(s<d)w/=s;else if(s>d)for(q=0;q<l;++q)w*=d,d++;return k&&(w=k/w),w};e.gammap=function(d,f){var b=e.gammaln(d),k=d,l=1/d,p=l,n=f+1-d,q=1/1E-30,r=1/n,s=r,w=1,v=-~(8.5*h.log(1<=d?d:1/d)+.4*d+17);if(0>
f||0>=d)return NaN;if(f<d+1){for(;w<=v;w++)l+=p*=f/++k;return l*h.exp(-f+d*h.log(f)-b)}for(;w<=v;w++)k=-w*(w-d),n+=2,r=k*r+n,q=n+k/q,r=1/r,s=s*r*q;return 1-s*h.exp(-f+d*h.log(f)-b)};e.factorialln=function(d){return 0>d?NaN:e.gammaln(d+1)};e.factorial=function(d){return 0>d?NaN:e.gammafn(d+1)};e.combination=function(d,f){return 170<d||170<f?h.exp(e.combinationln(d,f)):e.factorial(d)/e.factorial(f)/e.factorial(d-f)};e.combinationln=function(d,f){return e.factorialln(d)-e.factorialln(f)-e.factorialln(d-
f)};e.permutation=function(d,f){return e.factorial(d)/e.factorial(d-f)};e.betafn=function(d,f){return 0>=d||0>=f?void 0:170<d+f?h.exp(e.betaln(d,f)):e.gammafn(d)*e.gammafn(f)/e.gammafn(d+f)};e.betaln=function(d,f){return e.gammaln(d)+e.gammaln(f)-e.gammaln(d+f)};e.betacf=function(d,e,b){var k=1,l=e+b,p=e+1,n=e-1,q=1,r=1-l*d/p,s,w,v;1E-30>h.abs(r)&&(r=1E-30);for(v=r=1/r;100>=k&&!(s=2*k,w=k*(b-k)*d/((n+s)*(e+s)),r=1+w*r,1E-30>h.abs(r)&&(r=1E-30),q=1+w/q,1E-30>h.abs(q)&&(q=1E-30),r=1/r,v=v*r*q,w=-(e+
k)*(l+k)*d/((e+s)*(p+s)),r=1+w*r,1E-30>h.abs(r)&&(r=1E-30),q=1+w/q,1E-30>h.abs(q)&&(q=1E-30),r=1/r,s=r*q,v*=s,3E-7>h.abs(s-1));k++);return v};e.gammapinv=function(d,f){var b=0,k=f-1,l=e.gammaln(f),p,n,q,r,s;if(1<=d)return h.max(100,f+100*h.sqrt(f));if(0>=d)return 0;for(1<f?(r=h.log(k),s=h.exp(k*(r-1)-l),n=.5>d?d:1-d,q=h.sqrt(-2*h.log(n)),p=(2.30753+.27061*q)/(1+q*(.99229+.04481*q))-q,.5>d&&(p=-p),p=h.max(.001,f*h.pow(1-1/(9*f)-p/(3*h.sqrt(f)),3))):(q=1-f*(.253+.12*f),d<q?p=h.pow(d/q,1/f):p=1-h.log(1-
(d-q)/(1-q)));12>b;b++){if(0>=p)return 0;n=e.gammap(f,p)-d;1<f?q=s*h.exp(-(p-k)+k*(h.log(p)-r)):q=h.exp(-p+k*h.log(p)-l);q=n/q;p-=q/=1-.5*h.min(1,q*((f-1)/p-1));0>=p&&(p=.5*(p+q));if(h.abs(q)<1E-8*p)break}return p};e.erf=function(d){var e=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-9.46595344482036E-4,3.66839497852761E-4,4.2523324806907E-5,-2.0278578112534E-5,-1.624290004647E-6,1.30365583558E-6,1.5626441722E-8,-8.5238095915E-8,6.529054439E-9,5.059343495E-9,-9.91364156E-10,
-2.27365122E-10,9.6467911E-11,2.394038E-12,-6.886027E-12,8.94487E-13,3.13092E-13,-1.12708E-13,3.81E-16,7.106E-15,-1.523E-15,-9.4E-17,1.21E-16,-2.8E-17],b=e.length-1,k=!1,l=0,p=0,n,q,r,s;0>d&&(d=-d,k=!0);n=2/(2+d);for(q=4*n-2;0<b;b--)r=l,l=q*l-p+e[b],p=r;return s=n*h.exp(-d*d+.5*(e[0]+q*l)-p),k?s-1:1-s};e.erfc=function(d){return 1-e.erf(d)};e.erfcinv=function(d){var f=0,b,k,l;if(2<=d)return-100;if(0>=d)return 100;l=1>d?d:2-d;b=h.sqrt(-2*h.log(l/2));for(b=-.70711*((2.30753+.27061*b)/(1+b*(.99229+.04481*
b))-b);2>f;f++)k=e.erfc(b)-l,b+=k/(1.1283791670955126*h.exp(-b*b)-b*k);return 1>d?b:-b};e.ibetainv=function(d,f,b){var k=f-1,l=b-1,p=0,n,q,r,s,w,v,x,y,L;if(0>=d)return 0;if(1<=d)return 1;1<=f&&1<=b?(r=.5>d?d:1-d,s=h.sqrt(-2*h.log(r)),v=(2.30753+.27061*s)/(1+s*(.99229+.04481*s))-s,.5>d&&(v=-v),x=(v*v-3)/6,y=2/(1/(2*f-1)+1/(2*b-1)),L=v*h.sqrt(x+y)/y-(1/(2*b-1)-1/(2*f-1))*(x+5/6-2/(3*y)),v=f/(f+b*h.exp(2*L))):(n=h.log(f/(f+b)),q=h.log(b/(f+b)),s=h.exp(f*n)/f,w=h.exp(b*q)/b,L=s+w,d<s/L?v=h.pow(f*L*d,
1/f):v=1-h.pow(b*L*(1-d),1/b));for(n=-e.gammaln(f)-e.gammaln(b)+e.gammaln(f+b);10>p&&0!==v&&1!==v&&!(w=e.ibeta(v,f,b)-d,s=h.exp(k*h.log(v)+l*h.log(1-v)+n),w/=s,v-=s=w/(1-.5*h.min(1,w*(k/v-l/(1-v)))),0>=v&&(v=.5*(v+s)),1<=v&&(v=.5*(v+s+1)),h.abs(s)<1E-8*v&&0<p);p++);return v};e.ibeta=function(d,f,b){var k=0===d||1===d?0:h.exp(e.gammaln(f+b)-e.gammaln(f)-e.gammaln(b)+f*h.log(d)+b*h.log(1-d));return 0>d||1<d?!1:d<(f+1)/(f+b+2)?k*e.betacf(d,f,b)/f:1-k*e.betacf(1-d,b,f)/b};e.randn=function(d,f){var b,
k,l,p;f||(f=d);if(d)return e.create(d,f,function(){return e.randn()});do b=h.random(),k=1.7156*(h.random()-.5),l=b-.449871,p=h.abs(k)+.386595,l=l*l+p*(.196*p-.25472*l);while(.27597<l&&(.27846<l||k*k>-4*h.log(b)*b*b));return k/b};e.randg=function(d,f,b){var k=d,l,p,n;b||(b=f);d||(d=1);if(f)return l=e.zeros(f,b),l.alter(function(){return e.randg(d)}),l;1>d&&(d+=1);f=d-1/3;b=1/h.sqrt(9*f);do{do n=e.randn(),p=1+b*n;while(0>=p);p*=p*p;l=h.random()}while(l>1-.331*h.pow(n,4)&&h.log(l)>.5*n*n+f*(1-p+h.log(p)));
if(d==k)return f*p;do l=h.random();while(0===l);return h.pow(l,1/k)*f*p};(function(d){for(var f=0;f<d.length;f++)(function(b){e.fn[b]=function(){return e(e.map(this,function(d){return e[b](d)}))}})(d[f])})(["gammaln","gammafn","factorial","factorialln"]);(function(d){for(var f=0;f<d.length;f++)(function(b){e.fn[b]=function(){return e(e[b].apply(null,arguments))}})(d[f])})(["randn"])})(this.jStat,Math);
(function(e,h){(function(d){for(var f=0;f<d.length;f++)(function(b){e[b]=function(b,d,e){return this instanceof arguments.callee?(this._a=b,this._b=d,this._c=e,this):new arguments.callee(b,d,e)};e.fn[b]=function(d,f,h){d=e[b](d,f,h);return d.data=this,d};e[b].prototype.sample=function(d){var f=this._a,h=this._b,n=this._c;return d?e.alter(d,function(){return e[b].sample(f,h,n)}):e[b].sample(f,h,n)};(function(d){for(var f=0;f<d.length;f++)(function(d){e[b].prototype[d]=function(f){var k=this._a,h=this._b,
l=this._c;return!f&&0!==f&&(f=this.data),"number"!=typeof f?e.fn.map.call(f,function(f){return e[b][d](f,k,h,l)}):e[b][d](f,k,h,l)}})(d[f])})(["pdf","cdf","inv"]);(function(d){for(var f=0;f<d.length;f++)(function(d){e[b].prototype[d]=function(){return e[b][d](this._a,this._b,this._c)}})(d[f])})(["mean","median","mode","variance"])})(d[f])})("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy lognormal normal pareto studentt weibull uniform  binomial negbin hypgeom poisson triangular".split(" "));
e.extend(e.beta,{pdf:function(d,f,b){return 1<d||0>d?0:1==f&&1==b?1:512>f||512>b?h.pow(d,f-1)*h.pow(1-d,b-1)/e.betafn(f,b):h.exp((f-1)*h.log(d)+(b-1)*h.log(1-d)-e.betaln(f,b))},cdf:function(d,f,b){return 1<d||0>d?1*(1<d):e.ibeta(d,f,b)},inv:function(d,f,b){return e.ibetainv(d,f,b)},mean:function(d,e){return d/(d+e)},median:function(d,e){throw Error("median not yet implemented");},mode:function(d,e){return d*e/(h.pow(d+e,2)*(d+e+1))},sample:function(d,f){var b=e.randg(d);return b/(b+e.randg(f))},variance:function(d,
e){return d*e/(h.pow(d+e,2)*(d+e+1))}});e.extend(e.centralF,{pdf:function(d,f,b){return 0>d?void 0:h.sqrt(h.pow(f*d,f)*h.pow(b,b)/h.pow(f*d+b,f+b))/(d*e.betafn(f/2,b/2))},cdf:function(d,f,b){return e.ibeta(f*d/(f*d+b),f/2,b/2)},inv:function(d,f,b){return b/(f*(1/e.ibetainv(d,f/2,b/2)-1))},mean:function(d,e){return 2<e?e/(e-2):void 0},mode:function(d,e){return 2<d?e*(d-2)/(d*(e+2)):void 0},sample:function(d,f){var b=2*e.randg(d/2),k=2*e.randg(f/2);return b/d/(k/f)},variance:function(d,e){return 4>=
e?void 0:2*e*e*(d+e-2)/(d*(e-2)*(e-2)*(e-4))}});e.extend(e.cauchy,{pdf:function(d,e,b){return b/(h.pow(d-e,2)+h.pow(b,2))/h.PI},cdf:function(d,e,b){return h.atan((d-e)/b)/h.PI+.5},inv:function(d,e,b){return e+b*h.tan(h.PI*(d-.5))},median:function(d,e){return d},mode:function(d,e){return d},sample:function(d,f){return e.randn()*h.sqrt(1/(2*e.randg(.5)))*f+d}});e.extend(e.chisquare,{pdf:function(d,f){return h.exp((f/2-1)*h.log(d)-d/2-f/2*h.log(2)-e.gammaln(f/2))},cdf:function(d,f){return e.gammap(f/
2,d/2)},inv:function(d,f){return 2*e.gammapinv(d,.5*f)},mean:function(d){return d},median:function(d){return d*h.pow(1-2/(9*d),3)},mode:function(d){return 0<d-2?d-2:0},sample:function(d){return 2*e.randg(d/2)},variance:function(d){return 2*d}});e.extend(e.exponential,{pdf:function(d,e){return 0>d?0:e*h.exp(-e*d)},cdf:function(d,e){return 0>d?0:1-h.exp(-e*d)},inv:function(d,e){return-h.log(1-d)/e},mean:function(d){return 1/d},median:function(d){return 1/d*h.log(2)},mode:function(d){return 0},sample:function(d){return-1/
d*h.log(h.random())},variance:function(d){return h.pow(d,-2)}});e.extend(e.gamma,{pdf:function(d,f,b){return h.exp((f-1)*h.log(d)-d/b-e.gammaln(f)-f*h.log(b))},cdf:function(d,f,b){return e.gammap(f,d/b)},inv:function(d,f,b){return e.gammapinv(d,f)*b},mean:function(d,e){return d*e},mode:function(d,e){return 1<d?(d-1)*e:void 0},sample:function(d,f){return e.randg(d)*f},variance:function(d,e){return d*e*e}});e.extend(e.invgamma,{pdf:function(d,f,b){return h.exp(-(f+1)*h.log(d)-b/d-e.gammaln(f)+f*h.log(b))},
cdf:function(d,f,b){return 1-e.gammap(f,b/d)},inv:function(d,f,b){return b/e.gammapinv(1-d,f)},mean:function(d,e){return 1<d?e/(d-1):void 0},mode:function(d,e){return e/(d+1)},sample:function(d,f){return f/e.randg(d)},variance:function(d,e){return 2>=d?void 0:e*e/((d-1)*(d-1)*(d-2))}});e.extend(e.kumaraswamy,{pdf:function(d,e,b){return h.exp(h.log(e)+h.log(b)+(e-1)*h.log(d)+(b-1)*h.log(1-h.pow(d,e)))},cdf:function(d,e,b){return 1-h.pow(1-h.pow(d,e),b)},mean:function(d,f){return f*e.gammafn(1+1/d)*
e.gammafn(f)/e.gammafn(1+1/d+f)},median:function(d,e){return h.pow(1-h.pow(2,-1/e),1/d)},mode:function(d,e){return 1<=d&&1<=e&&1!==d&&1!==e?h.pow((d-1)/(d*e-1),1/d):void 0},variance:function(d,e){throw Error("variance not yet implemented");}});e.extend(e.lognormal,{pdf:function(d,e,b){return h.exp(-h.log(d)-.5*h.log(2*h.PI)-h.log(b)-h.pow(h.log(d)-e,2)/(2*b*b))},cdf:function(d,f,b){return.5+.5*e.erf((h.log(d)-f)/h.sqrt(2*b*b))},inv:function(d,f,b){return h.exp(-1.4142135623730951*b*e.erfcinv(2*d)+
f)},mean:function(d,e){return h.exp(d+e*e/2)},median:function(d,e){return h.exp(d)},mode:function(d,e){return h.exp(d-e*e)},sample:function(d,f){return h.exp(e.randn()*f+d)},variance:function(d,e){return(h.exp(e*e)-1)*h.exp(2*d+e*e)}});e.extend(e.normal,{pdf:function(d,e,b){return h.exp(-.5*h.log(2*h.PI)-h.log(b)-h.pow(d-e,2)/(2*b*b))},cdf:function(d,f,b){return.5*(1+e.erf((d-f)/h.sqrt(2*b*b)))},inv:function(d,f,b){return-1.4142135623730951*b*e.erfcinv(2*d)+f},mean:function(d,e){return d},median:function(d,
e){return d},mode:function(d,e){return d},sample:function(d,f){return e.randn()*f+d},variance:function(d,e){return e*e}});e.extend(e.pareto,{pdf:function(d,e,b){return d<=e?void 0:b*h.pow(e,b)/h.pow(d,b+1)},cdf:function(d,e,b){return 1-h.pow(e/d,b)},mean:function(d,e){return 1>=e?void 0:e*h.pow(d,e)/(e-1)},median:function(d,e){return d*e*h.SQRT2},mode:function(d,e){return d},variance:function(d,e){return 2>=e?void 0:d*d*e/(h.pow(e-1,2)*(e-2))}});e.extend(e.studentt,{pdf:function(d,f){return e.gammafn((f+
1)/2)/(h.sqrt(f*h.PI)*e.gammafn(f/2))*h.pow(1+d*d/f,-((f+1)/2))},cdf:function(d,f){var b=f/2;return e.ibeta((d+h.sqrt(d*d+f))/(2*h.sqrt(d*d+f)),b,b)},inv:function(d,f){var b=e.ibetainv(2*h.min(d,1-d),.5*f,.5);return b=h.sqrt(f*(1-b)/b),.5<d?b:-b},mean:function(d){return 1<d?0:void 0},median:function(d){return 0},mode:function(d){return 0},sample:function(d){return e.randn()*h.sqrt(d/(2*e.randg(d/2)))},variance:function(d){return 2<d?d/(d-2):1<d?Infinity:void 0}});e.extend(e.weibull,{pdf:function(d,
e,b){return 0>d?0:b/e*h.pow(d/e,b-1)*h.exp(-h.pow(d/e,b))},cdf:function(d,e,b){return 0>d?0:1-h.exp(-h.pow(d/e,b))},inv:function(d,e,b){return e*h.pow(-h.log(1-d),1/b)},mean:function(d,f){return d*e.gammafn(1+1/f)},median:function(d,e){return d*h.pow(h.log(2),1/e)},mode:function(d,e){return 1>=e?void 0:d*h.pow((e-1)/e,1/e)},sample:function(d,e){return d*h.pow(-h.log(h.random()),1/e)},variance:function(d,f){return d*d*e.gammafn(1+2/f)-h.pow(this.mean(d,f),2)}});e.extend(e.uniform,{pdf:function(d,e,
b){return d<e||d>b?0:1/(b-e)},cdf:function(d,e,b){return d<e?0:d<b?(d-e)/(b-e):1},mean:function(d,e){return.5*(d+e)},median:function(d,f){return e.mean(d,f)},mode:function(d,e){throw Error("mode is not yet implemented");},sample:function(d,e){return d/2+e/2+(e/2-d/2)*(2*h.random()-1)},variance:function(d,e){return h.pow(e-d,2)/12}});e.extend(e.binomial,{pdf:function(d,f,b){return 0===b||1===b?f*b===d?1:0:e.combination(f,d)*h.pow(b,d)*h.pow(1-b,f-d)},cdf:function(d,f,b){var k=[],h=0;if(0>d)return 0;
if(d<f){for(;h<=d;h++)k[h]=e.binomial.pdf(h,f,b);return e.sum(k)}return 1}});e.extend(e.negbin,{pdf:function(d,f,b){return d!==d|0?!1:0>d?0:e.combination(d+f-1,f-1)*h.pow(1-b,d)*h.pow(b,f)},cdf:function(d,f,b){var k=0,h=0;if(0>d)return 0;for(;h<=d;h++)k+=e.negbin.pdf(h,f,b);return k}});e.extend(e.hypgeom,{pdf:function(d,f,b,k){if(d!==d|0)return!1;if(0>d||d<b-(f-k)||d>k||d>b)return 0;if(2*b>f)return 2*k>f?e.hypgeom.pdf(f-b-k+d,f,f-b,f-k):e.hypgeom.pdf(k-d,f,f-b,k);if(2*k>f)return e.hypgeom.pdf(b-d,
f,b,f-k);if(b<k)return e.hypgeom.pdf(d,f,k,b);for(var l=1,p=0,n=0;n<d;n++){for(;1<l&&p<k;)l*=1-b/(f-p),p++;l*=(k-n)*(b-n)/((n+1)*(f-b-k+n+1))}for(;p<k;p++)l*=1-b/(f-p);return h.min(1,h.max(0,l))},cdf:function(d,f,b,k){if(0>d||d<b-(f-k))return 0;if(d>=k||d>=b)return 1;if(2*b>f)return 2*k>f?e.hypgeom.cdf(f-b-k+d,f,f-b,f-k):1-e.hypgeom.cdf(k-d-1,f,f-b,k);if(2*k>f)return 1-e.hypgeom.cdf(b-d-1,f,b,f-k);if(b<k)return e.hypgeom.cdf(d,f,k,b);for(var l=1,p=1,n=0,q=0;q<d;q++){for(;1<l&&n<k;){var r=1-b/(f-n),
p=p*r,l=l*r;n++}p*=(k-q)*(b-q)/((q+1)*(f-b-k+q+1));l+=p}for(;n<k;n++)l*=1-b/(f-n);return h.min(1,h.max(0,l))}});e.extend(e.poisson,{pdf:function(d,f){return h.pow(f,d)*h.exp(-f)/e.factorial(d)},cdf:function(d,f){var b=[],k=0;if(0>d)return 0;for(;k<=d;k++)b.push(e.poisson.pdf(k,f));return e.sum(b)},mean:function(d){return d},variance:function(d){return d},sample:function(d){var e=1,b=0;d=h.exp(-d);do b++,e*=h.random();while(e>d);return b-1}});e.extend(e.triangular,{pdf:function(d,e,b,k){return b<=
e||k<e||k>b?void 0:d<e||d>b?0:d<=k?2*(d-e)/((b-e)*(k-e)):2*(b-d)/((b-e)*(b-k))},cdf:function(d,e,b,k){return b<=e||k<e||k>b?void 0:d<e?0:d<=k?h.pow(d-e,2)/((b-e)*(k-e)):1-h.pow(b-d,2)/((b-e)*(b-k))},mean:function(d,e,b){return(d+e+b)/3},median:function(d,e,b){if(b<=(d+e)/2)return e-h.sqrt((e-d)*(e-b))/h.sqrt(2);if(b>(d+e)/2)return d+h.sqrt((e-d)*(b-d))/h.sqrt(2)},mode:function(d,e,b){return b},sample:function(d,e,b){var k=h.random();return k<(b-d)/(e-d)?d+h.sqrt(k*(e-d)*(b-d)):e-h.sqrt((1-k)*(e-d)*
(e-b))},variance:function(d,e,b){return(d*d+e*e+b*b-d*e-d*b-e*b)/18}})})(this.jStat,Math);
(function(e,h){var d=Array.prototype.push,f=e.utils.isArray;e.extend({add:function(b,d){return f(d)?(f(d[0])||(d=[d]),e.map(b,function(b,e,f){return b+d[e][f]})):e.map(b,function(b){return b+d})},subtract:function(b,d){return f(d)?(f(d[0])||(d=[d]),e.map(b,function(b,e,f){return b-d[e][f]||0})):e.map(b,function(b){return b-d})},divide:function(b,d){return f(d)?(f(d[0])||(d=[d]),e.multiply(b,e.inv(d))):e.map(b,function(b){return b/d})},multiply:function(b,d){var h,p,n,q,r=b.length,s=b[0].length,w=
e.zeros(r,n=f(d)?d[0].length:s),v=0;if(f(d)){for(;v<n;v++)for(h=0;h<r;h++){for(p=q=0;p<s;p++)q+=b[h][p]*d[p][v];w[h][v]=q}return 1===r&&1===v?w[0][0]:w}return e.map(b,function(b){return b*d})},dot:function(b,d){f(b[0])||(b=[b]);f(d[0])||(d=[d]);for(var h=1===b[0].length&&1!==b.length?e.transpose(b):b,p=1===d[0].length&&1!==d.length?e.transpose(d):d,n=[],q=0,r=h.length,s=h[0].length,w,v;q<r;q++){n[q]=[];for(v=w=0;v<s;v++)w+=h[q][v]*p[q][v];n[q]=w}return 1===n.length?n[0]:n},pow:function(b,d){return e.map(b,
function(b){return h.pow(b,d)})},abs:function(b){return e.map(b,function(b){return h.abs(b)})},norm:function(b,d){var e=0,p=0;isNaN(d)&&(d=2);for(f(b[0])&&(b=b[0]);p<b.length;p++)e+=h.pow(h.abs(b[p]),d);return h.pow(e,1/d)},angle:function(b,d){return h.acos(e.dot(b,d)/(e.norm(b)*e.norm(d)))},aug:function(b,e){for(var f=b.slice(),h=0;h<f.length;h++)d.apply(f[h],e[h]);return f},inv:function(b){var d=b.length,f=b[0].length,h=e.identity(d,f);b=e.gauss_jordan(b,h);for(var h=[],n=0,q;n<d;n++)for(h[n]=[],
q=f-1;q<b[0].length;q++)h[n][q-f]=b[n][q];return h},det:function(b){var d=b.length,e=2*d,f=Array(e),h=d-1,q=e-1,r=h-d+1,s=q,w=0,v=0,x;if(2===d)return b[0][0]*b[1][1]-b[0][1]*b[1][0];for(;w<e;w++)f[w]=1;for(w=0;w<d;w++){for(x=0;x<d;x++)f[0>r?r+d:r]*=b[w][x],f[s<d?s+d:s]*=b[w][x],r++,s--;r=--h-d+1;s=--q}for(w=0;w<d;w++)v+=f[w];for(;w<e;w++)v-=f[w];return v},gauss_elimination:function(b,d){var f=0,p=0,n=b.length,q=b[0].length,r=1,s=0,w=[],v;b=e.aug(b,d);for(v=b[0].length;f<n;f++){r=b[f][f];p=f;for(s=
f+1;s<q;s++)r<h.abs(b[s][f])&&(r=b[s][f],p=s);if(p!=f)for(s=0;s<v;s++)r=b[f][s],b[f][s]=b[p][s],b[p][s]=r;for(p=f+1;p<n;p++)for(r=b[p][f]/b[f][f],s=f;s<v;s++)b[p][s]-=r*b[f][s]}for(f=n-1;0<=f;f--){s=0;for(p=f+1;p<=n-1;p++)s=w[p]*b[f][p];w[f]=(b[f][v-1]-s)/b[f][f]}return w},gauss_jordan:function(b,d){for(var f=e.aug(b,d),p=f.length,n=f[0].length,q=0;q<p;q++){for(var r=q,s=q+1;s<p;s++)h.abs(f[s][q])>h.abs(f[r][q])&&(r=s);s=f[q];f[q]=f[r];f[r]=s;for(s=q+1;s<p;s++)for(c=f[s][q]/f[q][q],r=q;r<n;r++)f[s][r]-=
f[q][r]*c}for(q=p-1;0<=q;q--){c=f[q][q];for(s=0;s<q;s++)for(r=n-1;r>q-1;r--)f[s][r]-=f[q][r]*f[s][q]/c;f[q][q]/=c;for(r=p;r<n;r++)f[q][r]/=c}return f},lu:function(b,d){throw Error("lu not yet implemented");},cholesky:function(b,d){throw Error("cholesky not yet implemented");},gauss_jacobi:function(b,d,f,p){for(var n=0,q=0,r=b.length,s=[],w=[],v=[];n<r;n++)for(s[n]=[],w[n]=[],v[n]=[],q=0;q<r;q++)n>q?(s[n][q]=b[n][q],w[n][q]=v[n][q]=0):n<q?(w[n][q]=b[n][q],s[n][q]=v[n][q]=0):(v[n][q]=b[n][q],s[n][q]=
w[n][q]=0);b=e.multiply(e.multiply(e.inv(v),e.add(s,w)),-1);v=e.multiply(e.inv(v),d);d=f;f=e.add(e.multiply(b,f),v);for(n=2;h.abs(e.norm(e.subtract(f,d)))>p;)d=f,f=e.add(e.multiply(b,d),v),n++;return f},gauss_seidel:function(b,d,f,p){for(var n=0,q=b.length,r=[],s=[],w=[],v;n<q;n++)for(r[n]=[],s[n]=[],w[n]=[],v=0;v<q;v++)n>v?(r[n][v]=b[n][v],s[n][v]=w[n][v]=0):n<v?(s[n][v]=b[n][v],r[n][v]=w[n][v]=0):(w[n][v]=b[n][v],r[n][v]=s[n][v]=0);b=e.multiply(e.multiply(e.inv(e.add(w,r)),s),-1);r=e.multiply(e.inv(e.add(w,
r)),d);d=f;f=e.add(e.multiply(b,f),r);for(n=2;h.abs(e.norm(e.subtract(f,d)))>p;)d=f,f=e.add(e.multiply(b,d),r),n+=1;return f},SOR:function(b,d,f,p,n){for(var q=0,r=b.length,s=[],w=[],v=[],x;q<r;q++)for(s[q]=[],w[q]=[],v[q]=[],x=0;x<r;x++)q>x?(s[q][x]=b[q][x],w[q][x]=v[q][x]=0):q<x?(w[q][x]=b[q][x],s[q][x]=v[q][x]=0):(v[q][x]=b[q][x],s[q][x]=w[q][x]=0);b=e.multiply(e.inv(e.add(v,e.multiply(s,n))),e.subtract(e.multiply(v,1-n),e.multiply(w,n)));n=e.multiply(e.multiply(e.inv(e.add(v,e.multiply(s,n))),
d),n);d=f;f=e.add(e.multiply(b,f),n);for(q=2;h.abs(e.norm(e.subtract(f,d)))>p;)d=f,f=e.add(e.multiply(b,d),n),q++;return f},householder:function(b){for(var d=b.length,f=b[0].length,p=0,n=[],q=[],r;p<d-1;p++){q=0;for(n=p+1;n<f;n++)q+=b[n][p]*b[n][p];n=0<b[p+1][p]?-1:1;q=n*h.sqrt(q);r=h.sqrt((q*q-b[p+1][p]*q)/2);n=e.zeros(d,1);n[p+1][0]=(b[p+1][p]-q)/(2*r);for(q=p+2;q<d;q++)n[q][0]=b[q][p]/(2*r);q=e.subtract(e.identity(d,f),e.multiply(e.multiply(n,e.transpose(n)),2));b=e.multiply(q,e.multiply(b,q))}return b},
QR:function(b,d){for(var f=b.length,p=b[0].length,n=0,q=[],r=[],s=[],w;n<f-1;n++){r=0;for(q=n+1;q<p;q++)r+=b[q][n]*b[q][n];q=0<b[n+1][n]?-1:1;r=q*h.sqrt(r);w=h.sqrt((r*r-b[n+1][n]*r)/2);q=e.zeros(f,1);q[n+1][0]=(b[n+1][n]-r)/(2*w);for(r=n+2;r<f;r++)q[r][0]=b[r][n]/(2*w);r=e.subtract(e.identity(f,p),e.multiply(e.multiply(q,e.transpose(q)),2));b=e.multiply(r,b);d=e.multiply(r,d)}for(n=f-1;0<=n;n--){for(q=n+1;q<=p-1;q++);s[n]=d[n][0]/b[n][n]}return s},jacobi:function(b){for(var d=1,f=0,p=b.length,n=
e.identity(p,p),q=[],r,s,w,v,x;1===d;){f++;v=b[0][1];d=0;w=1;for(r=0;r<p;r++)for(s=0;s<p;s++)r!=s&&v<h.abs(b[r][s])&&(v=h.abs(b[r][s]),d=r,w=s);b[d][d]===b[w][w]?x=0<b[d][w]?h.PI/4:-h.PI/4:x=h.atan(2*b[d][w]/(b[d][d]-b[w][w]))/2;r=e.identity(p,p);r[d][d]=h.cos(x);r[d][w]=-h.sin(x);r[w][d]=h.sin(x);r[w][w]=h.cos(x);n=e.multiply(n,r);b=e.multiply(e.multiply(e.inv(r),b),r);d=0;for(r=1;r<p;r++)for(s=1;s<p;s++)r!=s&&.001<h.abs(b[r][s])&&(d=1)}for(r=0;r<p;r++)q.push(b[r][r]);return[n,q]},rungekutta:function(b,
d,e,f,h,q){var r,s,w;if(2===q)for(;f<=e;)r=d*b(f,h),s=d*b(f+d,h+r),h+=(r+s)/2,f+=d;if(4===q)for(;f<=e;)r=d*b(f,h),s=d*b(f+d/2,h+r/2),q=d*b(f+d/2,h+s/2),w=d*b(f+d,h+q),h+=(r+2*s+2*q+w)/6,f+=d;return h},romberg:function(b,d,e,f){for(var n=0,q=(e-d)/2,r=[],s=[],w=[],v,x,y;n<f/2;){y=b(d);x=d;for(v=0;x<=e;x+=q,v++)r[v]=x;v=r.length;for(x=1;x<v-1;x++)y+=(0!==x%2?4:2)*b(r[x]);y=q/3*(y+b(e));w[n]=y;q/=2;n++}b=w.length;for(v=1;1!==b;){for(x=0;x<b-1;x++)s[x]=(h.pow(4,v)*w[x+1]-w[x])/(h.pow(4,v)-1);b=s.length;
w=s;s=[];v++}return w},richardson:function(b,d,e,f){function n(b,d){for(var e=0,f=b.length,k;e<f;e++)b[e]===d&&(k=e);return k}for(var q=h.abs(e-b[n(b,e)+1]),r=0,s=[],w=[],v,x;f>=q;)v=n(b,e+f),x=n(b,e),s[r]=(d[v]-2*d[x]+d[2*x-v])/(f*f),f/=2,r++;d=s.length;for(b=1;1!=d;){for(e=0;e<d-1;e++)w[e]=(h.pow(4,b)*s[e+1]-s[e])/(h.pow(4,b)-1);d=w.length;s=w;w=[];b++}return s},simpson:function(b,d,e,f){f=(e-d)/f;var h=b(d),q=[],r=d,s=0;for(d=1;r<=e;r+=f,s++)q[s]=r;for(r=q.length;d<r-1;d++)h+=(0!==d%2?4:2)*b(q[d]);
return f/3*(h+b(e))},hermite:function(b,d,e,f){for(var h=b.length,q=0,r=0,s=[],w=[],v=[],x=[],y;r<h;r++){s[r]=1;for(y=0;y<h;y++)r!=y&&(s[r]*=(f-b[y])/(b[r]-b[y]));for(y=w[r]=0;y<h;y++)r!=y&&(w[r]+=1/(b[r]-b[y]));v[r]=(1-2*(f-b[r])*w[r])*s[r]*s[r];x[r]=(f-b[r])*s[r]*s[r];q+=v[r]*d[r]+x[r]*e[r]}return q},lagrange:function(b,d,e){for(var f=0,h=0,q,r,s=b.length;h<s;h++){r=d[h];for(q=0;q<s;q++)h!=q&&(r*=(e-b[q])/(b[h]-b[q]));f+=r}return f},cubic_spline:function(b,d,f){for(var h=b.length,n=0,q=[],r=[],
s=[],w=[],v=[],x=[],y=[];n<h-1;n++)v[n]=b[n+1]-b[n];s[0]=0;for(n=1;n<h-1;n++)s[n]=3/v[n]*(d[n+1]-d[n])-3/v[n-1]*(d[n]-d[n-1]);for(n=1;n<h-1;n++)q[n]=[],r[n]=[],q[n][n-1]=v[n-1],q[n][n]=2*(v[n-1]+v[n]),q[n][n+1]=v[n],r[n][0]=s[n];w=e.multiply(e.inv(q),r);for(n=0;n<h-1;n++)x[n]=(d[n+1]-d[n])/v[n]-v[n]*(w[n+1][0]+2*w[n][0])/3,y[n]=(w[n+1][0]-w[n][0])/(3*v[n]);for(n=0;n<h&&!(b[n]>f);n++);return n-=1,d[n]+(f-b[n])*x[n]+e.sq(f-b[n])*w[n]+(f-b[n])*e.sq(f-b[n])*y[n]},gauss_quadrature:function(){throw Error("gauss_quadrature not yet implemented");
},PCA:function(b){var d=b.length,f=b[0].length,h=0,n,q,r=[],s=[];n=[];for(var w=[],v=[],x=[],x=[],s=[],h=[],y=[],h=0;h<d;h++)r[h]=e.sum(b[h])/f;for(h=0;h<f;h++)for(x[h]=[],n=0;n<d;n++)x[h][n]=b[n][h]-r[n];x=e.transpose(x);for(h=0;h<d;h++)for(s[h]=[],n=0;n<d;n++)s[h][n]=e.dot([x[h]],[x[n]])/(f-1);n=e.jacobi(s);h=n[0];s=n[1];y=e.transpose(h);for(h=0;h<s.length;h++)for(n=h;n<s.length;n++)s[h]<s[n]&&(q=s[h],s[h]=s[n],s[n]=q,w=y[h],y[h]=y[n],y[n]=w);x=e.transpose(x);for(h=0;h<d;h++)for(v[h]=[],n=0;n<x.length;n++)v[h][n]=
e.dot([y[h]],[x[n]]);return[b,s,y,v]}});(function(b){for(var d=0;d<b.length;d++)(function(b){e.fn[b]=function(d,f){var h=this;return f?(setTimeout(function(){f.call(h,e.fn[b].call(h,d))},15),this):"number"==typeof e[b](this,d)?e[b](this,d):e(e[b](this,d))}})(b[d])})("add divide multiply subtract dot pow abs norm angle".split(" "))})(this.jStat,Math);
(function(e,h){var d=[].slice,f=e.utils.isNumber;e.extend({zscore:function(){var b=d.call(arguments);return f(b[1])?(b[0]-b[1])/b[2]:(b[0]-e.mean(b[1]))/e.stdev(b[1],b[2])},ztest:function(){var b=d.call(arguments);if(4===b.length){if(f(b[1])){var k=e.zscore(b[0],b[1],b[2]);return 1===b[3]?e.normal.cdf(-h.abs(k),0,1):2*e.normal.cdf(-h.abs(k),0,1)}k=b[0];return 1===b[2]?e.normal.cdf(-h.abs(k),0,1):2*e.normal.cdf(-h.abs(k),0,1)}k=e.zscore(b[0],b[1],b[3]);return 1===b[1]?e.normal.cdf(-h.abs(k),0,1):2*
e.normal.cdf(-h.abs(k),0,1)}});e.extend(e.fn,{zscore:function(b,d){return(b-this.mean())/this.stdev(d)},ztest:function(b,d,f){b=h.abs(this.zscore(b,f));return 1===d?e.normal.cdf(-b,0,1):2*e.normal.cdf(-b,0,1)}});e.extend({tscore:function(){var b=d.call(arguments);return 4===b.length?(b[0]-b[1])/(b[2]/h.sqrt(b[3])):(b[0]-e.mean(b[1]))/(e.stdev(b[1],!0)/h.sqrt(b[1].length))},ttest:function(){var b=d.call(arguments),k;return 5===b.length?(k=h.abs(e.tscore(b[0],b[1],b[2],b[3])),1===b[4]?e.studentt.cdf(-k,
b[3]-1):2*e.studentt.cdf(-k,b[3]-1)):f(b[1])?(k=h.abs(b[0]),1==b[2]?e.studentt.cdf(-k,b[1]-1):2*e.studentt.cdf(-k,b[1]-1)):(k=h.abs(e.tscore(b[0],b[1])),1==b[2]?e.studentt.cdf(-k,b[1].length-1):2*e.studentt.cdf(-k,b[1].length-1))}});e.extend(e.fn,{tscore:function(b){return(b-this.mean())/(this.stdev(!0)/h.sqrt(this.cols()))},ttest:function(b,d){return 1===d?1-e.studentt.cdf(h.abs(this.tscore(b)),this.cols()-1):2*e.studentt.cdf(-h.abs(this.tscore(b)),this.cols()-1)}});e.extend({anovafscore:function(){var b=
d.call(arguments),f,l,p,n,q,r;if(1===b.length){f=Array(b[0].length);for(q=0;q<b[0].length;q++)f[q]=b[0][q];b=f}if(2===b.length)return e.variance(b[0])/e.variance(b[1]);l=[];for(q=0;q<b.length;q++)l=l.concat(b[q]);p=e.mean(l);for(q=f=0;q<b.length;q++)f+=b[q].length*h.pow(e.mean(b[q])-p,2);f/=b.length-1;for(q=n=0;q<b.length;q++)for(p=e.mean(b[q]),r=0;r<b[q].length;r++)n+=h.pow(b[q][r]-p,2);return n/=l.length-b.length,f/n},anovaftest:function(){var b=d.call(arguments),h,l,p,n;if(f(b[0]))return 1-e.centralF.cdf(b[0],
b[1],b[2]);anovafscore=e.anovafscore(b);h=b.length-1;for(n=p=0;n<b.length;n++)p+=b[n].length;return l=p-h-1,1-e.centralF.cdf(anovafscore,h,l)},ftest:function(b,d,f){return 1-e.centralF.cdf(b,d,f)}});e.extend(e.fn,{anovafscore:function(){return e.anovafscore(this.toArray())},anovaftes:function(){var b=0,d;for(d=0;d<this.length;d++)b+=this[d].length;return e.ftest(this.anovafscore(),this.length-1,b-this.length)}});e.extend({normalci:function(){var b=d.call(arguments),f=Array(2),l;return 4===b.length?
l=h.abs(e.normal.inv(b[1]/2,0,1)*b[2]/h.sqrt(b[3])):l=h.abs(e.normal.inv(b[1]/2,0,1)*e.stdev(b[2])/h.sqrt(b[2].length)),f[0]=b[0]-l,f[1]=b[0]+l,f},tci:function(){var b=d.call(arguments),f=Array(2),l;return 4===b.length?l=h.abs(e.studentt.inv(b[1]/2,b[3]-1)*b[2]/h.sqrt(b[3])):l=h.abs(e.studentt.inv(b[1]/2,b[2].length-1)*e.stdev(b[2],!0)/h.sqrt(b[2].length)),f[0]=b[0]-l,f[1]=b[0]+l,f},significant:function(b,d){return b<d}});e.extend(e.fn,{normalci:function(b,d){return e.normalci(b,d,this.toArray())},
tci:function(b,d){return e.tci(b,d,this.toArray())}})})(this.jStat,Math);svgNamespaceUri="http://www.w3.org/2000/svg";xlinkUri="http://www.w3.org/1999/xlink";hasOwnProperty=function(e,h){var d=e.__proto__||e.constructor.prototype;return h in e&&(!(h in d)||d[h]!==e[h])};isObjInArray=function(e,h){var d=!1;0<=e.indexOf(h)&&(d=!0);return d};getKeys=function(e){var h=[],d;for(d in e)h.push(d);return h};eliminateDuplicates=function(e){var h,d=e.length,f=[],b={};for(h=0;h<d;h++)b[e[h]]=0;for(h in b)f.push(h);return f};
keepReplicates=function(e,h,d){for(var f={},b=0;b<e.length;b++){var k=e[b];k in f||(f[k]=0);f[k]++}h=null==h?2:h;e=[];for(k in f)null!=d&&d?f[k]<h&&e.push(k):f[k]>=h&&e.push(k);return e};beginsWith=function(e,h){return 0===e.indexOf(h)};endsWith=function(e,h){return-1!==e.indexOf(h,e.length-h.length)};lengthOfLongestString=function(e){var h=[],d;for(d in e)h.push(e[d].length);return Math.max.apply(null,h)};isNumerical=function(e){return null==e||""===e||isNaN(e)?!1:!0};
getListBoxSelectedValues=function(e){for(var h=[],d=0;d<e.length;d++){var f=e[d];f.selected&&h.push(f.value)}return h};compareAsNumeric=function(e,h){var d=parseFloat(e),f=parseFloat(h);if(isNumerical(d)&&isNumerical(f)){if(d<f)return-1;if(d>f)return 1}else if(d==d||f==f){if(d!=d)return-1;if(f!=f)return 1}return 0};compareAsString=function(e,h){var d=new String(e),f=new String(h);return"null"==d&&"null"!=f?-1:"null"!=d&&"null"==f?1:d.localeCompare(f)};
compareAsDate=function(e,h){var d=e,f=h;null==d?d="1000":""==d&&(d="1001");null==f?f="1000":""==f&&(f="1001");return new Date(d)-new Date(f)};
centeredRgbaColorMapper=function(e,h,d,f){var b=null,k=null==h?0:h,l=null==d?-1.96:d,p=null==f?1.96:f;return b=function(b){var d=1,f=169,h=169,w=169;b=parseFloat(b);null!=b&&b==b&&(b>k?(f=255,w=h=0,b>p?d=1:(d=(b-k)/(p-k),d=Math.abs(d),e&&(d=Math.log(d)))):b<k?(h=f=0,w=255,b<l?d=1:(d=(b-k)/(l-k),d=Math.abs(d),e&&(d=Math.log(d)))):(w=h=f=255,d=1));return"rgba("+f+","+h+","+w+","+d+")"}};
setupQuantileColorMapper=function(e,h){var d=h;null==d&&(d="rgb(255,255,217) rgb(237,248,177) rgb(199,233,180) rgb(127,205,187) rgb(65,182,196) rgb(29,145,192) rgb(34,94,168) rgb(37,52,148) rgb(8,29,88)".split(" "));var f=d.length;return d3.scale.quantile().domain([0,f-1,d3.max(e,function(b){return parseFloat(b)})]).range(d)};getXmlDom_url=function(e){xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");xmlhttp.open("GET",e,!1);xmlhttp.send();return xmlDoc=xmlhttp.responseXML};
getXmlDom_string=function(e){window.DOMParser?(parser=new DOMParser,xmlDoc=parser.parseFromString(e,"text/xml")):(xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),xmlDoc.async=!1,xmlDoc.loadXML(e));return xmlDoc};
getDateTime=function(){var e=new Date,h=e.getFullYear(),d=e.getMonth()+1,f=e.getDate(),b=e.getHours(),k=e.getMinutes(),e=e.getSeconds();1==d.toString().length&&(d="0"+d);1==f.toString().length&&(f="0"+f);1==b.toString().length&&(b="0"+b);1==k.toString().length&&(k="0"+k);1==e.toString().length&&(e="0"+e);return h+"/"+d+"/"+f+" "+b+":"+k+":"+e};
todaysDate=function(){var e=new Date,h=e.getDate();e.getDay();var d=e.getMonth()+1,e=e.getYear();return[,"January","February","March","April","May","June","July","August","September","October","November","December"][d]+" "+h+", "+(1E3>e?e+1900:e)};removeChildElems=function(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e};createDivElement=function(e,h){var d=document.createElement("div");null!=e&&(d.id=e);null!=h&&(d.className=h);return d};
swapContainingDivs=function(e,h){var d=h.parentNode;document.getElementById(e.parentNode.id).appendChild(h);document.getElementById(d.id).appendChild(e)};simpleAsyncGet=function(e,h){var d=new XMLHttpRequest;d.onreadystatechange=function(){this.readyState===(this.DONE||4)&&h(d.responseText)};d.open("GET",e,!0);d.setRequestHeader("X-Requested-With","XMLHttpRequest");d.send(null)};
getResponse=function(e){var h=null,d=null,d=new XMLHttpRequest;d.open("GET",e,!1);d.onload=function(){h=d.status;200!=h&&console.log("xhr status: "+h+" for "+e)};d.send(null);var f=null;200==h&&(f=d.responseText);return f};loadNewSettings=function(e){e=window.location.pathname+"?query="+JSON.stringify(e);window.open(e,"_self")};getQueryObj=function(){var e={};location.search.slice(1).split("&").forEach(function(h){h=h.split("=");e[h[0]]=decodeURIComponent(h[1])||""});return e};
getQueryStringParameterByName=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");e=(new RegExp("[\\?&]"+e+"=([^&#]*)")).exec(location.search);return null==e?"":decodeURIComponent(e[1].replace(/\+/g," "))};parseJson=function(e){return JSON.parse(e)};serializeJson=function(e,h){return h?JSON.stringify(e,null,"\t"):JSON.stringify(e)};prettyJson=function(e){return serializeJson(e,!0)};
bottomRoundedRectSvgPath=function(e,h,d,f,b){e=""+("M"+e+","+h)+("h"+d);e+="v"+(f-b);e+="a"+b+","+b+" 0 0 1 "+-1*b+","+b;e+="h"+-1*(d-2*b);e+="a"+b+","+b+" 0 0 1 "+-1*b+","+-1*b;e+="v"+-1*(f-b);return e+="z"};allRoundedRectSvgPath=function(e,h,d,f,b){e=""+("M"+e+","+(h+b))+("a"+b+","+b+" 0 0 1 "+b+","+-1*b);e+="h"+(d-2*b);e+="a"+b+","+b+" 0 0 1 "+b+","+b;e+="v"+(f-2*b);e+="a"+b+","+b+" 0 0 1 "+-1*b+","+b;e+="h"+-1*(d-2*b);e+="a"+b+","+b+" 0 0 1 "+-1*b+","+-1*b;e+="v"+-1*(f-2*b);return e+="z"};
allAngledRectSvgPath=function(e,h,d,f){var b=d>f?d/8:f/8;e=""+("M"+(e+b)+","+h)+("h"+(d-2*b));e+="l"+b+","+b;e+="v"+(f-2*b);e+="l"+-1*b+","+b;e+="h"+-1*(d-2*b);e+="l"+-1*b+","+-1*b;e+="v"+-1*(f-2*b);return e+="z"};
createSvgRingElement=function(e,h,d,f){function b(b,d,e,f){f=(f-90)*Math.PI/180;return{x:b+e*Math.cos(f),y:d+e*Math.sin(f)}}e=function(d,e,f,h,k){var s=b(d,e,f,k);d=b(d,e,f,h);return["M",s.x,s.y,"A",f,f,0,180>=k-h?"0":"1",0,d.x,d.y].join(" ")}(e,h,d,0,359.9);h=document.createElementNS(svgNamespaceUri,"path");h.setAttributeNS(null,"d",e);if(null!=f)for(var k in f)h.setAttributeNS(null,k,f[k]);return h};
createSvgCircleElement=function(e,h,d,f){var b=document.createElementNS(svgNamespaceUri,"circle");b.setAttributeNS(null,"cx",e);b.setAttributeNS(null,"cy",h);b.setAttributeNS(null,"r",d);if(null!=f)for(var k in f)b.setAttributeNS(null,k,f[k]);return b};
createSvgRectElement=function(e,h,d,f,b,k,l){var p=document.createElementNS(svgNamespaceUri,"rect");p.setAttributeNS(null,"x",e);p.setAttributeNS(null,"y",h);p.setAttributeNS(null,"rx",d);p.setAttributeNS(null,"ry",f);p.setAttributeNS(null,"width",b);p.setAttributeNS(null,"height",k);if(null!=l)for(var n in l)p.setAttributeNS(null,n,l[n]);return p};
createSvgImageElement=function(e,h,d,f,b,k){var l=document.createElementNS(svgNamespaceUri,"image");l.setAttributeNS(xlinkUri,"href",e);l.setAttributeNS(null,"x",h);l.setAttributeNS(null,"y",d);l.setAttributeNS(null,"width",f);l.setAttributeNS(null,"height",b);if(null!=k)for(var p in k)l.setAttributeNS(null,p,k[p]);return l};setCookie=function(e,h,d){if(d){var f=new Date;f.setTime(f.getTime()+864E5*d);d="; expires="+f.toGMTString()}else d="";document.cookie=e+"="+h+d+"; path=/"};
getCookie=function(e){e+="=";for(var h=document.cookie.split(";"),d=0;d<h.length;d++){for(var f=h[d];" "==f.charAt(0);)f=f.substring(1,f.length);if(0==f.indexOf(e))return f.substring(e.length,f.length)}return null};deleteCookie=function(e){setCookie(e,"",-1)};var eventHierarchyUrl="observation_deck/data/eventHierarchy.xml";function getEventElems(e,h){var d=[];e.find("event").each(function(e,b){var k=b.getAttribute("type");void 0===h||null===h?d.push(b):k===h&&d.push(b)});return d}
function getEventParentChildren(e,h){var d={parent:null,children:[]},f=getEventElems(e,h);$(f).each(function(b,e){if("event"!==e.tagName)return"continue";d.parent=e.parentNode.getAttribute("type");$(e.children).each(function(b,e){"event"===e.tagName&&d.children.push(e.getAttribute("type"))})});return d}
function tracebackToRoot(e,h){for(var d=[],f=getEventElems(e,h),b=0;b<f.length;b++){var k=f[b],l=[];d.push(l);k=k.getAttribute("type");for(k=getEventParentChildren(e,k).parent;void 0!==k&&null!==k;)l.push(k),k=getEventParentChildren(e,k).parent}return d}
function OD_eventMetadataAlbum(){this.album={};this.addEvent=function(e,h){var d=new OD_event(e);this.album[e.id]=d;d.data.setData(h,"numeric"==e.allowedValues||"expression"==e.allowedValues);return this};this.getEventIdsByType=function(){for(var e={},h=getKeys(this.album),d=0;d<h.length;d++){var f=h[d],b=this.getEvent(f).metadata.datatype;hasOwnProperty(e,b)||(e[b]=[]);e[b].push(f)}return e};this.getEventData=function(e){for(var h={},d=getKeys(this.album),f=0;f<d.length;f++){var b=d[f],k=this.getEvent(b).data.getData(e);
h[b]=k}return h};this.getAllDataAsList=function(){for(var e=[],h=this.getEventData(),d=getKeys(h),f=0;f<d.length;f++){for(var b=d[f],k=h[b].slice(),l=0;l<k.length;l++)k[l].eventId=b;e=e.concat(k)}return e};this.getAllSampleIds=function(){for(var e=[],h=getKeys(this.album),d=0;d<h.length;d++)var f=this.getEvent(h[d]).data.getAllSampleIds(),e=e.concat(f);return eliminateDuplicates(e)};this.selectSamples=function(e){var h=this.getAllSampleIds();if(0==e.length)return h;for(var d in e)var f=e[d].value,
h=this.getEvent(e[d].eventId).data.selectIds(f,h);return h};this.getEvent=function(e){return this.album[e]};this.getAllChildren=function(e,h){for(var d="undefined"===typeof h?[]:h,f=[],b=0;b<e.length;b++)var k=this.getEvent(e[b]).metadata,f=f.concat(getKeys(k.children));if(0==f.length)return d;d=d.concat(f);return this.getAllChildren(f,d)};this.multisortSamples=function(e){var h=this.getAllSampleIds();if(null==e)return h;var d=e.getSteps().slice();d.reverse();var f=this;h.sort(function(b,e){for(var h=
0,p=0;p<d.length;p++){var n=d[p].name,q=d[p].reverse,r=f.getEvent(n);if(void 0==r||null==r)console.log("no event found for sorting: "+n);else{var h=r.metadata.allowedValues,n=r.data.getData([b,e]),r=n[0].val,n=n[1].val,s=null,s="numeric"==h?compareAsNumeric:"categoric"==h?compareAsString:"expression"==h?compareAsNumeric:"date"==h?compareAsDate:compareAsString,h=s(r,n);q&&(h*=-1);if(0!=h)break}}return h});return h};this.scaledExpressionRescaling=function(){};this.zScoreExpressionRescaling=function(){console.log("zScoreExpressionRescaling");
var e=this.getEventIdsByType();if(!hasOwnProperty(e,"expression data"))return console.log("no expression"),null;for(var e=e["expression data"],h={},d={stats:h},f=[],b=0;b<e.length;b++){var k=e[b],l=this.getEvent(k).data.getStats();h[k]={};h[k]=l;for(var l=this.getEvent(k).data.getData(),p=0;p<l.length;p++){var n=l[p],q=n.val;n.val_orig=q;isNumerical(q)&&(n.val=(q-h[k].mean)/h[k].sd,f.push(n.val))}}d.maxVal=jStat.max(f);d.minVal=jStat.min(f);return d};this.betweenMeansExpressionRescaling=function(e,
h,d){console.log("betweenMeansExpressionRescaling",e,h,d);h=this.getEvent(e).data.selectIds(h);var f=null;null==d?(f=this.getEvent(e).data.selectIds(d),f=f.concat(h),f=eliminateDuplicates(f)):f=this.getEvent(e).data.selectIds(d);e=this.getEventIdsByType();if(!hasOwnProperty(e,"expression data"))return console.log("no expression"),null;e=e["expression data"];d={};for(var b={meanVals:d},k=[],l=0;l<e.length;l++){var p=e[l];d[p]={};d[p].group1=this.getEvent(p).data.getStats(h).mean;d[p].group2=this.getEvent(p).data.getStats(f).mean;
for(var n=(d[p].group2-d[p].group1)/2,p=this.getEvent(p).data.getData(),q=0;q<p.length;q++){var r=p[q],s=r.val;r.val_orig=s;isNumerical(s)&&(r.val=s-n,k.push(r.val))}}b.maxVal=jStat.max(k);b.minVal=jStat.min(k);return b};this.yuliaExpressionRescaling=function(e,h){console.log("yuliaExpressionRescaling",e,h);var d=this.getEvent(e).data.selectIds(h),f=this.getEventIdsByType();if(!hasOwnProperty(f,"expression data"))return console.log("no expression"),null;for(var f=f["expression data"],b={},k={meanVals:b},
l=[],p=0;p<f.length;p++){var n=f[p];b[n]=this.getEvent(n).data.getStats(d).mean;for(var q=this.getEvent(n).data.getData(),r=0;r<q.length;r++){var s=q[r],w=s.val;s.val_orig=w;isNumerical(w)&&(s.val=w-b[n],l.push(s.val))}}k.maxVal=jStat.max(l);k.minVal=jStat.min(l);return k};this.eventwiseMedianRescaling=function(){console.log("eventwiseMedianRescaling");var e=this.getEventIdsByType();if(!hasOwnProperty(e,"expression data"))return console.log("no expression"),null;for(var e=e["expression data"],h={},
d={stats:h},f=[],b=0;b<e.length;b++){var k=e[b],l=this.getEvent(k).data.getStats();h[k]={};h[k]=l;for(var l=this.getEvent(k).data.getData(),p=0;p<l.length;p++){var n=l[p],q=n.val;n.val_orig=q;isNumerical(q)&&(n.val=q-h[k].median,f.push(n.val))}}d.maxVal=jStat.max(f);d.minVal=jStat.min(f);return d};this.samplewiseMedianRescaling=function(){};this.bivariateNormalization=function(){};this.fillInMissingSamples=function(e){for(var h=this.getAllSampleIds(),d=this.getEventIdsByType(),f=0;f<getKeys(d).length;f++)for(var b=
getKeys(d)[f],k=0;k<d[b].length;k++){var l=d[b][k],p=this.getEvent(l).data.getAllSampleIds();if(0!=h.length-p.length){for(var p=keepReplicates(h.concat(p),2,!0),n={},q=0;q<p.length;q++)n[p[q]]=e;this.getEvent(l).data.setData(n)}}}}function OD_event(e){this.metadata=new OD_eventMetadata(e);this.data=new OD_eventDataCollection}
function OD_eventMetadata(e){this.id=e.id;this.name=e.name;this.displayName=e.displayName;this.description=e.description;this.datatype=e.datatype;this.allowedValues=e.allowedValues;this.parents={};this.children={};this.addParent=function(e){this.parents[e]=e;return this};this.addChild=function(e){this.children[e]=e;return this};this.computeCompositeScore=function(e){return null}}
function OD_eventDataCollection(){function e(e,d){this.id=e;this.val=d}this.dataCollection=[];this.getValueCounts=function(e){var d={};e=this.getData(e);for(var f=0;f<e.length;f++){var b=e[f].val;hasOwnProperty(d,b)||(d[b]=0);d[b]+=1}return d};this.getValues=function(e){var d=this.getValueCounts(),d=getKeys(d);null!=e&&1==e&&(d=eliminateDuplicates(d));return d};this.setData=function(h,d){for(var f in h){var b=h[f];"NaN"!=b&&"null"!=b&&""!=b&&"N/A"!=b&&(null!=d&&1==d&&(b=parseFloat(b)),this.dataCollection.push(new e(f,
b)))}return this};this.getData=function(h){var d=this.getAllSampleIds(!0);null==h&&(h=getKeys(d));for(var f=[],b=0;b<h.length;b++){var k=h[b];k in d?f.push(this.dataCollection[d[k]]):f.push(new e(k,null))}return f};this.getAllSampleIds=function(e){for(var d={},f=0;f<this.dataCollection.length;f++)d[this.dataCollection[f].id]=f;return e?d:getKeys(d)};this.sortSamples=function(e,d){var f=this.getData(e),b=compareSamplesAsStrings;d=null==d?"categoric":d.toLowerCase();"numeric"==d||"expression"==d?b=
compareSamplesAsNumeric:"date"==d&&(b=compareSamplesAsDate);f.sort(b);for(var b=[],k=0;k<f.length;k++)b.push(f[k].id);return b};this.selectIds=function(e,d){for(var f=[],b=null==d?this.getData():this.getData(d),k=0;k<b.length;k++){var l=b[k];l.val==e&&f.push(l.id)}return f};this.getStats=function(e){var d={min:0,max:0,mean:0,median:0,sd:0,meddev:0,meandev:0},f=this.getAllSampleIds(!0);null==e&&(e=getKeys(f));for(var b=[],k=0;k<e.length;k++){var l=e[k];l in f&&(l=this.dataCollection[f[l]].val,isNumerical(l)&&
b.push(l))}d.mean=jStat.mean(b);d.sd=jStat.stdev(b);d.median=jStat.median(b);d.meddev=jStat.meddev(b);d.meandev=jStat.meandev(b);d.min=jStat.min(b);d.max=jStat.max(b);return d}}
function sortingSteps(e){this.steps=[];null!=e&&(this.steps=e);this.getSteps=function(){return this.steps};this.getIndex=function(e){for(var d=0;d<this.steps.length;d++)if(this.steps[d].name==e)return d;return-1};this.addStep=function(e){var d=this.getIndex(e);0<=d?(e=this.steps.splice(d,1)[0],e.reverse=!e.reverse,this.steps.push(e)):this.steps.push({name:e,reverse:!1})};this.removeStep=function(e){e=this.getIndex(e);0<=e&&this.steps.splice(e,1)};this.clearSteps=function(){this.steps.splice(0,this.steps.length)}}
function sampleSelectionCriteria(){this.criteria=[];this.getCriteria=function(){return this.criteria};this.addCriteria=function(e,h){var d={eventId:e,value:h},f;for(f in this.criteria)if(JSON.stringify(this.criteria[f])==JSON.stringify(d))return;this.criteria.push(d)};this.removeCriteria=function(e,h){for(var d=0;d<this.criteria.length;d++)if(this.criteria[d].eventId==e&&this.criteria[d].value==h){this.criteria.splice(d,1);break}};this.clearCriteria=function(){this.criteria.splice(0,this.criteria.length)}}
;function transposeClinicalData(e,h){for(var d={},f=0;f<e.length;f++){var b=e[f],k=b[h],l;for(l in b)l in d||(d[l]={}),d[l][k]=b[l]}return d}
function getClinicalData(e,h){for(var d=getResponse(e).split("\n"),f=[],b=[],k=[],l=0;l<d.length;l++){var p=d[l];beginsWith(p,"#")?b.push(p):beginsWith(p,"STRING")?k=p.split("\t"):f.push(p)}d=d3.tsv.parse(f.join("\n"));f=transposeClinicalData(d,"SAMPLE_ID");delete f.SAMPLE_ID;b=getKeys(f);for(l=0;l<b.length;l++){var p=b[l],n=f[p],q=k[l+1],r="categoric";"number"==q.toLowerCase()?r="numeric":"date"==q.toLowerCase()&&(r="date");h.addEvent({id:p,name:null,displayName:null,description:null,datatype:"clinical data",
allowedValues:r},n)}return d}function getClinicalData_old(e,h){var d=getResponse(e),d=d3.tsv.parse(d),d=transposeClinicalData(d,"CASE_ID"),f;for(f in d){var b=d[f],k=f,l=endsWith(k.toLowerCase(),"_score")?"numeric":"categoric";h.addEvent({id:k,name:null,displayName:null,description:null,datatype:"clinical data",allowedValues:l},b)}}
function getMutationData(e,h){for(var d=getResponse(e),f=d3.tsv.parse(d),d={},b=0;b<f.length;b++){var k=f[b],l=k.Hugo_Symbol,k=k.Tumor_Sample_Barcode,k=k.replace(/_/g,"-"),k=k.replace(/[A-Z]$/,"");hasOwnProperty(d,l)||(d[l]={},d[l].metadata={id:l+"_mut",name:null,displayName:null,description:null,datatype:"mutation data",allowedValues:"categoric"},d[l].data={});d[l].data[k]=!0}f=getKeys(d);for(b=0;b<f.length;b++)l=d[f[b]],h.addEvent(l.metadata,l.data);return d}
function getMutationData_old(e){var h=getResponse(e).split("\n"),d=[],f=[];for(e=0;e<h.length;e++){var b=h[e];beginsWith(b,"#")?f.push(b):d.push(b)}h=d3.tsv.parse(d.join("\n"));for(e=0;e<h.length;e++)d=h[e],f=d.COMMON,delete d.GENE_ID,delete d.COMMON,OD_eventAlbum.addEvent({id:f+"_mutation",name:null,displayName:null,description:null,datatype:"mutation",allowedValues:"numeric"},d);return h}
function getExpressionData(e,h){var d=getResponse(e),d=d3.tsv.parse(d),f;for(f in d){var b=d[f],k=b[""];delete b[""];h.addEvent({id:k+"_mRNA",name:null,displayName:null,description:null,datatype:"expression data",allowedValues:"expression"},b)}}
mongoClinicalData=function(e,h){for(var d=0;d<e.length;d++){var f=e[d],b=null;if(hasOwnProperty(f,"sample"))b=f.sample;else if(hasOwnProperty(f,"Sample"))b=f.Sample;else{console.log("no sample ID found in clinical doc: "+prettyJson(f));continue}b=b.trim();if("Patient ID"!=b)for(var k=getKeys(f),l=0;l<k.length;l++){var p=k[l];if(!isObjInArray(["_id","sample","Sample"],p)){var n=h.getEvent(p);null==n&&(h.addEvent({id:p,name:null,displayName:null,description:null,datatype:"clinical data",allowedValues:"categoric"},
[]),n=h.getEvent(p));var q={};q[b]=f[p];n.data.setData(q)}}}return null};
mongoExpressionData=function(e,h){for(var d=0;d<e.length;d++){var f=e[d],b=null;if(hasOwnProperty(f,"gene"))b=f.gene;else if(hasOwnProperty(f,"id"))b=f.id;else{console.log("no gene identifier found in expression doc: "+prettyJson(f));continue}for(var b=b.trim(),b=b+"_mRNA",k=getKeys(f),l=0;l<k.length;l++){var p=k[l];if(!isObjInArray(["_id","gene","id"],p)){var n=h.getEvent(b);null==n&&(h.addEvent({id:b,name:null,displayName:null,description:null,datatype:"expression data",allowedValues:"numeric"},
[]),n=h.getEvent(b));var q={};q[p]=parseFloat(f[p]);n.data.setData(q)}}}return null};buildObservationDeck=function(e,h){h=getConfiguration(h);h.containerDivId=e.id;drawMatrix(e,h);setupContextMenus(h)};
getConfiguration=function(e){var h=parseJson(getCookie("od_config"))||{};e.querySettings=h;h=null;"eventAlbum"in e?h=e.eventAlbum:(h=new OD_eventMetadataAlbum,e.eventAlbum=h);"clinicalUrl"in e&&getClinicalData(e.clinicalUrl,h);"expressionUrl"in e&&getExpressionData(e.expressionUrl,h);"mutationUrl"in e&&getMutationData(e.mutationUrl,h);if("mongoData"in e){var d=e.mongoData;"clinical"in d&&mongoClinicalData(d.clinical,h);"expression"in d&&mongoExpressionData(d.expression,h)}var h=e.eventAlbum.getEventIdsByType(),
f;for(f in h);return e};setupContextMenus=function(e){for(var h=[".colLabel",".rowLabel",".mrna_exp",".categoric"],d=0;d<h.length;d++)$.contextMenu("destroy",h[d]);setupColLabelContextMenu(e);setupRowLabelContextMenu(e);setupCategoricCellContextMenu(e);setupExpressionCellContextMenu(e)};resetConfig=function(e){deleteCookie("od_config");for(var h=getKeys(e),d=0;d<h.length;d++){var f=h[d];isObjInArray(["mongoData","containerDivId"],f)||delete e[f]}};
setupColLabelContextMenu=function(e){$.contextMenu({selector:".colLabel",callback:function(e,d){var f=this[0].__data__,b=0<=this[0].getAttribute("class").indexOf("axis")?!0:!1;b&&(b=0<=this[0].getAttribute("class").indexOf("rowLabel")?"row":"column");console.log(e,f,b)},items:{reset:{name:"reset",icon:null,disabled:!1,callback:function(h,d){resetConfig(e);var f=document.getElementById(e.containerDivId);buildObservationDeck(f,e)}}}})};
setupRowLabelContextMenu=function(e){$.contextMenu({selector:".rowLabel",callback:function(e,d){var f=this[0].__data__,b=0<=this[0].getAttribute("class").indexOf("axis")?!0:!1;b&&(b=0<=this[0].getAttribute("class").indexOf("rowLabel")?"row":"column");console.log(e,f,b)},items:{sort:{name:"sort",icon:null,disabled:!1,callback:function(h,d){var f=this[0].__data__,b=0<=this[0].getAttribute("class").indexOf("axis")?!0:!1;if(b){var b=0<=this[0].getAttribute("class").indexOf("rowLabel")?"row":"column",
k="colSort";"row"!=b&&(k="rowSort");var b=null,l=e.querySettings,b=k in l?new sortingSteps(l[k].steps):new sortingSteps;b.addStep(f);l[k]=b;setCookie("od_config",JSON.stringify(l));f=document.getElementById(e.containerDivId);buildObservationDeck(f,e)}else console.log("exit out because not a row or a column")}},sep1:"---------",expand:{name:"expand",icon:null,disabled:!0},collapse:{name:"collapse",icon:null,disabled:!0},reset:{name:"reset",icon:null,disabled:!1,callback:function(h,d){resetConfig(e);
var f=document.getElementById(e.containerDivId);buildObservationDeck(f,e)}}}})};
setupExpressionCellContextMenu=function(e){$.contextMenu({selector:".mrna_exp",callback:function(e,d){},items:{"eventwise median rescaling":{name:"eventwise median rescaling",icon:null,disabled:!1,callback:function(h,d){var f=e.querySettings;f["expression rescaling"]={method:"eventwiseMedianRescaling"};setCookie("od_config",JSON.stringify(f));f=document.getElementById(e.containerDivId);buildObservationDeck(f,e)}},"eventwise z-score rescaling":{name:"eventwise z-score rescaling",icon:null,disabled:!1,
callback:function(h,d){var f=e.querySettings;f["expression rescaling"]={method:"zScoreExpressionRescaling"};setCookie("od_config",JSON.stringify(f));f=document.getElementById(e.containerDivId);buildObservationDeck(f,e)}},sep1:"---------",reset:{name:"reset",icon:null,disabled:!1,callback:function(h,d){resetConfig(e);var f=document.getElementById(e.containerDivId);buildObservationDeck(f,e)}}}})};
setupCategoricCellContextMenu=function(e){$.contextMenu({selector:".categoric",callback:function(e,d){},items:{"yulia expression rescaling":{name:"yulia expression rescaling",icon:null,disabled:!1,callback:function(h,d){var f=this[0],b=f.getAttribute("eventId");f.getAttribute("sampleId");f=f.getAttribute("val");console.log("key:",h,"eventId:",b,"val:",f);console.log("href",window.location.href);console.log("host",window.location.host);console.log("pathname",window.location.pathname);console.log("search",
window.location.search);var k=e.querySettings;k["expression rescaling"]={method:"yulia_rescaling",eventId:b,val:f};setCookie("od_config",JSON.stringify(k));b=document.getElementById(e.containerDivId);buildObservationDeck(b,e)}},sep1:"---------",reset:{name:"reset",icon:null,disabled:!1,callback:function(h,d){resetConfig(e);var f=document.getElementById(e.containerDivId);buildObservationDeck(f,e)}}}})};
drawMatrix=function(e,h){h.rowClickback=function(b,d){var e=h.eventAlbum.getEvent(b).metadata.datatype;"expression data"===e?(e="/wb/gene/"+b.replace("_mRNA",""),window.open(e,"_self")):alert("open page for event: "+b+" of datatype: "+e)};h.columnClickback=function(b,d){window.open("/wb/patient/"+b,"_self")};h.cellClickback=function(b,d){console.log("cellClickback: r"+b.eventId+" c"+b.id+" val:"+b.val)};h.rowRightClickback=function(b,d){console.log("rowRightClickback: "+b);d3.event.preventDefault()};
h.columnRightClickback=function(b,d){console.log("columnRightClickback: "+b);d3.event.preventDefault()};h.cellRightClickback=function(b,d){console.log("cellRightClickback: r"+b.eventId+" c"+b.id+" val:"+b.val);d3.event.preventDefault()};var d=removeChildElems(e),f=h.eventAlbum;f.fillInMissingSamples(null);var b=f.getEventIdsByType(),k=[],l;for(l in b)k=k.concat(b[l]);var p=h.querySettings,n=null;hasOwnProperty(b,"expression data")&&hasOwnProperty(p,"expression rescaling")?(b=p["expression rescaling"],
"yulia_rescaling"===b.method?n=f.yuliaExpressionRescaling(b.eventId,b.val):"eventwiseMedianRescaling"===b.method?n=f.eventwiseMedianRescaling():"zScoreExpressionRescaling"===b.method&&(n=f.zScoreExpressionRescaling())):console.log("no expression data rescaling");b=centeredRgbaColorMapper(!1);null!=n&&(b=centeredRgbaColorMapper(!1,0,n.minVal,n.maxVal));var q={};for(l=0;l<k.length;l++){var r=k[l],s=f.getEvent(r).metadata.allowedValues;if("categoric"==s)q[r]=d3.scale.category10();else if("numeric"==
s){for(var w=f.getEvent(r).data.getValues(),s=[],v=0;v<w.length;v++){var x=w[v];isNumerical(x)&&s.push(x)}w=Math.min.apply(null,s);s=Math.max.apply(null,s);q[r]=centeredRgbaColorMapper(!1,0,w,s)}else q[r]="expression"==s?b:d3.scale.category10()}r=b=null;if("colSort"in p)for(r=new sortingSteps(p.colSort.steps),l=r.getSteps().length-1;0<=l;l--)s=r.steps[l],s=s.name,f.getEvent(s)||(console.log(s,"not found, skip sorting by that event"),r.removeStep(s));var b=f.multisortSamples(r),y={};for(l in b)s=b[l],
y[s]=l;p=[];if(null!=r){w=r.getSteps();for(v=0;v<w.length;v++)s=w[v],r=s.name,p.push(r);p.reverse()}for(s=0;s<k.length;s++)r=k[s],isObjInArray(p,r)||p.push(r);var L={};for(l in p)s=p[l],L[s]=l;k=lengthOfLongestString(b);l=lengthOfLongestString(p);k=3<k?9*k:30;l=1<l?8*l:15;var r=document.documentElement.clientWidth,M=Math.floor((r-l-0)/(b.length>p.length?b.length:p.length)),s=k+0+M*p.length,d=d3.select(d).append("svg").attr({width:r,height:s,viewBox:"0 0 "+r+" "+s,perserveAspectRatio:"xMinYMin meet"}).append("g").attr({transform:"translate("+
l+","+k+")"}),k=-6;l=M/1.5;k=d.selectAll(".rowLabel").data(p).enter().append("text").text(function(b){return b}).attr({x:0,y:function(b,d){return d*M},transform:"translate("+k+", "+l+")","class":function(b,d){return"rowLabel mono axis unselectable"}}).style("text-anchor","end");k.on("click",h.rowClickback);k.on("contextmenu",h.rowRightClickback);k.append("title").text(function(b){var d=f.getEvent(b).metadata.datatype,e="event: "+b+"\ndatatype: "+d;"expression data"===d&&null!=n&&hasOwnProperty(n,
"stats")&&(e=e+"\nraw data stats: "+prettyJson(n.stats[b]));return e});k=Math.floor(M/5);l=-1*Math.floor(M/3);k=d.selectAll(".colLabel").data(b).enter().append("text").text(function(b){return b}).attr({y:function(b,d){return(d+1)*M},x:0,transform:"rotate(-90) translate("+k+", "+l+")","class":function(b,d){return"colLabel mono axis unselectable"}}).style("text-anchor","start");k.on("click",h.columnClickback);k.on("contextmenu",h.columnRightClickback);k.append("title").text(function(b){return"sample: "+
b});k=f.getAllDataAsList();d=d.selectAll(".cell").data(k).enter().append(function(b){var d=document.createElementNS(svgNamespaceUri,"g");d.setAttributeNS(null,"class","cell");var e=y[b.id]*M,h=L[b.eventId]*M,k,l,n=M,p=M,r={"class":"bordered"};k=b.eventId;r.fill=null==k||null==b.val?"lightgrey":"white";d.appendChild(createSvgRectElement(e,h,4,4,n,p,r));if(null==k||null==b.val)return d;r=b.val;e=y[b.id]*M;h=L[b.eventId]*M;l=k=4;p=n=M;r={stroke:"#E6E6E6","stroke-width":"2px",fill:(0,q[b.eventId])(r)};
"categoric"===f.getEvent(b.eventId).metadata.allowedValues?(r["class"]="categoric",r.eventId=b.eventId,r.sampleId=b.id,r.val=b.val):"expression data"===f.getEvent(b.eventId).metadata.datatype&&(r["class"]="mrna_exp",r.eventId=b.eventId,r.sampleId=b.id,r.val=b.val);d.appendChild(createSvgRectElement(e,h,k,l,n,p,r));return d});d.on("click",h.cellClickback).on("contextmenu",h.cellRightClickback);d.append("title").text(function(b){return"event: "+b.eventId+"\nsample: "+b.id+"\nvalue: "+b.val});return h};
