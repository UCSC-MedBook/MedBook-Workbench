(function(e,k){function d(e){e=e.split(/\s+/);for(var b=[],d=0,h;h=e[d];d++)h=h[0].toUpperCase(),b.push(h);return b}function g(b){return b.id&&e('label[for="'+b.id+'"]').val()||b.name}function b(d,h,m){m||(m=0);h.each(function(){var h=e(this),n=this,p=this.nodeName.toLowerCase(),q,r;"label"==p&&h.find("input, textarea, select").length&&(q=h.text(),h=h.children().first(),n=h.get(0),p=n.nodeName.toLowerCase());switch(p){case "menu":r={name:h.attr("label"),items:{}};m=b(r.items,h.children(),m);break;
case "a":case "button":r={name:h.text(),disabled:!!h.attr("disabled"),callback:function(){return function(){h.click()}}()};break;case "menuitem":case "command":switch(h.attr("type")){case k:case "command":case "menuitem":r={name:h.attr("label"),disabled:!!h.attr("disabled"),callback:function(){return function(){h.click()}}()};break;case "checkbox":r={type:"checkbox",disabled:!!h.attr("disabled"),name:h.attr("label"),selected:!!h.attr("checked")};break;case "radio":r={type:"radio",disabled:!!h.attr("disabled"),
name:h.attr("label"),radio:h.attr("radiogroup"),value:h.attr("id"),selected:!!h.attr("checked")};break;default:r=k}break;case "hr":r="-------";break;case "input":switch(h.attr("type")){case "text":r={type:"text",name:q||g(n),disabled:!!h.attr("disabled"),value:h.val()};break;case "checkbox":r={type:"checkbox",name:q||g(n),disabled:!!h.attr("disabled"),selected:!!h.attr("checked")};break;case "radio":r={type:"radio",name:q||g(n),disabled:!!h.attr("disabled"),radio:!!h.attr("name"),value:h.val(),selected:!!h.attr("checked")};
break;default:r=k}break;case "select":r={type:"select",name:q||g(n),disabled:!!h.attr("disabled"),selected:h.val(),options:{}};h.children().each(function(){r.options[this.value]=e(this).text()});break;case "textarea":r={type:"textarea",name:q||g(n),disabled:!!h.attr("disabled"),value:h.val()};break;case "label":break;default:r={type:"html",html:h.clone(!0)}}r&&(m++,d["key"+m]=r)});return m}e.support.htmlMenuitem="HTMLMenuItemElement"in window;e.support.htmlCommand="HTMLCommandElement"in window;e.support.eventSelectstart=
"onselectstart"in document.documentElement;if(!e.ui||!e.ui.widget){var h=e.cleanData;e.cleanData=function(b){for(var d=0,g;null!=(g=b[d]);d++)try{e(g).triggerHandler("remove")}catch(k){}h(b)}}var m=null,p=!1,n=e(window),q=0,r={},t={},x={},v={selector:null,appendTo:null,trigger:"right",autoHide:!1,delay:200,reposition:!0,determinePosition:function(b){if(e.ui&&e.ui.position)b.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none");
else{var d=this.offset();d.top+=this.outerHeight();d.left+=this.outerWidth()/2-b.outerWidth()/2;b.css(d)}},position:function(e,b,d){if(b||d){b="maintain"===b&&"maintain"===d?e.$menu.position():{top:d,left:b};d=n.scrollTop()+n.height();var h=n.scrollLeft()+n.width(),g=e.$menu.height(),k=e.$menu.width();b.top+g>d&&(b.top-=g);b.left+k>h&&(b.left-=k);e.$menu.css(b)}else e.determinePosition.call(this,e.$menu)},positionSubmenu:function(b){if(e.ui&&e.ui.position)b.css("display","block").position({my:"left top",
at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var d={top:0,left:this.outerWidth()};b.css(d)}},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{show:e.noop,hide:e.noop},callback:null,items:{}},w=null,y=null,H=null,D,qa=function(b){for(var e=0;e=Math.max(e,parseInt(b.css("z-index"),10)||0),b=b.parent(),b&&b.length&&!(-1<"html body".indexOf(b.prop("nodeName").toLowerCase())););return e},F={abortevent:function(b){b.preventDefault();b.stopImmediatePropagation()},
contextmenu:function(b){var d=e(this);b.preventDefault();b.stopImmediatePropagation();if(!("right"!=b.data.trigger&&b.originalEvent||d.hasClass("context-menu-active")||d.hasClass("context-menu-disabled"))){m=d;if(b.data.build){var h=b.data.build(m,b);if(!1===h)return;b.data=e.extend(!0,{},v,b.data,h||{});if(!b.data.items||e.isEmptyObject(b.data.items))throw window.console&&(console.error||console.log)("No items specified to show in contextMenu"),Error("No Items specified");b.data.$trigger=m;Q.create(b.data)}Q.show.call(d,
b.data,b.pageX,b.pageY)}},click:function(b){b.preventDefault();b.stopImmediatePropagation();e(this).trigger(e.Event("contextmenu",{data:b.data,pageX:b.pageX,pageY:b.pageY}))},mousedown:function(b){var d=e(this);m&&m.length&&!m.is(d)&&m.data("contextMenu").$menu.trigger("contextmenu:hide");2==b.button&&(m=d.data("contextMenuActive",!0))},mouseup:function(b){var d=e(this);d.data("contextMenuActive")&&m&&m.length&&m.is(d)&&!d.hasClass("context-menu-disabled")&&(b.preventDefault(),b.stopImmediatePropagation(),
m=d,d.trigger(e.Event("contextmenu",{data:b.data,pageX:b.pageX,pageY:b.pageY})));d.removeData("contextMenuActive")},mouseenter:function(b){var d=e(this),h=e(b.relatedTarget),g=e(document);h.is(".context-menu-list")||h.closest(".context-menu-list").length||m&&m.length||(y=b.pageX,H=b.pageY,D=b.data,g.on("mousemove.contextMenuShow",F.mousemove),w=setTimeout(function(){w=null;g.off("mousemove.contextMenuShow");m=d;d.trigger(e.Event("contextmenu",{data:D,pageX:y,pageY:H}))},b.data.delay))},mousemove:function(b){y=
b.pageX;H=b.pageY},mouseleave:function(b){b=e(b.relatedTarget);if(!b.is(".context-menu-list")&&!b.closest(".context-menu-list").length){try{clearTimeout(w)}catch(d){}w=null}},layerClick:function(b){var d=e(this).data("contextMenuRoot"),h=b.button,g=b.pageX,k=b.pageY,m,p;b.preventDefault();b.stopImmediatePropagation();setTimeout(function(){var q,r="left"==d.trigger&&0===h||"right"==d.trigger&&2===h;document.elementFromPoint&&(d.$layer.hide(),m=document.elementFromPoint(g-n.scrollLeft(),k-n.scrollTop()),
d.$layer.show());if(d.reposition&&r)if(document.elementFromPoint){if(d.$trigger.is(m)||d.$trigger.has(m).length){d.position.call(d.$trigger,d,g,k);return}}else if(p=d.$trigger.offset(),q=e(window),p.top+=q.scrollTop(),p.top<=b.pageY&&(p.left+=q.scrollLeft(),p.left<=b.pageX&&(p.bottom=p.top+d.$trigger.outerHeight(),p.bottom>=b.pageY&&(p.right=p.left+d.$trigger.outerWidth(),p.right>=b.pageX)))){d.position.call(d.$trigger,d,g,k);return}if(m&&r)d.$trigger.one("contextmenu:hidden",function(){e(m).contextMenu({x:g,
y:k})});d.$menu.trigger("contextmenu:hide")},50)},keyStop:function(b,e){e.isInput||b.preventDefault();b.stopPropagation()},key:function(b){var e=m.data("contextMenu")||{};switch(b.keyCode){case 9:case 38:if(F.keyStop(b,e),e.isInput){if(9==b.keyCode&&b.shiftKey){b.preventDefault();e.$selected&&e.$selected.find("input, textarea, select").blur();e.$menu.trigger("prevcommand");return}if(38==b.keyCode&&"checkbox"==e.$selected.find("input, textarea, select").prop("type")){b.preventDefault();return}}else if(9!=
b.keyCode||b.shiftKey){e.$menu.trigger("prevcommand");return}case 40:F.keyStop(b,e);if(e.isInput){if(9==b.keyCode){b.preventDefault();e.$selected&&e.$selected.find("input, textarea, select").blur();e.$menu.trigger("nextcommand");return}if(40==b.keyCode&&"checkbox"==e.$selected.find("input, textarea, select").prop("type")){b.preventDefault();return}}else{e.$menu.trigger("nextcommand");return}break;case 37:F.keyStop(b,e);if(e.isInput||!e.$selected||!e.$selected.length)break;if(!e.$selected.parent().hasClass("context-menu-root")){b=
e.$selected.parent().parent();e.$selected.trigger("contextmenu:blur");e.$selected=b;return}break;case 39:F.keyStop(b,e);if(e.isInput||!e.$selected||!e.$selected.length)break;var d=e.$selected.data("contextMenu")||{};if(d.$menu&&e.$selected.hasClass("context-menu-submenu")){e.$selected=null;d.$selected=null;d.$menu.trigger("nextcommand");return}break;case 35:case 36:e.$selected&&e.$selected.find("input, textarea, select").length||((e.$selected&&e.$selected.parent()||e.$menu).children(":not(.disabled, .not-selectable)")[36==
b.keyCode?"first":"last"]().trigger("contextmenu:focus"),b.preventDefault());return;case 13:F.keyStop(b,e);if(e.isInput){if(e.$selected&&!e.$selected.is("textarea, select")){b.preventDefault();return}break}e.$selected&&e.$selected.trigger("mouseup");return;case 32:case 33:case 34:F.keyStop(b,e);return;case 27:F.keyStop(b,e);e.$menu.trigger("contextmenu:hide");return;default:if(d=String.fromCharCode(b.keyCode).toUpperCase(),e.accesskeys[d]){e.accesskeys[d].$node.trigger(e.accesskeys[d].$menu?"contextmenu:focus":
"mouseup");return}}b.stopPropagation();e.$selected&&e.$selected.trigger(b)},prevItem:function(b){b.stopPropagation();var d=e(this).data("contextMenu")||{};if(d.$selected){var h=d.$selected,d=d.$selected.parent().data("contextMenu")||{};d.$selected=h}for(var h=d.$menu.children(),g=d.$selected&&d.$selected.prev().length?d.$selected.prev():h.last(),k=g;g.hasClass("disabled")||g.hasClass("not-selectable");)if(g=g.prev().length?g.prev():h.last(),g.is(k))return;d.$selected&&F.itemMouseleave.call(d.$selected.get(0),
b);F.itemMouseenter.call(g.get(0),b);b=g.find("input, textarea, select");b.length&&b.focus()},nextItem:function(b){b.stopPropagation();var d=e(this).data("contextMenu")||{};if(d.$selected){var h=d.$selected,d=d.$selected.parent().data("contextMenu")||{};d.$selected=h}for(var h=d.$menu.children(),g=d.$selected&&d.$selected.next().length?d.$selected.next():h.first(),k=g;g.hasClass("disabled")||g.hasClass("not-selectable");)if(g=g.next().length?g.next():h.first(),g.is(k))return;d.$selected&&F.itemMouseleave.call(d.$selected.get(0),
b);F.itemMouseenter.call(g.get(0),b);b=g.find("input, textarea, select");b.length&&b.focus()},focusInput:function(b){b=e(this).closest(".context-menu-item");var d=b.data(),h=d.contextMenu,d=d.contextMenuRoot;d.$selected=h.$selected=b;d.isInput=h.isInput=!0},blurInput:function(b){b=e(this).closest(".context-menu-item").data();b.contextMenuRoot.isInput=b.contextMenu.isInput=!1},menuMouseenter:function(b){e(this).data().contextMenuRoot.hovering=!0},menuMouseleave:function(b){var d=e(this).data().contextMenuRoot;
d.$layer&&d.$layer.is(b.relatedTarget)&&(d.hovering=!1)},itemMouseenter:function(b){var d=e(this),h=d.data(),g=h.contextMenu,h=h.contextMenuRoot;h.hovering=!0;b&&h.$layer&&h.$layer.is(b.relatedTarget)&&(b.preventDefault(),b.stopImmediatePropagation());(g.$menu?g:h).$menu.children(".hover").trigger("contextmenu:blur");d.hasClass("disabled")||d.hasClass("not-selectable")?g.$selected=null:d.trigger("contextmenu:focus")},itemMouseleave:function(b){var d=e(this),h=d.data(),g=h.contextMenu,h=h.contextMenuRoot;
h!==g&&h.$layer&&h.$layer.is(b.relatedTarget)?(h.$selected&&h.$selected.trigger("contextmenu:blur"),b.preventDefault(),b.stopImmediatePropagation(),h.$selected=g.$selected=g.$node):d.trigger("contextmenu:blur")},itemClick:function(b){var d=e(this),h=d.data(),g=h.contextMenuRoot,k=h.contextMenuKey;if(h.contextMenu.items[k]&&!d.is(".disabled, .context-menu-submenu, .context-menu-separator, .not-selectable")){b.preventDefault();b.stopImmediatePropagation();if(e.isFunction(g.callbacks[k])&&Object.prototype.hasOwnProperty.call(g.callbacks,
k))b=g.callbacks[k];else if(e.isFunction(g.callback))b=g.callback;else return;!1!==b.call(g.$trigger,k,g)?g.$menu.trigger("contextmenu:hide"):g.$menu.parent().length&&Q.update.call(g.$trigger,g)}},inputClick:function(b){b.stopImmediatePropagation()},hideMenu:function(b,d){var h=e(this).data("contextMenuRoot");Q.hide.call(h.$trigger,h,d&&d.force)},focusItem:function(b){b.stopPropagation();b=e(this);var d=b.data(),h=d.contextMenu,d=d.contextMenuRoot;b.addClass("hover").siblings(".hover").trigger("contextmenu:blur");
h.$selected=d.$selected=b;h.$node&&d.positionSubmenu.call(h.$node,h.$menu)},blurItem:function(b){b.stopPropagation();b=e(this);var d=b.data().contextMenu;b.removeClass("hover");d.$selected=null}},Q={show:function(b,d,h){var g=e(this),k={};e("#context-menu-layer").trigger("mousedown");b.$trigger=g;if(!1===b.events.show.call(g,b))m=null;else if(Q.update.call(g,b),b.position.call(g,b,d,h),b.zIndex&&(k.zIndex=qa(g)+b.zIndex),Q.layer.call(b.$menu,b,k.zIndex),b.$menu.find("ul").css("zIndex",k.zIndex+1),
b.$menu.css(k)[b.animation.show](b.animation.duration,function(){g.trigger("contextmenu:visible")}),g.data("contextMenu",b).addClass("context-menu-active"),e(document).off("keydown.contextMenu").on("keydown.contextMenu",F.key),b.autoHide)e(document).on("mousemove.contextMenuAutoHide",function(d){var e=g.offset();e.right=e.left+g.outerWidth();e.bottom=e.top+g.outerHeight();!b.$layer||b.hovering||d.pageX>=e.left&&d.pageX<=e.right&&d.pageY>=e.top&&d.pageY<=e.bottom||b.$menu.trigger("contextmenu:hide")})},
hide:function(b,d){var h=e(this);b||(b=h.data("contextMenu")||{});if(d||!b.events||!1!==b.events.hide.call(h,b)){h.removeData("contextMenu").removeClass("context-menu-active");if(b.$layer){setTimeout(function(b){return function(){b.remove()}}(b.$layer),10);try{delete b.$layer}catch(g){b.$layer=null}}m=null;b.$menu.find(".hover").trigger("contextmenu:blur");b.$selected=null;e(document).off(".contextMenuAutoHide").off("keydown.contextMenu");b.$menu&&b.$menu[b.animation.hide](b.animation.duration,function(){b.build&&
(b.$menu.remove(),e.each(b,function(d,e){switch(d){case "ns":case "selector":case "build":case "trigger":return!0;default:b[d]=k;try{delete b[d]}catch(h){}return!0}}));setTimeout(function(){h.trigger("contextmenu:hidden")},10)})}},create:function(b,h){h===k&&(h=b);b.$menu=e('<ul class="context-menu-list"></ul>').addClass(b.className||"").data({contextMenu:b,contextMenuRoot:h});e.each(["callbacks","commands","inputs"],function(d,e){b[e]={};h[e]||(h[e]={})});h.accesskeys||(h.accesskeys={});e.each(b.items,
function(g,k){var m=e('<li class="context-menu-item"></li>').addClass(k.className||""),p=null,n=null;m.on("click",e.noop);k.$node=m.data({contextMenu:b,contextMenuRoot:h,contextMenuKey:g});if(k.accesskey)for(var q=d(k.accesskey),r=0,t;t=q[r];r++)if(!h.accesskeys[t]){h.accesskeys[t]=k;k._name=k.name.replace(new RegExp("("+t+")","i"),'<span class="context-menu-accesskey">$1</span>');break}if("string"==typeof k)m.addClass("context-menu-separator not-selectable");else if(k.type&&x[k.type])x[k.type].call(m,
k,b,h),e.each([b,h],function(b,d){d.commands[g]=k;e.isFunction(k.callback)&&(d.callbacks[g]=k.callback)});else{"html"==k.type?m.addClass("context-menu-html not-selectable"):k.type?(p=e("<label></label>").appendTo(m),e("<span></span>").html(k._name||k.name).appendTo(p),m.addClass("context-menu-input"),b.hasTypes=!0,e.each([b,h],function(b,d){d.commands[g]=k;d.inputs[g]=k})):k.items&&(k.type="sub");switch(k.type){case "text":n=e('<input type="text" value="1" name="" value="">').attr("name","context-menu-input-"+
g).val(k.value||"").appendTo(p);break;case "textarea":n=e('<textarea name=""></textarea>').attr("name","context-menu-input-"+g).val(k.value||"").appendTo(p);k.height&&n.height(k.height);break;case "checkbox":n=e('<input type="checkbox" value="1" name="" value="">').attr("name","context-menu-input-"+g).val(k.value||"").prop("checked",!!k.selected).prependTo(p);break;case "radio":n=e('<input type="radio" value="1" name="" value="">').attr("name","context-menu-input-"+k.radio).val(k.value||"").prop("checked",
!!k.selected).prependTo(p);break;case "select":n=e('<select name="">').attr("name","context-menu-input-"+g).appendTo(p);k.options&&(e.each(k.options,function(b,d){e("<option></option>").val(b).text(d).appendTo(n)}),n.val(k.selected));break;case "sub":e("<span></span>").html(k._name||k.name).appendTo(m);k.appendTo=k.$node;Q.create(k,h);m.data("contextMenu",k).addClass("context-menu-submenu");k.callback=null;break;case "html":e(k.html).appendTo(m);break;default:e.each([b,h],function(b,d){d.commands[g]=
k;e.isFunction(k.callback)&&(d.callbacks[g]=k.callback)}),e("<span></span>").html(k._name||k.name||"").appendTo(m)}if(k.type&&"sub"!=k.type&&"html"!=k.type&&(n.on("focus",F.focusInput).on("blur",F.blurInput),k.events))n.on(k.events,b);k.icon&&m.addClass("icon icon-"+k.icon)}k.$input=n;k.$label=p;m.appendTo(b.$menu);if(!b.hasTypes&&e.support.eventSelectstart)m.on("selectstart.disableTextSelect",F.abortevent)});b.$node||b.$menu.css("display","none").addClass("context-menu-root");b.$menu.appendTo(b.appendTo||
document.body)},resize:function(b,d){b.css({position:"absolute",display:"block"});b.data("width",Math.ceil(b.width())+1);b.css({position:"static",minWidth:"0px",maxWidth:"100000px"});b.find("> li > ul").each(function(){Q.resize(e(this),!0)});d||b.find("ul").andSelf().css({position:"",display:"",minWidth:"",maxWidth:""}).width(function(){return e(this).data("width")})},update:function(b,d){var h=this;d===k&&(d=b,Q.resize(b.$menu));b.$menu.children().each(function(){var g=e(this),k=g.data("contextMenuKey"),
m=b.items[k],k=e.isFunction(m.disabled)&&m.disabled.call(h,k,d)||!0===m.disabled;g[k?"addClass":"removeClass"]("disabled");if(m.type)switch(g.find("input, select, textarea").prop("disabled",k),m.type){case "text":case "textarea":m.$input.val(m.value||"");break;case "checkbox":case "radio":m.$input.val(m.value||"").prop("checked",!!m.selected);break;case "select":m.$input.val(m.selected||"")}m.$menu&&Q.update.call(h,m,d)})},layer:function(b,d){var h=b.$layer=e('<div id="context-menu-layer" style="position:fixed; z-index:'+
d+'; top:0; left:0; opacity: 0; filter: alpha(opacity=0); background-color: #000;"></div>').css({height:n.height(),width:n.width(),display:"block"}).data("contextMenuRoot",b).insertBefore(this).on("contextmenu",F.abortevent).on("mousedown",F.layerClick);e.support.fixedPosition||h.css({position:"absolute",height:e(document).height()});return h}};e.fn.contextMenu=function(b){b===k?this.first().trigger("contextmenu"):b.x&&b.y?this.first().trigger(e.Event("contextmenu",{pageX:b.x,pageY:b.y})):"hide"===
b?(b=this.data("contextMenu").$menu)&&b.trigger("contextmenu:hide"):"destroy"===b?e.contextMenu("destroy",{context:this}):e.isPlainObject(b)?(b.context=this,e.contextMenu("create",b)):b?this.removeClass("context-menu-disabled"):b||this.addClass("context-menu-disabled");return this};e.contextMenu=function(b,d){"string"!=typeof b&&(d=b,b="create");"string"==typeof d?d={selector:d}:d===k&&(d={});var h=e.extend(!0,{},v,d||{}),g=e(document),m=g,n=!1;h.context&&h.context.length?(m=e(h.context).first(),
h.context=m.get(0),n=h.context!==document):h.context=document;switch(b){case "create":if(!h.selector)throw Error("No selector specified");if(h.selector.match(/.context-menu-(list|item|input)($|\s)/))throw Error('Cannot bind to selector "'+h.selector+'" as it contains a reserved className');if(!h.build&&(!h.items||e.isEmptyObject(h.items)))throw Error("No Items specified");q++;h.ns=".contextMenu"+q;n||(r[h.selector]=h.ns);t[h.ns]=h;h.trigger||(h.trigger="right");p||(g.on({"contextmenu:hide.contextMenu":F.hideMenu,
"prevcommand.contextMenu":F.prevItem,"nextcommand.contextMenu":F.nextItem,"contextmenu.contextMenu":F.abortevent,"mouseenter.contextMenu":F.menuMouseenter,"mouseleave.contextMenu":F.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",F.inputClick).on({"mouseup.contextMenu":F.itemClick,"contextmenu:focus.contextMenu":F.focusItem,"contextmenu:blur.contextMenu":F.blurItem,"contextmenu.contextMenu":F.abortevent,"mouseenter.contextMenu":F.itemMouseenter,"mouseleave.contextMenu":F.itemMouseleave},
".context-menu-item"),p=!0);m.on("contextmenu"+h.ns,h.selector,h,F.contextmenu);if(n)m.on("remove"+h.ns,function(){e(this).contextMenu("destroy")});switch(h.trigger){case "hover":m.on("mouseenter"+h.ns,h.selector,h,F.mouseenter).on("mouseleave"+h.ns,h.selector,h,F.mouseleave);break;case "left":m.on("click"+h.ns,h.selector,h,F.click)}h.build||Q.create(h);break;case "destroy":var w;if(n){var x=h.context;e.each(t,function(b,d){if(d.context!==x)return!0;w=e(".context-menu-list").filter(":visible");w.length&&
w.data().contextMenuRoot.$trigger.is(e(d.context).find(d.selector))&&w.trigger("contextmenu:hide",{force:!0});try{t[d.ns].$menu&&t[d.ns].$menu.remove(),delete t[d.ns]}catch(h){t[d.ns]=null}e(d.context).off(d.ns);return!0})}else if(!h.selector)g.off(".contextMenu .contextMenuAutoHide"),e.each(t,function(b,d){e(d.context).off(d.ns)}),r={},t={},q=0,p=!1,e("#context-menu-layer, .context-menu-list").remove();else if(r[h.selector]){w=e(".context-menu-list").filter(":visible");w.length&&w.data().contextMenuRoot.$trigger.is(h.selector)&&
w.trigger("contextmenu:hide",{force:!0});try{t[r[h.selector]].$menu&&t[r[h.selector]].$menu.remove(),delete t[r[h.selector]]}catch(y){t[r[h.selector]]=null}g.off(r[h.selector])}break;case "html5":(!e.support.htmlCommand&&!e.support.htmlMenuitem||"boolean"==typeof d&&d)&&e('menu[type="context"]').each(function(){this.id&&e.contextMenu({selector:"[contextmenu="+this.id+"]",items:e.contextMenu.fromMenu(this)})}).css("display","none");break;default:throw Error('Unknown operation "'+b+'"');}return this};
e.contextMenu.setInputValues=function(b,d){d===k&&(d={});e.each(b.inputs,function(b,e){switch(e.type){case "text":case "textarea":e.value=d[b]||"";break;case "checkbox":e.selected=d[b]?!0:!1;break;case "radio":e.selected=(d[e.radio]||"")==e.value?!0:!1;break;case "select":e.selected=d[b]||""}})};e.contextMenu.getInputValues=function(b,d){d===k&&(d={});e.each(b.inputs,function(b,e){switch(e.type){case "text":case "textarea":case "select":d[b]=e.$input.val();break;case "checkbox":d[b]=e.$input.prop("checked");
break;case "radio":e.$input.prop("checked")&&(d[e.radio]=e.value)}});return d};e.contextMenu.fromMenu=function(d){d=e(d);var h={};b(h,d.children());return h};e.contextMenu.defaults=v;e.contextMenu.types=x;e.contextMenu.handle=F;e.contextMenu.op=Q;e.contextMenu.menus=t})(jQuery);!function(){function e(a,f){return f>a?-1:a>f?1:a>=f?0:0/0}function k(a){return null!=a&&!isNaN(a)}function d(a){return{left:function(f,l,z,b){3>arguments.length&&(z=0);for(4>arguments.length&&(b=f.length);b>z;){var u=z+b>>>1;0>a(f[u],l)?z=u+1:b=u}return z},right:function(f,l,z,b){3>arguments.length&&(z=0);for(4>arguments.length&&(b=f.length);b>z;){var u=z+b>>>1;0<a(f[u],l)?b=u:z=u+1}return z}}}function g(a){return a.length}function b(a,f){try{for(var l in f)Object.defineProperty(a.prototype,l,{value:f[l],
enumerable:!1})}catch(z){a.prototype=f}}function h(){}function m(a){return Pa+a in this}function p(){var a=[];return this.forEach(function(f){a.push(f)}),a}function n(){var a=0,f;for(f in this)f.charCodeAt(0)===Db&&++a;return a}function q(){for(var a in this)if(a.charCodeAt(0)===Db)return!1;return!0}function r(){}function t(a,f,l){return function(){var z=l.apply(f,arguments);return z===f?a:z}}function x(a,f){if(f in a)return f;f=f.charAt(0).toUpperCase()+f.slice(1);for(var l=0,z=Sd.length;z>l;++l){var b=
Sd[l]+f;if(b in a)return b}}function v(){}function w(){}function y(a){function f(){for(var f,z=l,b=-1,d=z.length;++b<d;)(f=z[b].on)&&f.apply(this,arguments);return a}var l=[],z=new h;return f.on=function(f,b){var d,e=z.get(f);return 2>arguments.length?e&&e.on:(e&&(e.on=null,l=l.slice(0,d=l.indexOf(e)).concat(l.slice(d+1)),z.remove(f)),b&&l.push(z.set(f,{on:b})),a)},f}function H(){s.event.preventDefault()}function D(){for(var a,f=s.event;a=f.sourceEvent;)f=a;return f}function qa(a){for(var f=new w,
l=0,z=arguments.length;++l<z;)f[arguments[l]]=y(f);return f.of=function(l,z){return function(b){try{var d=b.sourceEvent=s.event;b.target=a;s.event=b;f[b.type].apply(l,z)}finally{s.event=d}}},f}function F(a){return Eb(a,M),a}function Q(a){return"function"==typeof a?a:function(){return Bc(a,this)}}function Jd(a){return"function"==typeof a?a:function(){return Cc(a,this)}}function Kd(a,f){function l(){this.removeAttribute(a)}function z(){this.removeAttributeNS(a.space,a.local)}function b(){this.setAttribute(a,
f)}function u(){this.setAttributeNS(a.space,a.local,f)}function d(){var l=f.apply(this,arguments);null==l?this.removeAttribute(a):this.setAttribute(a,l)}function e(){var l=f.apply(this,arguments);null==l?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,l)}return a=s.ns.qualify(a),null==f?a.local?z:l:"function"==typeof f?a.local?e:d:a.local?u:b}function Ld(a){return a.trim().replace(/\s+/g," ")}function Md(a){return new RegExp("(?:^|\\s+)"+s.requote(a)+"(?:\\s+|$)","g")}
function Nd(a,f){function l(){for(var l=-1;++l<b;)a[l](this,f)}function z(){for(var l=-1,z=f.apply(this,arguments);++l<b;)a[l](this,z)}a=(a+"").trim().split(/^|\s+/).map(qg);var b=a.length;return"function"==typeof f?z:l}function qg(a){var f=Md(a);return function(l,z){if(b=l.classList)return z?b.add(a):b.remove(a);var b=l.getAttribute("class")||"";z?(f.lastIndex=0,f.test(b)||l.setAttribute("class",Ld(b+" "+a))):l.setAttribute("class",Ld(b.replace(f," ")))}}function Od(a,f,l){function b(){this.style.removeProperty(a)}
function B(){this.style.setProperty(a,f,l)}function u(){var b=f.apply(this,arguments);null==b?this.style.removeProperty(a):this.style.setProperty(a,b,l)}return null==f?b:"function"==typeof f?u:B}function Pd(a,f){function l(){delete this[a]}function b(){this[a]=f}function B(){var l=f.apply(this,arguments);null==l?delete this[a]:this[a]=l}return null==f?l:"function"==typeof f?B:b}function Qd(a){return"function"==typeof a?a:(a=s.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,
a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,a)}}function Rd(a){return function(){return Td(this,a)}}function rg(a){return arguments.length||(a=e),function(f,l){return f&&l?a(f.__data__,l.__data__):!f-!l}}function wa(a,f){for(var l=0,b=a.length;b>l;l++)for(var B,u=a[l],d=0,e=u.length;e>d;d++)(B=u[d])&&f(B,d,l);return a}function Ud(a){return Eb(a,xa),a}function sg(a){var f,l;return function(b,B,u){b=a[u].update;var d=b.length;u!=l&&(l=u,f=0);for(B>=f&&(f=B+1);!(B=
b[f])&&++f<d;);return B}}function Fb(){var a=this.__transition__;a&&++a.active}function Vd(a,f,l){function b(){var f=this[d];f&&(this.removeEventListener(a,f,f.$),delete this[d])}function B(){var u=h(f,Ga(arguments));b.call(this);this.addEventListener(a,this[d]=u,u.$=l);u._=f}function u(){var f,l=new RegExp("^__on([^.]+)"+s.requote(a)+"$"),b;for(b in this)if(f=b.match(l)){var z=this[b];this.removeEventListener(f[1],z,z.$);delete this[b]}}var d="__on"+a,e=a.indexOf("."),h=Wd;0<e&&(a=a.slice(0,e));
var g=Dc.get(a);return g&&(a=g,h=tg),e?f?B:b:f?v:u}function Wd(a,f){return function(l){var b=s.event;s.event=l;f[0]=this.__data__;try{a.apply(this,f)}finally{s.event=b}}}function tg(a,f){var l=Wd(a,f);return function(a){var f=a.relatedTarget;f&&(f===this||8&f.compareDocumentPosition(this))||l.call(this,a)}}function Gb(){var a=".dragsuppress-"+ ++ug,f="click"+a,l=s.select(aa).on("touchmove"+a,H).on("dragstart"+a,H).on("selectstart"+a,H);if(ob){var b=ya.style,B=b[ob];b[ob]="none"}return function(u){function d(){l.on(f,
null)}l.on(a,null);ob&&(b[ob]=B);u&&(l.on(f,function(){H();d()},!0),setTimeout(d,0))}}function Ec(a,f){f.changedTouches&&(f=f.changedTouches[0]);var l=a.ownerSVGElement||a;if(l.createSVGPoint){var b=l.createSVGPoint();if(0>Fc&&(aa.scrollX||aa.scrollY)){var l=s.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),d=l[0][0].getScreenCTM();Fc=!(d.f||d.e);l.remove()}return Fc?(b.x=f.pageX,b.y=f.pageY):(b.x=f.clientX,b.y=f.clientY),b=b.matrixTransform(a.getScreenCTM().inverse()),
[b.x,b.y]}l=a.getBoundingClientRect();return[f.clientX-l.left-a.clientLeft,f.clientY-l.top-a.clientTop]}function vg(){return s.event.changedTouches[0].identifier}function wg(){return s.event.target}function xg(){return aa}function Gc(a,f,l){return(f[0]-a[0])*(l[1]-a[1])-(f[1]-a[1])*(l[0]-a[0])}function Xd(a){return 1<a?0:-1>a?G:Math.acos(a)}function $a(a){return 1<a?W:-1>a?-W:Math.asin(a)}function Yd(a){return((a=Math.exp(a))+1/a)/2}function Zd(a){return(a=Math.sin(a/2))*a}function Qa(){}function ra(a,
f,l){return this instanceof ra?(this.h=+a,this.s=+f,void(this.l=+l)):2>arguments.length?a instanceof ra?new ra(a.h,a.s,a.l):$d(""+a,ae,ra):new ra(a,f,l)}function Hc(a,f,l){function b(a){return 360<a?a-=360:0>a&&(a+=360),60>a?d+(u-d)*a/60:180>a?u:240>a?d+(u-d)*(240-a)/60:d}var d,u;return a=isNaN(a)?0:0>(a%=360)?a+360:a,f=isNaN(f)?0:0>f?0:1<f?1:f,l=0>l?0:1<l?1:l,u=.5>=l?l*(1+f):l+f-l*f,d=2*l-u,new ba(Math.round(255*b(a+120)),Math.round(255*b(a)),Math.round(255*b(a-120)))}function la(a,f,l){return this instanceof
la?(this.h=+a,this.c=+f,void(this.l=+l)):2>arguments.length?a instanceof la?new la(a.h,a.c,a.l):a instanceof ma?be(a.l,a.a,a.b):be((a=ce((a=s.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new la(a,f,l)}function Ic(a,f,l){return isNaN(a)&&(a=0),isNaN(f)&&(f=0),new ma(l,Math.cos(a*=E)*f,Math.sin(a)*f)}function ma(a,f,l){return this instanceof ma?(this.l=+a,this.a=+f,void(this.b=+l)):2>arguments.length?a instanceof ma?new ma(a.l,a.a,a.b):a instanceof la?Ic(a.l,a.c,a.h):ce((a=ba(a)).r,a.g,a.b):new ma(a,f,l)}function de(a,
f,l){a=(a+16)/116;f=a+f/500;l=a-l/200;return f=Jc(f)*ee,a=Jc(a)*fe,l=Jc(l)*ge,new ba(Kc(3.2404542*f-1.5371385*a-.4985314*l),Kc(-.969266*f+1.8760108*a+.041556*l),Kc(.0556434*f-.2040259*a+1.0572252*l))}function be(a,f,l){return 0<a?new la(Math.atan2(l,f)*N,Math.sqrt(f*f+l*l),a):new la(0/0,0/0,a)}function Jc(a){return.206893034<a?a*a*a:(a-4/29)/7.787037}function Lc(a){return.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function Kc(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}
function ba(a,f,l){return this instanceof ba?(this.r=~~a,this.g=~~f,void(this.b=~~l)):2>arguments.length?a instanceof ba?new ba(a.r,a.g,a.b):$d(""+a,ba,Hc):new ba(a,f,l)}function Hb(a){return new ba(a>>16,255&a>>8,255&a)+""}function ab(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function $d(a,f,l){var b,d,u,e=0,h=0,g=0;if(b=/([a-z]+)\((.*)\)/i.exec(a))switch(d=b[2].split(","),b[1]){case "hsl":return l(parseFloat(d[0]),parseFloat(d[1])/100,parseFloat(d[2])/100);case "rgb":return f(Mc(d[0]),
Mc(d[1]),Mc(d[2]))}return(u=Ib.get(a))?f(u.r,u.g,u.b):(null==a||"#"!==a.charAt(0)||isNaN(u=parseInt(a.slice(1),16))||(4===a.length?(e=(3840&u)>>4,e|=e>>4,h=240&u,h|=h>>4,g=15&u,g|=g<<4):7===a.length&&(e=(16711680&u)>>16,h=(65280&u)>>8,g=255&u)),f(e,h,g))}function ae(a,f,l){var b,d,u=Math.min(a/=255,f/=255,l/=255),e=Math.max(a,f,l),h=e-u,g=(e+u)/2;return h?(d=.5>g?h/(e+u):h/(2-e-u),b=a==e?(f-l)/h+(l>f?6:0):f==e?(l-a)/h+2:(a-f)/h+4,b*=60):(b=0/0,d=0<g&&1>g?0:b),new ra(b,d,g)}function ce(a,f,l){a=Nc(a);
f=Nc(f);l=Nc(l);var b=Lc((.4124564*a+.3575761*f+.1804375*l)/ee),d=Lc((.2126729*a+.7151522*f+.072175*l)/fe);a=Lc((.0193339*a+.119192*f+.9503041*l)/ge);return ma(116*d-16,500*(b-d),200*(d-a))}function Nc(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Mc(a){var f=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*f):f}function L(a){return"function"==typeof a?a:function(){return a}}function V(a){return a}function Oc(a){return function(f,l,b){return 2===arguments.length&&
"function"==typeof l&&(b=l,l=null),Jb(f,l,a,b)}}function Jb(a,f,l,b){function d(){var a,f=g.status,b;if(b=!f)b=(b=g.responseType)&&"text"!==b?g.response:g.responseText;if(b||200<=f&&300>f||304===f){try{a=l.call(u,g)}catch(z){return e.error.call(u,z),void 0}e.load.call(u,a)}else e.error.call(u,g)}var u={},e=s.dispatch("beforesend","progress","load","error"),h={},g=new XMLHttpRequest,Z=null;return!aa.XDomainRequest||"withCredentials"in g||!/^(http(s)?:)?\/\//.test(a)||(g=new XDomainRequest),"onload"in
g?g.onload=g.onerror=d:g.onreadystatechange=function(){3<g.readyState&&d()},g.onprogress=function(a){var f=s.event;s.event=a;try{e.progress.call(u,g)}finally{s.event=f}},u.header=function(a,f){return a=(a+"").toLowerCase(),2>arguments.length?h[a]:(null==f?delete h[a]:h[a]=f+"",u)},u.mimeType=function(a){return arguments.length?(f=null==a?null:a+"",u):f},u.responseType=function(a){return arguments.length?(Z=a,u):Z},u.response=function(a){return l=a,u},["get","post"].forEach(function(a){u[a]=function(){return u.send.apply(u,
[a].concat(Ga(arguments)))}}),u.send=function(l,b,z){if(2===arguments.length&&"function"==typeof b&&(z=b,b=null),g.open(l,a,!0),null==f||"accept"in h||(h.accept=f+",*/*"),g.setRequestHeader)for(var d in h)g.setRequestHeader(d,h[d]);return null!=f&&g.overrideMimeType&&g.overrideMimeType(f),null!=Z&&(g.responseType=Z),null!=z&&u.on("error",z).on("load",function(a){z(null,a)}),e.beforesend.call(u,g),g.send(null==b?null:b),u},u.abort=function(){return g.abort(),u},s.rebind(u,e,"on"),null==b?u:u.get(yg(b))}
function yg(a){return 1===a.length?function(f,l){a(null==f?l:null)}:a}function Pc(){var a=he(),a=ie()-a;24<a?(isFinite(a)&&(clearTimeout(Kb),Kb=setTimeout(Pc,a)),Lb=0):(Lb=1,je(Pc))}function he(){var a=Date.now();for(za=Mb;za;)a>=za.t&&(za.f=za.c(a-za.t)),za=za.n;return a}function ie(){for(var a,f=Mb,l=1/0;f;)f.f?f=a?a.n=f.n:Mb=f.n:(f.t<l&&(l=f.t),f=(a=f).n);return Nb=a,l}function Qc(a,f){return f-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function zg(a){var f=a.decimal,l=a.thousands,b=a.grouping,d=a.currency,
u=b?function(a){for(var f=a.length,u=[],d=0,B=b[0];0<B&&0<f;)u.push(a.substring(f-=B,f+B)),B=b[d=(d+1)%b.length];return u.reverse().join(l)}:V;return function(a){a=ke.exec(a);var l=a[1]||" ",b=a[2]||">",z=a[3]||"",e=a[4]||"",h=a[5],g=+a[6],k=a[7],m=a[8],n=a[9],p=1,q="",r="",K=!1;switch(m&&(m=+m.substring(1)),(h||"0"===l&&"="===b)&&(h=l="0",b="=",k&&(g-=Math.floor((g-1)/4))),n){case "n":k=!0;n="g";break;case "%":p=100;r="%";n="f";break;case "p":p=100;r="%";n="r";break;case "b":case "o":case "x":case "X":"#"===
e&&(q="0"+n.toLowerCase());case "c":case "d":K=!0;m=0;break;case "s":p=-1,n="r"}"$"===e&&(q=d[0],r=d[1]);"r"!=n||m||(n="g");null!=m&&("g"==n?m=Math.max(1,Math.min(21,m)):("e"==n||"f"==n)&&(m=Math.max(0,Math.min(20,m))));var n=Ag.get(n)||Bg,t=h&&k;return function(a){var d=r;if(K&&a%1)return"";var B=0>a||0===a&&0>1/a?(a=-a,"-"):z;0>p?(d=s.formatPrefix(a,m),a=d.scale(a),d=d.symbol+r):a*=p;a=n(a,m);var e=a.lastIndexOf("."),T=0>e?a:a.substring(0,e),e=0>e?"":f+a.substring(e+1);!h&&k&&(T=u(T));var S=q.length+
T.length+e.length+(t?0:B.length),w=g>S?Array(S=g-S+1).join(l):"";return t&&(T=u(w+T)),B+=q,a=T+e,("<"===b?B+a+w:">"===b?w+B+a:"^"===b?w.substring(0,S>>=1)+B+a+w.substring(S):B+(t?a:w+a))+d}}}function Bg(a){return a+""}function Ba(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Ra(a,f,l){function b(f){var l=a(f),z=u(l,1);return z-f>f-l?l:z}function d(l){return f(l=a(new Y(l-1)),1),l}function u(a,l){return f(a=new Y(+a),l),a}function e(a,b,z){a=d(a);var u=
[];if(1<z)for(;b>a;)l(a)%z||u.push(new Date(+a)),f(a,1);else for(;b>a;)u.push(new Date(+a)),f(a,1);return u}a.floor=a;a.round=b;a.ceil=d;a.offset=u;a.range=e;var h=a.utc=Ob(a);return h.floor=h,h.round=Ob(b),h.ceil=Ob(d),h.offset=Ob(u),h.range=function(a,f,l){try{Y=Ba;var b=new Ba;return b._=a,e(b,f,l)}finally{Y=Date}},a}function Ob(a){return function(f,l){try{Y=Ba;var b=new Ba;return b._=f,a(b,l)._}finally{Y=Date}}}function Cg(a){function f(a){function f(l){for(var z,u,d,e=[],B=-1,h=0;++B<b;)37===
a.charCodeAt(B)&&(e.push(a.slice(h,B)),null!=(u=le[z=a.charAt(++B)])&&(z=a.charAt(++B)),(d=w[z])&&(z=d(l,null==u?"e"===z?" ":"0":u)),e.push(z),h=B+1);return e.push(a.slice(h,B)),e.join("")}var b=a.length;return f.parse=function(f){var b={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(l(b,a,f,0)!=f.length)return null;"p"in b&&(b.H=b.H%12+12*b.p);f=null!=b.Z&&Y!==Ba;var z=new (f?Ba:Y);return"j"in b?z.setFullYear(b.y,0,b.j):"w"in b&&("W"in b||"U"in b)?(z.setFullYear(b.y,0,1),z.setFullYear(b.y,0,"W"in b?(b.w+
6)%7+7*b.W-(z.getDay()+5)%7:b.w+7*b.U-(z.getDay()+6)%7)):z.setFullYear(b.y,b.m,b.d),z.setHours(b.H+(0|b.Z/100),b.M+b.Z%100,b.S,b.L),f?z._:z},f.toString=function(){return a},f}function l(a,f,l,b){for(var z,u,d,e=0,B=f.length,h=l.length;B>e;){if(b>=h)return-1;if(z=f.charCodeAt(e++),37===z){if(d=f.charAt(e++),u=v[d in le?f.charAt(e++):d],!u||0>(b=u(a,l,b)))return-1}else if(z!=l.charCodeAt(b++))return-1}return b}var b=a.dateTime,d=a.date,u=a.time,e=a.periods,h=a.days,g=a.shortDays,Z=a.months,k=a.shortMonths;
f.utc=function(a){function l(a){try{Y=Ba;var f=new Y;return f._=a,b(f)}finally{Y=Date}}var b=f(a);return l.parse=function(a){try{Y=Ba;var f=b.parse(a);return f&&f._}finally{Y=Date}},l.toString=b.toString,l};f.multi=f.utc.multi=Dg;var m=s.map(),n=Pb(h),p=Qb(h),q=Pb(g),r=Qb(g),t=Pb(Z),X=Qb(Z),I=Pb(k),K=Qb(k);e.forEach(function(a,f){m.set(a.toLowerCase(),f)});var w={a:function(a){return g[a.getDay()]},A:function(a){return h[a.getDay()]},b:function(a){return k[a.getMonth()]},B:function(a){return Z[a.getMonth()]},
c:f(b),d:function(a,f){return ca(a.getDate(),f,2)},e:function(a,f){return ca(a.getDate(),f,2)},H:function(a,f){return ca(a.getHours(),f,2)},I:function(a,f){return ca(a.getHours()%12||12,f,2)},j:function(a,f){return ca(1+A.dayOfYear(a),f,3)},L:function(a,f){return ca(a.getMilliseconds(),f,3)},m:function(a,f){return ca(a.getMonth()+1,f,2)},M:function(a,f){return ca(a.getMinutes(),f,2)},p:function(a){return e[+(12<=a.getHours())]},S:function(a,f){return ca(a.getSeconds(),f,2)},U:function(a,f){return ca(A.sundayOfYear(a),
f,2)},w:function(a){return a.getDay()},W:function(a,f){return ca(A.mondayOfYear(a),f,2)},x:f(d),X:f(u),y:function(a,f){return ca(a.getFullYear()%100,f,2)},Y:function(a,f){return ca(a.getFullYear()%1E4,f,4)},Z:Eg,"%":function(){return"%"}},v={a:function(a,f,l){q.lastIndex=0;return(f=q.exec(f.slice(l)))?(a.w=r.get(f[0].toLowerCase()),l+f[0].length):-1},A:function(a,f,l){n.lastIndex=0;return(f=n.exec(f.slice(l)))?(a.w=p.get(f[0].toLowerCase()),l+f[0].length):-1},b:function(a,f,l){I.lastIndex=0;return(f=
I.exec(f.slice(l)))?(a.m=K.get(f[0].toLowerCase()),l+f[0].length):-1},B:function(a,f,l){t.lastIndex=0;return(f=t.exec(f.slice(l)))?(a.m=X.get(f[0].toLowerCase()),l+f[0].length):-1},c:function(a,f,b){return l(a,w.c.toString(),f,b)},d:me,e:me,H:ne,I:ne,j:Fg,L:Gg,m:Hg,M:Ig,p:function(a,f,l){f=m.get(f.slice(l,l+=2).toLowerCase());return null==f?-1:(a.p=f,l)},S:Jg,U:Kg,w:Lg,W:Mg,x:function(a,f,b){return l(a,w.x.toString(),f,b)},X:function(a,f,b){return l(a,w.X.toString(),f,b)},y:Ng,Y:Og,Z:Pg,"%":Qg};return f}
function ca(a,f,l){var b=0>a?"-":"";a=(b?-a:a)+"";var d=a.length;return b+(l>d?Array(l-d+1).join(f)+a:a)}function Pb(a){return new RegExp("^(?:"+a.map(s.requote).join("|")+")","i")}function Qb(a){for(var f=new h,l=-1,b=a.length;++l<b;)f.set(a[l].toLowerCase(),l);return f}function Lg(a,f,l){P.lastIndex=0;return(f=P.exec(f.slice(l,l+1)))?(a.w=+f[0],l+f[0].length):-1}function Kg(a,f,l){P.lastIndex=0;return(f=P.exec(f.slice(l)))?(a.U=+f[0],l+f[0].length):-1}function Mg(a,f,l){P.lastIndex=0;return(f=P.exec(f.slice(l)))?
(a.W=+f[0],l+f[0].length):-1}function Og(a,f,l){P.lastIndex=0;return(f=P.exec(f.slice(l,l+4)))?(a.y=+f[0],l+f[0].length):-1}function Ng(a,f,l){P.lastIndex=0;if(f=P.exec(f.slice(l,l+2))){var b=+f[0];a=(a.y=b+(68<b?1900:2E3),l+f[0].length)}else a=-1;return a}function Pg(a,f,l){return/^[+-]\d{4}$/.test(f=f.slice(l,l+5))?(a.Z=-f,l+5):-1}function Hg(a,f,l){P.lastIndex=0;return(f=P.exec(f.slice(l,l+2)))?(a.m=f[0]-1,l+f[0].length):-1}function me(a,f,l){P.lastIndex=0;return(f=P.exec(f.slice(l,l+2)))?(a.d=
+f[0],l+f[0].length):-1}function Fg(a,f,l){P.lastIndex=0;return(f=P.exec(f.slice(l,l+3)))?(a.j=+f[0],l+f[0].length):-1}function ne(a,f,l){P.lastIndex=0;return(f=P.exec(f.slice(l,l+2)))?(a.H=+f[0],l+f[0].length):-1}function Ig(a,f,l){P.lastIndex=0;return(f=P.exec(f.slice(l,l+2)))?(a.M=+f[0],l+f[0].length):-1}function Jg(a,f,l){P.lastIndex=0;return(f=P.exec(f.slice(l,l+2)))?(a.S=+f[0],l+f[0].length):-1}function Gg(a,f,l){P.lastIndex=0;return(f=P.exec(f.slice(l,l+3)))?(a.L=+f[0],l+f[0].length):-1}function Eg(a){var f=
a.getTimezoneOffset();a=0<f?"-":"+";var l=0|J(f)/60,f=J(f)%60;return a+ca(l,"0",2)+ca(f,"0",2)}function Qg(a,f,l){oe.lastIndex=0;return(a=oe.exec(f.slice(l,l+1)))?l+a[0].length:-1}function Dg(a){for(var f=a.length,l=-1;++l<f;)a[l][0]=this(a[l][0]);return function(f){for(var l=0,b=a[l];!b[1](f);)b=a[++l];return b[0](f)}}function Sc(){}function pe(a,f,l){var b=l.s=a+f,d=b-a;l.t=a-(b-d)+(f-d)}function Rb(a,f){a&&qe.hasOwnProperty(a.type)&&qe[a.type](a,f)}function Tc(a,f,l){var b=-1,d=a.length-l;for(f.lineStart();++b<
d;)l=a[b],f.point(l[0],l[1],l[2]);f.lineEnd()}function re(a,f){var l=-1,b=a.length;for(f.polygonStart();++l<b;)Tc(a[l],f,1);f.polygonEnd()}function Rg(){function a(a,f){a*=E;f=f*E/2+G/4;var l=a-b,e=0<=l?1:-1,h=e*l,l=Math.cos(f),g=Math.sin(f),k=u*g,m=d*l+k*Math.cos(h),e=k*e*Math.sin(h);Sa.add(Math.atan2(e,m));b=a;d=l;u=g}var f,l,b,d,u;ea.point=function(e,h){ea.point=a;b=(f=e)*E;d=Math.cos(h=(l=h)*E/2+G/4);u=Math.sin(h)};ea.lineEnd=function(){a(f,l)}}function Ta(a){var f=a[0];a=a[1];var l=Math.cos(a);
return[l*Math.cos(f),l*Math.sin(f),Math.sin(a)]}function Sb(a,f){return a[0]*f[0]+a[1]*f[1]+a[2]*f[2]}function cb(a,f){return[a[1]*f[2]-a[2]*f[1],a[2]*f[0]-a[0]*f[2],a[0]*f[1]-a[1]*f[0]]}function Uc(a,f){a[0]+=f[0];a[1]+=f[1];a[2]+=f[2]}function Tb(a,f){return[a[0]*f,a[1]*f,a[2]*f]}function Ub(a){var f=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=f;a[1]/=f;a[2]/=f}function Vb(a){return[Math.atan2(a[1],a[0]),$a(a[2])]}function Wb(a,f){return J(a[0]-f[0])<C&&J(a[1]-f[1])<C}function Vc(a,f){a*=E;var l=
Math.cos(f*=E);qb(l*Math.cos(a),l*Math.sin(a),Math.sin(f))}function qb(a,f,l){++rb;Ca+=(a-Ca)/rb;Da+=(f-Da)/rb;ta+=(l-ta)/rb}function se(){function a(a,u){a*=E;var d=Math.cos(u*=E),e=d*Math.cos(a),d=d*Math.sin(a),h=Math.sin(u),g=Math.atan2(Math.sqrt((g=l*h-b*d)*g+(g=b*e-f*h)*g+(g=f*d-l*e)*g),f*e+l*d+b*h);db+=g;ha+=g*(f+(f=e));ia+=g*(l+(l=d));da+=g*(b+(b=h));qb(f,l,b)}var f,l,b;na.point=function(d,u){d*=E;var e=Math.cos(u*=E);f=e*Math.cos(d);l=e*Math.sin(d);b=Math.sin(u);na.point=a;qb(f,l,b)}}function te(){na.point=
Vc}function Sg(){function a(a,f){a*=E;var l=Math.cos(f*=E),e=l*Math.cos(a),l=l*Math.sin(a),h=Math.sin(f),g=d*h-u*l,k=u*e-b*h,m=b*l-d*e,n=Math.sqrt(g*g+k*k+m*m),p=b*e+d*l+u*h,q=n&&-Xd(p)/n,n=Math.atan2(n,p);Ja+=q*g;Ka+=q*k;ua+=q*m;db+=n;ha+=n*(b+(b=e));ia+=n*(d+(d=l));da+=n*(u+(u=h));qb(b,d,u)}var f,l,b,d,u;na.point=function(e,h){f=e;l=h;na.point=a;e*=E;var g=Math.cos(h*=E);b=g*Math.cos(e);d=g*Math.sin(e);u=Math.sin(h);qb(b,d,u)};na.lineEnd=function(){a(f,l);na.lineEnd=te;na.point=Vc}}function eb(){return!0}
function ue(a,f,l,b,d){var u=[],e=[];if(a.forEach(function(a){if(!(0>=(f=a.length-1))){var f,l=a[0],b=a[f];if(Wb(l,b)){d.lineStart();for(b=0;f>b;++b)d.point((l=a[b])[0],l[1]);return d.lineEnd(),void 0}f=new Xb(l,a,null,!0);l=new Xb(l,null,f,!1);f.o=l;u.push(f);e.push(l);f=new Xb(b,a,null,!1);l=new Xb(b,null,f,!0);f.o=l;u.push(f);e.push(l)}}),e.sort(f),ve(u),ve(e),u.length){a=0;f=l;for(l=e.length;l>a;++a)e[a].e=f=!f;for(var h,g=u[0];;){for(var k=g,m=!0;k.v;)if((k=k.n)===g)return;f=k.z;d.lineStart();
do{if(k.v=k.o.v=!0,k.e){if(m)for(a=0,l=f.length;l>a;++a)d.point((h=f[a])[0],h[1]);else b(k.x,k.n.x,1,d);k=k.n}else{if(m)for(f=k.p.z,a=f.length-1;0<=a;--a)d.point((h=f[a])[0],h[1]);else b(k.x,k.p.x,-1,d);k=k.p}k=k.o;f=k.z;m=!m}while(!k.v);d.lineEnd()}}}function ve(a){if(f=a.length){for(var f,l,b=0,d=a[0];++b<f;)d.n=l=a[b],l.p=d,d=l;d.n=l=a[0];l.p=d}}function Xb(a,f,l,b){this.x=a;this.z=f;this.o=l;this.e=b;this.v=!1;this.n=this.p=null}function we(a,f,l,b){return function(d,u){function e(f,l){var b=
d(f,l);a(f=b[0],l=b[1])&&u.point(f,l)}function h(a,f){var l=d(a,f);Aa.point(l[0],l[1])}function g(){I.point=h;Aa.lineStart()}function k(){I.point=e;Aa.lineEnd()}function m(a,f){t.push([a,f]);var l=d(a,f);w.point(l[0],l[1])}function n(){w.lineStart();t=[]}function p(){m(t[0][0],t[0][1]);w.lineEnd();var a;a=w.clean();var f=K.buffer(),l=f.length;if(t.pop(),r.push(t),t=null,l)if(1&a){a=f[0];var b,l=a.length-1,f=-1;if(0<l){v||(u.polygonStart(),v=!0);for(u.lineStart();++f<l;)u.point((b=a[f])[0],b[1]);u.lineEnd()}}else 1<
l&&2&a&&f.push(f.pop().concat(f.shift())),q.push(f.filter(Tg))}var q,r,t,Aa=f(u),X=d.invert(b[0],b[1]),I={point:e,lineStart:g,lineEnd:k,polygonStart:function(){I.point=m;I.lineStart=n;I.lineEnd=p;q=[];r=[]},polygonEnd:function(){I.point=e;I.lineStart=g;I.lineEnd=k;q=s.merge(q);var a,f=X;a=r;var b=f[0],d=f[1],z=[Math.sin(b),-Math.cos(b),0],h=0,B=0;Sa.reset();for(var R=0,m=a.length;m>R;++R){var n=a[R],p=n.length;if(p)for(var S=n[0],ka=S[0],f=S[1]/2+G/4,Ha=Math.sin(f),t=Math.cos(f),K=1;;){K===p&&(K=
0);var f=n[K],pb=f[0],Aa=f[1]/2+G/4,w=Math.sin(Aa),Aa=Math.cos(Aa),O=pb-ka,x=0<=O?1:-1,y=x*O,D=y>G,Ha=Ha*w;if(Sa.add(Math.atan2(Ha*x*Math.sin(y),t*Aa+Ha*Math.cos(y))),h+=D?O+x*fa:O,D^ka>=b^pb>=b)S=cb(Ta(S),Ta(f)),Ub(S),ka=cb(z,S),Ub(ka),ka=(D^0<=O?-1:1)*$a(ka[2]),(d>ka||d===ka&&(S[0]||S[1]))&&(B+=D^0<=O?1:-1);if(!K++)break;ka=pb;Ha=w;t=Aa;S=f}}a=(-C>h||C>h&&0>Sa)^1&B;q.length?(v||(u.polygonStart(),v=!0),ue(q,Ug,a,l,u)):a&&(v||(u.polygonStart(),v=!0),u.lineStart(),l(null,null,1,u),u.lineEnd());v&&
(u.polygonEnd(),v=!1);q=r=null},sphere:function(){u.polygonStart();u.lineStart();l(null,null,1,u);u.lineEnd();u.polygonEnd()}},K=xe(),w=f(K),v=!1;return I}}function Tg(a){return 1<a.length}function xe(){var a,f=[];return{lineStart:function(){f.push(a=[])},point:function(f,b){a.push([f,b])},lineEnd:v,buffer:function(){var l=f;return f=[],a=null,l},rejoin:function(){1<f.length&&f.push(f.pop().concat(f.shift()))}}}function Ug(a,f){return(0>(a=a.x)[0]?a[1]-W-C:W-a[1])-(0>(f=f.x)[0]?f[1]-W-C:W-f[1])}function Vg(a){function f(a,
f){return Math.cos(a)*Math.cos(f)>d}function l(a,f,l){var b=Ta(a),u=Ta(f),z=[1,0,0],u=cb(b,u),e=Sb(u,u),b=u[0],h=e-b*b;if(!h)return!l&&a;e=d*e/h;h=-d*b/h;b=cb(z,u);z=Tb(z,e);u=Tb(u,h);Uc(z,u);u=Sb(z,b);e=Sb(b,b);h=u*u-e*(Sb(z,z)-1);if(!(0>h)){var g=Math.sqrt(h),h=Tb(b,(-u-g)/e);if(Uc(h,z),h=Vb(h),!l)return h;var R;l=a[0];var k=f[0];a=a[1];f=f[1];l>k&&(R=l,l=k,k=R);var T=k-l,m=J(T-G)<C,n=m||C>T;if(!m&&a>f&&(R=a,a=f,f=R),n?m?0<a+f^h[1]<(J(h[0]-l)<C?a:f):a<=h[1]&&h[1]<=f:T>G^(l<=h[0]&&h[0]<=k))return R=
Tb(b,(-u+g)/e),Uc(R,z),[h,Vb(R)]}}function b(f,l){var d=u?a:G-a,z=0;return-d>f?z|=1:f>d&&(z|=2),-d>l?z|=4:l>d&&(z|=8),z}var d=Math.cos(a),u=0<d,e=J(d)>C,h=Wc(a,6*E);return we(f,function(a){var d,h,B,g,R;return{lineStart:function(){g=B=!1;R=1},point:function(k,m){var n,p=[k,m],q=f(k,m),s=u?q?0:b(k,m):q?b(k+(0>k?G:-G),m):0;if(!d&&(g=B=q)&&a.lineStart(),q!==B&&(n=l(d,p),(Wb(d,n)||Wb(p,n))&&(p[0]+=C,p[1]+=C,q=f(p[0],p[1]))),q!==B)R=0,q?(a.lineStart(),n=l(p,d),a.point(n[0],n[1])):(n=l(d,p),a.point(n[0],
n[1]),a.lineEnd()),d=n;else if(e&&d&&u^q){var r;s&h||!(r=l(p,d,!0))||(R=0,u?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!q||d&&Wb(d,p)||a.point(p[0],p[1]);d=p;B=q;h=s},lineEnd:function(){B&&a.lineEnd();d=null},clean:function(){return R|(g&&B)<<1}}},h,u?[0,-a]:[-G,a-G])}function ye(a,f,l,b){return function(d){var u,e=d.a,h=d.b,g=e.x,e=e.y,k=0,m=1,n=h.x-g,h=h.y-e;if(u=a-g,n||!(0<u)){if(u/=
n,0>n){if(k>u)return;m>u&&(m=u)}else if(0<n){if(u>m)return;u>k&&(k=u)}if(u=l-g,n||!(0>u)){if(u/=n,0>n){if(u>m)return;u>k&&(k=u)}else if(0<n){if(k>u)return;m>u&&(m=u)}if(u=f-e,h||!(0<u)){if(u/=h,0>h){if(k>u)return;m>u&&(m=u)}else if(0<h){if(u>m)return;u>k&&(k=u)}if(u=b-e,h||!(0>u)){if(u/=h,0>h){if(u>m)return;u>k&&(k=u)}else if(0<h){if(k>u)return;m>u&&(m=u)}return 0<k&&(d.a={x:g+k*n,y:e+k*h}),1>m&&(d.b={x:g+m*n,y:e+m*h}),d}}}}}}function ze(a,f,l,b){function d(b,u){return J(b[0]-a)<C?0<u?0:3:J(b[0]-
l)<C?0<u?2:1:J(b[1]-f)<C?0<u?1:0:0<u?3:2}function u(a,f){return e(a.x,f.x)}function e(a,f){var l=d(a,1),b=d(f,1);return l!==b?l-b:0===l?f[1]-a[1]:1===l?a[0]-f[0]:2===l?a[1]-f[1]:f[0]-a[0]}return function(h){function g(u,h,R,k){var m=0,nb=0;if(null==u||(m=d(u,R))!==(nb=d(h,R))||0>e(u,h)^0<R){do k.point(0===m||3===m?a:l,1<m?b:f);while((m=(m+R+4)%4)!==nb)}else k.point(h[0],h[1])}function k(d,u){d>=a&&l>=d&&u>=f&&b>=u&&h.point(d,u)}function m(d,u){d=Math.max(-Yb,Math.min(Yb,d));u=Math.max(-Yb,Math.min(Yb,
u));var e=d>=a&&l>=d&&u>=f&&b>=u;if(p&&q.push([d,u]),O)r=d,t=u,w=e,O=!1,e&&(h.lineStart(),h.point(d,u));else if(e&&K)h.point(d,u);else{var B={a:{x:X,y:I},b:{x:d,y:u}};y(B)?(K||(h.lineStart(),h.point(B.a.x,B.a.y)),h.point(B.b.x,B.b.y),e||h.lineEnd(),v=!1):e&&(h.lineStart(),h.point(d,u),v=!1)}X=d;I=u;K=e}var n,p,q,r,t,w,X,I,K,O,v,x=h,Ia=xe(),y=ye(a,f,l,b),Rc={point:k,lineStart:function(){Rc.point=m;p&&p.push(q=[]);O=!0;K=!1;X=I=0/0},lineEnd:function(){n&&(m(r,t),w&&K&&Ia.rejoin(),n.push(Ia.buffer()));
Rc.point=k;K&&h.lineEnd()},polygonStart:function(){h=Ia;n=[];p=[];v=!0},polygonEnd:function(){h=x;n=s.merge(n);var f;f=[a,b];for(var l=0,d=p.length,e=f[1],B=0;d>B;++B)for(var k,T=1,m=p[B],Z=m.length,S=m[0];Z>T;++T)k=m[T],S[1]<=e?k[1]>e&&0<Gc(S,k,f)&&++l:k[1]<=e&&0>Gc(S,k,f)&&--l,S=k;f=0!==l;l=v&&f;d=n.length;(l||d)&&(h.polygonStart(),l&&(h.lineStart(),g(null,null,1,h),h.lineEnd()),d&&ue(n,u,f,g,h),h.polygonEnd());n=p=q=null}};return Rc}}function Ae(a,f){function l(l,b){return l=a(l,b),f(l[0],l[1])}
return a.invert&&f.invert&&(l.invert=function(l,b){return l=f.invert(l,b),l&&a.invert(l[0],l[1])}),l}function Xc(a){var f=0,l=G/3,b=Yc(a);a=b(f,l);return a.parallels=function(a){return arguments.length?b(f=a[0]*G/180,l=a[1]*G/180):[f/G*180,l/G*180]},a}function Be(a,f){function l(a,f){var l=Math.sqrt(u-2*d*Math.sin(f))/d;return[l*Math.sin(a*=d),e-l*Math.cos(a)]}var b=Math.sin(a),d=(b+Math.sin(f))/2,u=1+b*(2*d-b),e=Math.sqrt(u)/d;return l.invert=function(a,f){var l=e-f;return[Math.atan2(a,l)/d,$a((u-
(a*a+l*l)*d*d)/(2*d))]},l}function Wg(){function a(a,f){Zb+=d*a-b*f;b=a;d=f}var f,l,b,d;La.point=function(u,e){La.point=a;f=b=u;l=d=e};La.lineEnd=function(){a(f,l)}}function Xg(){function a(a,f){e.push("M",a,",",f,u)}function f(a,f){e.push("M",a,",",f);h.point=l}function l(a,f){e.push("L",a,",",f)}function b(){h.point=a}function d(){e.push("Z")}var u=Ce(4.5),e=[],h={point:a,lineStart:function(){h.point=f},lineEnd:b,polygonStart:function(){h.lineEnd=d},polygonEnd:function(){h.lineEnd=b;h.point=a},
pointRadius:function(a){return u=Ce(a),h},result:function(){if(e.length){var a=e.join("");return e=[],a}}};return h}function Ce(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Ua(a,f){Ca+=a;Da+=f;++ta}function De(){function a(a,b){var d=a-f,e=b-l,d=Math.sqrt(d*d+e*e);ha+=d*(f+a)/2;ia+=d*(l+b)/2;da+=d;Ua(f=a,l=b)}var f,l;oa.point=function(b,d){oa.point=a;Ua(f=b,l=d)}}function Ee(){oa.point=Ua}function Yg(){function a(a,f){var l=a-b,e=f-d,l=Math.sqrt(l*l+e*e);
ha+=l*(b+a)/2;ia+=l*(d+f)/2;da+=l;l=d*a-b*f;Ja+=l*(b+a);Ka+=l*(d+f);ua+=3*l;Ua(b=a,d=f)}var f,l,b,d;oa.point=function(u,e){oa.point=a;Ua(f=b=u,l=d=e)};oa.lineEnd=function(){a(f,l)}}function Zg(a){function f(f,l){a.moveTo(f,l);a.arc(f,l,e,0,fa)}function l(f,l){a.moveTo(f,l);h.point=b}function b(f,l){a.lineTo(f,l)}function d(){h.point=f}function u(){a.closePath()}var e=4.5,h={point:f,lineStart:function(){h.point=l},lineEnd:d,polygonStart:function(){h.lineEnd=u},polygonEnd:function(){h.lineEnd=d;h.point=
f},pointRadius:function(a){return e=a,h},result:v};return h}function Fe(a){function f(a){return(h?b:l)(a)}function l(f){return Ge(f,function(l,b){l=a(l,b);f.point(l[0],l[1])})}function b(f){function l(b,d){b=a(b,d);f.point(b[0],b[1])}function u(){w=0/0;H.point=e;f.lineStart()}function e(l,b){var u=Ta([l,b]),z=a(l,b);d(w,v,t,x,y,D,w=z[0],v=z[1],t=l,x=u[0],y=u[1],D=u[2],h,f);f.point(w,v)}function z(){H.point=l;f.lineEnd()}function g(){u();H.point=k;H.lineEnd=m}function k(a,f){e(T=a,f);n=w;p=v;q=x;s=
y;r=D;H.point=e}function m(){d(w,v,t,x,y,D,n,p,T,q,s,r,h,f);H.lineEnd=z;z()}var T,n,p,q,s,r,t,w,v,x,y,D,H={point:l,lineStart:u,lineEnd:z,polygonStart:function(){f.polygonStart();H.lineStart=g},polygonEnd:function(){f.polygonEnd();H.lineStart=u}};return H}function d(f,l,b,z,h,g,k,R,m,n,p,q,s,r){var t=k-f,w=R-l,v=t*t+w*w;if(v>4*u&&s--){var x=z+n,y=h+p,D=g+q,H=Math.sqrt(x*x+y*y+D*D),bb=Math.asin(D/=H),F=J(J(D)-1)<C||J(b-m)<C?(b+m)/2:Math.atan2(y,x),A=a(F,bb),bb=A[0],A=A[1],E=bb-f,G=A-l,qa=w*E-t*G;(qa*
qa/v>u||.3<J((t*E+w*G)/v-.5)||e>z*n+h*p+g*q)&&(d(f,l,b,z,h,g,bb,A,F,x/=H,y/=H,D,s,r),r.point(bb,A),d(bb,A,F,x,y,D,k,R,m,n,p,q,s,r))}}var u=.5,e=Math.cos(30*E),h=16;return f.precision=function(a){return arguments.length?(h=0<(u=a*a)&&16,f):Math.sqrt(u)},f}function $g(a){var f=Fe(function(f,b){return a([f*N,b*N])});return function(a){return He(f(a))}}function Ie(a){this.stream=a}function Ge(a,f){return{point:f,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},
polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function Ma(a){return Yc(function(){return a})()}function Yc(a){function f(a){return a=h(a[0]*E,a[1]*E),[a[0]*p+g,k-a[1]*p]}function l(a){return a=h.invert((a[0]-g)/p,(k-a[1])/p),a&&[a[0]*N,a[1]*N]}function b(){h=Ae(e=Zc(X,I,K),u);var a=u(t,w);return g=q-a[0]*p,k=r+a[1]*p,d()}function d(){return m&&(m.valid=!1,m=null),f}var u,e,h,g,k,m,n=Fe(function(a,f){return a=u(a,f),[a[0]*p+g,k-a[1]*p]}),p=150,q=480,r=250,t=0,w=0,
X=0,I=0,K=0,v=Je,x=V,sa=null,y=null;return f.stream=function(a){return m&&(m.valid=!1),m=He(v(e,n(x(a)))),m.valid=!0,m},f.clipAngle=function(a){return arguments.length?(v=null==a?(sa=a,Je):Vg((sa=+a)*E),d()):sa},f.clipExtent=function(a){return arguments.length?(y=a,x=a?ze(a[0][0],a[0][1],a[1][0],a[1][1]):V,d()):y},f.scale=function(a){return arguments.length?(p=+a,b()):p},f.translate=function(a){return arguments.length?(q=+a[0],r=+a[1],b()):[q,r]},f.center=function(a){return arguments.length?(t=a[0]%
360*E,w=a[1]%360*E,b()):[t*N,w*N]},f.rotate=function(a){return arguments.length?(X=a[0]%360*E,I=a[1]%360*E,K=2<a.length?a[2]%360*E:0,b()):[X*N,I*N,K*N]},s.rebind(f,n,"precision"),function(){return u=a.apply(this,arguments),f.invert=u.invert&&l,b()}}function He(a){return Ge(a,function(f,l){a.point(f*E,l*E)})}function sb(a,f){return[a,f]}function Ke(a,f){return[a>G?a-fa:-G>a?a+fa:a,f]}function Zc(a,f,l){return a?f||l?Ae(Le(a),Me(f,l)):Le(a):f||l?Me(f,l):Ke}function Ne(a){return function(f,l){return f+=
a,[f>G?f-fa:-G>f?f+fa:f,l]}}function Le(a){var f=Ne(a);return f.invert=Ne(-a),f}function Me(a,f){function l(a,f){var l=Math.cos(f),h=Math.cos(a)*l,l=Math.sin(a)*l,g=Math.sin(f),k=g*b+h*d;return[Math.atan2(l*u-k*e,h*b-g*d),$a(k*u+l*e)]}var b=Math.cos(a),d=Math.sin(a),u=Math.cos(f),e=Math.sin(f);return l.invert=function(a,f){var l=Math.cos(f),h=Math.cos(a)*l,l=Math.sin(a)*l,g=Math.sin(f),k=g*u-l*e;return[Math.atan2(l*u+g*e,h*b+k*d),$a(k*b-h*d)]},l}function Wc(a,f){var l=Math.cos(a),b=Math.sin(a);return function(d,
u,e,h){var g=e*f;null!=d?(d=Oe(l,d),u=Oe(l,u),(0<e?u>d:d>u)&&(d+=e*fa)):(d=a+e*fa,u=a-.5*g);for(var k;0<e?d>u:u>d;d-=g)h.point((k=Vb([l,-b*Math.cos(d),-b*Math.sin(d)]))[0],k[1])}}function Oe(a,f){var l=Ta(f);l[0]-=a;Ub(l);var b=Xd(-l[1]);return((0>-l[2]?-b:b)+2*Math.PI-C)%(2*Math.PI)}function Pe(a,f,l){var b=s.range(a,f-C,l).concat(f);return function(a){return b.map(function(f){return[a,f]})}}function Qe(a,f,l){var b=s.range(a,f-C,l).concat(f);return function(a){return b.map(function(f){return[f,
a]})}}function $c(a){return a.source}function ad(a){return a.target}function ah(a,f,l,b){var d=Math.cos(f),u=Math.sin(f),e=Math.cos(b),h=Math.sin(b),g=d*Math.cos(a),k=d*Math.sin(a),m=e*Math.cos(l),n=e*Math.sin(l),p=2*Math.asin(Math.sqrt(Zd(b-f)+d*e*Zd(l-a))),q=1/Math.sin(p);l=p?function(a){var f=Math.sin(a*=p)*q,l=Math.sin(p-a)*q;a=l*g+f*m;var b=l*k+f*n,f=l*u+f*h;return[Math.atan2(b,a)*N,Math.atan2(f,Math.sqrt(a*a+b*b))*N]}:function(){return[a*N,f*N]};return l.distance=p,l}function tb(a,f){function l(f,
l){var b=Math.cos(f),d=Math.cos(l),b=a(b*d);return[b*d*Math.sin(f),b*Math.sin(l)]}return l.invert=function(a,l){var b=Math.sqrt(a*a+l*l),d=f(b),e=Math.sin(d),d=Math.cos(d);return[Math.atan2(a*e,b*d),Math.asin(b&&l*e/b)]},l}function Re(a,f){function l(a,f){0<e?-W+C>f&&(f=-W+C):f>W-C&&(f=W-C);var l=e/Math.pow(Math.tan(G/4+f/2),d);return[l*Math.sin(d*a),e-l*Math.cos(d*a)]}var b=Math.cos(a),d=a===f?Math.sin(a):Math.log(b/Math.cos(f))/Math.log(Math.tan(G/4+f/2)/Math.tan(G/4+a/2)),e=b*Math.pow(Math.tan(G/
4+a/2),d)/d;return d?(l.invert=function(a,f){var l=e-f,b=(0<d?1:0>d?-1:0)*Math.sqrt(a*a+l*l);return[Math.atan2(a,l)/d,2*Math.atan(Math.pow(e/b,1/d))-W]},l):$b}function Se(a,f){function l(a,f){var l=e-f;return[l*Math.sin(d*a),e-l*Math.cos(d*a)]}var b=Math.cos(a),d=a===f?Math.sin(a):(b-Math.cos(f))/(f-a),e=b/d+a;return J(d)<C?sb:(l.invert=function(a,f){var l=e-f;return[Math.atan2(a,l)/d,e-(0<d?1:0>d?-1:0)*Math.sqrt(a*a+l*l)]},l)}function $b(a,f){return[a,Math.log(Math.tan(G/4+f/2))]}function Te(a){var f,
l=Ma(a),b=l.scale,d=l.translate,e=l.clipExtent;return l.scale=function(){var a=b.apply(l,arguments);return a===l?f?l.clipExtent(null):l:a},l.translate=function(){var a=d.apply(l,arguments);return a===l?f?l.clipExtent(null):l:a},l.clipExtent=function(a){var h=e.apply(l,arguments);if(h===l){if(f=null==a){var g=G*b(),k=d();e([[k[0]-g,k[1]-g],[k[0]+g,k[1]+g]])}}else f&&(h=null);return h},l.clipExtent(null)}function bd(a,f){return[Math.log(Math.tan(G/4+f/2)),-a]}function fb(a){return a[0]}function ub(a){return a[1]}
function Ue(a){for(var f=a.length,l=[0,1],b=2,d=2;f>d;d++){for(;1<b&&0>=Gc(a[l[b-2]],a[l[b-1]],a[d]);)--b;l[b++]=d}return l.slice(0,b)}function bh(a,f){return a[0]-f[0]||a[1]-f[1]}function cd(a,f,l){return(l[0]-f[0])*(a[1]-f[1])<(l[1]-f[1])*(a[0]-f[0])}function Ve(a,f,l,b){var d=a[0],e=l[0],h=f[0]-d,g=b[0]-e;a=a[1];l=l[1];f=f[1]-a;b=b[1]-l;e=(g*(a-l)-b*(d-e))/(b*h-g*f);return[d+e*h,a+e*f]}function We(a){var f=a[0];a=a[a.length-1];return!(f[0]-a[0]||f[1]-a[1])}function ch(){ac(this);this.edge=this.site=
this.circle=null}function Xe(a){var f=Ye.pop()||new ch;return f.site=a,f}function dd(a){gb(a);hb.remove(a);Ye.push(a);ac(a)}function Ze(a,f){var l=a.site,b=l.x,d=l.y,e=d-f;if(!e)return b;var h=a.P;if(!h)return-1/0;var l=h.site,h=l.x,l=l.y,g=l-f;if(!g)return h;var k=h-b,m=1/e-1/g,n=k/g;return m?(-n+Math.sqrt(n*n-2*m*(k*k/(-2*g)-l+g/2+d-e/2)))/m+b:(b+h)/2}function $e(a){this.site=a;this.edges=[]}function af(a,f){return f.angle-a.angle}function dh(){ac(this);this.x=this.y=this.arc=this.site=this.cy=
null}function ib(a){var f=a.P,l=a.N;if(f&&l){var b=f.site,f=a.site,d=l.site;if(b!==d){var l=f.x,e=f.y,h=b.x-l,g=b.y-e,b=d.x-l,d=d.y-e,k=2*(h*d-g*b);if(!(k>=-ed)){var m=h*h+g*g,n=b*b+d*d,g=(d*m-g*n)/k,h=(h*n-b*m)/k,d=h+e,e=bf.pop()||new dh;e.arc=a;e.site=f;e.x=g+l;e.y=d+Math.sqrt(g*g+h*h);e.cy=d;a.circle=e;a=null;for(f=vb._;f;)if(e.y<f.y||e.y===f.y&&e.x<=f.x){if(!f.L){a=f.P;break}f=f.L}else{if(!f.R){a=f;break}f=f.R}vb.insert(a,e);a||(fd=e)}}}}function gb(a){var f=a.circle;f&&(f.P||(fd=f.N),vb.remove(f),
bf.push(f),ac(f),a.circle=null)}function eh(a,f){var l=a.b;if(l)return!0;var b,d,e=a.a,l=f[0][0],h=f[1][0],g=f[0][1],k=f[1][1],m=a.l,n=a.r,p=m.x,m=m.y,q=n.x,n=n.y;d=(p+q)/2;if(n===m){if(l>d||d>=h)return;if(p>q){if(e){if(e.y>=k)return}else e={x:d,y:g};l={x:d,y:k}}else{if(e){if(e.y<g)return}else e={x:d,y:k};l={x:d,y:g}}}else if(b=(p-q)/(n-m),d=(m+n)/2-b*d,-1>b||1<b)if(p>q){if(e){if(e.y>=k)return}else e={x:(g-d)/b,y:g};l={x:(k-d)/b,y:k}}else{if(e){if(e.y<g)return}else e={x:(k-d)/b,y:k};l={x:(g-d)/b,
y:g}}else if(n>m){if(e){if(e.x>=h)return}else e={x:l,y:b*l+d};l={x:h,y:b*h+d}}else{if(e){if(e.x<l)return}else e={x:h,y:b*h+d};l={x:l,y:b*l+d}}return a.a=e,a.b=l,!0}function cf(a,f){this.l=a;this.r=f;this.a=this.b=null}function wb(a,f,l,b){var d=new cf(a,f);return jb.push(d),l&&bc(d,a,f,l),b&&bc(d,f,a,b),Va[a.i].edges.push(new cc(d,a,f)),Va[f.i].edges.push(new cc(d,f,a)),d}function fh(a,f,l){a=new cf(a,null);return a.a=f,a.b=l,jb.push(a),a}function bc(a,f,l,b){a.a||a.b?a.l===l?a.b=b:a.a=b:(a.a=b,a.l=
f,a.r=l)}function cc(a,f,l){var b=a.a,d=a.b;this.edge=a;this.site=f;this.angle=l?Math.atan2(l.y-f.y,l.x-f.x):a.l===f?Math.atan2(d.x-b.x,b.y-d.y):Math.atan2(b.x-d.x,d.y-b.y)}function gd(){this._=null}function ac(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function xb(a,f){var l=f.R,b=f.U;b?b.L===f?b.L=l:b.R=l:a._=l;l.U=b;f.U=l;f.R=l.L;f.R&&(f.R.U=f);l.L=f}function yb(a,f){var l=f.L,b=f.U;b?b.L===f?b.L=l:b.R=l:a._=l;l.U=b;f.U=l;f.L=l.R;f.L&&(f.L.U=f);l.R=f}function df(a){for(;a.L;)a=a.L;return a}function hd(a,
f){var l,b,d,e=a.sort(gh).pop();jb=[];Va=Array(a.length);hb=new gd;for(vb=new gd;;)if(d=fd,e&&(!d||e.y<d.y||e.y===d.y&&e.x<d.x)){if(e.x!==l||e.y!==b){Va[e.i]=new $e(e);l=e;for(var h=b=void 0,g=void 0,k=void 0,m=l.x,n=l.y,p=hb._;p;)if(g=Ze(p,n)-m,g>C)p=p.L;else{var q;var s=p;q=n;var r=s.N;r?q=Ze(r,q):(s=s.site,q=s.y===q?s.x:1/0);if(k=m-q,!(k>C)){g>-C?(b=p.P,h=p):k>-C?(b=p,h=p.N):b=h=p;break}if(!p.R){b=p;break}p=p.R}g=Xe(l);if(hb.insert(b,g),b||h)if(b===h)gb(b),h=Xe(b.site),hb.insert(g,h),g.edge=h.edge=
wb(b.site,g.site),ib(b),ib(h);else if(h){gb(b);gb(h);k=b.site;n=k.x;p=k.y;q=l.x-n;var s=l.y-p,m=h.site,r=m.x-n,t=m.y-p,w=2*(q*t-s*r),X=q*q+s*s,I=r*r+t*t,n={x:(t*X-s*I)/w+n,y:(q*I-r*X)/w+p};bc(h.edge,k,m,n);g.edge=wb(k,l,null,n);h.edge=wb(l,m,null,n);ib(b);ib(h)}else g.edge=wb(b.site,g.site);l=e.x;b=e.y}e=a.pop()}else{if(!d)break;m=d.arc;h=m.circle;k=h.x;n=h.cy;h={x:k,y:n};q=m.P;p=m.N;g=[m];dd(m);for(m=q;m.circle&&J(k-m.circle.x)<C&&J(n-m.circle.cy)<C;)q=m.P,g.unshift(m),dd(m),m=q;g.unshift(m);gb(m);
for(q=p;q.circle&&J(k-q.circle.x)<C&&J(n-q.circle.cy)<C;)p=q.N,g.push(q),dd(q),q=p;g.push(q);gb(q);k=void 0;n=g.length;for(k=1;n>k;++k)q=g[k],m=g[k-1],bc(q.edge,m.site,q.site,h);m=g[0];q=g[n-1];q.edge=wb(m.site,q.site,null,h);ib(m);ib(q)}if(f){e=jb;l=ye(f[0][0],f[0][1],f[1][0],f[1][1]);for(b=e.length;b--;)d=e[b],(!eh(d,f)||!l(d)||J(d.a.x-d.b.x)<C&&J(d.a.y-d.b.y)<C)&&(d.a=d.b=null,e.splice(b,1));var K,m=f[0][0],n=f[1][0],p=f[0][1];q=f[1][1];s=Va;for(r=s.length;r--;)if(K=s[r],K&&K.prepare())for(h=K.edges,
g=h.length,b=0;g>b;)k=h[b].end(),e=k.x,l=k.y,t=h[++b%g].start(),d=t.x,t=t.y,(J(e-d)>C||J(l-t)>C)&&(h.splice(b,0,new cc(fh(K.site,k,J(e-m)<C&&q-l>C?{x:m,y:J(d-m)<C?t:q}:J(l-q)<C&&n-e>C?{x:J(t-q)<C?d:n,y:q}:J(e-n)<C&&l-p>C?{x:n,y:J(d-n)<C?t:p}:J(l-p)<C&&e-m>C?{x:J(t-p)<C?d:m,y:p}:null),K.site,null)),++g)}K={cells:Va,edges:jb};return hb=vb=jb=Va=null,K}function gh(a,f){return f.y-a.y||f.x-a.x}function hh(a){return a.x}function ih(a){return a.y}function ef(){return{leaf:!0,nodes:[],point:null,x:null,
y:null}}function zb(a,f,l,b,d,e){if(!a(f,l,b,d,e)){var h=.5*(l+d),g=.5*(b+e);f=f.nodes;f[0]&&zb(a,f[0],l,b,h,g);f[1]&&zb(a,f[1],h,b,d,g);f[2]&&zb(a,f[2],l,g,h,e);f[3]&&zb(a,f[3],h,g,d,e)}}function id(a,f){a=s.rgb(a);f=s.rgb(f);var l=a.r,b=a.g,d=a.b,e=f.r-l,h=f.g-b,g=f.b-d;return function(a){return"#"+ab(Math.round(l+e*a))+ab(Math.round(b+h*a))+ab(Math.round(d+g*a))}}function ff(a,f){var l,b={},d={};for(l in a)l in f?b[l]=Wa(a[l],f[l]):d[l]=a[l];for(l in f)l in a||(d[l]=f[l]);return function(a){for(l in b)d[l]=
b[l](a);return d}}function Ea(a,f){return f-=a=+a,function(l){return a+f*l}}function gf(a,f){var l,b,d,e=jd.lastIndex=kd.lastIndex=0,h=-1,g=[],k=[];a+="";for(f+="";(l=jd.exec(a))&&(b=kd.exec(f));)(d=b.index)>e&&(d=f.slice(e,d),g[h]?g[h]+=d:g[++h]=d),(l=l[0])===(b=b[0])?g[h]?g[h]+=b:g[++h]=b:(g[++h]=null,k.push({i:h,x:Ea(l,b)})),e=kd.lastIndex;return e<f.length&&(d=f.slice(e),g[h]?g[h]+=d:g[++h]=d),2>g.length?k[0]?(f=k[0].x,function(a){return f(a)+""}):function(){return f}:(f=k.length,function(a){for(var l,
b=0;f>b;++b)g[(l=k[b]).i]=l.x(a);return g.join("")})}function Wa(a,f){for(var l,b=s.interpolators.length;0<=--b&&!(l=s.interpolators[b](a,f)););return l}function dc(a,f){var l,b=[],d=[],e=a.length,h=f.length,g=Math.min(a.length,f.length);for(l=0;g>l;++l)b.push(Wa(a[l],f[l]));for(;e>l;++l)d[l]=a[l];for(;h>l;++l)d[l]=f[l];return function(a){for(l=0;g>l;++l)d[l]=b[l](a);return d}}function jh(a){return function(f){return 0>=f?0:1<=f?1:a(f)}}function hf(a){return function(f){return 1-a(1-f)}}function jf(a){return function(f){return.5*
(.5>f?a(2*f):2-a(2-2*f))}}function kh(a){return a*a}function lh(a){return a*a*a}function mh(a){if(0>=a)return 0;if(1<=a)return 1;var f=a*a,l=f*a;return 4*(.5>a?l:3*(a-f)+l-.75)}function nh(a){return 1-Math.cos(a*W)}function oh(a){return Math.pow(2,10*(a-1))}function ph(a){return 1-Math.sqrt(1-a*a)}function qh(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function kf(a,f){return f-=a,function(l){return Math.round(a+
f*l)}}function lf(a){var f=[a.a,a.b],l=[a.c,a.d],b=mf(f),d=f[0]*l[0]+f[1]*l[1],e;e=-d;e=(l[0]+=e*f[0],l[1]+=e*f[1],l);e=mf(e)||0;f[0]*l[1]<l[0]*f[1]&&(f[0]*=-1,f[1]*=-1,b*=-1,d*=-1);this.rotate=(b?Math.atan2(f[1],f[0]):Math.atan2(-l[0],l[1]))*N;this.translate=[a.e,a.f];this.scale=[b,e];this.skew=e?Math.atan2(d,e)*N:0}function mf(a){var f=Math.sqrt(a[0]*a[0]+a[1]*a[1]);return f&&(a[0]/=f,a[1]/=f),f}function nf(a,f){var l,b=[],d=[],e=s.transform(a),h=s.transform(f),g=e.translate,k=h.translate,m=e.rotate,
n=h.rotate,p=e.skew,q=h.skew,e=e.scale,h=h.scale;return g[0]!=k[0]||g[1]!=k[1]?(b.push("translate(",null,",",null,")"),d.push({i:1,x:Ea(g[0],k[0])},{i:3,x:Ea(g[1],k[1])})):k[0]||k[1]?b.push("translate("+k+")"):b.push(""),m!=n?(180<m-n?n+=360:180<n-m&&(m+=360),d.push({i:b.push(b.pop()+"rotate(",null,")")-2,x:Ea(m,n)})):n&&b.push(b.pop()+"rotate("+n+")"),p!=q?d.push({i:b.push(b.pop()+"skewX(",null,")")-2,x:Ea(p,q)}):q&&b.push(b.pop()+"skewX("+q+")"),e[0]!=h[0]||e[1]!=h[1]?(l=b.push(b.pop()+"scale(",
null,",",null,")"),d.push({i:l-4,x:Ea(e[0],h[0])},{i:l-2,x:Ea(e[1],h[1])})):(1!=h[0]||1!=h[1])&&b.push(b.pop()+"scale("+h+")"),l=d.length,function(a){for(var f,e=-1;++e<l;)b[(f=d[e]).i]=f.x(a);return b.join("")}}function rh(a,f){return f=f-(a=+a)?1/(f-a):0,function(l){return(l-a)*f}}function sh(a,f){return f=f-(a=+a)?1/(f-a):0,function(l){return Math.max(0,Math.min(1,(l-a)*f))}}function th(a){var f=a.source;a=a.target;var l;var b=a;if(f===b)l=f;else{l=of(f);for(var b=of(b),d=l.pop(),e=b.pop(),h=null;d===
e;)h=d,d=l.pop(),e=b.pop();l=h}for(b=[f];f!==l;)f=f.parent,b.push(f);for(f=b.length;a!==l;)b.splice(f,0,a),a=a.parent;return b}function of(a){for(var f=[],b=a.parent;null!=b;)f.push(a),a=b,b=b.parent;return f.push(a),f}function uh(a){a.fixed|=2}function vh(a){a.fixed&=-7}function wh(a){a.fixed|=4;a.px=a.x;a.py=a.y}function xh(a){a.fixed&=-5}function pf(a,f,b){var d=0,e=0;if(a.charge=0,!a.leaf)for(var h,g=a.nodes,k=g.length,m=-1;++m<k;)h=g[m],null!=h&&(pf(h,f,b),a.charge+=h.charge,d+=h.charge*h.cx,
e+=h.charge*h.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5),f*=b[a.point.index],a.charge+=a.pointCharge=f,d+=f*a.point.x,e+=f*a.point.y);a.cx=d/a.charge;a.cy=e/a.charge}function Ab(a,f){return s.rebind(a,f,"sort","children","value"),a.nodes=a,a.links=yh,a}function Bb(a,f){for(var b=[a];null!=(a=b.pop());)if(f(a),(e=a.children)&&(d=e.length))for(var d,e;0<=--d;)b.push(e[d])}function va(a,f){for(var b=[a],d=[];null!=(a=b.pop());)if(d.push(a),(h=a.children)&&(e=h.length))for(var e,
h,g=-1;++g<e;)b.push(h[g]);for(;null!=(a=d.pop());)f(a)}function zh(a){return a.children}function Ah(a){return a.value}function Bh(a,f){return f.value-a.value}function yh(a){return s.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function Ch(a){return a.x}function Dh(a){return a.y}function Eh(a,f,b){a.y0=f;a.y=b}function ld(a){return s.range(a.length)}function md(a){var f=-1;a=a[0].length;for(var b=[];++f<a;)b[f]=0;return b}function Fh(a){for(var f,b=
1,d=0,e=a[0][1],h=a.length;h>b;++b)(f=a[b][1])>e&&(d=b,e=f);return d}function Gh(a){return a.reduce(Hh,0)}function Hh(a,f){return a+f[1]}function Ih(a,f){return qf(a,Math.ceil(Math.log(f.length)/Math.LN2+1))}function qf(a,f){for(var b=-1,d=+a[0],e=(a[1]-d)/f,h=[];++b<=f;)h[b]=e*b+d;return h}function Jh(a){return[s.min(a),s.max(a)]}function Kh(a,f){return a.value-f.value}function nd(a,f){var b=a._pack_next;a._pack_next=f;f._pack_prev=a;f._pack_next=b;b._pack_prev=f}function rf(a,f){a._pack_next=f;
f._pack_prev=a}function sf(a,f){var b=f.x-a.x,d=f.y-a.y,e=a.r+f.r;return.999*e*e>b*b+d*d}function tf(a){function f(a){p=Math.min(a.x-a.r,p);q=Math.max(a.x+a.r,q);s=Math.min(a.y-a.r,s);r=Math.max(a.y+a.r,r)}if((b=a.children)&&(n=b.length)){var b,d,e,h,g,k,m,n,p=1/0,q=-1/0,s=1/0,r=-1/0;if(b.forEach(Lh),d=b[0],d.x=-d.r,d.y=0,f(d),1<n&&(e=b[1],e.x=e.r,e.y=0,f(e),2<n))for(h=b[2],uf(d,e,h),f(h),nd(d,h),d._pack_prev=h,nd(h,e),e=d._pack_next,g=3;n>g;g++){uf(d,e,h=b[g]);var t=0,w=1,v=1;for(k=e._pack_next;k!==
e;k=k._pack_next,w++)if(sf(k,h)){t=1;break}if(1==t)for(m=d._pack_prev;m!==k._pack_prev&&!sf(m,h);m=m._pack_prev,v++);t?(v>w||w==v&&e.r<d.r?rf(d,e=k):rf(d=m,e),g--):(nd(d,h),e=h,f(h))}d=(p+q)/2;e=(s+r)/2;for(g=k=0;n>g;g++)h=b[g],h.x-=d,h.y-=e,k=Math.max(k,h.r+Math.sqrt(h.x*h.x+h.y*h.y));a.r=k;b.forEach(Mh)}}function Lh(a){a._pack_next=a._pack_prev=a}function Mh(a){delete a._pack_next;delete a._pack_prev}function vf(a,f,b,d){var e=a.children;if(a.x=f+=d*a.x,a.y=b+=d*a.y,a.r*=d,e){a=-1;for(var h=e.length;++a<
h;)vf(e[a],f,b,d)}}function uf(a,f,b){var d=a.r+b.r,e=f.x-a.x,h=f.y-a.y;if(d&&(e||h)){var g=f.r+b.r,k=e*e+h*h,g=g*g,d=d*d;f=.5+(d-g)/(2*k);g=Math.sqrt(Math.max(0,2*g*(d+k)-(d-=k)*d-g*g))/(2*k);b.x=a.x+f*e+g*h;b.y=a.y+f*h-g*e}else b.x=a.x+d,b.y=a.y}function wf(a,f){return a.parent==f.parent?1:2}function od(a){var f=a.children;return f.length?f[0]:a.t}function pd(a){var f,b=a.children;return(f=b.length)?b[f-1]:a.t}function Nh(a){return 1+s.max(a,function(a){return a.y})}function Oh(a){return a.reduce(function(a,
b){return a+b.x},0)/a.length}function xf(a){var f=a.children;return f&&f.length?xf(f[0]):a}function yf(a){var f,b=a.children;return b&&(f=b.length)?yf(b[f-1]):a}function qd(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function zf(a,f){var b=a.x+f[3],d=a.y+f[0],e=a.dx-f[1]-f[3],h=a.dy-f[0]-f[2];return 0>e&&(b+=e/2,e=0),0>h&&(d+=h/2,h=0),{x:b,y:d,dx:e,dy:h}}function kb(a){var f=a[0];a=a[a.length-1];return a>f?[f,a]:[a,f]}function ec(a){return a.rangeExtent?a.rangeExtent():kb(a.range())}function Ph(a,f,b,
d){var e=b(a[0],a[1]),h=d(f[0],f[1]);return function(a){return h(e(a))}}function fc(a,f){var b,d=0,e=a.length-1,h=a[d],g=a[e];return h>g&&(b=d,d=e,e=b,b=h,h=g,g=b),a[d]=f.floor(h),a[e]=f.ceil(g),a}function Af(a){return a?{floor:function(f){return Math.floor(f/a)*a},ceil:function(f){return Math.ceil(f/a)*a}}:Qh}function Rh(a,f,b,d){var e=[],h=[],g=0,k=Math.min(a.length,f.length)-1;for(a[k]<a[0]&&(a=a.slice().reverse(),f=f.slice().reverse());++g<=k;)e.push(b(a[g-1],a[g])),h.push(d(f[g-1],f[g]));return function(f){var b=
s.bisect(a,f,1,k)-1;return h[b](e[b](f))}}function Bf(a,f,b,d){function e(){var m=2<Math.min(a.length,f.length)?Rh:Ph,B=d?sh:rh;return g=m(a,f,B,b),k=m(f,a,B,Wa),h}function h(a){return g(a)}var g,k;return h.invert=function(a){return k(a)},h.domain=function(f){return arguments.length?(a=f.map(Number),e()):a},h.range=function(a){return arguments.length?(f=a,e()):f},h.rangeRound=function(a){return h.range(a).interpolate(kf)},h.clamp=function(a){return arguments.length?(d=a,e()):d},h.interpolate=function(a){return arguments.length?
(b=a,e()):b},h.ticks=function(f){return s.range.apply(s,Na(a,f))},h.tickFormat=function(f,b){return rd(a,f,b)},h.nice=function(f){return fc(a,Af(Na(a,f)[2])),e()},h.copy=function(){return Bf(a,f,b,d)},e()}function sd(a,f){return s.rebind(a,f,"range","rangeRound","interpolate","clamp")}function Na(a,f){null==f&&(f=10);var b=kb(a),d=b[1]-b[0],e=Math.pow(10,Math.floor(Math.log(d/f)/Math.LN10)),d=f/d*e;return.15>=d?e*=10:.35>=d?e*=5:.75>=d&&(e*=2),b[0]=Math.ceil(b[0]/e)*e,b[1]=Math.floor(b[1]/e)*e+.5*
e,b[2]=e,b}function rd(a,f,b){a=Na(a,f);if(b){f=ke.exec(b);if(f.shift(),"s"===f[8]){var d=s.formatPrefix(Math.max(J(a[0]),J(a[1])));return f[7]||(f[7]="."+gc(d.scale(a[2]))),f[8]="f",b=s.format(f.join("")),function(a){return b(d.scale(a))+d.symbol}}f[7]||(f[7]="."+Sh(f[8],a));b=f.join("")}else b=",."+gc(a[2])+"f";return s.format(b)}function gc(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function Sh(a,f){var b=gc(f[2]);return a in Th?Math.abs(b-gc(Math.max(J(f[0]),J(f[1]))))+ +("e"!==a):b-2*("%"===
a)}function Cf(a,f,b,d){function e(a){return(b?Math.log(0>a?0:a):-Math.log(0<a?0:-a))/Math.log(f)}function h(a){return b?Math.pow(f,a):-Math.pow(f,-a)}function g(f){return a(e(f))}return g.invert=function(f){return h(a.invert(f))},g.domain=function(f){return arguments.length?(b=0<=f[0],a.domain((d=f.map(Number)).map(e)),g):d},g.base=function(b){return arguments.length?(f=+b,a.domain(d.map(e)),g):f},g.nice=function(){var f=fc(d.map(e),b?Math:Uh);return a.domain(f),d=f.map(h),g},g.ticks=function(){var a=
kb(d),g=[],k=a[0],a=a[1],m=Math.floor(e(k)),n=Math.ceil(e(a)),p=f%1?2:f;if(isFinite(n-m)){if(b){for(;n>m;m++)for(var q=1;p>q;q++)g.push(h(m)*q);g.push(h(m))}else for(g.push(h(m));m++<n;)for(q=p-1;0<q;q--)g.push(h(m)*q);for(m=0;g[m]<k;m++);for(n=g.length;g[n-1]>a;n--);g=g.slice(m,n)}return g},g.tickFormat=function(a,f){if(!arguments.length)return Df;2>arguments.length?f=Df:"function"!=typeof f&&(f=s.format(f));var d,k=Math.max(.1,a/g.ticks().length),z=b?(d=1E-12,Math.ceil):(d=-1E-12,Math.floor);return function(a){return a/
h(z(e(a)+d))<=k?f(a):""}},g.copy=function(){return Cf(a.copy(),f,b,d)},sd(g,a)}function Ef(a,f,b){function d(f){return a(e(f))}var e=hc(f),h=hc(1/f);return d.invert=function(f){return h(a.invert(f))},d.domain=function(f){return arguments.length?(a.domain((b=f.map(Number)).map(e)),d):b},d.ticks=function(a){return s.range.apply(s,Na(b,a))},d.tickFormat=function(a,f){return rd(b,a,f)},d.nice=function(a){return d.domain(fc(b,Af(Na(b,a)[2])))},d.exponent=function(g){return arguments.length?(e=hc(f=g),
h=hc(1/f),a.domain(b.map(e)),d):f},d.copy=function(){return Ef(a.copy(),f,b)},sd(d,a)}function hc(a){return function(f){return 0>f?-Math.pow(-f,a):Math.pow(f,a)}}function Ff(a,f){function b(l){return g[((e.get(l)||("range"===f.t?e.set(l,a.push(l)):0/0))-1)%g.length]}function d(f,b){return s.range(a.length).map(function(a){return f+b*a})}var e,g,k;return b.domain=function(d){if(!arguments.length)return a;a=[];e=new h;for(var g,u=-1,k=d.length;++u<k;)e.has(g=d[u])||e.set(g,a.push(g));return b[f.t].apply(b,
f.a)},b.range=function(a){return arguments.length?(g=a,k=0,f={t:"range",a:arguments},b):g},b.rangePoints=function(e,h){2>arguments.length&&(h=0);var m=e[0],B=e[1],n=(B-m)/(Math.max(1,a.length-1)+h);return g=d(2>a.length?(m+B)/2:m+n*h/2,n),k=0,f={t:"rangePoints",a:arguments},b},b.rangeBands=function(e,h,m){2>arguments.length&&(h=0);3>arguments.length&&(m=h);var B=e[1]<e[0],n=e[B-0],p=(e[1-B]-n)/(a.length-h+2*m);return g=d(n+p*m,p),B&&g.reverse(),k=p*(1-h),f={t:"rangeBands",a:arguments},b},b.rangeRoundBands=
function(e,h,m){2>arguments.length&&(h=0);3>arguments.length&&(m=h);var B=e[1]<e[0],n=e[B-0],p=e[1-B],q=Math.floor((p-n)/(a.length-h+2*m));return g=d(n+Math.round((p-n-(a.length-h)*q)/2),q),B&&g.reverse(),k=Math.round(q*(1-h)),f={t:"rangeRoundBands",a:arguments},b},b.rangeBand=function(){return k},b.rangeExtent=function(){return kb(f.a[0])},b.copy=function(){return Ff(a,f)},b.domain(a)}function Gf(a,f){function b(){var l=0,e=f.length;for(h=[];++l<e;)h[l-1]=s.quantile(a,l/e);return d}function d(a){return isNaN(a=
+a)?void 0:f[s.bisect(h,a)]}var h;return d.domain=function(f){return arguments.length?(a=f.filter(k).sort(e),b()):a},d.range=function(a){return arguments.length?(f=a,b()):f},d.quantiles=function(){return h},d.invertExtent=function(b){return b=f.indexOf(b),0>b?[0/0,0/0]:[0<b?h[b-1]:a[0],b<h.length?h[b]:a[a.length-1]]},d.copy=function(){return Gf(a,f)},b()}function Hf(a,f,b){function d(f){return b[Math.max(0,Math.min(g,Math.floor(h*(f-a))))]}function e(){return h=b.length/(f-a),g=b.length-1,d}var h,
g;return d.domain=function(b){return arguments.length?(a=+b[0],f=+b[b.length-1],e()):[a,f]},d.range=function(a){return arguments.length?(b=a,e()):b},d.invertExtent=function(f){return f=b.indexOf(f),f=0>f?0/0:f/h+a,[f,f+1/h]},d.copy=function(){return Hf(a,f,b)},e()}function If(a,f){function b(d){return d>=d?f[s.bisect(a,d)]:void 0}return b.domain=function(f){return arguments.length?(a=f,b):a},b.range=function(a){return arguments.length?(f=a,b):f},b.invertExtent=function(b){return b=f.indexOf(b),[a[b-
1],a[b]]},b.copy=function(){return If(a,f)},b}function Jf(a){function f(a){return+a}return f.invert=f,f.domain=f.range=function(b){return arguments.length?(a=b.map(f),f):a},f.ticks=function(f){return s.range.apply(s,Na(a,f))},f.tickFormat=function(f,b){return rd(a,f,b)},f.copy=function(){return Jf(a)},f}function Vh(a){return a.innerRadius}function Wh(a){return a.outerRadius}function Kf(a){return a.startAngle}function Lf(a){return a.endAngle}function Mf(a){function f(f){function g(){n.push("M",h(a(p),
k))}for(var m,n=[],p=[],q=-1,s=f.length,T=L(b),r=L(d);++q<s;)e.call(this,m=f[q],q)?p.push([+T.call(this,m,q),+r.call(this,m,q)]):p.length&&(g(),p=[]);return p.length&&g(),n.length?n.join(""):null}var b=fb,d=ub,e=eb,h=ga,g=h.key,k=.7;return f.x=function(a){return arguments.length?(b=a,f):b},f.y=function(a){return arguments.length?(d=a,f):d},f.defined=function(a){return arguments.length?(e=a,f):e},f.interpolate=function(a){return arguments.length?(g="function"==typeof a?h=a:(h=td.get(a)||ga).key,f):
g},f.tension=function(a){return arguments.length?(k=a,f):k},f}function ga(a){return a.join("L")}function ud(a){for(var f=0,b=a.length,d=a[0],e=[d[0],",",d[1]];++f<b;)e.push("V",(d=a[f])[1],"H",d[0]);return e.join("")}function vd(a){for(var f=0,b=a.length,d=a[0],e=[d[0],",",d[1]];++f<b;)e.push("H",(d=a[f])[0],"V",d[1]);return e.join("")}function ic(a,f){if(1>f.length||a.length!=f.length&&a.length!=f.length+2)return ga(a);var b=a.length!=f.length,d="",e=a[0],h=a[1],g=f[0],k=g,m=1;if(b&&(d+="Q"+(h[0]-
2*g[0]/3)+","+(h[1]-2*g[1]/3)+","+h[0]+","+h[1],e=a[1],m=2),1<f.length)for(k=f[1],h=a[m],m++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(h[0]-k[0])+","+(h[1]-k[1])+","+h[0]+","+h[1],e=2;e<f.length;e++,m++)h=a[m],k=f[e],d+="S"+(h[0]-k[0])+","+(h[1]-k[1])+","+h[0]+","+h[1];b&&(b=a[m],d+="Q"+(h[0]+2*k[0]/3)+","+(h[1]+2*k[1]/3)+","+b[0]+","+b[1]);return d}function wd(a,f){for(var b,d=[],e=(1-f)/2,h=a[0],g=a[1],k=1,m=a.length;++k<m;)b=h,h=g,g=a[k],d.push([e*(g[0]-b[0]),e*(g[1]-b[1])]);return d}function Nf(a){if(3>
a.length)return ga(a);var f=1,b=a.length,d=a[0],e=d[0],h=d[1],g=[e,e,e,(d=a[1])[0]],k=[h,h,h,d[1]],e=[e,",",h,"L",ja(Oa,g),",",ja(Oa,k)];for(a.push(a[b-1]);++f<=b;)d=a[f],g.shift(),g.push(d[0]),k.shift(),k.push(d[1]),xd(e,g,k);return a.pop(),e.push("L",d),e.join("")}function ja(a,f){return a[0]*f[0]+a[1]*f[1]+a[2]*f[2]+a[3]*f[3]}function xd(a,f,b){a.push("C",ja(Of,f),",",ja(Of,b),",",ja(Pf,f),",",ja(Pf,b),",",ja(Oa,f),",",ja(Oa,b))}function yd(a,f){return(f[1]-a[1])/(f[0]-a[0])}function Qf(a){for(var f,
b,d,e=-1,h=a.length;++e<h;)f=a[e],b=f[0],d=f[1]+Xa,f[0]=b*Math.cos(d),f[1]=b*Math.sin(d);return a}function Rf(a){function f(f){function m(){t.push("M",k(a(K),q),p,n(a(w.reverse()),q),"Z")}for(var s,r,nb,t=[],w=[],K=[],v=-1,x=f.length,sa=L(b),y=L(e),D=b===d?function(){return r}:L(d),H=e===h?function(){return nb}:L(h);++v<x;)g.call(this,s=f[v],v)?(w.push([r=+sa.call(this,s,v),nb=+y.call(this,s,v)]),K.push([+D.call(this,s,v),+H.call(this,s,v)])):w.length&&(m(),w=[],K=[]);return w.length&&m(),t.length?
t.join(""):null}var b=fb,d=fb,e=0,h=ub,g=eb,k=ga,m=k.key,n=k,p="L",q=.7;return f.x=function(a){return arguments.length?(b=d=a,f):d},f.x0=function(a){return arguments.length?(b=a,f):b},f.x1=function(a){return arguments.length?(d=a,f):d},f.y=function(a){return arguments.length?(e=h=a,f):h},f.y0=function(a){return arguments.length?(e=a,f):e},f.y1=function(a){return arguments.length?(h=a,f):h},f.defined=function(a){return arguments.length?(g=a,f):g},f.interpolate=function(a){return arguments.length?(m=
"function"==typeof a?k=a:(k=td.get(a)||ga).key,n=k.reverse||k,p=k.closed?"M":"L",f):m},f.tension=function(a){return arguments.length?(q=a,f):q},f}function Xh(a){return a.radius}function Sf(a){return[a.x,a.y]}function Yh(a){return function(){var f=a.apply(this,arguments),b=f[0],f=f[1]+Xa;return[b*Math.cos(f),b*Math.sin(f)]}}function Zh(){return 64}function $h(){return"circle"}function Tf(a){a=Math.sqrt(a/G);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function Cb(a,f){return Eb(a,
U),a.id=f,a}function zd(a,f,b,d){var e=a.id;return wa(a,"function"==typeof b?function(a,h,g){a.__transition__[e].tween.set(f,d(b.call(a,a.__data__,h,g)))}:(b=d(b),function(a){a.__transition__[e].tween.set(f,b)}))}function ai(a){return null==a&&(a=""),function(){this.textContent=a}}function jc(a,f,b,d){var e=a.__transition__||(a.__transition__={active:0,count:0}),g=e[b];if(!g){var k=d.time,g=e[b]={tween:new h,time:k,ease:d.ease,delay:d.delay,duration:d.duration};++e.count;s.timer(function(d){function h(d){return e.active>
b?z():(e.active=b,g.event&&g.event.start.call(a,n,f),g.tween.forEach(function(b,d){(d=d.call(a,n,f))&&w.push(d)}),s.timer(function(){return t.c=m(d||1)?eb:m,1},0,k),void 0)}function m(d){if(e.active!==b)return z();d/=r;for(var h=p(d),k=w.length;0<k;)w[--k].call(a,h);return 1<=d?(g.event&&g.event.end.call(a,n,f),z()):void 0}function z(){return--e.count?delete e[b]:delete a.__transition__,1}var n=a.__data__,p=g.ease,q=g.delay,r=g.duration,t=za,w=[];return t.t=q+k,d>=q?h(d-q):(t.c=h,void 0)},0,k)}}function Uf(a,
f){a.attr("transform",function(a){return"translate("+f(a)+",0)"})}function Vf(a,f){a.attr("transform",function(a){return"translate(0,"+f(a)+")"})}function Ad(a){return a.toISOString()}function Bd(a,f,b){function d(f){return a(f)}function e(a,b){var d=(a[1]-a[0])/b,l=s.bisect(kc,d);return l==kc.length?[f.year,Na(a.map(function(a){return a/31536E6}),b)[2]]:l?f[d/kc[l-1]<kc[l]/d?l-1:l]:[bi,Na(a,b)[2]]}return d.invert=function(f){return Ya(a.invert(f))},d.domain=function(f){return arguments.length?(a.domain(f),
d):a.domain().map(Ya)},d.nice=function(a,f){function b(d){return!isNaN(d)&&!a.range(d,Ya(+d+1),f).length}var l=d.domain(),h=kb(l),h=null==a?e(h,10):"number"==typeof a&&e(h,a);return h&&(a=h[0],f=h[1]),d.domain(fc(l,1<f?{floor:function(f){for(;b(f=a.floor(f));)f=Ya(f-1);return f},ceil:function(f){for(;b(f=a.ceil(f));)f=Ya(+f+1);return f}}:a))},d.ticks=function(a,f){var b=kb(d.domain()),l=null==a?e(b,10):"number"==typeof a?e(b,a):!a.range&&[{range:a},f];return l&&(a=l[0],f=l[1]),a.range(b[0],Ya(+b[1]+
1),1>f?1:f)},d.tickFormat=function(){return b},d.copy=function(){return Bd(a.copy(),f,b)},sd(d,a)}function Ya(a){return new Date(a)}function ci(a){return JSON.parse(a.responseText)}function di(a){var f=pa.createRange();return f.selectNode(pa.body),f.createContextualFragment(a.responseText)}var s={version:"3.4.12"};Date.now||(Date.now=function(){return+new Date});var Wf=[].slice,Ga=function(a){return Wf.call(a)},pa=document,ya=pa.documentElement,aa=window;try{Ga(ya.childNodes)[0].nodeType}catch(Di){Ga=
function(a){for(var f=a.length,b=Array(f);f--;)b[f]=a[f];return b}}try{pa.createElement("div").style.setProperty("opacity",0,"")}catch(Ei){var lc=aa.Element.prototype,ei=lc.setAttribute,fi=lc.setAttributeNS,Xf=aa.CSSStyleDeclaration.prototype,gi=Xf.setProperty;lc.setAttribute=function(a,f){ei.call(this,a,f+"")};lc.setAttributeNS=function(a,f,b){fi.call(this,a,f,b+"")};Xf.setProperty=function(a,f,b){gi.call(this,a,f+"",b)}}s.ascending=e;s.descending=function(a,f){return a>f?-1:f>a?1:f>=a?0:0/0};s.min=
function(a,f){var b,d,e=-1,h=a.length;if(1===arguments.length){for(;++e<h&&!(null!=(b=a[e])&&b>=b);)b=void 0;for(;++e<h;)null!=(d=a[e])&&b>d&&(b=d)}else{for(;++e<h&&!(null!=(b=f.call(a,a[e],e))&&b>=b);)b=void 0;for(;++e<h;)null!=(d=f.call(a,a[e],e))&&b>d&&(b=d)}return b};s.max=function(a,f){var b,d,e=-1,h=a.length;if(1===arguments.length){for(;++e<h&&!(null!=(b=a[e])&&b>=b);)b=void 0;for(;++e<h;)null!=(d=a[e])&&d>b&&(b=d)}else{for(;++e<h&&!(null!=(b=f.call(a,a[e],e))&&b>=b);)b=void 0;for(;++e<h;)null!=
(d=f.call(a,a[e],e))&&d>b&&(b=d)}return b};s.extent=function(a,f){var b,d,e,h=-1,g=a.length;if(1===arguments.length){for(;++h<g&&!(null!=(b=e=a[h])&&b>=b);)b=e=void 0;for(;++h<g;)null!=(d=a[h])&&(b>d&&(b=d),d>e&&(e=d))}else{for(;++h<g&&!(null!=(b=e=f.call(a,a[h],h))&&b>=b);)b=void 0;for(;++h<g;)null!=(d=f.call(a,a[h],h))&&(b>d&&(b=d),d>e&&(e=d))}return[b,e]};s.sum=function(a,f){var b,d=0,e=a.length,h=-1;if(1===arguments.length)for(;++h<e;)isNaN(b=+a[h])||(d+=b);else for(;++h<e;)isNaN(b=+f.call(a,
a[h],h))||(d+=b);return d};s.mean=function(a,f){var b,d=0,e=a.length,h=-1,g=e;if(1===arguments.length)for(;++h<e;)k(b=a[h])?d+=b:--g;else for(;++h<e;)k(b=f.call(a,a[h],h))?d+=b:--g;return g?d/g:void 0};s.quantile=function(a,f){var b=(a.length-1)*f+1,d=Math.floor(b),e=+a[d-1];return(b-=d)?e+b*(a[d]-e):e};s.median=function(a,f){return 1<arguments.length&&(a=a.map(f)),a=a.filter(k),a.length?s.quantile(a.sort(e),.5):void 0};var Yf=d(e);s.bisectLeft=Yf.left;s.bisect=s.bisectRight=Yf.right;s.bisector=function(a){return d(1===
a.length?function(f,b){return e(a(f),b)}:a)};s.shuffle=function(a){for(var f,b,d=a.length;d;)b=0|Math.random()*d--,f=a[d],a[d]=a[b],a[b]=f;return a};s.permute=function(a,f){for(var b=f.length,d=Array(b);b--;)d[b]=a[f[b]];return d};s.pairs=function(a){for(var f=0,b=a.length-1,d=a[0],e=Array(0>b?0:b);b>f;)e[f]=[d,d=a[++f]];return e};s.zip=function(){if(!(d=arguments.length))return[];for(var a=-1,f=s.min(arguments,g),b=Array(f);++a<f;)for(var d,e=-1,h=b[a]=Array(d);++e<d;)h[e]=arguments[e][a];return b};
s.transpose=function(a){return s.zip.apply(s,a)};s.keys=function(a){var f=[],b;for(b in a)f.push(b);return f};s.values=function(a){var f=[],b;for(b in a)f.push(a[b]);return f};s.entries=function(a){var f=[],b;for(b in a)f.push({key:b,value:a[b]});return f};s.merge=function(a){var f,b,d,e=a.length;f=-1;for(var h=0;++f<e;)h+=a[f].length;for(b=Array(h);0<=--e;)for(d=a[e],f=d.length;0<=--f;)b[--h]=d[f];return b};var J=Math.abs;s.range=function(a,f,b){if(3>arguments.length&&(b=1,2>arguments.length&&(f=
a,a=0)),1/0===(f-a)/b)throw Error("infinite range");var d,e=[],h;d=J(b);for(h=1;d*h%1;)h*=10;var g=-1;if(a*=h,f*=h,b*=h,0>b)for(;(d=a+b*++g)>f;)e.push(d/h);else for(;(d=a+b*++g)<f;)e.push(d/h);return e};s.map=function(a){var f=new h;if(a instanceof h)a.forEach(function(a,b){f.set(a,b)});else for(var b in a)f.set(b,a[b]);return f};b(h,{has:m,get:function(a){return this[Pa+a]},set:function(a,f){return this[Pa+a]=f},remove:function(a){return a=Pa+a,a in this&&delete this[a]},keys:p,values:function(){var a=
[];return this.forEach(function(f,b){a.push(b)}),a},entries:function(){var a=[];return this.forEach(function(f,b){a.push({key:f,value:b})}),a},size:n,empty:q,forEach:function(a){for(var f in this)f.charCodeAt(0)===Db&&a.call(this,f.slice(1),this[f])}});var Pa="\x00",Db=Pa.charCodeAt(0);s.nest=function(){function a(f,k,m){if(m>=g.length)return d?d.call(e,k):b?k.sort(b):k;for(var n,p,q,s,r=-1,t=k.length,T=g[m++],w=new h;++r<t;)(s=w.get(n=T(p=k[r])))?s.push(p):w.set(n,[p]);return f?(p=f(),q=function(b,
d){p.set(b,a(f,d,m))}):(p={},q=function(b,d){p[b]=a(f,d,m)}),w.forEach(q),p}function f(a,b){if(b>=g.length)return a;var d=[],e=k[b++];return a.forEach(function(a,e){d.push({key:a,values:f(e,b)})}),e?d.sort(function(a,f){return e(a.key,f.key)}):d}var b,d,e={},g=[],k=[];return e.map=function(f,b){return a(b,f,0)},e.entries=function(b){return f(a(s.map,b,0),0)},e.key=function(a){return g.push(a),e},e.sortKeys=function(a){return k[g.length-1]=a,e},e.sortValues=function(a){return b=a,e},e.rollup=function(a){return d=
a,e},e};s.set=function(a){var f=new r;if(a)for(var b=0,d=a.length;d>b;++b)f.add(a[b]);return f};b(r,{has:m,add:function(a){return this[Pa+a]=!0,a},remove:function(a){return a=Pa+a,a in this&&delete this[a]},values:p,size:n,empty:q,forEach:function(a){for(var f in this)f.charCodeAt(0)===Db&&a.call(this,f.slice(1))}});s.behavior={};s.rebind=function(a,f){for(var b,d=1,e=arguments.length;++d<e;)a[b=arguments[d]]=t(a,f,f[b]);return a};var Sd="webkit ms moz Moz o O".split(" ");s.dispatch=function(){for(var a=
new w,f=-1,b=arguments.length;++f<b;)a[arguments[f]]=y(a);return a};w.prototype.on=function(a,f){var b=a.indexOf("."),d="";if(0<=b&&(d=a.slice(b+1),a=a.slice(0,b)),a)return 2>arguments.length?this[a].on(d):this[a].on(d,f);if(2===arguments.length){if(null==f)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}};s.event=null;s.requote=function(a){return a.replace(hi,"\\$&")};var hi=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Eb={}.__proto__?function(a,f){a.__proto__=f}:function(a,f){for(var b in f)a[b]=
f[b]},Bc=function(a,f){return f.querySelector(a)},Cc=function(a,f){return f.querySelectorAll(a)},ii=ya.matches||ya[x(ya,"matchesSelector")],Td=function(a,f){return ii.call(a,f)};"function"==typeof Sizzle&&(Bc=function(a,f){return Sizzle(a,f)[0]||null},Cc=Sizzle,Td=Sizzle.matchesSelector);s.selection=function(){return Zf};var M=s.selection.prototype=[];M.select=function(a){var f,b,d,e,h=[];a=Q(a);for(var g=-1,k=this.length;++g<k;){h.push(f=[]);f.parentNode=(d=this[g]).parentNode;for(var m=-1,n=d.length;++m<
n;)(e=d[m])?(f.push(b=a.call(e,e.__data__,m,g)),b&&"__data__"in e&&(b.__data__=e.__data__)):f.push(null)}return F(h)};M.selectAll=function(a){var f,b,d=[];a=Jd(a);for(var e=-1,h=this.length;++e<h;)for(var g=this[e],k=-1,m=g.length;++k<m;)(b=g[k])&&(d.push(f=Ga(a.call(b,b.__data__,k,e))),f.parentNode=b);return F(d)};var Cd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};
s.ns={prefix:Cd,qualify:function(a){var f=a.indexOf(":"),b=a;return 0<=f&&(b=a.slice(0,f),a=a.slice(f+1)),Cd.hasOwnProperty(b)?{space:Cd[b],local:a}:a}};M.attr=function(a,f){if(2>arguments.length){if("string"==typeof a){var b=this.node();return a=s.ns.qualify(a),a.local?b.getAttributeNS(a.space,a.local):b.getAttribute(a)}for(f in a)this.each(Kd(f,a[f]));return this}return this.each(Kd(a,f))};M.classed=function(a,f){if(2>arguments.length){if("string"==typeof a){var b=this.node(),d=(a=(a+"").trim().split(/^|\s+/)).length,
e=-1;if(f=b.classList)for(;++e<d;){if(!f.contains(a[e]))return!1}else for(f=b.getAttribute("class");++e<d;)if(!Md(a[e]).test(f))return!1;return!0}for(f in a)this.each(Nd(f,a[f]));return this}return this.each(Nd(a,f))};M.style=function(a,f,b){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(f="");for(b in a)this.each(Od(b,a[b],f));return this}if(2>d)return aa.getComputedStyle(this.node(),null).getPropertyValue(a);b=""}return this.each(Od(a,f,b))};M.property=function(a,f){if(2>arguments.length){if("string"==
typeof a)return this.node()[a];for(f in a)this.each(Pd(f,a[f]));return this}return this.each(Pd(a,f))};M.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var f=a.apply(this,arguments);this.textContent=null==f?"":f}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};M.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var f=a.apply(this,arguments);this.innerHTML=null==f?"":f}:null==a?function(){this.innerHTML=
""}:function(){this.innerHTML=a}):this.node().innerHTML};M.append=function(a){return a=Qd(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})};M.insert=function(a,f){return a=Qd(a),f=Q(f),this.select(function(){return this.insertBefore(a.apply(this,arguments),f.apply(this,arguments)||null)})};M.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};M.data=function(a,f){function b(a,d){var e,l,g,k=a.length,u=d.length,z=Math.min(k,u),q=
Array(u),B=Array(u),s=Array(k);if(f){var r=new h,t=new h,T=[];for(e=-1;++e<k;)z=f.call(l=a[e],l.__data__,e),r.has(z)?s[e]=l:r.set(z,l),T.push(z);for(e=-1;++e<u;)z=f.call(d,g=d[e],e),(l=r.get(z))?(q[e]=l,l.__data__=g):t.has(z)||(B[e]={__data__:g}),t.set(z,g),r.remove(z);for(e=-1;++e<k;)r.has(T[e])&&(s[e]=a[e])}else{for(e=-1;++e<z;)l=a[e],g=d[e],l?(l.__data__=g,q[e]=l):B[e]={__data__:g};for(;u>e;++e)B[e]={__data__:d[e]};for(;k>e;++e)s[e]=a[e]}B.update=q;B.parentNode=q.parentNode=s.parentNode=a.parentNode;
m.push(B);n.push(q);p.push(s)}var d,e,g=-1,k=this.length;if(!arguments.length){for(a=Array(k=(d=this[0]).length);++g<k;)(e=d[g])&&(a[g]=e.__data__);return a}var m=Ud([]),n=F([]),p=F([]);if("function"==typeof a)for(;++g<k;)b(d=this[g],a.call(d,d.parentNode.__data__,g));else for(;++g<k;)b(d=this[g],a);return n.enter=function(){return m},n.exit=function(){return p},n};M.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};M.filter=function(a){var f,b,d,e=[];
"function"!=typeof a&&(a=Rd(a));for(var h=0,g=this.length;g>h;h++){e.push(f=[]);f.parentNode=(b=this[h]).parentNode;for(var k=0,m=b.length;m>k;k++)(d=b[k])&&a.call(d,d.__data__,k,h)&&f.push(d)}return F(e)};M.order=function(){for(var a=-1,f=this.length;++a<f;)for(var b,d=this[a],e=d.length-1,h=d[e];0<=--e;)(b=d[e])&&(h&&h!==b.nextSibling&&h.parentNode.insertBefore(b,h),h=b);return this};M.sort=function(a){a=rg.apply(this,arguments);for(var f=-1,b=this.length;++f<b;)this[f].sort(a);return this.order()};
M.each=function(a){return wa(this,function(f,b,d){a.call(f,f.__data__,b,d)})};M.call=function(a){var f=Ga(arguments);return a.apply(f[0]=this,f),this};M.empty=function(){return!this.node()};M.node=function(){for(var a=0,f=this.length;f>a;a++)for(var b=this[a],d=0,e=b.length;e>d;d++){var h=b[d];if(h)return h}return null};M.size=function(){var a=0;return wa(this,function(){++a}),a};var xa=[];s.selection.enter=Ud;s.selection.enter.prototype=xa;xa.append=M.append;xa.empty=M.empty;xa.node=M.node;xa.call=
M.call;xa.size=M.size;xa.select=function(a){for(var f,b,d,e,h,g=[],k=-1,m=this.length;++k<m;){d=(e=this[k]).update;g.push(f=[]);f.parentNode=e.parentNode;for(var n=-1,p=e.length;++n<p;)(h=e[n])?(f.push(d[n]=b=a.call(e.parentNode,h.__data__,n,k)),b.__data__=h.__data__):f.push(null)}return F(g)};xa.insert=function(a,f){return 2>arguments.length&&(f=sg(this)),M.insert.call(this,a,f)};M.transition=function(){for(var a,f,b=Za||++$f,d=[],e=mc||{time:Date.now(),ease:mh,delay:0,duration:250},h=-1,g=this.length;++h<
g;){d.push(a=[]);for(var k=this[h],m=-1,n=k.length;++m<n;)(f=k[m])&&jc(f,m,b,e),a.push(f)}return Cb(d,b)};M.interrupt=function(){return this.each(Fb)};s.select=function(a){a=["string"==typeof a?Bc(a,pa):a];return a.parentNode=ya,F([a])};s.selectAll=function(a){a=Ga("string"==typeof a?Cc(a,pa):a);return a.parentNode=ya,F([a])};var Zf=s.select(ya);M.on=function(a,f,b){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(f=!1);for(b in a)this.each(Vd(b,a[b],f));return this}if(2>d)return(d=this.node()["__on"+
a])&&d._;b=!1}return this.each(Vd(a,f,b))};var Dc=s.map({mouseenter:"mouseover",mouseleave:"mouseout"});Dc.forEach(function(a){"on"+a in pa&&Dc.remove(a)});var ob="onselectstart"in pa?null:x(ya.style,"userSelect"),ug=0;s.mouse=function(a){return Ec(a,D())};var Fc=/WebKit/.test(aa.navigator.userAgent)?-1:0;s.touch=function(a,f,b){if(3>arguments.length&&(b=f,f=D().changedTouches),f)for(var d,e=0,h=f.length;h>e;++e)if((d=f[e]).identifier===b)return Ec(a,d)};s.behavior.drag=function(){function a(){this.on("mousedown.drag",
e).on("touchstart.drag",h)}function f(a,f,e,h,g){return function(){var k,m=s.event.target,u=this.parentNode,n=b.of(this,arguments),p=0,q=a(),B=".drag"+(null==q?"":"-"+q),r=s.select(e()).on(h+B,function(){var a,b,d=f(u,q);d&&(a=d[0]-w[0],b=d[1]-w[1],p=p|a|b,w=d,n({type:"drag",x:d[0]+k[0],y:d[1]+k[1],dx:a,dy:b}))}).on(g+B,function(){f(u,q)&&(r.on(h+B,null).on(g+B,null),t(p&&s.event.target===m),n({type:"dragend"}))}),t=Gb(),w=f(u,q);d?(k=d.apply(this,arguments),k=[k.x-w[0],k.y-w[1]]):k=[0,0];n({type:"dragstart"})}}
var b=qa(a,"drag","dragstart","dragend"),d=null,e=f(v,s.mouse,xg,"mousemove","mouseup"),h=f(vg,s.touch,wg,"touchmove","touchend");return a.origin=function(f){return arguments.length?(d=f,a):d},s.rebind(a,b,"on")};s.touches=function(a,f){return 2>arguments.length&&(f=D().touches),f?Ga(f).map(function(f){var b=Ec(a,f);return b.identifier=f.identifier,b}):[]};var G=Math.PI,fa=2*G,W=G/2,C=1E-6,ed=C*C,E=G/180,N=180/G,nc=Math.SQRT2;s.interpolateZoom=function(a,f){function b(a){var f=a*t;if(r){a=Yd(s);var l=
h/(2*p),g,n=nc*f+s;g=((n=Math.exp(2*n))-1)/(n+1);g*=a;var q=s,n=((q=Math.exp(q))-1/q)/2,l=l*(g-n);return[d+l*k,e+l*m,h*a/Yd(nc*f+s)]}return[d+a*k,e+a*m,h*Math.exp(nc*f)]}var d=a[0],e=a[1],h=a[2],g=f[2],k=f[0]-d,m=f[1]-e,n=k*k+m*m,p=Math.sqrt(n),q=(g*g-h*h+4*n)/(4*h*p),n=(g*g-h*h-4*n)/(4*g*p),s=Math.log(Math.sqrt(q*q+1)-q),r=Math.log(Math.sqrt(n*n+1)-n)-s,t=(r||Math.log(g/h))/nc;return b.duration=1E3*t,b};s.behavior.zoom=function(){function a(a){a.on(D,m).on(ji+".zoom",p).on("dblclick.zoom",q).on(C,
n)}function f(a){return[(a[0]-y.x)/y.k,(a[1]-y.y)/y.k]}function b(a){y.k=Math.max(Ia[0],Math.min(Ia[1],a))}function d(a,f){f=[f[0]*y.k+y.x,f[1]*y.k+y.y];y.x+=a[0]-f[0];y.y+=a[1]-f[1]}function e(){I&&I.domain(X.range().map(function(a){return(a-y.x)/y.k}).map(X.invert));O&&O.domain(K.range().map(function(a){return(a-y.y)/y.k}).map(K.invert))}function h(a){a({type:"zoomstart"})}function g(a){e();a({type:"zoom",scale:y.k,translate:[y.x,y.y]})}function k(a){a({type:"zoomend"})}function m(){var a=this,
b=s.event.target,e=E.of(a,arguments),l=0,n=s.select(aa).on(F,function(){l=1;d(s.mouse(a),p);g(e)}).on(A,function(){n.on(F,null).on(A,null);q(l&&s.event.target===b);k(e)}),p=f(s.mouse(a)),q=Gb();Fb.call(a);h(e)}function n(){function a(){var b=s.touches(r);return B=y.k,b.forEach(function(a){a.identifier in w&&(w[a.identifier]=f(a))}),b}function e(){var f=s.event.target;s.select(f).on(ka,p).on(v,q);Ha.push(f);for(var f=s.event.changedTouches,h=0,k=f.length;k>h;++h)w[f[h].identifier]=null;k=a();h=Date.now();
1===k.length?(500>h-x&&(f=k[0],k=w[f.identifier],b(2*y.k),d(f,k),H(),g(t)),x=h):1<k.length&&(f=k[0],k=k[1],h=f[0]-k[0],f=f[1]-k[1],S=h*h+f*f)}function p(){for(var a,f,e,h,k=s.touches(r),m=0,u=k.length;u>m;++m,h=null)if(e=k[m],h=w[e.identifier]){if(f)break;a=e;f=h}if(h){var n=(n=e[0]-a[0])*n+(n=e[1]-a[1])*n,k=S&&Math.sqrt(n/S);a=[(a[0]+e[0])/2,(a[1]+e[1])/2];f=[(f[0]+h[0])/2,(f[1]+h[1])/2];b(k*B)}x=null;d(a,f);g(t)}function q(){if(s.event.touches.length){for(var f=s.event.changedTouches,b=0,d=f.length;d>
b;++b)delete w[f[b].identifier];for(var e in w)return void a()}s.selectAll(Ha).on(K,null);I.on(D,m).on(C,n);pb();k(t)}var B,r=this,t=E.of(r,arguments),w={},S=0,K=".zoom-"+s.event.changedTouches[0].identifier,ka="touchmove"+K,v="touchend"+K,Ha=[],I=s.select(r),pb=Gb();Fb.call(r);e();h(t);I.on(D,null).on(C,e)}function p(){var a=E.of(this,arguments);v?clearTimeout(v):(r=f(t=w||s.mouse(this)),Fb.call(this),h(a));v=setTimeout(function(){v=null;k(a)},50);H();b(Math.pow(2,.002*oc())*y.k);d(t,r);g(a)}function q(){var a=
E.of(this,arguments),e=s.mouse(this),m=f(e),n=Math.log(y.k)/Math.LN2;h(a);b(Math.pow(2,s.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1));d(e,m);g(a);k(a)}var r,t,w,v,x,X,I,K,O,y={x:0,y:0,k:1},sa=[960,500],Ia=ag,D="mousedown.zoom",F="mousemove.zoom",A="mouseup.zoom",C="touchstart.zoom",E=qa(a,"zoomstart","zoom","zoomend");return a.event=function(a){a.each(function(){var a=E.of(this,arguments),f=y;Za?s.select(this).transition().each("start.zoom",function(){y=this.__chart__||{x:0,y:0,k:1};h(a)}).tween("zoom:zoom",
function(){var b=sa[0],d=b/2,e=sa[1]/2,h=s.interpolateZoom([(d-y.x)/y.k,(e-y.y)/y.k,b/y.k],[(d-f.x)/f.k,(e-f.y)/f.k,b/f.k]);return function(f){f=h(f);var l=b/f[2];this.__chart__=y={x:d-f[0]*l,y:e-f[1]*l,k:l};g(a)}}).each("end.zoom",function(){k(a)}):(this.__chart__=y,h(a),g(a),k(a))})},a.translate=function(f){return arguments.length?(y={x:+f[0],y:+f[1],k:y.k},e(),a):[y.x,y.y]},a.scale=function(f){return arguments.length?(y={x:y.x,y:y.y,k:+f},e(),a):y.k},a.scaleExtent=function(f){return arguments.length?
(Ia=null==f?ag:[+f[0],+f[1]],a):Ia},a.center=function(f){return arguments.length?(w=f&&[+f[0],+f[1]],a):w},a.size=function(f){return arguments.length?(sa=f&&[+f[0],+f[1]],a):sa},a.x=function(f){return arguments.length?(I=f,X=f.copy(),y={x:0,y:0,k:1},a):I},a.y=function(f){return arguments.length?(O=f,K=f.copy(),y={x:0,y:0,k:1},a):O},s.rebind(a,E,"on")};var oc,ag=[0,1/0],ji="onwheel"in pa?(oc=function(){return-s.event.deltaY*(s.event.deltaMode?120:1)},"wheel"):"onmousewheel"in pa?(oc=function(){return s.event.wheelDelta},
"mousewheel"):(oc=function(){return-s.event.detail},"MozMousePixelScroll");s.color=Qa;Qa.prototype.toString=function(){return this.rgb()+""};s.hsl=ra;var Dd=ra.prototype=new Qa;Dd.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),new ra(this.h,this.s,this.l/a)};Dd.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ra(this.h,this.s,a*this.l)};Dd.rgb=function(){return Hc(this.h,this.s,this.l)};s.hcl=la;var Ed=la.prototype=new Qa;Ed.brighter=function(a){return new la(this.h,
this.c,Math.min(100,this.l+pc*(arguments.length?a:1)))};Ed.darker=function(a){return new la(this.h,this.c,Math.max(0,this.l-pc*(arguments.length?a:1)))};Ed.rgb=function(){return Ic(this.h,this.c,this.l).rgb()};s.lab=ma;var pc=18,ee=.95047,fe=1,ge=1.08883,Fd=ma.prototype=new Qa;Fd.brighter=function(a){return new ma(Math.min(100,this.l+pc*(arguments.length?a:1)),this.a,this.b)};Fd.darker=function(a){return new ma(Math.max(0,this.l-pc*(arguments.length?a:1)),this.a,this.b)};Fd.rgb=function(){return de(this.l,
this.a,this.b)};s.rgb=ba;var qc=ba.prototype=new Qa;qc.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var f=this.r,b=this.g,d=this.b;return f||b||d?(f&&30>f&&(f=30),b&&30>b&&(b=30),d&&30>d&&(d=30),new ba(Math.min(255,f/a),Math.min(255,b/a),Math.min(255,d/a))):new ba(30,30,30)};qc.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ba(a*this.r,a*this.g,a*this.b)};qc.hsl=function(){return ae(this.r,this.g,this.b)};qc.toString=function(){return"#"+ab(this.r)+ab(this.g)+ab(this.b)};
var Ib=s.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,
tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Ib.forEach(function(a,f){Ib.set(a,new ba(f>>16,255&f>>8,255&f))});s.functor=L;s.xhr=Oc(V);s.dsv=function(a,f){function b(a,h,l){3>arguments.length&&(l=h,h=null);var g=Jb(a,f,null==h?d:e(h),l);return g.row=function(a){return arguments.length?g.response(null==(h=a)?d:e(a)):h},g}function d(a){return b.parse(a.responseText)}function e(a){return function(f){return b.parse(f.responseText,
a)}}function h(f){return f.map(g).join(a)}function g(a){return k.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var k=new RegExp('["'+a+"\n]"),m=a.charCodeAt(0);return b.parse=function(a,f){var d;return b.parseRows(a,function(a,b){if(d)return d(a,b-1);var e=new Function("d","return {"+a.map(function(a,f){return JSON.stringify(a)+": d["+f+"]"}).join(",")+"}");d=f?function(a,b){return f(e(a),b)}:e})},b.parseRows=function(a,f){function b(){if(u>=k)return l;if(e)return e=!1,h;var f=u;if(34===a.charCodeAt(f)){for(var d=
f;d++<k;)if(34===a.charCodeAt(d)){if(34!==a.charCodeAt(d+1))break;++d}u=d+2;var g=a.charCodeAt(d+1);return 13===g?(e=!0,10===a.charCodeAt(d+2)&&++u):10===g&&(e=!0),a.slice(f+1,d).replace(/""/g,'"')}for(;k>u;){g=a.charCodeAt(u++);d=1;if(10===g)e=!0;else if(13===g)e=!0,10===a.charCodeAt(u)&&(++u,++d);else if(g!==m)continue;return a.slice(f,u-d)}return a.slice(f)}for(var d,e,h={},l={},g=[],k=a.length,u=0,n=0;(d=b())!==l;){for(var p=[];d!==h&&d!==l;)p.push(d),d=b();f&&!(p=f(p,n++))||g.push(p)}return g},
b.format=function(f){if(Array.isArray(f[0]))return b.formatRows(f);var d=new r,e=[];return f.forEach(function(a){for(var f in a)d.has(f)||e.push(d.add(f))}),[e.map(g).join(a)].concat(f.map(function(f){return e.map(function(a){return g(f[a])}).join(a)})).join("\n")},b.formatRows=function(a){return a.map(h).join("\n")},b};s.csv=s.dsv(",","text/csv");s.tsv=s.dsv("\t","text/tab-separated-values");var Mb,Nb,Lb,Kb,za,je=aa[x(aa,"requestAnimationFrame")]||function(a){setTimeout(a,17)};s.timer=function(a,
f,b){var d=arguments.length;2>d&&(f=0);3>d&&(b=Date.now());d={c:a,t:b+f,f:!1,n:null};Nb?Nb.n=d:Mb=d;Nb=d;Lb||(Kb=clearTimeout(Kb),Lb=1,je(Pc))};s.timer.flush=function(){he();ie()};s.round=function(a,f){return f?Math.round(a*(f=Math.pow(10,f)))/f:Math.round(a)};var ki="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,f){var b=Math.pow(10,3*J(8-f));return{scale:8<f?function(a){return a/b}:function(a){return a*b},symbol:a}});s.formatPrefix=function(a,f){var b=0;return a&&(0>a&&(a*=-1),
f&&(a=s.round(a,Qc(a,f))),b=1+Math.floor(1E-12+Math.log(a)/Math.LN10),b=Math.max(-24,Math.min(24,3*Math.floor((b-1)/3)))),ki[8+b/3]};var ke=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ag=s.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,f){return a.toPrecision(f)},e:function(a,f){return a.toExponential(f)},
f:function(a,f){return a.toFixed(f)},r:function(a,f){return(a=s.round(a,Qc(a,f))).toFixed(Math.max(0,Math.min(20,Qc(a*(1+1E-15),f))))}}),A=s.time={},Y=Date;Ba.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},
getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Fa.setUTCDate.apply(this._,arguments)},setDay:function(){Fa.setUTCDay.apply(this._,arguments)},setFullYear:function(){Fa.setUTCFullYear.apply(this._,arguments)},setHours:function(){Fa.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Fa.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Fa.setUTCMinutes.apply(this._,
arguments)},setMonth:function(){Fa.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Fa.setUTCSeconds.apply(this._,arguments)},setTime:function(){Fa.setTime.apply(this._,arguments)}};var Fa=Date.prototype;A.year=Ra(function(a){return a=A.day(a),a.setMonth(0,1),a},function(a,f){a.setFullYear(a.getFullYear()+f)},function(a){return a.getFullYear()});A.years=A.year.range;A.years.utc=A.year.utc.range;A.day=Ra(function(a){var f=new Y(2E3,0);return f.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),
f},function(a,f){a.setDate(a.getDate()+f)},function(a){return a.getDate()-1});A.days=A.day.range;A.days.utc=A.day.utc.range;A.dayOfYear=function(a){var f=A.year(a);return Math.floor((a-f-6E4*(a.getTimezoneOffset()-f.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(a,f){f=7-f;var b=A[a]=Ra(function(a){return(a=A.day(a)).setDate(a.getDate()-(a.getDay()+f)%7),a},function(a,f){a.setDate(a.getDate()+7*Math.floor(f))},function(a){var b=
A.year(a).getDay();return Math.floor((A.dayOfYear(a)+(b+f)%7)/7)-(b!==f)});A[a+"s"]=b.range;A[a+"s"].utc=b.utc.range;A[a+"OfYear"]=function(a){var b=A.year(a).getDay();return Math.floor((A.dayOfYear(a)+(b+f)%7)/7)}});A.week=A.sunday;A.weeks=A.sunday.range;A.weeks.utc=A.sunday.utc.range;A.weekOfYear=A.sundayOfYear;var le={"-":"",_:" ",0:"0"},P=/^\s*\d+/,oe=/^%/;s.locale=function(a){return{numberFormat:zg(a),timeFormat:Cg(a)}};var bg=s.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],
dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});s.format=bg.numberFormat;s.geo={};Sc.prototype={s:0,t:0,add:function(a){pe(a,this.t,rc);pe(rc.s,this.s,this);this.s?
this.t+=rc.t:this.s=rc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var rc=new Sc;s.geo.stream=function(a,f){a&&cg.hasOwnProperty(a.type)?cg[a.type](a,f):Rb(a,f)};var cg={Feature:function(a,f){Rb(a.geometry,f)},FeatureCollection:function(a,f){for(var b=a.features,d=-1,e=b.length;++d<e;)Rb(b[d].geometry,f)}},qe={Sphere:function(a,f){f.sphere()},Point:function(a,f){a=a.coordinates;f.point(a[0],a[1],a[2])},MultiPoint:function(a,f){for(var b=a.coordinates,d=-1,e=b.length;++d<
e;)a=b[d],f.point(a[0],a[1],a[2])},LineString:function(a,f){Tc(a.coordinates,f,0)},MultiLineString:function(a,f){for(var b=a.coordinates,d=-1,e=b.length;++d<e;)Tc(b[d],f,0)},Polygon:function(a,f){re(a.coordinates,f)},MultiPolygon:function(a,f){for(var b=a.coordinates,d=-1,e=b.length;++d<e;)re(b[d],f)},GeometryCollection:function(a,f){for(var b=a.geometries,d=-1,e=b.length;++d<e;)Rb(b[d],f)}};s.geo.area=function(a){return lb=0,s.geo.stream(a,ea),lb};var lb,Sa=new Sc,ea={sphere:function(){lb+=4*G},
point:v,lineStart:v,lineEnd:v,polygonStart:function(){Sa.reset();ea.lineStart=Rg},polygonEnd:function(){var a=2*Sa;lb+=0>a?4*G+a:a;ea.lineStart=ea.lineEnd=ea.point=v}};s.geo.bounds=function(){function a(a,f){K.push(O=[p=a,r=a]);q>f&&(q=f);f>t&&(t=f)}function f(f,b){var d=Ta([f*E,b*E]);if(y){var e=cb(y,d),e=cb([e[1],-e[0],0],e);Ub(e);var e=Vb(e),h=f-w,l=0<h?1:-1,g=e[0]*N*l,h=180<J(h);h^(g>l*w&&l*f>g)?(e=e[1]*N,e>t&&(t=e)):(g=(g+360)%360-180,h^(g>l*w&&l*f>g))?(e=-e[1]*N,q>e&&(q=e)):(q>b&&(q=b),b>t&&
(t=b));h?w>f?k(p,f)>k(p,r)&&(r=f):k(f,r)>k(p,r)&&(p=f):r>=p?(p>f&&(p=f),f>r&&(r=f)):f>w?k(p,f)>k(p,r)&&(r=f):k(f,r)>k(p,r)&&(p=f)}else a(f,b);y=d;w=f}function b(){D.point=f}function d(){O[0]=p;O[1]=r;D.point=a;y=null}function e(a,b){if(y){var d=a-w;I+=180<J(d)?d+(0<d?360:-360):d}else v=a,x=b;ea.point(a,b);f(a,b)}function h(){ea.lineStart()}function g(){e(v,x);ea.lineEnd();J(I)>C&&(p=-(r=180));O[0]=p;O[1]=r;y=null}function k(a,f){return 0>(f-=a)?f+360:f}function m(a,f){return a[0]-f[0]}function n(a,
f){return f[0]<=f[1]?f[0]<=a&&a<=f[1]:a<f[0]||f[1]<a}var p,q,r,t,w,v,x,y,I,K,O,D={point:a,lineStart:b,lineEnd:d,polygonStart:function(){D.point=e;D.lineStart=h;D.lineEnd=g;I=0;ea.polygonStart()},polygonEnd:function(){ea.polygonEnd();D.point=a;D.lineStart=b;D.lineEnd=d;0>Sa?(p=-(r=180),q=-(t=90)):I>C?t=90:-C>I&&(q=-90);O[0]=p;O[1]=r}};return function(a){t=r=-(p=q=1/0);K=[];s.geo.stream(a,D);if(a=K.length){K.sort(m);for(var f,b=1,d=K[0],e=[d];a>b;++b)f=K[b],n(f[0],d)||n(f[1],d)?(k(d[0],f[1])>k(d[0],
d[1])&&(d[1]=f[1]),k(f[0],d[1])>k(d[0],d[1])&&(d[0]=f[0])):e.push(d=f);var h,l=-1/0;a=e.length-1;b=0;for(d=e[a];a>=b;d=f,++b)f=e[b],(h=k(d[1],f[0]))>l&&(l=h,p=f[0],r=d[1])}return K=O=null,1/0===p||1/0===q?[[0/0,0/0],[0/0,0/0]]:[[p,q],[r,t]]}}();s.geo.centroid=function(a){rb=db=Ca=Da=ta=ha=ia=da=Ja=Ka=ua=0;s.geo.stream(a,na);a=Ja;var f=Ka,b=ua,d=a*a+f*f+b*b;return ed>d&&(a=ha,f=ia,b=da,C>db&&(a=Ca,f=Da,b=ta),d=a*a+f*f+b*b,ed>d)?[0/0,0/0]:[Math.atan2(f,a)*N,$a(b/Math.sqrt(d))*N]};var rb,db,Ca,Da,ta,
ha,ia,da,Ja,Ka,ua,na={sphere:v,point:Vc,lineStart:se,lineEnd:te,polygonStart:function(){na.lineStart=Sg},polygonEnd:function(){na.lineStart=se}},Je=we(eb,function(a){var f,b=0/0,d=0/0,e=0/0;return{lineStart:function(){a.lineStart();f=1},point:function(h,g){var k=0<h?G:-G,m=J(h-b);if(J(m-G)<C)a.point(b,d=0<(d+g)/2?W:-W),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(k,d),a.point(h,d),f=0;else if(e!==k&&m>=G){J(b-e)<C&&(b-=e*C);J(h-k)<C&&(h-=k*C);var m=b,n=d,p=h,q,r,s=Math.sin(m-p);d=J(s)>C?Math.atan((Math.sin(n)*
(r=Math.cos(g))*Math.sin(p)-Math.sin(g)*(q=Math.cos(n))*Math.sin(m))/(q*r*s)):(n+g)/2;a.point(e,d);a.lineEnd();a.lineStart();a.point(k,d);f=0}a.point(b=h,d=g);e=k},lineEnd:function(){a.lineEnd();b=d=0/0},clean:function(){return 2-f}}},function(a,f,b,d){null==a?(b*=W,d.point(-G,b),d.point(0,b),d.point(G,b),d.point(G,0),d.point(G,-b),d.point(0,-b),d.point(-G,-b),d.point(-G,0),d.point(-G,b)):J(a[0]-f[0])>C?(a=a[0]<f[0]?G:-G,b=b*a/2,d.point(-a,b),d.point(0,b),d.point(a,b)):d.point(f[0],f[1])},[-G,-G/
2]),Yb=1E9;s.geo.clipExtent=function(){var a,f,b,d,e,h,g={stream:function(a){return e&&(e.valid=!1),e=h(a),e.valid=!0,e},extent:function(k){return arguments.length?(h=ze(a=+k[0][0],f=+k[0][1],b=+k[1][0],d=+k[1][1]),e&&(e.valid=!1,e=null),g):[[a,f],[b,d]]}};return g.extent([[0,0],[960,500]])};(s.geo.conicEqualArea=function(){return Xc(Be)}).raw=Be;s.geo.albers=function(){return s.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};s.geo.albersUsa=function(){function a(a){var h=
a[0];a=a[1];return f=null,b(h,a),f||(d(h,a),f)||e(h,a),f}var f,b,d,e,h=s.geo.albers(),g=s.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),k=s.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),m={point:function(a,b){f=[a,b]}};return a.invert=function(a){var f=h.scale(),b=h.translate(),d=(a[0]-b[0])/f,f=(a[1]-b[1])/f;return(.12<=f&&.234>f&&-.425<=d&&-.214>d?g:.166<=f&&.234>f&&-.214<=d&&-.115>d?k:h).invert(a)},a.stream=function(a){var f=h.stream(a),b=
g.stream(a),d=k.stream(a);return{point:function(a,e){f.point(a,e);b.point(a,e);d.point(a,e)},sphere:function(){f.sphere();b.sphere();d.sphere()},lineStart:function(){f.lineStart();b.lineStart();d.lineStart()},lineEnd:function(){f.lineEnd();b.lineEnd();d.lineEnd()},polygonStart:function(){f.polygonStart();b.polygonStart();d.polygonStart()},polygonEnd:function(){f.polygonEnd();b.polygonEnd();d.polygonEnd()}}},a.precision=function(f){return arguments.length?(h.precision(f),g.precision(f),k.precision(f),
a):h.precision()},a.scale=function(f){return arguments.length?(h.scale(f),g.scale(.35*f),k.scale(f),a.translate(h.translate())):h.scale()},a.translate=function(f){if(!arguments.length)return h.translate();var n=h.scale(),p=+f[0],q=+f[1];return b=h.translate(f).clipExtent([[p-.455*n,q-.238*n],[p+.455*n,q+.238*n]]).stream(m).point,d=g.translate([p-.307*n,q+.201*n]).clipExtent([[p-.425*n+C,q+.12*n+C],[p-.214*n-C,q+.234*n-C]]).stream(m).point,e=k.translate([p-.205*n,q+.212*n]).clipExtent([[p-.214*n+C,
q+.166*n+C],[p-.115*n-C,q+.234*n-C]]).stream(m).point,a},a.scale(1070)};var sc,Zb,tc,uc,vc,wc,La={point:v,lineStart:v,lineEnd:v,polygonStart:function(){Zb=0;La.lineStart=Wg},polygonEnd:function(){La.lineStart=La.lineEnd=La.point=v;sc+=J(Zb/2)}},li={point:function(a,f){tc>a&&(tc=a);a>vc&&(vc=a);uc>f&&(uc=f);f>wc&&(wc=f)},lineStart:v,lineEnd:v,polygonStart:v,polygonEnd:v},oa={point:Ua,lineStart:De,lineEnd:Ee,polygonStart:function(){oa.lineStart=Yg},polygonEnd:function(){oa.point=Ua;oa.lineStart=De;
oa.lineEnd=Ee}};s.geo.path=function(){function a(a){return a&&("function"==typeof g&&e.pointRadius(+g.apply(this,arguments)),h&&h.valid||(h=d(e)),s.geo.stream(a,h)),e.result()}var f,b,d,e,h,g=4.5;return a.area=function(a){return sc=0,s.geo.stream(a,d(La)),sc},a.centroid=function(a){return Ca=Da=ta=ha=ia=da=Ja=Ka=ua=0,s.geo.stream(a,d(oa)),ua?[Ja/ua,Ka/ua]:da?[ha/da,ia/da]:ta?[Ca/ta,Da/ta]:[0/0,0/0]},a.bounds=function(a){return vc=wc=-(tc=uc=1/0),s.geo.stream(a,d(li)),[[tc,uc],[vc,wc]]},a.projection=
function(b){return arguments.length?(d=(f=b)?b.stream||$g(b):V,h=null,a):f},a.context=function(f){return arguments.length?(e=null==(b=f)?new Xg:new Zg(f),"function"!=typeof g&&e.pointRadius(g),h=null,a):b},a.pointRadius=function(f){return arguments.length?(g="function"==typeof f?f:(e.pointRadius(+f),+f),a):g},a.projection(s.geo.albersUsa()).context(null)};s.geo.transform=function(a){return{stream:function(f){f=new Ie(f);for(var b in a)f[b]=a[b];return f}}};Ie.prototype={point:function(a,f){this.stream.point(a,
f)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};s.geo.projection=Ma;s.geo.projectionMutator=Yc;(s.geo.equirectangular=function(){return Ma(sb)}).raw=sb.invert=sb;s.geo.rotation=function(a){function f(f){return f=a(f[0]*E,f[1]*E),f[0]*=N,f[1]*=N,f}return a=Zc(a[0]%360*E,a[1]*E,2<a.length?a[2]*E:0),f.invert=function(f){return f=
a.invert(f[0]*E,f[1]*E),f[0]*=N,f[1]*=N,f},f};Ke.invert=sb;s.geo.circle=function(){function a(){var a="function"==typeof d?d.apply(this,arguments):d,f=Zc(-a[0]*E,-a[1]*E,0).invert,e=[];return b(null,null,1,{point:function(a,b){e.push(a=f(a,b));a[0]*=N;a[1]*=N}}),{type:"Polygon",coordinates:[e]}}var f,b,d=[0,0],e=6;return a.origin=function(f){return arguments.length?(d=f,a):d},a.angle=function(d){return arguments.length?(b=Wc((f=+d)*E,e*E),a):f},a.precision=function(d){return arguments.length?(b=Wc(f*
E,(e=+d)*E),a):e},a.angle(90)};s.geo.distance=function(a,f){var b,d=(f[0]-a[0])*E,e=a[1]*E,h=f[1]*E,g=Math.sin(d),d=Math.cos(d),k=Math.sin(e),e=Math.cos(e),m=Math.sin(h),h=Math.cos(h);return Math.atan2(Math.sqrt((b=h*g)*b+(b=e*m-k*h*d)*b),k*m+e*h*d)};s.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:f()}}function f(){return s.range(Math.ceil(h/x)*x,e,x).map(r).concat(s.range(Math.ceil(n/y)*y,m,y).map(t)).concat(s.range(Math.ceil(d/w)*w,b,w).filter(function(a){return J(a%
x)>C}).map(p)).concat(s.range(Math.ceil(k/v)*v,g,v).filter(function(a){return J(a%y)>C}).map(q))}var b,d,e,h,g,k,m,n,p,q,r,t,w=10,v=w,x=90,y=360,I=2.5;return a.lines=function(){return f().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[r(h).concat(t(m).slice(1),r(e).reverse().slice(1),t(n).reverse().slice(1))]}},a.extent=function(f){return arguments.length?a.majorExtent(f).minorExtent(f):a.minorExtent()},a.majorExtent=function(f){return arguments.length?
(h=+f[0][0],e=+f[1][0],n=+f[0][1],m=+f[1][1],h>e&&(f=h,h=e,e=f),n>m&&(f=n,n=m,m=f),a.precision(I)):[[h,n],[e,m]]},a.minorExtent=function(f){return arguments.length?(d=+f[0][0],b=+f[1][0],k=+f[0][1],g=+f[1][1],d>b&&(f=d,d=b,b=f),k>g&&(f=k,k=g,g=f),a.precision(I)):[[d,k],[b,g]]},a.step=function(f){return arguments.length?a.majorStep(f).minorStep(f):a.minorStep()},a.majorStep=function(f){return arguments.length?(x=+f[0],y=+f[1],a):[x,y]},a.minorStep=function(f){return arguments.length?(w=+f[0],v=+f[1],
a):[w,v]},a.precision=function(f){return arguments.length?(I=+f,p=Pe(k,g,90),q=Qe(d,b,I),r=Pe(n,m,90),t=Qe(h,e,I),a):I},a.majorExtent([[-180,-90+C],[180,90-C]]).minorExtent([[-180,-80-C],[180,80+C]])};s.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[f||d.apply(this,arguments),b||e.apply(this,arguments)]}}var f,b,d=$c,e=ad;return a.distance=function(){return s.geo.distance(f||d.apply(this,arguments),b||e.apply(this,arguments))},a.source=function(b){return arguments.length?
(d=b,f="function"==typeof b?null:b,a):d},a.target=function(f){return arguments.length?(e=f,b="function"==typeof f?null:f,a):e},a.precision=function(){return arguments.length?a:0},a};s.geo.interpolate=function(a,f){return ah(a[0]*E,a[1]*E,f[0]*E,f[1]*E)};s.geo.length=function(a){return xc=0,s.geo.stream(a,mb),xc};var xc,mb={sphere:v,point:v,lineStart:function(){function a(a,e){var h=Math.sin(e*=E),g=Math.cos(e),k=J((a*=E)-f),m=Math.cos(k);xc+=Math.atan2(Math.sqrt((k=g*Math.sin(k))*k+(k=d*h-b*g*m)*
k),b*h+d*g*m);f=a;b=h;d=g}var f,b,d;mb.point=function(e,h){f=e*E;b=Math.sin(h*=E);d=Math.cos(h);mb.point=a};mb.lineEnd=function(){mb.point=mb.lineEnd=v}},lineEnd:v,polygonStart:v,polygonEnd:v},dg=tb(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(s.geo.azimuthalEqualArea=function(){return Ma(dg)}).raw=dg;var eg=tb(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},V);(s.geo.azimuthalEquidistant=function(){return Ma(eg)}).raw=eg;(s.geo.conicConformal=function(){return Xc(Re)}).raw=
Re;(s.geo.conicEquidistant=function(){return Xc(Se)}).raw=Se;var fg=tb(function(a){return 1/a},Math.atan);(s.geo.gnomonic=function(){return Ma(fg)}).raw=fg;$b.invert=function(a,f){return[a,2*Math.atan(Math.exp(f))-W]};(s.geo.mercator=function(){return Te($b)}).raw=$b;var gg=tb(function(){return 1},Math.asin);(s.geo.orthographic=function(){return Ma(gg)}).raw=gg;var hg=tb(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(s.geo.stereographic=function(){return Ma(hg)}).raw=hg;bd.invert=
function(a,f){return[-f,2*Math.atan(Math.exp(a))-W]};(s.geo.transverseMercator=function(){var a=Te(bd),f=a.center,b=a.rotate;return a.center=function(a){return a?f([-a[1],a[0]]):(a=f(),[a[1],-a[0]])},a.rotate=function(a){return a?b([a[0],a[1],2<a.length?a[2]+90:90]):(a=b(),[a[0],a[1],a[2]-90])},b([0,0,90])}).raw=bd;s.geom={};s.geom.hull=function(a){function f(a){if(3>a.length)return[];var f,e=L(b),h=L(d),g=a.length,k=[],m=[];for(f=0;g>f;f++)k.push([+e.call(this,a[f],f),+h.call(this,a[f],f),f]);k.sort(bh);
for(f=0;g>f;f++)m.push([k[f][0],-k[f][1]]);var e=Ue(k),m=Ue(m),h=m[0]===e[0],g=m[m.length-1]===e[e.length-1],n=[];for(f=e.length-1;0<=f;--f)n.push(a[k[e[f]][2]]);for(f=+h;f<m.length-g;++f)n.push(a[k[m[f]][2]]);return n}var b=fb,d=ub;return arguments.length?f(a):(f.x=function(a){return arguments.length?(b=a,f):b},f.y=function(a){return arguments.length?(d=a,f):d},f)};s.geom.polygon=function(a){return Eb(a,yc),a};var yc=s.geom.polygon.prototype=[];yc.area=function(){for(var a,f=-1,b=this.length,d=this[b-
1],e=0;++f<b;)a=d,d=this[f],e+=a[1]*d[0]-a[0]*d[1];return.5*e};yc.centroid=function(a){var f,b,d=-1,e=this.length,h=0,g=0,k=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++d<e;)f=k,k=this[d],b=f[0]*k[1]-k[0]*f[1],h+=(f[0]+k[0])*b,g+=(f[1]+k[1])*b;return[h*a,g*a]};yc.clip=function(a){for(var f,b,d,e,h,g,k=We(a),m=-1,n=this.length-We(this),p=this[n-1];++m<n;){f=a.slice();a.length=0;e=this[m];h=f[(d=f.length-k)-1];for(b=-1;++b<d;)g=f[b],cd(g,p,e)?(cd(h,p,e)||a.push(Ve(h,g,p,e)),a.push(g)):cd(h,
p,e)&&a.push(Ve(h,g,p,e)),h=g;k&&a.push(a[0]);p=e}return a};var jb,Va,hb,fd,vb,Ye=[],bf=[];$e.prototype.prepare=function(){for(var a,f=this.edges,b=f.length;b--;)a=f[b].edge,a.b&&a.a||f.splice(b,1);return f.sort(af),f.length};cc.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};gd.prototype={insert:function(a,f){var b,d,e;if(a){if(f.P=a,f.N=a.N,a.N&&(a.N.P=f),a.N=f,a.R){for(a=a.R;a.L;)a=a.L;a.L=
f}else a.R=f;b=a}else this._?(a=df(this._),f.P=null,f.N=a,a.P=a.L=f,b=a):(f.P=f.N=null,this._=f,b=null);f.L=f.R=null;f.U=b;f.C=!0;for(a=f;b&&b.C;)d=b.U,b===d.L?(e=d.R,e&&e.C?(b.C=e.C=!1,d.C=!0,a=d):(a===b.R&&(xb(this,b),a=b,b=a.U),b.C=!1,d.C=!0,yb(this,d))):(e=d.L,e&&e.C?(b.C=e.C=!1,d.C=!0,a=d):(a===b.L&&(yb(this,b),a=b,b=a.U),b.C=!1,d.C=!0,xb(this,d))),b=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var f,b,d,e=a.U,h=a.L,g=a.R;if(b=h?g?df(g):h:g,e?e.L===a?e.L=
b:e.R=b:this._=b,h&&g?(d=b.C,b.C=a.C,b.L=h,h.U=b,b!==g?(e=b.U,b.U=a.U,a=b.R,e.L=a,b.R=g,g.U=b):(b.U=e,e=b,a=b.R)):(d=a.C,a=b),a&&(a.U=e),!d){if(a&&a.C)return a.C=!1,void 0;do{if(a===this._)break;if(a===e.L){if(f=e.R,f.C&&(f.C=!1,e.C=!0,xb(this,e),f=e.R),f.L&&f.L.C||f.R&&f.R.C){f.R&&f.R.C||(f.L.C=!1,f.C=!0,yb(this,f),f=e.R);f.C=e.C;e.C=f.R.C=!1;xb(this,e);a=this._;break}}else if(f=e.L,f.C&&(f.C=!1,e.C=!0,yb(this,e),f=e.L),f.L&&f.L.C||f.R&&f.R.C){f.L&&f.L.C||(f.R.C=!1,f.C=!0,xb(this,f),f=e.L);f.C=e.C;
e.C=f.L.C=!1;yb(this,e);a=this._;break}f.C=!0;a=e;e=e.U}while(!a.C);a&&(a.C=!1)}}};s.geom.voronoi=function(a){function f(a){var f=Array(a.length),d=k[0][0],e=k[0][1],h=k[1][0],g=k[1][1];return hd(b(a),k).cells.forEach(function(b,l){var k=b.edges,m=b.site;(f[l]=k.length?k.map(function(a){a=a.start();return[a.x,a.y]}):m.x>=d&&m.x<=h&&m.y>=e&&m.y<=g?[[d,g],[h,g],[h,e],[d,e]]:[]).point=a[l]}),f}function b(a){return a.map(function(a,f){return{x:Math.round(h(a,f)/C)*C,y:Math.round(g(a,f)/C)*C,i:f}})}var d=
fb,e=ub,h=d,g=e,k=zc;return a?f(a):(f.links=function(a){return hd(b(a)).edges.filter(function(a){return a.l&&a.r}).map(function(f){return{source:a[f.l.i],target:a[f.r.i]}})},f.triangles=function(a){var f=[];return hd(b(a)).cells.forEach(function(b,d){for(var e,h=b.site,g=b.edges.sort(af),l=-1,k=g.length,m=g[k-1].edge,m=m.l===h?m.r:m.l;++l<k;)e=m,m=g[l].edge,m=m.l===h?m.r:m.l,d<e.i&&d<m.i&&0>(h.x-m.x)*(e.y-h.y)-(h.x-e.x)*(m.y-h.y)&&f.push([a[d],a[e.i],a[m.i]])}),f},f.x=function(a){return arguments.length?
(h=L(d=a),f):d},f.y=function(a){return arguments.length?(g=L(e=a),f):e},f.clipExtent=function(a){return arguments.length?(k=null==a?zc:a,f):k===zc?null:k},f.size=function(a){return arguments.length?f.clipExtent(a&&[[0,0],a]):k===zc?null:k&&k[1]},f)};var zc=[[-1E6,-1E6],[1E6,1E6]];s.geom.delaunay=function(a){return s.geom.voronoi().triangles(a)};s.geom.quadtree=function(a,f,b,d,e){function h(a){function n(a,f,b,d,e,h,g,l){if(!isNaN(b)&&!isNaN(d))if(a.leaf){var k=a.x,m=a.y;if(null!=k){if(!(.01>J(k-
b)+J(m-d))){var u=a.point;a.x=a.y=a.point=null;p(a,u,k,m,e,h,g,l)}p(a,f,b,d,e,h,g,l)}else a.x=b,a.y=d,a.point=f}else p(a,f,b,d,e,h,g,l)}function p(a,f,b,d,e,h,g,l){var k=.5*(e+g),m=.5*(h+l),u=b>=k,q=d>=m,r=(q<<1)+u;a.leaf=!1;a=a.nodes[r]||(a.nodes[r]=ef());u?e=k:g=k;q?h=m:l=m;n(a,f,b,d,e,h,g,l)}var u,q,r,s,t,w,v,x,y,D=L(k),H=L(m);if(null!=f)w=f,v=b,x=d,y=e;else if(x=y=-(w=v=1/0),q=[],r=[],t=a.length,g)for(s=0;t>s;++s)u=a[s],u.x<w&&(w=u.x),u.y<v&&(v=u.y),u.x>x&&(x=u.x),u.y>y&&(y=u.y),q.push(u.x),r.push(u.y);
else for(s=0;t>s;++s){var F=+D(u=a[s],s);u=+H(u,s);w>F&&(w=F);v>u&&(v=u);F>x&&(x=F);u>y&&(y=u);q.push(F);r.push(u)}F=x-w;u=y-v;F>u?y=v+F:x=w+u;var A=ef();if(A.add=function(a){n(A,a,+D(a,++s),+H(a,s),w,v,x,y)},A.visit=function(a){zb(a,A,w,v,x,y)},s=-1,null==f){for(;++s<t;)n(A,a[s],q[s],r[s],w,v,x,y);--s}else a.forEach(A.add);return q=r=a=u=null,A}var g,k=fb,m=ub;return(g=arguments.length)?(k=hh,m=ih,3===g&&(e=b,d=f,b=f=0),h(a)):(h.x=function(a){return arguments.length?(k=a,h):k},h.y=function(a){return arguments.length?
(m=a,h):m},h.extent=function(a){return arguments.length?(null==a?f=b=d=e=null:(f=+a[0][0],b=+a[0][1],d=+a[1][0],e=+a[1][1]),h):null==f?null:[[f,b],[d,e]]},h.size=function(a){return arguments.length?(null==a?f=b=d=e=null:(f=b=0,d=+a[0],e=+a[1]),h):null==f?null:[d-f,e-b]},h)};s.interpolateRgb=id;s.interpolateObject=ff;s.interpolateNumber=Ea;s.interpolateString=gf;var jd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kd=new RegExp(jd.source,"g");s.interpolate=Wa;s.interpolators=[function(a,f){var b=typeof f;
return("string"===b?Ib.has(f)||/^(#|rgb\(|hsl\()/.test(f)?id:gf:f instanceof Qa?id:Array.isArray(f)?dc:"object"===b&&isNaN(f)?ff:Ea)(a,f)}];s.interpolateArray=dc;var ig=function(){return V},mi=s.map({linear:ig,poly:function(a){return function(f){return Math.pow(f,a)}},quad:function(){return kh},cubic:function(){return lh},sin:function(){return nh},exp:function(){return oh},circle:function(){return ph},elastic:function(a,f){var b;return 2>arguments.length&&(f=.45),arguments.length?b=f/fa*Math.asin(1/
a):(a=1,b=f/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-b)*fa/f)}},back:function(a){return a||(a=1.70158),function(f){return f*f*((a+1)*f-a)}},bounce:function(){return qh}}),ni=s.map({"in":V,out:hf,"in-out":jf,"out-in":function(a){return jf(hf(a))}});s.ease=function(a){var f=a.indexOf("-"),b=0<=f?a.slice(0,f):a,f=0<=f?a.slice(f+1):"in";return b=mi.get(b)||ig,f=ni.get(f)||V,jh(f(b.apply(null,Wf.call(arguments,1))))};s.interpolateHcl=function(a,f){a=s.hcl(a);f=s.hcl(f);var b=a.h,d=a.c,e=
a.l,h=f.h-b,g=f.c-d,k=f.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?f.c:d),isNaN(h)?(h=0,b=isNaN(b)?f.h:b):180<h?h-=360:-180>h&&(h+=360),function(a){return Ic(b+h*a,d+g*a,e+k*a)+""}};s.interpolateHsl=function(a,b){a=s.hsl(a);b=s.hsl(b);var d=a.h,e=a.s,h=a.l,g=b.h-d,k=b.s-e,m=b.l-h;return isNaN(k)&&(k=0,e=isNaN(e)?b.s:e),isNaN(g)?(g=0,d=isNaN(d)?b.h:d):180<g?g-=360:-180>g&&(g+=360),function(a){return Hc(d+g*a,e+k*a,h+m*a)+""}};s.interpolateLab=function(a,b){a=s.lab(a);b=s.lab(b);var d=a.l,e=a.a,h=a.b,g=b.l-
d,k=b.a-e,m=b.b-h;return function(a){return de(d+g*a,e+k*a,h+m*a)+""}};s.interpolateRound=kf;s.transform=function(a){var b=pa.createElementNS(s.ns.prefix.svg,"g");return(s.transform=function(a){if(null!=a){b.setAttribute("transform",a);var d=b.transform.baseVal.consolidate()}return new lf(d?d.matrix:oi)})(a)};lf.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var oi={a:1,b:0,c:0,d:1,e:0,f:0};s.interpolateTransform=
nf;s.layout={};s.layout.bundle=function(){return function(a){for(var b=[],d=-1,e=a.length;++d<e;)b.push(th(a[d]));return b}};s.layout.chord=function(){function a(){var a,p,r,t,w,v={},x=[],y=s.range(g),Z=[];d=[];e=[];a=0;for(t=-1;++t<g;){p=0;for(w=-1;++w<g;)p+=h[t][w];x.push(p);Z.push(s.range(g));a+=p}k&&y.sort(function(a,b){return k(x[a],x[b])});m&&Z.forEach(function(a,b){a.sort(function(a,f){return m(h[b][a],h[b][f])})});a=(fa-q*g)/a;p=0;for(t=-1;++t<g;){r=p;for(w=-1;++w<g;){var O=y[t],D=Z[O][w],
H=h[O][D],F=p,A=p+=H*a;v[O+"-"+D]={index:O,subindex:D,startAngle:F,endAngle:A,value:H}}e[O]={index:O,startAngle:r,endAngle:p,value:(p-r)/a};p+=q}for(t=-1;++t<g;)for(w=t-1;++w<g;)a=v[t+"-"+w],p=v[w+"-"+t],(a.value||p.value)&&d.push(a.value<p.value?{source:p,target:a}:{source:a,target:p});n&&b()}function b(){d.sort(function(a,b){return n((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var d,e,h,g,k,m,n,p={},q=0;return p.matrix=function(a){return arguments.length?(g=(h=a)&&h.length,
d=e=null,p):h},p.padding=function(a){return arguments.length?(q=a,d=e=null,p):q},p.sortGroups=function(a){return arguments.length?(k=a,d=e=null,p):k},p.sortSubgroups=function(a){return arguments.length?(m=a,d=null,p):m},p.sortChords=function(a){return arguments.length?(n=a,d&&b(),p):n},p.chords=function(){return d||a(),d},p.groups=function(){return e||a(),e},p};s.layout.force=function(){function a(a){return function(b,f,d,e){if(b.point!==a){d=b.cx-a.x;var h=b.cy-a.y;f=e-f;e=d*d+h*h;if(e>f*f/y)return v>
e&&(f=b.charge/e,a.px-=d*f,a.py-=h*f),!0;b.point&&e&&v>e&&(f=b.pointCharge/e,a.px-=d*f,a.py-=h*f)}return!b.charge}}function b(a){a.px=s.event.x;a.py=s.event.y;m.resume()}var d,e,h,g,k,m={},n=s.dispatch("start","tick","end"),p=[1,1],q=.9,r=pi,t=qi,w=-30,v=ri,x=.1,y=.64,D=[],I=[];return m.tick=function(){if(.005>(e*=.99))return n.end({type:"end",alpha:e=0}),!0;var b,f,d,l,m,r,t,v,y=D.length,R=I.length;for(f=0;R>f;++f)d=I[f],b=d.source,l=d.target,t=l.x-b.x,v=l.y-b.y,(m=t*t+v*v)&&(m=e*g[f]*((m=Math.sqrt(m))-
h[f])/m,t*=m,v*=m,l.x-=t*(r=b.weight/(l.weight+b.weight)),l.y-=v*r,b.x+=t*(r=1-r),b.y+=v*r);if((r=e*x)&&(t=p[0]/2,v=p[1]/2,f=-1,r))for(;++f<y;)d=D[f],d.x+=(t-d.x)*r,d.y+=(v-d.y)*r;if(w)for(pf(b=s.geom.quadtree(D),e,k),f=-1;++f<y;)(d=D[f]).fixed||b.visit(a(d));for(f=-1;++f<y;)d=D[f],d.fixed?(d.x=d.px,d.y=d.py):(d.x-=(d.px-(d.px=d.x))*q,d.y-=(d.py-(d.py=d.y))*q);n.tick({type:"tick",alpha:e})},m.nodes=function(a){return arguments.length?(D=a,m):D},m.links=function(a){return arguments.length?(I=a,m):
I},m.size=function(a){return arguments.length?(p=a,m):p},m.linkDistance=function(a){return arguments.length?(r="function"==typeof a?a:+a,m):r},m.distance=m.linkDistance,m.linkStrength=function(a){return arguments.length?(t="function"==typeof a?a:+a,m):t},m.friction=function(a){return arguments.length?(q=+a,m):q},m.charge=function(a){return arguments.length?(w="function"==typeof a?a:+a,m):w},m.chargeDistance=function(a){return arguments.length?(v=a*a,m):Math.sqrt(v)},m.gravity=function(a){return arguments.length?
(x=+a,m):x},m.theta=function(a){return arguments.length?(y=a*a,m):Math.sqrt(y)},m.alpha=function(a){return arguments.length?(a=+a,e?e=0<a?a:0:0<a&&(n.start({type:"start",alpha:e=a}),s.timer(m.tick)),m):e},m.start=function(){function a(d,h){if(!f){f=Array(e);for(k=0;e>k;++k)f[k]=[];for(k=0;m>k;++k){var g=I[k];f[g.source.index].push(g.target);f[g.target.index].push(g.source)}}for(var l=f[b],k=-1,m=l.length;++k<m;)if(!isNaN(g=l[k][d]))return g;return Math.random()*h}var b,f,d,e=D.length,l=I.length,n=
p[0],q=p[1];for(b=0;e>b;++b)(d=D[b]).index=b,d.weight=0;for(b=0;l>b;++b)d=I[b],"number"==typeof d.source&&(d.source=D[d.source]),"number"==typeof d.target&&(d.target=D[d.target]),++d.source.weight,++d.target.weight;for(b=0;e>b;++b)d=D[b],isNaN(d.x)&&(d.x=a("x",n)),isNaN(d.y)&&(d.y=a("y",q)),isNaN(d.px)&&(d.px=d.x),isNaN(d.py)&&(d.py=d.y);if(h=[],"function"==typeof r)for(b=0;l>b;++b)h[b]=+r.call(this,I[b],b);else for(b=0;l>b;++b)h[b]=r;if(g=[],"function"==typeof t)for(b=0;l>b;++b)g[b]=+t.call(this,
I[b],b);else for(b=0;l>b;++b)g[b]=t;if(k=[],"function"==typeof w)for(b=0;e>b;++b)k[b]=+w.call(this,D[b],b);else for(b=0;e>b;++b)k[b]=w;return m.resume()},m.resume=function(){return m.alpha(.1)},m.stop=function(){return m.alpha(0)},m.drag=function(){return d||(d=s.behavior.drag().origin(V).on("dragstart.force",uh).on("drag.force",b).on("dragend.force",vh)),arguments.length?(this.on("mouseover.force",wh).on("mouseout.force",xh).call(d),void 0):d},s.rebind(m,n,"on")};var pi=20,qi=1,ri=1/0;s.layout.hierarchy=
function(){function a(h){var g,k=[h],m=[];for(h.depth=0;null!=(g=k.pop());)if(m.push(g),(p=d.call(a,g,g.depth))&&(n=p.length)){for(var n,p,q;0<=--n;)k.push(q=p[n]),q.parent=g,q.depth=g.depth+1;e&&(g.value=0);g.children=p}else e&&(g.value=+e.call(a,g,g.depth)||0),delete g.children;return va(h,function(a){var d,h;b&&(d=a.children)&&d.sort(b);e&&(h=a.parent)&&(h.value+=a.value)}),m}var b=Bh,d=zh,e=Ah;return a.sort=function(d){return arguments.length?(b=d,a):b},a.children=function(b){return arguments.length?
(d=b,a):d},a.value=function(b){return arguments.length?(e=b,a):e},a.revalue=function(b){return e&&(Bb(b,function(a){a.children&&(a.value=0)}),va(b,function(b){var f;b.children||(b.value=+e.call(a,b,b.depth)||0);(f=b.parent)&&(f.value+=b.value)})),b},a};s.layout.partition=function(){function a(b,f,d,e){var h=b.children;if(b.x=f,b.y=b.depth*e,b.dx=d,b.dy=e,h&&(g=h.length)){var g,k,l=-1;for(d=b.value?d/b.value:0;++l<g;)a(k=h[l],f,b=k.value*d,e),f+=b}}function b(a){a=a.children;var d=0;if(a&&(e=a.length))for(var e,
h=-1;++h<e;)d=Math.max(d,b(a[h]));return 1+d}function d(g,k){var l=e.call(this,g,k);return a(l[0],0,h[0],h[1]/b(l[0])),l}var e=s.layout.hierarchy(),h=[1,1];return d.size=function(a){return arguments.length?(h=a,d):h},Ab(d,e)};s.layout.pie=function(){function a(g){var k=g.map(function(d,e){return+b.call(a,d,e)}),m=+("function"==typeof e?e.apply(this,arguments):e),n=(("function"==typeof h?h.apply(this,arguments):h)-m)/s.sum(k),p=s.range(g.length);null!=d&&p.sort(d===jg?function(a,b){return k[b]-k[a]}:
function(a,b){return d(g[a],g[b])});var q=[];return p.forEach(function(a){var b;q[a]={data:g[a],value:b=k[a],startAngle:m,endAngle:m+=b*n}}),q}var b=Number,d=jg,e=0,h=fa;return a.value=function(d){return arguments.length?(b=d,a):b},a.sort=function(b){return arguments.length?(d=b,a):d},a.startAngle=function(b){return arguments.length?(e=b,a):e},a.endAngle=function(b){return arguments.length?(h=b,a):h},a};var jg={};s.layout.stack=function(){function a(m,n){var p=m.map(function(d,e){return b.call(a,
d,e)}),q=p.map(function(b){return b.map(function(b,f){return[g.call(a,b,f),k.call(a,b,f)]})}),r=d.call(a,q,n),p=s.permute(p,r),q=s.permute(q,r),t,w,v=e.call(a,q,n),y=p.length,x=p[0].length;for(t=0;x>t;++t)for(h.call(a,p[0][t],w=v[t],q[0][t][1]),r=1;y>r;++r)h.call(a,p[r][t],w+=q[r-1][t][1],q[r][t][1]);return m}var b=V,d=ld,e=md,h=Eh,g=Ch,k=Dh;return a.values=function(d){return arguments.length?(b=d,a):b},a.order=function(b){return arguments.length?(d="function"==typeof b?b:si.get(b)||ld,a):d},a.offset=
function(b){return arguments.length?(e="function"==typeof b?b:ti.get(b)||md,a):e},a.x=function(b){return arguments.length?(g=b,a):g},a.y=function(b){return arguments.length?(k=b,a):k},a.out=function(b){return arguments.length?(h=b,a):h},a};var si=s.map({"inside-out":function(a){var b,d=a.length,e=a.map(Fh),h=a.map(Gh),g=s.range(d).sort(function(a,b){return e[a]-e[b]}),k=0,m=0,n=[],p=[];for(a=0;d>a;++a)b=g[a],m>k?(k+=h[b],n.push(b)):(m+=h[b],p.push(b));return p.reverse().concat(n)},reverse:function(a){return s.range(a.length).reverse()},
"default":ld}),ti=s.map({silhouette:function(a){var b,d,e,h=a.length,g=a[0].length,k=[],m=0,n=[];for(d=0;g>d;++d){for(e=b=0;h>b;b++)e+=a[b][d][1];e>m&&(m=e);k.push(e)}for(d=0;g>d;++d)n[d]=(m-k[d])/2;return n},wiggle:function(a){var b,d,e,h,g,k,m,n,p,q=a.length,r=a[0],s=r.length,t=[];t[0]=n=p=0;for(d=1;s>d;++d){for(h=b=0;q>b;++b)h+=a[b][d][1];g=b=0;for(m=r[d][0]-r[d-1][0];q>b;++b){e=0;for(k=(a[b][d][1]-a[b][d-1][1])/(2*m);b>e;++e)k+=(a[e][d][1]-a[e][d-1][1])/m;g+=k*a[b][d][1]}t[d]=n-=h?g/h*m:0;p>n&&
(p=n)}for(d=0;s>d;++d)t[d]-=p;return t},expand:function(a){var b,d,e,h=a.length,g=a[0].length,k=1/h,m=[];for(d=0;g>d;++d){for(e=b=0;h>b;b++)e+=a[b][d][1];if(e)for(b=0;h>b;b++)a[b][d][1]/=e;else for(b=0;h>b;b++)a[b][d][1]=k}for(d=0;g>d;++d)m[d]=0;return m},zero:md});s.layout.histogram=function(){function a(a,g){var k,m,n=[],p=a.map(d,this),q=e.call(this,p,g),r=h.call(this,q,p,g);g=-1;for(var t=p.length,w=r.length-1,v=b?1:1/t;++g<w;)k=n[g]=[],k.dx=r[g+1]-(k.x=r[g]),k.y=0;if(0<w)for(g=-1;++g<t;)m=p[g],
m>=q[0]&&m<=q[1]&&(k=n[s.bisect(r,m,1,w)-1],k.y+=v,k.push(a[g]));return n}var b=!0,d=Number,e=Jh,h=Ih;return a.value=function(b){return arguments.length?(d=b,a):d},a.range=function(b){return arguments.length?(e=L(b),a):e},a.bins=function(b){return arguments.length?(h="number"==typeof b?function(a){return qf(a,b)}:L(b),a):h},a.frequency=function(d){return arguments.length?(b=!!d,a):b},a};s.layout.pack=function(){function a(a,g){var k=d.call(this,a,g),m=k[0],n=h[0],p=h[1],q=null==b?Math.sqrt:"function"==
typeof b?b:function(){return b};if(m.x=m.y=0,va(m,function(a){a.r=+q(a.value)}),va(m,tf),e){var r=e*(b?1:Math.max(2*m.r/n,2*m.r/p))/2;va(m,function(a){a.r+=r});va(m,tf);va(m,function(a){a.r-=r})}return vf(m,n/2,p/2,b?1:1/Math.max(2*m.r/n,2*m.r/p)),k}var b,d=s.layout.hierarchy().sort(Kh),e=0,h=[1,1];return a.size=function(b){return arguments.length?(h=b,a):h},a.radius=function(d){return arguments.length?(b=null==d||"function"==typeof d?d:+d,a):b},a.padding=function(b){return arguments.length?(e=+b,
a):e},Ab(a,d)};s.layout.tree=function(){function a(a,p){var q=g.call(this,a,p),r=q[0],s=b(r);if(va(s,d),s.parent.m=-s.z,Bb(s,e),n)Bb(r,h);else{var t=r,w=r,v=r;Bb(r,function(a){a.x<t.x&&(t=a);a.x>w.x&&(w=a);a.depth>v.depth&&(v=a)});var y=k(t,w)/2-t.x,x=m[0]/(w.x+k(w,t)/2+y),D=m[1]/(v.depth||1);Bb(r,function(a){a.x=(a.x+y)*x;a.y=a.depth*D})}return q}function b(a){for(var f={A:null,children:[a]},d=[f];null!=(a=d.pop());)for(var e,h=a.children,g=0,k=h.length;k>g;++g)d.push((h[g]=e={_:h[g],parent:a,children:(e=
h[g].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=e);return f.children[0]}function d(a){var b=a.children,f=a.parent.children,e=a.i?f[a.i-1]:null;if(b.length){for(var h,g=0,l=0,m=a.children,n=m.length;0<=--n;)h=m[n],h.z+=g,h.m+=g,g+=h.s+(l+=h.c);b=(b[0].z+b[b.length-1].z)/2;e?(a.z=e.z+k(a._,e._),a.m=a.z-b):a.z=b}else e&&(a.z=e.z+k(a._,e._));b=a.parent;f=a.parent.A||f[0];if(e){for(var g=h=a,l=e,m=h.parent.children[0],n=h.m,p=g.m,q=l.m,r=m.m;l=pd(l),h=od(h),l&&h;){m=od(m);g=
pd(g);g.a=a;e=l.z+q-h.z-n+k(l._,h._);if(0<e){var u=l.a.parent===a.parent?l.a:f,s=a,t=e,w=t/(s.i-u.i);s.c-=w;s.s+=t;u.c+=w;s.z+=t;s.m+=t;n+=e;p+=e}q+=l.m;n+=h.m;r+=m.m;p+=g.m}l&&!pd(g)&&(g.t=l,g.m+=q-p);h&&!od(m)&&(m.t=h,m.m+=n-r,f=a)}b.A=f}function e(a){a._.x=a.z+a.parent.m;a.m+=a.parent.m}function h(a){a.x*=m[0];a.y=a.depth*m[1]}var g=s.layout.hierarchy().sort(null).value(null),k=wf,m=[1,1],n=null;return a.separation=function(b){return arguments.length?(k=b,a):k},a.size=function(b){return arguments.length?
(n=null==(m=b)?h:null,a):n?null:m},a.nodeSize=function(b){return arguments.length?(n=null==(m=b)?null:h,a):n?m:null},Ab(a,g)};s.layout.cluster=function(){function a(a,g){var k,m=b.call(this,a,g),n=m[0],p=0;va(n,function(a){var b=a.children;b&&b.length?(a.x=Oh(b),a.y=Nh(b)):(a.x=k?p+=d(a,k):0,a.y=0,k=a)});var q=xf(n),r=yf(n),s=q.x-d(q,r)/2,t=r.x+d(r,q)/2;return va(n,h?function(a){a.x=(a.x-n.x)*e[0];a.y=(n.y-a.y)*e[1]}:function(a){a.x=(a.x-s)/(t-s)*e[0];a.y=(1-(n.y?a.y/n.y:1))*e[1]}),m}var b=s.layout.hierarchy().sort(null).value(null),
d=wf,e=[1,1],h=!1;return a.separation=function(b){return arguments.length?(d=b,a):d},a.size=function(b){return arguments.length?(h=null==(e=b),a):h?null:e},a.nodeSize=function(b){return arguments.length?(h=null!=(e=b),a):h?e:null},Ab(a,b)};s.layout.treemap=function(){function a(a,b){for(var f,d,e=-1,h=a.length;++e<h;)d=(f=a[e]).value*(0>b?0:b),f.area=isNaN(d)||0>=d?0:d}function b(d){var h=d.children;if(h&&h.length){var g,k=q(d),m=[],l=h.slice(),n=1/0,p="slice"===t?k.dx:"dice"===t?k.dy:"slice-dice"===
t?1&d.depth?k.dy:k.dx:Math.min(k.dx,k.dy);a(l,k.dx*k.dy/d.value);for(m.area=0;0<(d=l.length);){m.push(d=l[d-1]);m.area+=d.area;var r;if(!(r="squarify"!==t)){d=p;g=void 0;var s=m.area;r=0;for(var u=1/0,v=-1,y=m.length;++v<y;)(g=m[v].area)&&(u>g&&(u=g),g>r&&(r=g));r=(g=(s*=s,d*=d,s?Math.max(d*r*w/s,s/(d*u*w)):1/0))<=n}r?(l.pop(),n=g):(m.area-=m.pop().area,e(m,p,k,!1),p=Math.min(k.dx,k.dy),m.length=m.area=0,n=1/0)}m.length&&(e(m,p,k,!0),m.length=m.area=0);h.forEach(b)}}function d(b){var f=b.children;
if(f&&f.length){var h=q(b),g=f.slice(),k=[];a(g,h.dx*h.dy/b.value);for(k.area=0;b=g.pop();)k.push(b),k.area+=b.area,null!=b.z&&(e(k,b.z?h.dx:h.dy,h,!g.length),k.length=k.area=0);f.forEach(d)}}function e(a,b,f,d){var h,g=-1,k=a.length,l=f.x,n=f.y,p=b?m(a.area/b):0;if(b==f.dx){for((d||p>f.dy)&&(p=f.dy);++g<k;)h=a[g],h.x=l,h.y=n,h.dy=p,l+=h.dx=Math.min(f.x+f.dx-l,p?m(h.area/p):0);h.z=!0;h.dx+=f.x+f.dx-l;f.y+=p;f.dy-=p}else{for((d||p>f.dx)&&(p=f.dx);++g<k;)h=a[g],h.x=l,h.y=n,h.dx=p,n+=h.dy=Math.min(f.y+
f.dy-n,p?m(h.area/p):0);h.z=!1;h.dy+=f.y+f.dy-n;f.x+=p;f.dx-=p}}function h(e){e=g||k(e);var m=e[0];return m.x=0,m.y=0,m.dx=n[0],m.dy=n[1],g&&k.revalue(m),a([m],m.dx*m.dy/m.value),(g?d:b)(m),r&&(g=e),e}var g,k=s.layout.hierarchy(),m=Math.round,n=[1,1],p=null,q=qd,r=!1,t="squarify",w=.5*(1+Math.sqrt(5));return h.size=function(a){return arguments.length?(n=a,h):n},h.padding=function(a){function b(f){var d=a.call(h,f,f.depth);return null==d?qd(f):zf(f,"number"==typeof d?[d,d,d,d]:d)}function f(b){return zf(b,
a)}if(!arguments.length)return p;var d;return q=null==(p=a)?qd:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],f):f,h},h.round=function(a){return arguments.length?(m=a?Math.round:Number,h):m!=Number},h.sticky=function(a){return arguments.length?(r=a,g=null,h):r},h.ratio=function(a){return arguments.length?(w=a,h):w},h.mode=function(a){return arguments.length?(t=a+"",h):t},Ab(h,k)};s.random={normal:function(a,b){var d=arguments.length;return 2>d&&(b=1),1>d&&(a=0),function(){var d,e;do d=2*Math.random()-
1,e=2*Math.random()-1,e=d*d+e*e;while(!e||1<e);return a+b*d*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=s.random.normal.apply(s,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=s.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,d=0;a>d;d++)b+=Math.random();return b}}};s.scale={};var Qh={floor:V,ceil:V};s.scale.linear=function(){return Bf([0,1],[0,1],Wa,!1)};var Th={s:1,g:1,p:1,r:1,e:1};s.scale.log=function(){return Cf(s.scale.linear().domain([0,
1]),10,!0,[1,10])};var Df=s.format(".0e"),Uh={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};s.scale.pow=function(){return Ef(s.scale.linear(),1,[0,1])};s.scale.sqrt=function(){return s.scale.pow().exponent(.5)};s.scale.ordinal=function(){return Ff([],{t:"range",a:[[]]})};s.scale.category10=function(){return s.scale.ordinal().range(ui)};s.scale.category20=function(){return s.scale.ordinal().range(vi)};s.scale.category20b=function(){return s.scale.ordinal().range(wi)};
s.scale.category20c=function(){return s.scale.ordinal().range(xi)};var ui=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Hb),vi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Hb),wi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,
10834324,13528509,14589654].map(Hb),xi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Hb);s.scale.quantile=function(){return Gf([],[])};s.scale.quantize=function(){return Hf(0,1,[0,1])};s.scale.threshold=function(){return If([.5],[0,1])};s.scale.identity=function(){return Jf([0,1])};s.svg={};s.svg.arc=function(){function a(){var a=b.apply(this,arguments),g=d.apply(this,
arguments),k=e.apply(this,arguments)+Xa,m=h.apply(this,arguments)+Xa,n=(k>m&&(n=k,k=m,m=n),m-k),p=G>n?"0":"1",q=Math.cos(k),k=Math.sin(k),r=Math.cos(m),m=Math.sin(m);return n>=yi?a?"M0,"+g+"A"+g+","+g+" 0 1,1 0,"+-g+"A"+g+","+g+" 0 1,1 0,"+g+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+g+"A"+g+","+g+" 0 1,1 0,"+-g+"A"+g+","+g+" 0 1,1 0,"+g+"Z":a?"M"+g*q+","+g*k+"A"+g+","+g+" 0 "+p+",1 "+g*r+","+g*m+"L"+a*r+","+a*m+"A"+a+","+a+" 0 "+p+",0 "+a*q+","+a*k+"Z":"M"+g*q+","+g*k+
"A"+g+","+g+" 0 "+p+",1 "+g*r+","+g*m+"L0,0Z"}var b=Vh,d=Wh,e=Kf,h=Lf;return a.innerRadius=function(d){return arguments.length?(b=L(d),a):b},a.outerRadius=function(b){return arguments.length?(d=L(b),a):d},a.startAngle=function(b){return arguments.length?(e=L(b),a):e},a.endAngle=function(b){return arguments.length?(h=L(b),a):h},a.centroid=function(){var a=(b.apply(this,arguments)+d.apply(this,arguments))/2,g=(e.apply(this,arguments)+h.apply(this,arguments))/2+Xa;return[Math.cos(g)*a,Math.sin(g)*a]},
a};var Xa=-W,yi=fa-C;s.svg.line=function(){return Mf(V)};var td=s.map({linear:ga,"linear-closed":function(a){return ga(a)+"Z"},step:function(a){for(var b=0,d=a.length,e=a[0],h=[e[0],",",e[1]];++b<d;)h.push("H",(e[0]+(e=a[b])[0])/2,"V",e[1]);return 1<d&&h.push("H",e[0]),h.join("")},"step-before":ud,"step-after":vd,basis:Nf,"basis-open":function(a){if(4>a.length)return ga(a);for(var b,d=[],e=-1,h=a.length,g=[0],k=[0];3>++e;)b=a[e],g.push(b[0]),k.push(b[1]);d.push(ja(Oa,g)+","+ja(Oa,k));for(--e;++e<
h;)b=a[e],g.shift(),g.push(b[0]),k.shift(),k.push(b[1]),xd(d,g,k);return d.join("")},"basis-closed":function(a){for(var b,d,e=-1,h=a.length,g=h+4,k=[],m=[];4>++e;)d=a[e%h],k.push(d[0]),m.push(d[1]);b=[ja(Oa,k),",",ja(Oa,m)];for(--e;++e<g;)d=a[e%h],k.shift(),k.push(d[0]),m.shift(),m.push(d[1]),xd(b,k,m);return b.join("")},bundle:function(a,b){var d=a.length-1;if(d)for(var e,h,g=a[0][0],k=a[0][1],m=a[d][0]-g,n=a[d][1]-k,p=-1;++p<=d;)e=a[p],h=p/d,e[0]=b*e[0]+(1-b)*(g+h*m),e[1]=b*e[1]+(1-b)*(k+h*n);return Nf(a)},
cardinal:function(a,b){return 3>a.length?ga(a):a[0]+ic(a,wd(a,b))},"cardinal-open":function(a,b){return 4>a.length?ga(a):a[1]+ic(a.slice(1,a.length-1),wd(a,b))},"cardinal-closed":function(a,b){return 3>a.length?ga(a):a[0]+ic((a.push(a[0]),a),wd([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=ga(a);else{var b=a[0],d,e,h,g,k=[],m;d=0;m=a.length-1;for(var n=[],p=a[1],q=n[0]=yd(a[0],p);++d<m;)n[d]=(q+(q=yd(p,p=a[d+1])))/2;m=(n[d]=q,n);n=-1;for(p=a.length-1;++n<p;)d=yd(a[n],
a[n+1]),J(d)<C?m[n]=m[n+1]=0:(e=m[n]/d,h=m[n+1]/d,g=e*e+h*h,9<g&&(g=3*d/Math.sqrt(g),m[n]=g*e,m[n+1]=g*h));for(n=-1;++n<=p;)g=(a[Math.min(p,n+1)][0]-a[Math.max(0,n-1)][0])/(6*(1+m[n]*m[n])),k.push([g||0,m[n]*g||0]);a=b+ic(a,k)}return a}});td.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var Of=[0,2/3,1/3,0],Pf=[0,1/3,2/3,0],Oa=[0,1/6,2/3,1/6];s.svg.line.radial=function(){var a=Mf(Qf);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a};ud.reverse=vd;vd.reverse=ud;s.svg.area=function(){return Rf(V)};
s.svg.area.radial=function(){var a=Rf(Qf);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a};s.svg.chord=function(){function a(a,g){var k=b(this,e,a,g),m=b(this,h,a,g);return"M"+k.p0+d(k.r,k.p1,k.a1-k.a0)+(k.a0==m.a0&&k.a1==m.a1?"Q 0,0 "+k.p0:"Q 0,0 "+m.p0+d(m.r,m.p1,m.a1-m.a0)+("Q 0,0 "+k.p0))+"Z"}function b(a,f,d,e){var h=f.call(a,d,e);f=g.call(a,h,e);d=k.call(a,h,e)+Xa;
a=m.call(a,h,e)+Xa;return{r:f,a0:d,a1:a,p0:[f*Math.cos(d),f*Math.sin(d)],p1:[f*Math.cos(a),f*Math.sin(a)]}}function d(a,b,f){return"A"+a+","+a+" 0 "+ +(f>G)+",1 "+b}var e=$c,h=ad,g=Xh,k=Kf,m=Lf;return a.radius=function(b){return arguments.length?(g=L(b),a):g},a.source=function(b){return arguments.length?(e=L(b),a):e},a.target=function(b){return arguments.length?(h=L(b),a):h},a.startAngle=function(b){return arguments.length?(k=L(b),a):k},a.endAngle=function(b){return arguments.length?(m=L(b),a):m},
a};s.svg.diagonal=function(){function a(a,h){var g=b.call(this,a,h),k=d.call(this,a,h),m=(g.y+k.y)/2,g=[g,{x:g.x,y:m},{x:k.x,y:m},k];return g=g.map(e),"M"+g[0]+"C"+g[1]+" "+g[2]+" "+g[3]}var b=$c,d=ad,e=Sf;return a.source=function(d){return arguments.length?(b=L(d),a):b},a.target=function(b){return arguments.length?(d=L(b),a):d},a.projection=function(b){return arguments.length?(e=b,a):e},a};s.svg.diagonal.radial=function(){var a=s.svg.diagonal(),b=Sf,d=a.projection;return a.projection=function(a){return arguments.length?
d(Yh(b=a)):b},a};s.svg.symbol=function(){function a(a,e){return(kg.get(b.call(this,a,e))||Tf)(d.call(this,a,e))}var b=$h,d=Zh;return a.type=function(d){return arguments.length?(b=L(d),a):b},a.size=function(b){return arguments.length?(d=L(b),a):d},a};var kg=s.map({circle:Tf,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*lg));var b=a*lg;return"M0,"+-a+"L"+b+",0 0,"+a+
" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/Ac);var b=a*Ac/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Ac);var b=a*Ac/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});s.svg.symbolTypes=kg.keys();var Za,mc,Ac=Math.sqrt(3),lg=Math.tan(30*E),U=[],$f=0;U.call=M.call;U.empty=M.empty;U.node=M.node;U.size=M.size;s.transition=function(a){return arguments.length?
Za?a.transition():a:Zf.transition()};s.transition.prototype=U;U.select=function(a){var b,d,e,h=this.id,g=[];a=Q(a);for(var k=-1,m=this.length;++k<m;){g.push(b=[]);for(var n=this[k],p=-1,q=n.length;++p<q;)(e=n[p])&&(d=a.call(e,e.__data__,p,k))?("__data__"in e&&(d.__data__=e.__data__),jc(d,p,h,e.__transition__[h]),b.push(d)):b.push(null)}return Cb(g,h)};U.selectAll=function(a){var b,d,e,h,g=this.id,k=[];a=Jd(a);for(var m=-1,n=this.length;++m<n;)for(var p=this[m],q=-1,r=p.length;++q<r;)if(b=p[q]){h=
b.__transition__[g];d=a.call(b,b.__data__,q,m);k.push(b=[]);for(var s=-1,t=d.length;++s<t;)(e=d[s])&&jc(e,s,g,h),b.push(e)}return Cb(k,g)};U.filter=function(a){var b,d,e,h=[];"function"!=typeof a&&(a=Rd(a));for(var g=0,k=this.length;k>g;g++){h.push(b=[]);d=this[g];for(var m=0,n=d.length;n>m;m++)(e=d[m])&&a.call(e,e.__data__,m,g)&&b.push(e)}return Cb(h,this.id)};U.tween=function(a,b){var d=this.id;return 2>arguments.length?this.node().__transition__[d].tween.get(a):wa(this,null==b?function(b){b.__transition__[d].tween.remove(a)}:
function(e){e.__transition__[d].tween.set(a,b)})};U.attr=function(a,b){function d(){this.removeAttribute(m)}function e(){this.removeAttributeNS(m.space,m.local)}function h(a){return null==a?d:(a+="",function(){var b,d=this.getAttribute(m);return d!==a&&(b=k(d,a),function(a){this.setAttribute(m,b(a))})})}function g(a){return null==a?e:(a+="",function(){var b,d=this.getAttributeNS(m.space,m.local);return d!==a&&(b=k(d,a),function(a){this.setAttributeNS(m.space,m.local,b(a))})})}if(2>arguments.length){for(b in a)this.attr(b,
a[b]);return this}var k="transform"==a?nf:Wa,m=s.ns.qualify(a);return zd(this,"attr."+a,b,m.local?g:h)};U.attrTween=function(a,b){function d(a,e){var g=b.call(this,a,e,this.getAttribute(h));return g&&function(a){this.setAttribute(h,g(a))}}function e(a,d){var g=b.call(this,a,d,this.getAttributeNS(h.space,h.local));return g&&function(a){this.setAttributeNS(h.space,h.local,g(a))}}var h=s.ns.qualify(a);return this.tween("attr."+a,h.local?e:d)};U.style=function(a,b,d){function e(){this.style.removeProperty(a)}
var h=arguments.length;if(3>h){if("string"!=typeof a){2>h&&(b="");for(d in a)this.style(d,a[d],b);return this}d=""}return zd(this,"style."+a,b,function(b){return null==b?e:(b+="",function(){var f,e=aa.getComputedStyle(this,null).getPropertyValue(a);return e!==b&&(f=Wa(e,b),function(b){this.style.setProperty(a,f(b),d)})})})};U.styleTween=function(a,b,d){return 3>arguments.length&&(d=""),this.tween("style."+a,function(e,h){var g=b.call(this,e,h,aa.getComputedStyle(this,null).getPropertyValue(a));return g&&
function(b){this.style.setProperty(a,g(b),d)}})};U.text=function(a){return zd(this,"text",a,ai)};U.remove=function(){return this.each("end.transition",function(){var a;2>this.__transition__.count&&(a=this.parentNode)&&a.removeChild(this)})};U.ease=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].ease:("function"!=typeof a&&(a=s.ease.apply(s,arguments)),wa(this,function(d){d.__transition__[b].ease=a}))};U.delay=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].delay:
wa(this,"function"==typeof a?function(d,e,h){d.__transition__[b].delay=+a.call(d,d.__data__,e,h)}:(a=+a,function(d){d.__transition__[b].delay=a}))};U.duration=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].duration:wa(this,"function"==typeof a?function(d,e,h){d.__transition__[b].duration=Math.max(1,a.call(d,d.__data__,e,h))}:(a=Math.max(1,a),function(d){d.__transition__[b].duration=a}))};U.each=function(a,b){var d=this.id;if(2>arguments.length){var e=mc,h=Za;Za=
d;wa(this,function(b,f,e){mc=b.__transition__[d];a.call(b,b.__data__,f,e)});mc=e;Za=h}else wa(this,function(e){e=e.__transition__[d];(e.event||(e.event=s.dispatch("start","end"))).on(a,b)});return this};U.transition=function(){for(var a,b,d,e,h=this.id,g=++$f,k=[],m=0,n=this.length;n>m;m++){k.push(a=[]);b=this[m];for(var p=0,q=b.length;q>p;p++)(d=b[p])&&(e=Object.create(d.__transition__[h]),e.delay+=e.duration,jc(d,p,g,e)),a.push(d)}return Cb(k,g)};s.svg.axis=function(){function a(a){a.each(function(){var a,
p=s.select(this),q=this.__chart__||d,r=this.__chart__=d.copy(),t=null==n?r.ticks?r.ticks.apply(r,m):r.domain():n,w=null==b?r.tickFormat?r.tickFormat.apply(r,m):V:b,v=p.selectAll(".tick").data(t,r),t=v.enter().insert("g",".domain").attr("class","tick").style("opacity",C),y=s.transition(v.exit()).style("opacity",C).remove(),x=s.transition(v.order()).style("opacity",1),D=ec(r),p=p.selectAll(".domain").data([0]),p=(p.enter().append("path").attr("class","domain"),s.transition(p));t.append("line");t.append("text");
var H=t.select("line"),F=x.select("line"),w=v.select("text").text(w),v=t.select("text"),A=x.select("text");switch(e){case "bottom":a=Uf;H.attr("y2",h);v.attr("y",Math.max(h,0)+k);F.attr("x2",0).attr("y2",h);A.attr("x",0).attr("y",Math.max(h,0)+k);w.attr("dy",".71em").style("text-anchor","middle");p.attr("d","M"+D[0]+","+g+"V0H"+D[1]+"V"+g);break;case "top":a=Uf;H.attr("y2",-h);v.attr("y",-(Math.max(h,0)+k));F.attr("x2",0).attr("y2",-h);A.attr("x",0).attr("y",-(Math.max(h,0)+k));w.attr("dy","0em").style("text-anchor",
"middle");p.attr("d","M"+D[0]+","+-g+"V0H"+D[1]+"V"+-g);break;case "left":a=Vf;H.attr("x2",-h);v.attr("x",-(Math.max(h,0)+k));F.attr("x2",-h).attr("y2",0);A.attr("x",-(Math.max(h,0)+k)).attr("y",0);w.attr("dy",".32em").style("text-anchor","end");p.attr("d","M"+-g+","+D[0]+"H0V"+D[1]+"H"+-g);break;case "right":a=Vf,H.attr("x2",h),v.attr("x",Math.max(h,0)+k),F.attr("x2",h).attr("y2",0),A.attr("x",Math.max(h,0)+k).attr("y",0),w.attr("dy",".32em").style("text-anchor","start"),p.attr("d","M"+g+","+D[0]+
"H0V"+D[1]+"H"+g)}if(r.rangeBand)var E=r,Z=E.rangeBand()/2,q=r=function(a){return E(a)+Z};else q.rangeBand?q=r:y.call(a,r);t.call(a,q);x.call(a,r)})}var b,d=s.scale.linear(),e=mg,h=6,g=6,k=3,m=[10],n=null;return a.scale=function(b){return arguments.length?(d=b,a):d},a.orient=function(b){return arguments.length?(e=b in zi?b+"":mg,a):e},a.ticks=function(){return arguments.length?(m=arguments,a):m},a.tickValues=function(b){return arguments.length?(n=b,a):n},a.tickFormat=function(d){return arguments.length?
(b=d,a):b},a.tickSize=function(b){var d=arguments.length;return d?(h=+b,g=+arguments[d-1],a):h},a.innerTickSize=function(b){return arguments.length?(h=+b,a):h},a.outerTickSize=function(b){return arguments.length?(g=+b,a):g},a.tickPadding=function(b){return arguments.length?(k=+b,a):k},a.tickSubdivide=function(){return arguments.length&&a},a};var mg="bottom",zi={top:1,right:1,bottom:1,left:1};s.svg.brush=function(){function a(g){g.each(function(){var g=s.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color",
"rgba(0,0,0,0)").on("mousedown.brush",h).on("touchstart.brush",h),k=g.selectAll(".background").data([0]);k.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");g.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var m=g.selectAll(".resize").data(v,V);m.exit().remove();m.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Ai[a]}).append("rect").attr("x",
function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");m.style("display",a.empty()?"none":null);var q,g=s.transition(g),k=s.transition(k);n&&(q=ec(n),k.attr("x",q[0]).attr("width",q[1]-q[0]),d(g));p&&(q=ec(p),k.attr("y",q[0]).attr("height",q[1]-q[0]),e(g));b(g)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+q[+/e$/.test(a)]+","+r[+/^s/.test(a)]+")"})}function d(a){a.select(".extent").attr("x",
q[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",q[1]-q[0])}function e(a){a.select(".extent").attr("y",r[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",r[1]-r[0])}function h(){function v(){var a=s.mouse(A),h=!1;F&&(a[0]+=F[0],a[1]+=F[1]);Q||(s.event.altKey?(D||(D=[(q[0]+q[1])/2,(r[0]+r[1])/2]),L[0]=q[+(a[0]<D[0])],L[1]=r[+(a[1]<D[1])]):D=null);J&&y(a,n,0)&&(d(E),h=!0);qa&&y(a,p,1)&&(e(E),h=!0);h&&(b(E),C({type:"brush",mode:Q?"move":"resize"}))}function y(a,b,d){var f,e,h=ec(b);
b=h[0];var h=h[1],m=L[d],l=d?r:q,n=l[1]-l[0];return Q&&(b-=m,h-=n+m),f=(d?w:t)?Math.max(b,Math.min(h,a[d])):a[d],Q?e=(f+=m)+n:(D&&(m=Math.max(b,Math.min(h,2*D[d]-f))),f>m?(e=f,f=m):e=m),l[0]!=f||l[1]!=e?(d?k=null:g=null,l[0]=f,l[1]=e,!0):void 0}function x(){v();E.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);s.select("body").style("cursor",null);N.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",
null).on("keyup.brush",null);M();C({type:"brushend"})}var D,F,A=this,B=s.select(s.event.target),C=m.of(A,arguments),E=s.select(A),G=B.datum(),J=!/^(n|s)$/.test(G)&&n,qa=!/^(e|w)$/.test(G)&&p,Q=B.classed("extent"),M=Gb(),L=s.mouse(A),N=s.select(aa).on("keydown.brush",function(){32==s.event.keyCode&&(Q||(D=null,L[0]-=q[1],L[1]-=r[1],Q=2),H())}).on("keyup.brush",function(){32==s.event.keyCode&&2==Q&&(L[0]+=q[1],L[1]+=r[1],Q=0,H())});if(s.event.changedTouches?N.on("touchmove.brush",v).on("touchend.brush",
x):N.on("mousemove.brush",v).on("mouseup.brush",x),E.interrupt().selectAll("*").interrupt(),Q)L[0]=q[0]-L[0],L[1]=r[0]-L[1];else if(G){var P=+/w$/.test(G),G=+/^n/.test(G);F=[q[1-P]-L[0],r[1-G]-L[1]];L[0]=q[P];L[1]=r[G]}else s.event.altKey&&(D=L.slice());E.style("pointer-events","none").selectAll(".resize").style("display",null);s.select("body").style("cursor",B.style("cursor"));C({type:"brushstart"});v()}var g,k,m=qa(a,"brushstart","brush","brushend"),n=null,p=null,q=[0,0],r=[0,0],t=!0,w=!0,v=Gd[0];
return a.event=function(a){a.each(function(){var a=m.of(this,arguments),b={x:q,y:r,i:g,j:k},d=this.__chart__||b;this.__chart__=b;Za?s.select(this).transition().each("start.brush",function(){g=d.i;k=d.j;q=d.x;r=d.y;a({type:"brushstart"})}).tween("brush:brush",function(){var d=dc(q,b.x),f=dc(r,b.y);return g=k=null,function(e){q=b.x=d(e);r=b.y=f(e);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){g=b.i;k=b.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),
a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(n=b,v=Gd[!n<<1|!p],a):n},a.y=function(b){return arguments.length?(p=b,v=Gd[!n<<1|!p],a):p},a.clamp=function(b){return arguments.length?(n&&p?(t=!!b[0],w=!!b[1]):n?t=!!b:p&&(w=!!b),a):n&&p?[t,w]:n?t:p?w:null},a.extent=function(b){var d,f,e,h,m;return arguments.length?(n&&(d=b[0],f=b[1],p&&(d=d[0],f=f[0]),g=[d,f],n.invert&&(d=n(d),f=n(f)),d>f&&(m=d,d=f,f=m),(d!=q[0]||f!=q[1])&&(q=[d,f])),p&&(e=b[0],h=b[1],
n&&(e=e[1],h=h[1]),k=[e,h],p.invert&&(e=p(e),h=p(h)),e>h&&(m=e,e=h,h=m),(e!=r[0]||h!=r[1])&&(r=[e,h])),a):(n&&(g?(d=g[0],f=g[1]):(d=q[0],f=q[1],n.invert&&(d=n.invert(d),f=n.invert(f)),d>f&&(m=d,d=f,f=m))),p&&(k?(e=k[0],h=k[1]):(e=r[0],h=r[1],p.invert&&(e=p.invert(e),h=p.invert(h)),e>h&&(m=e,e=h,h=m))),n&&p?[[d,e],[f,h]]:n?[d,f]:p&&[e,h])},a.clear=function(){return a.empty()||(q=[0,0],r=[0,0],g=k=null),a},a.empty=function(){return!!n&&q[0]==q[1]||!!p&&r[0]==r[1]},s.rebind(a,m,"on")};var Ai={n:"ns-resize",
e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Gd=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Hd=A.format=bg.timeFormat,ng=Hd.utc,og=ng("%Y-%m-%dT%H:%M:%S.%LZ");Hd.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ad:og;Ad.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Ad.toString=og.toString;A.second=Ra(function(a){return new Y(1E3*Math.floor(a/1E3))},function(a,b){a.setTime(a.getTime()+1E3*
Math.floor(b))},function(a){return a.getSeconds()});A.seconds=A.second.range;A.seconds.utc=A.second.utc.range;A.minute=Ra(function(a){return new Y(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});A.minutes=A.minute.range;A.minutes.utc=A.minute.utc.range;A.hour=Ra(function(a){var b=a.getTimezoneOffset()/60;return new Y(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},function(a){return a.getHours()});
A.hours=A.hour.range;A.hours.utc=A.hour.utc.range;A.month=Ra(function(a){return a=A.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});A.months=A.month.range;A.months.utc=A.month.utc.range;var kc=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Id=[[A.second,1],[A.second,5],[A.second,15],[A.second,30],[A.minute,1],[A.minute,5],[A.minute,15],[A.minute,30],[A.hour,1],[A.hour,3],[A.hour,6],[A.hour,12],
[A.day,1],[A.day,2],[A.week,1],[A.month,1],[A.month,3],[A.year,1]],Bi=Hd.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",eb]]),bi={range:function(a,b,d){return s.range(Math.ceil(a/d)*d,+b,d).map(Ya)},floor:V,ceil:V};
Id.year=A.year;A.scale=function(){return Bd(s.scale.linear(),Id,Bi)};var pg=Id.map(function(a){return[a[0].utc,a[1]]}),Ci=ng.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",eb]]);pg.year=A.year.utc;
A.scale.utc=function(){return Bd(s.scale.linear(),pg,Ci)};s.text=Oc(function(a){return a.responseText});s.json=function(a,b){return Jb(a,"application/json",ci,b)};s.html=function(a,b){return Jb(a,"text/html",di,b)};s.xml=Oc(function(a){return a.responseXML});"function"==typeof define&&define.amd?define(s):"object"==typeof module&&module.exports&&(module.exports=s);this.d3=s}();this.j$=this.jStat=function(e,k){function d(b,d){var h=b>d?b:d;return e.pow(10,17-~~(e.log(0<h?h:-h)*e.LOG10E))}function g(b){return"[object Function]"===t.call(b)}function b(b){return"number"==typeof b&&b===b}function h(){return new h._init(arguments)}function m(){return 0}function p(){return 1}function n(b,d){return b===d?1:0}var q=Array.prototype.concat,r=Array.prototype.slice,t=Object.prototype.toString,x=Array.isArray||function(b){return"[object Array]"===t.call(b)};h.fn=h.prototype;h._init=
function(d){var e;if(x(d[0]))if(x(d[0][0])){g(d[1])&&(d[0]=h.map(d[0],d[1]));for(e=0;e<d[0].length;e++)this[e]=d[0][e];this.length=d[0].length}else this[0]=g(d[1])?h.map(d[0],d[1]):d[0],this.length=1;else{if(b(d[0]))this[0]=h.seq.apply(null,d);else{if(d[0]instanceof h)return h(d[0].toArray());this[0]=[]}this.length=1}return this};h._init.prototype=h.prototype;h._init.constructor=h;h.utils={calcRdx:d,isArray:x,isFunction:g,isNumber:b,toVector:function(b){return q.apply([],b)}};h.extend=function(b){var d,
e;if(1===arguments.length){for(e in b)h[e]=b[e];return this}for(d=1;d<arguments.length;d++)for(e in arguments[d])b[e]=arguments[d][e];return b};h.rows=function(b){return b.length||1};h.cols=function(b){return b[0].length||1};h.dimensions=function(b){return{rows:h.rows(b),cols:h.cols(b)}};h.row=function(b,d){return b[d]};h.col=function(b,d){for(var e=Array(b.length),h=0;h<b.length;h++)e[h]=[b[h][d]];return e};h.diag=function(b){for(var d=h.rows(b),e=Array(d),g=0;g<d;g++)e[g]=[b[g][g]];return e};h.antidiag=
function(b){for(var d=h.rows(b)-1,e=Array(d),g=0;0<=d;d--,g++)e[g]=[b[g][d]];return e};h.transpose=function(b){var d=[],e,h,g,k,m;x(b[0])||(b=[b]);h=b.length;g=b[0].length;for(m=0;m<g;m++){e=Array(h);for(k=0;k<h;k++)e[k]=b[k][m];d.push(e)}return 1===d.length?d[0]:d};h.map=function(b,d,e){var h,g,k,m;x(b[0])||(b=[b]);h=b.length;g=b[0].length;k=e?b:Array(h);for(e=0;e<h;e++)for(k[e]||(k[e]=Array(g)),m=0;m<g;m++)k[e][m]=d(b[e][m],e,m);return 1===k.length?k[0]:k};h.alter=function(b,d){return h.map(b,d,
!0)};h.create=function(b,d,e){var h=Array(b),k,m;g(d)&&(e=d,d=b);for(k=0;k<b;k++)for(h[k]=Array(d),m=0;m<d;m++)h[k][m]=e(k,m);return h};h.zeros=function(d,e){return b(e)||(e=d),h.create(d,e,m)};h.ones=function(d,e){return b(e)||(e=d),h.create(d,e,p)};h.rand=function(d,g){return b(g)||(g=d),h.create(d,g,e.random)};h.identity=function(d,e){return b(e)||(e=d),h.create(d,e,n)};h.symmetric=function(b){var d=b.length,e,h;if(b.length!==b[0].length)return!1;for(e=0;e<d;e++)for(h=0;h<d;h++)if(b[h][e]!==b[e][h])return!1;
return!0};h.clear=function(b){return h.alter(b,m)};h.seq=function(b,e,h,k){g(k)||(k=!1);var m=[],n=d(b,e);h=(e*n-b*n)/((h-1)*n);var p=b,q;for(q=0;p<=e;q++,p=(b*n+h*n*q)/n)m.push(k?k(p,q):p);return m};var v=h.prototype;return v.length=0,v.push=Array.prototype.push,v.sort=Array.prototype.sort,v.splice=Array.prototype.splice,v.slice=Array.prototype.slice,v.toArray=function(){return 1<this.length?r.call(this):r.call(this)[0]},v.map=function(b,d){return h(h.map(this,b,d))},v.alter=function(b){return h.alter(this,
b),this},function(b){for(var d=0;d<b.length;d++)(function(b){v[b]=function(d){var e=this,g;return d?(setTimeout(function(){d.call(e,v[b].call(e))}),this):(g=h[b](this),x(g)?h(g):g)}})(b[d])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(b){for(var d=0;d<b.length;d++)(function(b){v[b]=function(d,e){var g=this;return e?(setTimeout(function(){e.call(g,v[b].call(g,d))}),this):h(h[b](this,d))}})(b[d])}(["row","col"]),function(b){for(var d=0;d<b.length;d++){var e=b[d];
v[e]=new Function("return jStat(jStat."+e+".apply(null, arguments));")}}(["create","zeros","ones","rand","identity"]),h}(Math);
(function(e,k){function d(b,d){return b-d}var g=e.utils.isFunction;e.sum=function(b){for(var d=0,e=b.length;0<=--e;)d+=b[e];return d};e.sumsqrd=function(b){for(var d=0,e=b.length;0<=--e;)d+=b[e]*b[e];return d};e.sumsqerr=function(b){for(var d=e.mean(b),g=0,k=b.length,q;0<=--k;)q=b[k]-d,g+=q*q;return g};e.product=function(b){for(var d=1,e=b.length;0<=--e;)d*=b[e];return d};e.min=function(b){for(var d=b[0],e=0;++e<b.length;)b[e]<d&&(d=b[e]);return d};e.max=function(b){for(var d=b[0],e=0;++e<b.length;)b[e]>
d&&(d=b[e]);return d};e.mean=function(b){return e.sum(b)/b.length};e.meansqerr=function(b){return e.sumsqerr(b)/b.length};e.geomean=function(b){return k.pow(e.product(b),1/b.length)};e.median=function(b){var e=b.length;b=b.slice().sort(d);return e&1?b[e/2|0]:(b[e/2-1]+b[e/2])/2};e.cumsum=function(b){var d=b.length,e=Array(d),g;e[0]=b[0];for(g=1;g<d;g++)e[g]=e[g-1]+b[g];return e};e.diff=function(b){var d=[],e=b.length,g;for(g=1;g<e;g++)d.push(b[g]-b[g-1]);return d};e.mode=function(b){var e=b.length;
b=b.slice().sort(d);var g=1,k=0,q=0,r=[],t;for(t=0;t<e;t++)b[t]===b[t+1]?g++:(g>k?(r=[b[t]],k=g,q=0):g===k&&(r.push(b[t]),q++),g=1);return 0===q?r[0]:r};e.range=function(b){return e.max(b)-e.min(b)};e.variance=function(b,d){return e.sumsqerr(b)/(b.length-(d?1:0))};e.stdev=function(b,d){return k.sqrt(e.variance(b,d))};e.meandev=function(b){var d=0,g=e.mean(b),n;for(n=b.length-1;0<=n;n--)d+=k.abs(b[n]-g);return d/b.length};e.meddev=function(b){var d=0,g=e.median(b),n;for(n=b.length-1;0<=n;n--)d+=k.abs(b[n]-
g);return d/b.length};e.coeffvar=function(b){return e.stdev(b)/e.mean(b)};e.quartiles=function(b){var e=b.length;b=b.slice().sort(d);return[b[k.round(e/4)-1],b[k.round(e/2)-1],b[k.round(3*e/4)-1]]};e.quantiles=function(b,e,g,n){var q=b.slice().sort(d),r=[e.length];b=b.length;var t,x,v;"undefined"==typeof g&&(g=.375);"undefined"==typeof n&&(n=.375);for(t=0;t<e.length;t++)x=e[t],v=g+x*(1-g-n),v=b*x+v,x=k.floor(k.max(1,k.min(v,b-1))),v=k.max(0,k.min(v-x,1)),r[t]=(1-v)*q[x-1]+v*q[x];return r};e.percentileOfScore=
function(b,d,e){var g=0,k=b.length,r=!1,t;"strict"===e&&(r=!0);for(t=0;t<k;t++)e=b[t],(r&&e<d||!r&&e<=d)&&g++;return g/k};e.covariance=function(b,d){var g=e.mean(b),k=e.mean(d),q=b.length,r=Array(q),t;for(t=0;t<q;t++)r[t]=(b[t]-g)*(d[t]-k);return e.sum(r)/(q-1)};e.corrcoeff=function(b,d){return e.covariance(b,d)/e.stdev(b,1)/e.stdev(d,1)};var b=e.prototype;b.cumsum=function(d,k){var p=[],n=0,q=this;g(d)&&(k=d,d=!1);if(k)return setTimeout(function(){k.call(q,b.cumsum.call(q,d))}),this;if(1<this.length){for(q=
!0===d?this:this.transpose();n<q.length;n++)p[n]=e.cumsum(q[n]);return p}return e.cumsum(this[0],d)};(function(d){for(var k=0;k<d.length;k++)(function(d){b[d]=function(h,k){var m=[],t=0,x=this;g(h)&&(k=h,h=!1);if(k)return setTimeout(function(){k.call(x,b[d].call(x,h))}),this;if(1<this.length){for(x=!0===h?this:this.transpose();t<x.length;t++)m[t]=e[d](x[t]);return!0===h?e[d](e.utils.toVector(m)):m}return e[d](this[0],h)}})(d[k])})("sum sumsqrd sumsqerr product min max mean meansqerr geomean median diff mode range variance stdev meandev meddev coeffvar quartiles".split(" "));
(function(d){for(var k=0;k<d.length;k++)(function(d){b[d]=function(){var h=[],k=0,m=this,t=Array.prototype.slice.call(arguments);if(g(t[t.length-1])){var x=t[t.length-1],v=t.slice(0,t.length-1);return setTimeout(function(){x.call(m,b[d].apply(m,v))}),this}x=void 0;if(1<this.length){for(m=m.transpose();k<m.length;k++)h[k]=e[d].apply(m,[m[k]].concat(t));return h}return e[d].apply(m,[this[0]].concat(t))}})(d[k])})(["quantiles","percentileOfScore"])})(this.jStat,Math);
(function(e,k){e.gammaln=function(d){var e=0,b=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5.395239384953E-6],h=1.000000000190015,m,p;p=(m=d)+5.5;for(p-=(d+.5)*k.log(p);6>e;e++)h+=b[e]/++m;return k.log(2.5066282746310007*h/d)-p};e.gammafn=function(d){var e=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],b=[-30.8402300119739,315.35062697960416,
-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],h=!1,m=0,p=0,n=0,q,r,t,x;if(0>=d)if(x=d%1+3.6E-16)h=(d&1?-1:1)*k.PI/k.sin(k.PI*x),d=1-d;else return Infinity;t=d;1>d?r=d++:r=(d-=m=(d|0)-1)-1;for(q=0;8>q;++q)n=(n+e[q])*r,p=p*r+b[q];x=n/p+1;if(t<d)x/=t;else if(t>d)for(q=0;q<m;++q)x*=d,d++;return h&&(x=h/x),x};e.gammap=function(d,g){var b=e.gammaln(d),h=d,m=1/d,p=m,n=g+1-d,q=1/1E-30,r=1/n,t=r,x=1,v=-~(8.5*k.log(1<=d?d:1/d)+.4*d+17);if(0>
g||0>=d)return NaN;if(g<d+1){for(;x<=v;x++)m+=p*=g/++h;return m*k.exp(-g+d*k.log(g)-b)}for(;x<=v;x++)h=-x*(x-d),n+=2,r=h*r+n,q=n+h/q,r=1/r,t=t*r*q;return 1-t*k.exp(-g+d*k.log(g)-b)};e.factorialln=function(d){return 0>d?NaN:e.gammaln(d+1)};e.factorial=function(d){return 0>d?NaN:e.gammafn(d+1)};e.combination=function(d,g){return 170<d||170<g?k.exp(e.combinationln(d,g)):e.factorial(d)/e.factorial(g)/e.factorial(d-g)};e.combinationln=function(d,g){return e.factorialln(d)-e.factorialln(g)-e.factorialln(d-
g)};e.permutation=function(d,g){return e.factorial(d)/e.factorial(d-g)};e.betafn=function(d,g){return 0>=d||0>=g?void 0:170<d+g?k.exp(e.betaln(d,g)):e.gammafn(d)*e.gammafn(g)/e.gammafn(d+g)};e.betaln=function(d,g){return e.gammaln(d)+e.gammaln(g)-e.gammaln(d+g)};e.betacf=function(d,e,b){var h=1,m=e+b,p=e+1,n=e-1,q=1,r=1-m*d/p,t,x,v;1E-30>k.abs(r)&&(r=1E-30);for(v=r=1/r;100>=h&&!(t=2*h,x=h*(b-h)*d/((n+t)*(e+t)),r=1+x*r,1E-30>k.abs(r)&&(r=1E-30),q=1+x/q,1E-30>k.abs(q)&&(q=1E-30),r=1/r,v=v*r*q,x=-(e+
h)*(m+h)*d/((e+t)*(p+t)),r=1+x*r,1E-30>k.abs(r)&&(r=1E-30),q=1+x/q,1E-30>k.abs(q)&&(q=1E-30),r=1/r,t=r*q,v*=t,3E-7>k.abs(t-1));h++);return v};e.gammapinv=function(d,g){var b=0,h=g-1,m=e.gammaln(g),p,n,q,r,t;if(1<=d)return k.max(100,g+100*k.sqrt(g));if(0>=d)return 0;for(1<g?(r=k.log(h),t=k.exp(h*(r-1)-m),n=.5>d?d:1-d,q=k.sqrt(-2*k.log(n)),p=(2.30753+.27061*q)/(1+q*(.99229+.04481*q))-q,.5>d&&(p=-p),p=k.max(.001,g*k.pow(1-1/(9*g)-p/(3*k.sqrt(g)),3))):(q=1-g*(.253+.12*g),d<q?p=k.pow(d/q,1/g):p=1-k.log(1-
(d-q)/(1-q)));12>b;b++){if(0>=p)return 0;n=e.gammap(g,p)-d;1<g?q=t*k.exp(-(p-h)+h*(k.log(p)-r)):q=k.exp(-p+h*k.log(p)-m);q=n/q;p-=q/=1-.5*k.min(1,q*((g-1)/p-1));0>=p&&(p=.5*(p+q));if(k.abs(q)<1E-8*p)break}return p};e.erf=function(d){var e=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-9.46595344482036E-4,3.66839497852761E-4,4.2523324806907E-5,-2.0278578112534E-5,-1.624290004647E-6,1.30365583558E-6,1.5626441722E-8,-8.5238095915E-8,6.529054439E-9,5.059343495E-9,-9.91364156E-10,
-2.27365122E-10,9.6467911E-11,2.394038E-12,-6.886027E-12,8.94487E-13,3.13092E-13,-1.12708E-13,3.81E-16,7.106E-15,-1.523E-15,-9.4E-17,1.21E-16,-2.8E-17],b=e.length-1,h=!1,m=0,p=0,n,q,r,t;0>d&&(d=-d,h=!0);n=2/(2+d);for(q=4*n-2;0<b;b--)r=m,m=q*m-p+e[b],p=r;return t=n*k.exp(-d*d+.5*(e[0]+q*m)-p),h?t-1:1-t};e.erfc=function(d){return 1-e.erf(d)};e.erfcinv=function(d){var g=0,b,h,m;if(2<=d)return-100;if(0>=d)return 100;m=1>d?d:2-d;b=k.sqrt(-2*k.log(m/2));for(b=-.70711*((2.30753+.27061*b)/(1+b*(.99229+.04481*
b))-b);2>g;g++)h=e.erfc(b)-m,b+=h/(1.1283791670955126*k.exp(-b*b)-b*h);return 1>d?b:-b};e.ibetainv=function(d,g,b){var h=g-1,m=b-1,p=0,n,q,r,t,x,v,w,y,H;if(0>=d)return 0;if(1<=d)return 1;1<=g&&1<=b?(r=.5>d?d:1-d,t=k.sqrt(-2*k.log(r)),v=(2.30753+.27061*t)/(1+t*(.99229+.04481*t))-t,.5>d&&(v=-v),w=(v*v-3)/6,y=2/(1/(2*g-1)+1/(2*b-1)),H=v*k.sqrt(w+y)/y-(1/(2*b-1)-1/(2*g-1))*(w+5/6-2/(3*y)),v=g/(g+b*k.exp(2*H))):(n=k.log(g/(g+b)),q=k.log(b/(g+b)),t=k.exp(g*n)/g,x=k.exp(b*q)/b,H=t+x,d<t/H?v=k.pow(g*H*d,
1/g):v=1-k.pow(b*H*(1-d),1/b));for(n=-e.gammaln(g)-e.gammaln(b)+e.gammaln(g+b);10>p&&0!==v&&1!==v&&!(x=e.ibeta(v,g,b)-d,t=k.exp(h*k.log(v)+m*k.log(1-v)+n),x/=t,v-=t=x/(1-.5*k.min(1,x*(h/v-m/(1-v)))),0>=v&&(v=.5*(v+t)),1<=v&&(v=.5*(v+t+1)),k.abs(t)<1E-8*v&&0<p);p++);return v};e.ibeta=function(d,g,b){var h=0===d||1===d?0:k.exp(e.gammaln(g+b)-e.gammaln(g)-e.gammaln(b)+g*k.log(d)+b*k.log(1-d));return 0>d||1<d?!1:d<(g+1)/(g+b+2)?h*e.betacf(d,g,b)/g:1-h*e.betacf(1-d,b,g)/b};e.randn=function(d,g){var b,
h,m,p;g||(g=d);if(d)return e.create(d,g,function(){return e.randn()});do b=k.random(),h=1.7156*(k.random()-.5),m=b-.449871,p=k.abs(h)+.386595,m=m*m+p*(.196*p-.25472*m);while(.27597<m&&(.27846<m||h*h>-4*k.log(b)*b*b));return h/b};e.randg=function(d,g,b){var h=d,m,p,n;b||(b=g);d||(d=1);if(g)return m=e.zeros(g,b),m.alter(function(){return e.randg(d)}),m;1>d&&(d+=1);g=d-1/3;b=1/k.sqrt(9*g);do{do n=e.randn(),p=1+b*n;while(0>=p);p*=p*p;m=k.random()}while(m>1-.331*k.pow(n,4)&&k.log(m)>.5*n*n+g*(1-p+k.log(p)));
if(d==h)return g*p;do m=k.random();while(0===m);return k.pow(m,1/h)*g*p};(function(d){for(var g=0;g<d.length;g++)(function(b){e.fn[b]=function(){return e(e.map(this,function(d){return e[b](d)}))}})(d[g])})(["gammaln","gammafn","factorial","factorialln"]);(function(d){for(var g=0;g<d.length;g++)(function(b){e.fn[b]=function(){return e(e[b].apply(null,arguments))}})(d[g])})(["randn"])})(this.jStat,Math);
(function(e,k){(function(d){for(var g=0;g<d.length;g++)(function(b){e[b]=function(b,d,e){return this instanceof arguments.callee?(this._a=b,this._b=d,this._c=e,this):new arguments.callee(b,d,e)};e.fn[b]=function(d,g,k){d=e[b](d,g,k);return d.data=this,d};e[b].prototype.sample=function(d){var g=this._a,k=this._b,n=this._c;return d?e.alter(d,function(){return e[b].sample(g,k,n)}):e[b].sample(g,k,n)};(function(d){for(var g=0;g<d.length;g++)(function(d){e[b].prototype[d]=function(h){var g=this._a,k=this._b,
m=this._c;return!h&&0!==h&&(h=this.data),"number"!=typeof h?e.fn.map.call(h,function(h){return e[b][d](h,g,k,m)}):e[b][d](h,g,k,m)}})(d[g])})(["pdf","cdf","inv"]);(function(d){for(var g=0;g<d.length;g++)(function(d){e[b].prototype[d]=function(){return e[b][d](this._a,this._b,this._c)}})(d[g])})(["mean","median","mode","variance"])})(d[g])})("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy lognormal normal pareto studentt weibull uniform  binomial negbin hypgeom poisson triangular".split(" "));
e.extend(e.beta,{pdf:function(d,g,b){return 1<d||0>d?0:1==g&&1==b?1:512>g||512>b?k.pow(d,g-1)*k.pow(1-d,b-1)/e.betafn(g,b):k.exp((g-1)*k.log(d)+(b-1)*k.log(1-d)-e.betaln(g,b))},cdf:function(d,g,b){return 1<d||0>d?1*(1<d):e.ibeta(d,g,b)},inv:function(d,g,b){return e.ibetainv(d,g,b)},mean:function(d,e){return d/(d+e)},median:function(d,e){throw Error("median not yet implemented");},mode:function(d,e){return d*e/(k.pow(d+e,2)*(d+e+1))},sample:function(d,g){var b=e.randg(d);return b/(b+e.randg(g))},variance:function(d,
e){return d*e/(k.pow(d+e,2)*(d+e+1))}});e.extend(e.centralF,{pdf:function(d,g,b){return 0>d?void 0:k.sqrt(k.pow(g*d,g)*k.pow(b,b)/k.pow(g*d+b,g+b))/(d*e.betafn(g/2,b/2))},cdf:function(d,g,b){return e.ibeta(g*d/(g*d+b),g/2,b/2)},inv:function(d,g,b){return b/(g*(1/e.ibetainv(d,g/2,b/2)-1))},mean:function(d,e){return 2<e?e/(e-2):void 0},mode:function(d,e){return 2<d?e*(d-2)/(d*(e+2)):void 0},sample:function(d,g){var b=2*e.randg(d/2),h=2*e.randg(g/2);return b/d/(h/g)},variance:function(d,e){return 4>=
e?void 0:2*e*e*(d+e-2)/(d*(e-2)*(e-2)*(e-4))}});e.extend(e.cauchy,{pdf:function(d,e,b){return b/(k.pow(d-e,2)+k.pow(b,2))/k.PI},cdf:function(d,e,b){return k.atan((d-e)/b)/k.PI+.5},inv:function(d,e,b){return e+b*k.tan(k.PI*(d-.5))},median:function(d,e){return d},mode:function(d,e){return d},sample:function(d,g){return e.randn()*k.sqrt(1/(2*e.randg(.5)))*g+d}});e.extend(e.chisquare,{pdf:function(d,g){return k.exp((g/2-1)*k.log(d)-d/2-g/2*k.log(2)-e.gammaln(g/2))},cdf:function(d,g){return e.gammap(g/
2,d/2)},inv:function(d,g){return 2*e.gammapinv(d,.5*g)},mean:function(d){return d},median:function(d){return d*k.pow(1-2/(9*d),3)},mode:function(d){return 0<d-2?d-2:0},sample:function(d){return 2*e.randg(d/2)},variance:function(d){return 2*d}});e.extend(e.exponential,{pdf:function(d,e){return 0>d?0:e*k.exp(-e*d)},cdf:function(d,e){return 0>d?0:1-k.exp(-e*d)},inv:function(d,e){return-k.log(1-d)/e},mean:function(d){return 1/d},median:function(d){return 1/d*k.log(2)},mode:function(d){return 0},sample:function(d){return-1/
d*k.log(k.random())},variance:function(d){return k.pow(d,-2)}});e.extend(e.gamma,{pdf:function(d,g,b){return k.exp((g-1)*k.log(d)-d/b-e.gammaln(g)-g*k.log(b))},cdf:function(d,g,b){return e.gammap(g,d/b)},inv:function(d,g,b){return e.gammapinv(d,g)*b},mean:function(d,e){return d*e},mode:function(d,e){return 1<d?(d-1)*e:void 0},sample:function(d,g){return e.randg(d)*g},variance:function(d,e){return d*e*e}});e.extend(e.invgamma,{pdf:function(d,g,b){return k.exp(-(g+1)*k.log(d)-b/d-e.gammaln(g)+g*k.log(b))},
cdf:function(d,g,b){return 1-e.gammap(g,b/d)},inv:function(d,g,b){return b/e.gammapinv(1-d,g)},mean:function(d,e){return 1<d?e/(d-1):void 0},mode:function(d,e){return e/(d+1)},sample:function(d,g){return g/e.randg(d)},variance:function(d,e){return 2>=d?void 0:e*e/((d-1)*(d-1)*(d-2))}});e.extend(e.kumaraswamy,{pdf:function(d,e,b){return k.exp(k.log(e)+k.log(b)+(e-1)*k.log(d)+(b-1)*k.log(1-k.pow(d,e)))},cdf:function(d,e,b){return 1-k.pow(1-k.pow(d,e),b)},mean:function(d,g){return g*e.gammafn(1+1/d)*
e.gammafn(g)/e.gammafn(1+1/d+g)},median:function(d,e){return k.pow(1-k.pow(2,-1/e),1/d)},mode:function(d,e){return 1<=d&&1<=e&&1!==d&&1!==e?k.pow((d-1)/(d*e-1),1/d):void 0},variance:function(d,e){throw Error("variance not yet implemented");}});e.extend(e.lognormal,{pdf:function(d,e,b){return k.exp(-k.log(d)-.5*k.log(2*k.PI)-k.log(b)-k.pow(k.log(d)-e,2)/(2*b*b))},cdf:function(d,g,b){return.5+.5*e.erf((k.log(d)-g)/k.sqrt(2*b*b))},inv:function(d,g,b){return k.exp(-1.4142135623730951*b*e.erfcinv(2*d)+
g)},mean:function(d,e){return k.exp(d+e*e/2)},median:function(d,e){return k.exp(d)},mode:function(d,e){return k.exp(d-e*e)},sample:function(d,g){return k.exp(e.randn()*g+d)},variance:function(d,e){return(k.exp(e*e)-1)*k.exp(2*d+e*e)}});e.extend(e.normal,{pdf:function(d,e,b){return k.exp(-.5*k.log(2*k.PI)-k.log(b)-k.pow(d-e,2)/(2*b*b))},cdf:function(d,g,b){return.5*(1+e.erf((d-g)/k.sqrt(2*b*b)))},inv:function(d,g,b){return-1.4142135623730951*b*e.erfcinv(2*d)+g},mean:function(d,e){return d},median:function(d,
e){return d},mode:function(d,e){return d},sample:function(d,g){return e.randn()*g+d},variance:function(d,e){return e*e}});e.extend(e.pareto,{pdf:function(d,e,b){return d<=e?void 0:b*k.pow(e,b)/k.pow(d,b+1)},cdf:function(d,e,b){return 1-k.pow(e/d,b)},mean:function(d,e){return 1>=e?void 0:e*k.pow(d,e)/(e-1)},median:function(d,e){return d*e*k.SQRT2},mode:function(d,e){return d},variance:function(d,e){return 2>=e?void 0:d*d*e/(k.pow(e-1,2)*(e-2))}});e.extend(e.studentt,{pdf:function(d,g){return e.gammafn((g+
1)/2)/(k.sqrt(g*k.PI)*e.gammafn(g/2))*k.pow(1+d*d/g,-((g+1)/2))},cdf:function(d,g){var b=g/2;return e.ibeta((d+k.sqrt(d*d+g))/(2*k.sqrt(d*d+g)),b,b)},inv:function(d,g){var b=e.ibetainv(2*k.min(d,1-d),.5*g,.5);return b=k.sqrt(g*(1-b)/b),.5<d?b:-b},mean:function(d){return 1<d?0:void 0},median:function(d){return 0},mode:function(d){return 0},sample:function(d){return e.randn()*k.sqrt(d/(2*e.randg(d/2)))},variance:function(d){return 2<d?d/(d-2):1<d?Infinity:void 0}});e.extend(e.weibull,{pdf:function(d,
e,b){return 0>d?0:b/e*k.pow(d/e,b-1)*k.exp(-k.pow(d/e,b))},cdf:function(d,e,b){return 0>d?0:1-k.exp(-k.pow(d/e,b))},inv:function(d,e,b){return e*k.pow(-k.log(1-d),1/b)},mean:function(d,g){return d*e.gammafn(1+1/g)},median:function(d,e){return d*k.pow(k.log(2),1/e)},mode:function(d,e){return 1>=e?void 0:d*k.pow((e-1)/e,1/e)},sample:function(d,e){return d*k.pow(-k.log(k.random()),1/e)},variance:function(d,g){return d*d*e.gammafn(1+2/g)-k.pow(this.mean(d,g),2)}});e.extend(e.uniform,{pdf:function(d,e,
b){return d<e||d>b?0:1/(b-e)},cdf:function(d,e,b){return d<e?0:d<b?(d-e)/(b-e):1},mean:function(d,e){return.5*(d+e)},median:function(d,g){return e.mean(d,g)},mode:function(d,e){throw Error("mode is not yet implemented");},sample:function(d,e){return d/2+e/2+(e/2-d/2)*(2*k.random()-1)},variance:function(d,e){return k.pow(e-d,2)/12}});e.extend(e.binomial,{pdf:function(d,g,b){return 0===b||1===b?g*b===d?1:0:e.combination(g,d)*k.pow(b,d)*k.pow(1-b,g-d)},cdf:function(d,g,b){var h=[],k=0;if(0>d)return 0;
if(d<g){for(;k<=d;k++)h[k]=e.binomial.pdf(k,g,b);return e.sum(h)}return 1}});e.extend(e.negbin,{pdf:function(d,g,b){return d!==d|0?!1:0>d?0:e.combination(d+g-1,g-1)*k.pow(1-b,d)*k.pow(b,g)},cdf:function(d,g,b){var h=0,k=0;if(0>d)return 0;for(;k<=d;k++)h+=e.negbin.pdf(k,g,b);return h}});e.extend(e.hypgeom,{pdf:function(d,g,b,h){if(d!==d|0)return!1;if(0>d||d<b-(g-h)||d>h||d>b)return 0;if(2*b>g)return 2*h>g?e.hypgeom.pdf(g-b-h+d,g,g-b,g-h):e.hypgeom.pdf(h-d,g,g-b,h);if(2*h>g)return e.hypgeom.pdf(b-d,
g,b,g-h);if(b<h)return e.hypgeom.pdf(d,g,h,b);for(var m=1,p=0,n=0;n<d;n++){for(;1<m&&p<h;)m*=1-b/(g-p),p++;m*=(h-n)*(b-n)/((n+1)*(g-b-h+n+1))}for(;p<h;p++)m*=1-b/(g-p);return k.min(1,k.max(0,m))},cdf:function(d,g,b,h){if(0>d||d<b-(g-h))return 0;if(d>=h||d>=b)return 1;if(2*b>g)return 2*h>g?e.hypgeom.cdf(g-b-h+d,g,g-b,g-h):1-e.hypgeom.cdf(h-d-1,g,g-b,h);if(2*h>g)return 1-e.hypgeom.cdf(b-d-1,g,b,g-h);if(b<h)return e.hypgeom.cdf(d,g,h,b);for(var m=1,p=1,n=0,q=0;q<d;q++){for(;1<m&&n<h;){var r=1-b/(g-n),
p=p*r,m=m*r;n++}p*=(h-q)*(b-q)/((q+1)*(g-b-h+q+1));m+=p}for(;n<h;n++)m*=1-b/(g-n);return k.min(1,k.max(0,m))}});e.extend(e.poisson,{pdf:function(d,g){return k.pow(g,d)*k.exp(-g)/e.factorial(d)},cdf:function(d,g){var b=[],h=0;if(0>d)return 0;for(;h<=d;h++)b.push(e.poisson.pdf(h,g));return e.sum(b)},mean:function(d){return d},variance:function(d){return d},sample:function(d){var e=1,b=0;d=k.exp(-d);do b++,e*=k.random();while(e>d);return b-1}});e.extend(e.triangular,{pdf:function(d,e,b,h){return b<=
e||h<e||h>b?void 0:d<e||d>b?0:d<=h?2*(d-e)/((b-e)*(h-e)):2*(b-d)/((b-e)*(b-h))},cdf:function(d,e,b,h){return b<=e||h<e||h>b?void 0:d<e?0:d<=h?k.pow(d-e,2)/((b-e)*(h-e)):1-k.pow(b-d,2)/((b-e)*(b-h))},mean:function(d,e,b){return(d+e+b)/3},median:function(d,e,b){if(b<=(d+e)/2)return e-k.sqrt((e-d)*(e-b))/k.sqrt(2);if(b>(d+e)/2)return d+k.sqrt((e-d)*(b-d))/k.sqrt(2)},mode:function(d,e,b){return b},sample:function(d,e,b){var h=k.random();return h<(b-d)/(e-d)?d+k.sqrt(h*(e-d)*(b-d)):e-k.sqrt((1-h)*(e-d)*
(e-b))},variance:function(d,e,b){return(d*d+e*e+b*b-d*e-d*b-e*b)/18}})})(this.jStat,Math);
(function(e,k){var d=Array.prototype.push,g=e.utils.isArray;e.extend({add:function(b,d){return g(d)?(g(d[0])||(d=[d]),e.map(b,function(b,e,g){return b+d[e][g]})):e.map(b,function(b){return b+d})},subtract:function(b,d){return g(d)?(g(d[0])||(d=[d]),e.map(b,function(b,e,g){return b-d[e][g]||0})):e.map(b,function(b){return b-d})},divide:function(b,d){return g(d)?(g(d[0])||(d=[d]),e.multiply(b,e.inv(d))):e.map(b,function(b){return b/d})},multiply:function(b,d){var k,p,n,q,r=b.length,t=b[0].length,x=
e.zeros(r,n=g(d)?d[0].length:t),v=0;if(g(d)){for(;v<n;v++)for(k=0;k<r;k++){for(p=q=0;p<t;p++)q+=b[k][p]*d[p][v];x[k][v]=q}return 1===r&&1===v?x[0][0]:x}return e.map(b,function(b){return b*d})},dot:function(b,d){g(b[0])||(b=[b]);g(d[0])||(d=[d]);for(var k=1===b[0].length&&1!==b.length?e.transpose(b):b,p=1===d[0].length&&1!==d.length?e.transpose(d):d,n=[],q=0,r=k.length,t=k[0].length,x,v;q<r;q++){n[q]=[];for(v=x=0;v<t;v++)x+=k[q][v]*p[q][v];n[q]=x}return 1===n.length?n[0]:n},pow:function(b,d){return e.map(b,
function(b){return k.pow(b,d)})},abs:function(b){return e.map(b,function(b){return k.abs(b)})},norm:function(b,d){var e=0,p=0;isNaN(d)&&(d=2);for(g(b[0])&&(b=b[0]);p<b.length;p++)e+=k.pow(k.abs(b[p]),d);return k.pow(e,1/d)},angle:function(b,d){return k.acos(e.dot(b,d)/(e.norm(b)*e.norm(d)))},aug:function(b,e){for(var g=b.slice(),k=0;k<g.length;k++)d.apply(g[k],e[k]);return g},inv:function(b){var d=b.length,g=b[0].length,k=e.identity(d,g);b=e.gauss_jordan(b,k);for(var k=[],n=0,q;n<d;n++)for(k[n]=[],
q=g-1;q<b[0].length;q++)k[n][q-g]=b[n][q];return k},det:function(b){var d=b.length,e=2*d,g=Array(e),k=d-1,q=e-1,r=k-d+1,t=q,x=0,v=0,w;if(2===d)return b[0][0]*b[1][1]-b[0][1]*b[1][0];for(;x<e;x++)g[x]=1;for(x=0;x<d;x++){for(w=0;w<d;w++)g[0>r?r+d:r]*=b[x][w],g[t<d?t+d:t]*=b[x][w],r++,t--;r=--k-d+1;t=--q}for(x=0;x<d;x++)v+=g[x];for(;x<e;x++)v-=g[x];return v},gauss_elimination:function(b,d){var g=0,p=0,n=b.length,q=b[0].length,r=1,t=0,x=[],v;b=e.aug(b,d);for(v=b[0].length;g<n;g++){r=b[g][g];p=g;for(t=
g+1;t<q;t++)r<k.abs(b[t][g])&&(r=b[t][g],p=t);if(p!=g)for(t=0;t<v;t++)r=b[g][t],b[g][t]=b[p][t],b[p][t]=r;for(p=g+1;p<n;p++)for(r=b[p][g]/b[g][g],t=g;t<v;t++)b[p][t]-=r*b[g][t]}for(g=n-1;0<=g;g--){t=0;for(p=g+1;p<=n-1;p++)t=x[p]*b[g][p];x[g]=(b[g][v-1]-t)/b[g][g]}return x},gauss_jordan:function(b,d){for(var g=e.aug(b,d),p=g.length,n=g[0].length,q=0;q<p;q++){for(var r=q,t=q+1;t<p;t++)k.abs(g[t][q])>k.abs(g[r][q])&&(r=t);t=g[q];g[q]=g[r];g[r]=t;for(t=q+1;t<p;t++)for(c=g[t][q]/g[q][q],r=q;r<n;r++)g[t][r]-=
g[q][r]*c}for(q=p-1;0<=q;q--){c=g[q][q];for(t=0;t<q;t++)for(r=n-1;r>q-1;r--)g[t][r]-=g[q][r]*g[t][q]/c;g[q][q]/=c;for(r=p;r<n;r++)g[q][r]/=c}return g},lu:function(b,d){throw Error("lu not yet implemented");},cholesky:function(b,d){throw Error("cholesky not yet implemented");},gauss_jacobi:function(b,d,g,p){for(var n=0,q=0,r=b.length,t=[],x=[],v=[];n<r;n++)for(t[n]=[],x[n]=[],v[n]=[],q=0;q<r;q++)n>q?(t[n][q]=b[n][q],x[n][q]=v[n][q]=0):n<q?(x[n][q]=b[n][q],t[n][q]=v[n][q]=0):(v[n][q]=b[n][q],t[n][q]=
x[n][q]=0);b=e.multiply(e.multiply(e.inv(v),e.add(t,x)),-1);v=e.multiply(e.inv(v),d);d=g;g=e.add(e.multiply(b,g),v);for(n=2;k.abs(e.norm(e.subtract(g,d)))>p;)d=g,g=e.add(e.multiply(b,d),v),n++;return g},gauss_seidel:function(b,d,g,p){for(var n=0,q=b.length,r=[],t=[],x=[],v;n<q;n++)for(r[n]=[],t[n]=[],x[n]=[],v=0;v<q;v++)n>v?(r[n][v]=b[n][v],t[n][v]=x[n][v]=0):n<v?(t[n][v]=b[n][v],r[n][v]=x[n][v]=0):(x[n][v]=b[n][v],r[n][v]=t[n][v]=0);b=e.multiply(e.multiply(e.inv(e.add(x,r)),t),-1);r=e.multiply(e.inv(e.add(x,
r)),d);d=g;g=e.add(e.multiply(b,g),r);for(n=2;k.abs(e.norm(e.subtract(g,d)))>p;)d=g,g=e.add(e.multiply(b,d),r),n+=1;return g},SOR:function(b,d,g,p,n){for(var q=0,r=b.length,t=[],x=[],v=[],w;q<r;q++)for(t[q]=[],x[q]=[],v[q]=[],w=0;w<r;w++)q>w?(t[q][w]=b[q][w],x[q][w]=v[q][w]=0):q<w?(x[q][w]=b[q][w],t[q][w]=v[q][w]=0):(v[q][w]=b[q][w],t[q][w]=x[q][w]=0);b=e.multiply(e.inv(e.add(v,e.multiply(t,n))),e.subtract(e.multiply(v,1-n),e.multiply(x,n)));n=e.multiply(e.multiply(e.inv(e.add(v,e.multiply(t,n))),
d),n);d=g;g=e.add(e.multiply(b,g),n);for(q=2;k.abs(e.norm(e.subtract(g,d)))>p;)d=g,g=e.add(e.multiply(b,d),n),q++;return g},householder:function(b){for(var d=b.length,g=b[0].length,p=0,n=[],q=[],r;p<d-1;p++){q=0;for(n=p+1;n<g;n++)q+=b[n][p]*b[n][p];n=0<b[p+1][p]?-1:1;q=n*k.sqrt(q);r=k.sqrt((q*q-b[p+1][p]*q)/2);n=e.zeros(d,1);n[p+1][0]=(b[p+1][p]-q)/(2*r);for(q=p+2;q<d;q++)n[q][0]=b[q][p]/(2*r);q=e.subtract(e.identity(d,g),e.multiply(e.multiply(n,e.transpose(n)),2));b=e.multiply(q,e.multiply(b,q))}return b},
QR:function(b,d){for(var g=b.length,p=b[0].length,n=0,q=[],r=[],t=[],x;n<g-1;n++){r=0;for(q=n+1;q<p;q++)r+=b[q][n]*b[q][n];q=0<b[n+1][n]?-1:1;r=q*k.sqrt(r);x=k.sqrt((r*r-b[n+1][n]*r)/2);q=e.zeros(g,1);q[n+1][0]=(b[n+1][n]-r)/(2*x);for(r=n+2;r<g;r++)q[r][0]=b[r][n]/(2*x);r=e.subtract(e.identity(g,p),e.multiply(e.multiply(q,e.transpose(q)),2));b=e.multiply(r,b);d=e.multiply(r,d)}for(n=g-1;0<=n;n--){for(q=n+1;q<=p-1;q++);t[n]=d[n][0]/b[n][n]}return t},jacobi:function(b){for(var d=1,g=0,p=b.length,n=
e.identity(p,p),q=[],r,t,x,v,w;1===d;){g++;v=b[0][1];d=0;x=1;for(r=0;r<p;r++)for(t=0;t<p;t++)r!=t&&v<k.abs(b[r][t])&&(v=k.abs(b[r][t]),d=r,x=t);b[d][d]===b[x][x]?w=0<b[d][x]?k.PI/4:-k.PI/4:w=k.atan(2*b[d][x]/(b[d][d]-b[x][x]))/2;r=e.identity(p,p);r[d][d]=k.cos(w);r[d][x]=-k.sin(w);r[x][d]=k.sin(w);r[x][x]=k.cos(w);n=e.multiply(n,r);b=e.multiply(e.multiply(e.inv(r),b),r);d=0;for(r=1;r<p;r++)for(t=1;t<p;t++)r!=t&&.001<k.abs(b[r][t])&&(d=1)}for(r=0;r<p;r++)q.push(b[r][r]);return[n,q]},rungekutta:function(b,
d,e,g,k,q){var r,t,x;if(2===q)for(;g<=e;)r=d*b(g,k),t=d*b(g+d,k+r),k+=(r+t)/2,g+=d;if(4===q)for(;g<=e;)r=d*b(g,k),t=d*b(g+d/2,k+r/2),q=d*b(g+d/2,k+t/2),x=d*b(g+d,k+q),k+=(r+2*t+2*q+x)/6,g+=d;return k},romberg:function(b,d,e,g){for(var n=0,q=(e-d)/2,r=[],t=[],x=[],v,w,y;n<g/2;){y=b(d);w=d;for(v=0;w<=e;w+=q,v++)r[v]=w;v=r.length;for(w=1;w<v-1;w++)y+=(0!==w%2?4:2)*b(r[w]);y=q/3*(y+b(e));x[n]=y;q/=2;n++}b=x.length;for(v=1;1!==b;){for(w=0;w<b-1;w++)t[w]=(k.pow(4,v)*x[w+1]-x[w])/(k.pow(4,v)-1);b=t.length;
x=t;t=[];v++}return x},richardson:function(b,d,e,g){function n(b,d){for(var e=0,h=b.length,g;e<h;e++)b[e]===d&&(g=e);return g}for(var q=k.abs(e-b[n(b,e)+1]),r=0,t=[],x=[],v,w;g>=q;)v=n(b,e+g),w=n(b,e),t[r]=(d[v]-2*d[w]+d[2*w-v])/(g*g),g/=2,r++;d=t.length;for(b=1;1!=d;){for(e=0;e<d-1;e++)x[e]=(k.pow(4,b)*t[e+1]-t[e])/(k.pow(4,b)-1);d=x.length;t=x;x=[];b++}return t},simpson:function(b,d,e,g){g=(e-d)/g;var k=b(d),q=[],r=d,t=0;for(d=1;r<=e;r+=g,t++)q[t]=r;for(r=q.length;d<r-1;d++)k+=(0!==d%2?4:2)*b(q[d]);
return g/3*(k+b(e))},hermite:function(b,d,e,g){for(var k=b.length,q=0,r=0,t=[],x=[],v=[],w=[],y;r<k;r++){t[r]=1;for(y=0;y<k;y++)r!=y&&(t[r]*=(g-b[y])/(b[r]-b[y]));for(y=x[r]=0;y<k;y++)r!=y&&(x[r]+=1/(b[r]-b[y]));v[r]=(1-2*(g-b[r])*x[r])*t[r]*t[r];w[r]=(g-b[r])*t[r]*t[r];q+=v[r]*d[r]+w[r]*e[r]}return q},lagrange:function(b,d,e){for(var g=0,k=0,q,r,t=b.length;k<t;k++){r=d[k];for(q=0;q<t;q++)k!=q&&(r*=(e-b[q])/(b[k]-b[q]));g+=r}return g},cubic_spline:function(b,d,g){for(var k=b.length,n=0,q=[],r=[],
t=[],x=[],v=[],w=[],y=[];n<k-1;n++)v[n]=b[n+1]-b[n];t[0]=0;for(n=1;n<k-1;n++)t[n]=3/v[n]*(d[n+1]-d[n])-3/v[n-1]*(d[n]-d[n-1]);for(n=1;n<k-1;n++)q[n]=[],r[n]=[],q[n][n-1]=v[n-1],q[n][n]=2*(v[n-1]+v[n]),q[n][n+1]=v[n],r[n][0]=t[n];x=e.multiply(e.inv(q),r);for(n=0;n<k-1;n++)w[n]=(d[n+1]-d[n])/v[n]-v[n]*(x[n+1][0]+2*x[n][0])/3,y[n]=(x[n+1][0]-x[n][0])/(3*v[n]);for(n=0;n<k&&!(b[n]>g);n++);return n-=1,d[n]+(g-b[n])*w[n]+e.sq(g-b[n])*x[n]+(g-b[n])*e.sq(g-b[n])*y[n]},gauss_quadrature:function(){throw Error("gauss_quadrature not yet implemented");
},PCA:function(b){var d=b.length,g=b[0].length,k=0,n,q,r=[],t=[];n=[];for(var x=[],v=[],w=[],w=[],t=[],k=[],y=[],k=0;k<d;k++)r[k]=e.sum(b[k])/g;for(k=0;k<g;k++)for(w[k]=[],n=0;n<d;n++)w[k][n]=b[n][k]-r[n];w=e.transpose(w);for(k=0;k<d;k++)for(t[k]=[],n=0;n<d;n++)t[k][n]=e.dot([w[k]],[w[n]])/(g-1);n=e.jacobi(t);k=n[0];t=n[1];y=e.transpose(k);for(k=0;k<t.length;k++)for(n=k;n<t.length;n++)t[k]<t[n]&&(q=t[k],t[k]=t[n],t[n]=q,x=y[k],y[k]=y[n],y[n]=x);w=e.transpose(w);for(k=0;k<d;k++)for(v[k]=[],n=0;n<w.length;n++)v[k][n]=
e.dot([y[k]],[w[n]]);return[b,t,y,v]}});(function(b){for(var d=0;d<b.length;d++)(function(b){e.fn[b]=function(d,h){var g=this;return h?(setTimeout(function(){h.call(g,e.fn[b].call(g,d))},15),this):"number"==typeof e[b](this,d)?e[b](this,d):e(e[b](this,d))}})(b[d])})("add divide multiply subtract dot pow abs norm angle".split(" "))})(this.jStat,Math);
(function(e,k){var d=[].slice,g=e.utils.isNumber;e.extend({zscore:function(){var b=d.call(arguments);return g(b[1])?(b[0]-b[1])/b[2]:(b[0]-e.mean(b[1]))/e.stdev(b[1],b[2])},ztest:function(){var b=d.call(arguments);if(4===b.length){if(g(b[1])){var h=e.zscore(b[0],b[1],b[2]);return 1===b[3]?e.normal.cdf(-k.abs(h),0,1):2*e.normal.cdf(-k.abs(h),0,1)}h=b[0];return 1===b[2]?e.normal.cdf(-k.abs(h),0,1):2*e.normal.cdf(-k.abs(h),0,1)}h=e.zscore(b[0],b[1],b[3]);return 1===b[1]?e.normal.cdf(-k.abs(h),0,1):2*
e.normal.cdf(-k.abs(h),0,1)}});e.extend(e.fn,{zscore:function(b,d){return(b-this.mean())/this.stdev(d)},ztest:function(b,d,g){b=k.abs(this.zscore(b,g));return 1===d?e.normal.cdf(-b,0,1):2*e.normal.cdf(-b,0,1)}});e.extend({tscore:function(){var b=d.call(arguments);return 4===b.length?(b[0]-b[1])/(b[2]/k.sqrt(b[3])):(b[0]-e.mean(b[1]))/(e.stdev(b[1],!0)/k.sqrt(b[1].length))},ttest:function(){var b=d.call(arguments),h;return 5===b.length?(h=k.abs(e.tscore(b[0],b[1],b[2],b[3])),1===b[4]?e.studentt.cdf(-h,
b[3]-1):2*e.studentt.cdf(-h,b[3]-1)):g(b[1])?(h=k.abs(b[0]),1==b[2]?e.studentt.cdf(-h,b[1]-1):2*e.studentt.cdf(-h,b[1]-1)):(h=k.abs(e.tscore(b[0],b[1])),1==b[2]?e.studentt.cdf(-h,b[1].length-1):2*e.studentt.cdf(-h,b[1].length-1))}});e.extend(e.fn,{tscore:function(b){return(b-this.mean())/(this.stdev(!0)/k.sqrt(this.cols()))},ttest:function(b,d){return 1===d?1-e.studentt.cdf(k.abs(this.tscore(b)),this.cols()-1):2*e.studentt.cdf(-k.abs(this.tscore(b)),this.cols()-1)}});e.extend({anovafscore:function(){var b=
d.call(arguments),h,g,p,n,q,r;if(1===b.length){h=Array(b[0].length);for(q=0;q<b[0].length;q++)h[q]=b[0][q];b=h}if(2===b.length)return e.variance(b[0])/e.variance(b[1]);g=[];for(q=0;q<b.length;q++)g=g.concat(b[q]);p=e.mean(g);for(q=h=0;q<b.length;q++)h+=b[q].length*k.pow(e.mean(b[q])-p,2);h/=b.length-1;for(q=n=0;q<b.length;q++)for(p=e.mean(b[q]),r=0;r<b[q].length;r++)n+=k.pow(b[q][r]-p,2);return n/=g.length-b.length,h/n},anovaftest:function(){var b=d.call(arguments),h,k,p,n;if(g(b[0]))return 1-e.centralF.cdf(b[0],
b[1],b[2]);anovafscore=e.anovafscore(b);h=b.length-1;for(n=p=0;n<b.length;n++)p+=b[n].length;return k=p-h-1,1-e.centralF.cdf(anovafscore,h,k)},ftest:function(b,d,g){return 1-e.centralF.cdf(b,d,g)}});e.extend(e.fn,{anovafscore:function(){return e.anovafscore(this.toArray())},anovaftes:function(){var b=0,d;for(d=0;d<this.length;d++)b+=this[d].length;return e.ftest(this.anovafscore(),this.length-1,b-this.length)}});e.extend({normalci:function(){var b=d.call(arguments),h=Array(2),g;return 4===b.length?
g=k.abs(e.normal.inv(b[1]/2,0,1)*b[2]/k.sqrt(b[3])):g=k.abs(e.normal.inv(b[1]/2,0,1)*e.stdev(b[2])/k.sqrt(b[2].length)),h[0]=b[0]-g,h[1]=b[0]+g,h},tci:function(){var b=d.call(arguments),h=Array(2),g;return 4===b.length?g=k.abs(e.studentt.inv(b[1]/2,b[3]-1)*b[2]/k.sqrt(b[3])):g=k.abs(e.studentt.inv(b[1]/2,b[2].length-1)*e.stdev(b[2],!0)/k.sqrt(b[2].length)),h[0]=b[0]-g,h[1]=b[0]+g,h},significant:function(b,d){return b<d}});e.extend(e.fn,{normalci:function(b,d){return e.normalci(b,d,this.toArray())},
tci:function(b,d){return e.tci(b,d,this.toArray())}})})(this.jStat,Math);svgNamespaceUri="http://www.w3.org/2000/svg";xlinkUri="http://www.w3.org/1999/xlink";hasOwnProperty=function(e,k){var d=e.__proto__||e.constructor.prototype;return k in e&&(!(k in d)||d[k]!==e[k])};isObjInArray=function(e,k){var d=!1;0<=e.indexOf(k)&&(d=!0);return d};getKeys=function(e){var k=[],d;for(d in e)k.push(d);return k};eliminateDuplicates=function(e){var k,d=e.length,g=[],b={};for(k=0;k<d;k++)b[e[k]]=0;for(k in b)g.push(k);return g};
keepReplicates=function(e,k,d){for(var g={},b=0;b<e.length;b++){var h=e[b];h in g||(g[h]=0);g[h]++}k=null==k?2:k;e=[];for(h in g)null!=d&&d?g[h]<k&&e.push(h):g[h]>=k&&e.push(h);return e};beginsWith=function(e,k){return 0===e.indexOf(k)};endsWith=function(e,k){return-1!==e.indexOf(k,e.length-k.length)};lengthOfLongestString=function(e){var k=[],d;for(d in e)k.push(e[d].length);return Math.max.apply(null,k)};isNumerical=function(e){return null==e||""===e||isNaN(e)?!1:!0};
getListBoxSelectedValues=function(e){for(var k=[],d=0;d<e.length;d++){var g=e[d];g.selected&&k.push(g.value)}return k};compareAsNumeric=function(e,k){var d=parseFloat(e),g=parseFloat(k);if(isNumerical(d)&&isNumerical(g)){if(d<g)return-1;if(d>g)return 1}else if(d==d||g==g){if(d!=d)return-1;if(g!=g)return 1}return 0};compareAsString=function(e,k){var d=new String(e),g=new String(k);return"null"==d&&"null"!=g?-1:"null"!=d&&"null"==g?1:d.localeCompare(g)};
compareAsDate=function(e,k){var d=e,g=k;null==d?d="1000":""==d&&(d="1001");null==g?g="1000":""==g&&(g="1001");return new Date(d)-new Date(g)};
centeredRgbaColorMapper=function(e,k,d,g){var b=null,h=null==k?0:k,m=null==d?-1.96:d,p=null==g?1.96:g;return b=function(b){var d=1,g=169,k=169,x=169;b=parseFloat(b);null!=b&&b==b&&(b>h?(g=255,x=k=0,b>p?d=1:(d=(b-h)/(p-h),d=Math.abs(d),e&&(d=Math.log(d)))):b<h?(k=g=0,x=255,b<m?d=1:(d=(b-h)/(m-h),d=Math.abs(d),e&&(d=Math.log(d)))):(x=k=g=255,d=1));return"rgba("+g+","+k+","+x+","+d+")"}};
setupQuantileColorMapper=function(e,k){var d=k;null==d&&(d="rgb(255,255,217) rgb(237,248,177) rgb(199,233,180) rgb(127,205,187) rgb(65,182,196) rgb(29,145,192) rgb(34,94,168) rgb(37,52,148) rgb(8,29,88)".split(" "));var g=d.length;return d3.scale.quantile().domain([0,g-1,d3.max(e,function(b){return parseFloat(b)})]).range(d)};getXmlDom_url=function(e){xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");xmlhttp.open("GET",e,!1);xmlhttp.send();return xmlDoc=xmlhttp.responseXML};
getXmlDom_string=function(e){window.DOMParser?(parser=new DOMParser,xmlDoc=parser.parseFromString(e,"text/xml")):(xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),xmlDoc.async=!1,xmlDoc.loadXML(e));return xmlDoc};
getDateTime=function(){var e=new Date,k=e.getFullYear(),d=e.getMonth()+1,g=e.getDate(),b=e.getHours(),h=e.getMinutes(),e=e.getSeconds();1==d.toString().length&&(d="0"+d);1==g.toString().length&&(g="0"+g);1==b.toString().length&&(b="0"+b);1==h.toString().length&&(h="0"+h);1==e.toString().length&&(e="0"+e);return k+"/"+d+"/"+g+" "+b+":"+h+":"+e};
todaysDate=function(){var e=new Date,k=e.getDate();e.getDay();var d=e.getMonth()+1,e=e.getYear();return[,"January","February","March","April","May","June","July","August","September","October","November","December"][d]+" "+k+", "+(1E3>e?e+1900:e)};removeChildElems=function(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e};createDivElement=function(e,k){var d=document.createElement("div");null!=e&&(d.id=e);null!=k&&(d.className=k);return d};
swapContainingDivs=function(e,k){var d=k.parentNode;document.getElementById(e.parentNode.id).appendChild(k);document.getElementById(d.id).appendChild(e)};simpleAsyncGet=function(e,k){var d=new XMLHttpRequest;d.onreadystatechange=function(){this.readyState===(this.DONE||4)&&k(d.responseText)};d.open("GET",e,!0);d.setRequestHeader("X-Requested-With","XMLHttpRequest");d.send(null)};
getResponse=function(e){var k=null,d=null,d=new XMLHttpRequest;d.open("GET",e,!1);d.onload=function(){k=d.status;200!=k&&console.log("xhr status: "+k+" for "+e)};d.send(null);var g=null;200==k&&(g=d.responseText);return g};loadNewSettings=function(e){e=window.location.pathname+"?query="+JSON.stringify(e);window.open(e,"_self")};getQueryObj=function(){var e={};location.search.slice(1).split("&").forEach(function(k){k=k.split("=");e[k[0]]=decodeURIComponent(k[1])||""});return e};
getQueryStringParameterByName=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");e=(new RegExp("[\\?&]"+e+"=([^&#]*)")).exec(location.search);return null==e?"":decodeURIComponent(e[1].replace(/\+/g," "))};parseJson=function(e){return JSON.parse(e)};serializeJson=function(e,k){return k?JSON.stringify(e,null,"\t"):JSON.stringify(e)};prettyJson=function(e){return serializeJson(e,!0)};
bottomRoundedRectSvgPath=function(e,k,d,g,b){e=""+("M"+e+","+k)+("h"+d);e+="v"+(g-b);e+="a"+b+","+b+" 0 0 1 "+-1*b+","+b;e+="h"+-1*(d-2*b);e+="a"+b+","+b+" 0 0 1 "+-1*b+","+-1*b;e+="v"+-1*(g-b);return e+="z"};allRoundedRectSvgPath=function(e,k,d,g,b){e=""+("M"+e+","+(k+b))+("a"+b+","+b+" 0 0 1 "+b+","+-1*b);e+="h"+(d-2*b);e+="a"+b+","+b+" 0 0 1 "+b+","+b;e+="v"+(g-2*b);e+="a"+b+","+b+" 0 0 1 "+-1*b+","+b;e+="h"+-1*(d-2*b);e+="a"+b+","+b+" 0 0 1 "+-1*b+","+-1*b;e+="v"+-1*(g-2*b);return e+="z"};
allAngledRectSvgPath=function(e,k,d,g){var b=d>g?d/8:g/8;e=""+("M"+(e+b)+","+k)+("h"+(d-2*b));e+="l"+b+","+b;e+="v"+(g-2*b);e+="l"+-1*b+","+b;e+="h"+-1*(d-2*b);e+="l"+-1*b+","+-1*b;e+="v"+-1*(g-2*b);return e+="z"};
createSvgRingElement=function(e,k,d,g){function b(b,d,e,g){g=(g-90)*Math.PI/180;return{x:b+e*Math.cos(g),y:d+e*Math.sin(g)}}e=function(d,e,g,h,k){var t=b(d,e,g,k);d=b(d,e,g,h);return["M",t.x,t.y,"A",g,g,0,180>=k-h?"0":"1",0,d.x,d.y].join(" ")}(e,k,d,0,359.9);k=document.createElementNS(svgNamespaceUri,"path");k.setAttributeNS(null,"d",e);if(null!=g)for(var h in g)k.setAttributeNS(null,h,g[h]);return k};
createSvgCircleElement=function(e,k,d,g){var b=document.createElementNS(svgNamespaceUri,"circle");b.setAttributeNS(null,"cx",e);b.setAttributeNS(null,"cy",k);b.setAttributeNS(null,"r",d);if(null!=g)for(var h in g)b.setAttributeNS(null,h,g[h]);return b};
createSvgRectElement=function(e,k,d,g,b,h,m){var p=document.createElementNS(svgNamespaceUri,"rect");p.setAttributeNS(null,"x",e);p.setAttributeNS(null,"y",k);p.setAttributeNS(null,"rx",d);p.setAttributeNS(null,"ry",g);p.setAttributeNS(null,"width",b);p.setAttributeNS(null,"height",h);if(null!=m)for(var n in m)p.setAttributeNS(null,n,m[n]);return p};
createSvgImageElement=function(e,k,d,g,b,h){var m=document.createElementNS(svgNamespaceUri,"image");m.setAttributeNS(xlinkUri,"href",e);m.setAttributeNS(null,"x",k);m.setAttributeNS(null,"y",d);m.setAttributeNS(null,"width",g);m.setAttributeNS(null,"height",b);if(null!=h)for(var p in h)m.setAttributeNS(null,p,h[p]);return m};setCookie=function(e,k,d){if(d){var g=new Date;g.setTime(g.getTime()+864E5*d);d="; expires="+g.toGMTString()}else d="";document.cookie=e+"="+k+d+"; path=/"};
getCookie=function(e){e+="=";for(var k=document.cookie.split(";"),d=0;d<k.length;d++){for(var g=k[d];" "==g.charAt(0);)g=g.substring(1,g.length);if(0==g.indexOf(e))return g.substring(e.length,g.length)}return null};deleteCookie=function(e){setCookie(e,"",-1)};var eventHierarchyUrl="observation_deck/data/eventHierarchy.xml";function getEventElems(e,k){var d=[];e.find("event").each(function(e,b){var h=b.getAttribute("type");void 0===k||null===k?d.push(b):h===k&&d.push(b)});return d}
function getEventParentChildren(e,k){var d={parent:null,children:[]},g=getEventElems(e,k);$(g).each(function(b,e){if("event"!==e.tagName)return"continue";d.parent=e.parentNode.getAttribute("type");$(e.children).each(function(b,e){"event"===e.tagName&&d.children.push(e.getAttribute("type"))})});return d}
function tracebackToRoot(e,k){for(var d=[],g=getEventElems(e,k),b=0;b<g.length;b++){var h=g[b],m=[];d.push(m);h=h.getAttribute("type");for(h=getEventParentChildren(e,h).parent;void 0!==h&&null!==h;)m.push(h),h=getEventParentChildren(e,h).parent}return d}
function OD_eventMetadataAlbum(){this.album={};this.addEvent=function(e,k){var d=new OD_event(e);this.album[e.id]=d;d.data.setData(k,"numeric"==e.allowedValues||"expression"==e.allowedValues);return this};this.getEventIdsByType=function(){for(var e={},k=getKeys(this.album),d=0;d<k.length;d++){var g=k[d],b=this.getEvent(g).metadata.datatype;hasOwnProperty(e,b)||(e[b]=[]);e[b].push(g)}return e};this.getEventData=function(e){for(var k={},d=getKeys(this.album),g=0;g<d.length;g++){var b=d[g],h=this.getEvent(b).data.getData(e);
k[b]=h}return k};this.getAllDataAsList=function(){for(var e=[],k=this.getEventData(),d=getKeys(k),g=0;g<d.length;g++){for(var b=d[g],h=k[b].slice(),m=0;m<h.length;m++)h[m].eventId=b;e=e.concat(h)}return e};this.getAllSampleIds=function(){for(var e=[],k=getKeys(this.album),d=0;d<k.length;d++)var g=this.getEvent(k[d]).data.getAllSampleIds(),e=e.concat(g);return eliminateDuplicates(e)};this.selectSamples=function(e){var k=this.getAllSampleIds();if(0==e.length)return k;for(var d in e)var g=e[d].value,
k=this.getEvent(e[d].eventId).data.selectIds(g,k);return k};this.getEvent=function(e){return this.album[e]};this.getAllChildren=function(e,k){for(var d="undefined"===typeof k?[]:k,g=[],b=0;b<e.length;b++)var h=this.getEvent(e[b]).metadata,g=g.concat(getKeys(h.children));if(0==g.length)return d;d=d.concat(g);return this.getAllChildren(g,d)};this.multisortSamples=function(e){var k=this.getAllSampleIds();if(null==e)return k;var d=e.getSteps().slice();d.reverse();var g=this;k.sort(function(b,e){for(var k=
0,p=0;p<d.length;p++){var n=d[p].name,q=d[p].reverse,k=g.getEvent(n).metadata.allowedValues,r=g.getEvent(n).data.getData([b,e]),n=r[0].val,r=r[1].val,t=null,t="numeric"==k?compareAsNumeric:"categoric"==k?compareAsString:"expression"==k?compareAsNumeric:"date"==k?compareAsDate:compareAsString,k=t(n,r);q&&(k*=-1);if(0!=k)break}return k});return k};this.scaledExpressionRescaling=function(){};this.zScoreExpressionRescaling=function(){console.log("zScoreExpressionRescaling");var e=this.getEventIdsByType();
if(!hasOwnProperty(e,"expression data"))return console.log("no expression"),null;for(var e=e["expression data"],k={},d={stats:k},g=[],b=0;b<e.length;b++){var h=e[b],m=this.getEvent(h).data.getMeanAndSd();k[h]={};k[h]=m;for(var m=this.getEvent(h).data.getData(),p=0;p<m.length;p++){var n=m[p],q=n.val;n.val_orig=q;isNumerical(q)&&(n.val=(q-k[h].mean)/k[h].sd,g.push(n.val))}}d.maxVal=jStat.max(g);d.minVal=jStat.min(g);return d};this.betweenMeansExpressionRescaling=function(e,k,d){console.log("betweenMeansExpressionRescaling",
e,k,d);k=this.getEvent(e).data.selectIds(k);var g=null;null==d?(g=this.getEvent(e).data.selectIds(d),g=g.concat(k),g=eliminateDuplicates(g)):g=this.getEvent(e).data.selectIds(d);e=this.getEventIdsByType();if(!hasOwnProperty(e,"expression data"))return console.log("no expression"),null;e=e["expression data"];d={};for(var b={meanVals:d},h=[],m=0;m<e.length;m++){var p=e[m];d[p]={};d[p].group1=this.getEvent(p).data.getMeanAndSd(k).mean;d[p].group2=this.getEvent(p).data.getMeanAndSd(g).mean;for(var n=
(d[p].group2-d[p].group1)/2,p=this.getEvent(p).data.getData(),q=0;q<p.length;q++){var r=p[q],t=r.val;r.val_orig=t;isNumerical(t)&&(r.val=t-n,h.push(r.val))}}b.maxVal=jStat.max(h);b.minVal=jStat.min(h);return b};this.yuliaExpressionRescaling=function(e,k){console.log("yuliaExpressionRescaling",e,k);var d=this.getEvent(e).data.selectIds(k),g=this.getEventIdsByType();if(!hasOwnProperty(g,"expression data"))return console.log("no expression"),null;for(var g=g["expression data"],b={},h={meanVals:b},m=
[],p=0;p<g.length;p++){var n=g[p];b[n]=this.getEvent(n).data.getMeanAndSd(d).mean;for(var q=this.getEvent(n).data.getData(),r=0;r<q.length;r++){var t=q[r],x=t.val;t.val_orig=x;isNumerical(x)&&(t.val=x-b[n],m.push(t.val))}}h.maxVal=jStat.max(m);h.minVal=jStat.min(m);return h};this.fillInMissingSamples=function(e){for(var k=this.getAllSampleIds(),d=this.getEventIdsByType(),g=0;g<getKeys(d).length;g++)for(var b=getKeys(d)[g],h=0;h<d[b].length;h++){var m=d[b][h],p=this.getEvent(m).data.getAllSampleIds();
if(0!=k.length-p.length){for(var p=keepReplicates(k.concat(p),2,!0),n={},q=0;q<p.length;q++)n[p[q]]=e;this.getEvent(m).data.setData(n)}}}}function OD_event(e){this.metadata=new OD_eventMetadata(e);this.data=new OD_eventDataCollection}
function OD_eventMetadata(e){this.id=e.id;this.name=e.name;this.displayName=e.displayName;this.description=e.description;this.datatype=e.datatype;this.allowedValues=e.allowedValues;this.parents={};this.children={};this.addParent=function(e){this.parents[e]=e;return this};this.addChild=function(e){this.children[e]=e;return this};this.computeCompositeScore=function(e){return null}}
function OD_eventDataCollection(){function e(e,d){this.id=e;this.val=d}this.dataCollection=[];this.getValues=function(e){for(var d=[],g=this.getData(),b=0;b<g.length;b++)d.push(g[b].val);null!=e&&1==e&&(d=eliminateDuplicates(d));return d};this.setData=function(k,d){for(var g in k){var b=k[g];"NaN"!=b&&"null"!=b&&""!=b&&"N/A"!=b&&(null!=d&&1==d&&(b=parseFloat(b)),this.dataCollection.push(new e(g,b)))}return this};this.getData=function(k){var d=this.getAllSampleIds(!0);null==k&&(k=getKeys(d));for(var g=
[],b=0;b<k.length;b++){var h=k[b];h in d?g.push(this.dataCollection[d[h]]):g.push(new e(h,null))}return g};this.getAllSampleIds=function(e){for(var d={},g=0;g<this.dataCollection.length;g++)d[this.dataCollection[g].id]=g;return e?d:getKeys(d)};this.sortSamples=function(e,d){var g=this.getData(e),b=compareSamplesAsStrings;d=null==d?"categoric":d.toLowerCase();"numeric"==d||"expression"==d?b=compareSamplesAsNumeric:"date"==d&&(b=compareSamplesAsDate);g.sort(b);for(var b=[],h=0;h<g.length;h++)b.push(g[h].id);
return b};this.selectIds=function(e,d){for(var g=[],b=null==d?this.getData():this.getData(d),h=0;h<b.length;h++){var m=b[h];m.val==e&&g.push(m.id)}return g};this.getMeanAndSd=function(e){var d={mean:0,sd:0},g=this.getAllSampleIds(!0);null==e&&(e=getKeys(g));for(var b=[],h=0;h<e.length;h++){var m=e[h];m in g&&(m=this.dataCollection[g[m]].val,isNumerical(m)&&b.push(m))}d.mean=jStat.mean(b);d.sd=jStat.stdev(b);return d}}
function sortingSteps(e){this.steps=[];null!=e&&(this.steps=e);this.getSteps=function(){return this.steps};this.getIndex=function(e){for(var d=0;d<this.steps.length;d++)if(this.steps[d].name==e)return d;return-1};this.addStep=function(e){var d=this.getIndex(e);0<=d?(e=this.steps.splice(d,1)[0],e.reverse=!e.reverse,this.steps.push(e)):this.steps.push({name:e,reverse:!1})};this.removeStep=function(e){e=this.getIndex(e);0<=e&&this.steps.splice(e,1)};this.clearSteps=function(){this.steps.splice(0,this.steps.length)}}
function sampleSelectionCriteria(){this.criteria=[];this.getCriteria=function(){return this.criteria};this.addCriteria=function(e,k){var d={eventId:feature,value:k},g;for(g in this.criteria)if(JSON.stringify(this.criteria[g])==JSON.stringify(d))return;this.criteria.push(d)};this.removeCriteria=function(e,k){for(var d=0;d<this.criteria.length;d++)if(this.criteria[d].eventId==e&&this.criteria[d].value==k){this.criteria.splice(d,1);break}};this.clearCriteria=function(){this.criteria.splice(0,this.criteria.length)}}
;function transposeClinicalData(e,k){for(var d={},g=0;g<e.length;g++){var b=e[g],h=b[k],m;for(m in b)m in d||(d[m]={}),d[m][h]=b[m]}return d}
function getClinicalData(e,k){for(var d=getResponse(e).split("\n"),g=[],b=[],h=[],m=0;m<d.length;m++){var p=d[m];beginsWith(p,"#")?b.push(p):beginsWith(p,"STRING")?h=p.split("\t"):g.push(p)}d=d3.tsv.parse(g.join("\n"));g=transposeClinicalData(d,"SAMPLE_ID");delete g.SAMPLE_ID;b=getKeys(g);for(m=0;m<b.length;m++){var p=b[m],n=g[p],q=h[m+1],r="categoric";"number"==q.toLowerCase()?r="numeric":"date"==q.toLowerCase()&&(r="date");k.addEvent({id:p,name:null,displayName:null,description:null,datatype:"clinical data",
allowedValues:r},n)}return d}function getClinicalData_old(e,k){var d=getResponse(e),d=d3.tsv.parse(d),d=transposeClinicalData(d,"CASE_ID"),g;for(g in d){var b=d[g],h=g,m=endsWith(h.toLowerCase(),"_score")?"numeric":"categoric";k.addEvent({id:h,name:null,displayName:null,description:null,datatype:"clinical data",allowedValues:m},b)}}
function getMutationData(e,k){for(var d=getResponse(e),g=d3.tsv.parse(d),d={},b=0;b<g.length;b++){var h=g[b],m=h.Hugo_Symbol,h=h.Tumor_Sample_Barcode,h=h.replace(/_/g,"-"),h=h.replace(/[A-Z]$/,"");hasOwnProperty(d,m)||(d[m]={},d[m].metadata={id:m+"_mut",name:null,displayName:null,description:null,datatype:"mutation data",allowedValues:"categoric"},d[m].data={});d[m].data[h]=!0}g=getKeys(d);for(b=0;b<g.length;b++)m=d[g[b]],k.addEvent(m.metadata,m.data);return d}
function getMutationData_old(e){var k=getResponse(e).split("\n"),d=[],g=[];for(e=0;e<k.length;e++){var b=k[e];beginsWith(b,"#")?g.push(b):d.push(b)}k=d3.tsv.parse(d.join("\n"));for(e=0;e<k.length;e++)d=k[e],g=d.COMMON,delete d.GENE_ID,delete d.COMMON,OD_eventAlbum.addEvent({id:g+"_mutation",name:null,displayName:null,description:null,datatype:"mutation",allowedValues:"numeric"},d);return k}
function getExpressionData(e,k){var d=getResponse(e),d=d3.tsv.parse(d),g;for(g in d){var b=d[g],h=b[""];delete b[""];k.addEvent({id:h+"_mRNA",name:null,displayName:null,description:null,datatype:"expression data",allowedValues:"expression"},b)}}
mongoClinicalData=function(e,k){for(var d=0;d<e.length;d++){var g=e[d],b=g.sample.trim();if("Patient ID"!=b)for(var h=getKeys(g),m=0;m<h.length;m++){var p=h[m];if(!isObjInArray(["_id","sample"],p)){var n=k.getEvent(p);null==n&&(k.addEvent({id:p,name:null,displayName:null,description:null,datatype:"clinical data",allowedValues:"categoric"},[]),n=k.getEvent(p));var q={};q[b]=g[p];n.data.setData(q)}}}return null};
mongoExpressionData=function(e,k){for(var d=0;d<e.length;d++)for(var g=e[d],b=g.gene.trim()+"_mRNA",h=getKeys(g),m=0;m<h.length;m++){var p=h[m];if(!isObjInArray(["_id","gene"],p)){var n=k.getEvent(b);null==n&&(k.addEvent({id:b,name:null,displayName:null,description:null,datatype:"expression data",allowedValues:"numeric"},[]),n=k.getEvent(b));var q={};q[p]=parseFloat(g[p]);n.data.setData(q)}}return null};buildObservationDeck=function(e,k){k.containerDivId=e.id;k=getConfiguration(k);drawMatrix(e,k);setupContextMenus(k)};
getConfiguration=function(e){null==e&&(e={});var k=parseJson(getCookie("od_config"))||{};e.querySettings=k;k=null;"eventAlbum"in e?k=e.eventAlbum:(k=new OD_eventMetadataAlbum,e.eventAlbum=k);"clinicalUrl"in e&&getClinicalData(e.clinicalUrl,k);"expressionUrl"in e&&getExpressionData(e.expressionUrl,k);"mutationUrl"in e&&getMutationData(e.mutationUrl,k);if("mongoData"in e){var d=e.mongoData;"clinical"in d&&mongoClinicalData(d.clinical,k);"expression"in d&&mongoExpressionData(d.expression,k)}return e};
setupContextMenus=function(e){setupColLabelContextMenu(e);setupRowLabelContextMenu(e);setupCategoricCellContextMenu(e)};
setupColLabelContextMenu=function(e){$.contextMenu({selector:".colLabel",callback:function(e,d){var g=this[0].textContent,b=0<=this[0].getAttribute("class").indexOf("axis")?!0:!1;b&&(b=0<=this[0].getAttribute("class").indexOf("rowLabel")?"row":"column");console.log(e,g,b)},items:{reset:{name:"reset",icon:null,disabled:!1,callback:function(k,d){deleteCookie("od_config");var g=document.getElementById(e.containerDivId);buildObservationDeck(g,e)}}}})};
setupRowLabelContextMenu=function(e){var k=e.querySettings;$.contextMenu({selector:".rowLabel",callback:function(d,e){var b=this[0].textContent,h=0<=this[0].getAttribute("class").indexOf("axis")?!0:!1;h&&(h=0<=this[0].getAttribute("class").indexOf("rowLabel")?"row":"column");console.log(d,b,h)},items:{sort:{name:"sort",icon:null,disabled:!1,callback:function(d,g){var b=this[0].textContent,h=0<=this[0].getAttribute("class").indexOf("axis")?!0:!1;if(h){var h=0<=this[0].getAttribute("class").indexOf("rowLabel")?
"row":"column",m="colSort";"row"!=h&&(m="rowSort");h=null;h=m in k?new sortingSteps(k[m].steps):new sortingSteps;h.addStep(b);k[m]=h;setCookie("od_config",JSON.stringify(k));b=document.getElementById(e.containerDivId);buildObservationDeck(b,e)}else console.log("exit out because not a row or a column")}},sep1:"---------",expand:{name:"expand",icon:null,disabled:!0},collapse:{name:"collapse",icon:null,disabled:!0},reset:{name:"reset",icon:null,disabled:!1,callback:function(d,g){deleteCookie("od_config");
var b=document.getElementById(e.containerDivId);buildObservationDeck(b,e)}}}})};
setupCategoricCellContextMenu=function(e){var k=e.querySettings;$.contextMenu({selector:".categoric",callback:function(d,e){},items:{test:{name:"test expression rescaling",icon:null,disabled:!1,callback:function(d,g){var b=this[0],h=b.getAttribute("eventId");b.getAttribute("sampleId");b=b.getAttribute("val");console.log("key:",d,"eventId:",h,"val:",b);console.log("href",window.location.href);console.log("host",window.location.host);console.log("pathname",window.location.pathname);console.log("search",
window.location.search);k.yulia_rescaling={eventId:h,val:b};setCookie("od_config",JSON.stringify(k));h=document.getElementById(e.containerDivId);buildObservationDeck(h,e)}},sep1:"---------",reset:{name:"reset",icon:null,disabled:!1,callback:function(d,g){deleteCookie("od_config");var b=document.getElementById(e.containerDivId);buildObservationDeck(b,e)}}}})};
drawMatrix=function(e,k){k.rowClickback=function(b,d){console.log("rowClickback: "+b)};k.columnClickback=function(b,d){alert("open page for sample: "+b)};k.cellClickback=function(b,d){console.log("cellClickback: r"+b.eventId+" c"+b.id+" val:"+b.val)};k.rowRightClickback=function(b,d){console.log("rowRightClickback: "+b);d3.event.preventDefault()};k.columnRightClickback=function(b,d){console.log("columnRightClickback: "+b);d3.event.preventDefault()};k.cellRightClickback=function(b,d){console.log("cellRightClickback: r"+
b.eventId+" c"+b.id+" val:"+b.val);d3.event.preventDefault()};var d=removeChildElems(e),g=k.eventAlbum;g.fillInMissingSamples(null);var b=g.getEventIdsByType(),h=[],m;for(m in b)h=h.concat(b[m]);var p=k.querySettings;m=null;hasOwnProperty(b,"expression data")?hasOwnProperty(p,"yulia_rescaling")?(b=p.yulia_rescaling,m=g.yuliaExpressionRescaling(b.eventId,b.val)):m=g.zScoreExpressionRescaling():console.log("no expression data to rescale");b=centeredRgbaColorMapper(!1);null!=m&&(b=centeredRgbaColorMapper(!1,
0,m.minVal,m.maxVal));var n={};for(m=0;m<h.length;m++){var q=h[m],r=g.getEvent(q).metadata.allowedValues;if("categoric"==r)n[q]=d3.scale.category10();else if("numeric"==r){for(var t=g.getEvent(q).data.getValues(),r=[],x=0;x<t.length;x++){var v=t[x];isNumerical(v)&&r.push(v)}t=Math.min.apply(null,r);r=Math.max.apply(null,r);n[q]=centeredRgbaColorMapper(!1,0,t,r)}else n[q]="expression"==r?b:d3.scale.category10()}q=b=null;"colSort"in p&&(q=new sortingSteps(p.colSort.steps));var b=g.multisortSamples(q),
w={};for(m in b)r=b[m],w[r]=m;p=[];if(null!=q){r=q.getSteps();for(t=0;t<r.length;t++)q=r[t].name,p.push(q);p.reverse()}for(r=0;r<h.length;r++)q=h[r],isObjInArray(p,q)||p.push(q);var y={};for(m in p)r=p[m],y[r]=m;h=lengthOfLongestString(b);m=lengthOfLongestString(p);h=3<h?9*h:30;m=1<m?8*m:15;var q=document.documentElement.clientWidth,H=Math.floor((q-m-0)/(b.length>p.length?b.length:p.length)),r=h+0+H*p.length,d=d3.select(d).append("svg").attr({width:q,height:r,viewBox:"0 0 "+q+" "+r,perserveAspectRatio:"xMinYMin meet"}).append("g").attr({transform:"translate("+
m+","+h+")"}),h=-6;m=H/1.5;h=d.selectAll(".rowLabel").data(p).enter().append("text").text(function(b){return b}).attr({x:0,y:function(b,d){return d*H},transform:"translate("+h+", "+m+")","class":function(b,d){return"rowLabel mono axis unselectable"}}).style("text-anchor","end");h.on("click",k.rowClickback);h.on("contextmenu",k.rowRightClickback);h=Math.floor(H/5);m=-1*Math.floor(H/3);h=d.selectAll(".colLabel").data(b).enter().append("text").text(function(b){return b}).attr({y:function(b,d){return(d+
1)*H},x:0,transform:"rotate(-90) translate("+h+", "+m+")","class":function(b,d){return"colLabel mono axis unselectable"}}).style("text-anchor","start");h.on("click",k.columnClickback);h.on("contextmenu",k.columnRightClickback);h=g.getAllDataAsList();d=d.selectAll(".cell").data(h).enter().append(function(b){var d=document.createElementNS(svgNamespaceUri,"g");d.setAttributeNS(null,"class","cell");var e=w[b.id]*H,h=y[b.eventId]*H,k,m,p=H,q=H,r={"class":"bordered"};k=b.eventId;r.fill=null==k||null==b.val?
"lightgrey":"white";d.appendChild(createSvgRectElement(e,h,4,4,p,q,r));if(null==k||null==b.val)return d;r=b.val;e=w[b.id]*H;h=y[b.eventId]*H;m=k=4;q=p=H;r={stroke:"#E6E6E6","stroke-width":"2px",fill:(0,n[b.eventId])(r)};g.getEvent(b.eventId).metadata.allowedValues&&(r["class"]="categoric",r.eventId=b.eventId,r.sampleId=b.id,r.val=b.val);d.appendChild(createSvgRectElement(e,h,k,m,p,q,r));return d});d.on("click",k.cellClickback).on("contextmenu",k.cellRightClickback);d.append("title").text(function(b){return"r:"+
b.eventId+"\n\nc:"+b.id+"\n\nval:"+b.val});return k};
